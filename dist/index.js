// @bun
var Jm1=Object.create;var{getPrototypeOf:Xm1,defineProperty:T_,getOwnPropertyNames:Ym1}=Object;var Wm1=Object.prototype.hasOwnProperty;var l8=($,F,A)=>{A=$!=null?Jm1(Xm1($)):{};let J=F||!$||!$.__esModule?T_(A,"default",{value:$,enumerable:!0}):A;for(let X of Ym1($))if(!Wm1.call(J,X))T_(J,X,{get:()=>$[X],enumerable:!0});return J};var O=($,F)=>()=>(F||$((F={exports:{}}).exports,F),F.exports);var l2=($,F)=>{for(var A in F)T_($,A,{get:F[A],enumerable:!0,configurable:!0,set:(J)=>F[A]=()=>J})};var x=($,F)=>()=>($&&(F=$($=0)),F);var Z1=import.meta.require;var Dk=O((tm1)=>{var Zm1=(()=>{let $=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return(F)=>$.call(F)})();function MX($){return Zm1($)==="Uint8Array"}function e_($){return typeof $==="object"&&$!=null&&Symbol.toStringTag in $&&($[Symbol.toStringTag]==="ArrayBuffer"||$[Symbol.toStringTag]==="SharedArrayBuffer")}function KG($){return $ instanceof RegExp||Object.prototype.toString.call($)==="[object RegExp]"}function $k($){return typeof $==="object"&&$!=null&&Symbol.toStringTag in $&&$[Symbol.toStringTag]==="Map"}function BG($){return $ instanceof Date||Object.prototype.toString.call($)==="[object Date]"}function Q7($,F){return JSON.stringify($,(A,J)=>{if(typeof J==="bigint")return{$numberLong:`${J}`};else if($k(J))return Object.fromEntries(J);return J})}function Dm1($){if($!=null&&typeof $==="object"&&"stylize"in $&&typeof $.stylize==="function")return $.stylize}var bW=7,LG=Symbol.for("@@mdb.bson.version"),ZK=2147483647,DK=-2147483648,c61=Math.pow(2,63)-1,l61=-Math.pow(2,63),p61=Math.pow(2,53),i61=-Math.pow(2,53),Fk=1,n61=2,Ak=3,r61=4,Jk=5,Gm1=6,a61=7,t61=8,s61=9,Xk=10,uV=11,zm1=12,Yk=13,o61=14,e61=15,YK=16,$21=17,Wk=18,F21=19,A21=255,J21=127,Hm1=0,Zk=4,X21=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127});class w1 extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor($,F){super($,F)}static isBSONError($){return $!=null&&typeof $==="object"&&"bsonError"in $&&$.bsonError===!0&&"name"in $&&"message"in $&&"stack"in $}}class RX extends w1{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${bW}.x.x`)}}class WK extends w1{get name(){return"BSONRuntimeError"}constructor($){super($)}}class Y$ extends w1{get name(){return"BSONOffsetError"}offset;constructor($,F,A){super(`${$}. offset: ${F}`,A);this.offset=F}}var T61,j61;function Y21($,F,A,J){if(J){T61??=new TextDecoder("utf8",{fatal:!0});try{return T61.decode($.subarray(F,A))}catch(X){throw new w1("Invalid UTF-8 string in BSON document",{cause:X})}}return j61??=new TextDecoder("utf8",{fatal:!1}),j61.decode($.subarray(F,A))}function W21($,F,A){if($.length===0)return"";let J=A-F;if(J===0)return"";if(J>20)return null;if(J===1&&$[F]<128)return String.fromCharCode($[F]);if(J===2&&$[F]<128&&$[F+1]<128)return String.fromCharCode($[F])+String.fromCharCode($[F+1]);if(J===3&&$[F]<128&&$[F+1]<128&&$[F+2]<128)return String.fromCharCode($[F])+String.fromCharCode($[F+1])+String.fromCharCode($[F+2]);let X=[];for(let Y=F;Y<A;Y++){let W=$[Y];if(W>127)return null;X.push(W)}return String.fromCharCode(...X)}function Um1($,F,A){if(F.length===0)return 0;if(F.length>25)return null;if($.length-A<F.length)return null;for(let J=0,X=A;J<F.length;J++,X++){let Y=F.charCodeAt(J);if(Y>127)return null;$[X]=Y}return F.length}function Qm1($){return X$.fromNumberArray(Array.from({length:$},()=>Math.floor(Math.random()*256)))}function Km1($){return crypto.getRandomValues(X$.allocate($))}var Bm1=(()=>{let{crypto:$}=globalThis;if($!=null&&typeof $.getRandomValues==="function")return Km1;else return Qm1})(),X$={isUint8Array:MX,toLocalBufferType($){if(Buffer.isBuffer($))return $;if(ArrayBuffer.isView($))return Buffer.from($.buffer,$.byteOffset,$.byteLength);let F=$?.[Symbol.toStringTag]??Object.prototype.toString.call($);if(F==="ArrayBuffer"||F==="SharedArrayBuffer"||F==="[object ArrayBuffer]"||F==="[object SharedArrayBuffer]")return Buffer.from($);throw new w1("Cannot create Buffer from the passed potentialBuffer.")},allocate($){return Buffer.alloc($)},allocateUnsafe($){return Buffer.allocUnsafe($)},compare($,F){return X$.toLocalBufferType($).compare(F)},concat($){return Buffer.concat($)},equals($,F){return X$.toLocalBufferType($).equals(F)},fromNumberArray($){return Buffer.from($)},fromBase64($){return Buffer.from($,"base64")},fromUTF8($){return Buffer.from($,"utf8")},toBase64($){return X$.toLocalBufferType($).toString("base64")},fromISO88591($){return Buffer.from($,"binary")},toISO88591($){return X$.toLocalBufferType($).toString("binary")},fromHex($){return Buffer.from($,"hex")},toHex($){return X$.toLocalBufferType($).toString("hex")},toUTF8($,F,A,J){let X=A-F<=20?W21($,F,A):null;if(X!=null)return X;let Y=X$.toLocalBufferType($).toString("utf8",F,A);if(J){for(let W=0;W<Y.length;W++)if(Y.charCodeAt(W)===65533){Y21($,F,A,!0);break}}return Y},utf8ByteLength($){return Buffer.byteLength($,"utf8")},encodeUTF8Into($,F,A){let J=Um1($,F,A);if(J!=null)return J;return X$.toLocalBufferType($).write(F,A,void 0,"utf8")},randomBytes:Bm1,swap32($){return X$.toLocalBufferType($).swap32()}};function wm1(){let{navigator:$}=globalThis;return typeof $==="object"&&$.product==="ReactNative"}function qm1($){if($<0)throw RangeError(`The argument 'byteLength' is invalid. Received ${$}`);return kW.fromNumberArray(Array.from({length:$},()=>Math.floor(Math.random()*256)))}var Lm1=(()=>{let{crypto:$}=globalThis;if($!=null&&typeof $.getRandomValues==="function")return(F)=>{return $.getRandomValues(kW.allocate(F))};else{if(wm1()){let{console:F}=globalThis;F?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return qm1}})(),O61=/(\d|[a-f])/i,kW={isUint8Array:MX,toLocalBufferType($){let F=$?.[Symbol.toStringTag]??Object.prototype.toString.call($);if(F==="Uint8Array")return $;if(ArrayBuffer.isView($))return new Uint8Array($.buffer.slice($.byteOffset,$.byteOffset+$.byteLength));if(F==="ArrayBuffer"||F==="SharedArrayBuffer"||F==="[object ArrayBuffer]"||F==="[object SharedArrayBuffer]")return new Uint8Array($);throw new w1("Cannot make a Uint8Array from passed potentialBuffer.")},allocate($){if(typeof $!=="number")throw TypeError(`The "size" argument must be of type number. Received ${String($)}`);return new Uint8Array($)},allocateUnsafe($){return kW.allocate($)},compare($,F){if($===F)return 0;let A=Math.min($.length,F.length);for(let J=0;J<A;J++){if($[J]<F[J])return-1;if($[J]>F[J])return 1}if($.length<F.length)return-1;if($.length>F.length)return 1;return 0},concat($){if($.length===0)return kW.allocate(0);let F=0;for(let X of $)F+=X.length;let A=kW.allocate(F),J=0;for(let X of $)A.set(X,J),J+=X.length;return A},equals($,F){if($.byteLength!==F.byteLength)return!1;for(let A=0;A<$.byteLength;A++)if($[A]!==F[A])return!1;return!0},fromNumberArray($){return Uint8Array.from($)},fromBase64($){return Uint8Array.from(atob($),(F)=>F.charCodeAt(0))},fromUTF8($){return new TextEncoder().encode($)},toBase64($){return btoa(kW.toISO88591($))},fromISO88591($){return Uint8Array.from($,(F)=>F.charCodeAt(0)&255)},toISO88591($){return Array.from(Uint16Array.from($),(F)=>String.fromCharCode(F)).join("")},fromHex($){let F=$.length%2===0?$:$.slice(0,$.length-1),A=[];for(let J=0;J<F.length;J+=2){let X=F[J],Y=F[J+1];if(!O61.test(X))break;if(!O61.test(Y))break;let W=Number.parseInt(`${X}${Y}`,16);A.push(W)}return Uint8Array.from(A)},toHex($){return Array.from($,(F)=>F.toString(16).padStart(2,"0")).join("")},toUTF8($,F,A,J){let X=A-F<=20?W21($,F,A):null;if(X!=null)return X;return Y21($,F,A,J)},utf8ByteLength($){return new TextEncoder().encode($).byteLength},encodeUTF8Into($,F,A){let J=new TextEncoder().encode(F);return $.set(J,A),J.byteLength},randomBytes:Lm1,swap32($){if($.length%4!==0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let F=0;F<$.length;F+=4){let A=$[F],J=$[F+1],X=$[F+2],Y=$[F+3];$[F]=Y,$[F+1]=X,$[F+2]=J,$[F+3]=A}return $}},Em1=typeof Buffer==="function"&&Buffer.prototype?._isBuffer!==!0,z1=Em1?X$:kW,mV=Symbol.for("@@mdb.bson.type");class p8{get[mV](){return this._bsontype}get[LG](){return bW}[Symbol.for("nodejs.util.inspect.custom")]($,F,A){return this.inspect($,F,A)}}var wG=new Float64Array(1),E6=new Uint8Array(wG.buffer,0,8);wG[0]=-1;var j_=E6[7]===0,W0={isBigEndian:j_,getNonnegativeInt32LE($,F){if($[F+3]>127)throw RangeError(`Size cannot be negative at offset: ${F}`);return $[F]|$[F+1]<<8|$[F+2]<<16|$[F+3]<<24},getInt32LE($,F){return $[F]|$[F+1]<<8|$[F+2]<<16|$[F+3]<<24},getUint32LE($,F){return $[F]+$[F+1]*256+$[F+2]*65536+$[F+3]*16777216},getUint32BE($,F){return $[F+3]+$[F+2]*256+$[F+1]*65536+$[F]*16777216},getBigInt64LE($,F){let A=BigInt($[F+4]+$[F+5]*256+$[F+6]*65536+($[F+7]<<24)),J=BigInt($[F]+$[F+1]*256+$[F+2]*65536+$[F+3]*16777216);return(A<<32n)+J},getFloat64LE:j_?($,F)=>{return E6[7]=$[F],E6[6]=$[F+1],E6[5]=$[F+2],E6[4]=$[F+3],E6[3]=$[F+4],E6[2]=$[F+5],E6[1]=$[F+6],E6[0]=$[F+7],wG[0]}:($,F)=>{return E6[0]=$[F],E6[1]=$[F+1],E6[2]=$[F+2],E6[3]=$[F+3],E6[4]=$[F+4],E6[5]=$[F+5],E6[6]=$[F+6],E6[7]=$[F+7],wG[0]},setInt32BE($,F,A){return $[F+3]=A,A>>>=8,$[F+2]=A,A>>>=8,$[F+1]=A,A>>>=8,$[F]=A,4},setInt32LE($,F,A){return $[F]=A,A>>>=8,$[F+1]=A,A>>>=8,$[F+2]=A,A>>>=8,$[F+3]=A,4},setBigInt64LE($,F,A){let J=0xffffffffn,X=Number(A&J);$[F]=X,X>>=8,$[F+1]=X,X>>=8,$[F+2]=X,X>>=8,$[F+3]=X;let Y=Number(A>>32n&J);return $[F+4]=Y,Y>>=8,$[F+5]=Y,Y>>=8,$[F+6]=Y,Y>>=8,$[F+7]=Y,8},setFloat64LE:j_?($,F,A)=>{return wG[0]=A,$[F]=E6[7],$[F+1]=E6[6],$[F+2]=E6[5],$[F+3]=E6[4],$[F+4]=E6[3],$[F+5]=E6[2],$[F+6]=E6[1],$[F+7]=E6[0],8}:($,F,A)=>{return wG[0]=A,$[F]=E6[0],$[F+1]=E6[1],$[F+2]=E6[2],$[F+3]=E6[3],$[F+4]=E6[4],$[F+5]=E6[5],$[F+6]=E6[6],$[F+7]=E6[7],8}};class I0 extends p8{get _bsontype(){return"Binary"}static BSON_BINARY_SUBTYPE_DEFAULT=0;static BUFFER_SIZE=256;static SUBTYPE_DEFAULT=0;static SUBTYPE_FUNCTION=1;static SUBTYPE_BYTE_ARRAY=2;static SUBTYPE_UUID_OLD=3;static SUBTYPE_UUID=4;static SUBTYPE_MD5=5;static SUBTYPE_ENCRYPTED=6;static SUBTYPE_COLUMN=7;static SUBTYPE_SENSITIVE=8;static SUBTYPE_VECTOR=9;static SUBTYPE_USER_DEFINED=128;static VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});buffer;sub_type;position;constructor($,F){super();if($!=null&&typeof $==="string"&&!ArrayBuffer.isView($)&&!e_($)&&!Array.isArray($))throw new w1("Binary can only be constructed from Uint8Array or number[]");if(this.sub_type=F??I0.BSON_BINARY_SUBTYPE_DEFAULT,$==null)this.buffer=z1.allocate(I0.BUFFER_SIZE),this.position=0;else this.buffer=Array.isArray($)?z1.fromNumberArray($):z1.toLocalBufferType($),this.position=this.buffer.byteLength}put($){if(typeof $==="string"&&$.length!==1)throw new w1("only accepts single character String");else if(typeof $!=="number"&&$.length!==1)throw new w1("only accepts single character Uint8Array or Array");let F;if(typeof $==="string")F=$.charCodeAt(0);else if(typeof $==="number")F=$;else F=$[0];if(F<0||F>255)throw new w1("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=F;else{let A=z1.allocate(I0.BUFFER_SIZE+this.buffer.length);A.set(this.buffer,0),this.buffer=A,this.buffer[this.position++]=F}}write($,F){if(F=typeof F==="number"?F:this.position,this.buffer.byteLength<F+$.length){let A=z1.allocate(this.buffer.byteLength+$.length);A.set(this.buffer,0),this.buffer=A}if(ArrayBuffer.isView($))this.buffer.set(z1.toLocalBufferType($),F),this.position=F+$.byteLength>this.position?F+$.length:this.position;else if(typeof $==="string")throw new w1("input cannot be string")}read($,F){F=F&&F>0?F:this.position;let A=$+F;return this.buffer.subarray($,A>this.position?this.position:A)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return z1.toBase64(this.buffer.subarray(0,this.position))}toString($){if($==="hex")return z1.toHex(this.buffer.subarray(0,this.position));if($==="base64")return z1.toBase64(this.buffer.subarray(0,this.position));if($==="utf8"||$==="utf-8")return z1.toUTF8(this.buffer,0,this.position,!1);return z1.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON($){if($=$||{},this.sub_type===I0.SUBTYPE_VECTOR)yA(this);let F=z1.toBase64(this.buffer),A=Number(this.sub_type).toString(16);if($.legacy)return{$binary:F,$type:A.length===1?"0"+A:A};return{$binary:{base64:F,subType:A.length===1?"0"+A:A}}}toUUID(){if(this.sub_type===I0.SUBTYPE_UUID)return new h9(this.buffer.subarray(0,this.position));throw new w1(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${I0.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString($,F){return new I0(z1.fromHex($),F)}static createFromBase64($,F){return new I0(z1.fromBase64($),F)}static fromExtendedJSON($,F){F=F||{};let A,J;if("$binary"in $){if(F.legacy&&typeof $.$binary==="string"&&"$type"in $)J=$.$type?parseInt($.$type,16):0,A=z1.fromBase64($.$binary);else if(typeof $.$binary!=="string")J=$.$binary.subType?parseInt($.$binary.subType,16):0,A=z1.fromBase64($.$binary.base64)}else if("$uuid"in $)J=4,A=h9.bytesFromString($.$uuid);if(!A)throw new w1(`Unexpected Binary Extended JSON format ${JSON.stringify($)}`);return J===Zk?new h9(A):new I0(A,J)}inspect($,F,A){A??=Q7;let J=z1.toBase64(this.buffer.subarray(0,this.position)),X=A(J,F),Y=A(this.sub_type,F);return`Binary.createFromBase64(${X}, ${Y})`}toInt8Array(){if(this.sub_type!==I0.SUBTYPE_VECTOR)throw new w1("Binary sub_type is not Vector");if(this.buffer[0]!==I0.VECTOR_TYPE.Int8)throw new w1("Binary datatype field is not Int8");return yA(this),new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==I0.SUBTYPE_VECTOR)throw new w1("Binary sub_type is not Vector");if(this.buffer[0]!==I0.VECTOR_TYPE.Float32)throw new w1("Binary datatype field is not Float32");yA(this);let $=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));if(W0.isBigEndian)z1.swap32($);return new Float32Array($.buffer)}toPackedBits(){if(this.sub_type!==I0.SUBTYPE_VECTOR)throw new w1("Binary sub_type is not Vector");if(this.buffer[0]!==I0.VECTOR_TYPE.PackedBit)throw new w1("Binary datatype field is not packed bit");return yA(this),new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==I0.SUBTYPE_VECTOR)throw new w1("Binary sub_type is not Vector");if(this.buffer[0]!==I0.VECTOR_TYPE.PackedBit)throw new w1("Binary datatype field is not packed bit");yA(this);let F=(this.length()-2)*8-this.buffer[1],A=new Int8Array(F);for(let J=0;J<A.length;J++){let X=J/8|0,Y=this.buffer[X+2],W=7-J%8,Z=Y>>W&1;A[J]=Z}return A}static fromInt8Array($){let F=z1.allocate($.byteLength+2);F[0]=I0.VECTOR_TYPE.Int8,F[1]=0;let A=new Uint8Array($.buffer,$.byteOffset,$.byteLength);F.set(A,2);let J=new this(F,this.SUBTYPE_VECTOR);return yA(J),J}static fromFloat32Array($){let F=z1.allocate($.byteLength+2);F[0]=I0.VECTOR_TYPE.Float32,F[1]=0;let A=new Uint8Array($.buffer,$.byteOffset,$.byteLength);if(F.set(A,2),W0.isBigEndian)z1.swap32(new Uint8Array(F.buffer,2));let J=new this(F,this.SUBTYPE_VECTOR);return yA(J),J}static fromPackedBits($,F=0){let A=z1.allocate($.byteLength+2);A[0]=I0.VECTOR_TYPE.PackedBit,A[1]=F,A.set($,2);let J=new this(A,this.SUBTYPE_VECTOR);return yA(J),J}static fromBits($){let F=$.length+7>>>3,A=new Uint8Array(F+2);A[0]=I0.VECTOR_TYPE.PackedBit;let J=$.length%8;A[1]=J===0?0:8-J;for(let X=0;X<$.length;X++){let Y=X>>>3,W=$[X];if(W!==0&&W!==1)throw new w1(`Invalid bit value at ${X}: must be 0 or 1, found ${$[X]}`);if(W===0)continue;let Z=7-X%8;A[Y+2]|=W<<Z}return new this(A,I0.SUBTYPE_VECTOR)}}function yA($){if($.sub_type!==I0.SUBTYPE_VECTOR)return;let F=$.position,A=$.buffer[0],J=$.buffer[1];if((A===I0.VECTOR_TYPE.Float32||A===I0.VECTOR_TYPE.Int8)&&J!==0)throw new w1("Invalid Vector: padding must be zero for int8 and float32 vectors");if(A===I0.VECTOR_TYPE.Float32){if(F!==0&&F-2!==0&&(F-2)%4!==0)throw new w1("Invalid Vector: Float32 vector must contain a multiple of 4 bytes")}if(A===I0.VECTOR_TYPE.PackedBit&&J!==0&&F===2)throw new w1("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(A===I0.VECTOR_TYPE.PackedBit&&J>7)throw new w1(`Invalid Vector: padding must be a value between 0 and 7. found: ${J}`)}var O_=16,Vm1=/^[0-9A-F]{32}$/i,Nm1=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;class h9 extends I0{constructor($){let F;if($==null)F=h9.generate();else if($ instanceof h9)F=z1.toLocalBufferType(new Uint8Array($.buffer));else if(ArrayBuffer.isView($)&&$.byteLength===O_)F=z1.toLocalBufferType($);else if(typeof $==="string")F=h9.bytesFromString($);else throw new w1("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(F,Zk)}get id(){return this.buffer}set id($){this.buffer=$}toHexString($=!0){if($)return[z1.toHex(this.buffer.subarray(0,4)),z1.toHex(this.buffer.subarray(4,6)),z1.toHex(this.buffer.subarray(6,8)),z1.toHex(this.buffer.subarray(8,10)),z1.toHex(this.buffer.subarray(10,16))].join("-");return z1.toHex(this.buffer)}toString($){if($==="hex")return z1.toHex(this.id);if($==="base64")return z1.toBase64(this.id);return this.toHexString()}toJSON(){return this.toHexString()}equals($){if(!$)return!1;if($ instanceof h9)return z1.equals($.id,this.id);try{return z1.equals(new h9($).id,this.id)}catch{return!1}}toBinary(){return new I0(this.id,I0.SUBTYPE_UUID)}static generate(){let $=z1.randomBytes(O_);return $[6]=$[6]&15|64,$[8]=$[8]&63|128,$}static isValid($){if(!$)return!1;if(typeof $==="string")return h9.isValidUUIDString($);if(MX($))return $.byteLength===O_;return $._bsontype==="Binary"&&$.sub_type===this.SUBTYPE_UUID&&$.buffer.byteLength===16}static createFromHexString($){let F=h9.bytesFromString($);return new h9(F)}static createFromBase64($){return new h9(z1.fromBase64($))}static bytesFromString($){if(!h9.isValidUUIDString($))throw new w1("UUID string representation must be 32 hex digits or canonical hyphenated representation");return z1.fromHex($.replace(/-/g,""))}static isValidUUIDString($){return Vm1.test($)||Nm1.test($)}inspect($,F,A){return A??=Q7,`new UUID(${A(this.toHexString(),F)})`}}class hA extends p8{get _bsontype(){return"Code"}code;scope;constructor($,F){super();this.code=$.toString(),this.scope=F??null}toJSON(){if(this.scope!=null)return{code:this.code,scope:this.scope};return{code:this.code}}toExtendedJSON(){if(this.scope)return{$code:this.code,$scope:this.scope};return{$code:this.code}}static fromExtendedJSON($){return new hA($.$code,$.$scope)}inspect($,F,A){A??=Q7;let J=A(this.code,F),X=J.includes(`
`);if(this.scope!=null)J+=`,${X?`
`:" "}${A(this.scope,F)}`;let Y=X&&this.scope===null;return`new Code(${X?`
`:""}${J}${Y?`
`:""})`}}function Z21($){return $!=null&&typeof $==="object"&&"$id"in $&&$.$id!=null&&"$ref"in $&&typeof $.$ref==="string"&&(!("$db"in $)||("$db"in $)&&typeof $.$db==="string")}class _F extends p8{get _bsontype(){return"DBRef"}collection;oid;db;fields;constructor($,F,A,J){super();let X=$.split(".");if(X.length===2)A=X.shift(),$=X.shift();this.collection=$,this.oid=F,this.db=A,this.fields=J||{}}get namespace(){return this.collection}set namespace($){this.collection=$}toJSON(){let $=Object.assign({$ref:this.collection,$id:this.oid},this.fields);if(this.db!=null)$.$db=this.db;return $}toExtendedJSON($){$=$||{};let F={$ref:this.collection,$id:this.oid};if($.legacy)return F;if(this.db)F.$db=this.db;return F=Object.assign(F,this.fields),F}static fromExtendedJSON($){let F=Object.assign({},$);return delete F.$ref,delete F.$id,delete F.$db,new _F($.$ref,$.$id,$.$db,F)}inspect($,F,A){A??=Q7;let J=[A(this.namespace,F),A(this.oid,F),...this.db?[A(this.db,F)]:[],...Object.keys(this.fields).length>0?[A(this.fields,F)]:[]];return J[1]=A===Q7?`new ObjectId(${J[1]})`:J[1],`new DBRef(${J.join(", ")})`}}function D21($){if($==="")return $;let F=0,A=$[F]==="-",J=$[F]==="+";if(J||A)F+=1;let X=!1;for(;F<$.length&&$[F]==="0";++F)X=!0;if(!X)return J?$.slice(1):$;return`${A?"-":""}${$.length===F?"0":$.slice(F)}`}function Cm1($,F){F=F??10;let A="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,F);return new RegExp(`[^-+${A}]`,"i").test($)?!1:$}var U5=void 0;try{U5=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var S61=65536,Mm1=16777216,qG=S61*S61,G21=qG*qG,_61=G21/2,k61={},b61={},Pm1=20,Rm1=/^(\+?0|(\+|-)?[1-9][0-9]*)$/;class e extends p8{get _bsontype(){return"Long"}get __isLong__(){return!0}high;low;unsigned;constructor($=0,F,A){super();let J=typeof F==="boolean"?F:Boolean(A),X=typeof F==="number"?F:0,Y=typeof $==="string"?e.fromString($,J):typeof $==="bigint"?e.fromBigInt($,J):{low:$|0,high:X|0,unsigned:J};this.low=Y.low,this.high=Y.high,this.unsigned=Y.unsigned}static TWO_PWR_24=e.fromInt(Mm1);static MAX_UNSIGNED_VALUE=e.fromBits(-1,-1,!0);static ZERO=e.fromInt(0);static UZERO=e.fromInt(0,!0);static ONE=e.fromInt(1);static UONE=e.fromInt(1,!0);static NEG_ONE=e.fromInt(-1);static MAX_VALUE=e.fromBits(-1,2147483647,!1);static MIN_VALUE=e.fromBits(0,-2147483648,!1);static fromBits($,F,A){return new e($,F,A)}static fromInt($,F){let A,J,X;if(F){if($>>>=0,X=0<=$&&$<256){if(J=b61[$],J)return J}if(A=e.fromBits($,($|0)<0?-1:0,!0),X)b61[$]=A;return A}else{if($|=0,X=-128<=$&&$<128){if(J=k61[$],J)return J}if(A=e.fromBits($,$<0?-1:0,!1),X)k61[$]=A;return A}}static fromNumber($,F){if(isNaN($))return F?e.UZERO:e.ZERO;if(F){if($<0)return e.UZERO;if($>=G21)return e.MAX_UNSIGNED_VALUE}else{if($<=-_61)return e.MIN_VALUE;if($+1>=_61)return e.MAX_VALUE}if($<0)return e.fromNumber(-$,F).neg();return e.fromBits($%qG|0,$/qG|0,F)}static fromBigInt($,F){let A=0xffffffffn,J=32n;return new e(Number($&A),Number($>>J&A),F)}static _fromString($,F,A){if($.length===0)throw new w1("empty string");if(A<2||36<A)throw new w1("radix");let J;if((J=$.indexOf("-"))>0)throw new w1("interior hyphen");else if(J===0)return e._fromString($.substring(1),F,A).neg();let X=e.fromNumber(Math.pow(A,8)),Y=e.ZERO;for(let W=0;W<$.length;W+=8){let Z=Math.min(8,$.length-W),D=parseInt($.substring(W,W+Z),A);if(Z<8){let G=e.fromNumber(Math.pow(A,Z));Y=Y.mul(G).add(e.fromNumber(D))}else Y=Y.mul(X),Y=Y.add(e.fromNumber(D))}return Y.unsigned=F,Y}static fromStringStrict($,F,A){let J=!1;if(typeof F==="number")A=F,F=!1;else J=!!F;if(A??=10,$.trim()!==$)throw new w1(`Input: '${$}' contains leading and/or trailing whitespace`);if(!Cm1($,A))throw new w1(`Input: '${$}' contains invalid characters for radix: ${A}`);let X=D21($),Y=e._fromString(X,J,A);if(Y.toString(A).toLowerCase()!==X.toLowerCase())throw new w1(`Input: ${$} is not representable as ${Y.unsigned?"an unsigned":"a signed"} 64-bit Long ${A!=null?`with radix: ${A}`:""}`);return Y}static fromString($,F,A){let J=!1;if(typeof F==="number")A=F,F=!1;else J=!!F;if(A??=10,$==="NaN"&&A<24)return e.ZERO;else if(($==="Infinity"||$==="+Infinity"||$==="-Infinity")&&A<35)return e.ZERO;return e._fromString($,J,A)}static fromBytes($,F,A){return A?e.fromBytesLE($,F):e.fromBytesBE($,F)}static fromBytesLE($,F){return new e($[0]|$[1]<<8|$[2]<<16|$[3]<<24,$[4]|$[5]<<8|$[6]<<16|$[7]<<24,F)}static fromBytesBE($,F){return new e($[4]<<24|$[5]<<16|$[6]<<8|$[7],$[0]<<24|$[1]<<16|$[2]<<8|$[3],F)}static isLong($){return $!=null&&typeof $==="object"&&"__isLong__"in $&&$.__isLong__===!0}static fromValue($,F){if(typeof $==="number")return e.fromNumber($,F);if(typeof $==="string")return e.fromString($,F);return e.fromBits($.low,$.high,typeof F==="boolean"?F:$.unsigned)}add($){if(!e.isLong($))$=e.fromValue($);let F=this.high>>>16,A=this.high&65535,J=this.low>>>16,X=this.low&65535,Y=$.high>>>16,W=$.high&65535,Z=$.low>>>16,D=$.low&65535,G=0,z=0,H=0,U=0;return U+=X+D,H+=U>>>16,U&=65535,H+=J+Z,z+=H>>>16,H&=65535,z+=A+W,G+=z>>>16,z&=65535,G+=F+Y,G&=65535,e.fromBits(H<<16|U,G<<16|z,this.unsigned)}and($){if(!e.isLong($))$=e.fromValue($);return e.fromBits(this.low&$.low,this.high&$.high,this.unsigned)}compare($){if(!e.isLong($))$=e.fromValue($);if(this.eq($))return 0;let F=this.isNegative(),A=$.isNegative();if(F&&!A)return-1;if(!F&&A)return 1;if(!this.unsigned)return this.sub($).isNegative()?-1:1;return $.high>>>0>this.high>>>0||$.high===this.high&&$.low>>>0>this.low>>>0?-1:1}comp($){return this.compare($)}divide($){if(!e.isLong($))$=e.fromValue($);if($.isZero())throw new w1("division by zero");if(U5){if(!this.unsigned&&this.high===-2147483648&&$.low===-1&&$.high===-1)return this;let X=(this.unsigned?U5.div_u:U5.div_s)(this.low,this.high,$.low,$.high);return e.fromBits(X,U5.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?e.UZERO:e.ZERO;let F,A,J;if(!this.unsigned){if(this.eq(e.MIN_VALUE))if($.eq(e.ONE)||$.eq(e.NEG_ONE))return e.MIN_VALUE;else if($.eq(e.MIN_VALUE))return e.ONE;else if(F=this.shr(1).div($).shl(1),F.eq(e.ZERO))return $.isNegative()?e.ONE:e.NEG_ONE;else return A=this.sub($.mul(F)),J=F.add(A.div($)),J;else if($.eq(e.MIN_VALUE))return this.unsigned?e.UZERO:e.ZERO;if(this.isNegative()){if($.isNegative())return this.neg().div($.neg());return this.neg().div($).neg()}else if($.isNegative())return this.div($.neg()).neg();J=e.ZERO}else{if(!$.unsigned)$=$.toUnsigned();if($.gt(this))return e.UZERO;if($.gt(this.shru(1)))return e.UONE;J=e.UZERO}A=this;while(A.gte($)){F=Math.max(1,Math.floor(A.toNumber()/$.toNumber()));let X=Math.ceil(Math.log(F)/Math.LN2),Y=X<=48?1:Math.pow(2,X-48),W=e.fromNumber(F),Z=W.mul($);while(Z.isNegative()||Z.gt(A))F-=Y,W=e.fromNumber(F,this.unsigned),Z=W.mul($);if(W.isZero())W=e.ONE;J=J.add(W),A=A.sub(Z)}return J}div($){return this.divide($)}equals($){if(!e.isLong($))$=e.fromValue($);if(this.unsigned!==$.unsigned&&this.high>>>31===1&&$.high>>>31===1)return!1;return this.high===$.high&&this.low===$.low}eq($){return this.equals($)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(e.MIN_VALUE)?64:this.neg().getNumBitsAbs();let $=this.high!==0?this.high:this.low,F;for(F=31;F>0;F--)if(($&1<<F)!==0)break;return this.high!==0?F+33:F+1}greaterThan($){return this.comp($)>0}gt($){return this.greaterThan($)}greaterThanOrEqual($){return this.comp($)>=0}gte($){return this.greaterThanOrEqual($)}ge($){return this.greaterThanOrEqual($)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan($){return this.comp($)<0}lt($){return this.lessThan($)}lessThanOrEqual($){return this.comp($)<=0}lte($){return this.lessThanOrEqual($)}modulo($){if(!e.isLong($))$=e.fromValue($);if(U5){let F=(this.unsigned?U5.rem_u:U5.rem_s)(this.low,this.high,$.low,$.high);return e.fromBits(F,U5.get_high(),this.unsigned)}return this.sub(this.div($).mul($))}mod($){return this.modulo($)}rem($){return this.modulo($)}multiply($){if(this.isZero())return e.ZERO;if(!e.isLong($))$=e.fromValue($);if(U5){let Q=U5.mul(this.low,this.high,$.low,$.high);return e.fromBits(Q,U5.get_high(),this.unsigned)}if($.isZero())return e.ZERO;if(this.eq(e.MIN_VALUE))return $.isOdd()?e.MIN_VALUE:e.ZERO;if($.eq(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())if($.isNegative())return this.neg().mul($.neg());else return this.neg().mul($).neg();else if($.isNegative())return this.mul($.neg()).neg();if(this.lt(e.TWO_PWR_24)&&$.lt(e.TWO_PWR_24))return e.fromNumber(this.toNumber()*$.toNumber(),this.unsigned);let F=this.high>>>16,A=this.high&65535,J=this.low>>>16,X=this.low&65535,Y=$.high>>>16,W=$.high&65535,Z=$.low>>>16,D=$.low&65535,G=0,z=0,H=0,U=0;return U+=X*D,H+=U>>>16,U&=65535,H+=J*D,z+=H>>>16,H&=65535,H+=X*Z,z+=H>>>16,H&=65535,z+=A*D,G+=z>>>16,z&=65535,z+=J*Z,G+=z>>>16,z&=65535,z+=X*W,G+=z>>>16,z&=65535,G+=F*D+A*Z+J*W+X*Y,G&=65535,e.fromBits(H<<16|U,G<<16|z,this.unsigned)}mul($){return this.multiply($)}negate(){if(!this.unsigned&&this.eq(e.MIN_VALUE))return e.MIN_VALUE;return this.not().add(e.ONE)}neg(){return this.negate()}not(){return e.fromBits(~this.low,~this.high,this.unsigned)}notEquals($){return!this.equals($)}neq($){return this.notEquals($)}ne($){return this.notEquals($)}or($){if(!e.isLong($))$=e.fromValue($);return e.fromBits(this.low|$.low,this.high|$.high,this.unsigned)}shiftLeft($){if(e.isLong($))$=$.toInt();if(($&=63)===0)return this;else if($<32)return e.fromBits(this.low<<$,this.high<<$|this.low>>>32-$,this.unsigned);else return e.fromBits(0,this.low<<$-32,this.unsigned)}shl($){return this.shiftLeft($)}shiftRight($){if(e.isLong($))$=$.toInt();if(($&=63)===0)return this;else if($<32)return e.fromBits(this.low>>>$|this.high<<32-$,this.high>>$,this.unsigned);else return e.fromBits(this.high>>$-32,this.high>=0?0:-1,this.unsigned)}shr($){return this.shiftRight($)}shiftRightUnsigned($){if(e.isLong($))$=$.toInt();if($&=63,$===0)return this;else{let F=this.high;if($<32){let A=this.low;return e.fromBits(A>>>$|F<<32-$,F>>>$,this.unsigned)}else if($===32)return e.fromBits(F,0,this.unsigned);else return e.fromBits(F>>>$-32,0,this.unsigned)}}shr_u($){return this.shiftRightUnsigned($)}shru($){return this.shiftRightUnsigned($)}subtract($){if(!e.isLong($))$=e.fromValue($);return this.add($.neg())}sub($){return this.subtract($)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){if(this.unsigned)return(this.high>>>0)*qG+(this.low>>>0);return this.high*qG+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes($){return $?this.toBytesLE():this.toBytesBE()}toBytesLE(){let $=this.high,F=this.low;return[F&255,F>>>8&255,F>>>16&255,F>>>24,$&255,$>>>8&255,$>>>16&255,$>>>24]}toBytesBE(){let $=this.high,F=this.low;return[$>>>24,$>>>16&255,$>>>8&255,$&255,F>>>24,F>>>16&255,F>>>8&255,F&255]}toSigned(){if(!this.unsigned)return this;return e.fromBits(this.low,this.high,!1)}toString($){if($=$||10,$<2||36<$)throw new w1("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(e.MIN_VALUE)){let X=e.fromNumber($),Y=this.div(X),W=Y.mul(X).sub(this);return Y.toString($)+W.toInt().toString($)}else return"-"+this.neg().toString($);let F=e.fromNumber(Math.pow($,6),this.unsigned),A=this,J="";while(!0){let X=A.div(F),W=(A.sub(X.mul(F)).toInt()>>>0).toString($);if(A=X,A.isZero())return W+J;else{while(W.length<6)W="0"+W;J=""+W+J}}}toUnsigned(){if(this.unsigned)return this;return e.fromBits(this.low,this.high,!0)}xor($){if(!e.isLong($))$=e.fromValue($);return e.fromBits(this.low^$.low,this.high^$.high,this.unsigned)}eqz(){return this.isZero()}le($){return this.lessThanOrEqual($)}toExtendedJSON($){if($&&$.relaxed)return this.toNumber();return{$numberLong:this.toString()}}static fromExtendedJSON($,F){let{useBigInt64:A=!1,relaxed:J=!0}={...F};if($.$numberLong.length>Pm1)throw new w1("$numberLong string is too long");if(!Rm1.test($.$numberLong))throw new w1(`$numberLong string "${$.$numberLong}" is in an invalid format`);if(A){let Y=BigInt($.$numberLong);return BigInt.asIntN(64,Y)}let X=e.fromString($.$numberLong);if(J)return X.toNumber();return X}inspect($,F,A){A??=Q7;let J=A(this.toString(),F),X=this.unsigned?`, ${A(this.unsigned,F)}`:"";return`new Long(${J}${X})`}}var Im1=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,Tm1=/^(\+|-)?(Infinity|inf)$/i,jm1=/^(\+|-)?NaN$/i,UG=6111,JK=-6176,x61=6176,g61=34,S_=z1.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),f61=z1.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),v61=z1.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),Om1=/^([-+])?(\d+)?$/,Sm1=31,y61=16383,_m1=30,km1=31;function u61($){return!isNaN(parseInt($,10))}function bm1($){let F=e.fromNumber(1e9),A=e.fromNumber(0);if(!$.parts[0]&&!$.parts[1]&&!$.parts[2]&&!$.parts[3])return{quotient:$,rem:A};for(let J=0;J<=3;J++)A=A.shiftLeft(32),A=A.add(new e($.parts[J],0)),$.parts[J]=A.div(F).low,A=A.modulo(F);return{quotient:$,rem:A}}function xm1($,F){if(!$&&!F)return{high:e.fromNumber(0),low:e.fromNumber(0)};let A=$.shiftRightUnsigned(32),J=new e($.getLowBits(),0),X=F.shiftRightUnsigned(32),Y=new e(F.getLowBits(),0),W=A.multiply(X),Z=A.multiply(Y),D=J.multiply(X),G=J.multiply(Y);return W=W.add(Z.shiftRightUnsigned(32)),Z=new e(Z.getLowBits(),0).add(D).add(G.shiftRightUnsigned(32)),W=W.add(Z.shiftRightUnsigned(32)),G=Z.shiftLeft(32).add(new e(G.getLowBits(),0)),{high:W,low:G}}function gm1($,F){let A=$.high>>>0,J=F.high>>>0;if(A<J)return!0;else if(A===J){let X=$.low>>>0,Y=F.low>>>0;if(X<Y)return!0}return!1}function J$($,F){throw new w1(`"${$}" is not a valid Decimal128 string - ${F}`)}class Q8 extends p8{get _bsontype(){return"Decimal128"}bytes;constructor($){super();if(typeof $==="string")this.bytes=Q8.fromString($).bytes;else if($ instanceof Uint8Array||MX($)){if($.byteLength!==16)throw new w1("Decimal128 must take a Buffer of 16 bytes");this.bytes=$}else throw new w1("Decimal128 must take a Buffer or string")}static fromString($){return Q8._fromString($,{allowRounding:!1})}static fromStringWithRounding($){return Q8._fromString($,{allowRounding:!0})}static _fromString($,F){let A=!1,J=!1,X=!1,Y=!1,W=0,Z=0,D=0,G=0,z=0,H=[0],U=0,Q=0,B=0,q=0,L=new e(0,0),E=new e(0,0),V=0,R=0;if($.length>=7000)throw new w1(""+$+" not a valid Decimal128 string");let N=$.match(Im1),S=$.match(Tm1),C=$.match(jm1);if(!N&&!S&&!C||$.length===0)throw new w1(""+$+" not a valid Decimal128 string");if(N){let j=N[2],b=N[4],g=N[5],f=N[6];if(b&&f===void 0)J$($,"missing exponent power");if(b&&j===void 0)J$($,"missing exponent base");if(b===void 0&&(g||f))J$($,"missing e before exponent")}if($[R]==="+"||$[R]==="-")J=!0,A=$[R++]==="-";if(!u61($[R])&&$[R]!=="."){if($[R]==="i"||$[R]==="I")return new Q8(A?f61:v61);else if($[R]==="N")return new Q8(S_)}while(u61($[R])||$[R]==="."){if($[R]==="."){if(X)J$($,"contains multiple periods");X=!0,R=R+1;continue}if(U<g61){if($[R]!=="0"||Y){if(!Y)z=Z;Y=!0,H[Q++]=parseInt($[R],10),U=U+1}}if(Y)D=D+1;if(X)G=G+1;Z=Z+1,R=R+1}if(X&&!Z)throw new w1(""+$+" not a valid Decimal128 string");if($[R]==="e"||$[R]==="E"){let j=$.substr(++R).match(Om1);if(!j||!j[2])return new Q8(S_);q=parseInt(j[0],10),R=R+j[0].length}if($[R])return new Q8(S_);if(!U)H[0]=0,D=1,U=1,W=0;else if(B=U-1,W=D,W!==1)while($[z+W-1+Number(J)+Number(X)]==="0")W=W-1;if(q<=G&&G>q+16384)q=JK;else q=q-G;while(q>UG){if(B=B+1,B>=g61){if(W===0){q=UG;break}J$($,"overflow")}q=q-1}if(F.allowRounding){while(q<JK||U<D){if(B===0&&W<U){q=JK,W=0;break}if(U<D)D=D-1;else B=B-1;if(q<UG)q=q+1;else{if(H.join("").match(/^0+$/)){q=UG;break}J$($,"overflow")}}if(B+1<W){let j=Z;if(X)z=z+1,j=j+1;if(J)z=z+1,j=j+1;let b=parseInt($[z+B+1],10),g=0;if(b>=5){if(g=1,b===5){g=H[B]%2===1?1:0;for(let f=z+B+2;f<j;f++)if(parseInt($[f],10)){g=1;break}}}if(g){let f=B;for(;f>=0;f--)if(++H[f]>9){if(H[f]=0,f===0)if(q<UG)q=q+1,H[f]=1;else return new Q8(A?f61:v61)}else break}}}else{while(q<JK||U<D){if(B===0){if(W===0){q=JK;break}J$($,"exponent underflow")}if(U<D){if($[D-1+Number(J)+Number(X)]!=="0"&&W!==0)J$($,"inexact rounding");D=D-1}else{if(H[B]!==0)J$($,"inexact rounding");B=B-1}if(q<UG)q=q+1;else J$($,"overflow")}if(B+1<W){if(X)z=z+1;if(J)z=z+1;if(parseInt($[z+B+1],10)!==0)J$($,"inexact rounding")}}if(L=e.fromNumber(0),E=e.fromNumber(0),W===0)L=e.fromNumber(0),E=e.fromNumber(0);else if(B<17){let j=0;E=e.fromNumber(H[j++]),L=new e(0,0);for(;j<=B;j++)E=E.multiply(e.fromNumber(10)),E=E.add(e.fromNumber(H[j]))}else{let j=0;L=e.fromNumber(H[j++]);for(;j<=B-17;j++)L=L.multiply(e.fromNumber(10)),L=L.add(e.fromNumber(H[j]));E=e.fromNumber(H[j++]);for(;j<=B;j++)E=E.multiply(e.fromNumber(10)),E=E.add(e.fromNumber(H[j]))}let M=xm1(L,e.fromString("100000000000000000"));if(M.low=M.low.add(E),gm1(M.low,E))M.high=M.high.add(e.fromNumber(1));V=q+x61;let I={low:e.fromNumber(0),high:e.fromNumber(0)};if(M.high.shiftRightUnsigned(49).and(e.fromNumber(1)).equals(e.fromNumber(1)))I.high=I.high.or(e.fromNumber(3).shiftLeft(61)),I.high=I.high.or(e.fromNumber(V).and(e.fromNumber(16383).shiftLeft(47))),I.high=I.high.or(M.high.and(e.fromNumber(140737488355327)));else I.high=I.high.or(e.fromNumber(V&16383).shiftLeft(49)),I.high=I.high.or(M.high.and(e.fromNumber(562949953421311)));if(I.low=M.low,A)I.high=I.high.or(e.fromString("9223372036854775808"));let T=z1.allocateUnsafe(16);return R=0,T[R++]=I.low.low&255,T[R++]=I.low.low>>8&255,T[R++]=I.low.low>>16&255,T[R++]=I.low.low>>24&255,T[R++]=I.low.high&255,T[R++]=I.low.high>>8&255,T[R++]=I.low.high>>16&255,T[R++]=I.low.high>>24&255,T[R++]=I.high.low&255,T[R++]=I.high.low>>8&255,T[R++]=I.high.low>>16&255,T[R++]=I.high.low>>24&255,T[R++]=I.high.high&255,T[R++]=I.high.high>>8&255,T[R++]=I.high.high>>16&255,T[R++]=I.high.high>>24&255,new Q8(T)}toString(){let $,F=0,A=Array(36);for(let R=0;R<A.length;R++)A[R]=0;let J=0,X=!1,Y,W={parts:[0,0,0,0]},Z,D,G=[];J=0;let z=this.bytes,H=z[J++]|z[J++]<<8|z[J++]<<16|z[J++]<<24,U=z[J++]|z[J++]<<8|z[J++]<<16|z[J++]<<24,Q=z[J++]|z[J++]<<8|z[J++]<<16|z[J++]<<24,B=z[J++]|z[J++]<<8|z[J++]<<16|z[J++]<<24;if(J=0,{low:new e(H,U),high:new e(Q,B)}.high.lessThan(e.ZERO))G.push("-");let L=B>>26&Sm1;if(L>>3===3)if(L===_m1)return G.join("")+"Infinity";else if(L===km1)return"NaN";else $=B>>15&y61,Y=8+(B>>14&1);else Y=B>>14&7,$=B>>17&y61;let E=$-x61;if(W.parts[0]=(B&16383)+((Y&15)<<14),W.parts[1]=Q,W.parts[2]=U,W.parts[3]=H,W.parts[0]===0&&W.parts[1]===0&&W.parts[2]===0&&W.parts[3]===0)X=!0;else for(D=3;D>=0;D--){let R=0,N=bm1(W);if(W=N.quotient,R=N.rem.low,!R)continue;for(Z=8;Z>=0;Z--)A[D*9+Z]=R%10,R=Math.floor(R/10)}if(X)F=1,A[J]=0;else{F=36;while(!A[J])F=F-1,J=J+1}let V=F-1+E;if(V>=34||V<=-7||E>0){if(F>34){if(G.push("0"),E>0)G.push(`E+${E}`);else if(E<0)G.push(`E${E}`);return G.join("")}if(G.push(`${A[J++]}`),F=F-1,F)G.push(".");for(let R=0;R<F;R++)G.push(`${A[J++]}`);if(G.push("E"),V>0)G.push(`+${V}`);else G.push(`${V}`)}else if(E>=0)for(let R=0;R<F;R++)G.push(`${A[J++]}`);else{let R=F+E;if(R>0)for(let N=0;N<R;N++)G.push(`${A[J++]}`);else G.push("0");G.push(".");while(R++<0)G.push("0");for(let N=0;N<F-Math.max(R-1,0);N++)G.push(`${A[J++]}`)}return G.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON($){return Q8.fromString($.$numberDecimal)}inspect($,F,A){return A??=Q7,`new Decimal128(${A(this.toString(),F)})`}}class Q5 extends p8{get _bsontype(){return"Double"}value;constructor($){super();if($ instanceof Number)$=$.valueOf();this.value=+$}static fromString($){let F=Number($);if($==="NaN")return new Q5(NaN);if($==="Infinity")return new Q5(1/0);if($==="-Infinity")return new Q5(-1/0);if(!Number.isFinite(F))throw new w1(`Input: ${$} is not representable as a Double`);if($.trim()!==$)throw new w1(`Input: '${$}' contains whitespace`);if($==="")throw new w1("Input is an empty string");if(/[^-0-9.+eE]/.test($))throw new w1(`Input: '${$}' is not in decimal or exponential notation`);return new Q5(F)}valueOf(){return this.value}toJSON(){return this.value}toString($){return this.value.toString($)}toExtendedJSON($){if($&&($.legacy||$.relaxed&&isFinite(this.value)))return this.value;if(Object.is(Math.sign(this.value),-0))return{$numberDouble:"-0.0"};return{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON($,F){let A=parseFloat($.$numberDouble);return F&&F.relaxed?A:new Q5(A)}inspect($,F,A){return A??=Q7,`new Double(${A(this.value,F)})`}}class mA extends p8{get _bsontype(){return"Int32"}value;constructor($){super();if($ instanceof Number)$=$.valueOf();this.value=+$|0}static fromString($){let F=D21($),A=Number($);if(ZK<A)throw new w1(`Input: '${$}' is larger than the maximum value for Int32`);else if(DK>A)throw new w1(`Input: '${$}' is smaller than the minimum value for Int32`);else if(!Number.isSafeInteger(A))throw new w1(`Input: '${$}' is not a safe integer`);else if(A.toString()!==F)throw new w1(`Input: '${$}' is not a valid Int32 string`);return new mA(A)}valueOf(){return this.value}toString($){return this.value.toString($)}toJSON(){return this.value}toExtendedJSON($){if($&&($.relaxed||$.legacy))return this.value;return{$numberInt:this.value.toString()}}static fromExtendedJSON($,F){return F&&F.relaxed?parseInt($.$numberInt,10):new mA($.$numberInt)}inspect($,F,A){return A??=Q7,`new Int32(${A(this.value,F)})`}}class xW extends p8{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new xW}inspect(){return"new MaxKey()"}}class gW extends p8{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new gW}inspect(){return"new MinKey()"}}var _W=null,XK=new WeakMap;class k2 extends p8{get _bsontype(){return"ObjectId"}static index=Math.floor(Math.random()*16777215);static cacheHexString;buffer;constructor($){super();let F;if(typeof $==="object"&&$&&"id"in $){if(typeof $.id!=="string"&&!ArrayBuffer.isView($.id))throw new w1("Argument passed in must have an id that is of type string or Buffer");if("toHexString"in $&&typeof $.toHexString==="function")F=z1.fromHex($.toHexString());else F=$.id}else F=$;if(F==null)this.buffer=k2.generate();else if(ArrayBuffer.isView(F)&&F.byteLength===12)this.buffer=z1.toLocalBufferType(F);else if(typeof F==="string")if(k2.validateHexString(F)){if(this.buffer=z1.fromHex(F),k2.cacheHexString)XK.set(this,F)}else throw new w1("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new w1("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id($){if(this.buffer=$,k2.cacheHexString)XK.set(this,z1.toHex($))}static validateHexString($){if($?.length!==24)return!1;for(let F=0;F<24;F++){let A=$.charCodeAt(F);if(A>=48&&A<=57||A>=97&&A<=102||A>=65&&A<=70)continue;return!1}return!0}toHexString(){if(k2.cacheHexString){let F=XK.get(this);if(F)return F}let $=z1.toHex(this.id);if(k2.cacheHexString)XK.set(this,$);return $}static getInc(){return k2.index=(k2.index+1)%16777215}static generate($){if(typeof $!=="number")$=Math.floor(Date.now()/1000);let F=k2.getInc(),A=z1.allocateUnsafe(12);if(W0.setInt32BE(A,0,$),_W===null)_W=z1.randomBytes(5);return A[4]=_W[0],A[5]=_W[1],A[6]=_W[2],A[7]=_W[3],A[8]=_W[4],A[11]=F&255,A[10]=F>>8&255,A[9]=F>>16&255,A}toString($){if($==="base64")return z1.toBase64(this.id);if($==="hex")return this.toHexString();return this.toHexString()}toJSON(){return this.toHexString()}static is($){return $!=null&&typeof $==="object"&&"_bsontype"in $&&$._bsontype==="ObjectId"}equals($){if($===void 0||$===null)return!1;if(k2.is($))return this.buffer[11]===$.buffer[11]&&z1.equals(this.buffer,$.buffer);if(typeof $==="string")return $.toLowerCase()===this.toHexString();if(typeof $==="object"&&typeof $.toHexString==="function"){let F=$.toHexString(),A=this.toHexString();return typeof F==="string"&&F.toLowerCase()===A}return!1}getTimestamp(){let $=new Date,F=W0.getUint32BE(this.buffer,0);return $.setTime(Math.floor(F)*1000),$}static createPk(){return new k2}serializeInto($,F){return $[F]=this.buffer[0],$[F+1]=this.buffer[1],$[F+2]=this.buffer[2],$[F+3]=this.buffer[3],$[F+4]=this.buffer[4],$[F+5]=this.buffer[5],$[F+6]=this.buffer[6],$[F+7]=this.buffer[7],$[F+8]=this.buffer[8],$[F+9]=this.buffer[9],$[F+10]=this.buffer[10],$[F+11]=this.buffer[11],12}static createFromTime($){let F=z1.allocate(12);for(let A=11;A>=4;A--)F[A]=0;return W0.setInt32BE(F,0,$),new k2(F)}static createFromHexString($){if($?.length!==24)throw new w1("hex string must be 24 characters");return new k2(z1.fromHex($))}static createFromBase64($){if($?.length!==16)throw new w1("base64 string must be 16 characters");return new k2(z1.fromBase64($))}static isValid($){if($==null)return!1;if(typeof $==="string")return k2.validateHexString($);try{return new k2($),!0}catch{return!1}}toExtendedJSON(){if(this.toHexString)return{$oid:this.toHexString()};return{$oid:this.toString("hex")}}static fromExtendedJSON($){return new k2($.$oid)}isCached(){return k2.cacheHexString&&XK.has(this)}inspect($,F,A){return A??=Q7,`new ObjectId(${A(this.toHexString(),F)})`}}function vV($,F,A){let J=5;if(Array.isArray($))for(let X=0;X<$.length;X++)J+=h61(X.toString(),$[X],F,!0,A);else{if(typeof $?.toBSON==="function")$=$.toBSON();for(let X of Object.keys($))J+=h61(X,$[X],F,!1,A)}return J}function h61($,F,A=!1,J=!1,X=!1){if(typeof F?.toBSON==="function")F=F.toBSON();switch(typeof F){case"string":return 1+z1.utf8ByteLength($)+1+4+z1.utf8ByteLength(F)+1;case"number":if(Math.floor(F)===F&&F>=i61&&F<=p61)if(F>=DK&&F<=ZK)return($!=null?z1.utf8ByteLength($)+1:0)+5;else return($!=null?z1.utf8ByteLength($)+1:0)+9;else return($!=null?z1.utf8ByteLength($)+1:0)+9;case"undefined":if(J||!X)return($!=null?z1.utf8ByteLength($)+1:0)+1;return 0;case"boolean":return($!=null?z1.utf8ByteLength($)+1:0)+2;case"object":if(F!=null&&typeof F._bsontype==="string"&&F[LG]!==bW)throw new RX;else if(F==null||F._bsontype==="MinKey"||F._bsontype==="MaxKey")return($!=null?z1.utf8ByteLength($)+1:0)+1;else if(F._bsontype==="ObjectId")return($!=null?z1.utf8ByteLength($)+1:0)+13;else if(F instanceof Date||BG(F))return($!=null?z1.utf8ByteLength($)+1:0)+9;else if(ArrayBuffer.isView(F)||F instanceof ArrayBuffer||e_(F))return($!=null?z1.utf8ByteLength($)+1:0)+6+F.byteLength;else if(F._bsontype==="Long"||F._bsontype==="Double"||F._bsontype==="Timestamp")return($!=null?z1.utf8ByteLength($)+1:0)+9;else if(F._bsontype==="Decimal128")return($!=null?z1.utf8ByteLength($)+1:0)+17;else if(F._bsontype==="Code")if(F.scope!=null&&Object.keys(F.scope).length>0)return($!=null?z1.utf8ByteLength($)+1:0)+1+4+4+z1.utf8ByteLength(F.code.toString())+1+vV(F.scope,A,X);else return($!=null?z1.utf8ByteLength($)+1:0)+1+4+z1.utf8ByteLength(F.code.toString())+1;else if(F._bsontype==="Binary"){let Y=F;if(Y.sub_type===I0.SUBTYPE_BYTE_ARRAY)return($!=null?z1.utf8ByteLength($)+1:0)+(Y.position+1+4+1+4);else return($!=null?z1.utf8ByteLength($)+1:0)+(Y.position+1+4+1)}else if(F._bsontype==="Symbol")return($!=null?z1.utf8ByteLength($)+1:0)+z1.utf8ByteLength(F.value)+4+1+1;else if(F._bsontype==="DBRef"){let Y=Object.assign({$ref:F.collection,$id:F.oid},F.fields);if(F.db!=null)Y.$db=F.db;return($!=null?z1.utf8ByteLength($)+1:0)+1+vV(Y,A,X)}else if(F instanceof RegExp||KG(F))return($!=null?z1.utf8ByteLength($)+1:0)+1+z1.utf8ByteLength(F.source)+1+(F.global?1:0)+(F.ignoreCase?1:0)+(F.multiline?1:0)+1;else if(F._bsontype==="BSONRegExp")return($!=null?z1.utf8ByteLength($)+1:0)+1+z1.utf8ByteLength(F.pattern)+1+z1.utf8ByteLength(F.options)+1;else return($!=null?z1.utf8ByteLength($)+1:0)+vV(F,A,X)+1;case"function":if(A)return($!=null?z1.utf8ByteLength($)+1:0)+1+4+z1.utf8ByteLength(F.toString())+1;return 0;case"bigint":return($!=null?z1.utf8ByteLength($)+1:0)+9;case"symbol":return 0;default:throw new w1(`Unrecognized JS type: ${typeof F}`)}}function fm1($){return $.split("").sort().join("")}class K5 extends p8{get _bsontype(){return"BSONRegExp"}pattern;options;constructor($,F){super();if(this.pattern=$,this.options=fm1(F??""),this.pattern.indexOf("\x00")!==-1)throw new w1(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\x00")!==-1)throw new w1(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let A=0;A<this.options.length;A++)if(!(this.options[A]==="i"||this.options[A]==="m"||this.options[A]==="x"||this.options[A]==="l"||this.options[A]==="s"||this.options[A]==="u"))throw new w1(`The regular expression option [${this.options[A]}] is not supported`)}static parseOptions($){return $?$.split("").sort().join(""):""}toExtendedJSON($){if($=$||{},$.legacy)return{$regex:this.pattern,$options:this.options};return{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON($){if("$regex"in $)if(typeof $.$regex!=="string"){if($.$regex._bsontype==="BSONRegExp")return $}else return new K5($.$regex,K5.parseOptions($.$options));if("$regularExpression"in $)return new K5($.$regularExpression.pattern,K5.parseOptions($.$regularExpression.options));throw new w1(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify($)}`)}inspect($,F,A){let J=Dm1(F)??((W)=>W);A??=Q7;let X=J(A(this.pattern),"regexp"),Y=J(A(this.options),"regexp");return`new BSONRegExp(${X}, ${Y})`}}class fW extends p8{get _bsontype(){return"BSONSymbol"}value;constructor($){super();this.value=$}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON($){return new fW($.$symbol)}inspect($,F,A){return A??=Q7,`new BSONSymbol(${A(this.value,F)})`}}var vm1=e;class W$ extends vm1{get _bsontype(){return"Timestamp"}get[mV](){return"Timestamp"}static MAX_VALUE=e.MAX_UNSIGNED_VALUE;get i(){return this.low>>>0}get t(){return this.high>>>0}constructor($){if($==null)super(0,0,!0);else if(typeof $==="bigint")super($,!0);else if(e.isLong($))super($.low,$.high,!0);else if(typeof $==="object"&&"t"in $&&"i"in $){if(typeof $.t!=="number"&&(typeof $.t!=="object"||$.t._bsontype!=="Int32"))throw new w1("Timestamp constructed from { t, i } must provide t as a number");if(typeof $.i!=="number"&&(typeof $.i!=="object"||$.i._bsontype!=="Int32"))throw new w1("Timestamp constructed from { t, i } must provide i as a number");let F=Number($.t),A=Number($.i);if(F<0||Number.isNaN(F))throw new w1("Timestamp constructed from { t, i } must provide a positive t");if(A<0||Number.isNaN(A))throw new w1("Timestamp constructed from { t, i } must provide a positive i");if(F>4294967295)throw new w1("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(A>4294967295)throw new w1("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(A,F,!0)}else throw new w1("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt($){return new W$(e.fromInt($,!0))}static fromNumber($){return new W$(e.fromNumber($,!0))}static fromBits($,F){return new W$({i:$,t:F})}static fromString($,F){return new W$(e.fromString($,!0,F))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON($){let F=e.isLong($.$timestamp.i)?$.$timestamp.i.getLowBitsUnsigned():$.$timestamp.i,A=e.isLong($.$timestamp.t)?$.$timestamp.t.getLowBitsUnsigned():$.$timestamp.t;return new W$({t:A,i:F})}inspect($,F,A){A??=Q7;let J=A(this.t,F),X=A(this.i,F);return`new Timestamp({ t: ${J}, i: ${X} })`}}var ym1=e.fromNumber(p61),um1=e.fromNumber(i61);function z21($,F,A){F=F==null?{}:F;let J=F&&F.index?F.index:0,X=W0.getInt32LE($,J);if(X<5)throw new w1(`bson size must be >= 5, is ${X}`);if(F.allowObjectSmallerThanBufferSize&&$.length<X)throw new w1(`buffer length ${$.length} must be >= bson size ${X}`);if(!F.allowObjectSmallerThanBufferSize&&$.length!==X)throw new w1(`buffer length ${$.length} must === bson size ${X}`);if(X+J>$.byteLength)throw new w1(`(bson size ${X} + options.index ${J} must be <= buffer length ${$.byteLength})`);if($[J+X-1]!==0)throw new w1("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return yV($,J,F,A)}var hm1=/^\$ref$|^\$id$|^\$db$/;function yV($,F,A,J=!1){let X=A.fieldsAsRaw==null?null:A.fieldsAsRaw,Y=A.raw==null?!1:A.raw,W=typeof A.bsonRegExp==="boolean"?A.bsonRegExp:!1,Z=A.promoteBuffers??!1,D=A.promoteLongs??!0,G=A.promoteValues??!0,z=A.useBigInt64??!1;if(z&&!G)throw new w1("Must either request bigint or Long for int64 deserialization");if(z&&!D)throw new w1("Must either request bigint or Long for int64 deserialization");let H=A.validation==null?{utf8:!0}:A.validation,U=!0,Q,B,q=H.utf8;if(typeof q==="boolean")Q=q;else{U=!1;let S=Object.keys(q).map(function(C){return q[C]});if(S.length===0)throw new w1("UTF-8 validation setting cannot be empty");if(typeof S[0]!=="boolean")throw new w1("Invalid UTF-8 validation option, must specify boolean values");if(Q=S[0],!S.every((C)=>C===Q))throw new w1("Invalid UTF-8 validation option - keys must be all true or all false")}if(!U){B=new Set;for(let S of Object.keys(q))B.add(S)}let L=F;if($.length<5)throw new w1("corrupt bson message < 5 bytes long");let E=W0.getInt32LE($,F);if(F+=4,E<5||E>$.length)throw new w1("corrupt bson message");let V=J?[]:{},R=0,N=J?!1:null;while(!0){let S=$[F++];if(S===0)break;let C=F;while($[C]!==0&&C<$.length)C++;if(C>=$.byteLength)throw new w1("Bad BSON Document: illegal CString");let M=J?R++:z1.toUTF8($,F,C,!1),I=!0;if(U||B?.has(M))I=Q;else I=!Q;if(N!==!1&&M[0]==="$")N=hm1.test(M);let T;if(F=C+1,S===n61){let j=W0.getInt32LE($,F);if(F+=4,j<=0||j>$.length-F||$[F+j-1]!==0)throw new w1("bad string length in bson");T=z1.toUTF8($,F,F+j-1,I),F=F+j}else if(S===a61){let j=z1.allocateUnsafe(12);for(let b=0;b<12;b++)j[b]=$[F+b];T=new k2(j),F=F+12}else if(S===YK&&G===!1)T=new mA(W0.getInt32LE($,F)),F+=4;else if(S===YK)T=W0.getInt32LE($,F),F+=4;else if(S===Fk){if(T=W0.getFloat64LE($,F),F+=8,G===!1)T=new Q5(T)}else if(S===s61){let j=W0.getInt32LE($,F),b=W0.getInt32LE($,F+4);F+=8,T=new Date(new e(j,b).toNumber())}else if(S===t61){if($[F]!==0&&$[F]!==1)throw new w1("illegal boolean type value");T=$[F++]===1}else if(S===Ak){let j=F,b=W0.getInt32LE($,F);if(b<=0||b>$.length-F)throw new w1("bad embedded document length in bson");if(Y)T=$.subarray(F,F+b);else{let g=A;if(!U)g={...A,validation:{utf8:I}};T=yV($,j,g,!1)}F=F+b}else if(S===r61){let j=F,b=W0.getInt32LE($,F),g=A,f=F+b;if(X&&X[M])g={...A,raw:!0};if(!U)g={...g,validation:{utf8:I}};if(T=yV($,j,g,!0),F=F+b,$[F-1]!==0)throw new w1("invalid array terminator byte");if(F!==f)throw new w1("corrupted array bson")}else if(S===Gm1)T=void 0;else if(S===Xk)T=null;else if(S===Wk)if(z)T=W0.getBigInt64LE($,F),F+=8;else{let j=W0.getInt32LE($,F),b=W0.getInt32LE($,F+4);F+=8;let g=new e(j,b);if(D&&G===!0)T=g.lessThanOrEqual(ym1)&&g.greaterThanOrEqual(um1)?g.toNumber():g;else T=g}else if(S===F21){let j=z1.allocateUnsafe(16);for(let b=0;b<16;b++)j[b]=$[F+b];F=F+16,T=new Q8(j)}else if(S===Jk){let j=W0.getInt32LE($,F);F+=4;let b=j,g=$[F++];if(j<0)throw new w1("Negative binary type element size found");if(j>$.byteLength)throw new w1("Binary type size larger than document size");if(g===I0.SUBTYPE_BYTE_ARRAY){if(j=W0.getInt32LE($,F),F+=4,j<0)throw new w1("Negative binary type element size found for subtype 0x02");if(j>b-4)throw new w1("Binary type with subtype 0x02 contains too long binary size");if(j<b-4)throw new w1("Binary type with subtype 0x02 contains too short binary size")}if(Z&&G)T=z1.toLocalBufferType($.subarray(F,F+j));else if(T=new I0($.subarray(F,F+j),g),g===Zk&&h9.isValid(T))T=T.toUUID();F=F+j}else if(S===uV&&W===!1){C=F;while($[C]!==0&&C<$.length)C++;if(C>=$.length)throw new w1("Bad BSON Document: illegal CString");let j=z1.toUTF8($,F,C,!1);F=C+1,C=F;while($[C]!==0&&C<$.length)C++;if(C>=$.length)throw new w1("Bad BSON Document: illegal CString");let b=z1.toUTF8($,F,C,!1);F=C+1;let g=Array(b.length);for(C=0;C<b.length;C++)switch(b[C]){case"m":g[C]="m";break;case"s":g[C]="g";break;case"i":g[C]="i";break}T=new RegExp(j,g.join(""))}else if(S===uV&&W===!0){C=F;while($[C]!==0&&C<$.length)C++;if(C>=$.length)throw new w1("Bad BSON Document: illegal CString");let j=z1.toUTF8($,F,C,!1);F=C+1,C=F;while($[C]!==0&&C<$.length)C++;if(C>=$.length)throw new w1("Bad BSON Document: illegal CString");let b=z1.toUTF8($,F,C,!1);F=C+1,T=new K5(j,b)}else if(S===o61){let j=W0.getInt32LE($,F);if(F+=4,j<=0||j>$.length-F||$[F+j-1]!==0)throw new w1("bad string length in bson");let b=z1.toUTF8($,F,F+j-1,I);T=G?b:new fW(b),F=F+j}else if(S===$21)T=new W$({i:W0.getUint32LE($,F),t:W0.getUint32LE($,F+4)}),F+=8;else if(S===A21)T=new gW;else if(S===J21)T=new xW;else if(S===Yk){let j=W0.getInt32LE($,F);if(F+=4,j<=0||j>$.length-F||$[F+j-1]!==0)throw new w1("bad string length in bson");let b=z1.toUTF8($,F,F+j-1,I);T=new hA(b),F=F+j}else if(S===e61){let j=W0.getInt32LE($,F);if(F+=4,j<13)throw new w1("code_w_scope total size shorter minimum expected length");let b=W0.getInt32LE($,F);if(F+=4,b<=0||b>$.length-F||$[F+b-1]!==0)throw new w1("bad string length in bson");let g=z1.toUTF8($,F,F+b-1,I);F=F+b;let f=F,d=W0.getInt32LE($,F),s=yV($,f,A,!1);if(F=F+d,j<8+d+b)throw new w1("code_w_scope total size is too short, truncating scope");if(j>8+d+b)throw new w1("code_w_scope total size is too long, clips outer document");T=new hA(g,s)}else if(S===zm1){let j=W0.getInt32LE($,F);if(F+=4,j<=0||j>$.length-F||$[F+j-1]!==0)throw new w1("bad string length in bson");let b=z1.toUTF8($,F,F+j-1,I);F=F+j;let g=z1.allocateUnsafe(12);for(let d=0;d<12;d++)g[d]=$[F+d];let f=new k2(g);F=F+12,T=new _F(b,f)}else throw new w1(`Detected unknown BSON type ${S.toString(16)} for fieldname "${M}"`);if(M==="__proto__")Object.defineProperty(V,M,{value:T,writable:!0,enumerable:!0,configurable:!0});else V[M]=T}if(E!==F-L){if(J)throw new w1("corrupt array bson");throw new w1("corrupt object bson")}if(!N)return V;if(Z21(V)){let S=Object.assign({},V);return delete S.$ref,delete S.$id,delete S.$db,new _F(V.$ref,V.$id,V.$db,S)}return V}var hV=/\x00/,m61=new Set(["$db","$ref","$id","$clusterTime"]);function __($,F,A,J){$[J++]=n61;let X=z1.encodeUTF8Into($,F,J);J=J+X+1,$[J-1]=0;let Y=z1.encodeUTF8Into($,A,J+4);return W0.setInt32LE($,J,Y+1),J=J+4+Y,$[J++]=0,J}function k_($,F,A,J){let Y=!Object.is(A,-0)&&Number.isSafeInteger(A)&&A<=ZK&&A>=DK?YK:Fk;$[J++]=Y;let W=z1.encodeUTF8Into($,F,J);if(J=J+W,$[J++]=0,Y===YK)J+=W0.setInt32LE($,J,A);else J+=W0.setFloat64LE($,J,A);return J}function b_($,F,A,J){$[J++]=Wk;let X=z1.encodeUTF8Into($,F,J);return J+=X,$[J++]=0,J+=W0.setBigInt64LE($,J,A),J}function QG($,F,A,J){$[J++]=Xk;let X=z1.encodeUTF8Into($,F,J);return J=J+X,$[J++]=0,J}function x_($,F,A,J){$[J++]=t61;let X=z1.encodeUTF8Into($,F,J);return J=J+X,$[J++]=0,$[J++]=A?1:0,J}function g_($,F,A,J){$[J++]=s61;let X=z1.encodeUTF8Into($,F,J);J=J+X,$[J++]=0;let Y=e.fromNumber(A.getTime()),W=Y.getLowBits(),Z=Y.getHighBits();return J+=W0.setInt32LE($,J,W),J+=W0.setInt32LE($,J,Z),J}function f_($,F,A,J){$[J++]=uV;let X=z1.encodeUTF8Into($,F,J);if(J=J+X,$[J++]=0,A.source&&A.source.match(hV)!=null)throw new w1("value "+A.source+" must not contain null bytes");if(J=J+z1.encodeUTF8Into($,A.source,J),$[J++]=0,A.ignoreCase)$[J++]=105;if(A.global)$[J++]=115;if(A.multiline)$[J++]=109;return $[J++]=0,J}function v_($,F,A,J){$[J++]=uV;let X=z1.encodeUTF8Into($,F,J);if(J=J+X,$[J++]=0,A.pattern.match(hV)!=null)throw new w1("pattern "+A.pattern+" must not contain null bytes");J=J+z1.encodeUTF8Into($,A.pattern,J),$[J++]=0;let Y=A.options.split("").sort().join("");return J=J+z1.encodeUTF8Into($,Y,J),$[J++]=0,J}function y_($,F,A,J){if(A===null)$[J++]=Xk;else if(A._bsontype==="MinKey")$[J++]=A21;else $[J++]=J21;let X=z1.encodeUTF8Into($,F,J);return J=J+X,$[J++]=0,J}function u_($,F,A,J){$[J++]=a61;let X=z1.encodeUTF8Into($,F,J);return J=J+X,$[J++]=0,J+=A.serializeInto($,J),J}function h_($,F,A,J){$[J++]=Jk;let X=z1.encodeUTF8Into($,F,J);J=J+X,$[J++]=0;let Y=A.length;if(J+=W0.setInt32LE($,J,Y),$[J++]=Hm1,Y<=16)for(let W=0;W<Y;W++)$[J+W]=A[W];else $.set(A,J);return J=J+Y,J}function m_($,F,A,J,X,Y,W,Z,D){if(D.has(A))throw new w1("Cannot convert circular structure to BSON");D.add(A),$[J++]=Array.isArray(A)?r61:Ak;let G=z1.encodeUTF8Into($,F,J);J=J+G,$[J++]=0;let z=GK($,A,X,J,Y+1,W,Z,D);return D.delete(A),z}function d_($,F,A,J){$[J++]=F21;let X=z1.encodeUTF8Into($,F,J);J=J+X,$[J++]=0;for(let Y=0;Y<16;Y++)$[J+Y]=A.bytes[Y];return J+16}function c_($,F,A,J){$[J++]=A._bsontype==="Long"?Wk:$21;let X=z1.encodeUTF8Into($,F,J);J=J+X,$[J++]=0;let Y=A.getLowBits(),W=A.getHighBits();return J+=W0.setInt32LE($,J,Y),J+=W0.setInt32LE($,J,W),J}function l_($,F,A,J){A=A.valueOf(),$[J++]=YK;let X=z1.encodeUTF8Into($,F,J);return J=J+X,$[J++]=0,J+=W0.setInt32LE($,J,A),J}function p_($,F,A,J){$[J++]=Fk;let X=z1.encodeUTF8Into($,F,J);return J=J+X,$[J++]=0,J+=W0.setFloat64LE($,J,A.value),J}function i_($,F,A,J){$[J++]=Yk;let X=z1.encodeUTF8Into($,F,J);J=J+X,$[J++]=0;let Y=A.toString(),W=z1.encodeUTF8Into($,Y,J+4)+1;return W0.setInt32LE($,J,W),J=J+4+W-1,$[J++]=0,J}function n_($,F,A,J,X=!1,Y=0,W=!1,Z=!0,D){if(A.scope&&typeof A.scope==="object"){$[J++]=e61;let G=z1.encodeUTF8Into($,F,J);J=J+G,$[J++]=0;let z=J,H=A.code;J=J+4;let U=z1.encodeUTF8Into($,H,J+4)+1;W0.setInt32LE($,J,U),$[J+4+U-1]=0,J=J+U+4;let Q=GK($,A.scope,X,J,Y+1,W,Z,D);J=Q-1;let B=Q-z;z+=W0.setInt32LE($,z,B),$[J++]=0}else{$[J++]=Yk;let G=z1.encodeUTF8Into($,F,J);J=J+G,$[J++]=0;let z=A.code.toString(),H=z1.encodeUTF8Into($,z,J+4)+1;W0.setInt32LE($,J,H),J=J+4+H-1,$[J++]=0}return J}function r_($,F,A,J){$[J++]=Jk;let X=z1.encodeUTF8Into($,F,J);J=J+X,$[J++]=0;let{buffer:Y,position:W}=A;if(A.sub_type===I0.SUBTYPE_BYTE_ARRAY)W=W+4;if(J+=W0.setInt32LE($,J,W),$[J++]=A.sub_type,A.sub_type===I0.SUBTYPE_BYTE_ARRAY)W=W-4,J+=W0.setInt32LE($,J,W);if(A.sub_type===I0.SUBTYPE_VECTOR)yA(A);if(W<=16)for(let Z=0;Z<W;Z++)$[J+Z]=Y[Z];else $.set(Y,J);return J=J+A.position,J}function a_($,F,A,J){$[J++]=o61;let X=z1.encodeUTF8Into($,F,J);J=J+X,$[J++]=0;let Y=z1.encodeUTF8Into($,A.value,J+4)+1;return W0.setInt32LE($,J,Y),J=J+4+Y-1,$[J++]=0,J}function t_($,F,A,J,X,Y,W){$[J++]=Ak;let Z=z1.encodeUTF8Into($,F,J);J=J+Z,$[J++]=0;let D=J,G={$ref:A.collection||A.namespace,$id:A.oid};if(A.db!=null)G.$db=A.db;G=Object.assign(G,A.fields);let z=GK($,G,!1,J,X+1,Y,!0,W),H=z-D;return D+=W0.setInt32LE($,J,H),z}function GK($,F,A,J,X,Y,W,Z){if(Z==null){if(F==null)return $[0]=5,$[1]=0,$[2]=0,$[3]=0,$[4]=0,5;if(Array.isArray(F))throw new w1("serialize does not support an array as the root input");if(typeof F!=="object")throw new w1("serialize does not support non-object as the root input");else if("_bsontype"in F&&typeof F._bsontype==="string")throw new w1("BSON types cannot be serialized as a document");else if(BG(F)||KG(F)||MX(F)||e_(F))throw new w1("date, regexp, typedarray, and arraybuffer cannot be BSON documents");Z=new Set}Z.add(F);let D=J+4;if(Array.isArray(F))for(let z=0;z<F.length;z++){let H=`${z}`,U=F[z];if(typeof U?.toBSON==="function")U=U.toBSON();let Q=typeof U;if(U===void 0)D=QG($,H,U,D);else if(U===null)D=QG($,H,U,D);else if(Q==="string")D=__($,H,U,D);else if(Q==="number")D=k_($,H,U,D);else if(Q==="bigint")D=b_($,H,U,D);else if(Q==="boolean")D=x_($,H,U,D);else if(Q==="object"&&U._bsontype==null)if(U instanceof Date||BG(U))D=g_($,H,U,D);else if(U instanceof Uint8Array||MX(U))D=h_($,H,U,D);else if(U instanceof RegExp||KG(U))D=f_($,H,U,D);else D=m_($,H,U,D,A,X,Y,W,Z);else if(Q==="object"){if(U[LG]!==bW)throw new RX;else if(U._bsontype==="ObjectId")D=u_($,H,U,D);else if(U._bsontype==="Decimal128")D=d_($,H,U,D);else if(U._bsontype==="Long"||U._bsontype==="Timestamp")D=c_($,H,U,D);else if(U._bsontype==="Double")D=p_($,H,U,D);else if(U._bsontype==="Code")D=n_($,H,U,D,A,X,Y,W,Z);else if(U._bsontype==="Binary")D=r_($,H,U,D);else if(U._bsontype==="BSONSymbol")D=a_($,H,U,D);else if(U._bsontype==="DBRef")D=t_($,H,U,D,X,Y,Z);else if(U._bsontype==="BSONRegExp")D=v_($,H,U,D);else if(U._bsontype==="Int32")D=l_($,H,U,D);else if(U._bsontype==="MinKey"||U._bsontype==="MaxKey")D=y_($,H,U,D);else if(typeof U._bsontype<"u")throw new w1(`Unrecognized or invalid _bsontype: ${String(U._bsontype)}`)}else if(Q==="function"&&Y)D=i_($,H,U,D)}else if(F instanceof Map||$k(F)){let z=F.entries(),H=!1;while(!H){let U=z.next();if(H=!!U.done,H)continue;let Q=U.value?U.value[0]:void 0,B=U.value?U.value[1]:void 0;if(typeof B?.toBSON==="function")B=B.toBSON();let q=typeof B;if(typeof Q==="string"&&!m61.has(Q)){if(Q.match(hV)!=null)throw new w1("key "+Q+" must not contain null bytes");if(A){if(Q[0]==="$")throw new w1("key "+Q+" must not start with '$'");else if(Q.includes("."))throw new w1("key "+Q+" must not contain '.'")}}if(B===void 0){if(W===!1)D=QG($,Q,B,D)}else if(B===null)D=QG($,Q,B,D);else if(q==="string")D=__($,Q,B,D);else if(q==="number")D=k_($,Q,B,D);else if(q==="bigint")D=b_($,Q,B,D);else if(q==="boolean")D=x_($,Q,B,D);else if(q==="object"&&B._bsontype==null)if(B instanceof Date||BG(B))D=g_($,Q,B,D);else if(B instanceof Uint8Array||MX(B))D=h_($,Q,B,D);else if(B instanceof RegExp||KG(B))D=f_($,Q,B,D);else D=m_($,Q,B,D,A,X,Y,W,Z);else if(q==="object"){if(B[LG]!==bW)throw new RX;else if(B._bsontype==="ObjectId")D=u_($,Q,B,D);else if(B._bsontype==="Decimal128")D=d_($,Q,B,D);else if(B._bsontype==="Long"||B._bsontype==="Timestamp")D=c_($,Q,B,D);else if(B._bsontype==="Double")D=p_($,Q,B,D);else if(B._bsontype==="Code")D=n_($,Q,B,D,A,X,Y,W,Z);else if(B._bsontype==="Binary")D=r_($,Q,B,D);else if(B._bsontype==="BSONSymbol")D=a_($,Q,B,D);else if(B._bsontype==="DBRef")D=t_($,Q,B,D,X,Y,Z);else if(B._bsontype==="BSONRegExp")D=v_($,Q,B,D);else if(B._bsontype==="Int32")D=l_($,Q,B,D);else if(B._bsontype==="MinKey"||B._bsontype==="MaxKey")D=y_($,Q,B,D);else if(typeof B._bsontype<"u")throw new w1(`Unrecognized or invalid _bsontype: ${String(B._bsontype)}`)}else if(q==="function"&&Y)D=i_($,Q,B,D)}}else{if(typeof F?.toBSON==="function"){if(F=F.toBSON(),F!=null&&typeof F!=="object")throw new w1("toBSON function did not return an object")}for(let z of Object.keys(F)){let H=F[z];if(typeof H?.toBSON==="function")H=H.toBSON();let U=typeof H;if(typeof z==="string"&&!m61.has(z)){if(z.match(hV)!=null)throw new w1("key "+z+" must not contain null bytes");if(A){if(z[0]==="$")throw new w1("key "+z+" must not start with '$'");else if(z.includes("."))throw new w1("key "+z+" must not contain '.'")}}if(H===void 0){if(W===!1)D=QG($,z,H,D)}else if(H===null)D=QG($,z,H,D);else if(U==="string")D=__($,z,H,D);else if(U==="number")D=k_($,z,H,D);else if(U==="bigint")D=b_($,z,H,D);else if(U==="boolean")D=x_($,z,H,D);else if(U==="object"&&H._bsontype==null)if(H instanceof Date||BG(H))D=g_($,z,H,D);else if(H instanceof Uint8Array||MX(H))D=h_($,z,H,D);else if(H instanceof RegExp||KG(H))D=f_($,z,H,D);else D=m_($,z,H,D,A,X,Y,W,Z);else if(U==="object"){if(H[LG]!==bW)throw new RX;else if(H._bsontype==="ObjectId")D=u_($,z,H,D);else if(H._bsontype==="Decimal128")D=d_($,z,H,D);else if(H._bsontype==="Long"||H._bsontype==="Timestamp")D=c_($,z,H,D);else if(H._bsontype==="Double")D=p_($,z,H,D);else if(H._bsontype==="Code")D=n_($,z,H,D,A,X,Y,W,Z);else if(H._bsontype==="Binary")D=r_($,z,H,D);else if(H._bsontype==="BSONSymbol")D=a_($,z,H,D);else if(H._bsontype==="DBRef")D=t_($,z,H,D,X,Y,Z);else if(H._bsontype==="BSONRegExp")D=v_($,z,H,D);else if(H._bsontype==="Int32")D=l_($,z,H,D);else if(H._bsontype==="MinKey"||H._bsontype==="MaxKey")D=y_($,z,H,D);else if(typeof H._bsontype<"u")throw new w1(`Unrecognized or invalid _bsontype: ${String(H._bsontype)}`)}else if(U==="function"&&Y)D=i_($,z,H,D)}}Z.delete(F),$[D++]=0;let G=D-J;return J+=W0.setInt32LE($,J,G),D}function mm1($){return $!=null&&typeof $==="object"&&"_bsontype"in $&&typeof $._bsontype==="string"}var dm1={$oid:k2,$binary:I0,$uuid:I0,$symbol:fW,$numberInt:mA,$numberDecimal:Q8,$numberDouble:Q5,$numberLong:e,$minKey:gW,$maxKey:xW,$regex:K5,$regularExpression:K5,$timestamp:W$};function H21($,F={}){if(typeof $==="number"){let J=$<=ZK&&$>=DK,X=$<=c61&&$>=l61;if(F.relaxed||F.legacy)return $;if(Number.isInteger($)&&!Object.is($,-0)){if(J)return new mA($);if(X){if(F.useBigInt64)return BigInt($);return e.fromNumber($)}}return new Q5($)}if($==null||typeof $!=="object")return $;if($.$undefined)return null;let A=Object.keys($).filter((J)=>J.startsWith("$")&&$[J]!=null);for(let J=0;J<A.length;J++){let X=dm1[A[J]];if(X)return X.fromExtendedJSON($,F)}if($.$date!=null){let J=$.$date,X=new Date;if(F.legacy)if(typeof J==="number")X.setTime(J);else if(typeof J==="string")X.setTime(Date.parse(J));else if(typeof J==="bigint")X.setTime(Number(J));else throw new WK(`Unrecognized type for EJSON date: ${typeof J}`);else if(typeof J==="string")X.setTime(Date.parse(J));else if(e.isLong(J))X.setTime(J.toNumber());else if(typeof J==="number"&&F.relaxed)X.setTime(J);else if(typeof J==="bigint")X.setTime(Number(J));else throw new WK(`Unrecognized type for EJSON date: ${typeof J}`);return X}if($.$code!=null){let J=Object.assign({},$);if($.$scope)J.$scope=H21($.$scope);return hA.fromExtendedJSON($)}if(Z21($)||$.$dbPointer){let J=$.$ref?$:$.$dbPointer;if(J instanceof _F)return J;let X=Object.keys(J).filter((W)=>W.startsWith("$")),Y=!0;if(X.forEach((W)=>{if(["$ref","$id","$db"].indexOf(W)===-1)Y=!1}),Y)return _F.fromExtendedJSON(J)}return $}function cm1($,F){return $.map((A,J)=>{F.seenObjects.push({propertyName:`index ${J}`,obj:null});try{return uA(A,F)}finally{F.seenObjects.pop()}})}function d61($){let F=$.toISOString();return $.getUTCMilliseconds()!==0?F:F.slice(0,-5)+"Z"}function uA($,F){if($ instanceof Map||$k($)){let A=Object.create(null);for(let[J,X]of $){if(typeof J!=="string")throw new w1("Can only serialize maps with string keys");A[J]=X}return uA(A,F)}if((typeof $==="object"||typeof $==="function")&&$!==null){let A=F.seenObjects.findIndex((J)=>J.obj===$);if(A!==-1){let J=F.seenObjects.map((z)=>z.propertyName),X=J.slice(0,A).map((z)=>`${z} -> `).join(""),Y=J[A],W=" -> "+J.slice(A+1,J.length-1).map((z)=>`${z} -> `).join(""),Z=J[J.length-1],D=" ".repeat(X.length+Y.length/2),G="-".repeat(W.length+(Y.length+Z.length)/2-1);throw new w1(`Converting circular structure to EJSON:
    ${X}${Y}${W}${Z}
    ${D}\\${G}/`)}F.seenObjects[F.seenObjects.length-1].obj=$}if(Array.isArray($))return cm1($,F);if($===void 0)return null;if($ instanceof Date||BG($)){let A=$.getTime(),J=A>-1&&A<253402318800000;if(F.legacy)return F.relaxed&&J?{$date:$.getTime()}:{$date:d61($)};return F.relaxed&&J?{$date:d61($)}:{$date:{$numberLong:$.getTime().toString()}}}if(typeof $==="number"&&(!F.relaxed||!isFinite($))){if(Number.isInteger($)&&!Object.is($,-0)){if($>=DK&&$<=ZK)return{$numberInt:$.toString()};if($>=l61&&$<=c61)return{$numberLong:$.toString()}}return{$numberDouble:Object.is($,-0)?"-0.0":$.toString()}}if(typeof $==="bigint"){if(!F.relaxed)return{$numberLong:BigInt.asIntN(64,$).toString()};return Number(BigInt.asIntN(64,$))}if($ instanceof RegExp||KG($)){let A=$.flags;if(A===void 0){let X=$.toString().match(/[gimuy]*$/);if(X)A=X[0]}return new K5($.source,A).toExtendedJSON(F)}if($!=null&&typeof $==="object")return pm1($,F);return $}var lm1={Binary:($)=>new I0($.value(),$.sub_type),Code:($)=>new hA($.code,$.scope),DBRef:($)=>new _F($.collection||$.namespace,$.oid,$.db,$.fields),Decimal128:($)=>new Q8($.bytes),Double:($)=>new Q5($.value),Int32:($)=>new mA($.value),Long:($)=>e.fromBits($.low!=null?$.low:$.low_,$.low!=null?$.high:$.high_,$.low!=null?$.unsigned:$.unsigned_),MaxKey:()=>new xW,MinKey:()=>new gW,ObjectId:($)=>new k2($),BSONRegExp:($)=>new K5($.pattern,$.options),BSONSymbol:($)=>new fW($.value),Timestamp:($)=>W$.fromBits($.low,$.high)};function pm1($,F){if($==null||typeof $!=="object")throw new w1("not an object instance");let A=$._bsontype;if(typeof A>"u"){let J={};for(let X of Object.keys($)){F.seenObjects.push({propertyName:X,obj:null});try{let Y=uA($[X],F);if(X==="__proto__")Object.defineProperty(J,X,{value:Y,writable:!0,enumerable:!0,configurable:!0});else J[X]=Y}finally{F.seenObjects.pop()}}return J}else if($!=null&&typeof $==="object"&&typeof $._bsontype==="string"&&$[LG]!==bW)throw new RX;else if(mm1($)){let J=$;if(typeof J.toExtendedJSON!=="function"){let X=lm1[$._bsontype];if(!X)throw new w1("Unrecognized or invalid _bsontype: "+$._bsontype);J=X(J)}if(A==="Code"&&J.scope)J=new hA(J.code,uA(J.scope,F));else if(A==="DBRef"&&J.oid)J=new _F(uA(J.collection,F),uA(J.oid,F),uA(J.db,F),uA(J.fields,F));return J.toExtendedJSON(F)}else throw new w1("_bsontype must be a string, but was: "+typeof A)}function U21($,F){let A={useBigInt64:F?.useBigInt64??!1,relaxed:F?.relaxed??!0,legacy:F?.legacy??!1};return JSON.parse($,(J,X)=>{if(J.indexOf("\x00")!==-1)throw new w1(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(J)}`);return H21(X,A)})}function Q21($,F,A,J){if(A!=null&&typeof A==="object")J=A,A=0;if(F!=null&&typeof F==="object"&&!Array.isArray(F))J=F,F=void 0,A=0;let X=Object.assign({relaxed:!0,legacy:!1},J,{seenObjects:[{propertyName:"(root)",obj:null}]}),Y=uA($,X);return JSON.stringify(Y,F,A)}function im1($,F){return F=F||{},JSON.parse(Q21($,F))}function nm1($,F){return F=F||{},U21(JSON.stringify($),F)}var vW=Object.create(null);vW.parse=U21;vW.stringify=Q21;vW.serialize=im1;vW.deserialize=nm1;Object.freeze(vW);var A4={double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:255,maxKey:127};function s_($,F){try{return W0.getNonnegativeInt32LE($,F)}catch(A){throw new Y$("BSON size cannot be negative",F,{cause:A})}}function o_($,F){let A=F;for(;$[A]!==0;A++);if(A===$.length-1)throw new Y$("Null terminator not found",F);return A}function rm1($,F=0){if(F??=0,$.length<5)throw new Y$(`Input must be at least 5 bytes, got ${$.length} bytes`,F);let A=s_($,F);if(A>$.length-F)throw new Y$(`Parsed documentSize (${A} bytes) does not match input length (${$.length} bytes)`,F);if($[F+A-1]!==0)throw new Y$("BSON documents must end in 0x00",F+A);let J=[],X=F+4;while(X<=A+F){let Y=$[X];if(X+=1,Y===0){if(X-F!==A)throw new Y$("Invalid 0x00 type byte",X);break}let W=X,Z=o_($,X)-W;X+=Z+1;let D;if(Y===A4.double||Y===A4.long||Y===A4.date||Y===A4.timestamp)D=8;else if(Y===A4.int)D=4;else if(Y===A4.objectId)D=12;else if(Y===A4.decimal)D=16;else if(Y===A4.bool)D=1;else if(Y===A4.null||Y===A4.undefined||Y===A4.maxKey||Y===A4.minKey)D=0;else if(Y===A4.regex)D=o_($,o_($,X)+1)+1-X;else if(Y===A4.object||Y===A4.array||Y===A4.javascriptWithScope)D=s_($,X);else if(Y===A4.string||Y===A4.binData||Y===A4.dbPointer||Y===A4.javascript||Y===A4.symbol){if(D=s_($,X)+4,Y===A4.binData)D+=1;if(Y===A4.dbPointer)D+=12}else throw new Y$(`Invalid 0x${Y.toString(16).padStart(2,"0")} type byte`,X);if(D>A)throw new Y$("value reports length larger than document",X);J.push([Y,W,Z,X,D]),X+=D}return J}var EG=Object.create(null);EG.parseToElements=rm1;EG.ByteUtils=z1;EG.NumberUtils=W0;Object.freeze(EG);var K21=17825792,PX=z1.allocate(K21);function B21($){if(PX.length<$)PX=z1.allocate($)}function w21($,F={}){let A=typeof F.checkKeys==="boolean"?F.checkKeys:!1,J=typeof F.serializeFunctions==="boolean"?F.serializeFunctions:!1,X=typeof F.ignoreUndefined==="boolean"?F.ignoreUndefined:!0,Y=typeof F.minInternalBufferSize==="number"?F.minInternalBufferSize:K21;if(PX.length<Y)PX=z1.allocate(Y);let W=GK(PX,$,A,0,0,J,X,null),Z=z1.allocateUnsafe(W);return Z.set(PX.subarray(0,W),0),Z}function q21($,F,A={}){let J=typeof A.checkKeys==="boolean"?A.checkKeys:!1,X=typeof A.serializeFunctions==="boolean"?A.serializeFunctions:!1,Y=typeof A.ignoreUndefined==="boolean"?A.ignoreUndefined:!0,W=typeof A.index==="number"?A.index:0,Z=GK(PX,$,J,0,0,X,Y,null);return F.set(PX.subarray(0,Z),W),W+Z-1}function L21($,F={}){return z21(z1.toLocalBufferType($),F)}function E21($,F={}){F=F||{};let A=typeof F.serializeFunctions==="boolean"?F.serializeFunctions:!1,J=typeof F.ignoreUndefined==="boolean"?F.ignoreUndefined:!0;return vV($,A,J)}function V21($,F,A,J,X,Y){let W=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},Y),Z=z1.toLocalBufferType($),D=F;for(let G=0;G<A;G++){let z=W0.getInt32LE(Z,D);W.index=D,J[X+G]=z21(Z,W),D=D+z}return D}var am1=Object.freeze({__proto__:null,BSONError:w1,BSONOffsetError:Y$,BSONRegExp:K5,BSONRuntimeError:WK,BSONSymbol:fW,BSONType:X21,BSONValue:p8,BSONVersionError:RX,Binary:I0,ByteUtils:z1,Code:hA,DBRef:_F,Decimal128:Q8,Double:Q5,EJSON:vW,Int32:mA,Long:e,MaxKey:xW,MinKey:gW,NumberUtils:W0,ObjectId:k2,Timestamp:W$,UUID:h9,bsonType:mV,calculateObjectSize:E21,deserialize:L21,deserializeStream:V21,onDemand:EG,serialize:w21,serializeWithBufferAndIndex:q21,setInternalBufferSize:B21});tm1.BSON=am1;tm1.BSONError=w1;tm1.BSONOffsetError=Y$;tm1.BSONRegExp=K5;tm1.BSONRuntimeError=WK;tm1.BSONSymbol=fW;tm1.BSONType=X21;tm1.BSONValue=p8;tm1.BSONVersionError=RX;tm1.Binary=I0;tm1.ByteUtils=z1;tm1.Code=hA;tm1.DBRef=_F;tm1.Decimal128=Q8;tm1.Double=Q5;tm1.EJSON=vW;tm1.Int32=mA;tm1.Long=e;tm1.MaxKey=xW;tm1.MinKey=gW;tm1.NumberUtils=W0;tm1.ObjectId=k2;tm1.Timestamp=W$;tm1.UUID=h9;tm1.bsonType=mV;tm1.calculateObjectSize=E21;tm1.deserialize=L21;tm1.deserializeStream=V21;tm1.onDemand=EG;tm1.serialize=w21;tm1.serializeWithBufferAndIndex=q21;tm1.setInternalBufferSize=B21});var w0=O((J4)=>{Object.defineProperty(J4,"__esModule",{value:!0});J4.toUTF8=J4.getBigInt64LE=J4.getFloat64LE=J4.getInt32LE=J4.UUID=J4.Timestamp=J4.serialize=J4.ObjectId=J4.MinKey=J4.MaxKey=J4.Long=J4.Int32=J4.EJSON=J4.Double=J4.deserialize=J4.Decimal128=J4.DBRef=J4.Code=J4.calculateObjectSize=J4.BSONType=J4.BSONSymbol=J4.BSONRegExp=J4.BSONError=J4.BSON=J4.Binary=void 0;J4.parseToElementsToArray=Od1;J4.pluckBSONSerializeOptions=Sd1;J4.resolveBSONOptions=_d1;J4.parseUtf8ValidationOption=kd1;var zK=Dk(),j4=Dk();Object.defineProperty(J4,"Binary",{enumerable:!0,get:function(){return j4.Binary}});Object.defineProperty(J4,"BSON",{enumerable:!0,get:function(){return j4.BSON}});Object.defineProperty(J4,"BSONError",{enumerable:!0,get:function(){return j4.BSONError}});Object.defineProperty(J4,"BSONRegExp",{enumerable:!0,get:function(){return j4.BSONRegExp}});Object.defineProperty(J4,"BSONSymbol",{enumerable:!0,get:function(){return j4.BSONSymbol}});Object.defineProperty(J4,"BSONType",{enumerable:!0,get:function(){return j4.BSONType}});Object.defineProperty(J4,"calculateObjectSize",{enumerable:!0,get:function(){return j4.calculateObjectSize}});Object.defineProperty(J4,"Code",{enumerable:!0,get:function(){return j4.Code}});Object.defineProperty(J4,"DBRef",{enumerable:!0,get:function(){return j4.DBRef}});Object.defineProperty(J4,"Decimal128",{enumerable:!0,get:function(){return j4.Decimal128}});Object.defineProperty(J4,"deserialize",{enumerable:!0,get:function(){return j4.deserialize}});Object.defineProperty(J4,"Double",{enumerable:!0,get:function(){return j4.Double}});Object.defineProperty(J4,"EJSON",{enumerable:!0,get:function(){return j4.EJSON}});Object.defineProperty(J4,"Int32",{enumerable:!0,get:function(){return j4.Int32}});Object.defineProperty(J4,"Long",{enumerable:!0,get:function(){return j4.Long}});Object.defineProperty(J4,"MaxKey",{enumerable:!0,get:function(){return j4.MaxKey}});Object.defineProperty(J4,"MinKey",{enumerable:!0,get:function(){return j4.MinKey}});Object.defineProperty(J4,"ObjectId",{enumerable:!0,get:function(){return j4.ObjectId}});Object.defineProperty(J4,"serialize",{enumerable:!0,get:function(){return j4.serialize}});Object.defineProperty(J4,"Timestamp",{enumerable:!0,get:function(){return j4.Timestamp}});Object.defineProperty(J4,"UUID",{enumerable:!0,get:function(){return j4.UUID}});function Od1($,F){let A=zK.BSON.onDemand.parseToElements($,F);return Array.isArray(A)?A:[...A]}J4.getInt32LE=zK.BSON.onDemand.NumberUtils.getInt32LE;J4.getFloat64LE=zK.BSON.onDemand.NumberUtils.getFloat64LE;J4.getBigInt64LE=zK.BSON.onDemand.NumberUtils.getBigInt64LE;J4.toUTF8=zK.BSON.onDemand.ByteUtils.toUTF8;function Sd1($){let{fieldsAsRaw:F,useBigInt64:A,promoteValues:J,promoteBuffers:X,promoteLongs:Y,serializeFunctions:W,ignoreUndefined:Z,bsonRegExp:D,raw:G,enableUtf8Validation:z}=$;return{fieldsAsRaw:F,useBigInt64:A,promoteValues:J,promoteBuffers:X,promoteLongs:Y,serializeFunctions:W,ignoreUndefined:Z,bsonRegExp:D,raw:G,enableUtf8Validation:z}}function _d1($,F){let A=F?.bsonOptions;return{raw:$?.raw??A?.raw??!1,useBigInt64:$?.useBigInt64??A?.useBigInt64??!1,promoteLongs:$?.promoteLongs??A?.promoteLongs??!0,promoteValues:$?.promoteValues??A?.promoteValues??!0,promoteBuffers:$?.promoteBuffers??A?.promoteBuffers??!1,ignoreUndefined:$?.ignoreUndefined??A?.ignoreUndefined??!1,bsonRegExp:$?.bsonRegExp??A?.bsonRegExp??!1,serializeFunctions:$?.serializeFunctions??A?.serializeFunctions??!1,fieldsAsRaw:$?.fieldsAsRaw??A?.fieldsAsRaw??{},enableUtf8Validation:$?.enableUtf8Validation??A?.enableUtf8Validation??!0}}function kd1($){if($?.enableUtf8Validation===!1)return{utf8:!1};return{utf8:{writeErrors:!1}}}});var _1=O(($41)=>{Object.defineProperty($41,"__esModule",{value:!0});$41.MongoWriteConcernError=$41.MongoServerSelectionError=$41.MongoSystemError=$41.MongoMissingDependencyError=$41.MongoMissingCredentialsError=$41.MongoCompatibilityError=$41.MongoInvalidArgumentError=$41.MongoParseError=$41.MongoNetworkTimeoutError=$41.MongoNetworkError=$41.MongoClientClosedError=$41.MongoTopologyClosedError=$41.MongoCursorExhaustedError=$41.MongoServerClosedError=$41.MongoCursorInUseError=$41.MongoOperationTimeoutError=$41.MongoUnexpectedServerResponseError=$41.MongoGridFSChunkError=$41.MongoGridFSStreamError=$41.MongoTailableCursorError=$41.MongoChangeStreamError=$41.MongoClientBulkWriteExecutionError=$41.MongoClientBulkWriteCursorError=$41.MongoClientBulkWriteError=$41.MongoGCPError=$41.MongoAzureError=$41.MongoOIDCError=$41.MongoAWSError=$41.MongoKerberosError=$41.MongoExpiredSessionError=$41.MongoTransactionError=$41.MongoNotConnectedError=$41.MongoDecompressionError=$41.MongoBatchReExecutionError=$41.MongoStalePrimaryError=$41.MongoRuntimeError=$41.MongoAPIError=$41.MongoDriverError=$41.MongoServerError=$41.MongoError=$41.MongoErrorLabel=$41.GET_MORE_RESUMABLE_CODES=$41.MONGODB_ERROR_CODES=$41.NODE_IS_RECOVERING_ERROR_MESSAGE=$41.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=$41.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=void 0;$41.needsRetryableWriteLabel=md1;$41.isRetryableWriteError=o21;$41.isRetryableReadError=dd1;$41.isNodeShuttingDownError=nd1;$41.isSDAMUnrecoverableError=rd1;$41.isNetworkTimeoutError=ad1;$41.isResumableError=td1;$41.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=new RegExp("not master","i");$41.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=new RegExp("not master or secondary","i");$41.NODE_IS_RECOVERING_ERROR_MESSAGE=new RegExp("node is recovering","i");$41.MONGODB_ERROR_CODES=Object.freeze({HostUnreachable:6,HostNotFound:7,AuthenticationFailed:18,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotWritablePrimary:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotPrimaryNoSecondaryOk:13435,NotPrimaryOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernTimeout:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,Reauthenticate:391,ReadConcernMajorityNotAvailableYet:134});$41.GET_MORE_RESUMABLE_CODES=new Set([$41.MONGODB_ERROR_CODES.HostUnreachable,$41.MONGODB_ERROR_CODES.HostNotFound,$41.MONGODB_ERROR_CODES.NetworkTimeout,$41.MONGODB_ERROR_CODES.ShutdownInProgress,$41.MONGODB_ERROR_CODES.PrimarySteppedDown,$41.MONGODB_ERROR_CODES.ExceededTimeLimit,$41.MONGODB_ERROR_CODES.SocketException,$41.MONGODB_ERROR_CODES.NotWritablePrimary,$41.MONGODB_ERROR_CODES.InterruptedAtShutdown,$41.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,$41.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,$41.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,$41.MONGODB_ERROR_CODES.StaleShardVersion,$41.MONGODB_ERROR_CODES.StaleEpoch,$41.MONGODB_ERROR_CODES.StaleConfig,$41.MONGODB_ERROR_CODES.RetryChangeStream,$41.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,$41.MONGODB_ERROR_CODES.CursorNotFound]);$41.MongoErrorLabel=Object.freeze({RetryableWriteError:"RetryableWriteError",TransientTransactionError:"TransientTransactionError",UnknownTransactionCommitResult:"UnknownTransactionCommitResult",ResumableChangeStreamError:"ResumableChangeStreamError",HandshakeError:"HandshakeError",ResetPool:"ResetPool",PoolRequestedRetry:"PoolRequestedRetry",InterruptInUseConnections:"InterruptInUseConnections",NoWritesPerformed:"NoWritesPerformed"});function hd1($){return $!=null&&typeof $==="object"&&"errors"in $&&Array.isArray($.errors)}class kF extends Error{get errorLabels(){return Array.from(this.errorLabelSet)}constructor($,F){super($,F);this.errorLabelSet=new Set}static buildErrorMessage($){if(typeof $==="string")return $;if(hd1($)&&$.message.length===0)return $.errors.length===0?"AggregateError has an empty errors array. Please check the `cause` property for more information.":$.errors.map(({message:F})=>F).join(", ");return $!=null&&typeof $==="object"&&"message"in $&&typeof $.message==="string"?$.message:"empty error message"}get name(){return"MongoError"}get errmsg(){return this.message}hasErrorLabel($){return this.errorLabelSet.has($)}addErrorLabel($){this.errorLabelSet.add($)}}$41.MongoError=kF;class dV extends kF{constructor($){super($.message||$.errmsg||$.$err||"n/a");if($.errorLabels)for(let F of $.errorLabels)this.addErrorLabel(F);this.errorResponse=$;for(let F in $)if(F!=="errorLabels"&&F!=="errmsg"&&F!=="message"&&F!=="errorResponse")this[F]=$[F]}get name(){return"MongoServerError"}}$41.MongoServerError=dV;class VG extends kF{constructor($,F){super($,F)}get name(){return"MongoDriverError"}}$41.MongoDriverError=VG;class K8 extends VG{constructor($,F){super($,F)}get name(){return"MongoAPIError"}}$41.MongoAPIError=K8;class K7 extends VG{constructor($,F){super($,F)}get name(){return"MongoRuntimeError"}}$41.MongoRuntimeError=K7;class C21 extends K7{constructor($,F){super($,F)}get name(){return"MongoStalePrimaryError"}}$41.MongoStalePrimaryError=C21;class M21 extends K8{constructor($="This batch has already been executed, create new batch to execute"){super($)}get name(){return"MongoBatchReExecutionError"}}$41.MongoBatchReExecutionError=M21;class P21 extends K7{constructor($){super($)}get name(){return"MongoDecompressionError"}}$41.MongoDecompressionError=P21;class R21 extends K8{constructor($){super($)}get name(){return"MongoNotConnectedError"}}$41.MongoNotConnectedError=R21;class I21 extends K8{constructor($){super($)}get name(){return"MongoTransactionError"}}$41.MongoTransactionError=I21;class T21 extends K8{constructor($="Cannot use a session that has ended"){super($)}get name(){return"MongoExpiredSessionError"}}$41.MongoExpiredSessionError=T21;class j21 extends K7{constructor($){super($)}get name(){return"MongoKerberosError"}}$41.MongoKerberosError=j21;class O21 extends K7{constructor($,F){super($,F)}get name(){return"MongoAWSError"}}$41.MongoAWSError=O21;class cV extends K7{constructor($){super($)}get name(){return"MongoOIDCError"}}$41.MongoOIDCError=cV;class S21 extends cV{constructor($){super($)}get name(){return"MongoAzureError"}}$41.MongoAzureError=S21;class _21 extends cV{constructor($){super($)}get name(){return"MongoGCPError"}}$41.MongoGCPError=_21;class k21 extends dV{constructor($){super($);this.writeConcernErrors=[],this.writeErrors=new Map}get name(){return"MongoClientBulkWriteError"}}$41.MongoClientBulkWriteError=k21;class b21 extends K7{constructor($){super($)}get name(){return"MongoClientBulkWriteCursorError"}}$41.MongoClientBulkWriteCursorError=b21;class x21 extends K7{constructor($){super($)}get name(){return"MongoClientBulkWriteExecutionError"}}$41.MongoClientBulkWriteExecutionError=x21;class g21 extends K7{constructor($){super($)}get name(){return"MongoChangeStreamError"}}$41.MongoChangeStreamError=g21;class f21 extends K8{constructor($="Tailable cursor does not support this operation"){super($)}get name(){return"MongoTailableCursorError"}}$41.MongoTailableCursorError=f21;class v21 extends K7{constructor($){super($)}get name(){return"MongoGridFSStreamError"}}$41.MongoGridFSStreamError=v21;class y21 extends K7{constructor($){super($)}get name(){return"MongoGridFSChunkError"}}$41.MongoGridFSChunkError=y21;class u21 extends K7{constructor($,F){super($,F)}get name(){return"MongoUnexpectedServerResponseError"}}$41.MongoUnexpectedServerResponseError=u21;class h21 extends VG{get name(){return"MongoOperationTimeoutError"}}$41.MongoOperationTimeoutError=h21;class m21 extends K8{constructor($="Cursor is already initialized"){super($)}get name(){return"MongoCursorInUseError"}}$41.MongoCursorInUseError=m21;class d21 extends K8{constructor($="Server is closed"){super($)}get name(){return"MongoServerClosedError"}}$41.MongoServerClosedError=d21;class c21 extends K8{constructor($){super($||"Cursor is exhausted")}get name(){return"MongoCursorExhaustedError"}}$41.MongoCursorExhaustedError=c21;class l21 extends K8{constructor($="Topology is closed"){super($)}get name(){return"MongoTopologyClosedError"}}$41.MongoTopologyClosedError=l21;class p21 extends K8{constructor(){super("Operation interrupted because client was closed")}get name(){return"MongoClientClosedError"}}$41.MongoClientClosedError=p21;class yW extends kF{constructor($,F){super($,{cause:F?.cause});this.beforeHandshake=!!F?.beforeHandshake}get name(){return"MongoNetworkError"}}$41.MongoNetworkError=yW;class i21 extends yW{constructor($,F){super($,F)}get name(){return"MongoNetworkTimeoutError"}}$41.MongoNetworkTimeoutError=i21;class zk extends VG{constructor($){super($)}get name(){return"MongoParseError"}}$41.MongoParseError=zk;class n21 extends K8{constructor($,F){super($,F)}get name(){return"MongoInvalidArgumentError"}}$41.MongoInvalidArgumentError=n21;class r21 extends K8{constructor($){super($)}get name(){return"MongoCompatibilityError"}}$41.MongoCompatibilityError=r21;class a21 extends K8{constructor($){super($)}get name(){return"MongoMissingCredentialsError"}}$41.MongoMissingCredentialsError=a21;class t21 extends K8{constructor($,F){super($,F);this.dependencyName=F.dependencyName}get name(){return"MongoMissingDependencyError"}}$41.MongoMissingDependencyError=t21;class Hk extends kF{constructor($,F){if(F&&F.error)super(kF.buildErrorMessage(F.error.message||F.error),{cause:F.error});else super($);if(F)this.reason=F;this.code=F.error?.code}get name(){return"MongoSystemError"}}$41.MongoSystemError=Hk;class Uk extends Hk{constructor($,F){super($,F)}get name(){return"MongoServerSelectionError"}}$41.MongoServerSelectionError=Uk;class Qk extends dV{constructor($){super({...$.writeConcernError,...$});this.errInfo=$.writeConcernError.errInfo,this.result=$}get name(){return"MongoWriteConcernError"}}$41.MongoWriteConcernError=Qk;var s21=new Set([$41.MONGODB_ERROR_CODES.HostUnreachable,$41.MONGODB_ERROR_CODES.HostNotFound,$41.MONGODB_ERROR_CODES.NetworkTimeout,$41.MONGODB_ERROR_CODES.ShutdownInProgress,$41.MONGODB_ERROR_CODES.PrimarySteppedDown,$41.MONGODB_ERROR_CODES.SocketException,$41.MONGODB_ERROR_CODES.NotWritablePrimary,$41.MONGODB_ERROR_CODES.InterruptedAtShutdown,$41.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,$41.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,$41.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,$41.MONGODB_ERROR_CODES.ExceededTimeLimit,$41.MONGODB_ERROR_CODES.ReadConcernMajorityNotAvailableYet]),Gk=s21;function md1($,F,A){if($ instanceof yW)return!0;if($ instanceof kF){if((F>=9||o21($))&&!$.hasErrorLabel($41.MongoErrorLabel.HandshakeError))return!1}if($ instanceof Qk){if(A==="Mongos"&&F<9)return Gk.has($.result.code??0);let Y=$.result.writeConcernError.code??Number($.code);return Gk.has(Number.isNaN(Y)?0:Y)}if($ instanceof kF)return Gk.has(Number($.code));if($41.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test($.message))return!0;if($41.NODE_IS_RECOVERING_ERROR_MESSAGE.test($.message))return!0;return!1}function o21($){return $.hasErrorLabel($41.MongoErrorLabel.RetryableWriteError)||$.hasErrorLabel($41.MongoErrorLabel.PoolRequestedRetry)}function dd1($){if(typeof $.code==="number"?s21.has($.code):!1)return!0;if($ instanceof yW)return!0;if($41.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test($.message))return!0;if($41.NODE_IS_RECOVERING_ERROR_MESSAGE.test($.message))return!0;return!1}var cd1=new Set([$41.MONGODB_ERROR_CODES.ShutdownInProgress,$41.MONGODB_ERROR_CODES.PrimarySteppedDown,$41.MONGODB_ERROR_CODES.InterruptedAtShutdown,$41.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,$41.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),ld1=new Set([$41.MONGODB_ERROR_CODES.NotWritablePrimary,$41.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,$41.MONGODB_ERROR_CODES.LegacyNotPrimary]),pd1=new Set([$41.MONGODB_ERROR_CODES.InterruptedAtShutdown,$41.MONGODB_ERROR_CODES.ShutdownInProgress]);function e21($){if(typeof $.code==="number")return cd1.has($.code);return $41.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test($.message)||$41.NODE_IS_RECOVERING_ERROR_MESSAGE.test($.message)}function id1($){if(typeof $.code==="number")return ld1.has($.code);if(e21($))return!1;return $41.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test($.message)}function nd1($){return!!(typeof $.code==="number"&&pd1.has($.code))}function rd1($){if($ instanceof zk||$==null)return!0;return e21($)||id1($)}function ad1($){return!!($ instanceof yW&&$.message.match(/timed out/))}function td1($,F){if($==null||!($ instanceof kF))return!1;if($ instanceof yW)return!0;if($ instanceof Uk)return!0;if(F!=null&&F>=9){if($.code===$41.MONGODB_ERROR_CODES.CursorNotFound)return!0;return $.hasErrorLabel($41.MongoErrorLabel.ResumableChangeStreamError)}if(typeof $.code==="number")return $41.GET_MORE_RESUMABLE_CODES.has($.code);return!1}});var dA=O((X41)=>{Object.defineProperty(X41,"__esModule",{value:!0});X41.OP_MSG=X41.OP_COMPRESSED=X41.OP_DELETE=X41.OP_QUERY=X41.OP_INSERT=X41.OP_UPDATE=X41.OP_REPLY=X41.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION=X41.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=X41.MIN_SUPPORTED_QE_SERVER_VERSION=X41.MIN_SUPPORTED_QE_WIRE_VERSION=X41.MAX_SUPPORTED_WIRE_VERSION=X41.MIN_SUPPORTED_WIRE_VERSION=X41.MIN_SUPPORTED_SNAPSHOT_READS_SERVER_VERSION=X41.MIN_SUPPORTED_SNAPSHOT_READS_WIRE_VERSION=X41.MAX_SUPPORTED_SERVER_VERSION=X41.MIN_SUPPORTED_SERVER_VERSION=void 0;X41.MIN_SUPPORTED_SERVER_VERSION="4.2";X41.MAX_SUPPORTED_SERVER_VERSION="8.2";X41.MIN_SUPPORTED_SNAPSHOT_READS_WIRE_VERSION=13;X41.MIN_SUPPORTED_SNAPSHOT_READS_SERVER_VERSION="5.0";X41.MIN_SUPPORTED_WIRE_VERSION=8;X41.MAX_SUPPORTED_WIRE_VERSION=27;X41.MIN_SUPPORTED_QE_WIRE_VERSION=21;X41.MIN_SUPPORTED_QE_SERVER_VERSION="7.0";X41.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=27;X41.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION="8.2";X41.OP_REPLY=1;X41.OP_UPDATE=2001;X41.OP_INSERT=2002;X41.OP_QUERY=2004;X41.OP_DELETE=2006;X41.OP_COMPRESSED=2012;X41.OP_MSG=2013});var O4=O((W41)=>{Object.defineProperty(W41,"__esModule",{value:!0});W41.END=W41.CHANGE=W41.INIT=W41.MORE=W41.RESPONSE=W41.SERVER_HEARTBEAT_FAILED=W41.SERVER_HEARTBEAT_SUCCEEDED=W41.SERVER_HEARTBEAT_STARTED=W41.COMMAND_FAILED=W41.COMMAND_SUCCEEDED=W41.COMMAND_STARTED=W41.CLUSTER_TIME_RECEIVED=W41.CONNECTION_CHECKED_IN=W41.CONNECTION_CHECKED_OUT=W41.CONNECTION_CHECK_OUT_FAILED=W41.CONNECTION_CHECK_OUT_STARTED=W41.CONNECTION_CLOSED=W41.CONNECTION_READY=W41.CONNECTION_CREATED=W41.CONNECTION_POOL_READY=W41.CONNECTION_POOL_CLEARED=W41.CONNECTION_POOL_CLOSED=W41.CONNECTION_POOL_CREATED=W41.WAITING_FOR_SUITABLE_SERVER=W41.SERVER_SELECTION_SUCCEEDED=W41.SERVER_SELECTION_FAILED=W41.SERVER_SELECTION_STARTED=W41.TOPOLOGY_DESCRIPTION_CHANGED=W41.TOPOLOGY_CLOSED=W41.TOPOLOGY_OPENING=W41.SERVER_DESCRIPTION_CHANGED=W41.SERVER_CLOSED=W41.SERVER_OPENING=W41.DESCRIPTION_RECEIVED=W41.UNPINNED=W41.PINNED=W41.MESSAGE=W41.ENDED=W41.CLOSED=W41.CONNECT=W41.OPEN=W41.CLOSE=W41.TIMEOUT=W41.ERROR=W41.SYSTEM_JS_COLLECTION=W41.SYSTEM_COMMAND_COLLECTION=W41.SYSTEM_USER_COLLECTION=W41.SYSTEM_PROFILE_COLLECTION=W41.SYSTEM_INDEX_COLLECTION=W41.SYSTEM_NAMESPACE_COLLECTION=void 0;W41.kDecoratedKeys=W41.kDecorateResult=W41.LEGACY_HELLO_COMMAND_CAMEL_CASE=W41.LEGACY_HELLO_COMMAND=W41.MONGO_CLIENT_EVENTS=W41.LOCAL_SERVER_EVENTS=W41.SERVER_RELAY_EVENTS=W41.APM_EVENTS=W41.TOPOLOGY_EVENTS=W41.CMAP_EVENTS=W41.HEARTBEAT_EVENTS=W41.RESUME_TOKEN_CHANGED=void 0;W41.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";W41.SYSTEM_INDEX_COLLECTION="system.indexes";W41.SYSTEM_PROFILE_COLLECTION="system.profile";W41.SYSTEM_USER_COLLECTION="system.users";W41.SYSTEM_COMMAND_COLLECTION="$cmd";W41.SYSTEM_JS_COLLECTION="system.js";W41.ERROR="error";W41.TIMEOUT="timeout";W41.CLOSE="close";W41.OPEN="open";W41.CONNECT="connect";W41.CLOSED="closed";W41.ENDED="ended";W41.MESSAGE="message";W41.PINNED="pinned";W41.UNPINNED="unpinned";W41.DESCRIPTION_RECEIVED="descriptionReceived";W41.SERVER_OPENING="serverOpening";W41.SERVER_CLOSED="serverClosed";W41.SERVER_DESCRIPTION_CHANGED="serverDescriptionChanged";W41.TOPOLOGY_OPENING="topologyOpening";W41.TOPOLOGY_CLOSED="topologyClosed";W41.TOPOLOGY_DESCRIPTION_CHANGED="topologyDescriptionChanged";W41.SERVER_SELECTION_STARTED="serverSelectionStarted";W41.SERVER_SELECTION_FAILED="serverSelectionFailed";W41.SERVER_SELECTION_SUCCEEDED="serverSelectionSucceeded";W41.WAITING_FOR_SUITABLE_SERVER="waitingForSuitableServer";W41.CONNECTION_POOL_CREATED="connectionPoolCreated";W41.CONNECTION_POOL_CLOSED="connectionPoolClosed";W41.CONNECTION_POOL_CLEARED="connectionPoolCleared";W41.CONNECTION_POOL_READY="connectionPoolReady";W41.CONNECTION_CREATED="connectionCreated";W41.CONNECTION_READY="connectionReady";W41.CONNECTION_CLOSED="connectionClosed";W41.CONNECTION_CHECK_OUT_STARTED="connectionCheckOutStarted";W41.CONNECTION_CHECK_OUT_FAILED="connectionCheckOutFailed";W41.CONNECTION_CHECKED_OUT="connectionCheckedOut";W41.CONNECTION_CHECKED_IN="connectionCheckedIn";W41.CLUSTER_TIME_RECEIVED="clusterTimeReceived";W41.COMMAND_STARTED="commandStarted";W41.COMMAND_SUCCEEDED="commandSucceeded";W41.COMMAND_FAILED="commandFailed";W41.SERVER_HEARTBEAT_STARTED="serverHeartbeatStarted";W41.SERVER_HEARTBEAT_SUCCEEDED="serverHeartbeatSucceeded";W41.SERVER_HEARTBEAT_FAILED="serverHeartbeatFailed";W41.RESPONSE="response";W41.MORE="more";W41.INIT="init";W41.CHANGE="change";W41.END="end";W41.RESUME_TOKEN_CHANGED="resumeTokenChanged";W41.HEARTBEAT_EVENTS=Object.freeze([W41.SERVER_HEARTBEAT_STARTED,W41.SERVER_HEARTBEAT_SUCCEEDED,W41.SERVER_HEARTBEAT_FAILED]);W41.CMAP_EVENTS=Object.freeze([W41.CONNECTION_POOL_CREATED,W41.CONNECTION_POOL_READY,W41.CONNECTION_POOL_CLEARED,W41.CONNECTION_POOL_CLOSED,W41.CONNECTION_CREATED,W41.CONNECTION_READY,W41.CONNECTION_CLOSED,W41.CONNECTION_CHECK_OUT_STARTED,W41.CONNECTION_CHECK_OUT_FAILED,W41.CONNECTION_CHECKED_OUT,W41.CONNECTION_CHECKED_IN]);W41.TOPOLOGY_EVENTS=Object.freeze([W41.SERVER_OPENING,W41.SERVER_CLOSED,W41.SERVER_DESCRIPTION_CHANGED,W41.TOPOLOGY_OPENING,W41.TOPOLOGY_CLOSED,W41.TOPOLOGY_DESCRIPTION_CHANGED,W41.ERROR,W41.TIMEOUT,W41.CLOSE]);W41.APM_EVENTS=Object.freeze([W41.COMMAND_STARTED,W41.COMMAND_SUCCEEDED,W41.COMMAND_FAILED]);W41.SERVER_RELAY_EVENTS=Object.freeze([W41.SERVER_HEARTBEAT_STARTED,W41.SERVER_HEARTBEAT_SUCCEEDED,W41.SERVER_HEARTBEAT_FAILED,W41.COMMAND_STARTED,W41.COMMAND_SUCCEEDED,W41.COMMAND_FAILED,...W41.CMAP_EVENTS]);W41.LOCAL_SERVER_EVENTS=Object.freeze([W41.CONNECT,W41.DESCRIPTION_RECEIVED,W41.CLOSED,W41.ENDED]);W41.MONGO_CLIENT_EVENTS=Object.freeze([...W41.CMAP_EVENTS,...W41.APM_EVENTS,...W41.TOPOLOGY_EVENTS,...W41.HEARTBEAT_EVENTS]);W41.LEGACY_HELLO_COMMAND="ismaster";W41.LEGACY_HELLO_COMMAND_CAMEL_CASE="isMaster";W41.kDecorateResult=Symbol.for("@@mdb.decorateDecryptionResult");W41.kDecoratedKeys=Symbol.for("@@mdb.decryptedKeys")});var Z$=O((f41)=>{Object.defineProperty(f41,"__esModule",{value:!0});f41.ReadConcern=f41.ReadConcernLevel=void 0;f41.ReadConcernLevel=Object.freeze({local:"local",majority:"majority",linearizable:"linearizable",available:"available",snapshot:"snapshot"});class CG{constructor($){this.level=f41.ReadConcernLevel[$]??$}static fromOptions($){if($==null)return;if($.readConcern){let{readConcern:F}=$;if(F instanceof CG)return F;else if(typeof F==="string")return new CG(F);else if("level"in F&&F.level)return new CG(F.level)}if($.level)return new CG($.level);return}static get MAJORITY(){return f41.ReadConcernLevel.majority}static get AVAILABLE(){return f41.ReadConcernLevel.available}static get LINEARIZABLE(){return f41.ReadConcernLevel.linearizable}static get SNAPSHOT(){return f41.ReadConcernLevel.snapshot}toJSON(){return{level:this.level}}}f41.ReadConcern=CG});var e4=O((y41)=>{Object.defineProperty(y41,"__esModule",{value:!0});y41.ReadPreference=y41.ReadPreferenceMode=void 0;var uW=_1();y41.ReadPreferenceMode=Object.freeze({primary:"primary",primaryPreferred:"primaryPreferred",secondary:"secondary",secondaryPreferred:"secondaryPreferred",nearest:"nearest"});class z2{static{this.PRIMARY=y41.ReadPreferenceMode.primary}static{this.PRIMARY_PREFERRED=y41.ReadPreferenceMode.primaryPreferred}static{this.SECONDARY=y41.ReadPreferenceMode.secondary}static{this.SECONDARY_PREFERRED=y41.ReadPreferenceMode.secondaryPreferred}static{this.NEAREST=y41.ReadPreferenceMode.nearest}static{this.primary=new z2(y41.ReadPreferenceMode.primary)}static{this.primaryPreferred=new z2(y41.ReadPreferenceMode.primaryPreferred)}static{this.secondary=new z2(y41.ReadPreferenceMode.secondary)}static{this.secondaryPreferred=new z2(y41.ReadPreferenceMode.secondaryPreferred)}static{this.nearest=new z2(y41.ReadPreferenceMode.nearest)}constructor($,F,A){if(!z2.isValid($))throw new uW.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify($)}`);if(A==null&&typeof F==="object"&&!Array.isArray(F))A=F,F=void 0;else if(F&&!Array.isArray(F))throw new uW.MongoInvalidArgumentError("ReadPreference tags must be an array");if(this.mode=$,this.tags=F,this.hedge=A?.hedge,this.maxStalenessSeconds=void 0,A=A??{},A.maxStalenessSeconds!=null){if(A.maxStalenessSeconds<=0)throw new uW.MongoInvalidArgumentError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=A.maxStalenessSeconds}if(this.mode===z2.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new uW.MongoInvalidArgumentError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new uW.MongoInvalidArgumentError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new uW.MongoInvalidArgumentError("Primary read preference cannot be combined with hedge")}}get preference(){return this.mode}static fromString($){return new z2($)}static fromOptions($){if(!$)return;let F=$.readPreference??$.session?.transaction.options.readPreference,A=$.readPreferenceTags;if(F==null)return;if(typeof F==="string")return new z2(F,A,{maxStalenessSeconds:$.maxStalenessSeconds,hedge:$.hedge});else if(!(F instanceof z2)&&typeof F==="object"){let J=F.mode||F.preference;if(J&&typeof J==="string")return new z2(J,F.tags??A,{maxStalenessSeconds:F.maxStalenessSeconds,hedge:$.hedge})}if(A)F.tags=A;return F}static translate($){if($.readPreference==null)return $;let F=$.readPreference;if(typeof F==="string")$.readPreference=new z2(F);else if(F&&!(F instanceof z2)&&typeof F==="object"){let A=F.mode||F.preference;if(A&&typeof A==="string")$.readPreference=new z2(A,F.tags,{maxStalenessSeconds:F.maxStalenessSeconds})}else if(!(F instanceof z2))throw new uW.MongoInvalidArgumentError(`Invalid read preference: ${F}`);return $}static isValid($){return new Set([z2.PRIMARY,z2.PRIMARY_PREFERRED,z2.SECONDARY,z2.SECONDARY_PREFERRED,z2.NEAREST,null]).has($)}isValid($){return z2.isValid(typeof $==="string"?$:this.mode)}secondaryOk(){return new Set([z2.PRIMARY_PREFERRED,z2.SECONDARY,z2.SECONDARY_PREFERRED,z2.NEAREST]).has(this.mode)}equals($){return $.mode===this.mode}toJSON(){let $={mode:this.mode};if(Array.isArray(this.tags))$.tags=this.tags;if(this.maxStalenessSeconds)$.maxStalenessSeconds=this.maxStalenessSeconds;if(this.hedge)$.hedge=this.hedge;return $}}y41.ReadPreference=z2});var B7=O((h41)=>{Object.defineProperty(h41,"__esModule",{value:!0});h41.ServerType=h41.TopologyType=h41.STATE_CONNECTED=h41.STATE_CONNECTING=h41.STATE_CLOSED=h41.STATE_CLOSING=void 0;h41._advanceClusterTime=_l1;h41.STATE_CLOSING="closing";h41.STATE_CLOSED="closed";h41.STATE_CONNECTING="connecting";h41.STATE_CONNECTED="connected";h41.TopologyType=Object.freeze({Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown",LoadBalanced:"LoadBalanced"});h41.ServerType=Object.freeze({Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown",LoadBalancer:"LoadBalancer"});function _l1($,F){if($.clusterTime==null)$.clusterTime=F;else if(F.clusterTime.greaterThan($.clusterTime.clusterTime))$.clusterTime=F}});var i8=O((c41)=>{Object.defineProperty(c41,"__esModule",{value:!0});c41.WriteConcern=c41.WRITE_CONCERN_KEYS=void 0;c41.throwIfWriteConcernError=ul1;var d41=T6(),yl1=_1();c41.WRITE_CONCERN_KEYS=["w","wtimeout","j","journal","fsync"];class UK{constructor($,F,A,J){if($!=null)if(!Number.isNaN(Number($)))this.w=Number($);else this.w=$;if(F!=null)this.wtimeoutMS=this.wtimeout=F;if(A!=null)this.journal=this.j=A;if(J!=null)this.journal=this.j=J?!0:!1}static apply($,F){let A={};if(F.w!=null)A.w=F.w;if(F.wtimeoutMS!=null)A.wtimeout=F.wtimeoutMS;if(F.journal!=null)A.j=F.j;return $.writeConcern=A,$}static fromOptions($,F){if($==null)return;F=F??{};let A;if(typeof $==="string"||typeof $==="number")A={w:$};else if($ instanceof UK)A=$;else A=$.writeConcern;let X={...F instanceof UK?F:F.writeConcern,...A},{w:Y=void 0,wtimeout:W=void 0,j:Z=void 0,fsync:D=void 0,journal:G=void 0,wtimeoutMS:z=void 0}=X;if(Y!=null||W!=null||z!=null||Z!=null||G!=null||D!=null)return new UK(Y,W??z,Z??G,D);return}}c41.WriteConcern=UK;function ul1($){if(typeof $==="object"&&$!=null){let F=d41.MongoDBResponse.is($)&&$.has("writeConcernError")?$.toObject():!d41.MongoDBResponse.is($)&&("writeConcernError"in $)?$:null;if(F!=null)throw new yl1.MongoWriteConcernError(F)}}});var l1=O((J91)=>{Object.defineProperty(J91,"__esModule",{value:!0});J91.kDispose=J91.randomBytes=J91.COSMOS_DB_MSG=J91.DOCUMENT_DB_MSG=J91.COSMOS_DB_CHECK=J91.DOCUMENT_DB_CHECK=J91.MONGODB_WARNING_CODE=J91.DEFAULT_PK_FACTORY=J91.HostAddress=J91.BufferPool=J91.List=J91.MongoDBCollectionNamespace=J91.MongoDBNamespace=J91.ByteUtils=void 0;J91.isUint8Array=al1;J91.hostMatchesWildcards=tl1;J91.normalizeHintField=sl1;J91.isObject=Ck;J91.mergeOptions=el1;J91.filterOptions=$p1;J91.isPromiseLike=Fp1;J91.decorateWithCollation=Ap1;J91.decorateWithReadConcern=Jp1;J91.getTopology=Xp1;J91.ns=Yp1;J91.makeCounter=Wp1;J91.uuidV4=Zp1;J91.maxWireVersion=Dp1;J91.arrayStrictEqual=Gp1;J91.errorStrictEqual=zp1;J91.makeStateMachine=Hp1;J91.now=t41;J91.calculateDurationInMs=Up1;J91.hasAtomicOperators=s41;J91.resolveTimeoutOptions=Qp1;J91.resolveOptions=Kp1;J91.isSuperset=o41;J91.isHello=Bp1;J91.setDifference=wp1;J91.isRecord=Lp1;J91.emitWarning=$91;J91.emitWarningOnce=Ep1;J91.enumToString=Vp1;J91.supportsRetryableWrites=Np1;J91.shuffle=Cp1;J91.commandSupportsReadConcern=Mp1;J91.compareObjectId=Pp1;J91.parseInteger=F91;J91.parseUnsignedInteger=Rp1;J91.checkParentDomainMatch=Ip1;J91.get=Tp1;J91.request=jp1;J91.isHostMatch=Op1;J91.promiseWithResolvers=Ik;J91.squashError=Sp1;J91.once=_p1;J91.maybeAddIdToDocuments=kp1;J91.fileIsAccessible=bp1;J91.csotMin=xp1;J91.noop=gp1;J91.decorateDecryptionResult=A91;J91.addAbortListener=Tk;J91.abortable=fp1;var r41=Z1("crypto"),dl1=Z1("fs"),a41=Z1("http"),Nk=Z1("timers"),cl1=Z1("url"),ll1=Z1("url"),pl1=Z1("util"),Mk=w0(),p41=dA(),iV=O4(),n8=_1(),il1=Z$(),nl1=e4(),rl1=B7(),i41=i8();J91.ByteUtils={toLocalBufferType($){return Buffer.isBuffer($)?$:Buffer.from($.buffer,$.byteOffset,$.byteLength)},equals($,F){return J91.ByteUtils.toLocalBufferType($).equals(F)},compare($,F){return J91.ByteUtils.toLocalBufferType($).compare(F)},toBase64($){return J91.ByteUtils.toLocalBufferType($).toString("base64")}};function al1($){return $!=null&&typeof $==="object"&&Symbol.toStringTag in $&&$[Symbol.toStringTag]==="Uint8Array"}function tl1($,F){for(let A of F)if($===A||A.startsWith("*.")&&$?.endsWith(A.substring(2,A.length))||A.startsWith("*/")&&$?.endsWith(A.substring(2,A.length)))return!0;return!1}function sl1($){let F=void 0;if(typeof $==="string")F=$;else if(Array.isArray($))F={},$.forEach((A)=>{F[A]=1});else if($!=null&&typeof $==="object"){F={};for(let A in $)F[A]=$[A]}return F}var ol1=($)=>Object.prototype.toString.call($);function Ck($){return ol1($)==="[object Object]"}function el1($,F){return{...$,...F}}function $p1($,F){let A={};for(let J in $)if(F.includes(J))A[J]=$[J];return A}function Fp1($){return $!=null&&typeof $==="object"&&"then"in $&&typeof $.then==="function"}function Ap1($,F){if(F.collation&&typeof F.collation==="object")$.collation=F.collation}function Jp1($,F,A){if(A&&A.session&&A.session.inTransaction())return;let J=Object.assign({},$.readConcern||{});if(F.s.readConcern)Object.assign(J,F.s.readConcern);if(Object.keys(J).length>0)Object.assign($,{readConcern:J})}function Xp1($){if("topology"in $&&$.topology)return $.topology;else if("client"in $&&$.client.topology)return $.client.topology;throw new n8.MongoNotConnectedError("MongoClient must be connected to perform this operation")}function Yp1($){return BK.fromString($)}class BK{constructor($,F){this.db=$,this.collection=F===""?void 0:F}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection($){return new Pk(this.db,$)}static fromString($){if(typeof $!=="string"||$==="")throw new n8.MongoRuntimeError(`Cannot parse namespace from "${$}"`);let[F,...A]=$.split("."),J=A.join(".");return new BK(F,J===""?void 0:J)}}J91.MongoDBNamespace=BK;class Pk extends BK{constructor($,F){super($,F);this.collection=F}static fromString($){return super.fromString($)}}J91.MongoDBCollectionNamespace=Pk;function*Wp1($=0){let F=$;while(!0){let A=F;F+=1,yield A}}function Zp1(){let $=r41.randomBytes(16);return $[6]=$[6]&15|64,$[8]=$[8]&63|128,$}function Dp1($){if($){if($.hello)return $.hello.maxWireVersion;if($.serverApi?.version)return p41.MAX_SUPPORTED_WIRE_VERSION;if($.loadBalanced)return p41.MAX_SUPPORTED_WIRE_VERSION;if("lastHello"in $&&typeof $.lastHello==="function"){let F=$.lastHello();if(F)return F.maxWireVersion}if($.description&&"maxWireVersion"in $.description&&$.description.maxWireVersion!=null)return $.description.maxWireVersion}return 0}function Gp1($,F){if(!Array.isArray($)||!Array.isArray(F))return!1;return $.length===F.length&&$.every((A,J)=>A===F[J])}function zp1($,F){if($===F)return!0;if(!$||!F)return $===F;if($==null&&F!=null||$!=null&&F==null)return!1;if($.constructor.name!==F.constructor.name)return!1;if($.message!==F.message)return!1;return!0}function Hp1($){return function(A,J){let X=$[A.s.state];if(X&&X.indexOf(J)<0)throw new n8.MongoRuntimeError(`illegal state transition from [${A.s.state}] => [${J}], allowed: [${X}]`);A.emit("stateChanged",A.s.state,J),A.s.state=J}}function t41(){let $=process.hrtime();return Math.floor($[0]*1000+$[1]/1e6)}function Up1($){if(typeof $!=="number")return-1;let F=t41()-$;return F<0?0:F}function s41($,F){if(Array.isArray($)){for(let J of $)if(s41(J))return!0;return!1}let A=Object.keys($);if(F?.ignoreUndefined){let J=!0;for(let X of A)if($[X]!==void 0){J=!1;break}if(J)throw new n8.MongoInvalidArgumentError("Update operations require that all atomic operators have defined values, but none were provided.")}return A.length>0&&A[0][0]==="$"}function Qp1($,F){let{socketTimeoutMS:A,serverSelectionTimeoutMS:J,waitQueueTimeoutMS:X,timeoutMS:Y}=$.s.options;return{socketTimeoutMS:A,serverSelectionTimeoutMS:J,waitQueueTimeoutMS:X,timeoutMS:Y,...F}}function Kp1($,F){let A=Object.assign({},F,(0,Mk.resolveBSONOptions)(F,$)),J=F?.timeoutMS??$?.timeoutMS,X=F?.session;if(!X?.inTransaction()){let Z=il1.ReadConcern.fromOptions(F)??$?.readConcern;if(Z)A.readConcern=Z;let D=i41.WriteConcern.fromOptions(F)??$?.writeConcern;if(D){if(J!=null)D=i41.WriteConcern.fromOptions({writeConcern:{...D,wtimeout:void 0,wtimeoutMS:void 0}});A.writeConcern=D}}A.timeoutMS=J;let Y=nl1.ReadPreference.fromOptions(F)??$?.readPreference;if(Y)A.readPreference=Y;if(X?.explicit&&X?.timeoutContext!=null&&F?.timeoutMS!=null)throw new n8.MongoInvalidArgumentError("An operation cannot be given a timeoutMS setting when inside a withTransaction call that has a timeoutMS setting");return A}function o41($,F){$=Array.isArray($)?new Set($):$,F=Array.isArray(F)?new Set(F):F;for(let A of F)if(!$.has(A))return!1;return!0}function Bp1($){return $[iV.LEGACY_HELLO_COMMAND]||$.hello?!0:!1}function wp1($,F){let A=new Set($);for(let J of F)A.delete(J);return A}var qp1=($,F)=>Object.prototype.hasOwnProperty.call($,F);function Lp1($,F=void 0){if(!Ck($))return!1;let A=$.constructor;if(A&&A.prototype){if(!Ck(A.prototype))return!1;if(!qp1(A.prototype,"isPrototypeOf"))return!1}if(F){let J=Object.keys($);return o41(J,F)}return!0}class Rk{get length(){return this.count}get[Symbol.toStringTag](){return"List"}constructor(){this.count=0,this.head={next:null,prev:null,value:null},this.head.next=this.head,this.head.prev=this.head}toArray(){return Array.from(this)}toString(){return`head <=> ${this.toArray().join(" <=> ")} <=> head`}*[Symbol.iterator](){for(let $ of this.nodes())yield $.value}*nodes(){let $=this.head.next;while($!==this.head){let{next:F}=$;yield $,$=F}}push($){this.count+=1;let F={next:this.head,prev:this.head.prev,value:$};this.head.prev.next=F,this.head.prev=F}pushMany($){for(let F of $)this.push(F)}unshift($){this.count+=1;let F={next:this.head.next,prev:this.head,value:$};this.head.next.prev=F,this.head.next=F}remove($){if($===this.head||this.length===0)return null;this.count-=1;let{prev:F,next:A}=$;return F.next=A,A.prev=F,$.value}shift(){return this.remove(this.head.next)}pop(){return this.remove(this.head.prev)}prune($){for(let F of this.nodes())if($(F.value))this.remove(F)}clear(){this.count=0,this.head.next=this.head,this.head.prev=this.head}first(){return this.head.next.value}last(){return this.head.prev.value}}J91.List=Rk;class e41{constructor(){this.buffers=new Rk,this.totalByteLength=0}get length(){return this.totalByteLength}append($){this.buffers.push($),this.totalByteLength+=$.length}getInt32(){if(this.totalByteLength<4)return null;let $=this.buffers.first();if($!=null&&$.byteLength>=4)return $.readInt32LE(0);let F=this.read(4),A=F.readInt32LE(0);return this.totalByteLength+=4,this.buffers.unshift(F),A}read($){if(typeof $!=="number"||$<0)throw new n8.MongoInvalidArgumentError('Argument "size" must be a non-negative number');if($>this.totalByteLength)return Buffer.alloc(0);let F=Buffer.allocUnsafe($);for(let A=0;A<$;){let J=this.buffers.shift();if(J==null)break;let X=$-A,Y=Math.min(X,J.byteLength),W=J.subarray(0,Y);if(F.set(W,A),A+=Y,this.totalByteLength-=Y,Y<J.byteLength)this.buffers.unshift(J.subarray(Y))}return F}}J91.BufferPool=e41;class KK{constructor($){this.host=void 0,this.port=void 0,this.socketPath=void 0,this.isIPv6=!1;let F=$.split(" ").join("%20");if(F.endsWith(".sock")){this.socketPath=decodeURIComponent(F);return}let A=`iLoveJS://${F}`,J;try{J=new ll1.URL(A)}catch(Z){let D=new n8.MongoRuntimeError(`Unable to parse ${F} with URL`);throw D.cause=Z,D}let{hostname:X,port:Y}=J,W=decodeURIComponent(X).toLowerCase();if(W.startsWith("[")&&W.endsWith("]"))this.isIPv6=!0,W=W.substring(1,X.length-1);if(this.host=W.toLowerCase(),typeof Y==="number")this.port=Y;else if(typeof Y==="string"&&Y!=="")this.port=Number.parseInt(Y,10);else this.port=27017;if(this.port===0)throw new n8.MongoParseError("Invalid port (zero) with hostname");Object.freeze(this)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new HostAddress('${this.toString()}')`}toString(){if(typeof this.host==="string"){if(this.isIPv6)return`[${this.host}]:${this.port}`;return`${this.host}:${this.port}`}return`${this.socketPath}`}static fromString($){return new KK($)}static fromHostPort($,F){if($.includes(":"))$=`[${$}]`;return KK.fromString(`${$}:${F}`)}static fromSrvRecord({name:$,port:F}){return KK.fromHostPort($,F)}toHostPort(){if(this.socketPath)return{host:this.socketPath,port:0};let $=this.host??"",F=this.port??0;return{host:$,port:F}}}J91.HostAddress=KK;J91.DEFAULT_PK_FACTORY={createPk(){return new Mk.ObjectId}};J91.MONGODB_WARNING_CODE="MONGODB DRIVER";function $91($){return process.emitWarning($,{code:J91.MONGODB_WARNING_CODE})}var n41=new Set;function Ep1($){if(!n41.has($))return n41.add($),$91($)}function Vp1($){return Object.values($).join(", ")}function Np1($){if(!$)return!1;if($.loadBalanced)return!0;if($.description.logicalSessionTimeoutMinutes!=null){if($.description.type!==rl1.ServerType.Standalone)return!0}return!1}function Cp1($,F=0){let A=Array.from($);if(F>A.length)throw new n8.MongoRuntimeError("Limit must be less than the number of items");let J=A.length,X=F%A.length===0?1:A.length-F;while(J>X){let Y=Math.floor(Math.random()*J);J-=1;let W=A[J];A[J]=A[Y],A[Y]=W}return F%A.length===0?A:A.slice(X)}function Mp1($){if($.aggregate||$.count||$.distinct||$.find||$.geoNear)return!0;return!1}function Pp1($,F){if($==null&&F==null)return 0;if($==null)return-1;if(F==null)return 1;return J91.ByteUtils.compare($.id,F.id)}function F91($){if(typeof $==="number")return Math.trunc($);let F=Number.parseInt(String($),10);return Number.isNaN(F)?null:F}function Rp1($){let F=F91($);return F!=null&&F>=0?F:null}function Ip1($,F){let A=$.endsWith(".")?$.slice(0,$.length-1):$,J=F.endsWith(".")?F.slice(0,F.length-1):F,X=/^.*?\./,Y=J.split(".").length<3,W=`.${A.replace(X,"")}`,Z=Y?J:`.${J.replace(X,"")}`;if(!Z.startsWith("."))Z="."+Z;if(Y&&A.split(".").length<=J.split(".").length)throw new n8.MongoAPIError("Server record does not have at least one more domain level than parent URI");if(!W.endsWith(Z))throw new n8.MongoAPIError("Server record does not share hostname with parent URI")}function Tp1($,F={}){return new Promise((A,J)=>{let X,Y=a41.get($,F,(W)=>{W.setEncoding("utf8");let Z="";W.on("data",(D)=>Z+=D),W.on("end",()=>{(0,Nk.clearTimeout)(X),A({status:W.statusCode,body:Z})})}).on("error",(W)=>{(0,Nk.clearTimeout)(X),J(W)}).end();X=(0,Nk.setTimeout)(()=>{Y.destroy(new n8.MongoNetworkTimeoutError("request timed out after 10 seconds"))},1e4)})}async function jp1($,F={}){return await new Promise((A,J)=>{let X={method:"GET",timeout:1e4,json:!0,...cl1.parse($),...F},Y=a41.request(X,(W)=>{W.setEncoding("utf8");let Z="";W.on("data",(D)=>{Z+=D}),W.once("end",()=>{if(F.json===!1){A(Z);return}try{let D=JSON.parse(Z);A(D)}catch{J(new n8.MongoRuntimeError(`Invalid JSON response: "${Z}"`))}})});Y.once("timeout",()=>Y.destroy(new n8.MongoNetworkTimeoutError(`Network request to ${$} timed out after ${F.timeout} ms`))),Y.once("error",(W)=>J(W)),Y.end()})}J91.DOCUMENT_DB_CHECK=/(\.docdb\.amazonaws\.com$)|(\.docdb-elastic\.amazonaws\.com$)/;J91.COSMOS_DB_CHECK=/\.cosmos\.azure\.com$/;J91.DOCUMENT_DB_MSG="You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb";J91.COSMOS_DB_MSG="You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb";function Op1($,F){return F&&$.test(F.toLowerCase())?!0:!1}function Ik(){let $,F;return{promise:new Promise(function(X,Y){$=X,F=Y}),resolve:$,reject:F}}function Sp1($){return}J91.randomBytes=(0,pl1.promisify)(r41.randomBytes);async function _p1($,F,A){A?.signal?.throwIfAborted();let{promise:J,resolve:X,reject:Y}=Ik(),W=(G)=>X(G),Z=(G)=>Y(G),D=Tk(A?.signal,function(){Y(this.reason)});$.once(F,W).once("error",Z);try{return await J}finally{$.off(F,W),$.off("error",Z),D?.[J91.kDispose]()}}function kp1($,F,A){if(A.forceServerObjectId??$.db.options?.forceServerObjectId??!1)return F;if(F._id==null)F._id=$.s.pkFactory.createPk();return F}async function bp1($,F){try{return await dl1.promises.access($,F),!0}catch{return!1}}function xp1($,F){if($===0)return F;if(F===0)return $;return Math.min($,F)}function gp1(){return}function A91($,F,A=!0){if(A){if(Buffer.isBuffer(F))F=(0,Mk.deserialize)(F);if(Buffer.isBuffer($))throw new n8.MongoRuntimeError("Expected result of decryption to be deserialized BSON object")}if(!$||typeof $!=="object")return;for(let J of Object.keys($)){let X=F[J];if(X&&X._bsontype==="Binary"&&X.sub_type===6){if(!$[iV.kDecoratedKeys])Object.defineProperty($,iV.kDecoratedKeys,{value:[],configurable:!0,enumerable:!1,writable:!1});$[iV.kDecoratedKeys].push(J);continue}A91($[J],X,!1)}}J91.kDispose=Symbol.dispose??Symbol("dispose");function Tk($,F){if($==null)return;return $.addEventListener("abort",F,{once:!0}),{[J91.kDispose]:()=>$.removeEventListener("abort",F)}}async function fp1($,{signal:F}){if(F==null)return await $;let{promise:A,reject:J}=Ik(),X=F.aborted?J(F.reason):Tk(F,function(){J(this.reason)});try{return await Promise.race([$,A])}finally{X?.[J91.kDispose]()}}});var Z91=O((Y91)=>{Object.defineProperty(Y91,"__esModule",{value:!0});Y91.OnDemandDocument=void 0;var m0=w0(),qK={type:0,nameOffset:1,nameLength:2,offset:3,length:4};class nV{constructor($,F=0,A=!1,J){this.cache=Object.create(null),this.indexFound=Object.create(null),this.bson=$,this.offset=F,this.isArray=A,this.elements=J??(0,m0.parseToElementsToArray)(this.bson,F)}isElementName($,F){let A=F[qK.nameLength],J=F[qK.nameOffset];if($.length!==A)return!1;let X=J+A;for(let Y=J,W=0;W<$.length&&Y<X;W++,Y++)if(this.bson[Y]!==$.charCodeAt(W))return!1;return!0}getElement($){let F=this.cache[$];if(F===!1)return null;if(F!=null)return F;if(typeof $==="number")if(this.isArray)if($<this.elements.length){let J={element:this.elements[$],value:void 0};return this.cache[$]=J,this.indexFound[$]=!0,J}else return null;else return null;for(let A=0;A<this.elements.length;A++){let J=this.elements[A];if(!(A in this.indexFound)&&this.isElementName($,J)){let X={element:J,value:void 0};return this.cache[$]=X,this.indexFound[A]=!0,X}}return this.cache[$]=!1,null}toJSValue($,F){let A=$[qK.type],J=$[qK.offset],X=$[qK.length];if(F!==A)return null;switch(F){case m0.BSONType.null:case m0.BSONType.undefined:return null;case m0.BSONType.double:return(0,m0.getFloat64LE)(this.bson,J);case m0.BSONType.int:return(0,m0.getInt32LE)(this.bson,J);case m0.BSONType.long:return(0,m0.getBigInt64LE)(this.bson,J);case m0.BSONType.bool:return Boolean(this.bson[J]);case m0.BSONType.objectId:return new m0.ObjectId(this.bson.subarray(J,J+12));case m0.BSONType.timestamp:return new m0.Timestamp((0,m0.getBigInt64LE)(this.bson,J));case m0.BSONType.string:return(0,m0.toUTF8)(this.bson,J+4,J+X-1,!1);case m0.BSONType.binData:{let Y=(0,m0.getInt32LE)(this.bson,J),W=this.bson[J+4];if(W===2){let Z=(0,m0.getInt32LE)(this.bson,J+1+4);if(Z<0)throw new m0.BSONError("Negative binary type element size found for subtype 0x02");if(Z>Y-4)throw new m0.BSONError("Binary type with subtype 0x02 contains too long binary size");if(Z<Y-4)throw new m0.BSONError("Binary type with subtype 0x02 contains too short binary size");return new m0.Binary(this.bson.subarray(J+1+4+4,J+1+4+4+Z),2)}return new m0.Binary(this.bson.subarray(J+1+4,J+1+4+Y),W)}case m0.BSONType.date:return new Date(Number((0,m0.getBigInt64LE)(this.bson,J)));case m0.BSONType.object:return new nV(this.bson,J);case m0.BSONType.array:return new nV(this.bson,J,!0);default:throw new m0.BSONError(`Unsupported BSON type: ${F}`)}}size(){return this.elements.length}has($){let F=this.cache[$];if(F===!1)return!1;if(F!=null)return!0;return this.getElement($)!=null}get($,F,A){let J=this.getElement($);if(J==null)if(A===!0)throw new m0.BSONError(`BSON element "${$}" is missing`);else return null;if(J.value==null){let X=this.toJSValue(J.element,F);if(X==null)if(A===!0)throw new m0.BSONError(`BSON element "${$}" is missing`);else return null;J.value=X}return J.value}getNumber($,F){let A=this.get($,m0.BSONType.bool),J=A==null?null:A?1:0,X=this.get($,m0.BSONType.long),Y=X==null?null:Number(X),W=J??Y??this.get($,m0.BSONType.int)??this.get($,m0.BSONType.double);if(F===!0&&W==null)throw new m0.BSONError(`BSON element "${$}" is missing`);return W}toObject($){return(0,m0.deserialize)(this.bson,{...$,index:this.offset,allowObjectSmallerThanBufferSize:!0})}toBytes(){let $=(0,m0.getInt32LE)(this.bson,this.offset);return this.bson.subarray(this.offset,this.offset+$)}}Y91.OnDemandDocument=nV});var T6=O((U91)=>{Object.defineProperty(U91,"__esModule",{value:!0});U91.ClientBulkWriteCursorResponse=U91.ExplainedCursorResponse=U91.CursorResponse=U91.MongoDBResponse=void 0;U91.isErrorResponse=G91;var t0=w0(),hW=_1(),D91=l1(),ci1=Z91(),rV={type:0,nameOffset:1,nameLength:2,offset:3,length:4};function G91($,F){for(let A=0;A<F.length;A++){let J=F[A];if(J[rV.nameLength]===2){let X=J[rV.nameOffset];if($[X]===111&&$[X+1]===107){let Y=J[rV.offset],W=J[rV.length];for(let Z=Y;Z<Y+W;Z++)if($[Z]!==0)return!1;return!0}}}return!0}class MG extends ci1.OnDemandDocument{get($,F,A){try{return super.get($,F,A)}catch(J){throw new hW.MongoUnexpectedServerResponseError(J.message,{cause:J})}}static is($){return $ instanceof MG}static make($){let F=(0,t0.parseToElementsToArray)($,0);return G91($,F)?new MG($,0,!1,F):new this($,0,!1,F)}static{this.empty=new MG(new Uint8Array([13,0,0,0,16,111,107,0,1,0,0,0,0]))}get isMaxTimeExpiredError(){if(this.ok===0&&this.code===hW.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;if(this.ok===0)return!1;if(this.get("writeConcernError",t0.BSONType.object)?.getNumber("code")===hW.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;let A=this.get("writeErrors",t0.BSONType.array);if(A?.size()){for(let J=0;J<A.size();J++)if(A.get(J,t0.BSONType.object)?.getNumber("code")===hW.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0}return!1}get recoveryToken(){return this.get("recoveryToken",t0.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}get atClusterTime(){return this.get("cursor",t0.BSONType.object)?.get("atClusterTime",t0.BSONType.timestamp)??this.get("atClusterTime",t0.BSONType.timestamp)}get operationTime(){return this.get("operationTime",t0.BSONType.timestamp)}get ok(){return this.getNumber("ok")?1:0}get $err(){return this.get("$err",t0.BSONType.string)}get errmsg(){return this.get("errmsg",t0.BSONType.string)}get code(){return this.getNumber("code")}get $clusterTime(){if(!("clusterTime"in this)){let $=this.get("$clusterTime",t0.BSONType.object);if($==null)return this.clusterTime=null,null;let F=$.get("clusterTime",t0.BSONType.timestamp,!0),A=$.get("signature",t0.BSONType.object)?.toObject();this.clusterTime={clusterTime:F,signature:A}}return this.clusterTime??null}toObject($){let F={...(0,t0.pluckBSONSerializeOptions)($??{}),validation:(0,t0.parseUtf8ValidationOption)($)};return super.toObject(F)}}U91.MongoDBResponse=MG;class mW extends MG{constructor(){super(...arguments);this._batch=null,this.iterated=0,this._encryptedBatch=null}static get emptyGetMore(){return new mW((0,t0.serialize)({ok:1,cursor:{id:0n,nextBatch:[]}}))}static is($){return $ instanceof mW||$===mW.emptyGetMore}get cursor(){return this.get("cursor",t0.BSONType.object,!0)}get id(){try{return t0.Long.fromBigInt(this.cursor.get("id",t0.BSONType.long,!0))}catch($){throw new hW.MongoUnexpectedServerResponseError($.message,{cause:$})}}get ns(){let $=this.cursor.get("ns",t0.BSONType.string);if($!=null)return(0,D91.ns)($);return null}get length(){return Math.max(this.batchSize-this.iterated,0)}get encryptedBatch(){if(this.encryptedResponse==null)return null;if(this._encryptedBatch!=null)return this._encryptedBatch;let $=this.encryptedResponse?.get("cursor",t0.BSONType.object);if($?.has("firstBatch"))this._encryptedBatch=$.get("firstBatch",t0.BSONType.array,!0);else if($?.has("nextBatch"))this._encryptedBatch=$.get("nextBatch",t0.BSONType.array,!0);else throw new hW.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._encryptedBatch}get batch(){if(this._batch!=null)return this._batch;let $=this.cursor;if($.has("firstBatch"))this._batch=$.get("firstBatch",t0.BSONType.array,!0);else if($.has("nextBatch"))this._batch=$.get("nextBatch",t0.BSONType.array,!0);else throw new hW.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._batch}get batchSize(){return this.batch?.size()}get postBatchResumeToken(){return this.cursor.get("postBatchResumeToken",t0.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}shift($){if(this.iterated>=this.batchSize)return null;let F=this.batch.get(this.iterated,t0.BSONType.object,!0)??null,A=this.encryptedBatch?.get(this.iterated,t0.BSONType.object,!0)??null;if(this.iterated+=1,$?.raw)return F.toBytes();else{let J=F.toObject($);if(A)(0,D91.decorateDecryptionResult)(J,A.toObject($),!0);return J}}clear(){this.iterated=this.batchSize}}U91.CursorResponse=mW;class z91 extends mW{constructor(){super(...arguments);this.isExplain=!0,this._length=1}get id(){return t0.Long.fromBigInt(0n)}get batchSize(){return 0}get ns(){return null}get length(){return this._length}shift($){if(this._length===0)return null;return this._length-=1,this.toObject($)}}U91.ExplainedCursorResponse=z91;class H91 extends mW{get insertedCount(){return this.get("nInserted",t0.BSONType.int,!0)}get upsertedCount(){return this.get("nUpserted",t0.BSONType.int,!0)}get matchedCount(){return this.get("nMatched",t0.BSONType.int,!0)}get modifiedCount(){return this.get("nModified",t0.BSONType.int,!0)}get deletedCount(){return this.get("nDeleted",t0.BSONType.int,!0)}get writeConcernError(){return this.get("writeConcernError",t0.BSONType.object,!1)}}U91.ClientBulkWriteCursorResponse=H91});var LK=O((K91)=>{Object.defineProperty(K91,"__esModule",{value:!0});K91.Explain=K91.ExplainVerbosity=void 0;K91.validateExplainTimeoutOptions=ai1;K91.decorateWithExplain=ti1;var ri1=_1();K91.ExplainVerbosity=Object.freeze({queryPlanner:"queryPlanner",queryPlannerExtended:"queryPlannerExtended",executionStats:"executionStats",allPlansExecution:"allPlansExecution"});class aV{constructor($,F){if(typeof $==="boolean")this.verbosity=$?K91.ExplainVerbosity.allPlansExecution:K91.ExplainVerbosity.queryPlanner;else this.verbosity=$;this.maxTimeMS=F}static fromOptions({explain:$}={}){if($==null)return;if(typeof $==="boolean"||typeof $==="string")return new aV($);let{verbosity:F,maxTimeMS:A}=$;return new aV(F,A)}}K91.Explain=aV;function ai1($,F){let{maxTimeMS:A,timeoutMS:J}=$;if(J!=null&&(A!=null||F?.maxTimeMS!=null))throw new ri1.MongoAPIError("Cannot use maxTimeMS with timeoutMS for explain commands.")}function ti1($,F){let{verbosity:A,maxTimeMS:J}=F,X={explain:$,verbosity:A};if(typeof J==="number")X.maxTimeMS=J;return X}});var o6=O((q91)=>{Object.defineProperty(q91,"__esModule",{value:!0});q91.AbstractOperation=q91.Aspect=void 0;q91.defineAspects=$n1;var ei1=w0(),Ok=e4();q91.Aspect={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXPLAINABLE:Symbol("EXPLAINABLE"),SKIP_COLLATION:Symbol("SKIP_COLLATION"),CURSOR_CREATING:Symbol("CURSOR_CREATING"),MUST_SELECT_SAME_SERVER:Symbol("MUST_SELECT_SAME_SERVER"),COMMAND_BATCHING:Symbol("COMMAND_BATCHING"),SUPPORTS_RAW_DATA:Symbol("SUPPORTS_RAW_DATA")};class w91{constructor($={}){this.readPreference=this.hasAspect(q91.Aspect.WRITE_OPERATION)?Ok.ReadPreference.primary:Ok.ReadPreference.fromOptions($)??Ok.ReadPreference.primary,this.bsonOptions=(0,ei1.resolveBSONOptions)($),this._session=$.session!=null?$.session:void 0,this.options=$,this.bypassPinningCheck=!!$.bypassPinningCheck}hasAspect($){let F=this.constructor;if(F.aspects==null)return!1;return F.aspects.has($)}get session(){return this._session}set session($){this._session=$}clearSession(){this._session=void 0}resetBatch(){return!0}get canRetryRead(){return this.hasAspect(q91.Aspect.RETRYABLE)&&this.hasAspect(q91.Aspect.READ_OPERATION)}get canRetryWrite(){return this.hasAspect(q91.Aspect.RETRYABLE)&&this.hasAspect(q91.Aspect.WRITE_OPERATION)}handleOk($){return $.toObject(this.bsonOptions)}handleError($){throw $}}q91.AbstractOperation=w91;function $n1($,F){if(!Array.isArray(F)&&!(F instanceof Set))F=[F];return F=new Set(F),Object.defineProperty($,"aspects",{value:F,writable:!1}),F}});var X4=O((N91)=>{Object.defineProperty(N91,"__esModule",{value:!0});N91.CommandOperation=void 0;var An1=dA(),Jn1=_1(),Sk=LK(),Xn1=Z$(),tV=l1(),E91=i8(),dW=o6();class V91 extends dW.AbstractOperation{constructor($,F){super(F);this.options=F??{};let A=F?.dbName||F?.authdb;if(A)this.ns=new tV.MongoDBNamespace(A,"$cmd");else this.ns=$?$.s.namespace.withCollection("$cmd"):new tV.MongoDBNamespace("admin","$cmd");if(this.readConcern=Xn1.ReadConcern.fromOptions(F),this.writeConcern=E91.WriteConcern.fromOptions(F),this.hasAspect(dW.Aspect.EXPLAINABLE)){if(this.explain=Sk.Explain.fromOptions(F),this.explain)(0,Sk.validateExplainTimeoutOptions)(this.options,this.explain)}else if(F?.explain!=null)throw new Jn1.MongoInvalidArgumentError('Option "explain" is not supported on this command')}get canRetryWrite(){if(this.hasAspect(dW.Aspect.EXPLAINABLE))return this.explain==null;return super.canRetryWrite}buildOptions($){return{...this.options,...this.bsonOptions,timeoutContext:$,readPreference:this.readPreference,session:this.session}}buildCommand($,F){let A=this.buildCommandDocument($,F),J=this.session&&this.session.inTransaction();if(this.readConcern&&(0,tV.commandSupportsReadConcern)(A)&&!J)Object.assign(A,{readConcern:this.readConcern});if(this.writeConcern&&this.hasAspect(dW.Aspect.WRITE_OPERATION)&&!J)E91.WriteConcern.apply(A,this.writeConcern);if(this.options.collation&&typeof this.options.collation==="object"&&!this.hasAspect(dW.Aspect.SKIP_COLLATION))Object.assign(A,{collation:this.options.collation});if(typeof this.options.maxTimeMS==="number")A.maxTimeMS=this.options.maxTimeMS;if(this.options.rawData!=null&&this.hasAspect(dW.Aspect.SUPPORTS_RAW_DATA)&&(0,tV.maxWireVersion)($)>=An1.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION)A.rawData=this.options.rawData;if(this.hasAspect(dW.Aspect.EXPLAINABLE)&&this.explain)return(0,Sk.decorateWithExplain)(A,this.explain);return A}}N91.CommandOperation=V91});var xk=O((M91)=>{Object.defineProperty(M91,"__esModule",{value:!0});M91.DeleteManyOperation=M91.DeleteOneOperation=M91.DeleteOperation=void 0;M91.makeDeleteStatement=bk;var Yn1=T6(),EK=_1(),Wn1=l1(),Zn1=X4(),r8=o6();class VK extends Zn1.CommandOperation{constructor($,F,A){super(void 0,A);this.SERVER_COMMAND_RESPONSE_TYPE=Yn1.MongoDBResponse,this.options=A,this.ns=$,this.statements=F}get commandName(){return"delete"}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every(($)=>$.limit!=null?$.limit>0:!0)}buildCommandDocument($,F){let A=this.options,J=typeof A.ordered==="boolean"?A.ordered:!0,X={delete:this.ns.collection,deletes:this.statements,ordered:J};if(A.let)X.let=A.let;if(A.comment!==void 0)X.comment=A.comment;if(this.writeConcern&&this.writeConcern.w===0&&(0,Wn1.maxWireVersion)($)<9){if(this.statements.find((W)=>W.hint))throw new EK.MongoCompatibilityError("hint for the delete command is only supported on MongoDB 4.4+")}return X}}M91.DeleteOperation=VK;class _k extends VK{constructor($,F,A){super($,[bk(F,{...A,limit:1})],A)}handleOk($){let F=super.handleOk($);if(this.explain)return F;if(F.code)throw new EK.MongoServerError(F);if(F.writeErrors)throw new EK.MongoServerError(F.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:F.n}}}M91.DeleteOneOperation=_k;class kk extends VK{constructor($,F,A){super($,[bk(F,A)],A)}handleOk($){let F=super.handleOk($);if(this.explain)return F;if(F.code)throw new EK.MongoServerError(F);if(F.writeErrors)throw new EK.MongoServerError(F.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:F.n}}}M91.DeleteManyOperation=kk;function bk($,F){let A={q:$,limit:typeof F.limit==="number"?F.limit:0};if(F.collation)A.collation=F.collation;if(F.hint)A.hint=F.hint;return A}(0,r8.defineAspects)(VK,[r8.Aspect.RETRYABLE,r8.Aspect.WRITE_OPERATION,r8.Aspect.SUPPORTS_RAW_DATA]);(0,r8.defineAspects)(_k,[r8.Aspect.RETRYABLE,r8.Aspect.WRITE_OPERATION,r8.Aspect.EXPLAINABLE,r8.Aspect.SKIP_COLLATION,r8.Aspect.SUPPORTS_RAW_DATA]);(0,r8.defineAspects)(kk,[r8.Aspect.WRITE_OPERATION,r8.Aspect.EXPLAINABLE,r8.Aspect.SKIP_COLLATION,r8.Aspect.SUPPORTS_RAW_DATA])});var CK=O((T91)=>{Object.defineProperty(T91,"__esModule",{value:!0});T91.MIN_SECONDARY_WRITE_WIRE_VERSION=void 0;T91.writableServerSelector=Un1;T91.sameServerSelector=Qn1;T91.secondaryWritableServerSelector=Kn1;T91.readPreferenceServerSelector=fk;var gk=_1(),NK=e4(),w7=B7(),Hn1=1e4,R91=90;T91.MIN_SECONDARY_WRITE_WIRE_VERSION=13;function Un1(){return function(F,A){return sV(F,A.filter((J)=>J.isWritable))}}function Qn1($){return function(A,J){if(!$)return[];return J.filter((X)=>{return X.address===$.address&&X.type!==w7.ServerType.Unknown})}}function Kn1($,F){if(!F||!$||$&&$<T91.MIN_SECONDARY_WRITE_WIRE_VERSION)return fk(NK.ReadPreference.primary);return fk(F)}function Bn1($,F,A){if($.maxStalenessSeconds==null||$.maxStalenessSeconds<0)return A;let J=$.maxStalenessSeconds,X=(F.heartbeatFrequencyMS+Hn1)/1000;if(J<X)throw new gk.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${X} seconds`);if(J<R91)throw new gk.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${R91} seconds`);if(F.type===w7.TopologyType.ReplicaSetWithPrimary){let Y=Array.from(F.servers.values()).filter(oV)[0];return A.reduce((W,Z)=>{let G=(Z.lastUpdateTime-Z.lastWriteDate-(Y.lastUpdateTime-Y.lastWriteDate)+F.heartbeatFrequencyMS)/1000,z=$.maxStalenessSeconds??0;if(G<=z)W.push(Z);return W},[])}if(F.type===w7.TopologyType.ReplicaSetNoPrimary){if(A.length===0)return A;let Y=A.reduce((W,Z)=>Z.lastWriteDate>W.lastWriteDate?Z:W);return A.reduce((W,Z)=>{let G=(Y.lastWriteDate-Z.lastWriteDate+F.heartbeatFrequencyMS)/1000,z=$.maxStalenessSeconds??0;if(G<=z)W.push(Z);return W},[])}return A}function wn1($,F){let A=Object.keys($),J=Object.keys(F);for(let X=0;X<A.length;++X){let Y=A[X];if(J.indexOf(Y)===-1||F[Y]!==$[Y])return!1}return!0}function qn1($,F){if($.tags==null||Array.isArray($.tags)&&$.tags.length===0)return F;for(let A=0;A<$.tags.length;++A){let J=$.tags[A],X=F.reduce((Y,W)=>{if(wn1(J,W.tags))Y.push(W);return Y},[]);if(X.length)return X}return[]}function sV($,F){let A=F.reduce((X,Y)=>Math.min(Y.roundTripTime,X),1/0),J=A+$.localThresholdMS;return F.reduce((X,Y)=>{if(Y.roundTripTime<=J&&Y.roundTripTime>=A)X.push(Y);return X},[])}function oV($){return $.type===w7.ServerType.RSPrimary}function Ln1($){return $.type===w7.ServerType.RSSecondary}function En1($){return $.type===w7.ServerType.RSSecondary||$.type===w7.ServerType.RSPrimary}function I91($){return $.type!==w7.ServerType.Unknown}function Vn1($){return $.type===w7.ServerType.LoadBalancer}function fk($){if(!$.isValid())throw new gk.MongoInvalidArgumentError("Invalid read preference specified");return function(A,J,X=[]){if(A.type===w7.TopologyType.LoadBalanced)return J.filter(Vn1);if(A.type===w7.TopologyType.Unknown)return[];if(A.type===w7.TopologyType.Single)return sV(A,J.filter(I91));if(A.type===w7.TopologyType.Sharded){let D=J.filter((z)=>{return!X.includes(z)}),G=D.length>0?D:X;return sV(A,G.filter(I91))}let Y=$.mode;if(Y===NK.ReadPreference.PRIMARY)return J.filter(oV);if(Y===NK.ReadPreference.PRIMARY_PREFERRED){let D=J.filter(oV);if(D.length)return D}let W=Y===NK.ReadPreference.NEAREST?En1:Ln1,Z=sV(A,qn1($,Bn1($,A,J.filter(W))));if(Y===NK.ReadPreference.SECONDARY_PREFERRED&&Z.length===0)return J.filter(oV);return Z}}});var $9=O((O91)=>{Object.defineProperty(O91,"__esModule",{value:!0});O91.LegacyTimeoutContext=O91.CSOTTimeoutContext=O91.TimeoutContext=O91.Timeout=O91.TimeoutError=void 0;var j91=Z1("timers"),cW=_1(),yk=l1();class eV extends Error{get name(){return"TimeoutError"}constructor($,F){super($,F);this.duration=F.duration}static is($){return $!=null&&typeof $==="object"&&"name"in $&&$.name==="TimeoutError"}}O91.TimeoutError=eV;class q7 extends Promise{get remainingTime(){if(this.timedOut)return 0;if(this.duration===0)return 1/0;return this.start+this.duration-Math.trunc(performance.now())}get timeElapsed(){return Math.trunc(performance.now())-this.start}constructor($=()=>null,F){let A=F?.duration??0,J=!!F?.unref,X=F?.rejection;if(A<0)throw new cW.MongoInvalidArgumentError("Cannot create a Timeout with a negative duration");let Y;super((W,Z)=>{Y=Z,$(yk.noop,Z)});if(this.ended=null,this.timedOut=!1,this.cleared=!1,this.duration=A,this.start=Math.trunc(performance.now()),X==null&&this.duration>0){if(this.id=(0,j91.setTimeout)(()=>{this.ended=Math.trunc(performance.now()),this.timedOut=!0,Y(new eV(`Expired after ${A}ms`,{duration:A}))},this.duration),typeof this.id.unref==="function"&&J)this.id.unref()}else if(X!=null)this.ended=Math.trunc(performance.now()),this.timedOut=!0,Y(X)}clear(){(0,j91.clearTimeout)(this.id),this.id=void 0,this.timedOut=!1,this.cleared=!0}throwIfExpired(){if(this.timedOut)throw this.then(void 0,yk.squashError),new eV("Timed out",{duration:this.duration})}static expires($,F){return new q7(void 0,{duration:$,unref:F})}static reject($){return new q7(void 0,{duration:0,unref:!0,rejection:$})}}O91.Timeout=q7;function Rn1($){return $!=null&&typeof $==="object"&&"serverSelectionTimeoutMS"in $&&typeof $.serverSelectionTimeoutMS==="number"&&"waitQueueTimeoutMS"in $&&typeof $.waitQueueTimeoutMS==="number"}function In1($){return $!=null&&typeof $==="object"&&"serverSelectionTimeoutMS"in $&&typeof $.serverSelectionTimeoutMS==="number"&&"timeoutMS"in $&&typeof $.timeoutMS==="number"}class $N{static create($){if($.session?.timeoutContext!=null)return $.session?.timeoutContext;if(In1($))return new MK($);else if(Rn1($))return new FN($);else throw new cW.MongoRuntimeError("Unrecognized options")}}O91.TimeoutContext=$N;class MK extends $N{constructor($){super();this.minRoundTripTime=0,this.start=Math.trunc(performance.now()),this.timeoutMS=$.timeoutMS,this.serverSelectionTimeoutMS=$.serverSelectionTimeoutMS,this.socketTimeoutMS=$.socketTimeoutMS,this.clearServerSelectionTimeout=!1}get maxTimeMS(){return this.remainingTimeMS-this.minRoundTripTime}get remainingTimeMS(){let $=Math.trunc(performance.now())-this.start;return this.timeoutMS<=0?1/0:this.timeoutMS-$}csotEnabled(){return!0}get serverSelectionTimeout(){if(typeof this._serverSelectionTimeout!=="object"||this._serverSelectionTimeout?.cleared){let{remainingTimeMS:$,serverSelectionTimeoutMS:F}=this;if($<=0)return q7.reject(new cW.MongoOperationTimeoutError(`Timed out in server selection after ${this.timeoutMS}ms`));if(F!==0&&(0,yk.csotMin)($,F)===F)this._serverSelectionTimeout=q7.expires(F);else if($>0&&Number.isFinite($))this._serverSelectionTimeout=q7.expires($);else this._serverSelectionTimeout=null}return this._serverSelectionTimeout}get connectionCheckoutTimeout(){if(typeof this._connectionCheckoutTimeout!=="object"||this._connectionCheckoutTimeout?.cleared)if(typeof this._serverSelectionTimeout==="object")this._connectionCheckoutTimeout=this._serverSelectionTimeout;else throw new cW.MongoRuntimeError("Unreachable. If you are seeing this error, please file a ticket on the NODE driver project on Jira");return this._connectionCheckoutTimeout}get timeoutForSocketWrite(){let{remainingTimeMS:$}=this;if(!Number.isFinite($))return null;if($>0)return q7.expires($);return q7.reject(new cW.MongoOperationTimeoutError("Timed out before socket write"))}get timeoutForSocketRead(){let{remainingTimeMS:$}=this;if(!Number.isFinite($))return null;if($>0)return q7.expires($);return q7.reject(new cW.MongoOperationTimeoutError("Timed out before socket read"))}refresh(){this.start=Math.trunc(performance.now()),this.minRoundTripTime=0,this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}clear(){this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}getRemainingTimeMSOrThrow($){let{remainingTimeMS:F}=this;if(F<=0)throw new cW.MongoOperationTimeoutError($??`Expired after ${this.timeoutMS}ms`);return F}clone(){let $=new MK({timeoutMS:this.timeoutMS,serverSelectionTimeoutMS:this.serverSelectionTimeoutMS});return $.start=this.start,$}refreshed(){return new MK(this)}addMaxTimeMSToCommand($,F){if(F.omitMaxTimeMS)return;let A=this.remainingTimeMS-this.minRoundTripTime;if(A>0&&Number.isFinite(A))$.maxTimeMS=A}getSocketTimeoutMS(){return 0}}O91.CSOTTimeoutContext=MK;class FN extends $N{constructor($){super();this.options=$,this.clearServerSelectionTimeout=!0}csotEnabled(){return!1}get serverSelectionTimeout(){if(this.options.serverSelectionTimeoutMS!=null&&this.options.serverSelectionTimeoutMS>0)return q7.expires(this.options.serverSelectionTimeoutMS);return null}get connectionCheckoutTimeout(){if(this.options.waitQueueTimeoutMS!=null&&this.options.waitQueueTimeoutMS>0)return q7.expires(this.options.waitQueueTimeoutMS);return null}get timeoutForSocketWrite(){return null}get timeoutForSocketRead(){return null}refresh(){return}clear(){return}get maxTimeMS(){return null}refreshed(){return new FN(this.options)}addMaxTimeMSToCommand($,F){}getSocketTimeoutMS(){return this.options.socketTimeoutMS}}O91.LegacyTimeoutContext=FN});var PK=O((_91)=>{Object.defineProperty(_91,"__esModule",{value:!0});_91.AggregateOperation=_91.DB_AGGREGATE_COLLECTION=void 0;var uk=T6(),_n1=_1(),kn1=i8(),bn1=X4(),RG=o6();_91.DB_AGGREGATE_COLLECTION=1;class hk extends bn1.CommandOperation{constructor($,F,A){super(void 0,{...A,dbName:$.db});if(this.SERVER_COMMAND_RESPONSE_TYPE=uk.CursorResponse,this.options={...A},this.target=$.collection||_91.DB_AGGREGATE_COLLECTION,this.pipeline=F,this.hasWriteStage=!1,typeof A?.out==="string")this.pipeline=this.pipeline.concat({$out:A.out}),this.hasWriteStage=!0;else if(F.length>0){let J=F[F.length-1];if(J.$out||J.$merge)this.hasWriteStage=!0}if(!this.hasWriteStage)delete this.options.writeConcern;if(A?.cursor!=null&&typeof A.cursor!=="object")throw new _n1.MongoInvalidArgumentError("Cursor options must be an object");this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?uk.ExplainedCursorResponse:uk.CursorResponse}get commandName(){return"aggregate"}get canRetryRead(){return!this.hasWriteStage}addToPipeline($){this.pipeline.push($)}buildCommandDocument(){let $=this.options,F={aggregate:this.target,pipeline:this.pipeline};if(this.hasWriteStage&&this.writeConcern)kn1.WriteConcern.apply(F,this.writeConcern);if($.bypassDocumentValidation===!0)F.bypassDocumentValidation=$.bypassDocumentValidation;if(typeof $.allowDiskUse==="boolean")F.allowDiskUse=$.allowDiskUse;if($.hint)F.hint=$.hint;if($.let)F.let=$.let;if($.comment!==void 0)F.comment=$.comment;if(F.cursor=$.cursor||{},$.batchSize&&!this.hasWriteStage)F.cursor.batchSize=$.batchSize;return F}handleOk($){return $}}_91.AggregateOperation=hk;(0,RG.defineAspects)(hk,[RG.Aspect.READ_OPERATION,RG.Aspect.RETRYABLE,RG.Aspect.EXPLAINABLE,RG.Aspect.CURSOR_CREATING,RG.Aspect.SUPPORTS_RAW_DATA])});var q9=O((y91)=>{Object.defineProperty(y91,"__esModule",{value:!0});y91.executeOperation=yn1;y91.autoConnect=v91;var xn1=dA(),B8=_1(),x91=e4(),g91=CK(),gn1=$9(),AN=l1(),fn1=PK(),cA=o6(),vn1=B8.MONGODB_ERROR_CODES.IllegalOperation,f91="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";async function yn1($,F,A){if(!(F instanceof cA.AbstractOperation))throw new B8.MongoRuntimeError("This method requires a valid operation instance");let J=$.topology==null?await(0,AN.abortable)(v91($),F.options):$.topology,X=F.session,Y;if(X==null)Y=Symbol(),X=$.startSession({owner:Y,explicit:!1});else if(X.hasEnded)throw new B8.MongoExpiredSessionError("Use of expired sessions is not permitted");else if(X.snapshotEnabled&&(0,AN.maxWireVersion)(J)<xn1.MIN_SUPPORTED_SNAPSHOT_READS_WIRE_VERSION)throw new B8.MongoCompatibilityError("Snapshot reads require MongoDB 5.0 or later");else if(X.client!==$)throw new B8.MongoInvalidArgumentError("ClientSession must be from the same MongoClient");F.session??=X;let W=F.readPreference??x91.ReadPreference.primary,Z=!!X?.inTransaction(),D=F.hasAspect(cA.Aspect.READ_OPERATION);if(Z&&!W.equals(x91.ReadPreference.primary)&&(D||F.commandName==="runCommand"))throw new B8.MongoTransactionError(`Read preference in a transaction must be primary, not: ${W.mode}`);if(X?.isPinned&&X.transaction.isCommitted&&!F.bypassPinningCheck)X.unpin();A??=gn1.TimeoutContext.create({session:X,serverSelectionTimeoutMS:$.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:$.s.options.waitQueueTimeoutMS,timeoutMS:F.options.timeoutMS});try{return await un1(F,{topology:J,timeoutContext:A,session:X,readPreference:W})}finally{if(X?.owner!=null&&X.owner===Y)await X.endSession()}}async function v91($){if($.topology==null){if($.s.hasBeenClosed)throw new B8.MongoNotConnectedError("Client must be connected before running operations");$.s.options.__skipPingOnConnect=!0;try{if(await $.connect(),$.topology==null)throw new B8.MongoRuntimeError("client.connect did not create a topology but also did not throw");return $.topology}finally{delete $.s.options.__skipPingOnConnect}}return $.topology}async function un1($,{topology:F,timeoutContext:A,session:J,readPreference:X}){let Y;if($.hasAspect(cA.Aspect.MUST_SELECT_SAME_SERVER))Y=(0,g91.sameServerSelector)($.server?.description);else if($ instanceof fn1.AggregateOperation&&$.hasWriteStage)Y=(0,g91.secondaryWritableServerSelector)(F.commonWireVersion,X);else Y=X;let W=await F.selectServer(Y,{session:J,operationName:$.commandName,timeoutContext:A,signal:$.options.signal}),Z=$.hasAspect(cA.Aspect.READ_OPERATION),D=$.hasAspect(cA.Aspect.WRITE_OPERATION),G=J?.inTransaction()??!1,z=F.s.options.retryReads&&!G&&$.canRetryRead,H=F.s.options.retryWrites&&!G&&(0,AN.supportsRetryableWrites)(W)&&$.canRetryWrite,U=$.hasAspect(cA.Aspect.RETRYABLE)&&J!=null&&(Z&&z||D&&H);if(D&&H&&J!=null)$.options.willRetryWrite=!0,J.incrementTransactionNumber();let Q=U?A.csotEnabled()?1/0:2:1,B,q;for(let L=0;L<Q;L++){if(B){if(D&&B.code===vn1)throw new B8.MongoServerError({message:f91,errmsg:f91,originalError:B});if($.hasAspect(cA.Aspect.COMMAND_BATCHING)&&!$.canRetryWrite)throw B;if(D&&!(0,B8.isRetryableWriteError)(B))throw B;if(Z&&!(0,B8.isRetryableReadError)(B))throw B;if(B instanceof B8.MongoNetworkError&&$.hasAspect(cA.Aspect.CURSOR_CREATING)&&J!=null&&J.isPinned&&!J.inTransaction())J.unpin({force:!0,forceClear:!0});if(W=await F.selectServer(Y,{session:J,operationName:$.commandName,previousServer:q,signal:$.options.signal}),D&&!(0,AN.supportsRetryableWrites)(W))throw new B8.MongoUnexpectedServerResponseError("Selected server does not support retryable writes")}$.server=W;try{if(L>0&&$.hasAspect(cA.Aspect.COMMAND_BATCHING))$.resetBatch();try{let E=await W.command($,A);return $.handleOk(E)}catch(E){return $.handleError(E)}}catch(E){if(!(E instanceof B8.MongoError))throw E;if(B!=null&&E.hasErrorLabel(B8.MongoErrorLabel.NoWritesPerformed))throw B;q=W.description,B=E,A.clear()}}throw B??new B8.MongoRuntimeError("Tried to propagate retryability error, but no error was found.")}});var dk=O((h91)=>{Object.defineProperty(h91,"__esModule",{value:!0});h91.InsertOneOperation=h91.InsertOperation=void 0;var dn1=T6(),u91=_1(),cn1=l1(),ln1=X4(),IX=o6();class JN extends ln1.CommandOperation{constructor($,F,A){super(void 0,A);this.SERVER_COMMAND_RESPONSE_TYPE=dn1.MongoDBResponse,this.options={...A,checkKeys:A.checkKeys??!1},this.ns=$,this.documents=F}get commandName(){return"insert"}buildCommandDocument($,F){let A=this.options??{},J=typeof A.ordered==="boolean"?A.ordered:!0,X={insert:this.ns.collection,documents:this.documents,ordered:J};if(typeof A.bypassDocumentValidation==="boolean")X.bypassDocumentValidation=A.bypassDocumentValidation;if(A.comment!==void 0)X.comment=A.comment;return X}}h91.InsertOperation=JN;class mk extends JN{constructor($,F,A){super($.s.namespace,[(0,cn1.maybeAddIdToDocuments)($,F,A)],A)}handleOk($){let F=super.handleOk($);if(F.code)throw new u91.MongoServerError(F);if(F.writeErrors)throw new u91.MongoServerError(F.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,insertedId:this.documents[0]._id}}}h91.InsertOneOperation=mk;(0,IX.defineAspects)(JN,[IX.Aspect.RETRYABLE,IX.Aspect.WRITE_OPERATION,IX.Aspect.SUPPORTS_RAW_DATA]);(0,IX.defineAspects)(mk,[IX.Aspect.RETRYABLE,IX.Aspect.WRITE_OPERATION,IX.Aspect.SUPPORTS_RAW_DATA])});var TG=O((c91)=>{Object.defineProperty(c91,"__esModule",{value:!0});c91.formatSort=Ar1;var d91=_1();function IG($=1){let F=`${$}`.toLowerCase();if(in1($))return $;switch(F){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new d91.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify($)}`)}}function in1($){return typeof $==="object"&&$!=null&&"$meta"in $&&typeof $.$meta==="string"}function nn1($){if(Array.isArray($)&&$.length===2)try{return IG($[1]),!0}catch{return!1}return!1}function rn1($){return Array.isArray($)&&Array.isArray($[0])}function an1($){return $ instanceof Map&&$.size>0}function tn1($){return Array.isArray($)}function sn1($){return new Map([[`${$[0]}`,IG([$[1]])]])}function on1($){let F=$.map(([A,J])=>[`${A}`,IG(J)]);return new Map(F)}function en1($){let F=$.map((A)=>[`${A}`,1]);return new Map(F)}function $r1($){let F=Object.entries($).map(([A,J])=>[`${A}`,IG(J)]);return new Map(F)}function Fr1($){let F=Array.from($).map(([A,J])=>[`${A}`,IG(J)]);return new Map(F)}function Ar1($,F){if($==null)return;if(typeof $==="string")return new Map([[$,IG(F)]]);if(typeof $!=="object")throw new d91.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify($)} Sort must be a valid object`);if(!tn1($)){if(an1($))return Fr1($);if(Object.keys($).length)return $r1($);return}if(!$.length)return;if(rn1($))return on1($);if(nn1($))return sn1($);return en1($)}});var nk=O((l91)=>{Object.defineProperty(l91,"__esModule",{value:!0});l91.ReplaceOneOperation=l91.UpdateManyOperation=l91.UpdateOneOperation=l91.UpdateOperation=void 0;l91.makeUpdateStatement=XN;var Xr1=T6(),G$=_1(),Yr1=TG(),ck=l1(),Wr1=X4(),S4=o6();class jG extends Wr1.CommandOperation{constructor($,F,A){super(void 0,A);this.SERVER_COMMAND_RESPONSE_TYPE=Xr1.MongoDBResponse,this.options=A,this.ns=$,this.statements=F}get commandName(){return"update"}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every(($)=>$.multi==null||$.multi===!1)}buildCommandDocument($,F){let A=this.options,J={update:this.ns.collection,updates:this.statements,ordered:A.ordered??!0};if(typeof A.bypassDocumentValidation==="boolean")J.bypassDocumentValidation=A.bypassDocumentValidation;if(A.let)J.let=A.let;if(A.comment!==void 0)J.comment=A.comment;return J}}l91.UpdateOperation=jG;class lk extends jG{constructor($,F,A,J){super($,[XN(F,A,{...J,multi:!1})],J);if(!(0,ck.hasAtomicOperators)(A,J))throw new G$.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk($){let F=super.handleOk($);if(this.explain!=null)return F;if(F.code)throw new G$.MongoServerError(F);if(F.writeErrors)throw new G$.MongoServerError(F.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:F.nModified??F.n,upsertedId:Array.isArray(F.upserted)&&F.upserted.length>0?F.upserted[0]._id:null,upsertedCount:Array.isArray(F.upserted)&&F.upserted.length?F.upserted.length:0,matchedCount:Array.isArray(F.upserted)&&F.upserted.length>0?0:F.n}}}l91.UpdateOneOperation=lk;class pk extends jG{constructor($,F,A,J){super($,[XN(F,A,{...J,multi:!0})],J);if(!(0,ck.hasAtomicOperators)(A,J))throw new G$.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk($){let F=super.handleOk($);if(this.explain!=null)return F;if(F.code)throw new G$.MongoServerError(F);if(F.writeErrors)throw new G$.MongoServerError(F.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:F.nModified??F.n,upsertedId:Array.isArray(F.upserted)&&F.upserted.length>0?F.upserted[0]._id:null,upsertedCount:Array.isArray(F.upserted)&&F.upserted.length?F.upserted.length:0,matchedCount:Array.isArray(F.upserted)&&F.upserted.length>0?0:F.n}}}l91.UpdateManyOperation=pk;class ik extends jG{constructor($,F,A,J){super($,[XN(F,A,{...J,multi:!1})],J);if((0,ck.hasAtomicOperators)(A))throw new G$.MongoInvalidArgumentError("Replacement document must not contain atomic operators")}handleOk($){let F=super.handleOk($);if(this.explain!=null)return F;if(F.code)throw new G$.MongoServerError(F);if(F.writeErrors)throw new G$.MongoServerError(F.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:F.nModified??F.n,upsertedId:Array.isArray(F.upserted)&&F.upserted.length>0?F.upserted[0]._id:null,upsertedCount:Array.isArray(F.upserted)&&F.upserted.length?F.upserted.length:0,matchedCount:Array.isArray(F.upserted)&&F.upserted.length>0?0:F.n}}}l91.ReplaceOneOperation=ik;function XN($,F,A){if($==null||typeof $!=="object")throw new G$.MongoInvalidArgumentError("Selector must be a valid JavaScript object");if(F==null||typeof F!=="object")throw new G$.MongoInvalidArgumentError("Document must be a valid JavaScript object");let J={q:$,u:F};if(typeof A.upsert==="boolean")J.upsert=A.upsert;if(A.multi)J.multi=A.multi;if(A.hint)J.hint=A.hint;if(A.arrayFilters)J.arrayFilters=A.arrayFilters;if(A.collation)J.collation=A.collation;if(!A.multi&&A.sort!=null)J.sort=(0,Yr1.formatSort)(A.sort);return J}(0,S4.defineAspects)(jG,[S4.Aspect.RETRYABLE,S4.Aspect.WRITE_OPERATION,S4.Aspect.SKIP_COLLATION,S4.Aspect.SUPPORTS_RAW_DATA]);(0,S4.defineAspects)(lk,[S4.Aspect.RETRYABLE,S4.Aspect.WRITE_OPERATION,S4.Aspect.EXPLAINABLE,S4.Aspect.SKIP_COLLATION,S4.Aspect.SUPPORTS_RAW_DATA]);(0,S4.defineAspects)(pk,[S4.Aspect.WRITE_OPERATION,S4.Aspect.EXPLAINABLE,S4.Aspect.SKIP_COLLATION,S4.Aspect.SUPPORTS_RAW_DATA]);(0,S4.defineAspects)(ik,[S4.Aspect.RETRYABLE,S4.Aspect.WRITE_OPERATION,S4.Aspect.SKIP_COLLATION,S4.Aspect.SUPPORTS_RAW_DATA])});var SG=O((o91)=>{Object.defineProperty(o91,"__esModule",{value:!0});o91.BulkOperationBase=o91.FindOperators=o91.MongoBulkWriteError=o91.WriteError=o91.WriteConcernError=o91.BulkWriteResult=o91.Batch=o91.BatchType=void 0;o91.mergeBatchResults=rk;var r91=w0(),F9=_1(),IK=xk(),Hr1=q9(),Ur1=dk(),lW=nk(),Qr1=$9(),bF=l1(),i91=i8();o91.BatchType=Object.freeze({INSERT:1,UPDATE:2,DELETE:3});class a91{constructor($,F){this.originalZeroIndex=F,this.currentIndex=0,this.originalIndexes=[],this.batchType=$,this.operations=[],this.size=0,this.sizeBytes=0}}o91.Batch=a91;class lA{static generateIdMap($){let F={};for(let A of $)F[A.index]=A._id;return F}constructor($,F){this.result=$,this.insertedCount=this.result.nInserted??0,this.matchedCount=this.result.nMatched??0,this.modifiedCount=this.result.nModified??0,this.deletedCount=this.result.nRemoved??0,this.upsertedCount=this.result.upserted.length??0,this.upsertedIds=lA.generateIdMap(this.result.upserted),this.insertedIds=lA.generateIdMap(this.getSuccessfullyInsertedIds($,F)),Object.defineProperty(this,"result",{value:this.result,enumerable:!1})}get ok(){return this.result.ok}getSuccessfullyInsertedIds($,F){if($.writeErrors.length===0)return $.insertedIds;if(F)return $.insertedIds.slice(0,$.writeErrors[0].index);return $.insertedIds.filter(({index:A})=>!$.writeErrors.some((J)=>A===J.index))}getUpsertedIdAt($){return this.result.upserted[$]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt($){return $<this.result.writeErrors.length?this.result.writeErrors[$]:void 0}getWriteErrors(){return this.result.writeErrors}getWriteConcernError(){if(this.result.writeConcernErrors.length===0)return;else if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];else{let $="";for(let F=0;F<this.result.writeConcernErrors.length;F++){let A=this.result.writeConcernErrors[F];if($=$+A.errmsg,F===0)$=$+" and "}return new TK({errmsg:$,code:F9.MONGODB_ERROR_CODES.WriteConcernTimeout})}}toString(){return`BulkWriteResult(${r91.EJSON.stringify(this.result)})`}isOk(){return this.result.ok===1}}o91.BulkWriteResult=lA;class TK{constructor($){this.serverError=$}get code(){return this.serverError.code}get errmsg(){return this.serverError.errmsg}get errInfo(){return this.serverError.errInfo}toJSON(){return this.serverError}toString(){return`WriteConcernError(${this.errmsg})`}}o91.WriteConcernError=TK;class YN{constructor($){this.err=$}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}get errInfo(){return this.err.errInfo}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}}o91.WriteError=YN;function rk($,F,A,J){if(A)J=A;else if(J&&J.result)J=J.result;if(J==null)return;if(J.ok===0&&F.ok===1){F.ok=0;let Y={index:0,code:J.code||0,errmsg:J.message,errInfo:J.errInfo,op:$.operations[0]};F.writeErrors.push(new YN(Y));return}else if(J.ok===0&&F.ok===0)return;if(s91($)&&J.n)F.nInserted=F.nInserted+J.n;if(tk($)&&J.n)F.nRemoved=F.nRemoved+J.n;let X=0;if(Array.isArray(J.upserted)){X=J.upserted.length;for(let Y=0;Y<J.upserted.length;Y++)F.upserted.push({index:J.upserted[Y].index+$.originalZeroIndex,_id:J.upserted[Y]._id})}else if(J.upserted)X=1,F.upserted.push({index:$.originalZeroIndex,_id:J.upserted});if(ak($)&&J.n){let Y=J.nModified;if(F.nUpserted=F.nUpserted+X,F.nMatched=F.nMatched+(J.n-X),typeof Y==="number")F.nModified=F.nModified+Y;else F.nModified=0}if(Array.isArray(J.writeErrors))for(let Y=0;Y<J.writeErrors.length;Y++){let W={index:$.originalIndexes[J.writeErrors[Y].index],code:J.writeErrors[Y].code,errmsg:J.writeErrors[Y].errmsg,errInfo:J.writeErrors[Y].errInfo,op:$.operations[J.writeErrors[Y].index]};F.writeErrors.push(new YN(W))}if(J.writeConcernError)F.writeConcernErrors.push(new TK(J.writeConcernError))}async function n91($,F){if($.s.batches.length===0)return new lA($.s.bulkResult,$.isOrdered);for(let J of $.s.batches){let X=(0,bF.resolveOptions)($,{...F,ordered:$.isOrdered});if(X.bypassDocumentValidation!==!0)delete X.bypassDocumentValidation;if($.s.bypassDocumentValidation===!0)X.bypassDocumentValidation=!0;if($.s.checkKeys===!1)X.checkKeys=!1;if($.retryWrites){if(ak(J))$.retryWrites=$.retryWrites&&!J.operations.some((G)=>G.multi);if(tk(J))$.retryWrites=$.retryWrites&&!J.operations.some((G)=>G.limit===0)}let Y=s91(J)?new Ur1.InsertOperation($.s.namespace,J.operations,X):ak(J)?new lW.UpdateOperation($.s.namespace,J.operations,X):tk(J)?new IK.DeleteOperation($.s.namespace,J.operations,X):null;if(Y==null)throw new F9.MongoRuntimeError(`Unknown batchType: ${J.batchType}`);let W=null,Z;try{Z=await(0,Hr1.executeOperation)($.s.collection.client,Y,X.timeoutContext)}catch(G){W=G}if(W!=null)if(W instanceof F9.MongoWriteConcernError){rk(J,$.s.bulkResult,W,Z);let G=new lA($.s.bulkResult,$.isOrdered);throw new OG({message:W.result.writeConcernError.errmsg,code:W.result.writeConcernError.code},G)}else throw new OG(W,new lA($.s.bulkResult,$.isOrdered));rk(J,$.s.bulkResult,W,Z);let D=new lA($.s.bulkResult,$.isOrdered);$.handleWriteError(D)}$.s.batches.length=0;let A=new lA($.s.bulkResult,$.isOrdered);return $.handleWriteError(A),A}class OG extends F9.MongoServerError{constructor($,F){super($);if(this.writeErrors=[],$ instanceof TK)this.err=$;else if(!($ instanceof Error))this.message=$.message,this.code=$.code,this.writeErrors=$.writeErrors??[];this.result=F,Object.assign(this,$)}get name(){return"MongoBulkWriteError"}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}}o91.MongoBulkWriteError=OG;class sk{constructor($){this.bulkOperation=$}update($){let F=RK(this.bulkOperation);return this.bulkOperation.addToOperationsList(o91.BatchType.UPDATE,(0,lW.makeUpdateStatement)(F.selector,$,{...F,multi:!0}))}updateOne($){if(!(0,bF.hasAtomicOperators)($,this.bulkOperation.bsonOptions))throw new F9.MongoInvalidArgumentError("Update document requires atomic operators");let F=RK(this.bulkOperation);return this.bulkOperation.addToOperationsList(o91.BatchType.UPDATE,(0,lW.makeUpdateStatement)(F.selector,$,{...F,multi:!1}))}replaceOne($){if((0,bF.hasAtomicOperators)($))throw new F9.MongoInvalidArgumentError("Replacement document must not use atomic operators");let F=RK(this.bulkOperation);return this.bulkOperation.addToOperationsList(o91.BatchType.UPDATE,(0,lW.makeUpdateStatement)(F.selector,$,{...F,multi:!1}))}deleteOne(){let $=RK(this.bulkOperation);return this.bulkOperation.addToOperationsList(o91.BatchType.DELETE,(0,IK.makeDeleteStatement)($.selector,{...$,limit:1}))}delete(){let $=RK(this.bulkOperation);return this.bulkOperation.addToOperationsList(o91.BatchType.DELETE,(0,IK.makeDeleteStatement)($.selector,{...$,limit:0}))}upsert(){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.upsert=!0,this}collation($){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.collation=$,this}arrayFilters($){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.arrayFilters=$,this}hint($){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.hint=$,this}}o91.FindOperators=sk;class t91{constructor($,F,A){this.collection=$,this.retryWrites=$.db.options?.retryWrites,this.isOrdered=A;let J=(0,bF.getTopology)($);F=F==null?{}:F;let X=$.s.namespace,Y=!1,W=void 0,Z=J.lastHello(),D=!!(J.s.options&&J.s.options.autoEncrypter),G=Z&&Z.maxBsonObjectSize?Z.maxBsonObjectSize:16777216,z=D?2097152:G,H=Z&&Z.maxWriteBatchSize?Z.maxWriteBatchSize:1000,U=(H-1).toString(10).length+2,Q={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};if(this.s={bulkResult:Q,currentBatch:void 0,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:void 0,currentUpdateBatch:void 0,currentRemoveBatch:void 0,batches:[],writeConcern:i91.WriteConcern.fromOptions(F),maxBsonObjectSize:G,maxBatchSizeBytes:z,maxWriteBatchSize:H,maxKeySize:U,namespace:X,topology:J,options:F,bsonOptions:(0,r91.resolveBSONOptions)(F),currentOp:W,executed:Y,collection:$,err:void 0,checkKeys:typeof F.checkKeys==="boolean"?F.checkKeys:!1},F.bypassDocumentValidation===!0)this.s.bypassDocumentValidation=!0}insert($){return(0,bF.maybeAddIdToDocuments)(this.collection,$,{forceServerObjectId:this.shouldForceServerObjectId()}),this.addToOperationsList(o91.BatchType.INSERT,$)}find($){if(!$)throw new F9.MongoInvalidArgumentError("Bulk find operation must specify a selector");return this.s.currentOp={selector:$},new sk(this)}raw($){if($==null||typeof $!=="object")throw new F9.MongoInvalidArgumentError("Operation must be an object with an operation key");if("insertOne"in $){let F=this.shouldForceServerObjectId(),A=$.insertOne&&$.insertOne.document==null?$.insertOne:$.insertOne.document;return(0,bF.maybeAddIdToDocuments)(this.collection,A,{forceServerObjectId:F}),this.addToOperationsList(o91.BatchType.INSERT,A)}if("replaceOne"in $||"updateOne"in $||"updateMany"in $){if("replaceOne"in $){if("q"in $.replaceOne)throw new F9.MongoInvalidArgumentError("Raw operations are not allowed");let F=(0,lW.makeUpdateStatement)($.replaceOne.filter,$.replaceOne.replacement,{...$.replaceOne,multi:!1});if((0,bF.hasAtomicOperators)(F.u))throw new F9.MongoInvalidArgumentError("Replacement document must not use atomic operators");return this.addToOperationsList(o91.BatchType.UPDATE,F)}if("updateOne"in $){if("q"in $.updateOne)throw new F9.MongoInvalidArgumentError("Raw operations are not allowed");let F=(0,lW.makeUpdateStatement)($.updateOne.filter,$.updateOne.update,{...$.updateOne,multi:!1});if(!(0,bF.hasAtomicOperators)(F.u,this.bsonOptions))throw new F9.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(o91.BatchType.UPDATE,F)}if("updateMany"in $){if("q"in $.updateMany)throw new F9.MongoInvalidArgumentError("Raw operations are not allowed");let F=(0,lW.makeUpdateStatement)($.updateMany.filter,$.updateMany.update,{...$.updateMany,multi:!0});if(!(0,bF.hasAtomicOperators)(F.u,this.bsonOptions))throw new F9.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(o91.BatchType.UPDATE,F)}}if("deleteOne"in $){if("q"in $.deleteOne)throw new F9.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(o91.BatchType.DELETE,(0,IK.makeDeleteStatement)($.deleteOne.filter,{...$.deleteOne,limit:1}))}if("deleteMany"in $){if("q"in $.deleteMany)throw new F9.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(o91.BatchType.DELETE,(0,IK.makeDeleteStatement)($.deleteMany.filter,{...$.deleteMany,limit:0}))}throw new F9.MongoInvalidArgumentError("bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany")}get length(){return this.s.currentIndex}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get batches(){let $=[...this.s.batches];if(this.isOrdered){if(this.s.currentBatch)$.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)$.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)$.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)$.push(this.s.currentRemoveBatch)}return $}async execute($={}){if(this.s.executed)throw new F9.MongoBatchReExecutionError;let F=i91.WriteConcern.fromOptions($);if(F)this.s.writeConcern=F;if(this.isOrdered){if(this.s.currentBatch)this.s.batches.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)this.s.batches.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)this.s.batches.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)this.s.batches.push(this.s.currentRemoveBatch)}if(this.s.batches.length===0)throw new F9.MongoInvalidArgumentError("Invalid BulkOperation, Batch cannot be empty");this.s.executed=!0;let A=(0,bF.resolveOptions)(this.collection,{...this.s.options,...$});if(A.timeoutContext??=Qr1.TimeoutContext.create({session:A.session,timeoutMS:A.timeoutMS,serverSelectionTimeoutMS:this.collection.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:this.collection.client.s.options.waitQueueTimeoutMS}),A.session==null)return await this.collection.client.withSession({explicit:!1},async(J)=>{return await n91(this,{...A,session:J})});return await n91(this,{...A})}handleWriteError($){if(this.s.bulkResult.writeErrors.length>0){let A=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";throw new OG({message:A,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors},$)}let F=$.getWriteConcernError();if(F)throw new OG(F,$)}shouldForceServerObjectId(){return this.s.options.forceServerObjectId===!0||this.s.collection.db.options?.forceServerObjectId===!0}}o91.BulkOperationBase=t91;function s91($){return $.batchType===o91.BatchType.INSERT}function ak($){return $.batchType===o91.BatchType.UPDATE}function tk($){return $.batchType===o91.BatchType.DELETE}function RK($){let{currentOp:F}=$.s;if($.s.currentOp=void 0,!F)F={};return F}});var F81=O((_i0,$81)=>{var Nr1=SG().BulkWriteResult;$81.exports=Nr1});var jK=O((A81,J81)=>{/*!
 * Connection states
 */var xF=J81.exports=A81=Object.create(null);xF[0]="disconnected";xF[1]="connected";xF[2]="connecting";xF[3]="disconnecting";xF[99]="uninitialized";xF.disconnected=0;xF.connected=1;xF.connecting=2;xF.disconnecting=3;xF.uninitialized=99});var TX=O((ki0,X81)=>{/*!
 * Centralize this so we can more easily work around issues with people
 * stubbing out `process.nextTick()` in tests using sinon:
 * https://github.com/sinonjs/lolex#automatically-incrementing-mocked-time
 * See gh-6074
 */var Cr1=typeof process<"u"&&typeof process.nextTick==="function"?process.nextTick.bind(process):($)=>setTimeout($,0);X81.exports=function(F){return Cr1(F)}});var ok=O((bi0,W81)=>{/*!
 * Module dependencies.
 */var Mr1=Z1("events").EventEmitter,Pr1=jK(),Y81=TX();function u6($,F,A){if(A===void 0)A={};if(this.opts=A,this.name=$,this.collectionName=$,this.conn=F,this.queue=[],this.buffer=!F?._hasOpened,this.emitter=new Mr1,Pr1.connected===this.conn.readyState)this.onOpen()}u6.prototype.name;u6.prototype.collectionName;u6.prototype.conn;u6.prototype.onOpen=function(){this.buffer=!1,Y81(()=>this.doQueue())};u6.prototype.onClose=function(){};u6.prototype.addQueue=function($,F){return this.queue.push([$,F]),this};u6.prototype.removeQueue=function($,F){let A=this.queue.findIndex((J)=>J[0]===$&&J[1]===F);if(A===-1)return!1;return this.queue.splice(A,1),!0};u6.prototype.doQueue=function(){for(let F of this.queue)if(typeof F[0]==="function")F[0].apply(this,F[1]);else this[F[0]].apply(this,F[1]);this.queue=[];let $=this;return Y81(function(){$.emitter.emit("queue")}),this};u6.prototype.ensureIndex=function(){throw Error("Collection#ensureIndex unimplemented by driver")};u6.prototype.createIndex=function(){throw Error("Collection#createIndex unimplemented by driver")};u6.prototype.findAndModify=function(){throw Error("Collection#findAndModify unimplemented by driver")};u6.prototype.findOneAndUpdate=function(){throw Error("Collection#findOneAndUpdate unimplemented by driver")};u6.prototype.findOneAndDelete=function(){throw Error("Collection#findOneAndDelete unimplemented by driver")};u6.prototype.findOneAndReplace=function(){throw Error("Collection#findOneAndReplace unimplemented by driver")};u6.prototype.findOne=function(){throw Error("Collection#findOne unimplemented by driver")};u6.prototype.find=function(){throw Error("Collection#find unimplemented by driver")};u6.prototype.insert=function(){throw Error("Collection#insert unimplemented by driver")};u6.prototype.insertOne=function(){throw Error("Collection#insertOne unimplemented by driver")};u6.prototype.insertMany=function(){throw Error("Collection#insertMany unimplemented by driver")};u6.prototype.save=function(){throw Error("Collection#save unimplemented by driver")};u6.prototype.updateOne=function(){throw Error("Collection#updateOne unimplemented by driver")};u6.prototype.updateMany=function(){throw Error("Collection#updateMany unimplemented by driver")};u6.prototype.deleteOne=function(){throw Error("Collection#deleteOne unimplemented by driver")};u6.prototype.deleteMany=function(){throw Error("Collection#deleteMany unimplemented by driver")};u6.prototype.getIndexes=function(){throw Error("Collection#getIndexes unimplemented by driver")};u6.prototype.watch=function(){throw Error("Collection#watch unimplemented by driver")};/*!
 * ignore
 */u6.prototype._shouldBufferCommands=function(){let F=this.opts;if(F.bufferCommands!=null)return F.bufferCommands;if(F?.schemaUserProvidedOptions?.bufferCommands!=null)return F.schemaUserProvidedOptions.bufferCommands;return this.conn._shouldBufferCommands()};/*!
 * ignore
 */u6.prototype._getBufferTimeoutMS=function(){let F=this.conn,A=this.opts;if(A.bufferTimeoutMS!=null)return A.bufferTimeoutMS;if(A?.schemaUserProvidedOptions?.bufferTimeoutMS!=null)return A.schemaUserProvidedOptions.bufferTimeoutMS;return F._getBufferTimeoutMS()};/*!
 * Module exports.
 */W81.exports=u6});var v0=O((xi0,Z81)=>{/*!
 * ignore
 */class ek extends Error{}Object.defineProperty(ek.prototype,"name",{value:"MongooseError"});Z81.exports=ek});var H81=O((G81)=>{Object.defineProperty(G81,"__esModule",{value:!0});G81.ListDatabasesOperation=void 0;var Rr1=T6(),D81=l1(),Ir1=X4(),$b=o6();class Fb extends Ir1.CommandOperation{constructor($,F){super($,F);this.SERVER_COMMAND_RESPONSE_TYPE=Rr1.MongoDBResponse,this.options=F??{},this.ns=new D81.MongoDBNamespace("admin","$cmd")}get commandName(){return"listDatabases"}buildCommandDocument($,F){let A={listDatabases:1};if(typeof this.options.nameOnly==="boolean")A.nameOnly=this.options.nameOnly;if(this.options.filter)A.filter=this.options.filter;if(typeof this.options.authorizedDatabases==="boolean")A.authorizedDatabases=this.options.authorizedDatabases;if((0,D81.maxWireVersion)($)>=9&&this.options.comment!==void 0)A.comment=this.options.comment;return A}}G81.ListDatabasesOperation=Fb;(0,$b.defineAspects)(Fb,[$b.Aspect.READ_OPERATION,$b.Aspect.RETRYABLE])});var Jb=O((Q81)=>{Object.defineProperty(Q81,"__esModule",{value:!0});Q81.RemoveUserOperation=void 0;var Tr1=T6(),jr1=X4(),U81=o6();class Ab extends jr1.CommandOperation{constructor($,F,A){super($,A);this.SERVER_COMMAND_RESPONSE_TYPE=Tr1.MongoDBResponse,this.options=A,this.username=F}get commandName(){return"dropUser"}buildCommandDocument($){return{dropUser:this.username}}handleOk($){return!0}}Q81.RemoveUserOperation=Ab;(0,U81.defineAspects)(Ab,[U81.Aspect.WRITE_OPERATION])});var OK=O((q81)=>{Object.defineProperty(q81,"__esModule",{value:!0});q81.RunCursorCommandOperation=q81.RunCommandOperation=void 0;var B81=T6(),Or1=o6();class Xb extends Or1.AbstractOperation{constructor($,F,A){super(A);this.SERVER_COMMAND_RESPONSE_TYPE=B81.MongoDBResponse,this.command=F,this.options=A,this.ns=$.withCollection("$cmd")}get commandName(){return"runCommand"}buildCommand($,F){return this.command}buildOptions($){return{...this.options,session:this.session,timeoutContext:$,signal:this.options.signal,readPreference:this.options.readPreference}}}q81.RunCommandOperation=Xb;class w81 extends Xb{constructor(){super(...arguments);this.SERVER_COMMAND_RESPONSE_TYPE=B81.CursorResponse}handleOk($){return $}}q81.RunCursorCommandOperation=w81});var C81=O((V81)=>{Object.defineProperty(V81,"__esModule",{value:!0});V81.ValidateCollectionOperation=void 0;var _r1=T6(),Yb=_1(),kr1=X4();class E81 extends kr1.CommandOperation{constructor($,F,A){super($.s.db,A);this.SERVER_COMMAND_RESPONSE_TYPE=_r1.MongoDBResponse,this.options=A,this.collectionName=F}get commandName(){return"validate"}buildCommandDocument($,F){return{validate:this.collectionName,...Object.fromEntries(Object.entries(this.options).filter((A)=>A[0]!=="session"))}}handleOk($){let F=super.handleOk($);if(F.result!=null&&typeof F.result!=="string")throw new Yb.MongoUnexpectedServerResponseError("Error with validation data");if(F.result!=null&&F.result.match(/exception|corrupt/)!=null)throw new Yb.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);if(F.valid!=null&&!F.valid)throw new Yb.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);return $}}V81.ValidateCollectionOperation=E81});var Wb=O((P81)=>{Object.defineProperty(P81,"__esModule",{value:!0});P81.Admin=void 0;var br1=w0(),WN=q9(),xr1=H81(),gr1=Jb(),fr1=OK(),vr1=C81(),yr1=l1();class M81{constructor($){this.s={db:$}}async command($,F){return await(0,WN.executeOperation)(this.s.db.client,new fr1.RunCommandOperation(new yr1.MongoDBNamespace("admin"),$,{...(0,br1.resolveBSONOptions)(F),session:F?.session,readPreference:F?.readPreference,timeoutMS:F?.timeoutMS??this.s.db.timeoutMS}))}async buildInfo($){return await this.command({buildinfo:1},$)}async serverInfo($){return await this.command({buildinfo:1},$)}async serverStatus($){return await this.command({serverStatus:1},$)}async ping($){return await this.command({ping:1},$)}async removeUser($,F){return await(0,WN.executeOperation)(this.s.db.client,new gr1.RemoveUserOperation(this.s.db,$,{dbName:"admin",...F}))}async validateCollection($,F={}){return await(0,WN.executeOperation)(this.s.db.client,new vr1.ValidateCollectionOperation(this,$,F))}async listDatabases($){return await(0,WN.executeOperation)(this.s.db.client,new xr1.ListDatabasesOperation(this.s.db,{timeoutMS:this.s.db.timeoutMS,...$}))}async replSetGetStatus($){return await this.command({replSetGetStatus:1},$)}}P81.Admin=M81});var Zb=O((j81)=>{Object.defineProperty(j81,"__esModule",{value:!0});j81.OrderedBulkOperation=void 0;var ur1=w0(),I81=_1(),ZN=SG();class T81 extends ZN.BulkOperationBase{constructor($,F){super($,F,!0)}addToOperationsList($,F){let A=ur1.calculateObjectSize(F,{checkKeys:!1,ignoreUndefined:!1});if(A>=this.s.maxBsonObjectSize)throw new I81.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch==null)this.s.currentBatch=new ZN.Batch($,this.s.currentIndex);let J=this.s.maxKeySize;if(this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+J+A>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==$)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new ZN.Batch($,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0;if($===ZN.BatchType.INSERT)this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:F._id});if(Array.isArray(F))throw new I81.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(F),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=J+A,this.s.currentIndex+=1,this}}j81.OrderedBulkOperation=T81});var Db=O((k81)=>{Object.defineProperty(k81,"__esModule",{value:!0});k81.UnorderedBulkOperation=void 0;var hr1=w0(),S81=_1(),pA=SG();class _81 extends pA.BulkOperationBase{constructor($,F){super($,F,!1)}handleWriteError($){if(this.s.batches.length)return;return super.handleWriteError($)}addToOperationsList($,F){let A=hr1.calculateObjectSize(F,{checkKeys:!1,ignoreUndefined:!1});if(A>=this.s.maxBsonObjectSize)throw new S81.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch=void 0,$===pA.BatchType.INSERT)this.s.currentBatch=this.s.currentInsertBatch;else if($===pA.BatchType.UPDATE)this.s.currentBatch=this.s.currentUpdateBatch;else if($===pA.BatchType.DELETE)this.s.currentBatch=this.s.currentRemoveBatch;let J=this.s.maxKeySize;if(this.s.currentBatch==null)this.s.currentBatch=new pA.Batch($,this.s.currentIndex);if(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+J+A>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==$)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new pA.Batch($,this.s.currentIndex);if(Array.isArray(F))throw new S81.MongoInvalidArgumentError("Operation passed in cannot be an Array");if(this.s.currentBatch.operations.push(F),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,$===pA.BatchType.INSERT)this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:F._id});else if($===pA.BatchType.UPDATE)this.s.currentUpdateBatch=this.s.currentBatch;else if($===pA.BatchType.DELETE)this.s.currentRemoveBatch=this.s.currentBatch;return this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=J+A,this}}k81.UnorderedBulkOperation=_81});var SX=O((u81)=>{Object.defineProperty(u81,"__esModule",{value:!0});u81.MongoLogger=u81.MongoLoggableComponent=u81.SEVERITY_LEVEL_MAP=u81.DEFAULT_MAX_DOCUMENT_LENGTH=u81.SeverityLevel=void 0;u81.parseSeverityFromString=Hb;u81.createStdioLogger=pW;u81.stringifyWithMaxLen=OX;u81.defaultLogTransform=v81;var x81=Z1("util"),g81=w0(),C2=O4(),iW=l1();u81.SeverityLevel=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warn",NOTICE:"notice",INFORMATIONAL:"info",DEBUG:"debug",TRACE:"trace",OFF:"off"});u81.DEFAULT_MAX_DOCUMENT_LENGTH=1000;class f81 extends Map{constructor($){let F=[];for(let[A,J]of $)F.push([J,A]);F.push(...$);super(F)}getNumericSeverityLevel($){return this.get($)}getSeverityLevelName($){return this.get($)}}u81.SEVERITY_LEVEL_MAP=new f81([[u81.SeverityLevel.OFF,-1/0],[u81.SeverityLevel.EMERGENCY,0],[u81.SeverityLevel.ALERT,1],[u81.SeverityLevel.CRITICAL,2],[u81.SeverityLevel.ERROR,3],[u81.SeverityLevel.WARNING,4],[u81.SeverityLevel.NOTICE,5],[u81.SeverityLevel.INFORMATIONAL,6],[u81.SeverityLevel.DEBUG,7],[u81.SeverityLevel.TRACE,8]]);u81.MongoLoggableComponent=Object.freeze({COMMAND:"command",TOPOLOGY:"topology",SERVER_SELECTION:"serverSelection",CONNECTION:"connection",CLIENT:"client"});function Hb($){let F=Object.values(u81.SeverityLevel),A=$?.toLowerCase();if(A!=null&&F.includes(A))return A;return null}function pW($){return{write:(0,x81.promisify)((F,A)=>{let J=(0,x81.inspect)(F,{compact:!0,breakLength:1/0});$.write(`${J}
`,"utf-8",A);return})}}function mr1({MONGODB_LOG_PATH:$},{mongodbLogPath:F}){if(typeof F==="string"&&/^stderr$/i.test(F))return{mongodbLogPath:pW(process.stderr),mongodbLogPathIsStdErr:!0};if(typeof F==="string"&&/^stdout$/i.test(F))return{mongodbLogPath:pW(process.stdout),mongodbLogPathIsStdErr:!1};if(typeof F==="object"&&typeof F?.write==="function")return{mongodbLogPath:F,mongodbLogPathIsStdErr:!1};if($&&/^stderr$/i.test($))return{mongodbLogPath:pW(process.stderr),mongodbLogPathIsStdErr:!0};if($&&/^stdout$/i.test($))return{mongodbLogPath:pW(process.stdout),mongodbLogPathIsStdErr:!1};return{mongodbLogPath:pW(process.stderr),mongodbLogPathIsStdErr:!0}}function _G($,F,A){return Hb($)??Hb(F)??A}function dr1($,F){let A=u81.SEVERITY_LEVEL_MAP.getNumericSeverityLevel($),J=u81.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(F);return A<J?-1:A>J?1:0}function OX($,F,A={}){let J="",X=0,Y=function(Z,D){if(X>=F)return;if(Z==="")return X+=1,D;if(X+=Z.length+4,D==null)return D;switch(typeof D){case"string":X+=D.length+2;break;case"number":case"bigint":X+=String(D).length;break;case"boolean":X+=D?4:5;break;case"object":if((0,iW.isUint8Array)(D))X+=22+D.byteLength+D.byteLength*0.33+18|0;else if("_bsontype"in D){let G=D;switch(G._bsontype){case"Int32":X+=String(G.value).length;break;case"Double":X+=(G.value|0)===G.value?String(G.value).length+2:String(G.value).length;break;case"Long":X+=G.toString().length;break;case"ObjectId":X+=35;break;case"MaxKey":case"MinKey":X+=13;break;case"Binary":X+=22+D.position+D.position*0.33+18|0;break;case"Timestamp":X+=19+String(G.t).length+5+String(G.i).length+2;break;case"Code":if(G.scope==null)X+=G.code.length+10+2;else X+=G.code.length+10+11;break;case"BSONRegExp":X+=34+G.pattern.length+13+G.options.length+3;break}}}return D};if(typeof $==="string")J=$;else if(typeof $==="function")J=$.name;else try{if(F!==0)J=g81.EJSON.stringify($,Y,0,A);else J=g81.EJSON.stringify($,A)}catch(W){J=`Extended JSON serialization failed with: ${W.message}`}if(F!==0&&J.length>F&&J.charCodeAt(F-1)!==J.codePointAt(F-1)){if(F--,F===0)return""}return F!==0&&J.length>F?`${J.slice(0,F)}...`:J}function cr1($){let F=$;return F.toLog!==void 0&&typeof F.toLog==="function"}function DN($,F,A=u81.DEFAULT_MAX_DOCUMENT_LENGTH){let{selector:J,operation:X,topologyDescription:Y,message:W}=F;return $.selector=OX(J,A),$.operation=X,$.topologyDescription=OX(Y,A),$.message=W,$}function Gb($,F){$.commandName=F.commandName,$.requestId=F.requestId,$.driverConnectionId=F.connectionId;let{host:A,port:J}=iW.HostAddress.fromString(F.address).toHostPort();if($.serverHost=A,$.serverPort=J,F?.serviceId)$.serviceId=F.serviceId.toHexString();return $.databaseName=F.databaseName,$.serverConnectionId=F.serverConnectionId,$}function L7($,F){let{host:A,port:J}=iW.HostAddress.fromString(F.address).toHostPort();return $.serverHost=A,$.serverPort=J,$}function jX($,F){return $.topologyId=F.topologyId,$}function zb($,F){let{awaited:A,connectionId:J}=F;$.awaited=A,$.driverConnectionId=F.connectionId;let{host:X,port:Y}=iW.HostAddress.fromString(J).toHostPort();return $.serverHost=X,$.serverPort=Y,$}function v81($,F=u81.DEFAULT_MAX_DOCUMENT_LENGTH){let A=Object.create(null);switch($.name){case C2.SERVER_SELECTION_STARTED:return A=DN(A,$,F),A;case C2.SERVER_SELECTION_FAILED:return A=DN(A,$,F),A.failure=$.failure?.message,A;case C2.SERVER_SELECTION_SUCCEEDED:return A=DN(A,$,F),A.serverHost=$.serverHost,A.serverPort=$.serverPort,A;case C2.WAITING_FOR_SUITABLE_SERVER:return A=DN(A,$,F),A.remainingTimeMS=$.remainingTimeMS,A;case C2.COMMAND_STARTED:return A=Gb(A,$),A.message="Command started",A.command=OX($.command,F,{relaxed:!0}),A.databaseName=$.databaseName,A;case C2.COMMAND_SUCCEEDED:return A=Gb(A,$),A.message="Command succeeded",A.durationMS=$.duration,A.reply=OX($.reply,F,{relaxed:!0}),A;case C2.COMMAND_FAILED:return A=Gb(A,$),A.message="Command failed",A.durationMS=$.duration,A.failure=$.failure?.message??"(redacted)",A;case C2.CONNECTION_POOL_CREATED:if(A=L7(A,$),A.message="Connection pool created",$.options){let{maxIdleTimeMS:J,minPoolSize:X,maxPoolSize:Y,maxConnecting:W,waitQueueTimeoutMS:Z}=$.options;A={...A,maxIdleTimeMS:J,minPoolSize:X,maxPoolSize:Y,maxConnecting:W,waitQueueTimeoutMS:Z}}return A;case C2.CONNECTION_POOL_READY:return A=L7(A,$),A.message="Connection pool ready",A;case C2.CONNECTION_POOL_CLEARED:if(A=L7(A,$),A.message="Connection pool cleared",$.serviceId?._bsontype==="ObjectId")A.serviceId=$.serviceId?.toHexString();return A;case C2.CONNECTION_POOL_CLOSED:return A=L7(A,$),A.message="Connection pool closed",A;case C2.CONNECTION_CREATED:return A=L7(A,$),A.message="Connection created",A.driverConnectionId=$.connectionId,A;case C2.CONNECTION_READY:return A=L7(A,$),A.message="Connection ready",A.driverConnectionId=$.connectionId,A.durationMS=$.durationMS,A;case C2.CONNECTION_CLOSED:switch(A=L7(A,$),A.message="Connection closed",A.driverConnectionId=$.connectionId,$.reason){case"stale":A.reason="Connection became stale because the pool was cleared";break;case"idle":A.reason="Connection has been available but unused for longer than the configured max idle time";break;case"error":if(A.reason="An error occurred while using the connection",$.error)A.error=$.error;break;case"poolClosed":A.reason="Connection pool was closed";break;default:A.reason=`Unknown close reason: ${$.reason}`}return A;case C2.CONNECTION_CHECK_OUT_STARTED:return A=L7(A,$),A.message="Connection checkout started",A;case C2.CONNECTION_CHECK_OUT_FAILED:switch(A=L7(A,$),A.message="Connection checkout failed",$.reason){case"poolClosed":A.reason="Connection pool was closed";break;case"timeout":A.reason="Wait queue timeout elapsed without a connection becoming available";break;case"connectionError":if(A.reason="An error occurred while trying to establish a new connection",$.error)A.error=$.error;break;default:A.reason=`Unknown close reason: ${$.reason}`}return A.durationMS=$.durationMS,A;case C2.CONNECTION_CHECKED_OUT:return A=L7(A,$),A.message="Connection checked out",A.driverConnectionId=$.connectionId,A.durationMS=$.durationMS,A;case C2.CONNECTION_CHECKED_IN:return A=L7(A,$),A.message="Connection checked in",A.driverConnectionId=$.connectionId,A;case C2.SERVER_OPENING:return A=jX(A,$),A=L7(A,$),A.message="Starting server monitoring",A;case C2.SERVER_CLOSED:return A=jX(A,$),A=L7(A,$),A.message="Stopped server monitoring",A;case C2.SERVER_HEARTBEAT_STARTED:return A=jX(A,$),A=zb(A,$),A.message="Server heartbeat started",A;case C2.SERVER_HEARTBEAT_SUCCEEDED:return A=jX(A,$),A=zb(A,$),A.message="Server heartbeat succeeded",A.durationMS=$.duration,A.serverConnectionId=$.serverConnectionId,A.reply=OX($.reply,F,{relaxed:!0}),A;case C2.SERVER_HEARTBEAT_FAILED:return A=jX(A,$),A=zb(A,$),A.message="Server heartbeat failed",A.durationMS=$.duration,A.failure=$.failure?.message,A;case C2.TOPOLOGY_OPENING:return A=jX(A,$),A.message="Starting topology monitoring",A;case C2.TOPOLOGY_CLOSED:return A=jX(A,$),A.message="Stopped topology monitoring",A;case C2.TOPOLOGY_DESCRIPTION_CHANGED:return A=jX(A,$),A.message="Topology description changed",A.previousDescription=A.reply=OX($.previousDescription,F),A.newDescription=A.reply=OX($.newDescription,F),A;default:for(let[J,X]of Object.entries($))if(X!=null)A[J]=X}return A}class y81{constructor($){this.pendingLog=null,this.error=this.log.bind(this,"error"),this.warn=this.log.bind(this,"warn"),this.info=this.log.bind(this,"info"),this.debug=this.log.bind(this,"debug"),this.trace=this.log.bind(this,"trace"),this.componentSeverities=$.componentSeverities,this.maxDocumentLength=$.maxDocumentLength,this.logDestination=$.logDestination,this.logDestinationIsStdErr=$.logDestinationIsStdErr,this.severities=this.createLoggingSeverities()}createLoggingSeverities(){let $=Object();for(let F of Object.values(u81.MongoLoggableComponent)){$[F]={};for(let A of Object.values(u81.SeverityLevel))$[F][A]=dr1(A,this.componentSeverities[F])<=0}return $}turnOffSeverities(){for(let $ of Object.values(u81.MongoLoggableComponent)){this.componentSeverities[$]=u81.SeverityLevel.OFF;for(let F of Object.values(u81.SeverityLevel))this.severities[$][F]=!1}}logWriteFailureHandler($){if(this.logDestinationIsStdErr){this.turnOffSeverities(),this.clearPendingLog();return}this.logDestination=pW(process.stderr),this.logDestinationIsStdErr=!0,this.clearPendingLog(),this.error(u81.MongoLoggableComponent.CLIENT,{toLog:function(){return{message:"User input for mongodbLogPath is now invalid. Logging is halted.",error:$.message}}}),this.turnOffSeverities(),this.clearPendingLog()}clearPendingLog(){this.pendingLog=null}willLog($,F){if(F===u81.SeverityLevel.OFF)return!1;return this.severities[$][F]}log($,F,A){if(!this.willLog(F,$))return;let J={t:new Date,c:F,s:$};if(typeof A==="string")J.message=A;else if(typeof A==="object")if(cr1(A))J={...J,...A.toLog()};else J={...J,...v81(A,this.maxDocumentLength)};if((0,iW.isPromiseLike)(this.pendingLog)){this.pendingLog=this.pendingLog.then(()=>this.logDestination.write(J)).then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this));return}try{let X=this.logDestination.write(J);if((0,iW.isPromiseLike)(X))this.pendingLog=X.then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this))}catch(X){this.logWriteFailureHandler(X)}}static resolveOptions($,F){let A=mr1($,F),J={...$,...F,mongodbLogPath:A.mongodbLogPath,mongodbLogPathIsStdErr:A.mongodbLogPathIsStdErr},X=_G(J.mongodbLogComponentSeverities?.default,J.MONGODB_LOG_ALL,u81.SeverityLevel.OFF);return{componentSeverities:{command:_G(J.mongodbLogComponentSeverities?.command,J.MONGODB_LOG_COMMAND,X),topology:_G(J.mongodbLogComponentSeverities?.topology,J.MONGODB_LOG_TOPOLOGY,X),serverSelection:_G(J.mongodbLogComponentSeverities?.serverSelection,J.MONGODB_LOG_SERVER_SELECTION,X),connection:_G(J.mongodbLogComponentSeverities?.connection,J.MONGODB_LOG_CONNECTION,X),client:_G(J.mongodbLogComponentSeverities?.client,J.MONGODB_LOG_CLIENT,X),default:X},maxDocumentLength:J.mongodbLogMaxDocumentLength??(0,iW.parseUnsignedInteger)(J.MONGODB_LOG_MAX_DOCUMENT_LENGTH)??1000,logDestination:J.mongodbLogPath,logDestinationIsStdErr:J.mongodbLogPathIsStdErr}}}u81.MongoLogger=y81});var E7=O((d81)=>{Object.defineProperty(d81,"__esModule",{value:!0});d81.CancellationToken=d81.TypedEventEmitter=void 0;var rr1=Z1("events"),ar1=SX(),tr1=l1();class Kb extends rr1.EventEmitter{emitAndLog($,...F){if(this.emit($,...F),this.component)this.mongoLogger?.debug(this.component,F[0])}emitAndLogHeartbeat($,F,A,...J){if(this.emit($,...J),this.component){let X={topologyId:F,serverConnectionId:A??null,...J[0]};this.mongoLogger?.debug(this.component,X)}}emitAndLogCommand($,F,A,J,...X){if($)this.emit(F,...X);if(J){let Y={databaseName:A,...X[0]};this.mongoLogger?.debug(ar1.MongoLoggableComponent.COMMAND,Y)}}}d81.TypedEventEmitter=Kb;class m81 extends Kb{constructor(...$){super(...$);this.on("error",tr1.noop)}}d81.CancellationToken=m81});var wb=O((p81)=>{Object.defineProperty(p81,"__esModule",{value:!0});p81.GetMoreOperation=void 0;var or1=T6(),l81=_1(),er1=l1(),zN=o6();class Bb extends zN.AbstractOperation{constructor($,F,A,J){super(J);this.SERVER_COMMAND_RESPONSE_TYPE=or1.CursorResponse,this.options=J,this.ns=$,this.cursorId=F,this.server=A}get commandName(){return"getMore"}buildCommand($){if(this.cursorId==null||this.cursorId.isZero())throw new l81.MongoRuntimeError("Unable to iterate cursor with no id");let F=this.ns.collection;if(F==null)throw new l81.MongoRuntimeError("A collection name must be determined before getMore");let A={getMore:this.cursorId,collection:F};if(typeof this.options.batchSize==="number")A.batchSize=Math.abs(this.options.batchSize);if(typeof this.options.maxAwaitTimeMS==="number")A.maxTimeMS=this.options.maxAwaitTimeMS;if(this.options.comment!==void 0&&(0,er1.maxWireVersion)($)>=9)A.comment=this.options.comment;return A}buildOptions($){return{returnFieldSelector:null,documentsReturnedIn:"nextBatch",timeoutContext:$,...this.options}}handleOk($){return $}}p81.GetMoreOperation=Bb;(0,zN.defineAspects)(Bb,[zN.Aspect.READ_OPERATION,zN.Aspect.MUST_SELECT_SAME_SERVER])});var a81=O((n81)=>{Object.defineProperty(n81,"__esModule",{value:!0});n81.KillCursorsOperation=void 0;var $a1=T6(),Fa1=_1(),qb=o6();class Lb extends qb.AbstractOperation{constructor($,F,A,J){super(J);this.SERVER_COMMAND_RESPONSE_TYPE=$a1.MongoDBResponse,this.ns=F,this.cursorId=$,this.server=A}get commandName(){return"killCursors"}buildCommand($,F){let A=this.ns.collection;if(A==null)throw new Fa1.MongoRuntimeError("A collection name must be determined before killCursors");return{killCursors:A,cursors:[this.cursorId]}}buildOptions($){return{session:this.session,timeoutContext:$}}handleError($){}}n81.KillCursorsOperation=Lb;(0,qb.defineAspects)(Lb,[qb.Aspect.MUST_SELECT_SAME_SERVER])});var Eb=O((t81)=>{Object.defineProperty(t81,"__esModule",{value:!0});t81.ConnectionPoolMetrics=void 0;class kG{constructor(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}static{this.TXN="txn"}static{this.CURSOR="cursor"}static{this.OTHER="other"}markPinned($){if($===kG.TXN)this.txnConnections+=1;else if($===kG.CURSOR)this.cursorConnections+=1;else this.otherConnections+=1}markUnpinned($){if($===kG.TXN)this.txnConnections-=1;else if($===kG.CURSOR)this.cursorConnections-=1;else this.otherConnections-=1}info($){return`Timed out while checking out a connection from connection pool: maxPoolSize: ${$}, connections in use by cursors: ${this.cursorConnections}, connections in use by transactions: ${this.txnConnections}, connections in use by other operations: ${this.otherConnections}`}reset(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}}t81.ConnectionPoolMetrics=kG});var Vb=O(($31)=>{Object.defineProperty($31,"__esModule",{value:!0});$31.Transaction=$31.TxnState=void 0;$31.isTransactionCommand=Da1;var o81=_1(),Aa1=Z$(),Ja1=e4(),Xa1=i8();$31.TxnState=Object.freeze({NO_TRANSACTION:"NO_TRANSACTION",STARTING_TRANSACTION:"STARTING_TRANSACTION",TRANSACTION_IN_PROGRESS:"TRANSACTION_IN_PROGRESS",TRANSACTION_COMMITTED:"TRANSACTION_COMMITTED",TRANSACTION_COMMITTED_EMPTY:"TRANSACTION_COMMITTED_EMPTY",TRANSACTION_ABORTED:"TRANSACTION_ABORTED"});var Ya1={[$31.TxnState.NO_TRANSACTION]:[$31.TxnState.NO_TRANSACTION,$31.TxnState.STARTING_TRANSACTION],[$31.TxnState.STARTING_TRANSACTION]:[$31.TxnState.TRANSACTION_IN_PROGRESS,$31.TxnState.TRANSACTION_COMMITTED,$31.TxnState.TRANSACTION_COMMITTED_EMPTY,$31.TxnState.TRANSACTION_ABORTED],[$31.TxnState.TRANSACTION_IN_PROGRESS]:[$31.TxnState.TRANSACTION_IN_PROGRESS,$31.TxnState.TRANSACTION_COMMITTED,$31.TxnState.TRANSACTION_ABORTED],[$31.TxnState.TRANSACTION_COMMITTED]:[$31.TxnState.TRANSACTION_COMMITTED,$31.TxnState.TRANSACTION_COMMITTED_EMPTY,$31.TxnState.STARTING_TRANSACTION,$31.TxnState.NO_TRANSACTION],[$31.TxnState.TRANSACTION_ABORTED]:[$31.TxnState.STARTING_TRANSACTION,$31.TxnState.NO_TRANSACTION],[$31.TxnState.TRANSACTION_COMMITTED_EMPTY]:[$31.TxnState.TRANSACTION_COMMITTED_EMPTY,$31.TxnState.NO_TRANSACTION]},Wa1=new Set([$31.TxnState.STARTING_TRANSACTION,$31.TxnState.TRANSACTION_IN_PROGRESS]),Za1=new Set([$31.TxnState.TRANSACTION_COMMITTED,$31.TxnState.TRANSACTION_COMMITTED_EMPTY,$31.TxnState.TRANSACTION_ABORTED]);class e81{constructor($){$=$??{},this.state=$31.TxnState.NO_TRANSACTION,this.options={};let F=Xa1.WriteConcern.fromOptions($);if(F){if(F.w===0)throw new o81.MongoTransactionError("Transactions do not support unacknowledged write concern");this.options.writeConcern=F}if($.readConcern)this.options.readConcern=Aa1.ReadConcern.fromOptions($);if($.readPreference)this.options.readPreference=Ja1.ReadPreference.fromOptions($);if($.maxCommitTimeMS)this.options.maxTimeMS=$.maxCommitTimeMS;this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isStarting(){return this.state===$31.TxnState.STARTING_TRANSACTION}get isActive(){return Wa1.has(this.state)}get isCommitted(){return Za1.has(this.state)}transition($){let F=Ya1[this.state];if(F&&F.includes($)){if(this.state=$,this.state===$31.TxnState.NO_TRANSACTION||this.state===$31.TxnState.STARTING_TRANSACTION||this.state===$31.TxnState.TRANSACTION_ABORTED)this.unpinServer();return}throw new o81.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${$}]`)}pinServer($){if(this.isActive)this._pinnedServer=$}unpinServer(){this._pinnedServer=void 0}}$31.Transaction=e81;function Da1($){return!!($.commitTransaction||$.abortTransaction)}});var SK=O((W31)=>{Object.defineProperty(W31,"__esModule",{value:!0});W31.ServerSessionPool=W31.ServerSession=W31.ClientSession=void 0;W31.maybeClearPinnedConnection=QN;W31.applySession=Qa1;W31.updateSessionFromResponse=Ka1;var UN=w0(),KN=Eb(),X31=O4(),q0=_1(),za1=E7(),HN=q9(),Nb=OK(),Ha1=Z$(),Cb=e4(),Pb=B7(),Mb=$9(),e6=Vb(),d9=l1(),bG=i8();class Rb extends za1.TypedEventEmitter{constructor($,F,A,J){super();if(this.timeoutContext=null,this.on("error",d9.noop),$==null)throw new q0.MongoRuntimeError("ClientSession requires a MongoClient");if(F==null||!(F instanceof Ib))throw new q0.MongoRuntimeError("ClientSession requires a ServerSessionPool");if(A=A??{},this.snapshotEnabled=A.snapshot===!0,A.causalConsistency===!0&&this.snapshotEnabled)throw new q0.MongoInvalidArgumentError('Properties "causalConsistency" and "snapshot" are mutually exclusive');this.client=$,this.sessionPool=F,this.hasEnded=!1,this.clientOptions=J,this.timeoutMS=A.defaultTimeoutMS??$.s.options?.timeoutMS,this.explicit=!!A.explicit,this._serverSession=this.explicit?this.sessionPool.acquire():null,this.txnNumberIncrement=0;let X=this.explicit&&A.snapshot!==!0;this.supports={causalConsistency:A.causalConsistency??X},this.clusterTime=A.initialClusterTime,this.operationTime=void 0,this.owner=A.owner,this.defaultTransactionOptions={...A.defaultTransactionOptions},this.transaction=new e6.Transaction}get id(){return this.serverSession?.id}get serverSession(){let $=this._serverSession;if($==null){if(this.explicit)throw new q0.MongoRuntimeError("Unexpected null serverSession for an explicit session");if(this.hasEnded)throw new q0.MongoRuntimeError("Unexpected null serverSession for an ended implicit session");$=this.sessionPool.acquire(),this._serverSession=$}return $}get loadBalanced(){return this.client.topology?.description.type===Pb.TopologyType.LoadBalanced}pin($){if(this.pinnedConnection)throw TypeError("Cannot pin multiple connections to the same session");this.pinnedConnection=$,$.emit(X31.PINNED,this.inTransaction()?KN.ConnectionPoolMetrics.TXN:KN.ConnectionPoolMetrics.CURSOR)}unpin($){if(this.loadBalanced)return QN(this,$);this.transaction.unpinServer()}get isPinned(){return this.loadBalanced?!!this.pinnedConnection:this.transaction.isPinned}async endSession($){try{if(this.inTransaction())await this.abortTransaction({...$,throwTimeout:!0})}catch(F){if(F.name==="MongoOperationTimeoutError")throw F;(0,d9.squashError)(F)}finally{if(!this.hasEnded){let F=this.serverSession;if(F!=null)this.sessionPool.release(F),this._serverSession=new wN(F);this.hasEnded=!0,this.emit("ended",this)}QN(this,{force:!0,...$})}}async[Symbol.asyncDispose](){await this.endSession({force:!0})}advanceOperationTime($){if(this.operationTime==null){this.operationTime=$;return}if($.greaterThan(this.operationTime))this.operationTime=$}advanceClusterTime($){if(!$||typeof $!=="object")throw new q0.MongoInvalidArgumentError("input cluster time must be an object");if(!$.clusterTime||$.clusterTime._bsontype!=="Timestamp")throw new q0.MongoInvalidArgumentError('input cluster time "clusterTime" property must be a valid BSON Timestamp');if(!$.signature||$.signature.hash?._bsontype!=="Binary"||typeof $.signature.keyId!=="bigint"&&typeof $.signature.keyId!=="number"&&$.signature.keyId?._bsontype!=="Long")throw new q0.MongoInvalidArgumentError('input cluster time must have a valid "signature" property with BSON Binary hash and BSON Long keyId');(0,Pb._advanceClusterTime)(this,$)}equals($){if(!($ instanceof Rb))return!1;if(this.id==null||$.id==null)return!1;return d9.ByteUtils.equals(this.id.id.buffer,$.id.id.buffer)}incrementTransactionNumber(){this.txnNumberIncrement+=1}inTransaction(){return this.transaction.isActive}startTransaction($){if(this.snapshotEnabled)throw new q0.MongoCompatibilityError("Transactions are not supported in snapshot sessions");if(this.inTransaction())throw new q0.MongoTransactionError("Transaction already in progress");if(this.isPinned&&this.transaction.isCommitted)this.unpin();this.commitAttempted=!1,this.incrementTransactionNumber(),this.transaction=new e6.Transaction({readConcern:$?.readConcern??this.defaultTransactionOptions.readConcern??this.clientOptions?.readConcern,writeConcern:$?.writeConcern??this.defaultTransactionOptions.writeConcern??this.clientOptions?.writeConcern,readPreference:$?.readPreference??this.defaultTransactionOptions.readPreference??this.clientOptions?.readPreference,maxCommitTimeMS:$?.maxCommitTimeMS??this.defaultTransactionOptions.maxCommitTimeMS}),this.transaction.transition(e6.TxnState.STARTING_TRANSACTION)}async commitTransaction($){if(this.transaction.state===e6.TxnState.NO_TRANSACTION)throw new q0.MongoTransactionError("No transaction started");if(this.transaction.state===e6.TxnState.STARTING_TRANSACTION||this.transaction.state===e6.TxnState.TRANSACTION_COMMITTED_EMPTY){this.transaction.transition(e6.TxnState.TRANSACTION_COMMITTED_EMPTY);return}if(this.transaction.state===e6.TxnState.TRANSACTION_ABORTED)throw new q0.MongoTransactionError("Cannot call commitTransaction after calling abortTransaction");let F={commitTransaction:1},A=typeof $?.timeoutMS==="number"?$.timeoutMS:typeof this.timeoutMS==="number"?this.timeoutMS:null,J=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(J!=null)if(A==null&&this.timeoutContext==null)bG.WriteConcern.apply(F,{wtimeoutMS:1e4,w:"majority",...J});else{let W=Object.keys(J);if(W.length>2||!W.includes("wtimeoutMS")&&!W.includes("wTimeoutMS"))bG.WriteConcern.apply(F,{...J,wtimeoutMS:void 0})}if(this.transaction.state===e6.TxnState.TRANSACTION_COMMITTED||this.commitAttempted)if(A==null&&this.timeoutContext==null)bG.WriteConcern.apply(F,{wtimeoutMS:1e4,...J,w:"majority"});else bG.WriteConcern.apply(F,{w:"majority",...J,wtimeoutMS:void 0});if(typeof this.transaction.options.maxTimeMS==="number")F.maxTimeMS=this.transaction.options.maxTimeMS;if(this.transaction.recoveryToken)F.recoveryToken=this.transaction.recoveryToken;let X=new Nb.RunCommandOperation(new d9.MongoDBNamespace("admin"),F,{session:this,readPreference:Cb.ReadPreference.primary,bypassPinningCheck:!0}),Y=this.timeoutContext??(typeof A==="number"?Mb.TimeoutContext.create({serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS,timeoutMS:A}):null);try{await(0,HN.executeOperation)(this.client,X,Y),this.commitAttempted=void 0;return}catch(W){if(this.commitAttempted=!0,W instanceof q0.MongoError&&(0,q0.isRetryableWriteError)(W)){bG.WriteConcern.apply(F,{wtimeoutMS:1e4,...J,w:"majority"}),this.unpin({force:!0});try{await(0,HN.executeOperation)(this.client,new Nb.RunCommandOperation(new d9.MongoDBNamespace("admin"),F,{session:this,readPreference:Cb.ReadPreference.primary,bypassPinningCheck:!0}),Y);return}catch(Z){if(J31(Z))Z.addErrorLabel(q0.MongoErrorLabel.UnknownTransactionCommitResult);if(A31(Z))this.unpin({error:Z});throw Z}}if(J31(W))W.addErrorLabel(q0.MongoErrorLabel.UnknownTransactionCommitResult);if(A31(W))this.unpin({error:W});throw W}finally{this.transaction.transition(e6.TxnState.TRANSACTION_COMMITTED)}}async abortTransaction($){if(this.transaction.state===e6.TxnState.NO_TRANSACTION)throw new q0.MongoTransactionError("No transaction started");if(this.transaction.state===e6.TxnState.STARTING_TRANSACTION){this.transaction.transition(e6.TxnState.TRANSACTION_ABORTED);return}if(this.transaction.state===e6.TxnState.TRANSACTION_ABORTED)throw new q0.MongoTransactionError("Cannot call abortTransaction twice");if(this.transaction.state===e6.TxnState.TRANSACTION_COMMITTED||this.transaction.state===e6.TxnState.TRANSACTION_COMMITTED_EMPTY)throw new q0.MongoTransactionError("Cannot call abortTransaction after calling commitTransaction");let F={abortTransaction:1},A=typeof $?.timeoutMS==="number"?$.timeoutMS:this.timeoutContext?.csotEnabled()?this.timeoutContext.timeoutMS:typeof this.timeoutMS==="number"?this.timeoutMS:null,J=A!=null?Mb.TimeoutContext.create({timeoutMS:A,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null,X=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(X!=null&&A==null)bG.WriteConcern.apply(F,{wtimeoutMS:1e4,w:"majority",...X});if(this.transaction.recoveryToken)F.recoveryToken=this.transaction.recoveryToken;let Y=new Nb.RunCommandOperation(new d9.MongoDBNamespace("admin"),F,{session:this,readPreference:Cb.ReadPreference.primary,bypassPinningCheck:!0});try{await(0,HN.executeOperation)(this.client,Y,J),this.unpin();return}catch(W){if(this.unpin(),W.name==="MongoRuntimeError")throw W;if($?.throwTimeout&&W.name==="MongoOperationTimeoutError")throw W;if(W instanceof q0.MongoError&&(0,q0.isRetryableWriteError)(W))try{await(0,HN.executeOperation)(this.client,Y,J);return}catch(Z){if(Z.name==="MongoRuntimeError")throw Z;if($?.throwTimeout&&Z.name==="MongoOperationTimeoutError")throw Z}}finally{if(this.transaction.transition(e6.TxnState.TRANSACTION_ABORTED),this.loadBalanced)QN(this,{force:!1})}}toBSON(){throw new q0.MongoRuntimeError("ClientSession cannot be serialized to BSON.")}async withTransaction($,F){let J=F?.timeoutMS??this.timeoutMS??null;this.timeoutContext=J!=null?Mb.TimeoutContext.create({timeoutMS:J,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null;let X=this.timeoutContext?.csotEnabled()?this.timeoutContext.start:(0,d9.now)(),Y=!1,W;try{while(!Y){this.startTransaction(F);try{let Z=$(this);if(!(0,d9.isPromiseLike)(Z))throw new q0.MongoInvalidArgumentError("Function provided to `withTransaction` must return a Promise");if(W=await Z,this.transaction.state===e6.TxnState.NO_TRANSACTION||this.transaction.state===e6.TxnState.TRANSACTION_COMMITTED||this.transaction.state===e6.TxnState.TRANSACTION_ABORTED)return W}catch(Z){if(!(Z instanceof q0.MongoError)||Z instanceof q0.MongoInvalidArgumentError)throw await this.abortTransaction(),Z;if(this.transaction.state===e6.TxnState.STARTING_TRANSACTION||this.transaction.state===e6.TxnState.TRANSACTION_IN_PROGRESS)await this.abortTransaction();if(Z.hasErrorLabel(q0.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,d9.now)()-X<120000))continue;throw Z}while(!Y)try{await this.commitTransaction(),Y=!0}catch(Z){if(!BN(Z)&&Z.hasErrorLabel(q0.MongoErrorLabel.UnknownTransactionCommitResult)&&(this.timeoutContext!=null||(0,d9.now)()-X<120000))continue;if(Z.hasErrorLabel(q0.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,d9.now)()-X<120000))break;throw Z}}return W}finally{this.timeoutContext=null}}}W31.ClientSession=Rb;var Ua1=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);function A31($){if($ instanceof q0.MongoError){if((0,q0.isRetryableWriteError)($)||$ instanceof q0.MongoWriteConcernError||BN($)){if(Y31($))return!0}else if($.hasErrorLabel(q0.MongoErrorLabel.TransientTransactionError))return!0}return!1}function J31($){let F=(0,q0.isRetryableWriteError)($);return F||=$ instanceof q0.MongoWriteConcernError,F||=BN($),F&&=Y31($),F}function Y31($){let F=$ instanceof q0.MongoServerError&&$.codeName&&Ua1.has($.codeName);return BN($)||!F&&$.code!==q0.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern&&$.code!==q0.MONGODB_ERROR_CODES.UnknownReplWriteConcern}function QN($,F){let A=$.pinnedConnection,J=F?.error;if($.inTransaction()&&J&&J instanceof q0.MongoError&&J.hasErrorLabel(q0.MongoErrorLabel.TransientTransactionError))return;let X=$.client.topology;if(A&&X!=null){let W=Array.from(X.s.servers.values())[0];if(F?.error==null||F?.force){if(W.pool.checkIn(A),$.pinnedConnection=void 0,A.emit(X31.UNPINNED,$.transaction.state!==e6.TxnState.NO_TRANSACTION?KN.ConnectionPoolMetrics.TXN:KN.ConnectionPoolMetrics.CURSOR),F?.forceClear)W.pool.clear({serviceId:A.serviceId})}}}function BN($){if($==null||!($ instanceof q0.MongoServerError))return!1;return $.code===q0.MONGODB_ERROR_CODES.MaxTimeMSExpired||$.writeConcernError?.code===q0.MONGODB_ERROR_CODES.MaxTimeMSExpired}class wN{constructor($){if($!=null){let F=Buffer.allocUnsafe(16);F.set($.id.id.buffer),this.id={id:new UN.Binary(F,$.id.id.sub_type)},this.lastUse=$.lastUse,this.txnNumber=$.txnNumber,this.isDirty=$.isDirty;return}this.id={id:new UN.Binary((0,d9.uuidV4)(),UN.Binary.SUBTYPE_UUID)},this.lastUse=(0,d9.now)(),this.txnNumber=0,this.isDirty=!1}hasTimedOut($){return Math.round((0,d9.calculateDurationInMs)(this.lastUse)%86400000%3600000/60000)>$-1}}W31.ServerSession=wN;class Ib{constructor($){if($==null)throw new q0.MongoRuntimeError("ServerSessionPool requires a MongoClient");this.client=$,this.sessions=new d9.List}acquire(){let $=this.client.topology?.logicalSessionTimeoutMinutes??10,F=null;while(this.sessions.length>0){let A=this.sessions.shift();if(A!=null&&(!!this.client.topology?.loadBalanced||!A.hasTimedOut($))){F=A;break}}if(F==null)F=new wN;return F}release($){let F=this.client.topology?.logicalSessionTimeoutMinutes??10;if(this.client.topology?.loadBalanced&&!F)this.sessions.unshift($);if(!F)return;if(this.sessions.prune((A)=>A.hasTimedOut(F)),!$.hasTimedOut(F)){if($.isDirty)return;this.sessions.unshift($)}}}W31.ServerSessionPool=Ib;function Qa1($,F,A){if($.hasEnded)return new q0.MongoExpiredSessionError;let J=$.serverSession;if(J==null)return new q0.MongoRuntimeError("Unable to acquire server session");if(A.writeConcern?.w===0){if($&&$.explicit)return new q0.MongoAPIError("Cannot have explicit session with unacknowledged writes");return}J.lastUse=(0,d9.now)(),F.lsid=J.id;let X=$.inTransaction()||(0,e6.isTransactionCommand)(F);if(!!A.willRetryWrite||X)J.txnNumber+=$.txnNumberIncrement,$.txnNumberIncrement=0,F.txnNumber=UN.Long.fromNumber(J.txnNumber);if(!X){if($.transaction.state!==e6.TxnState.NO_TRANSACTION)$.transaction.transition(e6.TxnState.NO_TRANSACTION);if($.supports.causalConsistency&&$.operationTime&&(0,d9.commandSupportsReadConcern)(F))F.readConcern=F.readConcern||{},Object.assign(F.readConcern,{afterClusterTime:$.operationTime});else if($.snapshotEnabled){if(F.readConcern=F.readConcern||{level:Ha1.ReadConcernLevel.snapshot},$.snapshotTime!=null)Object.assign(F.readConcern,{atClusterTime:$.snapshotTime})}return}if(F.autocommit=!1,$.transaction.state===e6.TxnState.STARTING_TRANSACTION){$.transaction.transition(e6.TxnState.TRANSACTION_IN_PROGRESS),F.startTransaction=!0;let W=$.transaction.options.readConcern||$?.clientOptions?.readConcern;if(W)F.readConcern=W;if($.supports.causalConsistency&&$.operationTime)F.readConcern=F.readConcern||{},Object.assign(F.readConcern,{afterClusterTime:$.operationTime})}return}function Ka1($,F){if(F.$clusterTime)(0,Pb._advanceClusterTime)($,F.$clusterTime);if(F.operationTime&&$&&$.supports.causalConsistency)$.advanceOperationTime(F.operationTime);if(F.recoveryToken&&$&&$.inTransaction())$.transaction._recoveryToken=F.recoveryToken;if($?.snapshotEnabled&&$.snapshotTime==null){let A=F.atClusterTime;if(A)$.snapshotTime=A}}});var q8=O((Q31)=>{Object.defineProperty(Q31,"__esModule",{value:!0});Q31.CursorTimeoutContext=Q31.AbstractCursor=Q31.CursorTimeoutMode=Q31.CURSOR_FLAGS=void 0;var Va1=Z1("stream"),xG=w0(),A9=_1(),Na1=E7(),D31=q9(),Ca1=wb(),Ma1=a81(),G31=Z$(),qN=e4(),Pa1=SK(),Tb=$9(),V7=l1();Q31.CURSOR_FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];function z31(){this.client.s.activeCursors.delete(this)}Q31.CursorTimeoutMode=Object.freeze({ITERATION:"iteration",LIFETIME:"cursorLifetime"});class H31 extends Na1.TypedEventEmitter{static{this.CLOSE="close"}constructor($,F,A={}){super();if(this.documents=null,this.hasEmittedClose=!1,this.on("error",V7.noop),!$.s.isMongoClient)throw new A9.MongoRuntimeError("Cursor must be constructed with MongoClient");if(this.cursorClient=$,this.cursorNamespace=F,this.cursorId=null,this.initialized=!1,this.isClosed=!1,this.isKilled=!1,this.cursorOptions={readPreference:A.readPreference&&A.readPreference instanceof qN.ReadPreference?A.readPreference:qN.ReadPreference.primary,...(0,xG.pluckBSONSerializeOptions)(A),timeoutMS:A?.timeoutContext?.csotEnabled()?A.timeoutContext.timeoutMS:A.timeoutMS,tailable:A.tailable,awaitData:A.awaitData},this.cursorOptions.timeoutMS!=null)if(A.timeoutMode==null)if(A.tailable){if(A.awaitData){if(A.maxAwaitTimeMS!=null&&A.maxAwaitTimeMS>=this.cursorOptions.timeoutMS)throw new A9.MongoInvalidArgumentError("Cannot specify maxAwaitTimeMS >= timeoutMS for a tailable awaitData cursor")}this.cursorOptions.timeoutMode=Q31.CursorTimeoutMode.ITERATION}else this.cursorOptions.timeoutMode=Q31.CursorTimeoutMode.LIFETIME;else{if(A.tailable&&A.timeoutMode===Q31.CursorTimeoutMode.LIFETIME)throw new A9.MongoInvalidArgumentError("Cannot set tailable cursor's timeoutMode to LIFETIME");this.cursorOptions.timeoutMode=A.timeoutMode}else if(A.timeoutMode!=null)throw new A9.MongoInvalidArgumentError("Cannot set timeoutMode without setting timeoutMS");this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null&&(this.cursorOptions.timeoutMode===Q31.CursorTimeoutMode.ITERATION&&!this.cursorOptions.tailable||this.cursorOptions.tailable&&!this.cursorOptions.awaitData);let J=G31.ReadConcern.fromOptions(A);if(J)this.cursorOptions.readConcern=J;if(typeof A.batchSize==="number")this.cursorOptions.batchSize=A.batchSize;if(A.comment!==void 0)this.cursorOptions.comment=A.comment;if(typeof A.maxTimeMS==="number")this.cursorOptions.maxTimeMS=A.maxTimeMS;if(typeof A.maxAwaitTimeMS==="number")this.cursorOptions.maxAwaitTimeMS=A.maxAwaitTimeMS;this.cursorSession=A.session??null,this.deserializationOptions={...this.cursorOptions,validation:{utf8:A?.enableUtf8Validation===!1?!1:!0}},this.timeoutContext=A.timeoutContext,this.signal=A.signal,this.abortListener=(0,V7.addAbortListener)(this.signal,()=>void this.close().then(void 0,V7.squashError)),this.trackCursor()}get id(){return this.cursorId??void 0}get isDead(){return(this.cursorId?.isZero()??!1)||this.isClosed||this.isKilled}get client(){return this.cursorClient}get server(){return this.selectedServer}get namespace(){return this.cursorNamespace}get readPreference(){return this.cursorOptions.readPreference}get readConcern(){return this.cursorOptions.readConcern}get session(){return this.cursorSession}set session($){this.cursorSession=$}get closed(){return this.isClosed&&(this.documents?.length??0)===0}get killed(){return this.isKilled}get loadBalanced(){return!!this.cursorClient.topology?.loadBalanced}async[Symbol.asyncDispose](){await this.close()}trackCursor(){if(this.cursorClient.s.activeCursors.add(this),!this.listeners("close").includes(z31))this.once("close",z31)}bufferedCount(){return this.documents?.length??0}readBufferedDocuments($){let F=[],A=Math.min($??this.documents?.length??0,this.documents?.length??0);for(let J=0;J<A;J++){let X=this.documents?.shift(this.deserializationOptions);if(X!=null)F.push(X)}return F}async*[Symbol.asyncIterator](){if(this.signal?.throwIfAborted(),this.closed)return;try{while(!0){if(this.isKilled)return;if(this.closed)return;if(this.cursorId!=null&&this.isDead&&(this.documents?.length??0)===0)return;let $=await this.next();if($===null)return;yield $,this.signal?.throwIfAborted()}}finally{if(!this.isClosed)try{await this.close()}catch($){(0,V7.squashError)($)}}}stream(){let $=new U31(this),F=(0,V7.addAbortListener)(this.signal,function(){$.destroy(this.reason)});return $.once("end",()=>{F?.[V7.kDispose]()}),$}async hasNext(){if(this.signal?.throwIfAborted(),this.cursorId===xG.Long.ZERO)return!1;if(this.cursorOptions.timeoutMode===Q31.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{do{if((this.documents?.length??0)!==0)return!0;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{if(this.cursorOptions.timeoutMode===Q31.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return!1}async next(){if(this.signal?.throwIfAborted(),this.cursorId===xG.Long.ZERO)throw new A9.MongoCursorExhaustedError;if(this.cursorOptions.timeoutMode===Q31.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{do{let $=this.documents?.shift(this.deserializationOptions);if($!=null){if(this.transform!=null)return await this.transformDocument($);return $}await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{if(this.cursorOptions.timeoutMode===Q31.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return null}async tryNext(){if(this.signal?.throwIfAborted(),this.cursorId===xG.Long.ZERO)throw new A9.MongoCursorExhaustedError;if(this.cursorOptions.timeoutMode===Q31.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{let $=this.documents?.shift(this.deserializationOptions);if($!=null){if(this.transform!=null)return await this.transformDocument($);return $}if(await this.fetchBatch(),$=this.documents?.shift(this.deserializationOptions),$!=null){if(this.transform!=null)return await this.transformDocument($);return $}}finally{if(this.cursorOptions.timeoutMode===Q31.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return null}async forEach($){if(this.signal?.throwIfAborted(),typeof $!=="function")throw new A9.MongoInvalidArgumentError('Argument "iterator" must be a function');for await(let F of this)if($(F)===!1)break}async close($){await this.cleanup($?.timeoutMS)}async toArray(){this.signal?.throwIfAborted();let $=[];for await(let F of this){$.push(F);let A=this.readBufferedDocuments();if(this.transform!=null)for(let J of A)$.push(await this.transformDocument(J));else for(let J of A)$.push(J)}return $}addCursorFlag($,F){if(this.throwIfInitialized(),!Q31.CURSOR_FLAGS.includes($))throw new A9.MongoInvalidArgumentError(`Flag ${$} is not one of ${Q31.CURSOR_FLAGS}`);if(typeof F!=="boolean")throw new A9.MongoInvalidArgumentError(`Flag ${$} must be a boolean value`);return this.cursorOptions[$]=F,this}map($){this.throwIfInitialized();let F=this.transform;if(F)this.transform=(A)=>{return $(F(A))};else this.transform=$;return this}withReadPreference($){if(this.throwIfInitialized(),$ instanceof qN.ReadPreference)this.cursorOptions.readPreference=$;else if(typeof $==="string")this.cursorOptions.readPreference=qN.ReadPreference.fromString($);else throw new A9.MongoInvalidArgumentError(`Invalid read preference: ${$}`);return this}withReadConcern($){this.throwIfInitialized();let F=G31.ReadConcern.fromOptions({readConcern:$});if(F)this.cursorOptions.readConcern=F;return this}maxTimeMS($){if(this.throwIfInitialized(),typeof $!=="number")throw new A9.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.cursorOptions.maxTimeMS=$,this}batchSize($){if(this.throwIfInitialized(),this.cursorOptions.tailable)throw new A9.MongoTailableCursorError("Tailable cursor does not support batchSize");if(typeof $!=="number")throw new A9.MongoInvalidArgumentError('Operation "batchSize" requires an integer');return this.cursorOptions.batchSize=$,this}rewind(){if(this.timeoutContext&&this.timeoutContext.owner!==this)throw new A9.MongoAPIError("Cannot rewind cursor that does not own its timeout context.");if(!this.initialized)return;if(this.cursorId=null,this.documents?.clear(),this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!1,this.isKilled=!1,this.initialized=!1,this.hasEmittedClose=!1,this.trackCursor(),this.cursorSession?.explicit===!1){if(!this.cursorSession.hasEnded)this.cursorSession.endSession().then(void 0,V7.squashError);this.cursorSession=null}}async getMore(){if(this.cursorId==null)throw new A9.MongoRuntimeError("Unexpected null cursor id. A cursor creating command should have set this");if(this.selectedServer==null)throw new A9.MongoRuntimeError("Unexpected null selectedServer. A cursor creating command should have set this");if(this.cursorSession==null)throw new A9.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let $={...this.cursorOptions,session:this.cursorSession,batchSize:this.cursorOptions.batchSize},F=new Ca1.GetMoreOperation(this.cursorNamespace,this.cursorId,this.selectedServer,$);return await(0,D31.executeOperation)(this.cursorClient,F,this.timeoutContext)}async cursorInit(){if(this.cursorOptions.timeoutMS!=null)this.timeoutContext??=new _K(Tb.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:this.cursorOptions.timeoutMS}),this);try{this.cursorSession??=this.cursorClient.startSession({owner:this,explicit:!1});let $=await this._initialize(this.cursorSession);this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null;let F=$.response;this.selectedServer=$.server,this.cursorId=F.id,this.cursorNamespace=F.ns??this.namespace,this.documents=F,this.initialized=!0}catch($){throw this.initialized=!0,await this.cleanup(void 0,$),$}if(this.isDead)await this.cleanup();return}async fetchBatch(){if(this.isClosed)return;if(this.isDead){await this.cleanup();return}if(this.cursorId==null){if(await this.cursorInit(),(this.documents?.length??0)!==0||this.isDead)return}try{let $=await this.getMore();this.cursorId=$.id,this.documents=$}catch($){try{await this.cleanup(void 0,$)}catch(F){(0,V7.squashError)(F)}throw $}if(this.isDead)await this.cleanup()}async cleanup($,F){this.abortListener?.[V7.kDispose](),this.isClosed=!0;let A=()=>{if($!=null)return this.timeoutContext?.clear(),new _K(Tb.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:$}),this);else return this.timeoutContext?.refreshed()};await(async(Y)=>{try{await Y()}finally{this.emitClose()}})(async()=>{let Y=this.cursorSession;if(!Y)return;try{if(!this.isKilled&&this.cursorId&&!this.cursorId.isZero()&&this.cursorNamespace&&this.selectedServer&&!Y.hasEnded){this.isKilled=!0;let W=this.cursorId;this.cursorId=xG.Long.ZERO,await(0,D31.executeOperation)(this.cursorClient,new Ma1.KillCursorsOperation(W,this.cursorNamespace,this.selectedServer,{session:Y}),A())}}catch(W){(0,V7.squashError)(W)}finally{if(Y.owner===this)await Y.endSession({error:F});if(!Y.inTransaction())(0,Pa1.maybeClearPinnedConnection)(Y,{error:F})}})}emitClose(){try{if(!this.hasEmittedClose&&((this.documents?.length??0)===0||this.isClosed))this.emit("close")}finally{this.hasEmittedClose=!0}}async transformDocument($){if(this.transform==null)return $;try{let F=this.transform($);if(F===null)throw new A9.MongoAPIError("Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.");return F}catch(F){try{await this.close()}catch(A){(0,V7.squashError)(A)}throw F}}throwIfInitialized(){if(this.initialized)throw new A9.MongoCursorInUseError}}Q31.AbstractCursor=H31;class U31 extends Va1.Readable{constructor($){super({objectMode:!0,autoDestroy:!1,highWaterMark:1});this._readInProgress=!1,this._cursor=$}_read($){if(!this._readInProgress)this._readInProgress=!0,this._readNext()}_destroy($,F){this._cursor.close().then(()=>F($),(A)=>F(A))}_readNext(){if(this._cursor.id===xG.Long.ZERO){this.push(null);return}this._cursor.next().then(($)=>{if($==null)this.push(null);else if(this.destroyed)this._cursor.close().then(void 0,V7.squashError);else{if(this.push($))return this._readNext();this._readInProgress=!1}},($)=>{if($.message.match(/server is closed/))return this._cursor.close().then(void 0,V7.squashError),this.push(null);if($.message.match(/operation was interrupted/))return this.push(null);return this.destroy($)}).catch(($)=>{this._readInProgress=!1,this.destroy($)})}}class _K extends Tb.TimeoutContext{constructor($,F){super();this.timeoutContext=$,this.owner=F}get serverSelectionTimeout(){return this.timeoutContext.serverSelectionTimeout}get connectionCheckoutTimeout(){return this.timeoutContext.connectionCheckoutTimeout}get clearServerSelectionTimeout(){return this.timeoutContext.clearServerSelectionTimeout}get timeoutForSocketWrite(){return this.timeoutContext.timeoutForSocketWrite}get timeoutForSocketRead(){return this.timeoutContext.timeoutForSocketRead}csotEnabled(){return this.timeoutContext.csotEnabled()}refresh(){if(typeof this.owner!=="symbol")return this.timeoutContext.refresh()}clear(){if(typeof this.owner!=="symbol")return this.timeoutContext.clear()}get maxTimeMS(){return this.timeoutContext.maxTimeMS}get timeoutMS(){return this.timeoutContext.csotEnabled()?this.timeoutContext.timeoutMS:null}refreshed(){return new _K(this.timeoutContext.refreshed(),this.owner)}addMaxTimeMSToCommand($,F){this.timeoutContext.addMaxTimeMSToCommand($,F)}getSocketTimeoutMS(){return this.timeoutContext.getSocketTimeoutMS()}}Q31.CursorTimeoutContext=_K});var LN=O((w31)=>{Object.defineProperty(w31,"__esModule",{value:!0});w31.ExplainableCursor=void 0;var Ia1=q8();class B31 extends Ia1.AbstractCursor{resolveExplainTimeoutOptions($,F){let A,J;if($==null&&F==null)A=void 0,J=void 0;else if($!=null&&F==null)A=typeof $!=="object"?$:("verbosity"in $)?$:void 0,J=typeof $==="object"&&"timeoutMS"in $?$:void 0;else A=$,J=F;return{timeout:J,explain:A}}}w31.ExplainableCursor=B31});var kK=O((C31)=>{Object.defineProperty(C31,"__esModule",{value:!0});C31.AggregationCursor=void 0;var Ob=_1(),L31=LK(),E31=PK(),V31=q9(),Ta1=l1(),N31=q8(),ja1=LN();class Sb extends ja1.ExplainableCursor{constructor($,F,A=[],J={}){super($,F,J);this.pipeline=A,this.aggregateOptions=J;let X=this.pipeline[this.pipeline.length-1];if(this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===N31.CursorTimeoutMode.ITERATION&&(X?.$merge!=null||X?.$out!=null))throw new Ob.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode")}clone(){let $=(0,Ta1.mergeOptions)({},this.aggregateOptions);return delete $.session,new Sb(this.client,this.namespace,this.pipeline,{...$})}map($){return super.map($)}async _initialize($){let F={...this.aggregateOptions,...this.cursorOptions,session:$,signal:this.signal};if(F.explain)try{(0,L31.validateExplainTimeoutOptions)(F,L31.Explain.fromOptions(F))}catch{throw new Ob.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in aggregateOptions")}let A=new E31.AggregateOperation(this.namespace,this.pipeline,F),J=await(0,V31.executeOperation)(this.client,A,this.timeoutContext);return{server:A.server,session:$,response:J}}async explain($,F){let{explain:A,timeout:J}=this.resolveExplainTimeoutOptions($,F);return(await(0,V31.executeOperation)(this.client,new E31.AggregateOperation(this.namespace,this.pipeline,{...this.aggregateOptions,...this.cursorOptions,...J,explain:A??!0}))).shift(this.deserializationOptions)}addStage($){if(this.throwIfInitialized(),this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===N31.CursorTimeoutMode.ITERATION&&($.$out!=null||$.$merge!=null))throw new Ob.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode");return this.pipeline.push($),this}group($){return this.addStage({$group:$})}limit($){return this.addStage({$limit:$})}match($){return this.addStage({$match:$})}out($){return this.addStage({$out:$})}project($){return this.addStage({$project:$})}lookup($){return this.addStage({$lookup:$})}redact($){return this.addStage({$redact:$})}skip($){return this.addStage({$skip:$})}sort($){return this.addStage({$sort:$})}unwind($){return this.addStage({$unwind:$})}geoNear($){return this.addStage({$geoNear:$})}}C31.AggregationCursor=Sb});var kb=O((P31)=>{Object.defineProperty(P31,"__esModule",{value:!0});P31.CountOperation=void 0;var Oa1=T6(),Sa1=X4(),EN=o6();class _b extends Sa1.CommandOperation{constructor($,F,A){super({s:{namespace:$}},A);this.SERVER_COMMAND_RESPONSE_TYPE=Oa1.MongoDBResponse,this.options=A,this.collectionName=$.collection,this.query=F}get commandName(){return"count"}buildCommandDocument($,F){let A=this.options,J={count:this.collectionName,query:this.query};if(typeof A.limit==="number")J.limit=A.limit;if(typeof A.skip==="number")J.skip=A.skip;if(A.hint!=null)J.hint=A.hint;if(typeof A.maxTimeMS==="number")J.maxTimeMS=A.maxTimeMS;return J}handleOk($){return $.getNumber("n")??0}}P31.CountOperation=_b;(0,EN.defineAspects)(_b,[EN.Aspect.READ_OPERATION,EN.Aspect.RETRYABLE,EN.Aspect.SUPPORTS_RAW_DATA])});var j31=O((I31)=>{Object.defineProperty(I31,"__esModule",{value:!0});I31.FindOperation=void 0;var bb=T6(),_a1=_1(),ka1=TG(),ba1=l1(),xa1=X4(),gG=o6();class xb extends xa1.CommandOperation{constructor($,F={},A={}){super(void 0,A);if(this.SERVER_COMMAND_RESPONSE_TYPE=bb.CursorResponse,this.options={...A},delete this.options.writeConcern,this.ns=$,typeof F!=="object"||Array.isArray(F))throw new _a1.MongoInvalidArgumentError("Query filter must be a plain object or ObjectId");this.filter=F!=null&&F._bsontype==="ObjectId"?{_id:F}:F,this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?bb.ExplainedCursorResponse:bb.CursorResponse}get commandName(){return"find"}buildOptions($){return{...this.options,...this.bsonOptions,documentsReturnedIn:"firstBatch",session:this.session,timeoutContext:$}}handleOk($){return $}buildCommandDocument(){return ga1(this.ns,this.filter,this.options)}}I31.FindOperation=xb;function ga1($,F,A){let J={find:$.collection,filter:F};if(A.sort)J.sort=(0,ka1.formatSort)(A.sort);if(A.projection){let X=A.projection;if(X&&Array.isArray(X))X=X.length?X.reduce((Y,W)=>{return Y[W]=1,Y},{}):{_id:1};J.projection=X}if(A.hint)J.hint=(0,ba1.normalizeHintField)(A.hint);if(typeof A.skip==="number")J.skip=A.skip;if(typeof A.limit==="number")if(A.limit<0)J.limit=-A.limit,J.singleBatch=!0;else J.limit=A.limit;if(typeof A.batchSize==="number")if(A.batchSize<0)J.limit=-A.batchSize;else if(A.batchSize===A.limit)J.batchSize=A.batchSize+1;else J.batchSize=A.batchSize;if(typeof A.singleBatch==="boolean")J.singleBatch=A.singleBatch;if(A.comment!==void 0)J.comment=A.comment;if(A.max)J.max=A.max;if(A.min)J.min=A.min;if(typeof A.returnKey==="boolean")J.returnKey=A.returnKey;if(typeof A.showRecordId==="boolean")J.showRecordId=A.showRecordId;if(typeof A.tailable==="boolean")J.tailable=A.tailable;if(typeof A.oplogReplay==="boolean")J.oplogReplay=A.oplogReplay;if(typeof A.timeout==="boolean")J.noCursorTimeout=!A.timeout;else if(typeof A.noCursorTimeout==="boolean")J.noCursorTimeout=A.noCursorTimeout;if(typeof A.awaitData==="boolean")J.awaitData=A.awaitData;if(typeof A.allowPartialResults==="boolean")J.allowPartialResults=A.allowPartialResults;if(typeof A.allowDiskUse==="boolean")J.allowDiskUse=A.allowDiskUse;if(A.let)J.let=A.let;return J}(0,gG.defineAspects)(xb,[gG.Aspect.READ_OPERATION,gG.Aspect.RETRYABLE,gG.Aspect.EXPLAINABLE,gG.Aspect.CURSOR_CREATING,gG.Aspect.SUPPORTS_RAW_DATA])});var yb=O((_31)=>{Object.defineProperty(_31,"__esModule",{value:!0});_31.FindCursor=_31.FLAGS=void 0;var fa1=T6(),B5=_1(),O31=LK(),va1=kb(),gb=q9(),S31=j31(),fb=TG(),VN=l1(),ya1=LN();_31.FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];class vb extends ya1.ExplainableCursor{constructor($,F,A={},J={}){super($,F,J);if(this.numReturned=0,this.cursorFilter=A,this.findOptions=J,J.sort!=null)this.findOptions.sort=(0,fb.formatSort)(J.sort)}clone(){let $=(0,VN.mergeOptions)({},this.findOptions);return delete $.session,new vb(this.client,this.namespace,this.cursorFilter,{...$})}map($){return super.map($)}async _initialize($){let F={...this.findOptions,...this.cursorOptions,session:$,signal:this.signal};if(F.explain)try{(0,O31.validateExplainTimeoutOptions)(F,O31.Explain.fromOptions(F))}catch{throw new B5.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in findOptions")}let A=new S31.FindOperation(this.namespace,this.cursorFilter,F),J=await(0,gb.executeOperation)(this.client,A,this.timeoutContext);return this.numReturned=J.batchSize,{server:A.server,session:$,response:J}}async getMore(){let $=this.numReturned,F=this.findOptions.limit??1/0,A=F-$;if($===F&&!this.id?.isZero()){try{await this.close()}catch(Y){(0,VN.squashError)(Y)}return fa1.CursorResponse.emptyGetMore}let J=VN.noop,{batchSize:X}=this.cursorOptions;if(X!=null&&X>A)this.cursorOptions.batchSize=A,J=()=>{this.cursorOptions.batchSize=X};try{let Y=await super.getMore();return this.numReturned=this.numReturned+Y.batchSize,Y}finally{J?.()}}async count($){if((0,VN.emitWarningOnce)("cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead "),typeof $==="boolean")throw new B5.MongoInvalidArgumentError("Invalid first parameter to count");return await(0,gb.executeOperation)(this.client,new va1.CountOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...$}))}async explain($,F){let{explain:A,timeout:J}=this.resolveExplainTimeoutOptions($,F);return(await(0,gb.executeOperation)(this.client,new S31.FindOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...J,explain:A??!0}))).shift(this.deserializationOptions)}filter($){return this.throwIfInitialized(),this.cursorFilter=$,this}hint($){return this.throwIfInitialized(),this.findOptions.hint=$,this}min($){return this.throwIfInitialized(),this.findOptions.min=$,this}max($){return this.throwIfInitialized(),this.findOptions.max=$,this}returnKey($){return this.throwIfInitialized(),this.findOptions.returnKey=$,this}showRecordId($){return this.throwIfInitialized(),this.findOptions.showRecordId=$,this}addQueryModifier($,F){if(this.throwIfInitialized(),$[0]!=="$")throw new B5.MongoInvalidArgumentError(`${$} is not a valid query modifier`);switch($.substr(1)){case"comment":this.findOptions.comment=F;break;case"explain":this.findOptions.explain=F;break;case"hint":this.findOptions.hint=F;break;case"max":this.findOptions.max=F;break;case"maxTimeMS":this.findOptions.maxTimeMS=F;break;case"min":this.findOptions.min=F;break;case"orderby":this.findOptions.sort=(0,fb.formatSort)(F);break;case"query":this.cursorFilter=F;break;case"returnKey":this.findOptions.returnKey=F;break;case"showDiskLoc":this.findOptions.showRecordId=F;break;default:throw new B5.MongoInvalidArgumentError(`Invalid query modifier: ${$}`)}return this}comment($){return this.throwIfInitialized(),this.findOptions.comment=$,this}maxAwaitTimeMS($){if(this.throwIfInitialized(),typeof $!=="number")throw new B5.MongoInvalidArgumentError("Argument for maxAwaitTimeMS must be a number");return this.findOptions.maxAwaitTimeMS=$,this}maxTimeMS($){if(this.throwIfInitialized(),typeof $!=="number")throw new B5.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.findOptions.maxTimeMS=$,this}project($){return this.throwIfInitialized(),this.findOptions.projection=$,this}sort($,F){if(this.throwIfInitialized(),this.findOptions.tailable)throw new B5.MongoTailableCursorError("Tailable cursor does not support sorting");return this.findOptions.sort=(0,fb.formatSort)($,F),this}allowDiskUse($=!0){if(this.throwIfInitialized(),!this.findOptions.sort)throw new B5.MongoInvalidArgumentError('Option "allowDiskUse" requires a sort specification');if(!$)return this.findOptions.allowDiskUse=!1,this;return this.findOptions.allowDiskUse=!0,this}collation($){return this.throwIfInitialized(),this.findOptions.collation=$,this}limit($){if(this.throwIfInitialized(),this.findOptions.tailable)throw new B5.MongoTailableCursorError("Tailable cursor does not support limit");if(typeof $!=="number")throw new B5.MongoInvalidArgumentError('Operation "limit" requires an integer');return this.findOptions.limit=$,this}skip($){if(this.throwIfInitialized(),this.findOptions.tailable)throw new B5.MongoTailableCursorError("Tailable cursor does not support skip");if(typeof $!=="number")throw new B5.MongoInvalidArgumentError('Operation "skip" requires an integer');return this.findOptions.skip=$,this}}_31.FindCursor=vb});var xK=O((b31)=>{Object.defineProperty(b31,"__esModule",{value:!0});b31.ListIndexesOperation=b31.DropIndexOperation=b31.CreateIndexesOperation=void 0;var ub=T6(),ha1=_1(),hb=l1(),mb=X4(),H$=o6(),ma1=new Set(["background","unique","name","partialFilterExpression","sparse","hidden","expireAfterSeconds","storageEngine","collation","version","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]);function da1($){return typeof $==="number"||$==="2d"||$==="2dsphere"||$==="text"||$==="geoHaystack"}function ca1($){return Array.isArray($)&&$.length===2&&da1($[1])}function la1($){let F=new Map,A=!Array.isArray($)||ca1($)?[$]:$;for(let J of A)if(typeof J==="string")F.set(J,1);else if(Array.isArray(J))F.set(J[0],J[1]??1);else if(J instanceof Map)for(let[X,Y]of J)F.set(X,Y);else if((0,hb.isObject)(J))for(let[X,Y]of Object.entries(J))F.set(X,Y);return F}function pa1($){let F=Object.entries($).filter(([A])=>ma1.has(A));return Object.fromEntries(F.map(([A,J])=>A==="version"?["v",J]:[A,J]))}class bK extends mb.CommandOperation{constructor($,F,A,J){super($,J);this.SERVER_COMMAND_RESPONSE_TYPE=ub.MongoDBResponse,this.options=J??{},this.options.collation=void 0,this.collectionName=F,this.indexes=A.map((X)=>{let Y=X.key instanceof Map?X.key:new Map(Object.entries(X.key)),W=X.name??Array.from(Y).flat().join("_");return{...pa1(X),name:W,key:Y}}),this.ns=$.s.namespace}static fromIndexDescriptionArray($,F,A,J){return new bK($,F,A,J)}static fromIndexSpecification($,F,A,J={}){let X=la1(A),Y={...J,key:X};return new bK($,F,[Y],J)}get commandName(){return"createIndexes"}buildCommandDocument($){let F=this.options,A=this.indexes,J=(0,hb.maxWireVersion)($),X={createIndexes:this.collectionName,indexes:A};if(F.commitQuorum!=null){if(J<9)throw new ha1.MongoCompatibilityError("Option `commitQuorum` for `createIndexes` not supported on servers < 4.4");X.commitQuorum=F.commitQuorum}return X}handleOk($){return this.indexes.map((A)=>A.name||"")}}b31.CreateIndexesOperation=bK;class db extends mb.CommandOperation{constructor($,F,A){super($,A);this.SERVER_COMMAND_RESPONSE_TYPE=ub.MongoDBResponse,this.options=A??{},this.collection=$,this.indexName=F,this.ns=$.fullNamespace}get commandName(){return"dropIndexes"}buildCommandDocument($){return{dropIndexes:this.collection.collectionName,index:this.indexName}}}b31.DropIndexOperation=db;class cb extends mb.CommandOperation{constructor($,F){super($,F);this.SERVER_COMMAND_RESPONSE_TYPE=ub.CursorResponse,this.options={...F},delete this.options.writeConcern,this.collectionNamespace=$.s.namespace}get commandName(){return"listIndexes"}buildCommandDocument($){let F=(0,hb.maxWireVersion)($),A=this.options.batchSize?{batchSize:this.options.batchSize}:{},J={listIndexes:this.collectionNamespace.collection,cursor:A};if(F>=9&&this.options.comment!==void 0)J.comment=this.options.comment;return J}handleOk($){return $}}b31.ListIndexesOperation=cb;(0,H$.defineAspects)(cb,[H$.Aspect.READ_OPERATION,H$.Aspect.RETRYABLE,H$.Aspect.CURSOR_CREATING,H$.Aspect.SUPPORTS_RAW_DATA]);(0,H$.defineAspects)(bK,[H$.Aspect.WRITE_OPERATION,H$.Aspect.SUPPORTS_RAW_DATA]);(0,H$.defineAspects)(db,[H$.Aspect.WRITE_OPERATION,H$.Aspect.SUPPORTS_RAW_DATA])});var pb=O((g31)=>{Object.defineProperty(g31,"__esModule",{value:!0});g31.ListIndexesCursor=void 0;var ra1=q9(),aa1=xK(),ta1=q8();class lb extends ta1.AbstractCursor{constructor($,F){super($.client,$.s.namespace,F);this.parent=$,this.options=F}clone(){return new lb(this.parent,{...this.options,...this.cursorOptions})}async _initialize($){let F=new aa1.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:$}),A=await(0,ra1.executeOperation)(this.parent.client,F,this.timeoutContext);return{server:F.server,session:$,response:A}}}g31.ListIndexesCursor=lb});var h31=O((y31)=>{Object.defineProperty(y31,"__esModule",{value:!0});y31.ListSearchIndexesCursor=void 0;var sa1=kK();class v31 extends sa1.AggregationCursor{constructor({fullNamespace:$,client:F},A,J={}){let X=A==null?[{$listSearchIndexes:{}}]:[{$listSearchIndexes:{name:A}}];super(F,$,X,J)}}y31.ListSearchIndexesCursor=v31});var c31=O((m31)=>{Object.defineProperty(m31,"__esModule",{value:!0});m31.DistinctOperation=void 0;var oa1=T6(),ea1=X4(),gK=o6();class ib extends ea1.CommandOperation{constructor($,F,A,J){super($,J);this.SERVER_COMMAND_RESPONSE_TYPE=oa1.MongoDBResponse,this.options=J??{},this.collection=$,this.key=F,this.query=A}get commandName(){return"distinct"}buildCommandDocument($){let F={distinct:this.collection.collectionName,key:this.key,query:this.query};if(this.options.comment!==void 0)F.comment=this.options.comment;if(this.options.hint!=null)F.hint=this.options.hint;return F}handleOk($){if(this.explain)return $.toObject(this.bsonOptions);return $.toObject(this.bsonOptions).values}}m31.DistinctOperation=ib;(0,gK.defineAspects)(ib,[gK.Aspect.READ_OPERATION,gK.Aspect.RETRYABLE,gK.Aspect.EXPLAINABLE,gK.Aspect.SUPPORTS_RAW_DATA])});var i31=O((l31)=>{Object.defineProperty(l31,"__esModule",{value:!0});l31.EstimatedDocumentCountOperation=void 0;var $t1=T6(),Ft1=X4(),fK=o6();class nb extends Ft1.CommandOperation{constructor($,F={}){super($,F);this.SERVER_COMMAND_RESPONSE_TYPE=$t1.MongoDBResponse,this.options=F,this.collectionName=$.collectionName}get commandName(){return"count"}buildCommandDocument($,F){let A={count:this.collectionName};if(typeof this.options.maxTimeMS==="number")A.maxTimeMS=this.options.maxTimeMS;if(this.options.comment!==void 0)A.comment=this.options.comment;return A}handleOk($){return $.getNumber("n")??0}}l31.EstimatedDocumentCountOperation=nb;(0,fK.defineAspects)(nb,[fK.Aspect.READ_OPERATION,fK.Aspect.RETRYABLE,fK.Aspect.CURSOR_CREATING,fK.Aspect.SUPPORTS_RAW_DATA])});var rb=O((s31)=>{Object.defineProperty(s31,"__esModule",{value:!0});s31.FindOneAndUpdateOperation=s31.FindOneAndReplaceOperation=s31.FindOneAndDeleteOperation=s31.FindAndModifyOperation=s31.ReturnDocument=void 0;var At1=T6(),_X=_1(),Jt1=e4(),Xt1=TG(),NN=l1(),Yt1=X4(),vK=o6();s31.ReturnDocument=Object.freeze({BEFORE:"before",AFTER:"after"});function n31($,F){if($.new=F.returnDocument===s31.ReturnDocument.AFTER,$.upsert=F.upsert===!0,F.bypassDocumentValidation===!0)$.bypassDocumentValidation=F.bypassDocumentValidation;return $}class fG extends Yt1.CommandOperation{constructor($,F,A){super($,A);this.SERVER_COMMAND_RESPONSE_TYPE=At1.MongoDBResponse,this.options=A,this.readPreference=Jt1.ReadPreference.primary,this.collection=$,this.query=F}get commandName(){return"findAndModify"}buildCommandDocument($,F){let A=this.options,J={findAndModify:this.collection.collectionName,query:this.query,remove:!1,new:!1,upsert:!1};A.includeResultMetadata??=!1;let X=(0,Xt1.formatSort)(A.sort);if(X)J.sort=X;if(A.projection)J.fields=A.projection;if(A.maxTimeMS)J.maxTimeMS=A.maxTimeMS;if(A.writeConcern)J.writeConcern=A.writeConcern;if(A.let)J.let=A.let;if(A.comment!==void 0)J.comment=A.comment;if((0,NN.decorateWithCollation)(J,A),A.hint){if(this.writeConcern?.w===0&&(0,NN.maxWireVersion)($)<9)throw new _X.MongoCompatibilityError("hint for the findAndModify command is only supported on MongoDB 4.4+");J.hint=A.hint}return J}handleOk($){let F=super.handleOk($);return this.options.includeResultMetadata?F:F.value??null}}s31.FindAndModifyOperation=fG;class r31 extends fG{constructor($,F,A){if(F==null||typeof F!=="object")throw new _X.MongoInvalidArgumentError('Argument "filter" must be an object');super($,F,A)}buildCommandDocument($,F){let A=super.buildCommandDocument($,F);return A.remove=!0,A}}s31.FindOneAndDeleteOperation=r31;class a31 extends fG{constructor($,F,A,J){if(F==null||typeof F!=="object")throw new _X.MongoInvalidArgumentError('Argument "filter" must be an object');if(A==null||typeof A!=="object")throw new _X.MongoInvalidArgumentError('Argument "replacement" must be an object');if((0,NN.hasAtomicOperators)(A))throw new _X.MongoInvalidArgumentError("Replacement document must not contain atomic operators");super($,F,J);this.replacement=A}buildCommandDocument($,F){let A=super.buildCommandDocument($,F);return A.update=this.replacement,n31(A,this.options),A}}s31.FindOneAndReplaceOperation=a31;class t31 extends fG{constructor($,F,A,J){if(F==null||typeof F!=="object")throw new _X.MongoInvalidArgumentError('Argument "filter" must be an object');if(A==null||typeof A!=="object")throw new _X.MongoInvalidArgumentError('Argument "update" must be an object');if(!(0,NN.hasAtomicOperators)(A,J))throw new _X.MongoInvalidArgumentError("Update document requires atomic operators");super($,F,J);this.update=A,this.options=J}buildCommandDocument($,F){let A=super.buildCommandDocument($,F);if(A.update=this.update,n31(A,this.options),this.options.arrayFilters)A.arrayFilters=this.options.arrayFilters;return A}}s31.FindOneAndUpdateOperation=t31;(0,vK.defineAspects)(fG,[vK.Aspect.WRITE_OPERATION,vK.Aspect.RETRYABLE,vK.Aspect.EXPLAINABLE,vK.Aspect.SUPPORTS_RAW_DATA])});var tb=O((F71)=>{Object.defineProperty(F71,"__esModule",{value:!0});F71.RenameOperation=void 0;var Gt1=T6(),zt1=vG(),Ht1=l1(),Ut1=X4(),$71=o6();class ab extends Ut1.CommandOperation{constructor($,F,A){super($,A);this.SERVER_COMMAND_RESPONSE_TYPE=Gt1.MongoDBResponse,this.collection=$,this.newName=F,this.options=A,this.ns=new Ht1.MongoDBNamespace("admin","$cmd")}get commandName(){return"renameCollection"}buildCommandDocument($,F){let A=this.collection.namespace,J=this.collection.s.namespace.withCollection(this.newName).toString(),X=typeof this.options.dropTarget==="boolean"?this.options.dropTarget:!1;return{renameCollection:A,to:J,dropTarget:X}}handleOk($){return new zt1.Collection(this.collection.db,this.newName,this.collection.s.options)}}F71.RenameOperation=ab;(0,$71.defineAspects)(ab,[$71.Aspect.WRITE_OPERATION])});var W71=O((X71)=>{Object.defineProperty(X71,"__esModule",{value:!0});X71.CreateSearchIndexesOperation=void 0;var Qt1=T6(),Kt1=o6();class J71 extends Kt1.AbstractOperation{constructor($,F){super();this.SERVER_COMMAND_RESPONSE_TYPE=Qt1.MongoDBResponse,this.collection=$,this.descriptions=F,this.ns=$.fullNamespace}get commandName(){return"createSearchIndexes"}buildCommand($,F){return{createSearchIndexes:this.collection.fullNamespace.collection,indexes:this.descriptions}}handleOk($){return super.handleOk($).indexesCreated.map((F)=>F.name)}buildOptions($){return{session:this.session,timeoutContext:$}}}X71.CreateSearchIndexesOperation=J71});var H71=O((G71)=>{Object.defineProperty(G71,"__esModule",{value:!0});G71.DropSearchIndexOperation=void 0;var Bt1=T6(),Z71=_1(),wt1=o6();class D71 extends wt1.AbstractOperation{constructor($,F){super();this.SERVER_COMMAND_RESPONSE_TYPE=Bt1.MongoDBResponse,this.collection=$,this.name=F,this.ns=$.fullNamespace}get commandName(){return"dropSearchIndex"}buildCommand($,F){let J={dropSearchIndex:this.collection.fullNamespace.collection};if(typeof this.name==="string")J.name=this.name;return J}handleOk($){}buildOptions($){return{session:this.session,timeoutContext:$}}handleError($){if(!($ instanceof Z71.MongoServerError&&$.code===Z71.MONGODB_ERROR_CODES.NamespaceNotFound))throw $}}G71.DropSearchIndexOperation=D71});var B71=O((Q71)=>{Object.defineProperty(Q71,"__esModule",{value:!0});Q71.UpdateSearchIndexOperation=void 0;var qt1=T6(),Lt1=o6();class U71 extends Lt1.AbstractOperation{constructor($,F,A){super();this.SERVER_COMMAND_RESPONSE_TYPE=qt1.MongoDBResponse,this.collection=$,this.name=F,this.definition=A,this.ns=$.fullNamespace}get commandName(){return"updateSearchIndex"}buildCommand($,F){return{updateSearchIndex:this.collection.fullNamespace.collection,name:this.name,definition:this.definition}}handleOk($){}buildOptions($){return{session:this.session,timeoutContext:$}}}Q71.UpdateSearchIndexOperation=U71});var vG=O((E71)=>{Object.defineProperty(E71,"__esModule",{value:!0});E71.Collection=void 0;var Et1=w0(),Vt1=Zb(),Nt1=Db(),Ct1=uG(),Mt1=kK(),Pt1=yb(),Rt1=pb(),It1=h31(),yG=_1(),Tt1=kb(),w71=xk(),jt1=c31(),Ot1=i31(),_4=q9(),sb=rb(),CN=xK(),St1=dk(),_t1=tb(),kt1=W71(),bt1=H71(),xt1=B71(),ob=nk(),gt1=Z$(),eb=e4(),h6=l1(),q71=i8();class L71{constructor($,F,A){this.db=$,this.s={db:$,options:A,namespace:new h6.MongoDBCollectionNamespace($.databaseName,F),pkFactory:$.options?.pkFactory??h6.DEFAULT_PK_FACTORY,readPreference:eb.ReadPreference.fromOptions(A),bsonOptions:(0,Et1.resolveBSONOptions)(A,$),readConcern:gt1.ReadConcern.fromOptions(A),writeConcern:q71.WriteConcern.fromOptions(A)},this.client=$.client}get dbName(){return this.s.namespace.db}get collectionName(){return this.s.namespace.collection}get namespace(){return this.fullNamespace.toString()}get fullNamespace(){return this.s.namespace}get readConcern(){if(this.s.readConcern==null)return this.db.readConcern;return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.db.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){if(this.s.writeConcern==null)return this.db.writeConcern;return this.s.writeConcern}get hint(){return this.s.collectionHint}set hint($){this.s.collectionHint=(0,h6.normalizeHintField)($)}get timeoutMS(){return this.s.options.timeoutMS}async insertOne($,F){return await(0,_4.executeOperation)(this.client,new St1.InsertOneOperation(this,$,(0,h6.resolveOptions)(this,F)))}async insertMany($,F){if(!Array.isArray($))throw new yG.MongoInvalidArgumentError('Argument "docs" must be an array of documents');F=(0,h6.resolveOptions)(this,F??{});let A=q71.WriteConcern.fromOptions(F)?.w!==0;try{let J=await this.bulkWrite($.map((X)=>({insertOne:{document:X}})),F);return{acknowledged:A,insertedCount:J.insertedCount,insertedIds:J.insertedIds}}catch(J){if(J&&J.message==="Operation must be an object with an operation key")throw new yG.MongoInvalidArgumentError("Collection.insertMany() cannot be called with an array that has null/undefined values");throw J}}async bulkWrite($,F){if(!Array.isArray($))throw new yG.MongoInvalidArgumentError('Argument "operations" must be an array of documents');if(F=(0,h6.resolveOptions)(this,F??{}),this.client.topology==null)await(0,_4.autoConnect)(this.client);let J=F.ordered===!1?this.initializeUnorderedBulkOp(F):this.initializeOrderedBulkOp(F);for(let X of $)J.raw(X);return await J.execute({...F})}async updateOne($,F,A){return await(0,_4.executeOperation)(this.client,new ob.UpdateOneOperation(this.s.namespace,$,F,(0,h6.resolveOptions)(this,A)))}async replaceOne($,F,A){return await(0,_4.executeOperation)(this.client,new ob.ReplaceOneOperation(this.s.namespace,$,F,(0,h6.resolveOptions)(this,A)))}async updateMany($,F,A){return await(0,_4.executeOperation)(this.client,new ob.UpdateManyOperation(this.s.namespace,$,F,(0,h6.resolveOptions)(this,A)))}async deleteOne($={},F={}){return await(0,_4.executeOperation)(this.client,new w71.DeleteOneOperation(this.s.namespace,$,(0,h6.resolveOptions)(this,F)))}async deleteMany($={},F={}){return await(0,_4.executeOperation)(this.client,new w71.DeleteManyOperation(this.s.namespace,$,(0,h6.resolveOptions)(this,F)))}async rename($,F){return await(0,_4.executeOperation)(this.client,new _t1.RenameOperation(this,$,(0,h6.resolveOptions)(void 0,{...F,readPreference:eb.ReadPreference.PRIMARY})))}async drop($){return await this.db.dropCollection(this.collectionName,$)}async findOne($={},F={}){let{...A}=F;A.singleBatch=!0;let J=this.find($,A).limit(1),X=await J.next();return await J.close(),X}find($={},F={}){return new Pt1.FindCursor(this.client,this.s.namespace,$,(0,h6.resolveOptions)(this,F))}async options($){$=(0,h6.resolveOptions)(this,$);let[F]=await this.db.listCollections({name:this.collectionName},{...$,nameOnly:!1}).toArray();if(F==null||F.options==null)throw new yG.MongoAPIError(`collection ${this.namespace} not found`);return F.options}async isCapped($){let{capped:F}=await this.options($);return Boolean(F)}async createIndex($,F){return(await(0,_4.executeOperation)(this.client,CN.CreateIndexesOperation.fromIndexSpecification(this,this.collectionName,$,(0,h6.resolveOptions)(this,F))))[0]}async createIndexes($,F){return await(0,_4.executeOperation)(this.client,CN.CreateIndexesOperation.fromIndexDescriptionArray(this,this.collectionName,$,(0,h6.resolveOptions)(this,{...F,maxTimeMS:void 0})))}async dropIndex($,F){return await(0,_4.executeOperation)(this.client,new CN.DropIndexOperation(this,$,{...(0,h6.resolveOptions)(this,F),readPreference:eb.ReadPreference.primary}))}async dropIndexes($){try{return await(0,_4.executeOperation)(this.client,new CN.DropIndexOperation(this,"*",(0,h6.resolveOptions)(this,$))),!0}catch(F){if(F instanceof yG.MongoOperationTimeoutError)throw F;return!1}}listIndexes($){return new Rt1.ListIndexesCursor(this,(0,h6.resolveOptions)(this,$))}async indexExists($,F){let A=Array.isArray($)?$:[$],J=new Set(await this.listIndexes(F).map(({name:X})=>X).toArray());return A.every((X)=>J.has(X))}async indexInformation($){return await this.indexes({...$,full:$?.full??!1})}async estimatedDocumentCount($){return await(0,_4.executeOperation)(this.client,new Ot1.EstimatedDocumentCountOperation(this,(0,h6.resolveOptions)(this,$)))}async countDocuments($={},F={}){let A=[];if(A.push({$match:$}),typeof F.skip==="number")A.push({$skip:F.skip});if(typeof F.limit==="number")A.push({$limit:F.limit});A.push({$group:{_id:1,n:{$sum:1}}});let J=this.aggregate(A,F),X=await J.next();return await J.close(),X?.n??0}async distinct($,F={},A={}){return await(0,_4.executeOperation)(this.client,new jt1.DistinctOperation(this,$,F,(0,h6.resolveOptions)(this,A)))}async indexes($){let F=await this.listIndexes($).toArray();if($?.full??!0)return F;return Object.fromEntries(F.map(({name:X,key:Y})=>[X,Object.entries(Y)]))}async findOneAndDelete($,F){return await(0,_4.executeOperation)(this.client,new sb.FindOneAndDeleteOperation(this,$,(0,h6.resolveOptions)(this,F)))}async findOneAndReplace($,F,A){return await(0,_4.executeOperation)(this.client,new sb.FindOneAndReplaceOperation(this,$,F,(0,h6.resolveOptions)(this,A)))}async findOneAndUpdate($,F,A){return await(0,_4.executeOperation)(this.client,new sb.FindOneAndUpdateOperation(this,$,F,(0,h6.resolveOptions)(this,A)))}aggregate($=[],F){if(!Array.isArray($))throw new yG.MongoInvalidArgumentError('Argument "pipeline" must be an array of aggregation stages');return new Mt1.AggregationCursor(this.client,this.s.namespace,$,(0,h6.resolveOptions)(this,F))}watch($=[],F={}){if(!Array.isArray($))F=$,$=[];return new Ct1.ChangeStream(this,$,(0,h6.resolveOptions)(this,F))}initializeUnorderedBulkOp($){return new Nt1.UnorderedBulkOperation(this,(0,h6.resolveOptions)(this,$))}initializeOrderedBulkOp($){return new Vt1.OrderedBulkOperation(this,(0,h6.resolveOptions)(this,$))}async count($={},F={}){return await(0,_4.executeOperation)(this.client,new Tt1.CountOperation(this.fullNamespace,$,(0,h6.resolveOptions)(this,F)))}listSearchIndexes($,F){F=typeof $==="object"?$:F==null?{}:F;let A=$==null?null:typeof $==="object"?null:$;return new It1.ListSearchIndexesCursor(this,A,F)}async createSearchIndex($){let[F]=await this.createSearchIndexes([$]);return F}async createSearchIndexes($){return await(0,_4.executeOperation)(this.client,new kt1.CreateSearchIndexesOperation(this,$))}async dropSearchIndex($){return await(0,_4.executeOperation)(this.client,new bt1.DropSearchIndexOperation(this,$))}async updateSearchIndex($,F){return await(0,_4.executeOperation)(this.client,new xt1.UpdateSearchIndexOperation(this,$,F))}}E71.Collection=L71});var Ax=O((M71)=>{Object.defineProperty(M71,"__esModule",{value:!0});M71.ChangeStreamCursor=void 0;var $x=uG(),N71=O4(),ft1=PK(),vt1=q9(),C71=l1(),yt1=q8();class Fx extends yt1.AbstractCursor{constructor($,F,A=[],J={}){super($,F,{...J,tailable:!0,awaitData:!0});if(this.pipeline=A,this.changeStreamCursorOptions=J,this._resumeToken=null,this.startAtOperationTime=J.startAtOperationTime??null,J.startAfter)this.resumeToken=J.startAfter;else if(J.resumeAfter)this.resumeToken=J.resumeAfter}set resumeToken($){this._resumeToken=$,this.emit($x.ChangeStream.RESUME_TOKEN_CHANGED,$)}get resumeToken(){return this._resumeToken}get resumeOptions(){let $={...this.changeStreamCursorOptions};for(let F of["resumeAfter","startAfter","startAtOperationTime"])delete $[F];if(this.resumeToken!=null)if(this.changeStreamCursorOptions.startAfter&&!this.hasReceived)$.startAfter=this.resumeToken;else $.resumeAfter=this.resumeToken;else if(this.startAtOperationTime!=null)$.startAtOperationTime=this.startAtOperationTime;return $}cacheResumeToken($){if(this.bufferedCount()===0&&this.postBatchResumeToken)this.resumeToken=this.postBatchResumeToken;else this.resumeToken=$;this.hasReceived=!0}_processBatch($){let{postBatchResumeToken:F}=$;if(F){if(this.postBatchResumeToken=F,$.batchSize===0)this.resumeToken=F}}clone(){return new Fx(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}async _initialize($){let F=new ft1.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.changeStreamCursorOptions,session:$}),A=await(0,vt1.executeOperation)($.client,F,this.timeoutContext),J=F.server;if(this.maxWireVersion=(0,C71.maxWireVersion)(J),this.startAtOperationTime==null&&this.changeStreamCursorOptions.resumeAfter==null&&this.changeStreamCursorOptions.startAfter==null)this.startAtOperationTime=A.operationTime;return this._processBatch(A),this.emit(N71.INIT,A),this.emit(N71.RESPONSE),{server:J,session:$,response:A}}async getMore(){let $=await super.getMore();return this.maxWireVersion=(0,C71.maxWireVersion)(this.server),this._processBatch($),this.emit($x.ChangeStream.MORE,$),this.emit($x.ChangeStream.RESPONSE),$}}M71.ChangeStreamCursor=Fx});var T71=O((R71)=>{Object.defineProperty(R71,"__esModule",{value:!0});R71.ListCollectionsOperation=void 0;var Jx=T6(),ut1=l1(),ht1=X4(),yK=o6();class Xx extends ht1.CommandOperation{constructor($,F,A){super($,A);if(this.SERVER_COMMAND_RESPONSE_TYPE=Jx.CursorResponse,this.options={...A},delete this.options.writeConcern,this.db=$,this.filter=F,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,typeof this.options.batchSize==="number")this.batchSize=this.options.batchSize;this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?Jx.ExplainedCursorResponse:Jx.CursorResponse}get commandName(){return"listCollections"}buildCommandDocument($){let F={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};if((0,ut1.maxWireVersion)($)>=9&&this.options.comment!==void 0)F.comment=this.options.comment;return F}handleOk($){return $}}R71.ListCollectionsOperation=Xx;(0,yK.defineAspects)(Xx,[yK.Aspect.READ_OPERATION,yK.Aspect.RETRYABLE,yK.Aspect.CURSOR_CREATING,yK.Aspect.SUPPORTS_RAW_DATA])});var Wx=O((j71)=>{Object.defineProperty(j71,"__esModule",{value:!0});j71.ListCollectionsCursor=void 0;var mt1=q9(),dt1=T71(),ct1=q8();class Yx extends ct1.AbstractCursor{constructor($,F,A){super($.client,$.s.namespace,A);this.parent=$,this.filter=F,this.options=A}clone(){return new Yx(this.parent,this.filter,{...this.options,...this.cursorOptions})}async _initialize($){let F=new dt1.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:$,signal:this.signal}),A=await(0,mt1.executeOperation)(this.parent.client,F,this.timeoutContext);return{server:F.server,session:$,response:A}}}j71.ListCollectionsCursor=Yx});var x71=O((k71)=>{Object.defineProperty(k71,"__esModule",{value:!0});k71.RunCommandCursor=void 0;var hG=_1(),S71=q9(),lt1=wb(),pt1=OK(),it1=l1(),nt1=q8();class _71 extends nt1.AbstractCursor{setComment($){return this.getMoreOptions.comment=$,this}setMaxTimeMS($){return this.getMoreOptions.maxAwaitTimeMS=$,this}setBatchSize($){return this.getMoreOptions.batchSize=$,this}clone(){throw new hG.MongoAPIError("Clone not supported, create a new cursor with db.runCursorCommand")}withReadConcern($){throw new hG.MongoAPIError("RunCommandCursor does not support readConcern it must be attached to the command being run")}addCursorFlag($,F){throw new hG.MongoAPIError("RunCommandCursor does not support cursor flags, they must be attached to the command being run")}maxTimeMS($){throw new hG.MongoAPIError("maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()")}batchSize($){throw new hG.MongoAPIError("batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()")}constructor($,F,A={}){super($.client,(0,it1.ns)($.namespace),A);this.getMoreOptions={},this.db=$,this.command=Object.freeze({...F})}async _initialize($){let F=new pt1.RunCursorCommandOperation(this.db.s.namespace,this.command,{...this.cursorOptions,session:$,readPreference:this.cursorOptions.readPreference}),A=await(0,S71.executeOperation)(this.client,F,this.timeoutContext);return{server:F.server,session:$,response:A}}async getMore(){if(!this.session)throw new hG.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let $=new lt1.GetMoreOperation(this.namespace,this.id,this.server,{...this.cursorOptions,session:this.session,...this.getMoreOptions});return await(0,S71.executeOperation)(this.client,$,this.timeoutContext)}}k71.RunCommandCursor=_71});var u71=O((v71)=>{Object.defineProperty(v71,"__esModule",{value:!0});v71.CreateCollectionOperation=void 0;v71.createCollections=Js1;var g71=dA(),rt1=T6(),at1=vG(),tt1=_1(),st1=$9(),ot1=l1(),et1=X4(),Zx=q9(),$s1=xK(),f71=o6(),Fs1=new Set(["w","wtimeout","timeoutMS","j","fsync","pkFactory","raw","readPreference","session","readConcern","writeConcern","raw","fieldsAsRaw","useBigInt64","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","serializeFunctions","ignoreUndefined","enableUtf8Validation"]),As1="Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.";class uK extends et1.CommandOperation{constructor($,F,A={}){super($,A);this.SERVER_COMMAND_RESPONSE_TYPE=rt1.MongoDBResponse,this.options=A,this.db=$,this.name=F}get commandName(){return"create"}buildCommandDocument($,F){let A=([J,X])=>X!=null&&typeof X!=="function"&&!Fs1.has(J);return{create:this.name,...Object.fromEntries(Object.entries(this.options).filter(A))}}handleOk($){return new at1.Collection(this.db,this.name,this.options)}}v71.CreateCollectionOperation=uK;async function Js1($,F,A){let J=st1.TimeoutContext.create({session:A.session,serverSelectionTimeoutMS:$.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:$.client.s.options.waitQueueTimeoutMS,timeoutMS:A.timeoutMS}),X=A.encryptedFields??$.client.s.options.autoEncryption?.encryptedFieldsMap?.[`${$.databaseName}.${F}`];if(X){class W extends uK{buildCommandDocument(G,z){if(!G.description.loadBalanced&&(0,ot1.maxWireVersion)(G)<g71.MIN_SUPPORTED_QE_WIRE_VERSION)throw new tt1.MongoCompatibilityError(`${As1} The minimum server version required is ${g71.MIN_SUPPORTED_QE_SERVER_VERSION}`);return super.buildCommandDocument(G,z)}}let Z=X.escCollection??`enxcol_.${F}.esc`,D=X.ecocCollection??`enxcol_.${F}.ecoc`;for(let G of[Z,D]){let z=new W($,G,{clusteredIndex:{key:{_id:1},unique:!0},session:A.session});await(0,Zx.executeOperation)($.client,z,J)}if(!A.encryptedFields)A={...A,encryptedFields:X}}let Y=await(0,Zx.executeOperation)($.client,new uK($,F,A),J);if(X){let W=$s1.CreateIndexesOperation.fromIndexSpecification($,F,{__safeContent__:1},{session:A.session});await(0,Zx.executeOperation)($.client,W,J)}return Y}(0,f71.defineAspects)(uK,[f71.Aspect.WRITE_OPERATION])});var p71=O((c71)=>{Object.defineProperty(c71,"__esModule",{value:!0});c71.DropDatabaseOperation=c71.DropCollectionOperation=void 0;c71.dropCollections=Gs1;var Ys1=iA(),m71=T6(),Ws1=q8(),Zs1=_1(),Ds1=$9(),d71=X4(),h71=q9(),MN=o6();class hK extends d71.CommandOperation{constructor($,F,A={}){super($,A);this.SERVER_COMMAND_RESPONSE_TYPE=m71.MongoDBResponse,this.options=A,this.name=F}get commandName(){return"drop"}buildCommandDocument($,F){return{drop:this.name}}handleOk($){return!0}handleError($){if(!($ instanceof Ys1.MongoServerError))throw $;if(Number($.code)!==Zs1.MONGODB_ERROR_CODES.NamespaceNotFound)throw $;return!1}}c71.DropCollectionOperation=hK;async function Gs1($,F,A){let J=Ds1.TimeoutContext.create({session:A.session,serverSelectionTimeoutMS:$.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:$.client.s.options.waitQueueTimeoutMS,timeoutMS:A.timeoutMS}),X=$.client.s.options.autoEncryption?.encryptedFieldsMap,Y=A.encryptedFields??X?.[`${$.databaseName}.${F}`];if(!Y&&X)Y=(await $.listCollections({name:F},{nameOnly:!1,session:A.session,timeoutContext:new Ws1.CursorTimeoutContext(J,Symbol())}).toArray())?.[0]?.options?.encryptedFields;if(Y){let W=Y.escCollection||`enxcol_.${F}.esc`,Z=Y.ecocCollection||`enxcol_.${F}.ecoc`;for(let D of[W,Z]){let G=new hK($,D,A);await(0,h71.executeOperation)($.client,G,J)}}return await(0,h71.executeOperation)($.client,new hK($,F,A),J)}class Dx extends d71.CommandOperation{constructor($,F){super($,F);this.SERVER_COMMAND_RESPONSE_TYPE=m71.MongoDBResponse,this.options=F}get commandName(){return"dropDatabase"}buildCommandDocument($,F){return{dropDatabase:1}}handleOk($){return!0}}c71.DropDatabaseOperation=Dx;(0,MN.defineAspects)(hK,[MN.Aspect.WRITE_OPERATION]);(0,MN.defineAspects)(Dx,[MN.Aspect.WRITE_OPERATION])});var s71=O((a71)=>{Object.defineProperty(a71,"__esModule",{value:!0});a71.ProfilingLevelOperation=void 0;var Us1=w0(),Qs1=T6(),i71=_1(),Ks1=X4();class n71 extends Qs1.MongoDBResponse{get was(){return this.get("was",Us1.BSONType.int,!0)}}class r71 extends Ks1.CommandOperation{constructor($,F){super($,F);this.SERVER_COMMAND_RESPONSE_TYPE=n71,this.options=F}get commandName(){return"profile"}buildCommandDocument($){return{profile:-1}}handleOk($){if($.ok===1){let F=$.was;if(F===0)return"off";if(F===1)return"slow_only";if(F===2)return"all";throw new i71.MongoUnexpectedServerResponseError(`Illegal profiling level value ${F}`)}else throw new i71.MongoUnexpectedServerResponseError("Error with profile command")}}a71.ProfilingLevelOperation=r71});var Gx=O((e71)=>{Object.defineProperty(e71,"__esModule",{value:!0});e71.SetProfilingLevelOperation=e71.ProfilingLevel=void 0;var Bs1=T6(),ws1=_1(),qs1=l1(),Ls1=X4(),Es1=new Set(["off","slow_only","all"]);e71.ProfilingLevel=Object.freeze({off:"off",slowOnly:"slow_only",all:"all"});class o71 extends Ls1.CommandOperation{constructor($,F,A){super($,A);switch(this.SERVER_COMMAND_RESPONSE_TYPE=Bs1.MongoDBResponse,this.options=A,F){case e71.ProfilingLevel.off:this.profile=0;break;case e71.ProfilingLevel.slowOnly:this.profile=1;break;case e71.ProfilingLevel.all:this.profile=2;break;default:this.profile=0;break}this.level=F}get commandName(){return"profile"}buildCommandDocument($){let F=this.level;if(!Es1.has(F))throw new ws1.MongoInvalidArgumentError(`Profiling level must be one of "${(0,qs1.enumToString)(e71.ProfilingLevel)}"`);return{profile:this.profile}}handleOk($){return this.level}}e71.SetProfilingLevelOperation=o71});var X51=O((A51)=>{Object.defineProperty(A51,"__esModule",{value:!0});A51.DbStatsOperation=void 0;var Vs1=T6(),Ns1=X4(),F51=o6();class zx extends Ns1.CommandOperation{constructor($,F){super($,F);this.SERVER_COMMAND_RESPONSE_TYPE=Vs1.MongoDBResponse,this.options=F}get commandName(){return"dbStats"}buildCommandDocument($){let F={dbStats:!0};if(this.options.scale!=null)F.scale=this.options.scale;return F}}A51.DbStatsOperation=zx;(0,F51.defineAspects)(zx,[F51.Aspect.READ_OPERATION])});var PN=O((H51)=>{Object.defineProperty(H51,"__esModule",{value:!0});H51.Db=void 0;var Cs1=Wb(),Y51=w0(),Ms1=uG(),W51=vG(),mG=O4(),Ps1=kK(),Rs1=Wx(),Is1=x71(),Z51=_1(),Ts1=u71(),D51=p71(),kX=q9(),js1=xK(),Os1=s71(),Ss1=Jb(),_s1=tb(),ks1=OK(),bs1=Gx(),xs1=X51(),gs1=Z$(),G51=e4(),L9=l1(),fs1=i8(),vs1=["writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","authSource","ignoreUndefined","readConcern","retryMiliSeconds","numberOfRetries","useBigInt64","promoteBuffers","promoteLongs","bsonRegExp","enableUtf8Validation","promoteValues","compression","retryWrites","timeoutMS"];class z51{static{this.SYSTEM_NAMESPACE_COLLECTION=mG.SYSTEM_NAMESPACE_COLLECTION}static{this.SYSTEM_INDEX_COLLECTION=mG.SYSTEM_INDEX_COLLECTION}static{this.SYSTEM_PROFILE_COLLECTION=mG.SYSTEM_PROFILE_COLLECTION}static{this.SYSTEM_USER_COLLECTION=mG.SYSTEM_USER_COLLECTION}static{this.SYSTEM_COMMAND_COLLECTION=mG.SYSTEM_COMMAND_COLLECTION}static{this.SYSTEM_JS_COLLECTION=mG.SYSTEM_JS_COLLECTION}constructor($,F,A){if(A=A??{},A=(0,L9.filterOptions)(A,vs1),typeof F==="string"&&F.includes("."))throw new Z51.MongoInvalidArgumentError("Database names cannot contain the character '.'");this.s={options:A,readPreference:G51.ReadPreference.fromOptions(A),bsonOptions:(0,Y51.resolveBSONOptions)(A,$),pkFactory:A?.pkFactory??L9.DEFAULT_PK_FACTORY,readConcern:gs1.ReadConcern.fromOptions(A),writeConcern:fs1.WriteConcern.fromOptions(A),namespace:new L9.MongoDBNamespace(F)},this.client=$}get databaseName(){return this.s.namespace.db}get options(){return this.s.options}get secondaryOk(){return this.s.readPreference?.preference!=="primary"||!1}get readConcern(){return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.client.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get namespace(){return this.s.namespace.toString()}get timeoutMS(){return this.s.options?.timeoutMS}async createCollection($,F){return F=(0,L9.resolveOptions)(this,F),await(0,Ts1.createCollections)(this,$,F)}async command($,F){return await(0,kX.executeOperation)(this.client,new ks1.RunCommandOperation(this.s.namespace,$,(0,L9.resolveOptions)(void 0,{...(0,Y51.resolveBSONOptions)(F),timeoutMS:F?.timeoutMS??this.timeoutMS,session:F?.session,readPreference:F?.readPreference,signal:F?.signal})))}aggregate($=[],F){return new Ps1.AggregationCursor(this.client,this.s.namespace,$,(0,L9.resolveOptions)(this,F))}admin(){return new Cs1.Admin(this)}collection($,F={}){if(typeof F==="function")throw new Z51.MongoInvalidArgumentError("The callback form of this helper has been removed.");return new W51.Collection(this,$,(0,L9.resolveOptions)(this,F))}async stats($){return await(0,kX.executeOperation)(this.client,new xs1.DbStatsOperation(this,(0,L9.resolveOptions)(this,$)))}listCollections($={},F={}){return new Rs1.ListCollectionsCursor(this,$,(0,L9.resolveOptions)(this,F))}async renameCollection($,F,A){return await(0,kX.executeOperation)(this.client,new _s1.RenameOperation(this.collection($),F,(0,L9.resolveOptions)(void 0,{...A,new_collection:!0,readPreference:G51.ReadPreference.primary})))}async dropCollection($,F){return F=(0,L9.resolveOptions)(this,F),await(0,D51.dropCollections)(this,$,F)}async dropDatabase($){return await(0,kX.executeOperation)(this.client,new D51.DropDatabaseOperation(this,(0,L9.resolveOptions)(this,$)))}async collections($){return $=(0,L9.resolveOptions)(this,$),(await this.listCollections({},{...$,nameOnly:!0}).toArray()).filter(({name:A})=>!A.includes("$")).map(({name:A})=>new W51.Collection(this,A,this.s.options))}async createIndex($,F,A){return(await(0,kX.executeOperation)(this.client,js1.CreateIndexesOperation.fromIndexSpecification(this,$,F,A)))[0]}async removeUser($,F){return await(0,kX.executeOperation)(this.client,new Ss1.RemoveUserOperation(this,$,(0,L9.resolveOptions)(this,F)))}async setProfilingLevel($,F){return await(0,kX.executeOperation)(this.client,new bs1.SetProfilingLevelOperation(this,$,(0,L9.resolveOptions)(this,F)))}async profilingLevel($){return await(0,kX.executeOperation)(this.client,new Os1.ProfilingLevelOperation(this,(0,L9.resolveOptions)(this,$)))}async indexInformation($,F){return await this.collection($).indexInformation((0,L9.resolveOptions)(this,F))}watch($=[],F={}){if(!Array.isArray($))F=$,$=[];return new Ms1.ChangeStream(this,$,(0,L9.resolveOptions)(this,F))}runCursorCommand($,F){return new Is1.RunCommandCursor(this,$,F)}}H51.Db=z51});var Hx=O((Cn0,V51)=>{var RN=Object.prototype.hasOwnProperty,E51=Object.prototype.toString,Q51=Object.defineProperty,K51=Object.getOwnPropertyDescriptor,B51=function(F){if(typeof Array.isArray==="function")return Array.isArray(F);return E51.call(F)==="[object Array]"},w51=function(F){if(!F||E51.call(F)!=="[object Object]")return!1;var A=RN.call(F,"constructor"),J=F.constructor&&F.constructor.prototype&&RN.call(F.constructor.prototype,"isPrototypeOf");if(F.constructor&&!A&&!J)return!1;var X;for(X in F);return typeof X>"u"||RN.call(F,X)},q51=function(F,A){if(Q51&&A.name==="__proto__")Q51(F,A.name,{enumerable:!0,configurable:!0,value:A.newValue,writable:!0});else F[A.name]=A.newValue},L51=function(F,A){if(A==="__proto__"){if(!RN.call(F,A))return;else if(K51)return K51(F,A).value}return F[A]};V51.exports=function $(){var F,A,J,X,Y,W,Z=arguments[0],D=1,G=arguments.length,z=!1;if(typeof Z==="boolean")z=Z,Z=arguments[1]||{},D=2;if(Z==null||typeof Z!=="object"&&typeof Z!=="function")Z={};for(;D<G;++D)if(F=arguments[D],F!=null){for(A in F)if(J=L51(Z,A),X=L51(F,A),Z!==X){if(z&&X&&(w51(X)||(Y=B51(X)))){if(Y)Y=!1,W=J&&B51(J)?J:[];else W=J&&w51(J)?J:{};q51(Z,{name:A,newValue:$(z,W,X)})}else if(typeof X<"u")q51(Z,{name:A,newValue:X})}}return Z}});var N51=O((Mn0,ys1)=>{ys1.exports={name:"gaxios",version:"7.1.3",description:"A simple common HTTP client specifically for Google APIs and services.",main:"build/cjs/src/index.js",types:"build/cjs/src/index.d.ts",files:["build/"],exports:{".":{import:{types:"./build/esm/src/index.d.ts",default:"./build/esm/src/index.js"},require:{types:"./build/cjs/src/index.d.ts",default:"./build/cjs/src/index.js"}}},scripts:{lint:"gts check --no-inline-config",test:"c8 mocha build/esm/test","presystem-test":"npm run compile","system-test":"mocha build/esm/system-test --timeout 80000",compile:"tsc -b ./tsconfig.json ./tsconfig.cjs.json && node utils/enable-esm.mjs",fix:"gts fix",prepare:"npm run compile",pretest:"npm run compile",webpack:"webpack","prebrowser-test":"npm run compile","browser-test":"node build/browser-test/browser-test-runner.js",docs:"jsdoc -c .jsdoc.js","docs-test":"linkinator docs","predocs-test":"npm run docs","samples-test":"cd samples/ && npm link ../ && npm test && cd ../",prelint:"cd samples; npm link ../; npm install",clean:"gts clean"},repository:{type:"git",directory:"packages/gaxios",url:"https://github.com/googleapis/google-cloud-node-core.git"},keywords:["google"],engines:{node:">=18"},author:"Google, LLC",license:"Apache-2.0",devDependencies:{"@babel/plugin-proposal-private-methods":"^7.18.6","@types/cors":"^2.8.6","@types/express":"^5.0.0","@types/extend":"^3.0.1","@types/mocha":"^10.0.10","@types/multiparty":"4.2.1","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","@types/tmp":"0.2.6",assert:"^2.0.0",browserify:"^17.0.0",c8:"^10.0.0",cors:"^2.8.5",express:"^5.0.0",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",linkinator:"^6.1.2",mocha:"^11.1.0",multiparty:"^4.2.1",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.0-beta.13","null-loader":"^4.0.0","pack-n-play":"^4.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","stream-browserify":"^3.0.0",tmp:"0.2.5","ts-loader":"^9.5.2",typescript:"^5.8.3",webpack:"^5.35.0","webpack-cli":"^6.0.1"},dependencies:{extend:"^3.0.2","https-proxy-agent":"^7.0.1","node-fetch":"^3.3.2",rimraf:"^5.0.1"},homepage:"https://github.com/googleapis/google-cloud-node-core/tree/main/packages/gaxios"}});var M51=O((Pn0,C51)=>{var us1=N51();C51.exports={pkg:us1}});var Kx=O((w5)=>{var R51=w5&&w5.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(w5,"__esModule",{value:!0});w5.GaxiosError=w5.GAXIOS_ERROR_SYMBOL=void 0;w5.defaultErrorRedactor=I51;var P51=R51(Hx()),hs1=R51(M51()),Ux=hs1.default.pkg;w5.GAXIOS_ERROR_SYMBOL=Symbol.for(`${Ux.name}-gaxios-error`);class Qx extends Error{config;response;code;status;error;[w5.GAXIOS_ERROR_SYMBOL]=Ux.version;static[Symbol.hasInstance]($){if($&&typeof $==="object"&&w5.GAXIOS_ERROR_SYMBOL in $&&$[w5.GAXIOS_ERROR_SYMBOL]===Ux.version)return!0;return Function.prototype[Symbol.hasInstance].call(Qx,$)}constructor($,F,A,J){super($,{cause:J});if(this.config=F,this.response=A,this.error=J instanceof Error?J:void 0,this.config=(0,P51.default)(!0,{},F),this.response)this.response.config=(0,P51.default)(!0,{},this.response.config);if(this.response){try{this.response.data=ms1(this.config.responseType,this.response?.bodyUsed?this.response?.data:void 0)}catch{}this.status=this.response.status}if(J instanceof DOMException)this.code=J.name;else if(J&&typeof J==="object"&&"code"in J&&(typeof J.code==="string"||typeof J.code==="number"))this.code=J.code}static extractAPIErrorFromResponse($,F="The request failed"){let A=F;if(typeof $.data==="string")A=$.data;if($.data&&typeof $.data==="object"&&"error"in $.data&&$.data.error&&!$.ok){if(typeof $.data.error==="string")return{message:$.data.error,code:$.status,status:$.statusText};if(typeof $.data.error==="object"){A="message"in $.data.error&&typeof $.data.error.message==="string"?$.data.error.message:A;let J="status"in $.data.error&&typeof $.data.error.status==="string"?$.data.error.status:$.statusText,X="code"in $.data.error&&typeof $.data.error.code==="number"?$.data.error.code:$.status;if("errors"in $.data.error&&Array.isArray($.data.error.errors)){let Y=[];for(let W of $.data.error.errors)if(typeof W==="object"&&"message"in W&&typeof W.message==="string")Y.push(W.message);return Object.assign({message:Y.join(`
`)||A,code:X,status:J},$.data.error)}return Object.assign({message:A,code:X,status:J},$.data.error)}}return{message:A,code:$.status,status:$.statusText}}}w5.GaxiosError=Qx;function ms1($,F){switch($){case"stream":return F;case"json":return JSON.parse(JSON.stringify(F));case"arraybuffer":return JSON.parse(Buffer.from(F).toString("utf8"));case"blob":return JSON.parse(F.text());default:return F}}function I51($){function A(Y){if(!Y)return;Y.forEach((W,Z)=>{if(/^authentication$/i.test(Z)||/^authorization$/i.test(Z)||/secret/i.test(Z))Y.set(Z,"<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.")})}function J(Y,W){if(typeof Y==="object"&&Y!==null&&typeof Y[W]==="string"){let Z=Y[W];if(/grant_type=/i.test(Z)||/assertion=/i.test(Z)||/secret/i.test(Z))Y[W]="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>."}}function X(Y){if(!Y||typeof Y!=="object")return;else if(Y instanceof FormData||Y instanceof URLSearchParams||"forEach"in Y&&"set"in Y)Y.forEach((W,Z)=>{if(["grant_type","assertion"].includes(Z)||/secret/.test(Z))Y.set(Z,"<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.")});else{if("grant_type"in Y)Y.grant_type="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";if("assertion"in Y)Y.assertion="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";if("client_secret"in Y)Y.client_secret="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>."}}if($.config){if(A($.config.headers),J($.config,"data"),X($.config.data),J($.config,"body"),X($.config.body),$.config.url.searchParams.has("token"))$.config.url.searchParams.set("token","<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.");if($.config.url.searchParams.has("client_secret"))$.config.url.searchParams.set("client_secret","<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.")}if($.response){if(I51({config:$.response.config}),A($.response.headers),$.response.bodyUsed)J($.response,"data"),X($.response.data)}return $}});var O51=O((j51)=>{Object.defineProperty(j51,"__esModule",{value:!0});j51.getRetryConfig=ds1;async function ds1($){let F=T51($);if(!$||!$.config||!F&&!$.config.retry)return{shouldRetry:!1};F=F||{},F.currentRetryAttempt=F.currentRetryAttempt||0,F.retry=F.retry===void 0||F.retry===null?3:F.retry,F.httpMethodsToRetry=F.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],F.noResponseRetries=F.noResponseRetries===void 0||F.noResponseRetries===null?2:F.noResponseRetries,F.retryDelayMultiplier=F.retryDelayMultiplier?F.retryDelayMultiplier:2,F.timeOfFirstRequest=F.timeOfFirstRequest?F.timeOfFirstRequest:Date.now(),F.totalTimeout=F.totalTimeout?F.totalTimeout:Number.MAX_SAFE_INTEGER,F.maxRetryDelay=F.maxRetryDelay?F.maxRetryDelay:Number.MAX_SAFE_INTEGER;let A=[[100,199],[408,408],[429,429],[500,599]];if(F.statusCodesToRetry=F.statusCodesToRetry||A,$.config.retryConfig=F,!await(F.shouldRetry||cs1)($))return{shouldRetry:!1,config:$.config};let X=ls1(F);$.config.retryConfig.currentRetryAttempt+=1;let Y=F.retryBackoff?F.retryBackoff($,X):new Promise((W)=>{setTimeout(W,X)});if(F.onRetryAttempt)await F.onRetryAttempt($);return await Y,{shouldRetry:!0,config:$.config}}function cs1($){let F=T51($);if($.config.signal?.aborted&&$.code!=="TimeoutError"||$.code==="AbortError")return!1;if(!F||F.retry===0)return!1;if(!$.response&&(F.currentRetryAttempt||0)>=F.noResponseRetries)return!1;if(!F.httpMethodsToRetry||!F.httpMethodsToRetry.includes($.config.method?.toUpperCase()||"GET"))return!1;if($.response&&$.response.status){let A=!1;for(let[J,X]of F.statusCodesToRetry){let Y=$.response.status;if(Y>=J&&Y<=X){A=!0;break}}if(!A)return!1}if(F.currentRetryAttempt=F.currentRetryAttempt||0,F.currentRetryAttempt>=F.retry)return!1;return!0}function T51($){if($&&$.config&&$.config.retryConfig)return $.config.retryConfig;return}function ls1($){let A=($.currentRetryAttempt?0:$.retryDelay??100)+(Math.pow($.retryDelayMultiplier,$.currentRetryAttempt)-1)/2*1000,J=$.totalTimeout-(Date.now()-$.timeOfFirstRequest);return Math.min(A,J,$.maxRetryDelay)}});var Bx=O((_51)=>{Object.defineProperty(_51,"__esModule",{value:!0});_51.GaxiosInterceptorManager=void 0;class S51 extends Set{}_51.GaxiosInterceptorManager=S51});var wx=O((jn0,b51)=>{var dG=1000,cG=dG*60,lG=cG*60,nW=lG*24,is1=nW*7,ns1=nW*365.25;b51.exports=function($,F){F=F||{};var A=typeof $;if(A==="string"&&$.length>0)return rs1($);else if(A==="number"&&isFinite($))return F.long?ts1($):as1($);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))};function rs1($){if($=String($),$.length>100)return;var F=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec($);if(!F)return;var A=parseFloat(F[1]),J=(F[2]||"ms").toLowerCase();switch(J){case"years":case"year":case"yrs":case"yr":case"y":return A*ns1;case"weeks":case"week":case"w":return A*is1;case"days":case"day":case"d":return A*nW;case"hours":case"hour":case"hrs":case"hr":case"h":return A*lG;case"minutes":case"minute":case"mins":case"min":case"m":return A*cG;case"seconds":case"second":case"secs":case"sec":case"s":return A*dG;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return A;default:return}}function as1($){var F=Math.abs($);if(F>=nW)return Math.round($/nW)+"d";if(F>=lG)return Math.round($/lG)+"h";if(F>=cG)return Math.round($/cG)+"m";if(F>=dG)return Math.round($/dG)+"s";return $+"ms"}function ts1($){var F=Math.abs($);if(F>=nW)return IN($,F,nW,"day");if(F>=lG)return IN($,F,lG,"hour");if(F>=cG)return IN($,F,cG,"minute");if(F>=dG)return IN($,F,dG,"second");return $+" ms"}function IN($,F,A,J){var X=F>=A*1.5;return Math.round($/A)+" "+J+(X?"s":"")}});var qx=O((On0,x51)=>{function ss1($){A.debug=A,A.default=A,A.coerce=D,A.disable=W,A.enable=X,A.enabled=Z,A.humanize=wx(),A.destroy=G,Object.keys($).forEach((z)=>{A[z]=$[z]}),A.names=[],A.skips=[],A.formatters={};function F(z){let H=0;for(let U=0;U<z.length;U++)H=(H<<5)-H+z.charCodeAt(U),H|=0;return A.colors[Math.abs(H)%A.colors.length]}A.selectColor=F;function A(z){let H,U=null,Q,B;function q(...L){if(!q.enabled)return;let E=q,V=Number(new Date),R=V-(H||V);if(E.diff=R,E.prev=H,E.curr=V,H=V,L[0]=A.coerce(L[0]),typeof L[0]!=="string")L.unshift("%O");let N=0;L[0]=L[0].replace(/%([a-zA-Z%])/g,(C,M)=>{if(C==="%%")return"%";N++;let I=A.formatters[M];if(typeof I==="function"){let T=L[N];C=I.call(E,T),L.splice(N,1),N--}return C}),A.formatArgs.call(E,L),(E.log||A.log).apply(E,L)}if(q.namespace=z,q.useColors=A.useColors(),q.color=A.selectColor(z),q.extend=J,q.destroy=A.destroy,Object.defineProperty(q,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(U!==null)return U;if(Q!==A.namespaces)Q=A.namespaces,B=A.enabled(z);return B},set:(L)=>{U=L}}),typeof A.init==="function")A.init(q);return q}function J(z,H){let U=A(this.namespace+(typeof H>"u"?":":H)+z);return U.log=this.log,U}function X(z){A.save(z),A.namespaces=z,A.names=[],A.skips=[];let H=(typeof z==="string"?z:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let U of H)if(U[0]==="-")A.skips.push(U.slice(1));else A.names.push(U)}function Y(z,H){let U=0,Q=0,B=-1,q=0;while(U<z.length)if(Q<H.length&&(H[Q]===z[U]||H[Q]==="*"))if(H[Q]==="*")B=Q,q=U,Q++;else U++,Q++;else if(B!==-1)Q=B+1,q++,U=q;else return!1;while(Q<H.length&&H[Q]==="*")Q++;return Q===H.length}function W(){let z=[...A.names,...A.skips.map((H)=>"-"+H)].join(",");return A.enable(""),z}function Z(z){for(let H of A.skips)if(Y(z,H))return!1;for(let H of A.names)if(Y(z,H))return!0;return!1}function D(z){if(z instanceof Error)return z.stack||z.message;return z}function G(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return A.enable(A.load()),A}x51.exports=ss1});var f51=O((g51,TN)=>{g51.formatArgs=es1;g51.save=$o1;g51.load=Fo1;g51.useColors=os1;g51.storage=Ao1();g51.destroy=(()=>{let $=!1;return()=>{if(!$)$=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();g51.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function os1(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let $;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&($=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt($[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function es1($){if($[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+$[0]+(this.useColors?"%c ":" ")+"+"+TN.exports.humanize(this.diff),!this.useColors)return;let F="color: "+this.color;$.splice(1,0,F,"color: inherit");let A=0,J=0;$[0].replace(/%[a-zA-Z%]/g,(X)=>{if(X==="%%")return;if(A++,X==="%c")J=A}),$.splice(J,0,F)}g51.log=console.debug||console.log||(()=>{});function $o1($){try{if($)g51.storage.setItem("debug",$);else g51.storage.removeItem("debug")}catch(F){}}function Fo1(){let $;try{$=g51.storage.getItem("debug")||g51.storage.getItem("DEBUG")}catch(F){}if(!$&&typeof process<"u"&&"env"in process)$=process.env.DEBUG;return $}function Ao1(){try{return localStorage}catch($){}}TN.exports=qx()(g51);var{formatters:Jo1}=TN.exports;Jo1.j=function($){try{return JSON.stringify($)}catch(F){return"[UnexpectedJSONParseError]: "+F.message}}});var h51=O((y51,ON)=>{var Ho1=Z1("tty"),jN=Z1("util");y51.init=Lo1;y51.log=Bo1;y51.formatArgs=Qo1;y51.save=wo1;y51.load=qo1;y51.useColors=Uo1;y51.destroy=jN.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");y51.colors=[6,2,3,4,5,1];try{let $=(()=>{throw new Error("Cannot require module "+"supports-color");})();if($&&($.stderr||$).level>=2)y51.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch($){}y51.inspectOpts=Object.keys(process.env).filter(($)=>{return/^debug_/i.test($)}).reduce(($,F)=>{let A=F.substring(6).toLowerCase().replace(/_([a-z])/g,(X,Y)=>{return Y.toUpperCase()}),J=process.env[F];if(/^(yes|on|true|enabled)$/i.test(J))J=!0;else if(/^(no|off|false|disabled)$/i.test(J))J=!1;else if(J==="null")J=null;else J=Number(J);return $[A]=J,$},{});function Uo1(){return"colors"in y51.inspectOpts?Boolean(y51.inspectOpts.colors):Ho1.isatty(process.stderr.fd)}function Qo1($){let{namespace:F,useColors:A}=this;if(A){let J=this.color,X="\x1B[3"+(J<8?J:"8;5;"+J),Y=`  ${X};1m${F} \x1B[0m`;$[0]=Y+$[0].split(`
`).join(`
`+Y),$.push(X+"m+"+ON.exports.humanize(this.diff)+"\x1B[0m")}else $[0]=Ko1()+F+" "+$[0]}function Ko1(){if(y51.inspectOpts.hideDate)return"";return new Date().toISOString()+" "}function Bo1(...$){return process.stderr.write(jN.formatWithOptions(y51.inspectOpts,...$)+`
`)}function wo1($){if($)process.env.DEBUG=$;else delete process.env.DEBUG}function qo1(){return process.env.DEBUG}function Lo1($){$.inspectOpts={};let F=Object.keys(y51.inspectOpts);for(let A=0;A<F.length;A++)$.inspectOpts[F[A]]=y51.inspectOpts[F[A]]}ON.exports=qx()(y51);var{formatters:v51}=ON.exports;v51.o=function($){return this.inspectOpts.colors=this.useColors,jN.inspect($,this.inspectOpts).split(`
`).map((F)=>F.trim()).join(" ")};v51.O=function($){return this.inspectOpts.colors=this.useColors,jN.inspect($,this.inspectOpts)}});var SN=O((kn0,Lx)=>{if(typeof process>"u"||process.type==="renderer"||!1||process.__nwjs)Lx.exports=f51();else Lx.exports=h51()});var c51=O((P3)=>{var Io1=P3&&P3.__createBinding||(Object.create?function($,F,A,J){if(J===void 0)J=A;var X=Object.getOwnPropertyDescriptor(F,A);if(!X||("get"in X?!F.__esModule:X.writable||X.configurable))X={enumerable:!0,get:function(){return F[A]}};Object.defineProperty($,J,X)}:function($,F,A,J){if(J===void 0)J=A;$[J]=F[A]}),To1=P3&&P3.__setModuleDefault||(Object.create?function($,F){Object.defineProperty($,"default",{enumerable:!0,value:F})}:function($,F){$.default=F}),m51=P3&&P3.__importStar||function($){if($&&$.__esModule)return $;var F={};if($!=null){for(var A in $)if(A!=="default"&&Object.prototype.hasOwnProperty.call($,A))Io1(F,$,A)}return To1(F,$),F};Object.defineProperty(P3,"__esModule",{value:!0});P3.req=P3.json=P3.toBuffer=void 0;var jo1=m51(Z1("http")),Oo1=m51(Z1("https"));async function d51($){let F=0,A=[];for await(let J of $)F+=J.length,A.push(J);return Buffer.concat(A,F)}P3.toBuffer=d51;async function So1($){let A=(await d51($)).toString("utf8");try{return JSON.parse(A)}catch(J){let X=J;throw X.message+=` (input: ${A})`,X}}P3.json=So1;function _o1($,F={}){let J=((typeof $==="string"?$:$.href).startsWith("https:")?Oo1:jo1).request($,F),X=new Promise((Y,W)=>{J.once("response",Y).once("error",W).end()});return J.then=X.then.bind(X),J}P3.req=_o1});var r51=O((N7)=>{var p51=N7&&N7.__createBinding||(Object.create?function($,F,A,J){if(J===void 0)J=A;var X=Object.getOwnPropertyDescriptor(F,A);if(!X||("get"in X?!F.__esModule:X.writable||X.configurable))X={enumerable:!0,get:function(){return F[A]}};Object.defineProperty($,J,X)}:function($,F,A,J){if(J===void 0)J=A;$[J]=F[A]}),ko1=N7&&N7.__setModuleDefault||(Object.create?function($,F){Object.defineProperty($,"default",{enumerable:!0,value:F})}:function($,F){$.default=F}),i51=N7&&N7.__importStar||function($){if($&&$.__esModule)return $;var F={};if($!=null){for(var A in $)if(A!=="default"&&Object.prototype.hasOwnProperty.call($,A))p51(F,$,A)}return ko1(F,$),F},bo1=N7&&N7.__exportStar||function($,F){for(var A in $)if(A!=="default"&&!Object.prototype.hasOwnProperty.call(F,A))p51(F,$,A)};Object.defineProperty(N7,"__esModule",{value:!0});N7.Agent=void 0;var xo1=i51(Z1("net")),l51=i51(Z1("http")),go1=Z1("https");bo1(c51(),N7);var gF=Symbol("AgentBaseInternalState");class n51 extends l51.Agent{constructor($){super($);this[gF]={}}isSecureEndpoint($){if($){if(typeof $.secureEndpoint==="boolean")return $.secureEndpoint;if(typeof $.protocol==="string")return $.protocol==="https:"}let{stack:F}=Error();if(typeof F!=="string")return!1;return F.split(`
`).some((A)=>A.indexOf("(https.js:")!==-1||A.indexOf("node:https:")!==-1)}incrementSockets($){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;if(!this.sockets[$])this.sockets[$]=[];let F=new xo1.Socket({writable:!1});return this.sockets[$].push(F),this.totalSocketCount++,F}decrementSockets($,F){if(!this.sockets[$]||F===null)return;let A=this.sockets[$],J=A.indexOf(F);if(J!==-1){if(A.splice(J,1),this.totalSocketCount--,A.length===0)delete this.sockets[$]}}getName($){if(this.isSecureEndpoint($))return go1.Agent.prototype.getName.call(this,$);return super.getName($)}createSocket($,F,A){let J={...F,secureEndpoint:this.isSecureEndpoint(F)},X=this.getName(J),Y=this.incrementSockets(X);Promise.resolve().then(()=>this.connect($,J)).then((W)=>{if(this.decrementSockets(X,Y),W instanceof l51.Agent)try{return W.addRequest($,J)}catch(Z){return A(Z)}this[gF].currentSocket=W,super.createSocket($,F,A)},(W)=>{this.decrementSockets(X,Y),A(W)})}createConnection(){let $=this[gF].currentSocket;if(this[gF].currentSocket=void 0,!$)throw Error("No socket was returned in the `connect()` function");return $}get defaultPort(){return this[gF].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort($){if(this[gF])this[gF].defaultPort=$}get protocol(){return this[gF].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol($){if(this[gF])this[gF].protocol=$}}N7.Agent=n51});var a51=O((pG)=>{var fo1=pG&&pG.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(pG,"__esModule",{value:!0});pG.parseProxyResponse=void 0;var vo1=fo1(SN()),_N=(0,vo1.default)("https-proxy-agent:parse-proxy-response");function yo1($){return new Promise((F,A)=>{let J=0,X=[];function Y(){let z=$.read();if(z)G(z);else $.once("readable",Y)}function W(){$.removeListener("end",Z),$.removeListener("error",D),$.removeListener("readable",Y)}function Z(){W(),_N("onend"),A(Error("Proxy connection ended before receiving CONNECT response"))}function D(z){W(),_N("onerror %o",z),A(z)}function G(z){X.push(z),J+=z.length;let H=Buffer.concat(X,J),U=H.indexOf(`\r
\r
`);if(U===-1){_N("have not received end of HTTP headers yet..."),Y();return}let Q=H.slice(0,U).toString("ascii").split(`\r
`),B=Q.shift();if(!B)return $.destroy(),A(Error("No header received from proxy CONNECT response"));let q=B.split(" "),L=+q[1],E=q.slice(2).join(" "),V={};for(let R of Q){if(!R)continue;let N=R.indexOf(":");if(N===-1)return $.destroy(),A(Error(`Invalid header from proxy CONNECT response: "${R}"`));let S=R.slice(0,N).toLowerCase(),C=R.slice(N+1).trimStart(),M=V[S];if(typeof M==="string")V[S]=[M,C];else if(Array.isArray(M))M.push(C);else V[S]=C}_N("got proxy server response: %o %o",B,V),W(),F({connect:{statusCode:L,statusText:E,headers:V},buffered:H})}$.on("error",D),$.on("end",Z),Y()})}pG.parseProxyResponse=yo1});var F$1=O((q5)=>{var uo1=q5&&q5.__createBinding||(Object.create?function($,F,A,J){if(J===void 0)J=A;var X=Object.getOwnPropertyDescriptor(F,A);if(!X||("get"in X?!F.__esModule:X.writable||X.configurable))X={enumerable:!0,get:function(){return F[A]}};Object.defineProperty($,J,X)}:function($,F,A,J){if(J===void 0)J=A;$[J]=F[A]}),ho1=q5&&q5.__setModuleDefault||(Object.create?function($,F){Object.defineProperty($,"default",{enumerable:!0,value:F})}:function($,F){$.default=F}),e51=q5&&q5.__importStar||function($){if($&&$.__esModule)return $;var F={};if($!=null){for(var A in $)if(A!=="default"&&Object.prototype.hasOwnProperty.call($,A))uo1(F,$,A)}return ho1(F,$),F},$$1=q5&&q5.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(q5,"__esModule",{value:!0});q5.HttpsProxyAgent=void 0;var kN=e51(Z1("net")),t51=e51(Z1("tls")),mo1=$$1(Z1("assert")),do1=$$1(SN()),co1=r51(),lo1=Z1("url"),po1=a51(),cK=(0,do1.default)("https-proxy-agent"),s51=($)=>{if($.servername===void 0&&$.host&&!kN.isIP($.host))return{...$,servername:$.host};return $};class Ex extends co1.Agent{constructor($,F){super(F);this.options={path:void 0},this.proxy=typeof $==="string"?new lo1.URL($):$,this.proxyHeaders=F?.headers??{},cK("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let A=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),J=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...F?o51(F,"headers"):null,host:A,port:J}}async connect($,F){let{proxy:A}=this;if(!F.host)throw TypeError('No "host" provided');let J;if(A.protocol==="https:")cK("Creating `tls.Socket`: %o",this.connectOpts),J=t51.connect(s51(this.connectOpts));else cK("Creating `net.Socket`: %o",this.connectOpts),J=kN.connect(this.connectOpts);let X=typeof this.proxyHeaders==="function"?this.proxyHeaders():{...this.proxyHeaders},Y=kN.isIPv6(F.host)?`[${F.host}]`:F.host,W=`CONNECT ${Y}:${F.port} HTTP/1.1\r
`;if(A.username||A.password){let H=`${decodeURIComponent(A.username)}:${decodeURIComponent(A.password)}`;X["Proxy-Authorization"]=`Basic ${Buffer.from(H).toString("base64")}`}if(X.Host=`${Y}:${F.port}`,!X["Proxy-Connection"])X["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close";for(let H of Object.keys(X))W+=`${H}: ${X[H]}\r
`;let Z=(0,po1.parseProxyResponse)(J);J.write(`${W}\r
`);let{connect:D,buffered:G}=await Z;if($.emit("proxyConnect",D),this.emit("proxyConnect",D,$),D.statusCode===200){if($.once("socket",io1),F.secureEndpoint)return cK("Upgrading socket connection to TLS"),t51.connect({...o51(s51(F),"host","path","port"),socket:J});return J}J.destroy();let z=new kN.Socket({writable:!1});return z.readable=!0,$.once("socket",(H)=>{cK("Replaying proxy buffer for failed request"),(0,mo1.default)(H.listenerCount("data")>0),H.push(G),H.push(null)}),z}}Ex.protocols=["http","https"];q5.HttpsProxyAgent=Ex;function io1($){$.resume()}function o51($,...F){let A={},J;for(J in $)if(!F.includes(J))A[J]=$[J];return A}});var X$1=O((nG)=>{var no1=nG&&nG.__importDefault||function($){return $&&$.__esModule?$:{default:$}},iG;Object.defineProperty(nG,"__esModule",{value:!0});nG.Gaxios=void 0;var ro1=no1(Hx()),ao1=Z1("https"),aW=Kx(),to1=O51(),A$1=Z1("stream"),J$1=Bx(),so1=async()=>globalThis.crypto?.randomUUID()||(await import("crypto")).randomUUID(),oo1=204;class Vx{agentCache=new Map;defaults;interceptors;constructor($){this.defaults=$||{},this.interceptors={request:new J$1.GaxiosInterceptorManager,response:new J$1.GaxiosInterceptorManager}}fetch(...$){let F=$[0],A=$[1],J=void 0,X=new Headers;if(typeof F==="string")J=new URL(F);else if(F instanceof URL)J=F;else if(F&&F.url)J=new URL(F.url);if(F&&typeof F==="object"&&"headers"in F)iG.mergeHeaders(X,F.headers);if(A)iG.mergeHeaders(X,new Headers(A.headers));if(typeof F==="object"&&!(F instanceof URL))return this.request({...A,...F,headers:X,url:J});else return this.request({...A,headers:X,url:J})}async request($={}){let F=await this.#J($);return F=await this.#F(F),this.#A(this._request(F))}async _defaultAdapter($){let F=$.fetchImplementation||this.defaults.fetchImplementation||await iG.#D(),A={...$};delete A.data;let J=await F($.url,A),X=await this.getResponseData($,J);if(!Object.getOwnPropertyDescriptor(J,"data")?.configurable)Object.defineProperties(J,{data:{configurable:!0,writable:!0,enumerable:!0,value:X}});return Object.assign(J,{config:$,data:X})}async _request($){try{let F;if($.adapter)F=await $.adapter($,this._defaultAdapter.bind(this));else F=await this._defaultAdapter($);if(!$.validateStatus(F.status)){if($.responseType==="stream"){let J=[];for await(let X of F.data)J.push(X);F.data=J.toString()}let A=aW.GaxiosError.extractAPIErrorFromResponse(F,`Request failed with status code ${F.status}`);throw new aW.GaxiosError(A?.message,$,F,A)}return F}catch(F){let A;if(F instanceof aW.GaxiosError)A=F;else if(F instanceof Error)A=new aW.GaxiosError(F.message,$,void 0,F);else A=new aW.GaxiosError("Unexpected Gaxios Error",$,void 0,F);let{shouldRetry:J,config:X}=await(0,to1.getRetryConfig)(A);if(J&&X)return A.config.retryConfig.currentRetryAttempt=X.retryConfig.currentRetryAttempt,$.retryConfig=A.config?.retryConfig,this.#X($),this._request($);if($.errorRedactor)$.errorRedactor(A);throw A}}async getResponseData($,F){if(F.status===oo1)return"";if($.maxContentLength&&F.headers.has("content-length")&&$.maxContentLength<Number.parseInt(F.headers?.get("content-length")||""))throw new aW.GaxiosError("Response's `Content-Length` is over the limit.",$,Object.assign(F,{config:$}));switch($.responseType){case"stream":return F.body;case"json":{let A=await F.text();try{return JSON.parse(A)}catch{return A}}case"arraybuffer":return F.arrayBuffer();case"blob":return F.blob();case"text":return F.text();default:return this.getResponseDataFromContentType(F)}}#$($,F=[]){let A=new URL($),J=[...F],X=(process.env.NO_PROXY??process.env.no_proxy)?.split(",")||[];for(let Y of X)J.push(Y.trim());for(let Y of J)if(Y instanceof RegExp){if(Y.test(A.toString()))return!1}else if(Y instanceof URL){if(Y.origin===A.origin)return!1}else if(Y.startsWith("*.")||Y.startsWith(".")){let W=Y.replace(/^\*\./,".");if(A.hostname.endsWith(W))return!1}else if(Y===A.origin||Y===A.hostname||Y===A.href)return!1;return!0}async#F($){let F=Promise.resolve($);for(let A of this.interceptors.request.values())if(A)F=F.then(A.resolved,A.rejected);return F}async#A($){let F=Promise.resolve($);for(let A of this.interceptors.response.values())if(A)F=F.then(A.resolved,A.rejected);return F}async#J($){let F=new Headers(this.defaults.headers);iG.mergeHeaders(F,$.headers);let A=(0,ro1.default)(!0,{},this.defaults,$);if(!A.url)throw Error("URL is required.");if(A.baseURL)A.url=new URL(A.url,A.baseURL);if(A.url=new URL(A.url),A.params)if(A.paramsSerializer){let Y=A.paramsSerializer(A.params);if(Y.startsWith("?"))Y=Y.slice(1);let W=A.url.toString().includes("?")?"&":"?";A.url=A.url+W+Y}else{let Y=A.url instanceof URL?A.url:new URL(A.url);for(let[W,Z]of new URLSearchParams(A.params))Y.searchParams.append(W,Z);A.url=Y}if(typeof $.maxContentLength==="number")A.size=$.maxContentLength;if(typeof $.maxRedirects==="number")A.follow=$.maxRedirects;let J=typeof A.data==="string"||A.data instanceof ArrayBuffer||A.data instanceof Blob||globalThis.File&&A.data instanceof File||A.data instanceof FormData||A.data instanceof A$1.Readable||A.data instanceof ReadableStream||A.data instanceof String||A.data instanceof URLSearchParams||ArrayBuffer.isView(A.data)||["Blob","File","FormData"].includes(A.data?.constructor?.name||"");if(A.multipart?.length){let Y=await so1();F.set("content-type",`multipart/related; boundary=${Y}`),A.body=A$1.Readable.from(this.getMultipartRequest(A.multipart,Y))}else if(J)A.body=A.data;else if(typeof A.data==="object")if(F.get("Content-Type")==="application/x-www-form-urlencoded")A.body=A.paramsSerializer?A.paramsSerializer(A.data):new URLSearchParams(A.data);else{if(!F.has("content-type"))F.set("content-type","application/json");A.body=JSON.stringify(A.data)}else if(A.data)A.body=A.data;if(A.validateStatus=A.validateStatus||this.validateStatus,A.responseType=A.responseType||"unknown",!F.has("accept")&&A.responseType==="json")F.set("accept","application/json");let X=A.proxy||process?.env?.HTTPS_PROXY||process?.env?.https_proxy||process?.env?.HTTP_PROXY||process?.env?.http_proxy;if(A.agent);else if(X&&this.#$(A.url,A.noProxy)){let Y=await iG.#Y();if(this.agentCache.has(X))A.agent=this.agentCache.get(X);else A.agent=new Y(X,{cert:A.cert,key:A.key}),this.agentCache.set(X,A.agent)}else if(A.cert&&A.key)if(this.agentCache.has(A.key))A.agent=this.agentCache.get(A.key);else A.agent=new ao1.Agent({cert:A.cert,key:A.key}),this.agentCache.set(A.key,A.agent);if(typeof A.errorRedactor!=="function"&&A.errorRedactor!==!1)A.errorRedactor=aW.defaultErrorRedactor;if(A.body&&!("duplex"in A))A.duplex="half";return this.#X(A),Object.assign(A,{headers:F,url:A.url instanceof URL?A.url:new URL(A.url)})}#X($){if($.timeout){let F=AbortSignal.timeout($.timeout);if($.signal&&!$.signal.aborted)$.signal=AbortSignal.any([$.signal,F]);else $.signal=F}}validateStatus($){return $>=200&&$<300}async getResponseDataFromContentType($){let F=$.headers.get("Content-Type");if(F===null)return $.text();if(F=F.toLowerCase(),F.includes("application/json")){let A=await $.text();try{A=JSON.parse(A)}catch{}return A}else if(F.match(/^text\//))return $.text();else return $.blob()}async*getMultipartRequest($,F){let A=`--${F}--`;for(let J of $){let X=J.headers.get("Content-Type")||"application/octet-stream";if(yield`--${F}\r
Content-Type: ${X}\r
\r
`,typeof J.content==="string")yield J.content;else yield*J.content;yield`\r
`}yield A}static#Z;static#W;static async#Y(){return this.#Z||=(await Promise.resolve().then(() => l8(F$1()))).HttpsProxyAgent,this.#Z}static async#D(){let $=typeof window<"u"&&!!window;return this.#W||=$?window.fetch:(await import("node-fetch")).default,this.#W}static mergeHeaders($,...F){$=$ instanceof Headers?$:new Headers($);for(let A of F)(A instanceof Headers?A:new Headers(A)).forEach((X,Y)=>{Y==="set-cookie"?$.append(Y,X):$.set(Y,X)});return $}}nG.Gaxios=Vx;iG=Vx});var c9=O((a8)=>{var eo1=a8&&a8.__createBinding||(Object.create?function($,F,A,J){if(J===void 0)J=A;var X=Object.getOwnPropertyDescriptor(F,A);if(!X||("get"in X?!F.__esModule:X.writable||X.configurable))X={enumerable:!0,get:function(){return F[A]}};Object.defineProperty($,J,X)}:function($,F,A,J){if(J===void 0)J=A;$[J]=F[A]}),$e1=a8&&a8.__exportStar||function($,F){for(var A in $)if(A!=="default"&&!Object.prototype.hasOwnProperty.call(F,A))eo1(F,$,A)};Object.defineProperty(a8,"__esModule",{value:!0});a8.instance=a8.Gaxios=a8.GaxiosError=void 0;a8.request=Ae1;var Y$1=X$1();Object.defineProperty(a8,"Gaxios",{enumerable:!0,get:function(){return Y$1.Gaxios}});var Fe1=Kx();Object.defineProperty(a8,"GaxiosError",{enumerable:!0,get:function(){return Fe1.GaxiosError}});$e1(Bx(),a8);a8.instance=new Y$1.Gaxios;async function Ae1($){return a8.instance.request($)}});var Nx=O((W$1,bN)=>{(function($){var F,A=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,J=Math.ceil,X=Math.floor,Y="[BigNumber Error] ",W=Y+"Number primitive has more than 15 significant digits: ",Z=100000000000000,D=14,G=9007199254740991,z=[1,10,100,1000,1e4,1e5,1e6,1e7,1e8,1e9,10000000000,100000000000,1000000000000,10000000000000],H=1e7,U=1e9;function Q(S){var C,M,I,T=K1.prototype={constructor:K1,toString:null,valueOf:null},j=new K1(1),b=20,g=4,f=-7,d=21,s=-1e7,n=1e7,L1=!1,X1=1,M1=0,g1={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},j1="0123456789abcdefghijklmnopqrstuvwxyz",i1=!0;function K1(h,c){var k,u,_,v,m,y,l,$1,o=this;if(!(o instanceof K1))return new K1(h,c);if(c==null){if(h&&h._isBigNumber===!0){if(o.s=h.s,!h.c||h.e>n)o.c=o.e=null;else if(h.e<s)o.c=[o.e=0];else o.e=h.e,o.c=h.c.slice();return}if((y=typeof h=="number")&&h*0==0){if(o.s=1/h<0?(h=-h,-1):1,h===~~h){for(v=0,m=h;m>=10;m/=10,v++);if(v>n)o.c=o.e=null;else o.e=v,o.c=[h];return}$1=String(h)}else{if(!A.test($1=String(h)))return I(o,$1,y);o.s=$1.charCodeAt(0)==45?($1=$1.slice(1),-1):1}if((v=$1.indexOf("."))>-1)$1=$1.replace(".","");if((m=$1.search(/e/i))>0){if(v<0)v=m;v+=+$1.slice(m+1),$1=$1.substring(0,m)}else if(v<0)v=$1.length}else{if(E(c,2,j1.length,"Base"),c==10&&i1)return o=new K1(h),b6(o,b+o.e+1,g);if($1=String(h),y=typeof h=="number"){if(h*0!=0)return I(o,$1,y,c);if(o.s=1/h<0?($1=$1.slice(1),-1):1,K1.DEBUG&&$1.replace(/^0\.0*|\./,"").length>15)throw Error(W+h)}else o.s=$1.charCodeAt(0)===45?($1=$1.slice(1),-1):1;k=j1.slice(0,c),v=m=0;for(l=$1.length;m<l;m++)if(k.indexOf(u=$1.charAt(m))<0){if(u=="."){if(m>v){v=l;continue}}else if(!_){if($1==$1.toUpperCase()&&($1=$1.toLowerCase())||$1==$1.toLowerCase()&&($1=$1.toUpperCase())){_=!0,m=-1,v=0;continue}}return I(o,String(h),y,c)}if(y=!1,$1=M($1,c,10,o.s),(v=$1.indexOf("."))>-1)$1=$1.replace(".","");else v=$1.length}for(m=0;$1.charCodeAt(m)===48;m++);for(l=$1.length;$1.charCodeAt(--l)===48;);if($1=$1.slice(m,++l)){if(l-=m,y&&K1.DEBUG&&l>15&&(h>G||h!==X(h)))throw Error(W+o.s*h);if((v=v-m-1)>n)o.c=o.e=null;else if(v<s)o.c=[o.e=0];else{if(o.e=v,o.c=[],m=(v+1)%D,v<0)m+=D;if(m<l){if(m)o.c.push(+$1.slice(0,m));for(l-=D;m<l;)o.c.push(+$1.slice(m,m+=D));m=D-($1=$1.slice(m)).length}else m-=l;for(;m--;$1+="0");o.c.push(+$1)}}else o.c=[o.e=0]}K1.clone=Q,K1.ROUND_UP=0,K1.ROUND_DOWN=1,K1.ROUND_CEIL=2,K1.ROUND_FLOOR=3,K1.ROUND_HALF_UP=4,K1.ROUND_HALF_DOWN=5,K1.ROUND_HALF_EVEN=6,K1.ROUND_HALF_CEIL=7,K1.ROUND_HALF_FLOOR=8,K1.EUCLID=9,K1.config=K1.set=function(h){var c,k;if(h!=null)if(typeof h=="object"){if(h.hasOwnProperty(c="DECIMAL_PLACES"))k=h[c],E(k,0,U,c),b=k;if(h.hasOwnProperty(c="ROUNDING_MODE"))k=h[c],E(k,0,8,c),g=k;if(h.hasOwnProperty(c="EXPONENTIAL_AT"))if(k=h[c],k&&k.pop)E(k[0],-U,0,c),E(k[1],0,U,c),f=k[0],d=k[1];else E(k,-U,U,c),f=-(d=k<0?-k:k);if(h.hasOwnProperty(c="RANGE"))if(k=h[c],k&&k.pop)E(k[0],-U,-1,c),E(k[1],1,U,c),s=k[0],n=k[1];else if(E(k,-U,U,c),k)s=-(n=k<0?-k:k);else throw Error(Y+c+" cannot be zero: "+k);if(h.hasOwnProperty(c="CRYPTO"))if(k=h[c],k===!!k)if(k)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))L1=k;else throw L1=!k,Error(Y+"crypto unavailable");else L1=k;else throw Error(Y+c+" not true or false: "+k);if(h.hasOwnProperty(c="MODULO_MODE"))k=h[c],E(k,0,9,c),X1=k;if(h.hasOwnProperty(c="POW_PRECISION"))k=h[c],E(k,0,U,c),M1=k;if(h.hasOwnProperty(c="FORMAT"))if(k=h[c],typeof k=="object")g1=k;else throw Error(Y+c+" not an object: "+k);if(h.hasOwnProperty(c="ALPHABET"))if(k=h[c],typeof k=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(k))i1=k.slice(0,10)=="0123456789",j1=k;else throw Error(Y+c+" invalid: "+k)}else throw Error(Y+"Object expected: "+h);return{DECIMAL_PLACES:b,ROUNDING_MODE:g,EXPONENTIAL_AT:[f,d],RANGE:[s,n],CRYPTO:L1,MODULO_MODE:X1,POW_PRECISION:M1,FORMAT:g1,ALPHABET:j1}},K1.isBigNumber=function(h){if(!h||h._isBigNumber!==!0)return!1;if(!K1.DEBUG)return!0;var c,k,u=h.c,_=h.e,v=h.s;$:if({}.toString.call(u)=="[object Array]"){if((v===1||v===-1)&&_>=-U&&_<=U&&_===X(_)){if(u[0]===0){if(_===0&&u.length===1)return!0;break $}if(c=(_+1)%D,c<1)c+=D;if(String(u[0]).length==c){for(c=0;c<u.length;c++)if(k=u[c],k<0||k>=Z||k!==X(k))break $;if(k!==0)return!0}}}else if(u===null&&_===null&&(v===null||v===1||v===-1))return!0;throw Error(Y+"Invalid BigNumber: "+h)},K1.maximum=K1.max=function(){return I4(arguments,-1)},K1.minimum=K1.min=function(){return I4(arguments,1)},K1.random=function(){var h=9007199254740992,c=Math.random()*h&2097151?function(){return X(Math.random()*h)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(k){var u,_,v,m,y,l=0,$1=[],o=new K1(j);if(k==null)k=b;else E(k,0,U);if(m=J(k/D),L1)if(crypto.getRandomValues){u=crypto.getRandomValues(new Uint32Array(m*=2));for(;l<m;)if(y=u[l]*131072+(u[l+1]>>>11),y>=9000000000000000)_=crypto.getRandomValues(new Uint32Array(2)),u[l]=_[0],u[l+1]=_[1];else $1.push(y%100000000000000),l+=2;l=m/2}else if(crypto.randomBytes){u=crypto.randomBytes(m*=7);for(;l<m;)if(y=(u[l]&31)*281474976710656+u[l+1]*1099511627776+u[l+2]*4294967296+u[l+3]*16777216+(u[l+4]<<16)+(u[l+5]<<8)+u[l+6],y>=9000000000000000)crypto.randomBytes(7).copy(u,l);else $1.push(y%100000000000000),l+=7;l=m/7}else throw L1=!1,Error(Y+"crypto unavailable");if(!L1){for(;l<m;)if(y=c(),y<9000000000000000)$1[l++]=y%100000000000000}if(m=$1[--l],k%=D,m&&k)y=z[D-k],$1[l]=X(m/y)*y;for(;$1[l]===0;$1.pop(),l--);if(l<0)$1=[v=0];else{for(v=-1;$1[0]===0;$1.splice(0,1),v-=D);for(l=1,y=$1[0];y>=10;y/=10,l++);if(l<D)v-=D-l}return o.e=v,o.c=$1,o}}(),K1.sum=function(){var h=1,c=arguments,k=new K1(c[0]);for(;h<c.length;)k=k.plus(c[h++]);return k},M=function(){var h="0123456789";function c(k,u,_,v){var m,y=[0],l,$1=0,o=k.length;for(;$1<o;){for(l=y.length;l--;y[l]*=u);y[0]+=v.indexOf(k.charAt($1++));for(m=0;m<y.length;m++)if(y[m]>_-1){if(y[m+1]==null)y[m+1]=0;y[m+1]+=y[m]/_|0,y[m]%=_}}return y.reverse()}return function(k,u,_,v,m){var y,l,$1,o,B1,x1,d1,N0,G6=k.indexOf("."),y6=b,x0=g;if(G6>=0)o=M1,M1=0,k=k.replace(".",""),N0=new K1(u),x1=N0.pow(k.length-G6),M1=o,N0.c=c(N(q(x1.c),x1.e,"0"),10,_,h),N0.e=N0.c.length;d1=c(k,u,_,m?(y=j1,h):(y=h,j1)),$1=o=d1.length;for(;d1[--o]==0;d1.pop());if(!d1[0])return y.charAt(0);if(G6<0)--$1;else x1.c=d1,x1.e=$1,x1.s=v,x1=C(x1,N0,y6,x0,_),d1=x1.c,B1=x1.r,$1=x1.e;if(l=$1+y6+1,G6=d1[l],o=_/2,B1=B1||l<0||d1[l+1]!=null,B1=x0<4?(G6!=null||B1)&&(x0==0||x0==(x1.s<0?3:2)):G6>o||G6==o&&(x0==4||B1||x0==6&&d1[l-1]&1||x0==(x1.s<0?8:7)),l<1||!d1[0])k=B1?N(y.charAt(1),-y6,y.charAt(0)):y.charAt(0);else{if(d1.length=l,B1){for(--_;++d1[--l]>_;)if(d1[l]=0,!l)++$1,d1=[1].concat(d1)}for(o=d1.length;!d1[--o];);for(G6=0,k="";G6<=o;k+=y.charAt(d1[G6++]));k=N(k,$1,y.charAt(0))}return k}}(),C=function(){function h(u,_,v){var m,y,l,$1,o=0,B1=u.length,x1=_%H,d1=_/H|0;for(u=u.slice();B1--;)l=u[B1]%H,$1=u[B1]/H|0,m=d1*l+$1*x1,y=x1*l+m%H*H+o,o=(y/v|0)+(m/H|0)+d1*$1,u[B1]=y%v;if(o)u=[o].concat(u);return u}function c(u,_,v,m){var y,l;if(v!=m)l=v>m?1:-1;else for(y=l=0;y<v;y++)if(u[y]!=_[y]){l=u[y]>_[y]?1:-1;break}return l}function k(u,_,v,m){var y=0;for(;v--;)u[v]-=y,y=u[v]<_[v]?1:0,u[v]=y*m+u[v]-_[v];for(;!u[0]&&u.length>1;u.splice(0,1));}return function(u,_,v,m,y){var l,$1,o,B1,x1,d1,N0,G6,y6,x0,x6,o4,OW,AK,HG,H5,p,i=u.s==_.s?1:-1,r=u.c,J1=_.c;if(!r||!r[0]||!J1||!J1[0])return new K1(!u.s||!_.s||(r?J1&&r[0]==J1[0]:!J1)?NaN:r&&r[0]==0||!J1?i*0:i/0);if(G6=new K1(i),y6=G6.c=[],$1=u.e-_.e,i=v+$1+1,!y)y=Z,$1=B(u.e/D)-B(_.e/D),i=i/D|0;for(o=0;J1[o]==(r[o]||0);o++);if(J1[o]>(r[o]||0))$1--;if(i<0)y6.push(1),B1=!0;else{if(AK=r.length,H5=J1.length,o=0,i+=2,x1=X(y/(J1[0]+1)),x1>1)J1=h(J1,x1,y),r=h(r,x1,y),H5=J1.length,AK=r.length;OW=H5,x0=r.slice(0,H5),x6=x0.length;for(;x6<H5;x0[x6++]=0);if(p=J1.slice(),p=[0].concat(p),HG=J1[0],J1[1]>=y/2)HG++;do{if(x1=0,l=c(J1,x0,H5,x6),l<0){if(o4=x0[0],H5!=x6)o4=o4*y+(x0[1]||0);if(x1=X(o4/HG),x1>1){if(x1>=y)x1=y-1;d1=h(J1,x1,y),N0=d1.length,x6=x0.length;while(c(d1,x0,N0,x6)==1)x1--,k(d1,H5<N0?p:J1,N0,y),N0=d1.length,l=1}else{if(x1==0)l=x1=1;d1=J1.slice(),N0=d1.length}if(N0<x6)d1=[0].concat(d1);if(k(x0,d1,x6,y),x6=x0.length,l==-1)while(c(J1,x0,H5,x6)<1)x1++,k(x0,H5<x6?p:J1,x6,y),x6=x0.length}else if(l===0)x1++,x0=[0];if(y6[o++]=x1,x0[0])x0[x6++]=r[OW]||0;else x0=[r[OW]],x6=1}while((OW++<AK||x0[0]!=null)&&i--);if(B1=x0[0]!=null,!y6[0])y6.splice(0,1)}if(y==Z){for(o=1,i=y6[0];i>=10;i/=10,o++);b6(G6,v+(G6.e=o+$1*D-1)+1,m,B1)}else G6.e=$1,G6.r=+B1;return G6}}();function l0(h,c,k,u){var _,v,m,y,l;if(k==null)k=g;else E(k,0,8);if(!h.c)return h.toString();if(_=h.c[0],m=h.e,c==null)l=q(h.c),l=u==1||u==2&&(m<=f||m>=d)?R(l,m):N(l,m,"0");else if(h=b6(new K1(h),c,k),v=h.e,l=q(h.c),y=l.length,u==1||u==2&&(c<=v||v<=f)){for(;y<c;l+="0",y++);l=R(l,v)}else if(c-=m+(u===2&&v>m),l=N(l,v,"0"),v+1>y){if(--c>0)for(l+=".";c--;l+="0");}else if(c+=v-y,c>0){if(v+1==y)l+=".";for(;c--;l+="0");}return h.s<0&&_?"-"+l:l}function I4(h,c){var k,u,_=1,v=new K1(h[0]);for(;_<h.length;_++)if(u=new K1(h[_]),!u.s||(k=L(v,u))===c||k===0&&v.s===c)v=u;return v}function T4(h,c,k){var u=1,_=c.length;for(;!c[--_];c.pop());for(_=c[0];_>=10;_/=10,u++);if((k=u+k*D-1)>n)h.c=h.e=null;else if(k<s)h.c=[h.e=0];else h.e=k,h.c=c;return h}I=function(){var h=/^(-?)0([xbo])(?=\w[\w.]*$)/i,c=/^([^.]+)\.$/,k=/^\.([^.]+)$/,u=/^-?(Infinity|NaN)$/,_=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(v,m,y,l){var $1,o=y?m:m.replace(_,"");if(u.test(o))v.s=isNaN(o)?null:o<0?-1:1;else{if(!y){if(o=o.replace(h,function(B1,x1,d1){return $1=(d1=d1.toLowerCase())=="x"?16:d1=="b"?2:8,!l||l==$1?x1:B1}),l)$1=l,o=o.replace(c,"$1").replace(k,"0.$1");if(m!=o)return new K1(o,$1)}if(K1.DEBUG)throw Error(Y+"Not a"+(l?" base "+l:"")+" number: "+m);v.s=null}v.c=v.e=null}}();function b6(h,c,k,u){var _,v,m,y,l,$1,o,B1=h.c,x1=z;if(B1){$:{for(_=1,y=B1[0];y>=10;y/=10,_++);if(v=c-_,v<0)v+=D,m=c,l=B1[$1=0],o=X(l/x1[_-m-1]%10);else if($1=J((v+1)/D),$1>=B1.length)if(u){for(;B1.length<=$1;B1.push(0));l=o=0,_=1,v%=D,m=v-D+1}else break $;else{l=y=B1[$1];for(_=1;y>=10;y/=10,_++);v%=D,m=v-D+_,o=m<0?0:X(l/x1[_-m-1]%10)}if(u=u||c<0||B1[$1+1]!=null||(m<0?l:l%x1[_-m-1]),u=k<4?(o||u)&&(k==0||k==(h.s<0?3:2)):o>5||o==5&&(k==4||u||k==6&&(v>0?m>0?l/x1[_-m]:0:B1[$1-1])%10&1||k==(h.s<0?8:7)),c<1||!B1[0]){if(B1.length=0,u)c-=h.e+1,B1[0]=x1[(D-c%D)%D],h.e=-c||0;else B1[0]=h.e=0;return h}if(v==0)B1.length=$1,y=1,$1--;else B1.length=$1+1,y=x1[D-v],B1[$1]=m>0?X(l/x1[_-m]%x1[m])*y:0;if(u)for(;;)if($1==0){for(v=1,m=B1[0];m>=10;m/=10,v++);m=B1[0]+=y;for(y=1;m>=10;m/=10,y++);if(v!=y){if(h.e++,B1[0]==Z)B1[0]=1}break}else{if(B1[$1]+=y,B1[$1]!=Z)break;B1[$1--]=0,y=1}for(v=B1.length;B1[--v]===0;B1.pop());}if(h.e>n)h.c=h.e=null;else if(h.e<s)h.c=[h.e=0]}return h}function c2(h){var c,k=h.e;if(k===null)return h.toString();return c=q(h.c),c=k<=f||k>=d?R(c,k):N(c,k,"0"),h.s<0?"-"+c:c}if(T.absoluteValue=T.abs=function(){var h=new K1(this);if(h.s<0)h.s=1;return h},T.comparedTo=function(h,c){return L(this,new K1(h,c))},T.decimalPlaces=T.dp=function(h,c){var k,u,_,v=this;if(h!=null){if(E(h,0,U),c==null)c=g;else E(c,0,8);return b6(new K1(v),h+v.e+1,c)}if(!(k=v.c))return null;if(u=((_=k.length-1)-B(this.e/D))*D,_=k[_])for(;_%10==0;_/=10,u--);if(u<0)u=0;return u},T.dividedBy=T.div=function(h,c){return C(this,new K1(h,c),b,g)},T.dividedToIntegerBy=T.idiv=function(h,c){return C(this,new K1(h,c),0,1)},T.exponentiatedBy=T.pow=function(h,c){var k,u,_,v,m,y,l,$1,o,B1=this;if(h=new K1(h),h.c&&!h.isInteger())throw Error(Y+"Exponent not an integer: "+c2(h));if(c!=null)c=new K1(c);if(y=h.e>14,!B1.c||!B1.c[0]||B1.c[0]==1&&!B1.e&&B1.c.length==1||!h.c||!h.c[0])return o=new K1(Math.pow(+c2(B1),y?h.s*(2-V(h)):+c2(h))),c?o.mod(c):o;if(l=h.s<0,c){if(c.c?!c.c[0]:!c.s)return new K1(NaN);if(u=!l&&B1.isInteger()&&c.isInteger(),u)B1=B1.mod(c)}else if(h.e>9&&(B1.e>0||B1.e<-1||(B1.e==0?B1.c[0]>1||y&&B1.c[1]>=240000000:B1.c[0]<80000000000000||y&&B1.c[0]<=99999750000000))){if(v=B1.s<0&&V(h)?-0:0,B1.e>-1)v=1/v;return new K1(l?1/v:v)}else if(M1)v=J(M1/D+2);if(y){if(k=new K1(0.5),l)h.s=1;$1=V(h)}else _=Math.abs(+c2(h)),$1=_%2;o=new K1(j);for(;;){if($1){if(o=o.times(B1),!o.c)break;if(v){if(o.c.length>v)o.c.length=v}else if(u)o=o.mod(c)}if(_){if(_=X(_/2),_===0)break;$1=_%2}else if(h=h.times(k),b6(h,h.e+1,1),h.e>14)$1=V(h);else{if(_=+c2(h),_===0)break;$1=_%2}if(B1=B1.times(B1),v){if(B1.c&&B1.c.length>v)B1.c.length=v}else if(u)B1=B1.mod(c)}if(u)return o;if(l)o=j.div(o);return c?o.mod(c):v?b6(o,M1,g,m):o},T.integerValue=function(h){var c=new K1(this);if(h==null)h=g;else E(h,0,8);return b6(c,c.e+1,h)},T.isEqualTo=T.eq=function(h,c){return L(this,new K1(h,c))===0},T.isFinite=function(){return!!this.c},T.isGreaterThan=T.gt=function(h,c){return L(this,new K1(h,c))>0},T.isGreaterThanOrEqualTo=T.gte=function(h,c){return(c=L(this,new K1(h,c)))===1||c===0},T.isInteger=function(){return!!this.c&&B(this.e/D)>this.c.length-2},T.isLessThan=T.lt=function(h,c){return L(this,new K1(h,c))<0},T.isLessThanOrEqualTo=T.lte=function(h,c){return(c=L(this,new K1(h,c)))===-1||c===0},T.isNaN=function(){return!this.s},T.isNegative=function(){return this.s<0},T.isPositive=function(){return this.s>0},T.isZero=function(){return!!this.c&&this.c[0]==0},T.minus=function(h,c){var k,u,_,v,m=this,y=m.s;if(h=new K1(h,c),c=h.s,!y||!c)return new K1(NaN);if(y!=c)return h.s=-c,m.plus(h);var l=m.e/D,$1=h.e/D,o=m.c,B1=h.c;if(!l||!$1){if(!o||!B1)return o?(h.s=-c,h):new K1(B1?m:NaN);if(!o[0]||!B1[0])return B1[0]?(h.s=-c,h):new K1(o[0]?m:g==3?-0:0)}if(l=B(l),$1=B($1),o=o.slice(),y=l-$1){if(v=y<0)y=-y,_=o;else $1=l,_=B1;_.reverse();for(c=y;c--;_.push(0));_.reverse()}else{u=(v=(y=o.length)<(c=B1.length))?y:c;for(y=c=0;c<u;c++)if(o[c]!=B1[c]){v=o[c]<B1[c];break}}if(v)_=o,o=B1,B1=_,h.s=-h.s;if(c=(u=B1.length)-(k=o.length),c>0)for(;c--;o[k++]=0);c=Z-1;for(;u>y;){if(o[--u]<B1[u]){for(k=u;k&&!o[--k];o[k]=c);--o[k],o[u]+=Z}o[u]-=B1[u]}for(;o[0]==0;o.splice(0,1),--$1);if(!o[0])return h.s=g==3?-1:1,h.c=[h.e=0],h;return T4(h,o,$1)},T.modulo=T.mod=function(h,c){var k,u,_=this;if(h=new K1(h,c),!_.c||!h.s||h.c&&!h.c[0])return new K1(NaN);else if(!h.c||_.c&&!_.c[0])return new K1(_);if(X1==9)u=h.s,h.s=1,k=C(_,h,0,3),h.s=u,k.s*=u;else k=C(_,h,0,X1);if(h=_.minus(k.times(h)),!h.c[0]&&X1==1)h.s=_.s;return h},T.multipliedBy=T.times=function(h,c){var k,u,_,v,m,y,l,$1,o,B1,x1,d1,N0,G6,y6,x0=this,x6=x0.c,o4=(h=new K1(h,c)).c;if(!x6||!o4||!x6[0]||!o4[0]){if(!x0.s||!h.s||x6&&!x6[0]&&!o4||o4&&!o4[0]&&!x6)h.c=h.e=h.s=null;else if(h.s*=x0.s,!x6||!o4)h.c=h.e=null;else h.c=[0],h.e=0;return h}if(u=B(x0.e/D)+B(h.e/D),h.s*=x0.s,l=x6.length,B1=o4.length,l<B1)N0=x6,x6=o4,o4=N0,_=l,l=B1,B1=_;for(_=l+B1,N0=[];_--;N0.push(0));G6=Z,y6=H;for(_=B1;--_>=0;){k=0,x1=o4[_]%y6,d1=o4[_]/y6|0;for(m=l,v=_+m;v>_;)$1=x6[--m]%y6,o=x6[m]/y6|0,y=d1*$1+o*x1,$1=x1*$1+y%y6*y6+N0[v]+k,k=($1/G6|0)+(y/y6|0)+d1*o,N0[v--]=$1%G6;N0[v]=k}if(k)++u;else N0.splice(0,1);return T4(h,N0,u)},T.negated=function(){var h=new K1(this);return h.s=-h.s||null,h},T.plus=function(h,c){var k,u=this,_=u.s;if(h=new K1(h,c),c=h.s,!_||!c)return new K1(NaN);if(_!=c)return h.s=-c,u.minus(h);var v=u.e/D,m=h.e/D,y=u.c,l=h.c;if(!v||!m){if(!y||!l)return new K1(_/0);if(!y[0]||!l[0])return l[0]?h:new K1(y[0]?u:_*0)}if(v=B(v),m=B(m),y=y.slice(),_=v-m){if(_>0)m=v,k=l;else _=-_,k=y;k.reverse();for(;_--;k.push(0));k.reverse()}if(_=y.length,c=l.length,_-c<0)k=l,l=y,y=k,c=_;for(_=0;c;)_=(y[--c]=y[c]+l[c]+_)/Z|0,y[c]=Z===y[c]?0:y[c]%Z;if(_)y=[_].concat(y),++m;return T4(h,y,m)},T.precision=T.sd=function(h,c){var k,u,_,v=this;if(h!=null&&h!==!!h){if(E(h,1,U),c==null)c=g;else E(c,0,8);return b6(new K1(v),h,c)}if(!(k=v.c))return null;if(_=k.length-1,u=_*D+1,_=k[_]){for(;_%10==0;_/=10,u--);for(_=k[0];_>=10;_/=10,u++);}if(h&&v.e+1>u)u=v.e+1;return u},T.shiftedBy=function(h){return E(h,-G,G),this.times("1e"+h)},T.squareRoot=T.sqrt=function(){var h,c,k,u,_,v=this,m=v.c,y=v.s,l=v.e,$1=b+4,o=new K1("0.5");if(y!==1||!m||!m[0])return new K1(!y||y<0&&(!m||m[0])?NaN:m?v:1/0);if(y=Math.sqrt(+c2(v)),y==0||y==1/0){if(c=q(m),(c.length+l)%2==0)c+="0";if(y=Math.sqrt(+c),l=B((l+1)/2)-(l<0||l%2),y==1/0)c="5e"+l;else c=y.toExponential(),c=c.slice(0,c.indexOf("e")+1)+l;k=new K1(c)}else k=new K1(y+"");if(k.c[0]){if(l=k.e,y=l+$1,y<3)y=0;for(;;)if(_=k,k=o.times(_.plus(C(v,_,$1,1))),q(_.c).slice(0,y)===(c=q(k.c)).slice(0,y)){if(k.e<l)--y;if(c=c.slice(y-3,y+1),c=="9999"||!u&&c=="4999"){if(!u){if(b6(_,_.e+b+2,0),_.times(_).eq(v)){k=_;break}}$1+=4,y+=4,u=1}else{if(!+c||!+c.slice(1)&&c.charAt(0)=="5")b6(k,k.e+b+2,1),h=!k.times(k).eq(v);break}}}return b6(k,k.e+b+1,g,h)},T.toExponential=function(h,c){if(h!=null)E(h,0,U),h++;return l0(this,h,c,1)},T.toFixed=function(h,c){if(h!=null)E(h,0,U),h=h+this.e+1;return l0(this,h,c)},T.toFormat=function(h,c,k){var u,_=this;if(k==null)if(h!=null&&c&&typeof c=="object")k=c,c=null;else if(h&&typeof h=="object")k=h,h=c=null;else k=g1;else if(typeof k!="object")throw Error(Y+"Argument not an object: "+k);if(u=_.toFixed(h,c),_.c){var v,m=u.split("."),y=+k.groupSize,l=+k.secondaryGroupSize,$1=k.groupSeparator||"",o=m[0],B1=m[1],x1=_.s<0,d1=x1?o.slice(1):o,N0=d1.length;if(l)v=y,y=l,l=v,N0-=v;if(y>0&&N0>0){v=N0%y||y,o=d1.substr(0,v);for(;v<N0;v+=y)o+=$1+d1.substr(v,y);if(l>0)o+=$1+d1.slice(v);if(x1)o="-"+o}u=B1?o+(k.decimalSeparator||"")+((l=+k.fractionGroupSize)?B1.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(k.fractionGroupSeparator||"")):B1):o}return(k.prefix||"")+u+(k.suffix||"")},T.toFraction=function(h){var c,k,u,_,v,m,y,l,$1,o,B1,x1,d1=this,N0=d1.c;if(h!=null){if(y=new K1(h),!y.isInteger()&&(y.c||y.s!==1)||y.lt(j))throw Error(Y+"Argument "+(y.isInteger()?"out of range: ":"not an integer: ")+c2(y))}if(!N0)return new K1(d1);c=new K1(j),$1=k=new K1(j),u=l=new K1(j),x1=q(N0),v=c.e=x1.length-d1.e-1,c.c[0]=z[(m=v%D)<0?D+m:m],h=!h||y.comparedTo(c)>0?v>0?c:$1:y,m=n,n=1/0,y=new K1(x1),l.c[0]=0;for(;;){if(o=C(y,c,0,1),_=k.plus(o.times(u)),_.comparedTo(h)==1)break;k=u,u=_,$1=l.plus(o.times(_=$1)),l=_,c=y.minus(o.times(_=c)),y=_}return _=C(h.minus(k),u,0,1),l=l.plus(_.times($1)),k=k.plus(_.times(u)),l.s=$1.s=d1.s,v=v*2,B1=C($1,u,v,g).minus(d1).abs().comparedTo(C(l,k,v,g).minus(d1).abs())<1?[$1,u]:[l,k],n=m,B1},T.toNumber=function(){return+c2(this)},T.toPrecision=function(h,c){if(h!=null)E(h,1,U);return l0(this,h,c,2)},T.toString=function(h){var c,k=this,u=k.s,_=k.e;if(_===null)if(u){if(c="Infinity",u<0)c="-"+c}else c="NaN";else{if(h==null)c=_<=f||_>=d?R(q(k.c),_):N(q(k.c),_,"0");else if(h===10&&i1)k=b6(new K1(k),b+_+1,g),c=N(q(k.c),k.e,"0");else E(h,2,j1.length,"Base"),c=M(N(q(k.c),_,"0"),10,h,u,!0);if(u<0&&k.c[0])c="-"+c}return c},T.valueOf=T.toJSON=function(){return c2(this)},T._isBigNumber=!0,S!=null)K1.set(S);return K1}function B(S){var C=S|0;return S>0||S===C?C:C-1}function q(S){var C,M,I=1,T=S.length,j=S[0]+"";for(;I<T;){C=S[I++]+"",M=D-C.length;for(;M--;C="0"+C);j+=C}for(T=j.length;j.charCodeAt(--T)===48;);return j.slice(0,T+1||1)}function L(S,C){var M,I,T=S.c,j=C.c,b=S.s,g=C.s,f=S.e,d=C.e;if(!b||!g)return null;if(M=T&&!T[0],I=j&&!j[0],M||I)return M?I?0:-g:b;if(b!=g)return b;if(M=b<0,I=f==d,!T||!j)return I?0:!T^M?1:-1;if(!I)return f>d^M?1:-1;g=(f=T.length)<(d=j.length)?f:d;for(b=0;b<g;b++)if(T[b]!=j[b])return T[b]>j[b]^M?1:-1;return f==d?0:f>d^M?1:-1}function E(S,C,M,I){if(S<C||S>M||S!==X(S))throw Error(Y+(I||"Argument")+(typeof S=="number"?S<C||S>M?" out of range: ":" not an integer: ":" not a primitive number: ")+String(S))}function V(S){var C=S.c.length-1;return B(S.e/D)==C&&S.c[C]%2!=0}function R(S,C){return(S.length>1?S.charAt(0)+"."+S.slice(1):S)+(C<0?"e":"e+")+C}function N(S,C,M){var I,T;if(C<0){for(T=M+".";++C;T+=M);S=T+S}else if(I=S.length,++C>I){for(T=M,C-=I;--C;T+=M);S+=T}else if(C<I)S=S.slice(0,C)+"."+S.slice(C);return S}if(F=Q(),F.default=F.BigNumber=F,typeof define=="function"&&define.amd)define(function(){return F});else if(typeof bN<"u"&&bN.exports)bN.exports=F;else{if(!$)$=typeof self<"u"&&self?self:window;$.BigNumber=F}})(W$1)});var z$1=O((un0,G$1)=>{var Z$1=Nx(),D$1=un0;(function(){function $(G){return G<10?"0"+G:G}var F=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,A=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,J,X,Y={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':"\\\"","\\":"\\\\"},W;function Z(G){return A.lastIndex=0,A.test(G)?'"'+G.replace(A,function(z){var H=Y[z];return typeof H==="string"?H:"\\u"+("0000"+z.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+G+'"'}function D(G,z){var H,U,Q,B,q=J,L,E=z[G],V=E!=null&&(E instanceof Z$1||Z$1.isBigNumber(E));if(E&&typeof E==="object"&&typeof E.toJSON==="function")E=E.toJSON(G);if(typeof W==="function")E=W.call(z,G,E);switch(typeof E){case"string":if(V)return E;else return Z(E);case"number":return isFinite(E)?String(E):"null";case"boolean":case"null":case"bigint":return String(E);case"object":if(!E)return"null";if(J+=X,L=[],Object.prototype.toString.apply(E)==="[object Array]"){B=E.length;for(H=0;H<B;H+=1)L[H]=D(H,E)||"null";return Q=L.length===0?"[]":J?`[
`+J+L.join(`,
`+J)+`
`+q+"]":"["+L.join(",")+"]",J=q,Q}if(W&&typeof W==="object"){B=W.length;for(H=0;H<B;H+=1)if(typeof W[H]==="string"){if(U=W[H],Q=D(U,E),Q)L.push(Z(U)+(J?": ":":")+Q)}}else Object.keys(E).forEach(function(R){var N=D(R,E);if(N)L.push(Z(R)+(J?": ":":")+N)});return Q=L.length===0?"{}":J?`{
`+J+L.join(`,
`+J)+`
`+q+"}":"{"+L.join(",")+"}",J=q,Q}}if(typeof D$1.stringify!=="function")D$1.stringify=function(G,z,H){var U;if(J="",X="",typeof H==="number")for(U=0;U<H;U+=1)X+=" ";else if(typeof H==="string")X=H;if(W=z,z&&typeof z!=="function"&&(typeof z!=="object"||typeof z.length!=="number"))throw Error("JSON.stringify");return D("",{"":G})}})()});var U$1=O((hn0,H$1)=>{var xN=null,Je1=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,Xe1=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/,Ye1=function($){var F={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if($!==void 0&&$!==null){if($.strict===!0)F.strict=!0;if($.storeAsString===!0)F.storeAsString=!0;if(F.alwaysParseAsBig=$.alwaysParseAsBig===!0?$.alwaysParseAsBig:!1,F.useNativeBigInt=$.useNativeBigInt===!0?$.useNativeBigInt:!1,typeof $.constructorAction<"u")if($.constructorAction==="error"||$.constructorAction==="ignore"||$.constructorAction==="preserve")F.constructorAction=$.constructorAction;else throw Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${$.constructorAction}`);if(typeof $.protoAction<"u")if($.protoAction==="error"||$.protoAction==="ignore"||$.protoAction==="preserve")F.protoAction=$.protoAction;else throw Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${$.protoAction}`)}var A,J,X={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"\t"},Y,W=function(q){throw{name:"SyntaxError",message:q,at:A,text:Y}},Z=function(q){if(q&&q!==J)W("Expected '"+q+"' instead of '"+J+"'");return J=Y.charAt(A),A+=1,J},D=function(){var q,L="";if(J==="-")L="-",Z("-");while(J>="0"&&J<="9")L+=J,Z();if(J==="."){L+=".";while(Z()&&J>="0"&&J<="9")L+=J}if(J==="e"||J==="E"){if(L+=J,Z(),J==="-"||J==="+")L+=J,Z();while(J>="0"&&J<="9")L+=J,Z()}if(q=+L,!isFinite(q))W("Bad number");else{if(xN==null)xN=Nx();if(L.length>15)return F.storeAsString?L:F.useNativeBigInt?BigInt(L):new xN(L);else return!F.alwaysParseAsBig?q:F.useNativeBigInt?BigInt(q):new xN(q)}},G=function(){var q,L,E="",V;if(J==='"'){var R=A;while(Z()){if(J==='"'){if(A-1>R)E+=Y.substring(R,A-1);return Z(),E}if(J==="\\"){if(A-1>R)E+=Y.substring(R,A-1);if(Z(),J==="u"){V=0;for(L=0;L<4;L+=1){if(q=parseInt(Z(),16),!isFinite(q))break;V=V*16+q}E+=String.fromCharCode(V)}else if(typeof X[J]==="string")E+=X[J];else break;R=A}}}W("Bad string")},z=function(){while(J&&J<=" ")Z()},H=function(){switch(J){case"t":return Z("t"),Z("r"),Z("u"),Z("e"),!0;case"f":return Z("f"),Z("a"),Z("l"),Z("s"),Z("e"),!1;case"n":return Z("n"),Z("u"),Z("l"),Z("l"),null}W("Unexpected '"+J+"'")},U,Q=function(){var q=[];if(J==="["){if(Z("["),z(),J==="]")return Z("]"),q;while(J){if(q.push(U()),z(),J==="]")return Z("]"),q;Z(","),z()}}W("Bad array")},B=function(){var q,L=Object.create(null);if(J==="{"){if(Z("{"),z(),J==="}")return Z("}"),L;while(J){if(q=G(),z(),Z(":"),F.strict===!0&&Object.hasOwnProperty.call(L,q))W('Duplicate key "'+q+'"');if(Je1.test(q)===!0)if(F.protoAction==="error")W("Object contains forbidden prototype property");else if(F.protoAction==="ignore")U();else L[q]=U();else if(Xe1.test(q)===!0)if(F.constructorAction==="error")W("Object contains forbidden constructor property");else if(F.constructorAction==="ignore")U();else L[q]=U();else L[q]=U();if(z(),J==="}")return Z("}"),L;Z(","),z()}}W("Bad object")};return U=function(){switch(z(),J){case"{":return B();case"[":return Q();case'"':return G();case"-":return D();default:return J>="0"&&J<="9"?D():H()}},function(q,L){var E;if(Y=q+"",A=0,J=" ",E=U(),z(),J)W("Syntax error");return typeof L==="function"?function V(R,N){var S,C,M=R[N];if(M&&typeof M==="object")Object.keys(M).forEach(function(I){if(C=V(M,I),C!==void 0)M[I]=C;else delete M[I]});return L.call(R,N,M)}({"":E},""):E}};H$1.exports=Ye1});var B$1=O((mn0,gN)=>{var Q$1=z$1().stringify,K$1=U$1();gN.exports=function($){return{parse:K$1($),stringify:Q$1}};gN.exports.parse=K$1();gN.exports.stringify=Q$1});var Cx=O((C$1)=>{Object.defineProperty(C$1,"__esModule",{value:!0});C$1.GCE_LINUX_BIOS_PATHS=void 0;C$1.isGoogleCloudServerless=L$1;C$1.isGoogleComputeEngineLinux=E$1;C$1.isGoogleComputeEngineMACAddress=V$1;C$1.isGoogleComputeEngine=N$1;C$1.detectGCPResidency=Ze1;var w$1=Z1("fs"),q$1=Z1("os");C$1.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};var We1=/^42:01/;function L$1(){return!!(process.env.CLOUD_RUN_JOB||process.env.FUNCTION_NAME||process.env.K_SERVICE)}function E$1(){if((0,q$1.platform)()!=="linux")return!1;try{(0,w$1.statSync)(C$1.GCE_LINUX_BIOS_PATHS.BIOS_DATE);let $=(0,w$1.readFileSync)(C$1.GCE_LINUX_BIOS_PATHS.BIOS_VENDOR,"utf8");return/Google/.test($)}catch{return!1}}function V$1(){let $=(0,q$1.networkInterfaces)();for(let F of Object.values($)){if(!F)continue;for(let{mac:A}of F)if(We1.test(A))return!0}return!1}function N$1(){return E$1()||V$1()}function Ze1(){return L$1()||N$1()}});var R$1=O((M$1)=>{Object.defineProperty(M$1,"__esModule",{value:!0});M$1.Colours=void 0;class d0{static isEnabled($){return $&&$.isTTY&&(typeof $.getColorDepth==="function"?$.getColorDepth()>2:!0)}static refresh(){if(d0.enabled=d0.isEnabled(process===null||process===void 0?void 0:process.stderr),!this.enabled)d0.reset="",d0.bright="",d0.dim="",d0.red="",d0.green="",d0.yellow="",d0.blue="",d0.magenta="",d0.cyan="",d0.white="",d0.grey="";else d0.reset="\x1B[0m",d0.bright="\x1B[1m",d0.dim="\x1B[2m",d0.red="\x1B[31m",d0.green="\x1B[32m",d0.yellow="\x1B[33m",d0.blue="\x1B[34m",d0.magenta="\x1B[35m",d0.cyan="\x1B[36m",d0.white="\x1B[37m",d0.grey="\x1B[90m"}}M$1.Colours=d0;d0.enabled=!1;d0.reset="";d0.bright="";d0.dim="";d0.red="";d0.green="";d0.yellow="";d0.blue="";d0.magenta="";d0.cyan="";d0.white="";d0.grey="";d0.refresh()});var k$1=O(($2)=>{var Qe1=$2&&$2.__createBinding||(Object.create?function($,F,A,J){if(J===void 0)J=A;var X=Object.getOwnPropertyDescriptor(F,A);if(!X||("get"in X?!F.__esModule:X.writable||X.configurable))X={enumerable:!0,get:function(){return F[A]}};Object.defineProperty($,J,X)}:function($,F,A,J){if(J===void 0)J=A;$[J]=F[A]}),Ke1=$2&&$2.__setModuleDefault||(Object.create?function($,F){Object.defineProperty($,"default",{enumerable:!0,value:F})}:function($,F){$.default=F}),I$1=$2&&$2.__importStar||function(){var $=function(F){return $=Object.getOwnPropertyNames||function(A){var J=[];for(var X in A)if(Object.prototype.hasOwnProperty.call(A,X))J[J.length]=X;return J},$(F)};return function(F){if(F&&F.__esModule)return F;var A={};if(F!=null){for(var J=$(F),X=0;X<J.length;X++)if(J[X]!=="default")Qe1(A,F,J[X])}return Ke1(A,F),A}}();Object.defineProperty($2,"__esModule",{value:!0});$2.env=$2.DebugLogBackendBase=$2.placeholder=$2.AdhocDebugLogger=$2.LogSeverity=void 0;$2.getNodeBackend=Mx;$2.getDebugBackend=we1;$2.getStructuredBackend=qe1;$2.setBackend=Le1;$2.log=_$1;var Be1=Z1("events"),lK=I$1(Z1("process")),T$1=I$1(Z1("util")),C7=R$1(),U$;(function($){$.DEFAULT="DEFAULT",$.DEBUG="DEBUG",$.INFO="INFO",$.WARNING="WARNING",$.ERROR="ERROR"})(U$||($2.LogSeverity=U$={}));class vN extends Be1.EventEmitter{constructor($,F){super();this.namespace=$,this.upstream=F,this.func=Object.assign(this.invoke.bind(this),{instance:this,on:(A,J)=>this.on(A,J)}),this.func.debug=(...A)=>this.invokeSeverity(U$.DEBUG,...A),this.func.info=(...A)=>this.invokeSeverity(U$.INFO,...A),this.func.warn=(...A)=>this.invokeSeverity(U$.WARNING,...A),this.func.error=(...A)=>this.invokeSeverity(U$.ERROR,...A),this.func.sublog=(A)=>_$1(A,this.func)}invoke($,...F){if(this.upstream)try{this.upstream($,...F)}catch(A){}try{this.emit("log",$,F)}catch(A){}}invokeSeverity($,...F){this.invoke({severity:$},...F)}}$2.AdhocDebugLogger=vN;$2.placeholder=new vN("",()=>{}).func;class pK{constructor(){var $;this.cached=new Map,this.filters=[],this.filtersSet=!1;let F=($=lK.env[$2.env.nodeEnables])!==null&&$!==void 0?$:"*";if(F==="all")F="*";this.filters=F.split(",")}log($,F,...A){try{if(!this.filtersSet)this.setFilters(),this.filtersSet=!0;let J=this.cached.get($);if(!J)J=this.makeLogger($),this.cached.set($,J);J(F,...A)}catch(J){console.error(J)}}}$2.DebugLogBackendBase=pK;class j$1 extends pK{constructor(){super(...arguments);this.enabledRegexp=/.*/g}isEnabled($){return this.enabledRegexp.test($)}makeLogger($){if(!this.enabledRegexp.test($))return()=>{};return(F,...A)=>{var J;let X=`${C7.Colours.green}${$}${C7.Colours.reset}`,Y=`${C7.Colours.yellow}${lK.pid}${C7.Colours.reset}`,W;switch(F.severity){case U$.ERROR:W=`${C7.Colours.red}${F.severity}${C7.Colours.reset}`;break;case U$.INFO:W=`${C7.Colours.magenta}${F.severity}${C7.Colours.reset}`;break;case U$.WARNING:W=`${C7.Colours.yellow}${F.severity}${C7.Colours.reset}`;break;default:W=(J=F.severity)!==null&&J!==void 0?J:U$.DEFAULT;break}let Z=T$1.formatWithOptions({colors:C7.Colours.enabled},...A),D=Object.assign({},F);delete D.severity;let G=Object.getOwnPropertyNames(D).length?JSON.stringify(D):"",z=G?`${C7.Colours.grey}${G}${C7.Colours.reset}`:"";console.error("%s [%s|%s] %s%s",Y,X,W,Z,G?` ${z}`:"")}}setFilters(){let F=this.filters.join(",").replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^");this.enabledRegexp=new RegExp(`^${F}$`,"i")}}function Mx(){return new j$1}class O$1 extends pK{constructor($){super();this.debugPkg=$}makeLogger($){let F=this.debugPkg($);return(A,...J)=>{F(J[0],...J.slice(1))}}setFilters(){var $;let F=($=lK.env.NODE_DEBUG)!==null&&$!==void 0?$:"";lK.env.NODE_DEBUG=`${F}${F?",":""}${this.filters.join(",")}`}}function we1($){return new O$1($)}class S$1 extends pK{constructor($){var F;super();this.upstream=(F=$)!==null&&F!==void 0?F:void 0}makeLogger($){var F;let A=(F=this.upstream)===null||F===void 0?void 0:F.makeLogger($);return(J,...X)=>{var Y;let W=(Y=J.severity)!==null&&Y!==void 0?Y:U$.INFO,Z=Object.assign({severity:W,message:T$1.format(...X)},J),D=JSON.stringify(Z);if(A)A(J,D);else console.log("%s",D)}}setFilters(){var $;($=this.upstream)===null||$===void 0||$.setFilters()}}function qe1($){return new S$1($)}$2.env={nodeEnables:"GOOGLE_SDK_NODE_LOGGING"};var Px=new Map,M7=void 0;function Le1($){M7=$,Px.clear()}function _$1($,F){if(!M7){if(!lK.env[$2.env.nodeEnables])return $2.placeholder}if(!$)return $2.placeholder;if(F)$=`${F.instance.namespace}:${$}`;let A=Px.get($);if(A)return A.func;if(M7===null)return $2.placeholder;else if(M7===void 0)M7=Mx();let J=(()=>{let X=void 0;return new vN($,(W,...Z)=>{if(X!==M7){if(M7===null)return;else if(M7===void 0)M7=Mx();X=M7}M7===null||M7===void 0||M7.log($,W,...Z)})})();return Px.set($,J),J.func}});var Rx=O((tW)=>{var Ee1=tW&&tW.__createBinding||(Object.create?function($,F,A,J){if(J===void 0)J=A;var X=Object.getOwnPropertyDescriptor(F,A);if(!X||("get"in X?!F.__esModule:X.writable||X.configurable))X={enumerable:!0,get:function(){return F[A]}};Object.defineProperty($,J,X)}:function($,F,A,J){if(J===void 0)J=A;$[J]=F[A]}),Ve1=tW&&tW.__exportStar||function($,F){for(var A in $)if(A!=="default"&&!Object.prototype.hasOwnProperty.call(F,A))Ee1(F,$,A)};Object.defineProperty(tW,"__esModule",{value:!0});Ve1(k$1(),tW)});var rG=O((G0)=>{var x$1=G0&&G0.__createBinding||(Object.create?function($,F,A,J){if(J===void 0)J=A;var X=Object.getOwnPropertyDescriptor(F,A);if(!X||("get"in X?!F.__esModule:X.writable||X.configurable))X={enumerable:!0,get:function(){return F[A]}};Object.defineProperty($,J,X)}:function($,F,A,J){if(J===void 0)J=A;$[J]=F[A]}),Ne1=G0&&G0.__setModuleDefault||(Object.create?function($,F){Object.defineProperty($,"default",{enumerable:!0,value:F})}:function($,F){$.default=F}),Ce1=G0&&G0.__importStar||function(){var $=function(F){return $=Object.getOwnPropertyNames||function(A){var J=[];for(var X in A)if(Object.prototype.hasOwnProperty.call(A,X))J[J.length]=X;return J},$(F)};return function(F){if(F&&F.__esModule)return F;var A={};if(F!=null){for(var J=$(F),X=0;X<J.length;X++)if(J[X]!=="default")x$1(A,F,J[X])}return Ne1(A,F),A}}(),Me1=G0&&G0.__exportStar||function($,F){for(var A in $)if(A!=="default"&&!Object.prototype.hasOwnProperty.call(F,A))x$1(F,$,A)};Object.defineProperty(G0,"__esModule",{value:!0});G0.gcpResidencyCache=G0.METADATA_SERVER_DETECTION=G0.HEADERS=G0.HEADER_VALUE=G0.HEADER_NAME=G0.SECONDARY_HOST_ADDRESS=G0.HOST_ADDRESS=G0.BASE_PATH=void 0;G0.instance=Oe1;G0.project=Se1;G0.universe=_e1;G0.bulk=ke1;G0.isAvailable=xe1;G0.resetIsAvailableCache=ge1;G0.getGCPResidency=jx;G0.setGCPResidency=g$1;G0.requestTimeout=f$1;var Ix=c9(),Pe1=B$1(),Re1=Cx(),Ie1=Ce1(Rx());G0.BASE_PATH="/computeMetadata/v1";G0.HOST_ADDRESS="http://169.254.169.254";G0.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.";G0.HEADER_NAME="Metadata-Flavor";G0.HEADER_VALUE="Google";G0.HEADERS=Object.freeze({[G0.HEADER_NAME]:G0.HEADER_VALUE});var b$1=Ie1.log("gcp-metadata");G0.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"});function Tx($){if(!$)$=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||G0.HOST_ADDRESS;if(!/^https?:\/\//.test($))$=`http://${$}`;return new URL(G0.BASE_PATH,$).href}function Te1($){Object.keys($).forEach((F)=>{switch(F){case"params":case"property":case"headers":break;case"qs":throw Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw Error(`'${F}' is not a valid configuration option.`)}})}async function iK($,F={},A=3,J=!1){let X=new Headers(G0.HEADERS),Y="",W={};if(typeof $==="object"){let H=$;new Headers(H.headers).forEach((U,Q)=>X.set(Q,U)),Y=H.metadataKey,W=H.params||W,A=H.noResponseRetries||A,J=H.fastFail||J}else Y=$;if(typeof F==="string")Y+=`/${F}`;else{if(Te1(F),F.property)Y+=`/${F.property}`;new Headers(F.headers).forEach((H,U)=>X.set(U,H)),W=F.params||W}let Z=J?je1:Ix.request,D={url:`${Tx()}/${Y}`,headers:X,retryConfig:{noResponseRetries:A},params:W,responseType:"text",timeout:f$1()};b$1.info("instance request %j",D);let G=await Z(D);b$1.info("instance metadata is %s",G.data);let z=G.headers.get(G0.HEADER_NAME);if(z!==G0.HEADER_VALUE)throw RangeError(`Invalid response from metadata service: incorrect ${G0.HEADER_NAME} header. Expected '${G0.HEADER_VALUE}', got ${z?`'${z}'`:"no header"}`);if(typeof G.data==="string")try{return Pe1.parse(G.data)}catch{}return G.data}async function je1($){let F={...$,url:$.url?.toString().replace(Tx(),Tx(G0.SECONDARY_HOST_ADDRESS))},A=(0,Ix.request)($),J=(0,Ix.request)(F);return Promise.any([A,J])}function Oe1($){return iK("instance",$)}function Se1($){return iK("project",$)}function _e1($){return iK("universe",$)}async function ke1($){let F={};return await Promise.all($.map((A)=>{return(async()=>{let J=await iK(A),X=A.metadataKey;F[X]=J})()})),F}function be1(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}var yN;async function xe1(){if(process.env.METADATA_SERVER_DETECTION){let $=process.env.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!($ in G0.METADATA_SERVER_DETECTION))throw RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${$}\`, but it should be \`${Object.keys(G0.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch($){case"assume-present":return!0;case"none":return!1;case"bios-only":return jx();case"ping-only":}}try{if(yN===void 0)yN=iK("instance",void 0,be1(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST));return await yN,!0}catch($){let F=$;if(process.env.DEBUG_AUTH)console.info(F);if(F.type==="request-timeout")return!1;if(F.response&&F.response.status===404)return!1;else{if(!(F.response&&F.response.status===404)&&(!F.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(F.code.toString()))){let A="UNKNOWN";if(F.code)A=F.code.toString();process.emitWarning(`received unexpected error = ${F.message} code = ${A}`,"MetadataLookupWarning")}return!1}}}function ge1(){yN=void 0}G0.gcpResidencyCache=null;function jx(){if(G0.gcpResidencyCache===null)g$1();return G0.gcpResidencyCache}function g$1($=null){G0.gcpResidencyCache=$!==null?$:(0,Re1.detectGCPResidency)()}function f$1(){return jx()?0:3000}Me1(Cx(),G0)});var Q$=O((v$1)=>{Object.defineProperty(v$1,"__esModule",{value:!0});v$1.aws4=void 0;v$1.getKerberos=fe1;v$1.getZstdLibrary=ve1;v$1.getAwsCredentialProvider=ye1;v$1.getGcpMetadata=ue1;v$1.getSnappy=he1;v$1.getSocks=me1;v$1.getMongoDBClientEncryption=ce1;var bX=_1();function nK($){return new Proxy($?{kModuleError:$}:{},{get:(A,J)=>{if(J==="kModuleError")return $;throw $},set:()=>{throw $}})}function fe1(){let $;try{$=(()=>{throw new Error("Cannot require module "+"kerberos");})()}catch(F){$=nK(new bX.MongoMissingDependencyError("Optional module `kerberos` not found. Please install it to enable kerberos authentication",{cause:F,dependencyName:"kerberos"}))}return $}function ve1(){let $;try{$=(()=>{throw new Error("Cannot require module "+"@mongodb-js/zstd");})()}catch(F){$=nK(new bX.MongoMissingDependencyError("Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression",{cause:F,dependencyName:"zstd"}))}return $}function ye1(){try{return (()=>{throw new Error("Cannot require module "+"@aws-sdk/credential-providers");})()}catch($){return nK(new bX.MongoMissingDependencyError("Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk.",{cause:$,dependencyName:"@aws-sdk/credential-providers"}))}}function ue1(){try{return rG()}catch($){return nK(new bX.MongoMissingDependencyError("Optional module `gcp-metadata` not found. Please install it to enable getting gcp credentials via the official sdk.",{cause:$,dependencyName:"gcp-metadata"}))}}function he1(){try{return (()=>{throw new Error("Cannot require module "+"snappy");})()}catch($){return{kModuleError:new bX.MongoMissingDependencyError("Optional module `snappy` not found. Please install it to enable snappy compression",{cause:$,dependencyName:"snappy"})}}}function me1(){try{return (()=>{throw new Error("Cannot require module "+"socks");})()}catch($){return{kModuleError:new bX.MongoMissingDependencyError("Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy",{cause:$,dependencyName:"socks"})}}}v$1.aws4=de1();function de1(){let $;try{$=(()=>{throw new Error("Cannot require module "+"aws4");})()}catch(F){$=nK(new bX.MongoMissingDependencyError("Optional module `aws4` not found. Please install it to enable AWS authentication",{cause:F,dependencyName:"aws4"}))}return $}function ce1(){let $=null;try{$=(()=>{throw new Error("Cannot require module "+"mongodb-client-encryption");})()}catch(F){return{kModuleError:new bX.MongoMissingDependencyError("Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.",{cause:F,dependencyName:"mongodb-client-encryption"})}}return $}});var xX=O((m$1)=>{Object.defineProperty(m$1,"__esModule",{value:!0});m$1.AuthProvider=m$1.AuthContext=void 0;var se1=_1();class u$1{constructor($,F,A){this.reauthenticating=!1,this.connection=$,this.credentials=F,this.options=A}}m$1.AuthContext=u$1;class h$1{async prepare($,F){return $}async reauth($){if($.reauthenticating)throw new se1.MongoRuntimeError("Reauthentication already in progress.");try{$.reauthenticating=!0,await this.auth($)}finally{$.reauthenticating=!1}}}m$1.AuthProvider=h$1});var hN=O((n$1)=>{Object.defineProperty(n$1,"__esModule",{value:!0});n$1.GSSAPI=n$1.GSSAPICanonicalizationValue=void 0;n$1.performGSSAPICanonicalizeHostName=i$1;n$1.resolveCname=_x;var Sx=Z1("dns"),ee1=Q$(),c$1=_1(),$10=l1(),F10=xX();n$1.GSSAPICanonicalizationValue=Object.freeze({on:!0,off:!1,none:"none",forward:"forward",forwardAndReverse:"forwardAndReverse"});async function Ox($,F){return await $.command((0,$10.ns)("$external.$cmd"),F)}var rK;class l$1 extends F10.AuthProvider{async auth($){let{connection:F,credentials:A}=$;if(A==null)throw new c$1.MongoMissingCredentialsError("Credentials required for GSSAPI authentication");let{username:J}=A,X=await A10($),Y=await X.step(""),W=await Ox(F,J10(Y)),Z=await p$1(X,10,W.payload),D=await Ox(F,X10(Z,W.conversationId)),G=await Y10(X,J,D.payload);await Ox(F,{saslContinue:1,conversationId:D.conversationId,payload:G})}}n$1.GSSAPI=l$1;async function A10($){let{hostAddress:F}=$.options,{credentials:A}=$;if(!F||typeof F.host!=="string"||!A)throw new c$1.MongoInvalidArgumentError("Connection must have host and port and credentials defined.");if(W10(),"kModuleError"in rK)throw rK.kModuleError;let{initializeClient:J}=rK,{username:X,password:Y}=A,W=A.mechanismProperties,Z=W.SERVICE_NAME??"mongodb",D=await i$1(F.host,W),G={};if(Y!=null)Object.assign(G,{user:X,password:Y});let z=W.SERVICE_HOST??D,H=`${Z}${process.platform==="win32"?"/":"@"}${z}`;if("SERVICE_REALM"in W)H=`${H}@${W.SERVICE_REALM}`;return await J(H,G)}function J10($){return{saslStart:1,mechanism:"GSSAPI",payload:$,autoAuthorize:1}}function X10($,F){return{saslContinue:1,conversationId:F,payload:$}}async function p$1($,F,A){try{return await $.step(A)||""}catch(J){if(F===0)throw J;return await p$1($,F-1,A)}}async function Y10($,F,A){let J=await $.unwrap(A);return await $.wrap(J||"",{user:F})}async function i$1($,F){let A=F.CANONICALIZE_HOST_NAME;if(!A||A===n$1.GSSAPICanonicalizationValue.none)return $;if(A===n$1.GSSAPICanonicalizationValue.on||A===n$1.GSSAPICanonicalizationValue.forwardAndReverse){let{address:J}=await Sx.promises.lookup($);try{let X=await Sx.promises.resolvePtr(J);return X.length>0?X[0]:$}catch{return await _x($)}}else return await _x($)}async function _x($){try{let F=await Sx.promises.resolveCname($);return F.length>0?F[0]:$}catch{return $}}function W10(){if(!rK)rK=(0,ee1.getKerberos)()}});var fF=O((a$1)=>{Object.defineProperty(a$1,"__esModule",{value:!0});a$1.AUTH_MECHS_AUTH_SRC_EXTERNAL=a$1.AuthMechanism=void 0;a$1.AuthMechanism=Object.freeze({MONGODB_AWS:"MONGODB-AWS",MONGODB_DEFAULT:"DEFAULT",MONGODB_GSSAPI:"GSSAPI",MONGODB_PLAIN:"PLAIN",MONGODB_SCRAM_SHA1:"SCRAM-SHA-1",MONGODB_SCRAM_SHA256:"SCRAM-SHA-256",MONGODB_X509:"MONGODB-X509",MONGODB_OIDC:"MONGODB-OIDC"});a$1.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([a$1.AuthMechanism.MONGODB_GSSAPI,a$1.AuthMechanism.MONGODB_AWS,a$1.AuthMechanism.MONGODB_OIDC,a$1.AuthMechanism.MONGODB_X509])});var dN=O((e$1)=>{Object.defineProperty(e$1,"__esModule",{value:!0});e$1.MongoCredentials=e$1.DEFAULT_ALLOWED_HOSTS=void 0;var L5=_1(),G10=hN(),t8=fF();function z10($){if($){if(Array.isArray($.saslSupportedMechs))return $.saslSupportedMechs.includes(t8.AuthMechanism.MONGODB_SCRAM_SHA256)?t8.AuthMechanism.MONGODB_SCRAM_SHA256:t8.AuthMechanism.MONGODB_SCRAM_SHA1}return t8.AuthMechanism.MONGODB_SCRAM_SHA256}var s$1=["test","azure","gcp","k8s"],o$1="Auth mechanism property ALLOWED_HOSTS must be an array of strings.";e$1.DEFAULT_ALLOWED_HOSTS=["*.mongodb.net","*.mongodb-qa.net","*.mongodb-dev.net","*.mongodbgov.net","localhost","127.0.0.1","::1"];var H10="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure or gcp.";class mN{constructor($){if(this.username=$.username??"",this.password=$.password,this.source=$.source,!this.source&&$.db)this.source=$.db;if(this.mechanism=$.mechanism||t8.AuthMechanism.MONGODB_DEFAULT,this.mechanismProperties=$.mechanismProperties||{},this.mechanism===t8.AuthMechanism.MONGODB_OIDC&&!this.mechanismProperties.ALLOWED_HOSTS)this.mechanismProperties={...this.mechanismProperties,ALLOWED_HOSTS:e$1.DEFAULT_ALLOWED_HOSTS};Object.freeze(this.mechanismProperties),Object.freeze(this)}equals($){return this.mechanism===$.mechanism&&this.username===$.username&&this.password===$.password&&this.source===$.source}resolveAuthMechanism($){if(this.mechanism.match(/DEFAULT/i))return new mN({username:this.username,password:this.password,source:this.source,mechanism:z10($),mechanismProperties:this.mechanismProperties});return this}validate(){if((this.mechanism===t8.AuthMechanism.MONGODB_GSSAPI||this.mechanism===t8.AuthMechanism.MONGODB_PLAIN||this.mechanism===t8.AuthMechanism.MONGODB_SCRAM_SHA1||this.mechanism===t8.AuthMechanism.MONGODB_SCRAM_SHA256)&&!this.username)throw new L5.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);if(this.mechanism===t8.AuthMechanism.MONGODB_OIDC){if(this.username&&this.mechanismProperties.ENVIRONMENT&&this.mechanismProperties.ENVIRONMENT!=="azure")throw new L5.MongoInvalidArgumentError(`username and ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' may not be used together for mechanism '${this.mechanism}'.`);if(this.username&&this.password)throw new L5.MongoInvalidArgumentError(`No password is allowed in ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' for '${this.mechanism}'.`);if((this.mechanismProperties.ENVIRONMENT==="azure"||this.mechanismProperties.ENVIRONMENT==="gcp")&&!this.mechanismProperties.TOKEN_RESOURCE)throw new L5.MongoInvalidArgumentError(H10);if(this.mechanismProperties.ENVIRONMENT&&!s$1.includes(this.mechanismProperties.ENVIRONMENT))throw new L5.MongoInvalidArgumentError(`Currently only a ENVIRONMENT in ${s$1.join(",")} is supported for mechanism '${this.mechanism}'.`);if(!this.mechanismProperties.ENVIRONMENT&&!this.mechanismProperties.OIDC_CALLBACK&&!this.mechanismProperties.OIDC_HUMAN_CALLBACK)throw new L5.MongoInvalidArgumentError(`Either a ENVIRONMENT, OIDC_CALLBACK, or OIDC_HUMAN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.ALLOWED_HOSTS){let F=this.mechanismProperties.ALLOWED_HOSTS;if(!Array.isArray(F))throw new L5.MongoInvalidArgumentError(o$1);for(let A of F)if(typeof A!=="string")throw new L5.MongoInvalidArgumentError(o$1)}}if(t8.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)){if(this.source!=null&&this.source!=="$external")throw new L5.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`)}if(this.mechanism===t8.AuthMechanism.MONGODB_PLAIN&&this.source==null)throw new L5.MongoAPIError("PLAIN Authentication Mechanism needs an auth source");if(this.mechanism===t8.AuthMechanism.MONGODB_X509&&this.password!=null){if(this.password===""){Reflect.set(this,"password",void 0);return}throw new L5.MongoAPIError("Password not allowed for mechanism MONGODB-X509")}let $=this.mechanismProperties.CANONICALIZE_HOST_NAME??!1;if(!Object.values(G10.GSSAPICanonicalizationValue).includes($))throw new L5.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${$}`)}static merge($,F){return new mN({username:F.username??$?.username??"",password:F.password??$?.password??"",mechanism:F.mechanism??$?.mechanism??t8.AuthMechanism.MONGODB_DEFAULT,mechanismProperties:F.mechanismProperties??$?.mechanismProperties??{},source:F.source??F.db??$?.source??"admin"})}}e$1.MongoCredentials=mN});var AF1=O((on0,U10)=>{U10.exports={name:"mongodb",version:"7.0.0",description:"The official MongoDB driver for Node.js",main:"lib/index.js",files:["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],types:"mongodb.d.ts",repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},dependencies:{"@mongodb-js/saslprep":"^1.3.0",bson:"^7.0.0","mongodb-connection-string-url":"^7.0.0"},peerDependencies:{"@aws-sdk/credential-providers":"^3.806.0","@mongodb-js/zstd":"^7.0.0","gcp-metadata":"^7.0.1",kerberos:"^7.0.0","mongodb-client-encryption":">=7.0.0 <7.1.0",snappy:"^7.3.2",socks:"^2.8.6"},peerDependenciesMeta:{"@aws-sdk/credential-providers":{optional:!0},"@mongodb-js/zstd":{optional:!0},kerberos:{optional:!0},snappy:{optional:!0},"mongodb-client-encryption":{optional:!0},"gcp-metadata":{optional:!0},socks:{optional:!0}},devDependencies:{"@aws-sdk/credential-providers":"^3.876.0","@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.52.11","@microsoft/tsdoc-config":"^0.17.1","@mongodb-js/zstd":"^7.0.0","@types/chai":"^4.3.17","@types/chai-subset":"^1.3.5","@types/express":"^5.0.3","@types/kerberos":"^1.1.5","@types/mocha":"^10.0.9","@types/node":"^22.15.3","@types/saslprep":"^1.0.3","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/sinon-chai":"^4.0.0","@types/whatwg-url":"^13.0.0","@typescript-eslint/eslint-plugin":"^8.41.0","@typescript-eslint/parser":"^8.31.1",chai:"^4.4.1","chai-subset":"^1.6.0",chalk:"^4.1.2",eslint:"^9.34.0","eslint-config-prettier":"^10.1.8","eslint-plugin-mocha":"^10.4.1","eslint-plugin-prettier":"^5.5.4","eslint-plugin-simple-import-sort":"^12.1.1","eslint-plugin-tsdoc":"^0.4.0","eslint-plugin-unused-imports":"^4.2.0",express:"^5.1.0","gcp-metadata":"^7.0.1","js-yaml":"^4.1.0",mocha:"^11.7.1","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^7.0.0",nyc:"^15.1.0",prettier:"^3.6.2",semver:"^7.7.2",sinon:"^18.0.1","sinon-chai":"^3.7.0",snappy:"^7.3.2",socks:"^2.8.7","source-map-support":"^0.5.21","ts-node":"^10.9.2",tsd:"^0.33.0",typescript:"5.8.3","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1",yargs:"^18.0.0"},license:"Apache-2.0",engines:{node:">=20.19.0"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},homepage:"https://github.com/mongodb/node-mongodb-native",scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && ESLINT_USE_FLAT_CONFIG=false eslint --no-ignore --fix mongodb.d.ts","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"npm --prefix test/benchmarks/driver_bench start","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"npm run build:dts && ESLINT_USE_FLAT_CONFIG=false eslint -v && ESLINT_USE_FLAT_CONFIG=false eslint --max-warnings=0 --ext '.js,.ts' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --target es2023 --module commonjs --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.js test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.js test/integration","check:unit":"nyc mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"nyc mocha --config test/manual/mocharc.js test/manual/atlas_connectivity.test.ts","check:drivers-atlas-testing":"nyc mocha --config test/mocha_mongodb.js test/atlas/drivers_atlas_testing.test.ts","check:aws":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_aws.test.ts test/integration/auth/mongodb_aws.prose.test.ts","check:oidc-auth":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/auth.spec.test.ts","check:oidc-test":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc.prose.test.ts","check:oidc-azure":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_azure.prose.05.test.ts","check:oidc-gcp":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_gcp.prose.06.test.ts","check:oidc-k8s":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_k8s.prose.07.test.ts","check:kerberos":"nyc mocha --config test/manual/mocharc.js test/manual/kerberos.test.ts","check:tls":"nyc mocha --config test/manual/mocharc.js test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.js test/manual/ldap.test.ts","check:socks5":"nyc mocha --config test/manual/mocharc.js test/manual/socks5.test.ts","check:csfle":"nyc mocha --config test/mocha_mongodb.js test/integration/client-side-encryption","check:snappy":"nyc mocha test/unit/assorted/snappy.test.js","check:x509":"nyc mocha test/manual/x509_auth.test.ts","fix:eslint":"npm run check:eslint -- --fix",prepare:"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts",test:"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},tsd:{directory:"test/types",compilerOptions:{strict:!0,target:"esnext",module:"commonjs",moduleResolution:"node"}}}});var kx=O((WF1)=>{Object.defineProperty(WF1,"__esModule",{value:!0});WF1.LimitedSizeDocument=void 0;WF1.isDriverInfoEqual=B10;WF1.makeClientMetadata=w10;WF1.getFAASEnv=YF1;var tK=Z1("os"),sK=Z1("process"),aG=w0(),JF1=_1(),Q10=l1(),K10=AF1().version;function B10($,F){let A=(J,X)=>{return J||=void 0,X||=void 0,J===X};return A($.name,F.name)&&A($.platform,F.platform)&&A($.version,F.version)}class cN{constructor($){this.document=new Map,this.documentSize=5,this.maxSize=$}ifItFitsItSits($,F){let A=aG.BSON.serialize(new Map().set($,F)).byteLength-5;if(A+this.documentSize>this.maxSize)return!1;return this.documentSize+=A,this.document.set($,F),!0}toObject(){return aG.BSON.deserialize(aG.BSON.serialize(this.document),{promoteLongs:!1,promoteBuffers:!1,promoteValues:!1,useBigInt64:!1})}}WF1.LimitedSizeDocument=cN;async function w10($,{appName:F=""}){let A=new cN(512);if(F.length>0){let Z=Buffer.byteLength(F,"utf8")<=128?F:Buffer.from(F,"utf8").subarray(0,128).toString("utf8");A.ifItFitsItSits("application",{name:Z})}let J={name:"nodejs",version:K10};for(let{name:Z="",version:D=""}of $){if(Z.length>0)J.name=`${J.name}|${Z}`;if(D.length>0)J.version=`${J.version}|${D}`}if(!A.ifItFitsItSits("driver",J))throw new JF1.MongoInvalidArgumentError("Unable to include driverInfo name and version, metadata cannot exceed 512 bytes");let X=E10();for(let{platform:Z=""}of $)if(Z.length>0)X=`${X}|${Z}`;if(!A.ifItFitsItSits("platform",X))throw new JF1.MongoInvalidArgumentError("Unable to include driverInfo platform, metadata cannot exceed 512 bytes");let Y=new Map().set("name",sK.platform).set("architecture",sK.arch).set("version",tK.release()).set("type",tK.type());if(!A.ifItFitsItSits("os",Y))for(let Z of Y.keys()){if(Y.delete(Z),Y.size===0)break;if(A.ifItFitsItSits("os",Y))break}let W=YF1();if(W!=null){if(!A.ifItFitsItSits("env",W))for(let Z of W.keys()){if(W.delete(Z),W.size===0)break;if(A.ifItFitsItSits("env",W))break}}return await L10(A.toObject())}var XF1;async function q10(){XF1??=(0,Q10.fileIsAccessible)("/.dockerenv");let $=await XF1,{KUBERNETES_SERVICE_HOST:F=""}=sK.env,A=F.length>0?!0:!1,J={};if($)J.runtime="docker";if(A)J.orchestrator="kubernetes";return J}async function L10($){let F=await q10();if(Object.keys(F).length===0)return $;let A=new cN(512),J={...$?.env,container:F};for(let[X,Y]of Object.entries($))if(X!=="env")A.ifItFitsItSits(X,Y);else if(!A.ifItFitsItSits("env",J))A.ifItFitsItSits("env",Y);if(!("env"in $))A.ifItFitsItSits("env",J);return A.toObject()}function YF1(){let{AWS_EXECUTION_ENV:$="",AWS_LAMBDA_RUNTIME_API:F="",FUNCTIONS_WORKER_RUNTIME:A="",K_SERVICE:J="",FUNCTION_NAME:X="",VERCEL:Y="",AWS_LAMBDA_FUNCTION_MEMORY_SIZE:W="",AWS_REGION:Z="",FUNCTION_MEMORY_MB:D="",FUNCTION_REGION:G="",FUNCTION_TIMEOUT_SEC:z="",VERCEL_REGION:H=""}=sK.env,U=$.startsWith("AWS_Lambda_")||F.length>0,Q=A.length>0,B=J.length>0||X.length>0,q=Y.length>0,L=new Map;if(q&&!(Q||B)){if(H.length>0)L.set("region",H);return L.set("name","vercel"),L}if(U&&!(Q||B||q)){if(Z.length>0)L.set("region",Z);if(W.length>0&&Number.isInteger(+W))L.set("memory_mb",new aG.Int32(W));return L.set("name","aws.lambda"),L}if(Q&&!(B||U||q))return L.set("name","azure.func"),L;if(B&&!(Q||U||q)){if(G.length>0)L.set("region",G);if(D.length>0&&Number.isInteger(+D))L.set("memory_mb",new aG.Int32(D));if(z.length>0&&Number.isInteger(+z))L.set("timeout_sec",new aG.Int32(z));return L.set("name","gcp.func"),L}return null}function E10(){if("Deno"in globalThis)return`Deno v${typeof Deno?.version?.deno==="string"?Deno?.version?.deno:"0.0.0-unknown"}, ${tK.endianness()}`;if("Bun"in globalThis)return`Bun v${typeof Bun?.version==="string"?Bun?.version:"0.0.0-unknown"}, ${tK.endianness()}`;return`Node.js ${sK.version}, ${tK.endianness()}`}});var pN=O((HF1)=>{function F2($,F,A){if(A.globals)$=A.globals[$.name];return new $(`${A.context?A.context:"Value"} ${F}.`)}function oG($,F){if(typeof $==="bigint")throw F2(TypeError,"is a BigInt which cannot be converted to a number",F);if(!F.globals)return Number($);return F.globals.Number($)}function GF1($){if($>0&&$%1===0.5&&($&1)===0||$<0&&$%1===-0.5&&($&1)===1)return oK(Math.floor($));return oK(Math.round($))}function lN($){return oK(Math.trunc($))}function DF1($){return $<0?-1:1}function M10($,F){let A=$%F;if(DF1(F)!==DF1(A))return A+F;return A}function oK($){return $===0?0:$}function eG($,{unsigned:F}){let A,J;if(F)A=0,J=2**$-1;else A=-(2**($-1)),J=2**($-1)-1;let X=2**$,Y=2**($-1);return(W,Z={})=>{let D=oG(W,Z);if(D=oK(D),Z.enforceRange){if(!Number.isFinite(D))throw F2(TypeError,"is not a finite number",Z);if(D=lN(D),D<A||D>J)throw F2(TypeError,`is outside the accepted range of ${A} to ${J}, inclusive`,Z);return D}if(!Number.isNaN(D)&&Z.clamp)return D=Math.min(Math.max(D,A),J),D=GF1(D),D;if(!Number.isFinite(D)||D===0)return 0;if(D=lN(D),D>=A&&D<=J)return D;if(D=M10(D,X),!F&&D>=Y)return D-X;return D}}function zF1($,{unsigned:F}){let A=Number.MAX_SAFE_INTEGER,J=F?0:Number.MIN_SAFE_INTEGER,X=F?BigInt.asUintN:BigInt.asIntN;return(Y,W={})=>{let Z=oG(Y,W);if(Z=oK(Z),W.enforceRange){if(!Number.isFinite(Z))throw F2(TypeError,"is not a finite number",W);if(Z=lN(Z),Z<J||Z>A)throw F2(TypeError,`is outside the accepted range of ${J} to ${A}, inclusive`,W);return Z}if(!Number.isNaN(Z)&&W.clamp)return Z=Math.min(Math.max(Z,J),A),Z=GF1(Z),Z;if(!Number.isFinite(Z)||Z===0)return 0;let D=BigInt(lN(Z));return D=X($,D),Number(D)}}HF1.any=($)=>{return $};HF1.undefined=()=>{return};HF1.boolean=($)=>{return Boolean($)};HF1.byte=eG(8,{unsigned:!1});HF1.octet=eG(8,{unsigned:!0});HF1.short=eG(16,{unsigned:!1});HF1["unsigned short"]=eG(16,{unsigned:!0});HF1.long=eG(32,{unsigned:!1});HF1["unsigned long"]=eG(32,{unsigned:!0});HF1["long long"]=zF1(64,{unsigned:!1});HF1["unsigned long long"]=zF1(64,{unsigned:!0});HF1.double=($,F={})=>{let A=oG($,F);if(!Number.isFinite(A))throw F2(TypeError,"is not a finite floating-point value",F);return A};HF1["unrestricted double"]=($,F={})=>{return oG($,F)};HF1.float=($,F={})=>{let A=oG($,F);if(!Number.isFinite(A))throw F2(TypeError,"is not a finite floating-point value",F);if(Object.is(A,-0))return A;let J=Math.fround(A);if(!Number.isFinite(J))throw F2(TypeError,"is outside the range of a single-precision floating-point value",F);return J};HF1["unrestricted float"]=($,F={})=>{let A=oG($,F);if(isNaN(A))return A;if(Object.is(A,-0))return A;return Math.fround(A)};HF1.DOMString=($,F={})=>{if(F.treatNullAsEmptyString&&$===null)return"";if(typeof $==="symbol")throw F2(TypeError,"is a symbol, which cannot be converted to a string",F);return(F.globals?F.globals.String:String)($)};HF1.ByteString=($,F={})=>{let A=HF1.DOMString($,F),J;for(let X=0;(J=A.codePointAt(X))!==void 0;++X)if(J>255)throw F2(TypeError,"is not a valid ByteString",F);return A};HF1.USVString=($,F={})=>{let A=HF1.DOMString($,F),J=A.length,X=[];for(let Y=0;Y<J;++Y){let W=A.charCodeAt(Y);if(W<55296||W>57343)X.push(String.fromCodePoint(W));else if(56320<=W&&W<=57343)X.push(String.fromCodePoint(65533));else if(Y===J-1)X.push(String.fromCodePoint(65533));else{let Z=A.charCodeAt(Y+1);if(56320<=Z&&Z<=57343){let D=W&1023,G=Z&1023;X.push(String.fromCodePoint(65536+1024*D+G)),++Y}else X.push(String.fromCodePoint(65533))}}return X.join("")};HF1.object=($,F={})=>{if($===null||typeof $!=="object"&&typeof $!=="function")throw F2(TypeError,"is not an object",F);return $};var P10=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,R10=typeof SharedArrayBuffer==="function"?Object.getOwnPropertyDescriptor(SharedArrayBuffer.prototype,"byteLength").get:null;function bx($){try{return P10.call($),!0}catch{return!1}}function tG($){try{return R10.call($),!0}catch{return!1}}function sG($){try{return new Uint8Array($),!1}catch{return!0}}HF1.ArrayBuffer=($,F={})=>{if(!bx($)){if(F.allowShared&&!tG($))throw F2(TypeError,"is not an ArrayBuffer or SharedArrayBuffer",F);throw F2(TypeError,"is not an ArrayBuffer",F)}if(sG($))throw F2(TypeError,"is a detached ArrayBuffer",F);return $};var I10=Object.getOwnPropertyDescriptor(DataView.prototype,"byteLength").get;HF1.DataView=($,F={})=>{try{I10.call($)}catch(A){throw F2(TypeError,"is not a DataView",F)}if(!F.allowShared&&tG($.buffer))throw F2(TypeError,"is backed by a SharedArrayBuffer, which is not allowed",F);if(sG($.buffer))throw F2(TypeError,"is backed by a detached ArrayBuffer",F);return $};var T10=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array).prototype,Symbol.toStringTag).get;[Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach(($)=>{let{name:F}=$,A=/^[AEIOU]/u.test(F)?"an":"a";HF1[F]=(J,X={})=>{if(!ArrayBuffer.isView(J)||T10.call(J)!==F)throw F2(TypeError,`is not ${A} ${F} object`,X);if(!X.allowShared&&tG(J.buffer))throw F2(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",X);if(sG(J.buffer))throw F2(TypeError,"is a view on a detached ArrayBuffer",X);return J}});HF1.ArrayBufferView=($,F={})=>{if(!ArrayBuffer.isView($))throw F2(TypeError,"is not a view on an ArrayBuffer or SharedArrayBuffer",F);if(!F.allowShared&&tG($.buffer))throw F2(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",F);if(sG($.buffer))throw F2(TypeError,"is a view on a detached ArrayBuffer",F);return $};HF1.BufferSource=($,F={})=>{if(ArrayBuffer.isView($)){if(!F.allowShared&&tG($.buffer))throw F2(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",F);if(sG($.buffer))throw F2(TypeError,"is a view on a detached ArrayBuffer",F);return $}if(!F.allowShared&&!bx($))throw F2(TypeError,"is not an ArrayBuffer or a view on one",F);if(F.allowShared&&!tG($)&&!bx($))throw F2(TypeError,"is not an ArrayBuffer, SharedArrayBuffer, or a view on one",F);if(sG($))throw F2(TypeError,"is a detached ArrayBuffer",F);return $};HF1.DOMTimeStamp=HF1["unsigned long long"]});var nN=O((EF1,VF1)=>{function t10($){return typeof $==="object"&&$!==null||typeof $==="function"}var QF1=Function.prototype.call.bind(Object.prototype.hasOwnProperty);function s10($,F){for(let A of Reflect.ownKeys(F)){let J=Reflect.getOwnPropertyDescriptor(F,A);if(J&&!Reflect.defineProperty($,A,J))throw TypeError(`Cannot redefine property: ${String(A)}`)}}function o10($,F){let A=wF1($);return Object.defineProperties(Object.create(A["%Object.prototype%"]),Object.getOwnPropertyDescriptors(F))}var KF1=Symbol("wrapper"),BF1=Symbol("impl"),$z=Symbol("SameObject caches"),iN=Symbol.for("[webidl2js] constructor registry"),e10=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);function wF1($){if(QF1($,iN))return $[iN];let F=Object.create(null);F["%Object.prototype%"]=$.Object.prototype,F["%IteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(new $.Array()[Symbol.iterator]()));try{F["%AsyncIteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf($.eval("(async function* () {})").prototype))}catch{F["%AsyncIteratorPrototype%"]=e10}return $[iN]=F,F}function $00($,F,A){if(!$[$z])$[$z]=Object.create(null);if(F in $[$z])return $[$z][F];return $[$z][F]=A(),$[$z][F]}function qF1($){return $?$[KF1]:null}function LF1($){return $?$[BF1]:null}function F00($){let F=qF1($);return F?F:$}function A00($){let F=LF1($);return F?F:$}var J00=Symbol("internal");function X00($){if(typeof $!=="string")return!1;let F=$>>>0;if(F===4294967295)return!1;let A=`${F}`;if($!==A)return!1;return!0}var Y00=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get;function W00($){try{return Y00.call($),!0}catch(F){return!1}}function Z00([$,F],A){let J;switch(A){case"key":J=$;break;case"value":J=F;break;case"key+value":J=[$,F];break}return{value:J,done:!1}}var D00=Symbol("supports property index"),G00=Symbol("supported property indices"),z00=Symbol("supports property name"),H00=Symbol("supported property names"),U00=Symbol("indexed property get"),Q00=Symbol("indexed property set new"),K00=Symbol("indexed property set existing"),B00=Symbol("named property get"),w00=Symbol("named property set new"),q00=Symbol("named property set existing"),L00=Symbol("named property delete"),E00=Symbol("async iterator get the next iteration result"),V00=Symbol("async iterator return steps"),N00=Symbol("async iterator initialization steps"),C00=Symbol("async iterator end of iteration");VF1.exports=EF1={isObject:t10,hasOwn:QF1,define:s10,newObjectInRealm:o10,wrapperSymbol:KF1,implSymbol:BF1,getSameObject:$00,ctorRegistrySymbol:iN,initCtorRegistry:wF1,wrapperForImpl:qF1,implForWrapper:LF1,tryWrapperForImpl:F00,tryImplForWrapper:A00,iterInternalSymbol:J00,isArrayBuffer:W00,isArrayIndexPropName:X00,supportsPropertyIndex:D00,supportedPropertyIndices:G00,supportsPropertyName:z00,supportedPropertyNames:H00,indexedGet:U00,indexedSetNew:Q00,indexedSetExisting:K00,namedGet:B00,namedSetNew:w00,namedSetExisting:q00,namedDelete:L00,asyncIteratorNext:E00,asyncIteratorReturn:V00,asyncIteratorInit:N00,asyncIteratorEOI:C00,iteratorResult:Z00}});var jF1=O((Fr0,TF1)=>{var M00=/^xn--/,P00=/[^\0-\x7F]/,R00=/[\x2E\u3002\uFF0E\uFF61]/g,I00={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},vF=Math.floor,gx=String.fromCharCode;function gX($){throw RangeError(I00[$])}function T00($,F){let A=[],J=$.length;while(J--)A[J]=F($[J]);return A}function CF1($,F){let A=$.split("@"),J="";if(A.length>1)J=A[0]+"@",$=A[1];$=$.replace(R00,".");let X=$.split("."),Y=T00(X,F).join(".");return J+Y}function MF1($){let F=[],A=0,J=$.length;while(A<J){let X=$.charCodeAt(A++);if(X>=55296&&X<=56319&&A<J){let Y=$.charCodeAt(A++);if((Y&64512)==56320)F.push(((X&1023)<<10)+(Y&1023)+65536);else F.push(X),A--}else F.push(X)}return F}var j00=($)=>String.fromCodePoint(...$),O00=function($){if($>=48&&$<58)return 26+($-48);if($>=65&&$<91)return $-65;if($>=97&&$<123)return $-97;return 36},NF1=function($,F){return $+22+75*($<26)-((F!=0)<<5)},PF1=function($,F,A){let J=0;$=A?vF($/700):$>>1,$+=vF($/F);for(;$>455;J+=36)$=vF($/35);return vF(J+36*$/($+38))},RF1=function($){let F=[],A=$.length,J=0,X=128,Y=72,W=$.lastIndexOf("-");if(W<0)W=0;for(let Z=0;Z<W;++Z){if($.charCodeAt(Z)>=128)gX("not-basic");F.push($.charCodeAt(Z))}for(let Z=W>0?W+1:0;Z<A;){let D=J;for(let z=1,H=36;;H+=36){if(Z>=A)gX("invalid-input");let U=O00($.charCodeAt(Z++));if(U>=36)gX("invalid-input");if(U>vF((2147483647-J)/z))gX("overflow");J+=U*z;let Q=H<=Y?1:H>=Y+26?26:H-Y;if(U<Q)break;let B=36-Q;if(z>vF(2147483647/B))gX("overflow");z*=B}let G=F.length+1;if(Y=PF1(J-D,G,D==0),vF(J/G)>2147483647-X)gX("overflow");X+=vF(J/G),J%=G,F.splice(J++,0,X)}return String.fromCodePoint(...F)},IF1=function($){let F=[];$=MF1($);let A=$.length,J=128,X=0,Y=72;for(let D of $)if(D<128)F.push(gx(D));let W=F.length,Z=W;if(W)F.push("-");while(Z<A){let D=2147483647;for(let z of $)if(z>=J&&z<D)D=z;let G=Z+1;if(D-J>vF((2147483647-X)/G))gX("overflow");X+=(D-J)*G,J=D;for(let z of $){if(z<J&&++X>2147483647)gX("overflow");if(z===J){let H=X;for(let U=36;;U+=36){let Q=U<=Y?1:U>=Y+26?26:U-Y;if(H<Q)break;let B=H-Q,q=36-Q;F.push(gx(NF1(Q+B%q,0))),H=vF(B/q)}F.push(gx(NF1(H,0))),Y=PF1(X,G,Z===W),X=0,++Z}}++X,++J}return F.join("")},S00=function($){return CF1($,function(F){return M00.test(F)?RF1(F.slice(4).toLowerCase()):F})},_00=function($){return CF1($,function(F){return P00.test(F)?"xn--"+IF1(F):F})},k00={version:"2.3.1",ucs2:{decode:MF1,encode:j00},decode:RF1,encode:IF1,toASCII:_00,toUnicode:S00};TF1.exports=k00});var SF1=O((Ar0,OF1)=>{var b00=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113B8}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]/u,x00=/[\u094D\u09CD\u0A4D\u0ACD\u0B4D\u0BCD\u0C4D\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0EBA\u0F84\u1039\u103A\u1714\u1715\u1734\u17D2\u1A60\u1B44\u1BAA\u1BAB\u1BF2\u1BF3\u2D7F\uA806\uA82C\uA8C4\uA953\uA9C0\uAAF6\uABED\u{10A3F}\u{11046}\u{11070}\u{1107F}\u{110B9}\u{11133}\u{11134}\u{111C0}\u{11235}\u{112EA}\u{1134D}\u{113CE}-\u{113D0}\u{11442}\u{114C2}\u{115BF}\u{1163F}\u{116B6}\u{1172B}\u{11839}\u{1193D}\u{1193E}\u{119E0}\u{11A34}\u{11A47}\u{11A99}\u{11C3F}\u{11D44}\u{11D45}\u{11D97}\u{11F41}\u{11F42}\u{1612F}]/u,g00=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0848\u084A-\u0853\u0855\u0860\u0862-\u0865\u0868\u0886\u0889-\u088D\u08A0-\u08A9\u08AF\u08B0\u08B3-\u08B8\u08BA-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA872\u{10AC0}-\u{10AC4}\u{10ACD}\u{10AD3}-\u{10ADC}\u{10ADE}-\u{10AE0}\u{10AEB}-\u{10AEE}\u{10B80}\u{10B82}\u{10B86}-\u{10B88}\u{10B8A}\u{10B8B}\u{10B8D}\u{10B90}\u{10BAD}\u{10BAE}\u{10D00}-\u{10D21}\u{10D23}\u{10EC3}\u{10EC4}\u{10F30}-\u{10F32}\u{10F34}-\u{10F44}\u{10F51}-\u{10F53}\u{10F70}-\u{10F73}\u{10F76}-\u{10F81}\u{10FB0}\u{10FB2}\u{10FB3}\u{10FB8}\u{10FBB}\u{10FBC}\u{10FBE}\u{10FBF}\u{10FC1}\u{10FC4}\u{10FCA}\u{10FCB}\u{1E900}-\u{1E943}][\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*\u200C[\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0858\u0860\u0862-\u0865\u0867-\u086A\u0870-\u0882\u0886\u0889-\u088E\u08A0-\u08AC\u08AE-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA871\u{10AC0}-\u{10AC5}\u{10AC7}\u{10AC9}\u{10ACA}\u{10ACE}-\u{10AD6}\u{10AD8}-\u{10AE1}\u{10AE4}\u{10AEB}-\u{10AEF}\u{10B80}-\u{10B91}\u{10BA9}-\u{10BAE}\u{10D01}-\u{10D23}\u{10EC2}-\u{10EC4}\u{10F30}-\u{10F44}\u{10F51}-\u{10F54}\u{10F70}-\u{10F81}\u{10FB0}\u{10FB2}-\u{10FB6}\u{10FB8}-\u{10FBF}\u{10FC1}-\u{10FC4}\u{10FC9}\u{10FCA}\u{1E900}-\u{1E943}]/u,f00=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,v00=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCEF}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]/u,y00=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D4A}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,u00=/^[\0-\x08\x0E-\x1B!-@\[-`\{-\x84\x86-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0600-\u070D\u070F-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u0897-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1390-\u1399\u1400\u169B\u169C\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u200B-\u200D\u200F-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20C0\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2335\u237B-\u2394\u2396-\u2429\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2D7F\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u3004\u3008-\u3020\u302A-\u302D\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E5\u31EF\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA67F\uA69E\uA69F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82C\uA838\uA839\uA874-\uA877\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uAB6A\uAB6B\uABE5\uABE8\uABED\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10101}\u{10140}-\u{1018C}\u{10190}-\u{1019C}\u{101A0}\u{101FD}\u{102E0}-\u{102FB}\u{10376}-\u{1037A}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D69}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10EFC}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11001}\u{11038}-\u{11046}\u{11052}-\u{11065}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{11660}-\u{1166C}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{11FD5}-\u{11FF1}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE2}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CC00}-\u{1CCD5}\u{1CCF0}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D1E9}\u{1D1EA}\u{1D200}-\u{1D245}\u{1D300}-\u{1D356}\u{1D6C1}\u{1D6DB}\u{1D6FB}\u{1D715}\u{1D735}\u{1D74F}\u{1D76F}\u{1D789}\u{1D7A9}\u{1D7C3}\u{1D7CE}-\u{1D7FF}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E2FF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F10F}\u{1F12F}\u{1F16A}-\u{1F16F}\u{1F1AD}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*$/u,h00=/[0-9\xB2\xB3\xB9\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\u{102E1}-\u{102FB}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,m00=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19\u{102E1}-\u{102FB}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}]/u,d00=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u0890\u0891\u08E2\u{10D30}-\u{10D39}\u{10D40}-\u{10D49}\u{10E60}-\u{10E7E}]/u,c00=/^[\0-\x08\x0E-\x1B!-\x84\x86-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065F\u066A\u0670\u06D6-\u06DC\u06DE-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u167F\u1681-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B4E-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200B-\u200E\u2010-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2429\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E5\u31EF-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1E\uFB29\uFD3E-\uFD4F\uFDCF\uFDFD-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{1091F}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10B39}-\u{10B3F}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6E}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110C2}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D5}\u{113D7}\u{113D8}\u{113E1}\u{113E2}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F5A}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{13455}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BCA3}\u{1CC00}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E4D0}-\u{1E4F9}\u{1E5D0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]*$/u,l00=/[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u06F0-\u06F9\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u2488-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E1}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCF9}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D7CE}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F100}-\u{1F10A}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u;OF1.exports={combiningMarks:b00,combiningClassVirama:x00,validZWNJ:g00,bidiDomain:f00,bidiS1LTR:v00,bidiS1RTL:y00,bidiS2:u00,bidiS3:h00,bidiS4EN:m00,bidiS4AN:d00,bidiS5:c00,bidiS6:l00}});var _F1=O((Jr0,p00)=>{p00.exports=[[[0,44],2],[[45,46],2],[47,2],[[48,57],2],[[58,64],2],[65,1,"a"],[66,1,"b"],[67,1,"c"],[68,1,"d"],[69,1,"e"],[70,1,"f"],[71,1,"g"],[72,1,"h"],[73,1,"i"],[74,1,"j"],[75,1,"k"],[76,1,"l"],[77,1,"m"],[78,1,"n"],[79,1,"o"],[80,1,"p"],[81,1,"q"],[82,1,"r"],[83,1,"s"],[84,1,"t"],[85,1,"u"],[86,1,"v"],[87,1,"w"],[88,1,"x"],[89,1,"y"],[90,1,"z"],[[91,96],2],[[97,122],2],[[123,127],2],[[128,159],3],[160,1," "],[[161,167],2],[168,1," \u0308"],[169,2],[170,1,"a"],[[171,172],2],[173,7],[174,2],[175,1," \u0304"],[[176,177],2],[178,1,"2"],[179,1,"3"],[180,1," \u0301"],[181,1,"\u03BC"],[182,2],[183,2],[184,1," \u0327"],[185,1,"1"],[186,1,"o"],[187,2],[188,1,"1\u20444"],[189,1,"1\u20442"],[190,1,"3\u20444"],[191,2],[192,1,"\xE0"],[193,1,"\xE1"],[194,1,"\xE2"],[195,1,"\xE3"],[196,1,"\xE4"],[197,1,"\xE5"],[198,1,"\xE6"],[199,1,"\xE7"],[200,1,"\xE8"],[201,1,"\xE9"],[202,1,"\xEA"],[203,1,"\xEB"],[204,1,"\xEC"],[205,1,"\xED"],[206,1,"\xEE"],[207,1,"\xEF"],[208,1,"\xF0"],[209,1,"\xF1"],[210,1,"\xF2"],[211,1,"\xF3"],[212,1,"\xF4"],[213,1,"\xF5"],[214,1,"\xF6"],[215,2],[216,1,"\xF8"],[217,1,"\xF9"],[218,1,"\xFA"],[219,1,"\xFB"],[220,1,"\xFC"],[221,1,"\xFD"],[222,1,"\xFE"],[223,6,"ss"],[[224,246],2],[247,2],[[248,255],2],[256,1,"\u0101"],[257,2],[258,1,"\u0103"],[259,2],[260,1,"\u0105"],[261,2],[262,1,"\u0107"],[263,2],[264,1,"\u0109"],[265,2],[266,1,"\u010B"],[267,2],[268,1,"\u010D"],[269,2],[270,1,"\u010F"],[271,2],[272,1,"\u0111"],[273,2],[274,1,"\u0113"],[275,2],[276,1,"\u0115"],[277,2],[278,1,"\u0117"],[279,2],[280,1,"\u0119"],[281,2],[282,1,"\u011B"],[283,2],[284,1,"\u011D"],[285,2],[286,1,"\u011F"],[287,2],[288,1,"\u0121"],[289,2],[290,1,"\u0123"],[291,2],[292,1,"\u0125"],[293,2],[294,1,"\u0127"],[295,2],[296,1,"\u0129"],[297,2],[298,1,"\u012B"],[299,2],[300,1,"\u012D"],[301,2],[302,1,"\u012F"],[303,2],[304,1,"i\u0307"],[305,2],[[306,307],1,"ij"],[308,1,"\u0135"],[309,2],[310,1,"\u0137"],[[311,312],2],[313,1,"\u013A"],[314,2],[315,1,"\u013C"],[316,2],[317,1,"\u013E"],[318,2],[[319,320],1,"l\xB7"],[321,1,"\u0142"],[322,2],[323,1,"\u0144"],[324,2],[325,1,"\u0146"],[326,2],[327,1,"\u0148"],[328,2],[329,1,"\u02BCn"],[330,1,"\u014B"],[331,2],[332,1,"\u014D"],[333,2],[334,1,"\u014F"],[335,2],[336,1,"\u0151"],[337,2],[338,1,"\u0153"],[339,2],[340,1,"\u0155"],[341,2],[342,1,"\u0157"],[343,2],[344,1,"\u0159"],[345,2],[346,1,"\u015B"],[347,2],[348,1,"\u015D"],[349,2],[350,1,"\u015F"],[351,2],[352,1,"\u0161"],[353,2],[354,1,"\u0163"],[355,2],[356,1,"\u0165"],[357,2],[358,1,"\u0167"],[359,2],[360,1,"\u0169"],[361,2],[362,1,"\u016B"],[363,2],[364,1,"\u016D"],[365,2],[366,1,"\u016F"],[367,2],[368,1,"\u0171"],[369,2],[370,1,"\u0173"],[371,2],[372,1,"\u0175"],[373,2],[374,1,"\u0177"],[375,2],[376,1,"\xFF"],[377,1,"\u017A"],[378,2],[379,1,"\u017C"],[380,2],[381,1,"\u017E"],[382,2],[383,1,"s"],[384,2],[385,1,"\u0253"],[386,1,"\u0183"],[387,2],[388,1,"\u0185"],[389,2],[390,1,"\u0254"],[391,1,"\u0188"],[392,2],[393,1,"\u0256"],[394,1,"\u0257"],[395,1,"\u018C"],[[396,397],2],[398,1,"\u01DD"],[399,1,"\u0259"],[400,1,"\u025B"],[401,1,"\u0192"],[402,2],[403,1,"\u0260"],[404,1,"\u0263"],[405,2],[406,1,"\u0269"],[407,1,"\u0268"],[408,1,"\u0199"],[[409,411],2],[412,1,"\u026F"],[413,1,"\u0272"],[414,2],[415,1,"\u0275"],[416,1,"\u01A1"],[417,2],[418,1,"\u01A3"],[419,2],[420,1,"\u01A5"],[421,2],[422,1,"\u0280"],[423,1,"\u01A8"],[424,2],[425,1,"\u0283"],[[426,427],2],[428,1,"\u01AD"],[429,2],[430,1,"\u0288"],[431,1,"\u01B0"],[432,2],[433,1,"\u028A"],[434,1,"\u028B"],[435,1,"\u01B4"],[436,2],[437,1,"\u01B6"],[438,2],[439,1,"\u0292"],[440,1,"\u01B9"],[[441,443],2],[444,1,"\u01BD"],[[445,451],2],[[452,454],1,"d\u017E"],[[455,457],1,"lj"],[[458,460],1,"nj"],[461,1,"\u01CE"],[462,2],[463,1,"\u01D0"],[464,2],[465,1,"\u01D2"],[466,2],[467,1,"\u01D4"],[468,2],[469,1,"\u01D6"],[470,2],[471,1,"\u01D8"],[472,2],[473,1,"\u01DA"],[474,2],[475,1,"\u01DC"],[[476,477],2],[478,1,"\u01DF"],[479,2],[480,1,"\u01E1"],[481,2],[482,1,"\u01E3"],[483,2],[484,1,"\u01E5"],[485,2],[486,1,"\u01E7"],[487,2],[488,1,"\u01E9"],[489,2],[490,1,"\u01EB"],[491,2],[492,1,"\u01ED"],[493,2],[494,1,"\u01EF"],[[495,496],2],[[497,499],1,"dz"],[500,1,"\u01F5"],[501,2],[502,1,"\u0195"],[503,1,"\u01BF"],[504,1,"\u01F9"],[505,2],[506,1,"\u01FB"],[507,2],[508,1,"\u01FD"],[509,2],[510,1,"\u01FF"],[511,2],[512,1,"\u0201"],[513,2],[514,1,"\u0203"],[515,2],[516,1,"\u0205"],[517,2],[518,1,"\u0207"],[519,2],[520,1,"\u0209"],[521,2],[522,1,"\u020B"],[523,2],[524,1,"\u020D"],[525,2],[526,1,"\u020F"],[527,2],[528,1,"\u0211"],[529,2],[530,1,"\u0213"],[531,2],[532,1,"\u0215"],[533,2],[534,1,"\u0217"],[535,2],[536,1,"\u0219"],[537,2],[538,1,"\u021B"],[539,2],[540,1,"\u021D"],[541,2],[542,1,"\u021F"],[543,2],[544,1,"\u019E"],[545,2],[546,1,"\u0223"],[547,2],[548,1,"\u0225"],[549,2],[550,1,"\u0227"],[551,2],[552,1,"\u0229"],[553,2],[554,1,"\u022B"],[555,2],[556,1,"\u022D"],[557,2],[558,1,"\u022F"],[559,2],[560,1,"\u0231"],[561,2],[562,1,"\u0233"],[563,2],[[564,566],2],[[567,569],2],[570,1,"\u2C65"],[571,1,"\u023C"],[572,2],[573,1,"\u019A"],[574,1,"\u2C66"],[[575,576],2],[577,1,"\u0242"],[578,2],[579,1,"\u0180"],[580,1,"\u0289"],[581,1,"\u028C"],[582,1,"\u0247"],[583,2],[584,1,"\u0249"],[585,2],[586,1,"\u024B"],[587,2],[588,1,"\u024D"],[589,2],[590,1,"\u024F"],[591,2],[[592,680],2],[[681,685],2],[[686,687],2],[688,1,"h"],[689,1,"\u0266"],[690,1,"j"],[691,1,"r"],[692,1,"\u0279"],[693,1,"\u027B"],[694,1,"\u0281"],[695,1,"w"],[696,1,"y"],[[697,705],2],[[706,709],2],[[710,721],2],[[722,727],2],[728,1," \u0306"],[729,1," \u0307"],[730,1," \u030A"],[731,1," \u0328"],[732,1," \u0303"],[733,1," \u030B"],[734,2],[735,2],[736,1,"\u0263"],[737,1,"l"],[738,1,"s"],[739,1,"x"],[740,1,"\u0295"],[[741,745],2],[[746,747],2],[748,2],[749,2],[750,2],[[751,767],2],[[768,831],2],[832,1,"\u0300"],[833,1,"\u0301"],[834,2],[835,1,"\u0313"],[836,1,"\u0308\u0301"],[837,1,"\u03B9"],[[838,846],2],[847,7],[[848,855],2],[[856,860],2],[[861,863],2],[[864,865],2],[866,2],[[867,879],2],[880,1,"\u0371"],[881,2],[882,1,"\u0373"],[883,2],[884,1,"\u02B9"],[885,2],[886,1,"\u0377"],[887,2],[[888,889],3],[890,1," \u03B9"],[[891,893],2],[894,1,";"],[895,1,"\u03F3"],[[896,899],3],[900,1," \u0301"],[901,1," \u0308\u0301"],[902,1,"\u03AC"],[903,1,"\xB7"],[904,1,"\u03AD"],[905,1,"\u03AE"],[906,1,"\u03AF"],[907,3],[908,1,"\u03CC"],[909,3],[910,1,"\u03CD"],[911,1,"\u03CE"],[912,2],[913,1,"\u03B1"],[914,1,"\u03B2"],[915,1,"\u03B3"],[916,1,"\u03B4"],[917,1,"\u03B5"],[918,1,"\u03B6"],[919,1,"\u03B7"],[920,1,"\u03B8"],[921,1,"\u03B9"],[922,1,"\u03BA"],[923,1,"\u03BB"],[924,1,"\u03BC"],[925,1,"\u03BD"],[926,1,"\u03BE"],[927,1,"\u03BF"],[928,1,"\u03C0"],[929,1,"\u03C1"],[930,3],[931,1,"\u03C3"],[932,1,"\u03C4"],[933,1,"\u03C5"],[934,1,"\u03C6"],[935,1,"\u03C7"],[936,1,"\u03C8"],[937,1,"\u03C9"],[938,1,"\u03CA"],[939,1,"\u03CB"],[[940,961],2],[962,6,"\u03C3"],[[963,974],2],[975,1,"\u03D7"],[976,1,"\u03B2"],[977,1,"\u03B8"],[978,1,"\u03C5"],[979,1,"\u03CD"],[980,1,"\u03CB"],[981,1,"\u03C6"],[982,1,"\u03C0"],[983,2],[984,1,"\u03D9"],[985,2],[986,1,"\u03DB"],[987,2],[988,1,"\u03DD"],[989,2],[990,1,"\u03DF"],[991,2],[992,1,"\u03E1"],[993,2],[994,1,"\u03E3"],[995,2],[996,1,"\u03E5"],[997,2],[998,1,"\u03E7"],[999,2],[1000,1,"\u03E9"],[1001,2],[1002,1,"\u03EB"],[1003,2],[1004,1,"\u03ED"],[1005,2],[1006,1,"\u03EF"],[1007,2],[1008,1,"\u03BA"],[1009,1,"\u03C1"],[1010,1,"\u03C3"],[1011,2],[1012,1,"\u03B8"],[1013,1,"\u03B5"],[1014,2],[1015,1,"\u03F8"],[1016,2],[1017,1,"\u03C3"],[1018,1,"\u03FB"],[1019,2],[1020,2],[1021,1,"\u037B"],[1022,1,"\u037C"],[1023,1,"\u037D"],[1024,1,"\u0450"],[1025,1,"\u0451"],[1026,1,"\u0452"],[1027,1,"\u0453"],[1028,1,"\u0454"],[1029,1,"\u0455"],[1030,1,"\u0456"],[1031,1,"\u0457"],[1032,1,"\u0458"],[1033,1,"\u0459"],[1034,1,"\u045A"],[1035,1,"\u045B"],[1036,1,"\u045C"],[1037,1,"\u045D"],[1038,1,"\u045E"],[1039,1,"\u045F"],[1040,1,"\u0430"],[1041,1,"\u0431"],[1042,1,"\u0432"],[1043,1,"\u0433"],[1044,1,"\u0434"],[1045,1,"\u0435"],[1046,1,"\u0436"],[1047,1,"\u0437"],[1048,1,"\u0438"],[1049,1,"\u0439"],[1050,1,"\u043A"],[1051,1,"\u043B"],[1052,1,"\u043C"],[1053,1,"\u043D"],[1054,1,"\u043E"],[1055,1,"\u043F"],[1056,1,"\u0440"],[1057,1,"\u0441"],[1058,1,"\u0442"],[1059,1,"\u0443"],[1060,1,"\u0444"],[1061,1,"\u0445"],[1062,1,"\u0446"],[1063,1,"\u0447"],[1064,1,"\u0448"],[1065,1,"\u0449"],[1066,1,"\u044A"],[1067,1,"\u044B"],[1068,1,"\u044C"],[1069,1,"\u044D"],[1070,1,"\u044E"],[1071,1,"\u044F"],[[1072,1103],2],[1104,2],[[1105,1116],2],[1117,2],[[1118,1119],2],[1120,1,"\u0461"],[1121,2],[1122,1,"\u0463"],[1123,2],[1124,1,"\u0465"],[1125,2],[1126,1,"\u0467"],[1127,2],[1128,1,"\u0469"],[1129,2],[1130,1,"\u046B"],[1131,2],[1132,1,"\u046D"],[1133,2],[1134,1,"\u046F"],[1135,2],[1136,1,"\u0471"],[1137,2],[1138,1,"\u0473"],[1139,2],[1140,1,"\u0475"],[1141,2],[1142,1,"\u0477"],[1143,2],[1144,1,"\u0479"],[1145,2],[1146,1,"\u047B"],[1147,2],[1148,1,"\u047D"],[1149,2],[1150,1,"\u047F"],[1151,2],[1152,1,"\u0481"],[1153,2],[1154,2],[[1155,1158],2],[1159,2],[[1160,1161],2],[1162,1,"\u048B"],[1163,2],[1164,1,"\u048D"],[1165,2],[1166,1,"\u048F"],[1167,2],[1168,1,"\u0491"],[1169,2],[1170,1,"\u0493"],[1171,2],[1172,1,"\u0495"],[1173,2],[1174,1,"\u0497"],[1175,2],[1176,1,"\u0499"],[1177,2],[1178,1,"\u049B"],[1179,2],[1180,1,"\u049D"],[1181,2],[1182,1,"\u049F"],[1183,2],[1184,1,"\u04A1"],[1185,2],[1186,1,"\u04A3"],[1187,2],[1188,1,"\u04A5"],[1189,2],[1190,1,"\u04A7"],[1191,2],[1192,1,"\u04A9"],[1193,2],[1194,1,"\u04AB"],[1195,2],[1196,1,"\u04AD"],[1197,2],[1198,1,"\u04AF"],[1199,2],[1200,1,"\u04B1"],[1201,2],[1202,1,"\u04B3"],[1203,2],[1204,1,"\u04B5"],[1205,2],[1206,1,"\u04B7"],[1207,2],[1208,1,"\u04B9"],[1209,2],[1210,1,"\u04BB"],[1211,2],[1212,1,"\u04BD"],[1213,2],[1214,1,"\u04BF"],[1215,2],[1216,1,"\u04CF"],[1217,1,"\u04C2"],[1218,2],[1219,1,"\u04C4"],[1220,2],[1221,1,"\u04C6"],[1222,2],[1223,1,"\u04C8"],[1224,2],[1225,1,"\u04CA"],[1226,2],[1227,1,"\u04CC"],[1228,2],[1229,1,"\u04CE"],[1230,2],[1231,2],[1232,1,"\u04D1"],[1233,2],[1234,1,"\u04D3"],[1235,2],[1236,1,"\u04D5"],[1237,2],[1238,1,"\u04D7"],[1239,2],[1240,1,"\u04D9"],[1241,2],[1242,1,"\u04DB"],[1243,2],[1244,1,"\u04DD"],[1245,2],[1246,1,"\u04DF"],[1247,2],[1248,1,"\u04E1"],[1249,2],[1250,1,"\u04E3"],[1251,2],[1252,1,"\u04E5"],[1253,2],[1254,1,"\u04E7"],[1255,2],[1256,1,"\u04E9"],[1257,2],[1258,1,"\u04EB"],[1259,2],[1260,1,"\u04ED"],[1261,2],[1262,1,"\u04EF"],[1263,2],[1264,1,"\u04F1"],[1265,2],[1266,1,"\u04F3"],[1267,2],[1268,1,"\u04F5"],[1269,2],[1270,1,"\u04F7"],[1271,2],[1272,1,"\u04F9"],[1273,2],[1274,1,"\u04FB"],[1275,2],[1276,1,"\u04FD"],[1277,2],[1278,1,"\u04FF"],[1279,2],[1280,1,"\u0501"],[1281,2],[1282,1,"\u0503"],[1283,2],[1284,1,"\u0505"],[1285,2],[1286,1,"\u0507"],[1287,2],[1288,1,"\u0509"],[1289,2],[1290,1,"\u050B"],[1291,2],[1292,1,"\u050D"],[1293,2],[1294,1,"\u050F"],[1295,2],[1296,1,"\u0511"],[1297,2],[1298,1,"\u0513"],[1299,2],[1300,1,"\u0515"],[1301,2],[1302,1,"\u0517"],[1303,2],[1304,1,"\u0519"],[1305,2],[1306,1,"\u051B"],[1307,2],[1308,1,"\u051D"],[1309,2],[1310,1,"\u051F"],[1311,2],[1312,1,"\u0521"],[1313,2],[1314,1,"\u0523"],[1315,2],[1316,1,"\u0525"],[1317,2],[1318,1,"\u0527"],[1319,2],[1320,1,"\u0529"],[1321,2],[1322,1,"\u052B"],[1323,2],[1324,1,"\u052D"],[1325,2],[1326,1,"\u052F"],[1327,2],[1328,3],[1329,1,"\u0561"],[1330,1,"\u0562"],[1331,1,"\u0563"],[1332,1,"\u0564"],[1333,1,"\u0565"],[1334,1,"\u0566"],[1335,1,"\u0567"],[1336,1,"\u0568"],[1337,1,"\u0569"],[1338,1,"\u056A"],[1339,1,"\u056B"],[1340,1,"\u056C"],[1341,1,"\u056D"],[1342,1,"\u056E"],[1343,1,"\u056F"],[1344,1,"\u0570"],[1345,1,"\u0571"],[1346,1,"\u0572"],[1347,1,"\u0573"],[1348,1,"\u0574"],[1349,1,"\u0575"],[1350,1,"\u0576"],[1351,1,"\u0577"],[1352,1,"\u0578"],[1353,1,"\u0579"],[1354,1,"\u057A"],[1355,1,"\u057B"],[1356,1,"\u057C"],[1357,1,"\u057D"],[1358,1,"\u057E"],[1359,1,"\u057F"],[1360,1,"\u0580"],[1361,1,"\u0581"],[1362,1,"\u0582"],[1363,1,"\u0583"],[1364,1,"\u0584"],[1365,1,"\u0585"],[1366,1,"\u0586"],[[1367,1368],3],[1369,2],[[1370,1375],2],[1376,2],[[1377,1414],2],[1415,1,"\u0565\u0582"],[1416,2],[1417,2],[1418,2],[[1419,1420],3],[[1421,1422],2],[1423,2],[1424,3],[[1425,1441],2],[1442,2],[[1443,1455],2],[[1456,1465],2],[1466,2],[[1467,1469],2],[1470,2],[1471,2],[1472,2],[[1473,1474],2],[1475,2],[1476,2],[1477,2],[1478,2],[1479,2],[[1480,1487],3],[[1488,1514],2],[[1515,1518],3],[1519,2],[[1520,1524],2],[[1525,1535],3],[[1536,1539],3],[1540,3],[1541,3],[[1542,1546],2],[1547,2],[1548,2],[[1549,1551],2],[[1552,1557],2],[[1558,1562],2],[1563,2],[1564,3],[1565,2],[1566,2],[1567,2],[1568,2],[[1569,1594],2],[[1595,1599],2],[1600,2],[[1601,1618],2],[[1619,1621],2],[[1622,1624],2],[[1625,1630],2],[1631,2],[[1632,1641],2],[[1642,1645],2],[[1646,1647],2],[[1648,1652],2],[1653,1,"\u0627\u0674"],[1654,1,"\u0648\u0674"],[1655,1,"\u06C7\u0674"],[1656,1,"\u064A\u0674"],[[1657,1719],2],[[1720,1721],2],[[1722,1726],2],[1727,2],[[1728,1742],2],[1743,2],[[1744,1747],2],[1748,2],[[1749,1756],2],[1757,3],[1758,2],[[1759,1768],2],[1769,2],[[1770,1773],2],[[1774,1775],2],[[1776,1785],2],[[1786,1790],2],[1791,2],[[1792,1805],2],[1806,3],[1807,3],[[1808,1836],2],[[1837,1839],2],[[1840,1866],2],[[1867,1868],3],[[1869,1871],2],[[1872,1901],2],[[1902,1919],2],[[1920,1968],2],[1969,2],[[1970,1983],3],[[1984,2037],2],[[2038,2042],2],[[2043,2044],3],[2045,2],[[2046,2047],2],[[2048,2093],2],[[2094,2095],3],[[2096,2110],2],[2111,3],[[2112,2139],2],[[2140,2141],3],[2142,2],[2143,3],[[2144,2154],2],[[2155,2159],3],[[2160,2183],2],[2184,2],[[2185,2190],2],[2191,3],[[2192,2193],3],[[2194,2198],3],[2199,2],[[2200,2207],2],[2208,2],[2209,2],[[2210,2220],2],[[2221,2226],2],[[2227,2228],2],[2229,2],[[2230,2237],2],[[2238,2247],2],[[2248,2258],2],[2259,2],[[2260,2273],2],[2274,3],[2275,2],[[2276,2302],2],[2303,2],[2304,2],[[2305,2307],2],[2308,2],[[2309,2361],2],[[2362,2363],2],[[2364,2381],2],[2382,2],[2383,2],[[2384,2388],2],[2389,2],[[2390,2391],2],[2392,1,"\u0915\u093C"],[2393,1,"\u0916\u093C"],[2394,1,"\u0917\u093C"],[2395,1,"\u091C\u093C"],[2396,1,"\u0921\u093C"],[2397,1,"\u0922\u093C"],[2398,1,"\u092B\u093C"],[2399,1,"\u092F\u093C"],[[2400,2403],2],[[2404,2405],2],[[2406,2415],2],[2416,2],[[2417,2418],2],[[2419,2423],2],[2424,2],[[2425,2426],2],[[2427,2428],2],[2429,2],[[2430,2431],2],[2432,2],[[2433,2435],2],[2436,3],[[2437,2444],2],[[2445,2446],3],[[2447,2448],2],[[2449,2450],3],[[2451,2472],2],[2473,3],[[2474,2480],2],[2481,3],[2482,2],[[2483,2485],3],[[2486,2489],2],[[2490,2491],3],[2492,2],[2493,2],[[2494,2500],2],[[2501,2502],3],[[2503,2504],2],[[2505,2506],3],[[2507,2509],2],[2510,2],[[2511,2518],3],[2519,2],[[2520,2523],3],[2524,1,"\u09A1\u09BC"],[2525,1,"\u09A2\u09BC"],[2526,3],[2527,1,"\u09AF\u09BC"],[[2528,2531],2],[[2532,2533],3],[[2534,2545],2],[[2546,2554],2],[2555,2],[2556,2],[2557,2],[2558,2],[[2559,2560],3],[2561,2],[2562,2],[2563,2],[2564,3],[[2565,2570],2],[[2571,2574],3],[[2575,2576],2],[[2577,2578],3],[[2579,2600],2],[2601,3],[[2602,2608],2],[2609,3],[2610,2],[2611,1,"\u0A32\u0A3C"],[2612,3],[2613,2],[2614,1,"\u0A38\u0A3C"],[2615,3],[[2616,2617],2],[[2618,2619],3],[2620,2],[2621,3],[[2622,2626],2],[[2627,2630],3],[[2631,2632],2],[[2633,2634],3],[[2635,2637],2],[[2638,2640],3],[2641,2],[[2642,2648],3],[2649,1,"\u0A16\u0A3C"],[2650,1,"\u0A17\u0A3C"],[2651,1,"\u0A1C\u0A3C"],[2652,2],[2653,3],[2654,1,"\u0A2B\u0A3C"],[[2655,2661],3],[[2662,2676],2],[2677,2],[2678,2],[[2679,2688],3],[[2689,2691],2],[2692,3],[[2693,2699],2],[2700,2],[2701,2],[2702,3],[[2703,2705],2],[2706,3],[[2707,2728],2],[2729,3],[[2730,2736],2],[2737,3],[[2738,2739],2],[2740,3],[[2741,2745],2],[[2746,2747],3],[[2748,2757],2],[2758,3],[[2759,2761],2],[2762,3],[[2763,2765],2],[[2766,2767],3],[2768,2],[[2769,2783],3],[2784,2],[[2785,2787],2],[[2788,2789],3],[[2790,2799],2],[2800,2],[2801,2],[[2802,2808],3],[2809,2],[[2810,2815],2],[2816,3],[[2817,2819],2],[2820,3],[[2821,2828],2],[[2829,2830],3],[[2831,2832],2],[[2833,2834],3],[[2835,2856],2],[2857,3],[[2858,2864],2],[2865,3],[[2866,2867],2],[2868,3],[2869,2],[[2870,2873],2],[[2874,2875],3],[[2876,2883],2],[2884,2],[[2885,2886],3],[[2887,2888],2],[[2889,2890],3],[[2891,2893],2],[[2894,2900],3],[2901,2],[[2902,2903],2],[[2904,2907],3],[2908,1,"\u0B21\u0B3C"],[2909,1,"\u0B22\u0B3C"],[2910,3],[[2911,2913],2],[[2914,2915],2],[[2916,2917],3],[[2918,2927],2],[2928,2],[2929,2],[[2930,2935],2],[[2936,2945],3],[[2946,2947],2],[2948,3],[[2949,2954],2],[[2955,2957],3],[[2958,2960],2],[2961,3],[[2962,2965],2],[[2966,2968],3],[[2969,2970],2],[2971,3],[2972,2],[2973,3],[[2974,2975],2],[[2976,2978],3],[[2979,2980],2],[[2981,2983],3],[[2984,2986],2],[[2987,2989],3],[[2990,2997],2],[2998,2],[[2999,3001],2],[[3002,3005],3],[[3006,3010],2],[[3011,3013],3],[[3014,3016],2],[3017,3],[[3018,3021],2],[[3022,3023],3],[3024,2],[[3025,3030],3],[3031,2],[[3032,3045],3],[3046,2],[[3047,3055],2],[[3056,3058],2],[[3059,3066],2],[[3067,3071],3],[3072,2],[[3073,3075],2],[3076,2],[[3077,3084],2],[3085,3],[[3086,3088],2],[3089,3],[[3090,3112],2],[3113,3],[[3114,3123],2],[3124,2],[[3125,3129],2],[[3130,3131],3],[3132,2],[3133,2],[[3134,3140],2],[3141,3],[[3142,3144],2],[3145,3],[[3146,3149],2],[[3150,3156],3],[[3157,3158],2],[3159,3],[[3160,3161],2],[3162,2],[[3163,3164],3],[3165,2],[[3166,3167],3],[[3168,3169],2],[[3170,3171],2],[[3172,3173],3],[[3174,3183],2],[[3184,3190],3],[3191,2],[[3192,3199],2],[3200,2],[3201,2],[[3202,3203],2],[3204,2],[[3205,3212],2],[3213,3],[[3214,3216],2],[3217,3],[[3218,3240],2],[3241,3],[[3242,3251],2],[3252,3],[[3253,3257],2],[[3258,3259],3],[[3260,3261],2],[[3262,3268],2],[3269,3],[[3270,3272],2],[3273,3],[[3274,3277],2],[[3278,3284],3],[[3285,3286],2],[[3287,3292],3],[3293,2],[3294,2],[3295,3],[[3296,3297],2],[[3298,3299],2],[[3300,3301],3],[[3302,3311],2],[3312,3],[[3313,3314],2],[3315,2],[[3316,3327],3],[3328,2],[3329,2],[[3330,3331],2],[3332,2],[[3333,3340],2],[3341,3],[[3342,3344],2],[3345,3],[[3346,3368],2],[3369,2],[[3370,3385],2],[3386,2],[[3387,3388],2],[3389,2],[[3390,3395],2],[3396,2],[3397,3],[[3398,3400],2],[3401,3],[[3402,3405],2],[3406,2],[3407,2],[[3408,3411],3],[[3412,3414],2],[3415,2],[[3416,3422],2],[3423,2],[[3424,3425],2],[[3426,3427],2],[[3428,3429],3],[[3430,3439],2],[[3440,3445],2],[[3446,3448],2],[3449,2],[[3450,3455],2],[3456,3],[3457,2],[[3458,3459],2],[3460,3],[[3461,3478],2],[[3479,3481],3],[[3482,3505],2],[3506,3],[[3507,3515],2],[3516,3],[3517,2],[[3518,3519],3],[[3520,3526],2],[[3527,3529],3],[3530,2],[[3531,3534],3],[[3535,3540],2],[3541,3],[3542,2],[3543,3],[[3544,3551],2],[[3552,3557],3],[[3558,3567],2],[[3568,3569],3],[[3570,3571],2],[3572,2],[[3573,3584],3],[[3585,3634],2],[3635,1,"\u0E4D\u0E32"],[[3636,3642],2],[[3643,3646],3],[3647,2],[[3648,3662],2],[3663,2],[[3664,3673],2],[[3674,3675],2],[[3676,3712],3],[[3713,3714],2],[3715,3],[3716,2],[3717,3],[3718,2],[[3719,3720],2],[3721,2],[3722,2],[3723,3],[3724,2],[3725,2],[[3726,3731],2],[[3732,3735],2],[3736,2],[[3737,3743],2],[3744,2],[[3745,3747],2],[3748,3],[3749,2],[3750,3],[3751,2],[[3752,3753],2],[[3754,3755],2],[3756,2],[[3757,3762],2],[3763,1,"\u0ECD\u0EB2"],[[3764,3769],2],[3770,2],[[3771,3773],2],[[3774,3775],3],[[3776,3780],2],[3781,3],[3782,2],[3783,3],[[3784,3789],2],[3790,2],[3791,3],[[3792,3801],2],[[3802,3803],3],[3804,1,"\u0EAB\u0E99"],[3805,1,"\u0EAB\u0EA1"],[[3806,3807],2],[[3808,3839],3],[3840,2],[[3841,3850],2],[3851,2],[3852,1,"\u0F0B"],[[3853,3863],2],[[3864,3865],2],[[3866,3871],2],[[3872,3881],2],[[3882,3892],2],[3893,2],[3894,2],[3895,2],[3896,2],[3897,2],[[3898,3901],2],[[3902,3906],2],[3907,1,"\u0F42\u0FB7"],[[3908,3911],2],[3912,3],[[3913,3916],2],[3917,1,"\u0F4C\u0FB7"],[[3918,3921],2],[3922,1,"\u0F51\u0FB7"],[[3923,3926],2],[3927,1,"\u0F56\u0FB7"],[[3928,3931],2],[3932,1,"\u0F5B\u0FB7"],[[3933,3944],2],[3945,1,"\u0F40\u0FB5"],[3946,2],[[3947,3948],2],[[3949,3952],3],[[3953,3954],2],[3955,1,"\u0F71\u0F72"],[3956,2],[3957,1,"\u0F71\u0F74"],[3958,1,"\u0FB2\u0F80"],[3959,1,"\u0FB2\u0F71\u0F80"],[3960,1,"\u0FB3\u0F80"],[3961,1,"\u0FB3\u0F71\u0F80"],[[3962,3968],2],[3969,1,"\u0F71\u0F80"],[[3970,3972],2],[3973,2],[[3974,3979],2],[[3980,3983],2],[[3984,3986],2],[3987,1,"\u0F92\u0FB7"],[[3988,3989],2],[3990,2],[3991,2],[3992,3],[[3993,3996],2],[3997,1,"\u0F9C\u0FB7"],[[3998,4001],2],[4002,1,"\u0FA1\u0FB7"],[[4003,4006],2],[4007,1,"\u0FA6\u0FB7"],[[4008,4011],2],[4012,1,"\u0FAB\u0FB7"],[4013,2],[[4014,4016],2],[[4017,4023],2],[4024,2],[4025,1,"\u0F90\u0FB5"],[[4026,4028],2],[4029,3],[[4030,4037],2],[4038,2],[[4039,4044],2],[4045,3],[4046,2],[4047,2],[[4048,4049],2],[[4050,4052],2],[[4053,4056],2],[[4057,4058],2],[[4059,4095],3],[[4096,4129],2],[4130,2],[[4131,4135],2],[4136,2],[[4137,4138],2],[4139,2],[[4140,4146],2],[[4147,4149],2],[[4150,4153],2],[[4154,4159],2],[[4160,4169],2],[[4170,4175],2],[[4176,4185],2],[[4186,4249],2],[[4250,4253],2],[[4254,4255],2],[4256,1,"\u2D00"],[4257,1,"\u2D01"],[4258,1,"\u2D02"],[4259,1,"\u2D03"],[4260,1,"\u2D04"],[4261,1,"\u2D05"],[4262,1,"\u2D06"],[4263,1,"\u2D07"],[4264,1,"\u2D08"],[4265,1,"\u2D09"],[4266,1,"\u2D0A"],[4267,1,"\u2D0B"],[4268,1,"\u2D0C"],[4269,1,"\u2D0D"],[4270,1,"\u2D0E"],[4271,1,"\u2D0F"],[4272,1,"\u2D10"],[4273,1,"\u2D11"],[4274,1,"\u2D12"],[4275,1,"\u2D13"],[4276,1,"\u2D14"],[4277,1,"\u2D15"],[4278,1,"\u2D16"],[4279,1,"\u2D17"],[4280,1,"\u2D18"],[4281,1,"\u2D19"],[4282,1,"\u2D1A"],[4283,1,"\u2D1B"],[4284,1,"\u2D1C"],[4285,1,"\u2D1D"],[4286,1,"\u2D1E"],[4287,1,"\u2D1F"],[4288,1,"\u2D20"],[4289,1,"\u2D21"],[4290,1,"\u2D22"],[4291,1,"\u2D23"],[4292,1,"\u2D24"],[4293,1,"\u2D25"],[4294,3],[4295,1,"\u2D27"],[[4296,4300],3],[4301,1,"\u2D2D"],[[4302,4303],3],[[4304,4342],2],[[4343,4344],2],[[4345,4346],2],[4347,2],[4348,1,"\u10DC"],[[4349,4351],2],[[4352,4441],2],[[4442,4446],2],[[4447,4448],7],[[4449,4514],2],[[4515,4519],2],[[4520,4601],2],[[4602,4607],2],[[4608,4614],2],[4615,2],[[4616,4678],2],[4679,2],[4680,2],[4681,3],[[4682,4685],2],[[4686,4687],3],[[4688,4694],2],[4695,3],[4696,2],[4697,3],[[4698,4701],2],[[4702,4703],3],[[4704,4742],2],[4743,2],[4744,2],[4745,3],[[4746,4749],2],[[4750,4751],3],[[4752,4782],2],[4783,2],[4784,2],[4785,3],[[4786,4789],2],[[4790,4791],3],[[4792,4798],2],[4799,3],[4800,2],[4801,3],[[4802,4805],2],[[4806,4807],3],[[4808,4814],2],[4815,2],[[4816,4822],2],[4823,3],[[4824,4846],2],[4847,2],[[4848,4878],2],[4879,2],[4880,2],[4881,3],[[4882,4885],2],[[4886,4887],3],[[4888,4894],2],[4895,2],[[4896,4934],2],[4935,2],[[4936,4954],2],[[4955,4956],3],[[4957,4958],2],[4959,2],[4960,2],[[4961,4988],2],[[4989,4991],3],[[4992,5007],2],[[5008,5017],2],[[5018,5023],3],[[5024,5108],2],[5109,2],[[5110,5111],3],[5112,1,"\u13F0"],[5113,1,"\u13F1"],[5114,1,"\u13F2"],[5115,1,"\u13F3"],[5116,1,"\u13F4"],[5117,1,"\u13F5"],[[5118,5119],3],[5120,2],[[5121,5740],2],[[5741,5742],2],[[5743,5750],2],[[5751,5759],2],[5760,3],[[5761,5786],2],[[5787,5788],2],[[5789,5791],3],[[5792,5866],2],[[5867,5872],2],[[5873,5880],2],[[5881,5887],3],[[5888,5900],2],[5901,2],[[5902,5908],2],[5909,2],[[5910,5918],3],[5919,2],[[5920,5940],2],[[5941,5942],2],[[5943,5951],3],[[5952,5971],2],[[5972,5983],3],[[5984,5996],2],[5997,3],[[5998,6000],2],[6001,3],[[6002,6003],2],[[6004,6015],3],[[6016,6067],2],[[6068,6069],7],[[6070,6099],2],[[6100,6102],2],[6103,2],[[6104,6107],2],[6108,2],[6109,2],[[6110,6111],3],[[6112,6121],2],[[6122,6127],3],[[6128,6137],2],[[6138,6143],3],[[6144,6154],2],[[6155,6158],7],[6159,7],[[6160,6169],2],[[6170,6175],3],[[6176,6263],2],[6264,2],[[6265,6271],3],[[6272,6313],2],[6314,2],[[6315,6319],3],[[6320,6389],2],[[6390,6399],3],[[6400,6428],2],[[6429,6430],2],[6431,3],[[6432,6443],2],[[6444,6447],3],[[6448,6459],2],[[6460,6463],3],[6464,2],[[6465,6467],3],[[6468,6469],2],[[6470,6509],2],[[6510,6511],3],[[6512,6516],2],[[6517,6527],3],[[6528,6569],2],[[6570,6571],2],[[6572,6575],3],[[6576,6601],2],[[6602,6607],3],[[6608,6617],2],[6618,2],[[6619,6621],3],[[6622,6623],2],[[6624,6655],2],[[6656,6683],2],[[6684,6685],3],[[6686,6687],2],[[6688,6750],2],[6751,3],[[6752,6780],2],[[6781,6782],3],[[6783,6793],2],[[6794,6799],3],[[6800,6809],2],[[6810,6815],3],[[6816,6822],2],[6823,2],[[6824,6829],2],[[6830,6831],3],[[6832,6845],2],[6846,2],[[6847,6848],2],[[6849,6862],2],[[6863,6911],3],[[6912,6987],2],[6988,2],[6989,3],[[6990,6991],2],[[6992,7001],2],[[7002,7018],2],[[7019,7027],2],[[7028,7036],2],[[7037,7038],2],[7039,2],[[7040,7082],2],[[7083,7085],2],[[7086,7097],2],[[7098,7103],2],[[7104,7155],2],[[7156,7163],3],[[7164,7167],2],[[7168,7223],2],[[7224,7226],3],[[7227,7231],2],[[7232,7241],2],[[7242,7244],3],[[7245,7293],2],[[7294,7295],2],[7296,1,"\u0432"],[7297,1,"\u0434"],[7298,1,"\u043E"],[7299,1,"\u0441"],[[7300,7301],1,"\u0442"],[7302,1,"\u044A"],[7303,1,"\u0463"],[7304,1,"\uA64B"],[7305,1,"\u1C8A"],[7306,2],[[7307,7311],3],[7312,1,"\u10D0"],[7313,1,"\u10D1"],[7314,1,"\u10D2"],[7315,1,"\u10D3"],[7316,1,"\u10D4"],[7317,1,"\u10D5"],[7318,1,"\u10D6"],[7319,1,"\u10D7"],[7320,1,"\u10D8"],[7321,1,"\u10D9"],[7322,1,"\u10DA"],[7323,1,"\u10DB"],[7324,1,"\u10DC"],[7325,1,"\u10DD"],[7326,1,"\u10DE"],[7327,1,"\u10DF"],[7328,1,"\u10E0"],[7329,1,"\u10E1"],[7330,1,"\u10E2"],[7331,1,"\u10E3"],[7332,1,"\u10E4"],[7333,1,"\u10E5"],[7334,1,"\u10E6"],[7335,1,"\u10E7"],[7336,1,"\u10E8"],[7337,1,"\u10E9"],[7338,1,"\u10EA"],[7339,1,"\u10EB"],[7340,1,"\u10EC"],[7341,1,"\u10ED"],[7342,1,"\u10EE"],[7343,1,"\u10EF"],[7344,1,"\u10F0"],[7345,1,"\u10F1"],[7346,1,"\u10F2"],[7347,1,"\u10F3"],[7348,1,"\u10F4"],[7349,1,"\u10F5"],[7350,1,"\u10F6"],[7351,1,"\u10F7"],[7352,1,"\u10F8"],[7353,1,"\u10F9"],[7354,1,"\u10FA"],[[7355,7356],3],[7357,1,"\u10FD"],[7358,1,"\u10FE"],[7359,1,"\u10FF"],[[7360,7367],2],[[7368,7375],3],[[7376,7378],2],[7379,2],[[7380,7410],2],[[7411,7414],2],[7415,2],[[7416,7417],2],[7418,2],[[7419,7423],3],[[7424,7467],2],[7468,1,"a"],[7469,1,"\xE6"],[7470,1,"b"],[7471,2],[7472,1,"d"],[7473,1,"e"],[7474,1,"\u01DD"],[7475,1,"g"],[7476,1,"h"],[7477,1,"i"],[7478,1,"j"],[7479,1,"k"],[7480,1,"l"],[7481,1,"m"],[7482,1,"n"],[7483,2],[7484,1,"o"],[7485,1,"\u0223"],[7486,1,"p"],[7487,1,"r"],[7488,1,"t"],[7489,1,"u"],[7490,1,"w"],[7491,1,"a"],[7492,1,"\u0250"],[7493,1,"\u0251"],[7494,1,"\u1D02"],[7495,1,"b"],[7496,1,"d"],[7497,1,"e"],[7498,1,"\u0259"],[7499,1,"\u025B"],[7500,1,"\u025C"],[7501,1,"g"],[7502,2],[7503,1,"k"],[7504,1,"m"],[7505,1,"\u014B"],[7506,1,"o"],[7507,1,"\u0254"],[7508,1,"\u1D16"],[7509,1,"\u1D17"],[7510,1,"p"],[7511,1,"t"],[7512,1,"u"],[7513,1,"\u1D1D"],[7514,1,"\u026F"],[7515,1,"v"],[7516,1,"\u1D25"],[7517,1,"\u03B2"],[7518,1,"\u03B3"],[7519,1,"\u03B4"],[7520,1,"\u03C6"],[7521,1,"\u03C7"],[7522,1,"i"],[7523,1,"r"],[7524,1,"u"],[7525,1,"v"],[7526,1,"\u03B2"],[7527,1,"\u03B3"],[7528,1,"\u03C1"],[7529,1,"\u03C6"],[7530,1,"\u03C7"],[7531,2],[[7532,7543],2],[7544,1,"\u043D"],[[7545,7578],2],[7579,1,"\u0252"],[7580,1,"c"],[7581,1,"\u0255"],[7582,1,"\xF0"],[7583,1,"\u025C"],[7584,1,"f"],[7585,1,"\u025F"],[7586,1,"\u0261"],[7587,1,"\u0265"],[7588,1,"\u0268"],[7589,1,"\u0269"],[7590,1,"\u026A"],[7591,1,"\u1D7B"],[7592,1,"\u029D"],[7593,1,"\u026D"],[7594,1,"\u1D85"],[7595,1,"\u029F"],[7596,1,"\u0271"],[7597,1,"\u0270"],[7598,1,"\u0272"],[7599,1,"\u0273"],[7600,1,"\u0274"],[7601,1,"\u0275"],[7602,1,"\u0278"],[7603,1,"\u0282"],[7604,1,"\u0283"],[7605,1,"\u01AB"],[7606,1,"\u0289"],[7607,1,"\u028A"],[7608,1,"\u1D1C"],[7609,1,"\u028B"],[7610,1,"\u028C"],[7611,1,"z"],[7612,1,"\u0290"],[7613,1,"\u0291"],[7614,1,"\u0292"],[7615,1,"\u03B8"],[[7616,7619],2],[[7620,7626],2],[[7627,7654],2],[[7655,7669],2],[[7670,7673],2],[7674,2],[7675,2],[7676,2],[7677,2],[[7678,7679],2],[7680,1,"\u1E01"],[7681,2],[7682,1,"\u1E03"],[7683,2],[7684,1,"\u1E05"],[7685,2],[7686,1,"\u1E07"],[7687,2],[7688,1,"\u1E09"],[7689,2],[7690,1,"\u1E0B"],[7691,2],[7692,1,"\u1E0D"],[7693,2],[7694,1,"\u1E0F"],[7695,2],[7696,1,"\u1E11"],[7697,2],[7698,1,"\u1E13"],[7699,2],[7700,1,"\u1E15"],[7701,2],[7702,1,"\u1E17"],[7703,2],[7704,1,"\u1E19"],[7705,2],[7706,1,"\u1E1B"],[7707,2],[7708,1,"\u1E1D"],[7709,2],[7710,1,"\u1E1F"],[7711,2],[7712,1,"\u1E21"],[7713,2],[7714,1,"\u1E23"],[7715,2],[7716,1,"\u1E25"],[7717,2],[7718,1,"\u1E27"],[7719,2],[7720,1,"\u1E29"],[7721,2],[7722,1,"\u1E2B"],[7723,2],[7724,1,"\u1E2D"],[7725,2],[7726,1,"\u1E2F"],[7727,2],[7728,1,"\u1E31"],[7729,2],[7730,1,"\u1E33"],[7731,2],[7732,1,"\u1E35"],[7733,2],[7734,1,"\u1E37"],[7735,2],[7736,1,"\u1E39"],[7737,2],[7738,1,"\u1E3B"],[7739,2],[7740,1,"\u1E3D"],[7741,2],[7742,1,"\u1E3F"],[7743,2],[7744,1,"\u1E41"],[7745,2],[7746,1,"\u1E43"],[7747,2],[7748,1,"\u1E45"],[7749,2],[7750,1,"\u1E47"],[7751,2],[7752,1,"\u1E49"],[7753,2],[7754,1,"\u1E4B"],[7755,2],[7756,1,"\u1E4D"],[7757,2],[7758,1,"\u1E4F"],[7759,2],[7760,1,"\u1E51"],[7761,2],[7762,1,"\u1E53"],[7763,2],[7764,1,"\u1E55"],[7765,2],[7766,1,"\u1E57"],[7767,2],[7768,1,"\u1E59"],[7769,2],[7770,1,"\u1E5B"],[7771,2],[7772,1,"\u1E5D"],[7773,2],[7774,1,"\u1E5F"],[7775,2],[7776,1,"\u1E61"],[7777,2],[7778,1,"\u1E63"],[7779,2],[7780,1,"\u1E65"],[7781,2],[7782,1,"\u1E67"],[7783,2],[7784,1,"\u1E69"],[7785,2],[7786,1,"\u1E6B"],[7787,2],[7788,1,"\u1E6D"],[7789,2],[7790,1,"\u1E6F"],[7791,2],[7792,1,"\u1E71"],[7793,2],[7794,1,"\u1E73"],[7795,2],[7796,1,"\u1E75"],[7797,2],[7798,1,"\u1E77"],[7799,2],[7800,1,"\u1E79"],[7801,2],[7802,1,"\u1E7B"],[7803,2],[7804,1,"\u1E7D"],[7805,2],[7806,1,"\u1E7F"],[7807,2],[7808,1,"\u1E81"],[7809,2],[7810,1,"\u1E83"],[7811,2],[7812,1,"\u1E85"],[7813,2],[7814,1,"\u1E87"],[7815,2],[7816,1,"\u1E89"],[7817,2],[7818,1,"\u1E8B"],[7819,2],[7820,1,"\u1E8D"],[7821,2],[7822,1,"\u1E8F"],[7823,2],[7824,1,"\u1E91"],[7825,2],[7826,1,"\u1E93"],[7827,2],[7828,1,"\u1E95"],[[7829,7833],2],[7834,1,"a\u02BE"],[7835,1,"\u1E61"],[[7836,7837],2],[7838,1,"\xDF"],[7839,2],[7840,1,"\u1EA1"],[7841,2],[7842,1,"\u1EA3"],[7843,2],[7844,1,"\u1EA5"],[7845,2],[7846,1,"\u1EA7"],[7847,2],[7848,1,"\u1EA9"],[7849,2],[7850,1,"\u1EAB"],[7851,2],[7852,1,"\u1EAD"],[7853,2],[7854,1,"\u1EAF"],[7855,2],[7856,1,"\u1EB1"],[7857,2],[7858,1,"\u1EB3"],[7859,2],[7860,1,"\u1EB5"],[7861,2],[7862,1,"\u1EB7"],[7863,2],[7864,1,"\u1EB9"],[7865,2],[7866,1,"\u1EBB"],[7867,2],[7868,1,"\u1EBD"],[7869,2],[7870,1,"\u1EBF"],[7871,2],[7872,1,"\u1EC1"],[7873,2],[7874,1,"\u1EC3"],[7875,2],[7876,1,"\u1EC5"],[7877,2],[7878,1,"\u1EC7"],[7879,2],[7880,1,"\u1EC9"],[7881,2],[7882,1,"\u1ECB"],[7883,2],[7884,1,"\u1ECD"],[7885,2],[7886,1,"\u1ECF"],[7887,2],[7888,1,"\u1ED1"],[7889,2],[7890,1,"\u1ED3"],[7891,2],[7892,1,"\u1ED5"],[7893,2],[7894,1,"\u1ED7"],[7895,2],[7896,1,"\u1ED9"],[7897,2],[7898,1,"\u1EDB"],[7899,2],[7900,1,"\u1EDD"],[7901,2],[7902,1,"\u1EDF"],[7903,2],[7904,1,"\u1EE1"],[7905,2],[7906,1,"\u1EE3"],[7907,2],[7908,1,"\u1EE5"],[7909,2],[7910,1,"\u1EE7"],[7911,2],[7912,1,"\u1EE9"],[7913,2],[7914,1,"\u1EEB"],[7915,2],[7916,1,"\u1EED"],[7917,2],[7918,1,"\u1EEF"],[7919,2],[7920,1,"\u1EF1"],[7921,2],[7922,1,"\u1EF3"],[7923,2],[7924,1,"\u1EF5"],[7925,2],[7926,1,"\u1EF7"],[7927,2],[7928,1,"\u1EF9"],[7929,2],[7930,1,"\u1EFB"],[7931,2],[7932,1,"\u1EFD"],[7933,2],[7934,1,"\u1EFF"],[7935,2],[[7936,7943],2],[7944,1,"\u1F00"],[7945,1,"\u1F01"],[7946,1,"\u1F02"],[7947,1,"\u1F03"],[7948,1,"\u1F04"],[7949,1,"\u1F05"],[7950,1,"\u1F06"],[7951,1,"\u1F07"],[[7952,7957],2],[[7958,7959],3],[7960,1,"\u1F10"],[7961,1,"\u1F11"],[7962,1,"\u1F12"],[7963,1,"\u1F13"],[7964,1,"\u1F14"],[7965,1,"\u1F15"],[[7966,7967],3],[[7968,7975],2],[7976,1,"\u1F20"],[7977,1,"\u1F21"],[7978,1,"\u1F22"],[7979,1,"\u1F23"],[7980,1,"\u1F24"],[7981,1,"\u1F25"],[7982,1,"\u1F26"],[7983,1,"\u1F27"],[[7984,7991],2],[7992,1,"\u1F30"],[7993,1,"\u1F31"],[7994,1,"\u1F32"],[7995,1,"\u1F33"],[7996,1,"\u1F34"],[7997,1,"\u1F35"],[7998,1,"\u1F36"],[7999,1,"\u1F37"],[[8000,8005],2],[[8006,8007],3],[8008,1,"\u1F40"],[8009,1,"\u1F41"],[8010,1,"\u1F42"],[8011,1,"\u1F43"],[8012,1,"\u1F44"],[8013,1,"\u1F45"],[[8014,8015],3],[[8016,8023],2],[8024,3],[8025,1,"\u1F51"],[8026,3],[8027,1,"\u1F53"],[8028,3],[8029,1,"\u1F55"],[8030,3],[8031,1,"\u1F57"],[[8032,8039],2],[8040,1,"\u1F60"],[8041,1,"\u1F61"],[8042,1,"\u1F62"],[8043,1,"\u1F63"],[8044,1,"\u1F64"],[8045,1,"\u1F65"],[8046,1,"\u1F66"],[8047,1,"\u1F67"],[8048,2],[8049,1,"\u03AC"],[8050,2],[8051,1,"\u03AD"],[8052,2],[8053,1,"\u03AE"],[8054,2],[8055,1,"\u03AF"],[8056,2],[8057,1,"\u03CC"],[8058,2],[8059,1,"\u03CD"],[8060,2],[8061,1,"\u03CE"],[[8062,8063],3],[8064,1,"\u1F00\u03B9"],[8065,1,"\u1F01\u03B9"],[8066,1,"\u1F02\u03B9"],[8067,1,"\u1F03\u03B9"],[8068,1,"\u1F04\u03B9"],[8069,1,"\u1F05\u03B9"],[8070,1,"\u1F06\u03B9"],[8071,1,"\u1F07\u03B9"],[8072,1,"\u1F00\u03B9"],[8073,1,"\u1F01\u03B9"],[8074,1,"\u1F02\u03B9"],[8075,1,"\u1F03\u03B9"],[8076,1,"\u1F04\u03B9"],[8077,1,"\u1F05\u03B9"],[8078,1,"\u1F06\u03B9"],[8079,1,"\u1F07\u03B9"],[8080,1,"\u1F20\u03B9"],[8081,1,"\u1F21\u03B9"],[8082,1,"\u1F22\u03B9"],[8083,1,"\u1F23\u03B9"],[8084,1,"\u1F24\u03B9"],[8085,1,"\u1F25\u03B9"],[8086,1,"\u1F26\u03B9"],[8087,1,"\u1F27\u03B9"],[8088,1,"\u1F20\u03B9"],[8089,1,"\u1F21\u03B9"],[8090,1,"\u1F22\u03B9"],[8091,1,"\u1F23\u03B9"],[8092,1,"\u1F24\u03B9"],[8093,1,"\u1F25\u03B9"],[8094,1,"\u1F26\u03B9"],[8095,1,"\u1F27\u03B9"],[8096,1,"\u1F60\u03B9"],[8097,1,"\u1F61\u03B9"],[8098,1,"\u1F62\u03B9"],[8099,1,"\u1F63\u03B9"],[8100,1,"\u1F64\u03B9"],[8101,1,"\u1F65\u03B9"],[8102,1,"\u1F66\u03B9"],[8103,1,"\u1F67\u03B9"],[8104,1,"\u1F60\u03B9"],[8105,1,"\u1F61\u03B9"],[8106,1,"\u1F62\u03B9"],[8107,1,"\u1F63\u03B9"],[8108,1,"\u1F64\u03B9"],[8109,1,"\u1F65\u03B9"],[8110,1,"\u1F66\u03B9"],[8111,1,"\u1F67\u03B9"],[[8112,8113],2],[8114,1,"\u1F70\u03B9"],[8115,1,"\u03B1\u03B9"],[8116,1,"\u03AC\u03B9"],[8117,3],[8118,2],[8119,1,"\u1FB6\u03B9"],[8120,1,"\u1FB0"],[8121,1,"\u1FB1"],[8122,1,"\u1F70"],[8123,1,"\u03AC"],[8124,1,"\u03B1\u03B9"],[8125,1," \u0313"],[8126,1,"\u03B9"],[8127,1," \u0313"],[8128,1," \u0342"],[8129,1," \u0308\u0342"],[8130,1,"\u1F74\u03B9"],[8131,1,"\u03B7\u03B9"],[8132,1,"\u03AE\u03B9"],[8133,3],[8134,2],[8135,1,"\u1FC6\u03B9"],[8136,1,"\u1F72"],[8137,1,"\u03AD"],[8138,1,"\u1F74"],[8139,1,"\u03AE"],[8140,1,"\u03B7\u03B9"],[8141,1," \u0313\u0300"],[8142,1," \u0313\u0301"],[8143,1," \u0313\u0342"],[[8144,8146],2],[8147,1,"\u0390"],[[8148,8149],3],[[8150,8151],2],[8152,1,"\u1FD0"],[8153,1,"\u1FD1"],[8154,1,"\u1F76"],[8155,1,"\u03AF"],[8156,3],[8157,1," \u0314\u0300"],[8158,1," \u0314\u0301"],[8159,1," \u0314\u0342"],[[8160,8162],2],[8163,1,"\u03B0"],[[8164,8167],2],[8168,1,"\u1FE0"],[8169,1,"\u1FE1"],[8170,1,"\u1F7A"],[8171,1,"\u03CD"],[8172,1,"\u1FE5"],[8173,1," \u0308\u0300"],[8174,1," \u0308\u0301"],[8175,1,"`"],[[8176,8177],3],[8178,1,"\u1F7C\u03B9"],[8179,1,"\u03C9\u03B9"],[8180,1,"\u03CE\u03B9"],[8181,3],[8182,2],[8183,1,"\u1FF6\u03B9"],[8184,1,"\u1F78"],[8185,1,"\u03CC"],[8186,1,"\u1F7C"],[8187,1,"\u03CE"],[8188,1,"\u03C9\u03B9"],[8189,1," \u0301"],[8190,1," \u0314"],[8191,3],[[8192,8202],1," "],[8203,7],[[8204,8205],6,""],[[8206,8207],3],[8208,2],[8209,1,"\u2010"],[[8210,8214],2],[8215,1," \u0333"],[[8216,8227],2],[[8228,8230],3],[8231,2],[[8232,8238],3],[8239,1," "],[[8240,8242],2],[8243,1,"\u2032\u2032"],[8244,1,"\u2032\u2032\u2032"],[8245,2],[8246,1,"\u2035\u2035"],[8247,1,"\u2035\u2035\u2035"],[[8248,8251],2],[8252,1,"!!"],[8253,2],[8254,1," \u0305"],[[8255,8262],2],[8263,1,"??"],[8264,1,"?!"],[8265,1,"!?"],[[8266,8269],2],[[8270,8274],2],[[8275,8276],2],[[8277,8278],2],[8279,1,"\u2032\u2032\u2032\u2032"],[[8280,8286],2],[8287,1," "],[[8288,8291],7],[8292,7],[8293,3],[[8294,8297],3],[[8298,8303],7],[8304,1,"0"],[8305,1,"i"],[[8306,8307],3],[8308,1,"4"],[8309,1,"5"],[8310,1,"6"],[8311,1,"7"],[8312,1,"8"],[8313,1,"9"],[8314,1,"+"],[8315,1,"\u2212"],[8316,1,"="],[8317,1,"("],[8318,1,")"],[8319,1,"n"],[8320,1,"0"],[8321,1,"1"],[8322,1,"2"],[8323,1,"3"],[8324,1,"4"],[8325,1,"5"],[8326,1,"6"],[8327,1,"7"],[8328,1,"8"],[8329,1,"9"],[8330,1,"+"],[8331,1,"\u2212"],[8332,1,"="],[8333,1,"("],[8334,1,")"],[8335,3],[8336,1,"a"],[8337,1,"e"],[8338,1,"o"],[8339,1,"x"],[8340,1,"\u0259"],[8341,1,"h"],[8342,1,"k"],[8343,1,"l"],[8344,1,"m"],[8345,1,"n"],[8346,1,"p"],[8347,1,"s"],[8348,1,"t"],[[8349,8351],3],[[8352,8359],2],[8360,1,"rs"],[[8361,8362],2],[8363,2],[8364,2],[[8365,8367],2],[[8368,8369],2],[[8370,8373],2],[[8374,8376],2],[8377,2],[8378,2],[[8379,8381],2],[8382,2],[8383,2],[8384,2],[[8385,8399],3],[[8400,8417],2],[[8418,8419],2],[[8420,8426],2],[8427,2],[[8428,8431],2],[8432,2],[[8433,8447],3],[8448,1,"a/c"],[8449,1,"a/s"],[8450,1,"c"],[8451,1,"\xB0c"],[8452,2],[8453,1,"c/o"],[8454,1,"c/u"],[8455,1,"\u025B"],[8456,2],[8457,1,"\xB0f"],[8458,1,"g"],[[8459,8462],1,"h"],[8463,1,"\u0127"],[[8464,8465],1,"i"],[[8466,8467],1,"l"],[8468,2],[8469,1,"n"],[8470,1,"no"],[[8471,8472],2],[8473,1,"p"],[8474,1,"q"],[[8475,8477],1,"r"],[[8478,8479],2],[8480,1,"sm"],[8481,1,"tel"],[8482,1,"tm"],[8483,2],[8484,1,"z"],[8485,2],[8486,1,"\u03C9"],[8487,2],[8488,1,"z"],[8489,2],[8490,1,"k"],[8491,1,"\xE5"],[8492,1,"b"],[8493,1,"c"],[8494,2],[[8495,8496],1,"e"],[8497,1,"f"],[8498,1,"\u214E"],[8499,1,"m"],[8500,1,"o"],[8501,1,"\u05D0"],[8502,1,"\u05D1"],[8503,1,"\u05D2"],[8504,1,"\u05D3"],[8505,1,"i"],[8506,2],[8507,1,"fax"],[8508,1,"\u03C0"],[[8509,8510],1,"\u03B3"],[8511,1,"\u03C0"],[8512,1,"\u2211"],[[8513,8516],2],[[8517,8518],1,"d"],[8519,1,"e"],[8520,1,"i"],[8521,1,"j"],[[8522,8523],2],[8524,2],[8525,2],[8526,2],[8527,2],[8528,1,"1\u20447"],[8529,1,"1\u20449"],[8530,1,"1\u204410"],[8531,1,"1\u20443"],[8532,1,"2\u20443"],[8533,1,"1\u20445"],[8534,1,"2\u20445"],[8535,1,"3\u20445"],[8536,1,"4\u20445"],[8537,1,"1\u20446"],[8538,1,"5\u20446"],[8539,1,"1\u20448"],[8540,1,"3\u20448"],[8541,1,"5\u20448"],[8542,1,"7\u20448"],[8543,1,"1\u2044"],[8544,1,"i"],[8545,1,"ii"],[8546,1,"iii"],[8547,1,"iv"],[8548,1,"v"],[8549,1,"vi"],[8550,1,"vii"],[8551,1,"viii"],[8552,1,"ix"],[8553,1,"x"],[8554,1,"xi"],[8555,1,"xii"],[8556,1,"l"],[8557,1,"c"],[8558,1,"d"],[8559,1,"m"],[8560,1,"i"],[8561,1,"ii"],[8562,1,"iii"],[8563,1,"iv"],[8564,1,"v"],[8565,1,"vi"],[8566,1,"vii"],[8567,1,"viii"],[8568,1,"ix"],[8569,1,"x"],[8570,1,"xi"],[8571,1,"xii"],[8572,1,"l"],[8573,1,"c"],[8574,1,"d"],[8575,1,"m"],[[8576,8578],2],[8579,1,"\u2184"],[8580,2],[[8581,8584],2],[8585,1,"0\u20443"],[[8586,8587],2],[[8588,8591],3],[[8592,8682],2],[[8683,8691],2],[[8692,8703],2],[[8704,8747],2],[8748,1,"\u222B\u222B"],[8749,1,"\u222B\u222B\u222B"],[8750,2],[8751,1,"\u222E\u222E"],[8752,1,"\u222E\u222E\u222E"],[[8753,8945],2],[[8946,8959],2],[8960,2],[8961,2],[[8962,9000],2],[9001,1,"\u3008"],[9002,1,"\u3009"],[[9003,9082],2],[9083,2],[9084,2],[[9085,9114],2],[[9115,9166],2],[[9167,9168],2],[[9169,9179],2],[[9180,9191],2],[9192,2],[[9193,9203],2],[[9204,9210],2],[[9211,9214],2],[9215,2],[[9216,9252],2],[[9253,9254],2],[[9255,9257],2],[[9258,9279],3],[[9280,9290],2],[[9291,9311],3],[9312,1,"1"],[9313,1,"2"],[9314,1,"3"],[9315,1,"4"],[9316,1,"5"],[9317,1,"6"],[9318,1,"7"],[9319,1,"8"],[9320,1,"9"],[9321,1,"10"],[9322,1,"11"],[9323,1,"12"],[9324,1,"13"],[9325,1,"14"],[9326,1,"15"],[9327,1,"16"],[9328,1,"17"],[9329,1,"18"],[9330,1,"19"],[9331,1,"20"],[9332,1,"(1)"],[9333,1,"(2)"],[9334,1,"(3)"],[9335,1,"(4)"],[9336,1,"(5)"],[9337,1,"(6)"],[9338,1,"(7)"],[9339,1,"(8)"],[9340,1,"(9)"],[9341,1,"(10)"],[9342,1,"(11)"],[9343,1,"(12)"],[9344,1,"(13)"],[9345,1,"(14)"],[9346,1,"(15)"],[9347,1,"(16)"],[9348,1,"(17)"],[9349,1,"(18)"],[9350,1,"(19)"],[9351,1,"(20)"],[[9352,9371],3],[9372,1,"(a)"],[9373,1,"(b)"],[9374,1,"(c)"],[9375,1,"(d)"],[9376,1,"(e)"],[9377,1,"(f)"],[9378,1,"(g)"],[9379,1,"(h)"],[9380,1,"(i)"],[9381,1,"(j)"],[9382,1,"(k)"],[9383,1,"(l)"],[9384,1,"(m)"],[9385,1,"(n)"],[9386,1,"(o)"],[9387,1,"(p)"],[9388,1,"(q)"],[9389,1,"(r)"],[9390,1,"(s)"],[9391,1,"(t)"],[9392,1,"(u)"],[9393,1,"(v)"],[9394,1,"(w)"],[9395,1,"(x)"],[9396,1,"(y)"],[9397,1,"(z)"],[9398,1,"a"],[9399,1,"b"],[9400,1,"c"],[9401,1,"d"],[9402,1,"e"],[9403,1,"f"],[9404,1,"g"],[9405,1,"h"],[9406,1,"i"],[9407,1,"j"],[9408,1,"k"],[9409,1,"l"],[9410,1,"m"],[9411,1,"n"],[9412,1,"o"],[9413,1,"p"],[9414,1,"q"],[9415,1,"r"],[9416,1,"s"],[9417,1,"t"],[9418,1,"u"],[9419,1,"v"],[9420,1,"w"],[9421,1,"x"],[9422,1,"y"],[9423,1,"z"],[9424,1,"a"],[9425,1,"b"],[9426,1,"c"],[9427,1,"d"],[9428,1,"e"],[9429,1,"f"],[9430,1,"g"],[9431,1,"h"],[9432,1,"i"],[9433,1,"j"],[9434,1,"k"],[9435,1,"l"],[9436,1,"m"],[9437,1,"n"],[9438,1,"o"],[9439,1,"p"],[9440,1,"q"],[9441,1,"r"],[9442,1,"s"],[9443,1,"t"],[9444,1,"u"],[9445,1,"v"],[9446,1,"w"],[9447,1,"x"],[9448,1,"y"],[9449,1,"z"],[9450,1,"0"],[[9451,9470],2],[9471,2],[[9472,9621],2],[[9622,9631],2],[[9632,9711],2],[[9712,9719],2],[[9720,9727],2],[[9728,9747],2],[[9748,9749],2],[[9750,9751],2],[9752,2],[9753,2],[[9754,9839],2],[[9840,9841],2],[[9842,9853],2],[[9854,9855],2],[[9856,9865],2],[[9866,9873],2],[[9874,9884],2],[9885,2],[[9886,9887],2],[[9888,9889],2],[[9890,9905],2],[9906,2],[[9907,9916],2],[[9917,9919],2],[[9920,9923],2],[[9924,9933],2],[9934,2],[[9935,9953],2],[9954,2],[9955,2],[[9956,9959],2],[[9960,9983],2],[9984,2],[[9985,9988],2],[9989,2],[[9990,9993],2],[[9994,9995],2],[[9996,10023],2],[10024,2],[[10025,10059],2],[10060,2],[10061,2],[10062,2],[[10063,10066],2],[[10067,10069],2],[10070,2],[10071,2],[[10072,10078],2],[[10079,10080],2],[[10081,10087],2],[[10088,10101],2],[[10102,10132],2],[[10133,10135],2],[[10136,10159],2],[10160,2],[[10161,10174],2],[10175,2],[[10176,10182],2],[[10183,10186],2],[10187,2],[10188,2],[10189,2],[[10190,10191],2],[[10192,10219],2],[[10220,10223],2],[[10224,10239],2],[[10240,10495],2],[[10496,10763],2],[10764,1,"\u222B\u222B\u222B\u222B"],[[10765,10867],2],[10868,1,"::="],[10869,1,"=="],[10870,1,"==="],[[10871,10971],2],[10972,1,"\u2ADD\u0338"],[[10973,11007],2],[[11008,11021],2],[[11022,11027],2],[[11028,11034],2],[[11035,11039],2],[[11040,11043],2],[[11044,11084],2],[[11085,11087],2],[[11088,11092],2],[[11093,11097],2],[[11098,11123],2],[[11124,11125],3],[[11126,11157],2],[11158,3],[11159,2],[[11160,11193],2],[[11194,11196],2],[[11197,11208],2],[11209,2],[[11210,11217],2],[11218,2],[[11219,11243],2],[[11244,11247],2],[[11248,11262],2],[11263,2],[11264,1,"\u2C30"],[11265,1,"\u2C31"],[11266,1,"\u2C32"],[11267,1,"\u2C33"],[11268,1,"\u2C34"],[11269,1,"\u2C35"],[11270,1,"\u2C36"],[11271,1,"\u2C37"],[11272,1,"\u2C38"],[11273,1,"\u2C39"],[11274,1,"\u2C3A"],[11275,1,"\u2C3B"],[11276,1,"\u2C3C"],[11277,1,"\u2C3D"],[11278,1,"\u2C3E"],[11279,1,"\u2C3F"],[11280,1,"\u2C40"],[11281,1,"\u2C41"],[11282,1,"\u2C42"],[11283,1,"\u2C43"],[11284,1,"\u2C44"],[11285,1,"\u2C45"],[11286,1,"\u2C46"],[11287,1,"\u2C47"],[11288,1,"\u2C48"],[11289,1,"\u2C49"],[11290,1,"\u2C4A"],[11291,1,"\u2C4B"],[11292,1,"\u2C4C"],[11293,1,"\u2C4D"],[11294,1,"\u2C4E"],[11295,1,"\u2C4F"],[11296,1,"\u2C50"],[11297,1,"\u2C51"],[11298,1,"\u2C52"],[11299,1,"\u2C53"],[11300,1,"\u2C54"],[11301,1,"\u2C55"],[11302,1,"\u2C56"],[11303,1,"\u2C57"],[11304,1,"\u2C58"],[11305,1,"\u2C59"],[11306,1,"\u2C5A"],[11307,1,"\u2C5B"],[11308,1,"\u2C5C"],[11309,1,"\u2C5D"],[11310,1,"\u2C5E"],[11311,1,"\u2C5F"],[[11312,11358],2],[11359,2],[11360,1,"\u2C61"],[11361,2],[11362,1,"\u026B"],[11363,1,"\u1D7D"],[11364,1,"\u027D"],[[11365,11366],2],[11367,1,"\u2C68"],[11368,2],[11369,1,"\u2C6A"],[11370,2],[11371,1,"\u2C6C"],[11372,2],[11373,1,"\u0251"],[11374,1,"\u0271"],[11375,1,"\u0250"],[11376,1,"\u0252"],[11377,2],[11378,1,"\u2C73"],[11379,2],[11380,2],[11381,1,"\u2C76"],[[11382,11383],2],[[11384,11387],2],[11388,1,"j"],[11389,1,"v"],[11390,1,"\u023F"],[11391,1,"\u0240"],[11392,1,"\u2C81"],[11393,2],[11394,1,"\u2C83"],[11395,2],[11396,1,"\u2C85"],[11397,2],[11398,1,"\u2C87"],[11399,2],[11400,1,"\u2C89"],[11401,2],[11402,1,"\u2C8B"],[11403,2],[11404,1,"\u2C8D"],[11405,2],[11406,1,"\u2C8F"],[11407,2],[11408,1,"\u2C91"],[11409,2],[11410,1,"\u2C93"],[11411,2],[11412,1,"\u2C95"],[11413,2],[11414,1,"\u2C97"],[11415,2],[11416,1,"\u2C99"],[11417,2],[11418,1,"\u2C9B"],[11419,2],[11420,1,"\u2C9D"],[11421,2],[11422,1,"\u2C9F"],[11423,2],[11424,1,"\u2CA1"],[11425,2],[11426,1,"\u2CA3"],[11427,2],[11428,1,"\u2CA5"],[11429,2],[11430,1,"\u2CA7"],[11431,2],[11432,1,"\u2CA9"],[11433,2],[11434,1,"\u2CAB"],[11435,2],[11436,1,"\u2CAD"],[11437,2],[11438,1,"\u2CAF"],[11439,2],[11440,1,"\u2CB1"],[11441,2],[11442,1,"\u2CB3"],[11443,2],[11444,1,"\u2CB5"],[11445,2],[11446,1,"\u2CB7"],[11447,2],[11448,1,"\u2CB9"],[11449,2],[11450,1,"\u2CBB"],[11451,2],[11452,1,"\u2CBD"],[11453,2],[11454,1,"\u2CBF"],[11455,2],[11456,1,"\u2CC1"],[11457,2],[11458,1,"\u2CC3"],[11459,2],[11460,1,"\u2CC5"],[11461,2],[11462,1,"\u2CC7"],[11463,2],[11464,1,"\u2CC9"],[11465,2],[11466,1,"\u2CCB"],[11467,2],[11468,1,"\u2CCD"],[11469,2],[11470,1,"\u2CCF"],[11471,2],[11472,1,"\u2CD1"],[11473,2],[11474,1,"\u2CD3"],[11475,2],[11476,1,"\u2CD5"],[11477,2],[11478,1,"\u2CD7"],[11479,2],[11480,1,"\u2CD9"],[11481,2],[11482,1,"\u2CDB"],[11483,2],[11484,1,"\u2CDD"],[11485,2],[11486,1,"\u2CDF"],[11487,2],[11488,1,"\u2CE1"],[11489,2],[11490,1,"\u2CE3"],[[11491,11492],2],[[11493,11498],2],[11499,1,"\u2CEC"],[11500,2],[11501,1,"\u2CEE"],[[11502,11505],2],[11506,1,"\u2CF3"],[11507,2],[[11508,11512],3],[[11513,11519],2],[[11520,11557],2],[11558,3],[11559,2],[[11560,11564],3],[11565,2],[[11566,11567],3],[[11568,11621],2],[[11622,11623],2],[[11624,11630],3],[11631,1,"\u2D61"],[11632,2],[[11633,11646],3],[11647,2],[[11648,11670],2],[[11671,11679],3],[[11680,11686],2],[11687,3],[[11688,11694],2],[11695,3],[[11696,11702],2],[11703,3],[[11704,11710],2],[11711,3],[[11712,11718],2],[11719,3],[[11720,11726],2],[11727,3],[[11728,11734],2],[11735,3],[[11736,11742],2],[11743,3],[[11744,11775],2],[[11776,11799],2],[[11800,11803],2],[[11804,11805],2],[[11806,11822],2],[11823,2],[11824,2],[11825,2],[[11826,11835],2],[[11836,11842],2],[[11843,11844],2],[[11845,11849],2],[[11850,11854],2],[11855,2],[[11856,11858],2],[[11859,11869],2],[[11870,11903],3],[[11904,11929],2],[11930,3],[[11931,11934],2],[11935,1,"\u6BCD"],[[11936,12018],2],[12019,1,"\u9F9F"],[[12020,12031],3],[12032,1,"\u4E00"],[12033,1,"\u4E28"],[12034,1,"\u4E36"],[12035,1,"\u4E3F"],[12036,1,"\u4E59"],[12037,1,"\u4E85"],[12038,1,"\u4E8C"],[12039,1,"\u4EA0"],[12040,1,"\u4EBA"],[12041,1,"\u513F"],[12042,1,"\u5165"],[12043,1,"\u516B"],[12044,1,"\u5182"],[12045,1,"\u5196"],[12046,1,"\u51AB"],[12047,1,"\u51E0"],[12048,1,"\u51F5"],[12049,1,"\u5200"],[12050,1,"\u529B"],[12051,1,"\u52F9"],[12052,1,"\u5315"],[12053,1,"\u531A"],[12054,1,"\u5338"],[12055,1,"\u5341"],[12056,1,"\u535C"],[12057,1,"\u5369"],[12058,1,"\u5382"],[12059,1,"\u53B6"],[12060,1,"\u53C8"],[12061,1,"\u53E3"],[12062,1,"\u56D7"],[12063,1,"\u571F"],[12064,1,"\u58EB"],[12065,1,"\u5902"],[12066,1,"\u590A"],[12067,1,"\u5915"],[12068,1,"\u5927"],[12069,1,"\u5973"],[12070,1,"\u5B50"],[12071,1,"\u5B80"],[12072,1,"\u5BF8"],[12073,1,"\u5C0F"],[12074,1,"\u5C22"],[12075,1,"\u5C38"],[12076,1,"\u5C6E"],[12077,1,"\u5C71"],[12078,1,"\u5DDB"],[12079,1,"\u5DE5"],[12080,1,"\u5DF1"],[12081,1,"\u5DFE"],[12082,1,"\u5E72"],[12083,1,"\u5E7A"],[12084,1,"\u5E7F"],[12085,1,"\u5EF4"],[12086,1,"\u5EFE"],[12087,1,"\u5F0B"],[12088,1,"\u5F13"],[12089,1,"\u5F50"],[12090,1,"\u5F61"],[12091,1,"\u5F73"],[12092,1,"\u5FC3"],[12093,1,"\u6208"],[12094,1,"\u6236"],[12095,1,"\u624B"],[12096,1,"\u652F"],[12097,1,"\u6534"],[12098,1,"\u6587"],[12099,1,"\u6597"],[12100,1,"\u65A4"],[12101,1,"\u65B9"],[12102,1,"\u65E0"],[12103,1,"\u65E5"],[12104,1,"\u66F0"],[12105,1,"\u6708"],[12106,1,"\u6728"],[12107,1,"\u6B20"],[12108,1,"\u6B62"],[12109,1,"\u6B79"],[12110,1,"\u6BB3"],[12111,1,"\u6BCB"],[12112,1,"\u6BD4"],[12113,1,"\u6BDB"],[12114,1,"\u6C0F"],[12115,1,"\u6C14"],[12116,1,"\u6C34"],[12117,1,"\u706B"],[12118,1,"\u722A"],[12119,1,"\u7236"],[12120,1,"\u723B"],[12121,1,"\u723F"],[12122,1,"\u7247"],[12123,1,"\u7259"],[12124,1,"\u725B"],[12125,1,"\u72AC"],[12126,1,"\u7384"],[12127,1,"\u7389"],[12128,1,"\u74DC"],[12129,1,"\u74E6"],[12130,1,"\u7518"],[12131,1,"\u751F"],[12132,1,"\u7528"],[12133,1,"\u7530"],[12134,1,"\u758B"],[12135,1,"\u7592"],[12136,1,"\u7676"],[12137,1,"\u767D"],[12138,1,"\u76AE"],[12139,1,"\u76BF"],[12140,1,"\u76EE"],[12141,1,"\u77DB"],[12142,1,"\u77E2"],[12143,1,"\u77F3"],[12144,1,"\u793A"],[12145,1,"\u79B8"],[12146,1,"\u79BE"],[12147,1,"\u7A74"],[12148,1,"\u7ACB"],[12149,1,"\u7AF9"],[12150,1,"\u7C73"],[12151,1,"\u7CF8"],[12152,1,"\u7F36"],[12153,1,"\u7F51"],[12154,1,"\u7F8A"],[12155,1,"\u7FBD"],[12156,1,"\u8001"],[12157,1,"\u800C"],[12158,1,"\u8012"],[12159,1,"\u8033"],[12160,1,"\u807F"],[12161,1,"\u8089"],[12162,1,"\u81E3"],[12163,1,"\u81EA"],[12164,1,"\u81F3"],[12165,1,"\u81FC"],[12166,1,"\u820C"],[12167,1,"\u821B"],[12168,1,"\u821F"],[12169,1,"\u826E"],[12170,1,"\u8272"],[12171,1,"\u8278"],[12172,1,"\u864D"],[12173,1,"\u866B"],[12174,1,"\u8840"],[12175,1,"\u884C"],[12176,1,"\u8863"],[12177,1,"\u897E"],[12178,1,"\u898B"],[12179,1,"\u89D2"],[12180,1,"\u8A00"],[12181,1,"\u8C37"],[12182,1,"\u8C46"],[12183,1,"\u8C55"],[12184,1,"\u8C78"],[12185,1,"\u8C9D"],[12186,1,"\u8D64"],[12187,1,"\u8D70"],[12188,1,"\u8DB3"],[12189,1,"\u8EAB"],[12190,1,"\u8ECA"],[12191,1,"\u8F9B"],[12192,1,"\u8FB0"],[12193,1,"\u8FB5"],[12194,1,"\u9091"],[12195,1,"\u9149"],[12196,1,"\u91C6"],[12197,1,"\u91CC"],[12198,1,"\u91D1"],[12199,1,"\u9577"],[12200,1,"\u9580"],[12201,1,"\u961C"],[12202,1,"\u96B6"],[12203,1,"\u96B9"],[12204,1,"\u96E8"],[12205,1,"\u9751"],[12206,1,"\u975E"],[12207,1,"\u9762"],[12208,1,"\u9769"],[12209,1,"\u97CB"],[12210,1,"\u97ED"],[12211,1,"\u97F3"],[12212,1,"\u9801"],[12213,1,"\u98A8"],[12214,1,"\u98DB"],[12215,1,"\u98DF"],[12216,1,"\u9996"],[12217,1,"\u9999"],[12218,1,"\u99AC"],[12219,1,"\u9AA8"],[12220,1,"\u9AD8"],[12221,1,"\u9ADF"],[12222,1,"\u9B25"],[12223,1,"\u9B2F"],[12224,1,"\u9B32"],[12225,1,"\u9B3C"],[12226,1,"\u9B5A"],[12227,1,"\u9CE5"],[12228,1,"\u9E75"],[12229,1,"\u9E7F"],[12230,1,"\u9EA5"],[12231,1,"\u9EBB"],[12232,1,"\u9EC3"],[12233,1,"\u9ECD"],[12234,1,"\u9ED1"],[12235,1,"\u9EF9"],[12236,1,"\u9EFD"],[12237,1,"\u9F0E"],[12238,1,"\u9F13"],[12239,1,"\u9F20"],[12240,1,"\u9F3B"],[12241,1,"\u9F4A"],[12242,1,"\u9F52"],[12243,1,"\u9F8D"],[12244,1,"\u9F9C"],[12245,1,"\u9FA0"],[[12246,12271],3],[[12272,12283],3],[[12284,12287],3],[12288,1," "],[12289,2],[12290,1,"."],[[12291,12292],2],[[12293,12295],2],[[12296,12329],2],[[12330,12333],2],[[12334,12341],2],[12342,1,"\u3012"],[12343,2],[12344,1,"\u5341"],[12345,1,"\u5344"],[12346,1,"\u5345"],[12347,2],[12348,2],[12349,2],[12350,2],[12351,2],[12352,3],[[12353,12436],2],[[12437,12438],2],[[12439,12440],3],[[12441,12442],2],[12443,1," \u3099"],[12444,1," \u309A"],[[12445,12446],2],[12447,1,"\u3088\u308A"],[12448,2],[[12449,12542],2],[12543,1,"\u30B3\u30C8"],[[12544,12548],3],[[12549,12588],2],[12589,2],[12590,2],[12591,2],[12592,3],[12593,1,"\u1100"],[12594,1,"\u1101"],[12595,1,"\u11AA"],[12596,1,"\u1102"],[12597,1,"\u11AC"],[12598,1,"\u11AD"],[12599,1,"\u1103"],[12600,1,"\u1104"],[12601,1,"\u1105"],[12602,1,"\u11B0"],[12603,1,"\u11B1"],[12604,1,"\u11B2"],[12605,1,"\u11B3"],[12606,1,"\u11B4"],[12607,1,"\u11B5"],[12608,1,"\u111A"],[12609,1,"\u1106"],[12610,1,"\u1107"],[12611,1,"\u1108"],[12612,1,"\u1121"],[12613,1,"\u1109"],[12614,1,"\u110A"],[12615,1,"\u110B"],[12616,1,"\u110C"],[12617,1,"\u110D"],[12618,1,"\u110E"],[12619,1,"\u110F"],[12620,1,"\u1110"],[12621,1,"\u1111"],[12622,1,"\u1112"],[12623,1,"\u1161"],[12624,1,"\u1162"],[12625,1,"\u1163"],[12626,1,"\u1164"],[12627,1,"\u1165"],[12628,1,"\u1166"],[12629,1,"\u1167"],[12630,1,"\u1168"],[12631,1,"\u1169"],[12632,1,"\u116A"],[12633,1,"\u116B"],[12634,1,"\u116C"],[12635,1,"\u116D"],[12636,1,"\u116E"],[12637,1,"\u116F"],[12638,1,"\u1170"],[12639,1,"\u1171"],[12640,1,"\u1172"],[12641,1,"\u1173"],[12642,1,"\u1174"],[12643,1,"\u1175"],[12644,7],[12645,1,"\u1114"],[12646,1,"\u1115"],[12647,1,"\u11C7"],[12648,1,"\u11C8"],[12649,1,"\u11CC"],[12650,1,"\u11CE"],[12651,1,"\u11D3"],[12652,1,"\u11D7"],[12653,1,"\u11D9"],[12654,1,"\u111C"],[12655,1,"\u11DD"],[12656,1,"\u11DF"],[12657,1,"\u111D"],[12658,1,"\u111E"],[12659,1,"\u1120"],[12660,1,"\u1122"],[12661,1,"\u1123"],[12662,1,"\u1127"],[12663,1,"\u1129"],[12664,1,"\u112B"],[12665,1,"\u112C"],[12666,1,"\u112D"],[12667,1,"\u112E"],[12668,1,"\u112F"],[12669,1,"\u1132"],[12670,1,"\u1136"],[12671,1,"\u1140"],[12672,1,"\u1147"],[12673,1,"\u114C"],[12674,1,"\u11F1"],[12675,1,"\u11F2"],[12676,1,"\u1157"],[12677,1,"\u1158"],[12678,1,"\u1159"],[12679,1,"\u1184"],[12680,1,"\u1185"],[12681,1,"\u1188"],[12682,1,"\u1191"],[12683,1,"\u1192"],[12684,1,"\u1194"],[12685,1,"\u119E"],[12686,1,"\u11A1"],[12687,3],[[12688,12689],2],[12690,1,"\u4E00"],[12691,1,"\u4E8C"],[12692,1,"\u4E09"],[12693,1,"\u56DB"],[12694,1,"\u4E0A"],[12695,1,"\u4E2D"],[12696,1,"\u4E0B"],[12697,1,"\u7532"],[12698,1,"\u4E59"],[12699,1,"\u4E19"],[12700,1,"\u4E01"],[12701,1,"\u5929"],[12702,1,"\u5730"],[12703,1,"\u4EBA"],[[12704,12727],2],[[12728,12730],2],[[12731,12735],2],[[12736,12751],2],[[12752,12771],2],[[12772,12773],2],[[12774,12782],3],[12783,3],[[12784,12799],2],[12800,1,"(\u1100)"],[12801,1,"(\u1102)"],[12802,1,"(\u1103)"],[12803,1,"(\u1105)"],[12804,1,"(\u1106)"],[12805,1,"(\u1107)"],[12806,1,"(\u1109)"],[12807,1,"(\u110B)"],[12808,1,"(\u110C)"],[12809,1,"(\u110E)"],[12810,1,"(\u110F)"],[12811,1,"(\u1110)"],[12812,1,"(\u1111)"],[12813,1,"(\u1112)"],[12814,1,"(\uAC00)"],[12815,1,"(\uB098)"],[12816,1,"(\uB2E4)"],[12817,1,"(\uB77C)"],[12818,1,"(\uB9C8)"],[12819,1,"(\uBC14)"],[12820,1,"(\uC0AC)"],[12821,1,"(\uC544)"],[12822,1,"(\uC790)"],[12823,1,"(\uCC28)"],[12824,1,"(\uCE74)"],[12825,1,"(\uD0C0)"],[12826,1,"(\uD30C)"],[12827,1,"(\uD558)"],[12828,1,"(\uC8FC)"],[12829,1,"(\uC624\uC804)"],[12830,1,"(\uC624\uD6C4)"],[12831,3],[12832,1,"(\u4E00)"],[12833,1,"(\u4E8C)"],[12834,1,"(\u4E09)"],[12835,1,"(\u56DB)"],[12836,1,"(\u4E94)"],[12837,1,"(\u516D)"],[12838,1,"(\u4E03)"],[12839,1,"(\u516B)"],[12840,1,"(\u4E5D)"],[12841,1,"(\u5341)"],[12842,1,"(\u6708)"],[12843,1,"(\u706B)"],[12844,1,"(\u6C34)"],[12845,1,"(\u6728)"],[12846,1,"(\u91D1)"],[12847,1,"(\u571F)"],[12848,1,"(\u65E5)"],[12849,1,"(\u682A)"],[12850,1,"(\u6709)"],[12851,1,"(\u793E)"],[12852,1,"(\u540D)"],[12853,1,"(\u7279)"],[12854,1,"(\u8CA1)"],[12855,1,"(\u795D)"],[12856,1,"(\u52B4)"],[12857,1,"(\u4EE3)"],[12858,1,"(\u547C)"],[12859,1,"(\u5B66)"],[12860,1,"(\u76E3)"],[12861,1,"(\u4F01)"],[12862,1,"(\u8CC7)"],[12863,1,"(\u5354)"],[12864,1,"(\u796D)"],[12865,1,"(\u4F11)"],[12866,1,"(\u81EA)"],[12867,1,"(\u81F3)"],[12868,1,"\u554F"],[12869,1,"\u5E7C"],[12870,1,"\u6587"],[12871,1,"\u7B8F"],[[12872,12879],2],[12880,1,"pte"],[12881,1,"21"],[12882,1,"22"],[12883,1,"23"],[12884,1,"24"],[12885,1,"25"],[12886,1,"26"],[12887,1,"27"],[12888,1,"28"],[12889,1,"29"],[12890,1,"30"],[12891,1,"31"],[12892,1,"32"],[12893,1,"33"],[12894,1,"34"],[12895,1,"35"],[12896,1,"\u1100"],[12897,1,"\u1102"],[12898,1,"\u1103"],[12899,1,"\u1105"],[12900,1,"\u1106"],[12901,1,"\u1107"],[12902,1,"\u1109"],[12903,1,"\u110B"],[12904,1,"\u110C"],[12905,1,"\u110E"],[12906,1,"\u110F"],[12907,1,"\u1110"],[12908,1,"\u1111"],[12909,1,"\u1112"],[12910,1,"\uAC00"],[12911,1,"\uB098"],[12912,1,"\uB2E4"],[12913,1,"\uB77C"],[12914,1,"\uB9C8"],[12915,1,"\uBC14"],[12916,1,"\uC0AC"],[12917,1,"\uC544"],[12918,1,"\uC790"],[12919,1,"\uCC28"],[12920,1,"\uCE74"],[12921,1,"\uD0C0"],[12922,1,"\uD30C"],[12923,1,"\uD558"],[12924,1,"\uCC38\uACE0"],[12925,1,"\uC8FC\uC758"],[12926,1,"\uC6B0"],[12927,2],[12928,1,"\u4E00"],[12929,1,"\u4E8C"],[12930,1,"\u4E09"],[12931,1,"\u56DB"],[12932,1,"\u4E94"],[12933,1,"\u516D"],[12934,1,"\u4E03"],[12935,1,"\u516B"],[12936,1,"\u4E5D"],[12937,1,"\u5341"],[12938,1,"\u6708"],[12939,1,"\u706B"],[12940,1,"\u6C34"],[12941,1,"\u6728"],[12942,1,"\u91D1"],[12943,1,"\u571F"],[12944,1,"\u65E5"],[12945,1,"\u682A"],[12946,1,"\u6709"],[12947,1,"\u793E"],[12948,1,"\u540D"],[12949,1,"\u7279"],[12950,1,"\u8CA1"],[12951,1,"\u795D"],[12952,1,"\u52B4"],[12953,1,"\u79D8"],[12954,1,"\u7537"],[12955,1,"\u5973"],[12956,1,"\u9069"],[12957,1,"\u512A"],[12958,1,"\u5370"],[12959,1,"\u6CE8"],[12960,1,"\u9805"],[12961,1,"\u4F11"],[12962,1,"\u5199"],[12963,1,"\u6B63"],[12964,1,"\u4E0A"],[12965,1,"\u4E2D"],[12966,1,"\u4E0B"],[12967,1,"\u5DE6"],[12968,1,"\u53F3"],[12969,1,"\u533B"],[12970,1,"\u5B97"],[12971,1,"\u5B66"],[12972,1,"\u76E3"],[12973,1,"\u4F01"],[12974,1,"\u8CC7"],[12975,1,"\u5354"],[12976,1,"\u591C"],[12977,1,"36"],[12978,1,"37"],[12979,1,"38"],[12980,1,"39"],[12981,1,"40"],[12982,1,"41"],[12983,1,"42"],[12984,1,"43"],[12985,1,"44"],[12986,1,"45"],[12987,1,"46"],[12988,1,"47"],[12989,1,"48"],[12990,1,"49"],[12991,1,"50"],[12992,1,"1\u6708"],[12993,1,"2\u6708"],[12994,1,"3\u6708"],[12995,1,"4\u6708"],[12996,1,"5\u6708"],[12997,1,"6\u6708"],[12998,1,"7\u6708"],[12999,1,"8\u6708"],[13000,1,"9\u6708"],[13001,1,"10\u6708"],[13002,1,"11\u6708"],[13003,1,"12\u6708"],[13004,1,"hg"],[13005,1,"erg"],[13006,1,"ev"],[13007,1,"ltd"],[13008,1,"\u30A2"],[13009,1,"\u30A4"],[13010,1,"\u30A6"],[13011,1,"\u30A8"],[13012,1,"\u30AA"],[13013,1,"\u30AB"],[13014,1,"\u30AD"],[13015,1,"\u30AF"],[13016,1,"\u30B1"],[13017,1,"\u30B3"],[13018,1,"\u30B5"],[13019,1,"\u30B7"],[13020,1,"\u30B9"],[13021,1,"\u30BB"],[13022,1,"\u30BD"],[13023,1,"\u30BF"],[13024,1,"\u30C1"],[13025,1,"\u30C4"],[13026,1,"\u30C6"],[13027,1,"\u30C8"],[13028,1,"\u30CA"],[13029,1,"\u30CB"],[13030,1,"\u30CC"],[13031,1,"\u30CD"],[13032,1,"\u30CE"],[13033,1,"\u30CF"],[13034,1,"\u30D2"],[13035,1,"\u30D5"],[13036,1,"\u30D8"],[13037,1,"\u30DB"],[13038,1,"\u30DE"],[13039,1,"\u30DF"],[13040,1,"\u30E0"],[13041,1,"\u30E1"],[13042,1,"\u30E2"],[13043,1,"\u30E4"],[13044,1,"\u30E6"],[13045,1,"\u30E8"],[13046,1,"\u30E9"],[13047,1,"\u30EA"],[13048,1,"\u30EB"],[13049,1,"\u30EC"],[13050,1,"\u30ED"],[13051,1,"\u30EF"],[13052,1,"\u30F0"],[13053,1,"\u30F1"],[13054,1,"\u30F2"],[13055,1,"\u4EE4\u548C"],[13056,1,"\u30A2\u30D1\u30FC\u30C8"],[13057,1,"\u30A2\u30EB\u30D5\u30A1"],[13058,1,"\u30A2\u30F3\u30DA\u30A2"],[13059,1,"\u30A2\u30FC\u30EB"],[13060,1,"\u30A4\u30CB\u30F3\u30B0"],[13061,1,"\u30A4\u30F3\u30C1"],[13062,1,"\u30A6\u30A9\u30F3"],[13063,1,"\u30A8\u30B9\u30AF\u30FC\u30C9"],[13064,1,"\u30A8\u30FC\u30AB\u30FC"],[13065,1,"\u30AA\u30F3\u30B9"],[13066,1,"\u30AA\u30FC\u30E0"],[13067,1,"\u30AB\u30A4\u30EA"],[13068,1,"\u30AB\u30E9\u30C3\u30C8"],[13069,1,"\u30AB\u30ED\u30EA\u30FC"],[13070,1,"\u30AC\u30ED\u30F3"],[13071,1,"\u30AC\u30F3\u30DE"],[13072,1,"\u30AE\u30AC"],[13073,1,"\u30AE\u30CB\u30FC"],[13074,1,"\u30AD\u30E5\u30EA\u30FC"],[13075,1,"\u30AE\u30EB\u30C0\u30FC"],[13076,1,"\u30AD\u30ED"],[13077,1,"\u30AD\u30ED\u30B0\u30E9\u30E0"],[13078,1,"\u30AD\u30ED\u30E1\u30FC\u30C8\u30EB"],[13079,1,"\u30AD\u30ED\u30EF\u30C3\u30C8"],[13080,1,"\u30B0\u30E9\u30E0"],[13081,1,"\u30B0\u30E9\u30E0\u30C8\u30F3"],[13082,1,"\u30AF\u30EB\u30BC\u30A4\u30ED"],[13083,1,"\u30AF\u30ED\u30FC\u30CD"],[13084,1,"\u30B1\u30FC\u30B9"],[13085,1,"\u30B3\u30EB\u30CA"],[13086,1,"\u30B3\u30FC\u30DD"],[13087,1,"\u30B5\u30A4\u30AF\u30EB"],[13088,1,"\u30B5\u30F3\u30C1\u30FC\u30E0"],[13089,1,"\u30B7\u30EA\u30F3\u30B0"],[13090,1,"\u30BB\u30F3\u30C1"],[13091,1,"\u30BB\u30F3\u30C8"],[13092,1,"\u30C0\u30FC\u30B9"],[13093,1,"\u30C7\u30B7"],[13094,1,"\u30C9\u30EB"],[13095,1,"\u30C8\u30F3"],[13096,1,"\u30CA\u30CE"],[13097,1,"\u30CE\u30C3\u30C8"],[13098,1,"\u30CF\u30A4\u30C4"],[13099,1,"\u30D1\u30FC\u30BB\u30F3\u30C8"],[13100,1,"\u30D1\u30FC\u30C4"],[13101,1,"\u30D0\u30FC\u30EC\u30EB"],[13102,1,"\u30D4\u30A2\u30B9\u30C8\u30EB"],[13103,1,"\u30D4\u30AF\u30EB"],[13104,1,"\u30D4\u30B3"],[13105,1,"\u30D3\u30EB"],[13106,1,"\u30D5\u30A1\u30E9\u30C3\u30C9"],[13107,1,"\u30D5\u30A3\u30FC\u30C8"],[13108,1,"\u30D6\u30C3\u30B7\u30A7\u30EB"],[13109,1,"\u30D5\u30E9\u30F3"],[13110,1,"\u30D8\u30AF\u30BF\u30FC\u30EB"],[13111,1,"\u30DA\u30BD"],[13112,1,"\u30DA\u30CB\u30D2"],[13113,1,"\u30D8\u30EB\u30C4"],[13114,1,"\u30DA\u30F3\u30B9"],[13115,1,"\u30DA\u30FC\u30B8"],[13116,1,"\u30D9\u30FC\u30BF"],[13117,1,"\u30DD\u30A4\u30F3\u30C8"],[13118,1,"\u30DC\u30EB\u30C8"],[13119,1,"\u30DB\u30F3"],[13120,1,"\u30DD\u30F3\u30C9"],[13121,1,"\u30DB\u30FC\u30EB"],[13122,1,"\u30DB\u30FC\u30F3"],[13123,1,"\u30DE\u30A4\u30AF\u30ED"],[13124,1,"\u30DE\u30A4\u30EB"],[13125,1,"\u30DE\u30C3\u30CF"],[13126,1,"\u30DE\u30EB\u30AF"],[13127,1,"\u30DE\u30F3\u30B7\u30E7\u30F3"],[13128,1,"\u30DF\u30AF\u30ED\u30F3"],[13129,1,"\u30DF\u30EA"],[13130,1,"\u30DF\u30EA\u30D0\u30FC\u30EB"],[13131,1,"\u30E1\u30AC"],[13132,1,"\u30E1\u30AC\u30C8\u30F3"],[13133,1,"\u30E1\u30FC\u30C8\u30EB"],[13134,1,"\u30E4\u30FC\u30C9"],[13135,1,"\u30E4\u30FC\u30EB"],[13136,1,"\u30E6\u30A2\u30F3"],[13137,1,"\u30EA\u30C3\u30C8\u30EB"],[13138,1,"\u30EA\u30E9"],[13139,1,"\u30EB\u30D4\u30FC"],[13140,1,"\u30EB\u30FC\u30D6\u30EB"],[13141,1,"\u30EC\u30E0"],[13142,1,"\u30EC\u30F3\u30C8\u30B2\u30F3"],[13143,1,"\u30EF\u30C3\u30C8"],[13144,1,"0\u70B9"],[13145,1,"1\u70B9"],[13146,1,"2\u70B9"],[13147,1,"3\u70B9"],[13148,1,"4\u70B9"],[13149,1,"5\u70B9"],[13150,1,"6\u70B9"],[13151,1,"7\u70B9"],[13152,1,"8\u70B9"],[13153,1,"9\u70B9"],[13154,1,"10\u70B9"],[13155,1,"11\u70B9"],[13156,1,"12\u70B9"],[13157,1,"13\u70B9"],[13158,1,"14\u70B9"],[13159,1,"15\u70B9"],[13160,1,"16\u70B9"],[13161,1,"17\u70B9"],[13162,1,"18\u70B9"],[13163,1,"19\u70B9"],[13164,1,"20\u70B9"],[13165,1,"21\u70B9"],[13166,1,"22\u70B9"],[13167,1,"23\u70B9"],[13168,1,"24\u70B9"],[13169,1,"hpa"],[13170,1,"da"],[13171,1,"au"],[13172,1,"bar"],[13173,1,"ov"],[13174,1,"pc"],[13175,1,"dm"],[13176,1,"dm2"],[13177,1,"dm3"],[13178,1,"iu"],[13179,1,"\u5E73\u6210"],[13180,1,"\u662D\u548C"],[13181,1,"\u5927\u6B63"],[13182,1,"\u660E\u6CBB"],[13183,1,"\u682A\u5F0F\u4F1A\u793E"],[13184,1,"pa"],[13185,1,"na"],[13186,1,"\u03BCa"],[13187,1,"ma"],[13188,1,"ka"],[13189,1,"kb"],[13190,1,"mb"],[13191,1,"gb"],[13192,1,"cal"],[13193,1,"kcal"],[13194,1,"pf"],[13195,1,"nf"],[13196,1,"\u03BCf"],[13197,1,"\u03BCg"],[13198,1,"mg"],[13199,1,"kg"],[13200,1,"hz"],[13201,1,"khz"],[13202,1,"mhz"],[13203,1,"ghz"],[13204,1,"thz"],[13205,1,"\u03BCl"],[13206,1,"ml"],[13207,1,"dl"],[13208,1,"kl"],[13209,1,"fm"],[13210,1,"nm"],[13211,1,"\u03BCm"],[13212,1,"mm"],[13213,1,"cm"],[13214,1,"km"],[13215,1,"mm2"],[13216,1,"cm2"],[13217,1,"m2"],[13218,1,"km2"],[13219,1,"mm3"],[13220,1,"cm3"],[13221,1,"m3"],[13222,1,"km3"],[13223,1,"m\u2215s"],[13224,1,"m\u2215s2"],[13225,1,"pa"],[13226,1,"kpa"],[13227,1,"mpa"],[13228,1,"gpa"],[13229,1,"rad"],[13230,1,"rad\u2215s"],[13231,1,"rad\u2215s2"],[13232,1,"ps"],[13233,1,"ns"],[13234,1,"\u03BCs"],[13235,1,"ms"],[13236,1,"pv"],[13237,1,"nv"],[13238,1,"\u03BCv"],[13239,1,"mv"],[13240,1,"kv"],[13241,1,"mv"],[13242,1,"pw"],[13243,1,"nw"],[13244,1,"\u03BCw"],[13245,1,"mw"],[13246,1,"kw"],[13247,1,"mw"],[13248,1,"k\u03C9"],[13249,1,"m\u03C9"],[13250,3],[13251,1,"bq"],[13252,1,"cc"],[13253,1,"cd"],[13254,1,"c\u2215kg"],[13255,3],[13256,1,"db"],[13257,1,"gy"],[13258,1,"ha"],[13259,1,"hp"],[13260,1,"in"],[13261,1,"kk"],[13262,1,"km"],[13263,1,"kt"],[13264,1,"lm"],[13265,1,"ln"],[13266,1,"log"],[13267,1,"lx"],[13268,1,"mb"],[13269,1,"mil"],[13270,1,"mol"],[13271,1,"ph"],[13272,3],[13273,1,"ppm"],[13274,1,"pr"],[13275,1,"sr"],[13276,1,"sv"],[13277,1,"wb"],[13278,1,"v\u2215m"],[13279,1,"a\u2215m"],[13280,1,"1\u65E5"],[13281,1,"2\u65E5"],[13282,1,"3\u65E5"],[13283,1,"4\u65E5"],[13284,1,"5\u65E5"],[13285,1,"6\u65E5"],[13286,1,"7\u65E5"],[13287,1,"8\u65E5"],[13288,1,"9\u65E5"],[13289,1,"10\u65E5"],[13290,1,"11\u65E5"],[13291,1,"12\u65E5"],[13292,1,"13\u65E5"],[13293,1,"14\u65E5"],[13294,1,"15\u65E5"],[13295,1,"16\u65E5"],[13296,1,"17\u65E5"],[13297,1,"18\u65E5"],[13298,1,"19\u65E5"],[13299,1,"20\u65E5"],[13300,1,"21\u65E5"],[13301,1,"22\u65E5"],[13302,1,"23\u65E5"],[13303,1,"24\u65E5"],[13304,1,"25\u65E5"],[13305,1,"26\u65E5"],[13306,1,"27\u65E5"],[13307,1,"28\u65E5"],[13308,1,"29\u65E5"],[13309,1,"30\u65E5"],[13310,1,"31\u65E5"],[13311,1,"gal"],[[13312,19893],2],[[19894,19903],2],[[19904,19967],2],[[19968,40869],2],[[40870,40891],2],[[40892,40899],2],[[40900,40907],2],[40908,2],[[40909,40917],2],[[40918,40938],2],[[40939,40943],2],[[40944,40956],2],[[40957,40959],2],[[40960,42124],2],[[42125,42127],3],[[42128,42145],2],[[42146,42147],2],[[42148,42163],2],[42164,2],[[42165,42176],2],[42177,2],[[42178,42180],2],[42181,2],[42182,2],[[42183,42191],3],[[42192,42237],2],[[42238,42239],2],[[42240,42508],2],[[42509,42511],2],[[42512,42539],2],[[42540,42559],3],[42560,1,"\uA641"],[42561,2],[42562,1,"\uA643"],[42563,2],[42564,1,"\uA645"],[42565,2],[42566,1,"\uA647"],[42567,2],[42568,1,"\uA649"],[42569,2],[42570,1,"\uA64B"],[42571,2],[42572,1,"\uA64D"],[42573,2],[42574,1,"\uA64F"],[42575,2],[42576,1,"\uA651"],[42577,2],[42578,1,"\uA653"],[42579,2],[42580,1,"\uA655"],[42581,2],[42582,1,"\uA657"],[42583,2],[42584,1,"\uA659"],[42585,2],[42586,1,"\uA65B"],[42587,2],[42588,1,"\uA65D"],[42589,2],[42590,1,"\uA65F"],[42591,2],[42592,1,"\uA661"],[42593,2],[42594,1,"\uA663"],[42595,2],[42596,1,"\uA665"],[42597,2],[42598,1,"\uA667"],[42599,2],[42600,1,"\uA669"],[42601,2],[42602,1,"\uA66B"],[42603,2],[42604,1,"\uA66D"],[[42605,42607],2],[[42608,42611],2],[[42612,42619],2],[[42620,42621],2],[42622,2],[42623,2],[42624,1,"\uA681"],[42625,2],[42626,1,"\uA683"],[42627,2],[42628,1,"\uA685"],[42629,2],[42630,1,"\uA687"],[42631,2],[42632,1,"\uA689"],[42633,2],[42634,1,"\uA68B"],[42635,2],[42636,1,"\uA68D"],[42637,2],[42638,1,"\uA68F"],[42639,2],[42640,1,"\uA691"],[42641,2],[42642,1,"\uA693"],[42643,2],[42644,1,"\uA695"],[42645,2],[42646,1,"\uA697"],[42647,2],[42648,1,"\uA699"],[42649,2],[42650,1,"\uA69B"],[42651,2],[42652,1,"\u044A"],[42653,1,"\u044C"],[42654,2],[42655,2],[[42656,42725],2],[[42726,42735],2],[[42736,42737],2],[[42738,42743],2],[[42744,42751],3],[[42752,42774],2],[[42775,42778],2],[[42779,42783],2],[[42784,42785],2],[42786,1,"\uA723"],[42787,2],[42788,1,"\uA725"],[42789,2],[42790,1,"\uA727"],[42791,2],[42792,1,"\uA729"],[42793,2],[42794,1,"\uA72B"],[42795,2],[42796,1,"\uA72D"],[42797,2],[42798,1,"\uA72F"],[[42799,42801],2],[42802,1,"\uA733"],[42803,2],[42804,1,"\uA735"],[42805,2],[42806,1,"\uA737"],[42807,2],[42808,1,"\uA739"],[42809,2],[42810,1,"\uA73B"],[42811,2],[42812,1,"\uA73D"],[42813,2],[42814,1,"\uA73F"],[42815,2],[42816,1,"\uA741"],[42817,2],[42818,1,"\uA743"],[42819,2],[42820,1,"\uA745"],[42821,2],[42822,1,"\uA747"],[42823,2],[42824,1,"\uA749"],[42825,2],[42826,1,"\uA74B"],[42827,2],[42828,1,"\uA74D"],[42829,2],[42830,1,"\uA74F"],[42831,2],[42832,1,"\uA751"],[42833,2],[42834,1,"\uA753"],[42835,2],[42836,1,"\uA755"],[42837,2],[42838,1,"\uA757"],[42839,2],[42840,1,"\uA759"],[42841,2],[42842,1,"\uA75B"],[42843,2],[42844,1,"\uA75D"],[42845,2],[42846,1,"\uA75F"],[42847,2],[42848,1,"\uA761"],[42849,2],[42850,1,"\uA763"],[42851,2],[42852,1,"\uA765"],[42853,2],[42854,1,"\uA767"],[42855,2],[42856,1,"\uA769"],[42857,2],[42858,1,"\uA76B"],[42859,2],[42860,1,"\uA76D"],[42861,2],[42862,1,"\uA76F"],[42863,2],[42864,1,"\uA76F"],[[42865,42872],2],[42873,1,"\uA77A"],[42874,2],[42875,1,"\uA77C"],[42876,2],[42877,1,"\u1D79"],[42878,1,"\uA77F"],[42879,2],[42880,1,"\uA781"],[42881,2],[42882,1,"\uA783"],[42883,2],[42884,1,"\uA785"],[42885,2],[42886,1,"\uA787"],[[42887,42888],2],[[42889,42890],2],[42891,1,"\uA78C"],[42892,2],[42893,1,"\u0265"],[42894,2],[42895,2],[42896,1,"\uA791"],[42897,2],[42898,1,"\uA793"],[42899,2],[[42900,42901],2],[42902,1,"\uA797"],[42903,2],[42904,1,"\uA799"],[42905,2],[42906,1,"\uA79B"],[42907,2],[42908,1,"\uA79D"],[42909,2],[42910,1,"\uA79F"],[42911,2],[42912,1,"\uA7A1"],[42913,2],[42914,1,"\uA7A3"],[42915,2],[42916,1,"\uA7A5"],[42917,2],[42918,1,"\uA7A7"],[42919,2],[42920,1,"\uA7A9"],[42921,2],[42922,1,"\u0266"],[42923,1,"\u025C"],[42924,1,"\u0261"],[42925,1,"\u026C"],[42926,1,"\u026A"],[42927,2],[42928,1,"\u029E"],[42929,1,"\u0287"],[42930,1,"\u029D"],[42931,1,"\uAB53"],[42932,1,"\uA7B5"],[42933,2],[42934,1,"\uA7B7"],[42935,2],[42936,1,"\uA7B9"],[42937,2],[42938,1,"\uA7BB"],[42939,2],[42940,1,"\uA7BD"],[42941,2],[42942,1,"\uA7BF"],[42943,2],[42944,1,"\uA7C1"],[42945,2],[42946,1,"\uA7C3"],[42947,2],[42948,1,"\uA794"],[42949,1,"\u0282"],[42950,1,"\u1D8E"],[42951,1,"\uA7C8"],[42952,2],[42953,1,"\uA7CA"],[42954,2],[42955,1,"\u0264"],[42956,1,"\uA7CD"],[42957,2],[[42958,42959],3],[42960,1,"\uA7D1"],[42961,2],[42962,3],[42963,2],[42964,3],[42965,2],[42966,1,"\uA7D7"],[42967,2],[42968,1,"\uA7D9"],[42969,2],[42970,1,"\uA7DB"],[42971,2],[42972,1,"\u019B"],[[42973,42993],3],[42994,1,"c"],[42995,1,"f"],[42996,1,"q"],[42997,1,"\uA7F6"],[42998,2],[42999,2],[43000,1,"\u0127"],[43001,1,"\u0153"],[43002,2],[[43003,43007],2],[[43008,43047],2],[[43048,43051],2],[43052,2],[[43053,43055],3],[[43056,43065],2],[[43066,43071],3],[[43072,43123],2],[[43124,43127],2],[[43128,43135],3],[[43136,43204],2],[43205,2],[[43206,43213],3],[[43214,43215],2],[[43216,43225],2],[[43226,43231],3],[[43232,43255],2],[[43256,43258],2],[43259,2],[43260,2],[43261,2],[[43262,43263],2],[[43264,43309],2],[[43310,43311],2],[[43312,43347],2],[[43348,43358],3],[43359,2],[[43360,43388],2],[[43389,43391],3],[[43392,43456],2],[[43457,43469],2],[43470,3],[[43471,43481],2],[[43482,43485],3],[[43486,43487],2],[[43488,43518],2],[43519,3],[[43520,43574],2],[[43575,43583],3],[[43584,43597],2],[[43598,43599],3],[[43600,43609],2],[[43610,43611],3],[[43612,43615],2],[[43616,43638],2],[[43639,43641],2],[[43642,43643],2],[[43644,43647],2],[[43648,43714],2],[[43715,43738],3],[[43739,43741],2],[[43742,43743],2],[[43744,43759],2],[[43760,43761],2],[[43762,43766],2],[[43767,43776],3],[[43777,43782],2],[[43783,43784],3],[[43785,43790],2],[[43791,43792],3],[[43793,43798],2],[[43799,43807],3],[[43808,43814],2],[43815,3],[[43816,43822],2],[43823,3],[[43824,43866],2],[43867,2],[43868,1,"\uA727"],[43869,1,"\uAB37"],[43870,1,"\u026B"],[43871,1,"\uAB52"],[[43872,43875],2],[[43876,43877],2],[[43878,43879],2],[43880,2],[43881,1,"\u028D"],[[43882,43883],2],[[43884,43887],3],[43888,1,"\u13A0"],[43889,1,"\u13A1"],[43890,1,"\u13A2"],[43891,1,"\u13A3"],[43892,1,"\u13A4"],[43893,1,"\u13A5"],[43894,1,"\u13A6"],[43895,1,"\u13A7"],[43896,1,"\u13A8"],[43897,1,"\u13A9"],[43898,1,"\u13AA"],[43899,1,"\u13AB"],[43900,1,"\u13AC"],[43901,1,"\u13AD"],[43902,1,"\u13AE"],[43903,1,"\u13AF"],[43904,1,"\u13B0"],[43905,1,"\u13B1"],[43906,1,"\u13B2"],[43907,1,"\u13B3"],[43908,1,"\u13B4"],[43909,1,"\u13B5"],[43910,1,"\u13B6"],[43911,1,"\u13B7"],[43912,1,"\u13B8"],[43913,1,"\u13B9"],[43914,1,"\u13BA"],[43915,1,"\u13BB"],[43916,1,"\u13BC"],[43917,1,"\u13BD"],[43918,1,"\u13BE"],[43919,1,"\u13BF"],[43920,1,"\u13C0"],[43921,1,"\u13C1"],[43922,1,"\u13C2"],[43923,1,"\u13C3"],[43924,1,"\u13C4"],[43925,1,"\u13C5"],[43926,1,"\u13C6"],[43927,1,"\u13C7"],[43928,1,"\u13C8"],[43929,1,"\u13C9"],[43930,1,"\u13CA"],[43931,1,"\u13CB"],[43932,1,"\u13CC"],[43933,1,"\u13CD"],[43934,1,"\u13CE"],[43935,1,"\u13CF"],[43936,1,"\u13D0"],[43937,1,"\u13D1"],[43938,1,"\u13D2"],[43939,1,"\u13D3"],[43940,1,"\u13D4"],[43941,1,"\u13D5"],[43942,1,"\u13D6"],[43943,1,"\u13D7"],[43944,1,"\u13D8"],[43945,1,"\u13D9"],[43946,1,"\u13DA"],[43947,1,"\u13DB"],[43948,1,"\u13DC"],[43949,1,"\u13DD"],[43950,1,"\u13DE"],[43951,1,"\u13DF"],[43952,1,"\u13E0"],[43953,1,"\u13E1"],[43954,1,"\u13E2"],[43955,1,"\u13E3"],[43956,1,"\u13E4"],[43957,1,"\u13E5"],[43958,1,"\u13E6"],[43959,1,"\u13E7"],[43960,1,"\u13E8"],[43961,1,"\u13E9"],[43962,1,"\u13EA"],[43963,1,"\u13EB"],[43964,1,"\u13EC"],[43965,1,"\u13ED"],[43966,1,"\u13EE"],[43967,1,"\u13EF"],[[43968,44010],2],[44011,2],[[44012,44013],2],[[44014,44015],3],[[44016,44025],2],[[44026,44031],3],[[44032,55203],2],[[55204,55215],3],[[55216,55238],2],[[55239,55242],3],[[55243,55291],2],[[55292,55295],3],[[55296,57343],3],[[57344,63743],3],[63744,1,"\u8C48"],[63745,1,"\u66F4"],[63746,1,"\u8ECA"],[63747,1,"\u8CC8"],[63748,1,"\u6ED1"],[63749,1,"\u4E32"],[63750,1,"\u53E5"],[[63751,63752],1,"\u9F9C"],[63753,1,"\u5951"],[63754,1,"\u91D1"],[63755,1,"\u5587"],[63756,1,"\u5948"],[63757,1,"\u61F6"],[63758,1,"\u7669"],[63759,1,"\u7F85"],[63760,1,"\u863F"],[63761,1,"\u87BA"],[63762,1,"\u88F8"],[63763,1,"\u908F"],[63764,1,"\u6A02"],[63765,1,"\u6D1B"],[63766,1,"\u70D9"],[63767,1,"\u73DE"],[63768,1,"\u843D"],[63769,1,"\u916A"],[63770,1,"\u99F1"],[63771,1,"\u4E82"],[63772,1,"\u5375"],[63773,1,"\u6B04"],[63774,1,"\u721B"],[63775,1,"\u862D"],[63776,1,"\u9E1E"],[63777,1,"\u5D50"],[63778,1,"\u6FEB"],[63779,1,"\u85CD"],[63780,1,"\u8964"],[63781,1,"\u62C9"],[63782,1,"\u81D8"],[63783,1,"\u881F"],[63784,1,"\u5ECA"],[63785,1,"\u6717"],[63786,1,"\u6D6A"],[63787,1,"\u72FC"],[63788,1,"\u90CE"],[63789,1,"\u4F86"],[63790,1,"\u51B7"],[63791,1,"\u52DE"],[63792,1,"\u64C4"],[63793,1,"\u6AD3"],[63794,1,"\u7210"],[63795,1,"\u76E7"],[63796,1,"\u8001"],[63797,1,"\u8606"],[63798,1,"\u865C"],[63799,1,"\u8DEF"],[63800,1,"\u9732"],[63801,1,"\u9B6F"],[63802,1,"\u9DFA"],[63803,1,"\u788C"],[63804,1,"\u797F"],[63805,1,"\u7DA0"],[63806,1,"\u83C9"],[63807,1,"\u9304"],[63808,1,"\u9E7F"],[63809,1,"\u8AD6"],[63810,1,"\u58DF"],[63811,1,"\u5F04"],[63812,1,"\u7C60"],[63813,1,"\u807E"],[63814,1,"\u7262"],[63815,1,"\u78CA"],[63816,1,"\u8CC2"],[63817,1,"\u96F7"],[63818,1,"\u58D8"],[63819,1,"\u5C62"],[63820,1,"\u6A13"],[63821,1,"\u6DDA"],[63822,1,"\u6F0F"],[63823,1,"\u7D2F"],[63824,1,"\u7E37"],[63825,1,"\u964B"],[63826,1,"\u52D2"],[63827,1,"\u808B"],[63828,1,"\u51DC"],[63829,1,"\u51CC"],[63830,1,"\u7A1C"],[63831,1,"\u7DBE"],[63832,1,"\u83F1"],[63833,1,"\u9675"],[63834,1,"\u8B80"],[63835,1,"\u62CF"],[63836,1,"\u6A02"],[63837,1,"\u8AFE"],[63838,1,"\u4E39"],[63839,1,"\u5BE7"],[63840,1,"\u6012"],[63841,1,"\u7387"],[63842,1,"\u7570"],[63843,1,"\u5317"],[63844,1,"\u78FB"],[63845,1,"\u4FBF"],[63846,1,"\u5FA9"],[63847,1,"\u4E0D"],[63848,1,"\u6CCC"],[63849,1,"\u6578"],[63850,1,"\u7D22"],[63851,1,"\u53C3"],[63852,1,"\u585E"],[63853,1,"\u7701"],[63854,1,"\u8449"],[63855,1,"\u8AAA"],[63856,1,"\u6BBA"],[63857,1,"\u8FB0"],[63858,1,"\u6C88"],[63859,1,"\u62FE"],[63860,1,"\u82E5"],[63861,1,"\u63A0"],[63862,1,"\u7565"],[63863,1,"\u4EAE"],[63864,1,"\u5169"],[63865,1,"\u51C9"],[63866,1,"\u6881"],[63867,1,"\u7CE7"],[63868,1,"\u826F"],[63869,1,"\u8AD2"],[63870,1,"\u91CF"],[63871,1,"\u52F5"],[63872,1,"\u5442"],[63873,1,"\u5973"],[63874,1,"\u5EEC"],[63875,1,"\u65C5"],[63876,1,"\u6FFE"],[63877,1,"\u792A"],[63878,1,"\u95AD"],[63879,1,"\u9A6A"],[63880,1,"\u9E97"],[63881,1,"\u9ECE"],[63882,1,"\u529B"],[63883,1,"\u66C6"],[63884,1,"\u6B77"],[63885,1,"\u8F62"],[63886,1,"\u5E74"],[63887,1,"\u6190"],[63888,1,"\u6200"],[63889,1,"\u649A"],[63890,1,"\u6F23"],[63891,1,"\u7149"],[63892,1,"\u7489"],[63893,1,"\u79CA"],[63894,1,"\u7DF4"],[63895,1,"\u806F"],[63896,1,"\u8F26"],[63897,1,"\u84EE"],[63898,1,"\u9023"],[63899,1,"\u934A"],[63900,1,"\u5217"],[63901,1,"\u52A3"],[63902,1,"\u54BD"],[63903,1,"\u70C8"],[63904,1,"\u88C2"],[63905,1,"\u8AAA"],[63906,1,"\u5EC9"],[63907,1,"\u5FF5"],[63908,1,"\u637B"],[63909,1,"\u6BAE"],[63910,1,"\u7C3E"],[63911,1,"\u7375"],[63912,1,"\u4EE4"],[63913,1,"\u56F9"],[63914,1,"\u5BE7"],[63915,1,"\u5DBA"],[63916,1,"\u601C"],[63917,1,"\u73B2"],[63918,1,"\u7469"],[63919,1,"\u7F9A"],[63920,1,"\u8046"],[63921,1,"\u9234"],[63922,1,"\u96F6"],[63923,1,"\u9748"],[63924,1,"\u9818"],[63925,1,"\u4F8B"],[63926,1,"\u79AE"],[63927,1,"\u91B4"],[63928,1,"\u96B8"],[63929,1,"\u60E1"],[63930,1,"\u4E86"],[63931,1,"\u50DA"],[63932,1,"\u5BEE"],[63933,1,"\u5C3F"],[63934,1,"\u6599"],[63935,1,"\u6A02"],[63936,1,"\u71CE"],[63937,1,"\u7642"],[63938,1,"\u84FC"],[63939,1,"\u907C"],[63940,1,"\u9F8D"],[63941,1,"\u6688"],[63942,1,"\u962E"],[63943,1,"\u5289"],[63944,1,"\u677B"],[63945,1,"\u67F3"],[63946,1,"\u6D41"],[63947,1,"\u6E9C"],[63948,1,"\u7409"],[63949,1,"\u7559"],[63950,1,"\u786B"],[63951,1,"\u7D10"],[63952,1,"\u985E"],[63953,1,"\u516D"],[63954,1,"\u622E"],[63955,1,"\u9678"],[63956,1,"\u502B"],[63957,1,"\u5D19"],[63958,1,"\u6DEA"],[63959,1,"\u8F2A"],[63960,1,"\u5F8B"],[63961,1,"\u6144"],[63962,1,"\u6817"],[63963,1,"\u7387"],[63964,1,"\u9686"],[63965,1,"\u5229"],[63966,1,"\u540F"],[63967,1,"\u5C65"],[63968,1,"\u6613"],[63969,1,"\u674E"],[63970,1,"\u68A8"],[63971,1,"\u6CE5"],[63972,1,"\u7406"],[63973,1,"\u75E2"],[63974,1,"\u7F79"],[63975,1,"\u88CF"],[63976,1,"\u88E1"],[63977,1,"\u91CC"],[63978,1,"\u96E2"],[63979,1,"\u533F"],[63980,1,"\u6EBA"],[63981,1,"\u541D"],[63982,1,"\u71D0"],[63983,1,"\u7498"],[63984,1,"\u85FA"],[63985,1,"\u96A3"],[63986,1,"\u9C57"],[63987,1,"\u9E9F"],[63988,1,"\u6797"],[63989,1,"\u6DCB"],[63990,1,"\u81E8"],[63991,1,"\u7ACB"],[63992,1,"\u7B20"],[63993,1,"\u7C92"],[63994,1,"\u72C0"],[63995,1,"\u7099"],[63996,1,"\u8B58"],[63997,1,"\u4EC0"],[63998,1,"\u8336"],[63999,1,"\u523A"],[64000,1,"\u5207"],[64001,1,"\u5EA6"],[64002,1,"\u62D3"],[64003,1,"\u7CD6"],[64004,1,"\u5B85"],[64005,1,"\u6D1E"],[64006,1,"\u66B4"],[64007,1,"\u8F3B"],[64008,1,"\u884C"],[64009,1,"\u964D"],[64010,1,"\u898B"],[64011,1,"\u5ED3"],[64012,1,"\u5140"],[64013,1,"\u55C0"],[[64014,64015],2],[64016,1,"\u585A"],[64017,2],[64018,1,"\u6674"],[[64019,64020],2],[64021,1,"\u51DE"],[64022,1,"\u732A"],[64023,1,"\u76CA"],[64024,1,"\u793C"],[64025,1,"\u795E"],[64026,1,"\u7965"],[64027,1,"\u798F"],[64028,1,"\u9756"],[64029,1,"\u7CBE"],[64030,1,"\u7FBD"],[64031,2],[64032,1,"\u8612"],[64033,2],[64034,1,"\u8AF8"],[[64035,64036],2],[64037,1,"\u9038"],[64038,1,"\u90FD"],[[64039,64041],2],[64042,1,"\u98EF"],[64043,1,"\u98FC"],[64044,1,"\u9928"],[64045,1,"\u9DB4"],[64046,1,"\u90DE"],[64047,1,"\u96B7"],[64048,1,"\u4FAE"],[64049,1,"\u50E7"],[64050,1,"\u514D"],[64051,1,"\u52C9"],[64052,1,"\u52E4"],[64053,1,"\u5351"],[64054,1,"\u559D"],[64055,1,"\u5606"],[64056,1,"\u5668"],[64057,1,"\u5840"],[64058,1,"\u58A8"],[64059,1,"\u5C64"],[64060,1,"\u5C6E"],[64061,1,"\u6094"],[64062,1,"\u6168"],[64063,1,"\u618E"],[64064,1,"\u61F2"],[64065,1,"\u654F"],[64066,1,"\u65E2"],[64067,1,"\u6691"],[64068,1,"\u6885"],[64069,1,"\u6D77"],[64070,1,"\u6E1A"],[64071,1,"\u6F22"],[64072,1,"\u716E"],[64073,1,"\u722B"],[64074,1,"\u7422"],[64075,1,"\u7891"],[64076,1,"\u793E"],[64077,1,"\u7949"],[64078,1,"\u7948"],[64079,1,"\u7950"],[64080,1,"\u7956"],[64081,1,"\u795D"],[64082,1,"\u798D"],[64083,1,"\u798E"],[64084,1,"\u7A40"],[64085,1,"\u7A81"],[64086,1,"\u7BC0"],[64087,1,"\u7DF4"],[64088,1,"\u7E09"],[64089,1,"\u7E41"],[64090,1,"\u7F72"],[64091,1,"\u8005"],[64092,1,"\u81ED"],[[64093,64094],1,"\u8279"],[64095,1,"\u8457"],[64096,1,"\u8910"],[64097,1,"\u8996"],[64098,1,"\u8B01"],[64099,1,"\u8B39"],[64100,1,"\u8CD3"],[64101,1,"\u8D08"],[64102,1,"\u8FB6"],[64103,1,"\u9038"],[64104,1,"\u96E3"],[64105,1,"\u97FF"],[64106,1,"\u983B"],[64107,1,"\u6075"],[64108,1,"\uD850\uDEEE"],[64109,1,"\u8218"],[[64110,64111],3],[64112,1,"\u4E26"],[64113,1,"\u51B5"],[64114,1,"\u5168"],[64115,1,"\u4F80"],[64116,1,"\u5145"],[64117,1,"\u5180"],[64118,1,"\u52C7"],[64119,1,"\u52FA"],[64120,1,"\u559D"],[64121,1,"\u5555"],[64122,1,"\u5599"],[64123,1,"\u55E2"],[64124,1,"\u585A"],[64125,1,"\u58B3"],[64126,1,"\u5944"],[64127,1,"\u5954"],[64128,1,"\u5A62"],[64129,1,"\u5B28"],[64130,1,"\u5ED2"],[64131,1,"\u5ED9"],[64132,1,"\u5F69"],[64133,1,"\u5FAD"],[64134,1,"\u60D8"],[64135,1,"\u614E"],[64136,1,"\u6108"],[64137,1,"\u618E"],[64138,1,"\u6160"],[64139,1,"\u61F2"],[64140,1,"\u6234"],[64141,1,"\u63C4"],[64142,1,"\u641C"],[64143,1,"\u6452"],[64144,1,"\u6556"],[64145,1,"\u6674"],[64146,1,"\u6717"],[64147,1,"\u671B"],[64148,1,"\u6756"],[64149,1,"\u6B79"],[64150,1,"\u6BBA"],[64151,1,"\u6D41"],[64152,1,"\u6EDB"],[64153,1,"\u6ECB"],[64154,1,"\u6F22"],[64155,1,"\u701E"],[64156,1,"\u716E"],[64157,1,"\u77A7"],[64158,1,"\u7235"],[64159,1,"\u72AF"],[64160,1,"\u732A"],[64161,1,"\u7471"],[64162,1,"\u7506"],[64163,1,"\u753B"],[64164,1,"\u761D"],[64165,1,"\u761F"],[64166,1,"\u76CA"],[64167,1,"\u76DB"],[64168,1,"\u76F4"],[64169,1,"\u774A"],[64170,1,"\u7740"],[64171,1,"\u78CC"],[64172,1,"\u7AB1"],[64173,1,"\u7BC0"],[64174,1,"\u7C7B"],[64175,1,"\u7D5B"],[64176,1,"\u7DF4"],[64177,1,"\u7F3E"],[64178,1,"\u8005"],[64179,1,"\u8352"],[64180,1,"\u83EF"],[64181,1,"\u8779"],[64182,1,"\u8941"],[64183,1,"\u8986"],[64184,1,"\u8996"],[64185,1,"\u8ABF"],[64186,1,"\u8AF8"],[64187,1,"\u8ACB"],[64188,1,"\u8B01"],[64189,1,"\u8AFE"],[64190,1,"\u8AED"],[64191,1,"\u8B39"],[64192,1,"\u8B8A"],[64193,1,"\u8D08"],[64194,1,"\u8F38"],[64195,1,"\u9072"],[64196,1,"\u9199"],[64197,1,"\u9276"],[64198,1,"\u967C"],[64199,1,"\u96E3"],[64200,1,"\u9756"],[64201,1,"\u97DB"],[64202,1,"\u97FF"],[64203,1,"\u980B"],[64204,1,"\u983B"],[64205,1,"\u9B12"],[64206,1,"\u9F9C"],[64207,1,"\uD84A\uDC4A"],[64208,1,"\uD84A\uDC44"],[64209,1,"\uD84C\uDFD5"],[64210,1,"\u3B9D"],[64211,1,"\u4018"],[64212,1,"\u4039"],[64213,1,"\uD854\uDE49"],[64214,1,"\uD857\uDCD0"],[64215,1,"\uD85F\uDED3"],[64216,1,"\u9F43"],[64217,1,"\u9F8E"],[[64218,64255],3],[64256,1,"ff"],[64257,1,"fi"],[64258,1,"fl"],[64259,1,"ffi"],[64260,1,"ffl"],[[64261,64262],1,"st"],[[64263,64274],3],[64275,1,"\u0574\u0576"],[64276,1,"\u0574\u0565"],[64277,1,"\u0574\u056B"],[64278,1,"\u057E\u0576"],[64279,1,"\u0574\u056D"],[[64280,64284],3],[64285,1,"\u05D9\u05B4"],[64286,2],[64287,1,"\u05F2\u05B7"],[64288,1,"\u05E2"],[64289,1,"\u05D0"],[64290,1,"\u05D3"],[64291,1,"\u05D4"],[64292,1,"\u05DB"],[64293,1,"\u05DC"],[64294,1,"\u05DD"],[64295,1,"\u05E8"],[64296,1,"\u05EA"],[64297,1,"+"],[64298,1,"\u05E9\u05C1"],[64299,1,"\u05E9\u05C2"],[64300,1,"\u05E9\u05BC\u05C1"],[64301,1,"\u05E9\u05BC\u05C2"],[64302,1,"\u05D0\u05B7"],[64303,1,"\u05D0\u05B8"],[64304,1,"\u05D0\u05BC"],[64305,1,"\u05D1\u05BC"],[64306,1,"\u05D2\u05BC"],[64307,1,"\u05D3\u05BC"],[64308,1,"\u05D4\u05BC"],[64309,1,"\u05D5\u05BC"],[64310,1,"\u05D6\u05BC"],[64311,3],[64312,1,"\u05D8\u05BC"],[64313,1,"\u05D9\u05BC"],[64314,1,"\u05DA\u05BC"],[64315,1,"\u05DB\u05BC"],[64316,1,"\u05DC\u05BC"],[64317,3],[64318,1,"\u05DE\u05BC"],[64319,3],[64320,1,"\u05E0\u05BC"],[64321,1,"\u05E1\u05BC"],[64322,3],[64323,1,"\u05E3\u05BC"],[64324,1,"\u05E4\u05BC"],[64325,3],[64326,1,"\u05E6\u05BC"],[64327,1,"\u05E7\u05BC"],[64328,1,"\u05E8\u05BC"],[64329,1,"\u05E9\u05BC"],[64330,1,"\u05EA\u05BC"],[64331,1,"\u05D5\u05B9"],[64332,1,"\u05D1\u05BF"],[64333,1,"\u05DB\u05BF"],[64334,1,"\u05E4\u05BF"],[64335,1,"\u05D0\u05DC"],[[64336,64337],1,"\u0671"],[[64338,64341],1,"\u067B"],[[64342,64345],1,"\u067E"],[[64346,64349],1,"\u0680"],[[64350,64353],1,"\u067A"],[[64354,64357],1,"\u067F"],[[64358,64361],1,"\u0679"],[[64362,64365],1,"\u06A4"],[[64366,64369],1,"\u06A6"],[[64370,64373],1,"\u0684"],[[64374,64377],1,"\u0683"],[[64378,64381],1,"\u0686"],[[64382,64385],1,"\u0687"],[[64386,64387],1,"\u068D"],[[64388,64389],1,"\u068C"],[[64390,64391],1,"\u068E"],[[64392,64393],1,"\u0688"],[[64394,64395],1,"\u0698"],[[64396,64397],1,"\u0691"],[[64398,64401],1,"\u06A9"],[[64402,64405],1,"\u06AF"],[[64406,64409],1,"\u06B3"],[[64410,64413],1,"\u06B1"],[[64414,64415],1,"\u06BA"],[[64416,64419],1,"\u06BB"],[[64420,64421],1,"\u06C0"],[[64422,64425],1,"\u06C1"],[[64426,64429],1,"\u06BE"],[[64430,64431],1,"\u06D2"],[[64432,64433],1,"\u06D3"],[[64434,64449],2],[64450,2],[[64451,64466],3],[[64467,64470],1,"\u06AD"],[[64471,64472],1,"\u06C7"],[[64473,64474],1,"\u06C6"],[[64475,64476],1,"\u06C8"],[64477,1,"\u06C7\u0674"],[[64478,64479],1,"\u06CB"],[[64480,64481],1,"\u06C5"],[[64482,64483],1,"\u06C9"],[[64484,64487],1,"\u06D0"],[[64488,64489],1,"\u0649"],[[64490,64491],1,"\u0626\u0627"],[[64492,64493],1,"\u0626\u06D5"],[[64494,64495],1,"\u0626\u0648"],[[64496,64497],1,"\u0626\u06C7"],[[64498,64499],1,"\u0626\u06C6"],[[64500,64501],1,"\u0626\u06C8"],[[64502,64504],1,"\u0626\u06D0"],[[64505,64507],1,"\u0626\u0649"],[[64508,64511],1,"\u06CC"],[64512,1,"\u0626\u062C"],[64513,1,"\u0626\u062D"],[64514,1,"\u0626\u0645"],[64515,1,"\u0626\u0649"],[64516,1,"\u0626\u064A"],[64517,1,"\u0628\u062C"],[64518,1,"\u0628\u062D"],[64519,1,"\u0628\u062E"],[64520,1,"\u0628\u0645"],[64521,1,"\u0628\u0649"],[64522,1,"\u0628\u064A"],[64523,1,"\u062A\u062C"],[64524,1,"\u062A\u062D"],[64525,1,"\u062A\u062E"],[64526,1,"\u062A\u0645"],[64527,1,"\u062A\u0649"],[64528,1,"\u062A\u064A"],[64529,1,"\u062B\u062C"],[64530,1,"\u062B\u0645"],[64531,1,"\u062B\u0649"],[64532,1,"\u062B\u064A"],[64533,1,"\u062C\u062D"],[64534,1,"\u062C\u0645"],[64535,1,"\u062D\u062C"],[64536,1,"\u062D\u0645"],[64537,1,"\u062E\u062C"],[64538,1,"\u062E\u062D"],[64539,1,"\u062E\u0645"],[64540,1,"\u0633\u062C"],[64541,1,"\u0633\u062D"],[64542,1,"\u0633\u062E"],[64543,1,"\u0633\u0645"],[64544,1,"\u0635\u062D"],[64545,1,"\u0635\u0645"],[64546,1,"\u0636\u062C"],[64547,1,"\u0636\u062D"],[64548,1,"\u0636\u062E"],[64549,1,"\u0636\u0645"],[64550,1,"\u0637\u062D"],[64551,1,"\u0637\u0645"],[64552,1,"\u0638\u0645"],[64553,1,"\u0639\u062C"],[64554,1,"\u0639\u0645"],[64555,1,"\u063A\u062C"],[64556,1,"\u063A\u0645"],[64557,1,"\u0641\u062C"],[64558,1,"\u0641\u062D"],[64559,1,"\u0641\u062E"],[64560,1,"\u0641\u0645"],[64561,1,"\u0641\u0649"],[64562,1,"\u0641\u064A"],[64563,1,"\u0642\u062D"],[64564,1,"\u0642\u0645"],[64565,1,"\u0642\u0649"],[64566,1,"\u0642\u064A"],[64567,1,"\u0643\u0627"],[64568,1,"\u0643\u062C"],[64569,1,"\u0643\u062D"],[64570,1,"\u0643\u062E"],[64571,1,"\u0643\u0644"],[64572,1,"\u0643\u0645"],[64573,1,"\u0643\u0649"],[64574,1,"\u0643\u064A"],[64575,1,"\u0644\u062C"],[64576,1,"\u0644\u062D"],[64577,1,"\u0644\u062E"],[64578,1,"\u0644\u0645"],[64579,1,"\u0644\u0649"],[64580,1,"\u0644\u064A"],[64581,1,"\u0645\u062C"],[64582,1,"\u0645\u062D"],[64583,1,"\u0645\u062E"],[64584,1,"\u0645\u0645"],[64585,1,"\u0645\u0649"],[64586,1,"\u0645\u064A"],[64587,1,"\u0646\u062C"],[64588,1,"\u0646\u062D"],[64589,1,"\u0646\u062E"],[64590,1,"\u0646\u0645"],[64591,1,"\u0646\u0649"],[64592,1,"\u0646\u064A"],[64593,1,"\u0647\u062C"],[64594,1,"\u0647\u0645"],[64595,1,"\u0647\u0649"],[64596,1,"\u0647\u064A"],[64597,1,"\u064A\u062C"],[64598,1,"\u064A\u062D"],[64599,1,"\u064A\u062E"],[64600,1,"\u064A\u0645"],[64601,1,"\u064A\u0649"],[64602,1,"\u064A\u064A"],[64603,1,"\u0630\u0670"],[64604,1,"\u0631\u0670"],[64605,1,"\u0649\u0670"],[64606,1," \u064C\u0651"],[64607,1," \u064D\u0651"],[64608,1," \u064E\u0651"],[64609,1," \u064F\u0651"],[64610,1," \u0650\u0651"],[64611,1," \u0651\u0670"],[64612,1,"\u0626\u0631"],[64613,1,"\u0626\u0632"],[64614,1,"\u0626\u0645"],[64615,1,"\u0626\u0646"],[64616,1,"\u0626\u0649"],[64617,1,"\u0626\u064A"],[64618,1,"\u0628\u0631"],[64619,1,"\u0628\u0632"],[64620,1,"\u0628\u0645"],[64621,1,"\u0628\u0646"],[64622,1,"\u0628\u0649"],[64623,1,"\u0628\u064A"],[64624,1,"\u062A\u0631"],[64625,1,"\u062A\u0632"],[64626,1,"\u062A\u0645"],[64627,1,"\u062A\u0646"],[64628,1,"\u062A\u0649"],[64629,1,"\u062A\u064A"],[64630,1,"\u062B\u0631"],[64631,1,"\u062B\u0632"],[64632,1,"\u062B\u0645"],[64633,1,"\u062B\u0646"],[64634,1,"\u062B\u0649"],[64635,1,"\u062B\u064A"],[64636,1,"\u0641\u0649"],[64637,1,"\u0641\u064A"],[64638,1,"\u0642\u0649"],[64639,1,"\u0642\u064A"],[64640,1,"\u0643\u0627"],[64641,1,"\u0643\u0644"],[64642,1,"\u0643\u0645"],[64643,1,"\u0643\u0649"],[64644,1,"\u0643\u064A"],[64645,1,"\u0644\u0645"],[64646,1,"\u0644\u0649"],[64647,1,"\u0644\u064A"],[64648,1,"\u0645\u0627"],[64649,1,"\u0645\u0645"],[64650,1,"\u0646\u0631"],[64651,1,"\u0646\u0632"],[64652,1,"\u0646\u0645"],[64653,1,"\u0646\u0646"],[64654,1,"\u0646\u0649"],[64655,1,"\u0646\u064A"],[64656,1,"\u0649\u0670"],[64657,1,"\u064A\u0631"],[64658,1,"\u064A\u0632"],[64659,1,"\u064A\u0645"],[64660,1,"\u064A\u0646"],[64661,1,"\u064A\u0649"],[64662,1,"\u064A\u064A"],[64663,1,"\u0626\u062C"],[64664,1,"\u0626\u062D"],[64665,1,"\u0626\u062E"],[64666,1,"\u0626\u0645"],[64667,1,"\u0626\u0647"],[64668,1,"\u0628\u062C"],[64669,1,"\u0628\u062D"],[64670,1,"\u0628\u062E"],[64671,1,"\u0628\u0645"],[64672,1,"\u0628\u0647"],[64673,1,"\u062A\u062C"],[64674,1,"\u062A\u062D"],[64675,1,"\u062A\u062E"],[64676,1,"\u062A\u0645"],[64677,1,"\u062A\u0647"],[64678,1,"\u062B\u0645"],[64679,1,"\u062C\u062D"],[64680,1,"\u062C\u0645"],[64681,1,"\u062D\u062C"],[64682,1,"\u062D\u0645"],[64683,1,"\u062E\u062C"],[64684,1,"\u062E\u0645"],[64685,1,"\u0633\u062C"],[64686,1,"\u0633\u062D"],[64687,1,"\u0633\u062E"],[64688,1,"\u0633\u0645"],[64689,1,"\u0635\u062D"],[64690,1,"\u0635\u062E"],[64691,1,"\u0635\u0645"],[64692,1,"\u0636\u062C"],[64693,1,"\u0636\u062D"],[64694,1,"\u0636\u062E"],[64695,1,"\u0636\u0645"],[64696,1,"\u0637\u062D"],[64697,1,"\u0638\u0645"],[64698,1,"\u0639\u062C"],[64699,1,"\u0639\u0645"],[64700,1,"\u063A\u062C"],[64701,1,"\u063A\u0645"],[64702,1,"\u0641\u062C"],[64703,1,"\u0641\u062D"],[64704,1,"\u0641\u062E"],[64705,1,"\u0641\u0645"],[64706,1,"\u0642\u062D"],[64707,1,"\u0642\u0645"],[64708,1,"\u0643\u062C"],[64709,1,"\u0643\u062D"],[64710,1,"\u0643\u062E"],[64711,1,"\u0643\u0644"],[64712,1,"\u0643\u0645"],[64713,1,"\u0644\u062C"],[64714,1,"\u0644\u062D"],[64715,1,"\u0644\u062E"],[64716,1,"\u0644\u0645"],[64717,1,"\u0644\u0647"],[64718,1,"\u0645\u062C"],[64719,1,"\u0645\u062D"],[64720,1,"\u0645\u062E"],[64721,1,"\u0645\u0645"],[64722,1,"\u0646\u062C"],[64723,1,"\u0646\u062D"],[64724,1,"\u0646\u062E"],[64725,1,"\u0646\u0645"],[64726,1,"\u0646\u0647"],[64727,1,"\u0647\u062C"],[64728,1,"\u0647\u0645"],[64729,1,"\u0647\u0670"],[64730,1,"\u064A\u062C"],[64731,1,"\u064A\u062D"],[64732,1,"\u064A\u062E"],[64733,1,"\u064A\u0645"],[64734,1,"\u064A\u0647"],[64735,1,"\u0626\u0645"],[64736,1,"\u0626\u0647"],[64737,1,"\u0628\u0645"],[64738,1,"\u0628\u0647"],[64739,1,"\u062A\u0645"],[64740,1,"\u062A\u0647"],[64741,1,"\u062B\u0645"],[64742,1,"\u062B\u0647"],[64743,1,"\u0633\u0645"],[64744,1,"\u0633\u0647"],[64745,1,"\u0634\u0645"],[64746,1,"\u0634\u0647"],[64747,1,"\u0643\u0644"],[64748,1,"\u0643\u0645"],[64749,1,"\u0644\u0645"],[64750,1,"\u0646\u0645"],[64751,1,"\u0646\u0647"],[64752,1,"\u064A\u0645"],[64753,1,"\u064A\u0647"],[64754,1,"\u0640\u064E\u0651"],[64755,1,"\u0640\u064F\u0651"],[64756,1,"\u0640\u0650\u0651"],[64757,1,"\u0637\u0649"],[64758,1,"\u0637\u064A"],[64759,1,"\u0639\u0649"],[64760,1,"\u0639\u064A"],[64761,1,"\u063A\u0649"],[64762,1,"\u063A\u064A"],[64763,1,"\u0633\u0649"],[64764,1,"\u0633\u064A"],[64765,1,"\u0634\u0649"],[64766,1,"\u0634\u064A"],[64767,1,"\u062D\u0649"],[64768,1,"\u062D\u064A"],[64769,1,"\u062C\u0649"],[64770,1,"\u062C\u064A"],[64771,1,"\u062E\u0649"],[64772,1,"\u062E\u064A"],[64773,1,"\u0635\u0649"],[64774,1,"\u0635\u064A"],[64775,1,"\u0636\u0649"],[64776,1,"\u0636\u064A"],[64777,1,"\u0634\u062C"],[64778,1,"\u0634\u062D"],[64779,1,"\u0634\u062E"],[64780,1,"\u0634\u0645"],[64781,1,"\u0634\u0631"],[64782,1,"\u0633\u0631"],[64783,1,"\u0635\u0631"],[64784,1,"\u0636\u0631"],[64785,1,"\u0637\u0649"],[64786,1,"\u0637\u064A"],[64787,1,"\u0639\u0649"],[64788,1,"\u0639\u064A"],[64789,1,"\u063A\u0649"],[64790,1,"\u063A\u064A"],[64791,1,"\u0633\u0649"],[64792,1,"\u0633\u064A"],[64793,1,"\u0634\u0649"],[64794,1,"\u0634\u064A"],[64795,1,"\u062D\u0649"],[64796,1,"\u062D\u064A"],[64797,1,"\u062C\u0649"],[64798,1,"\u062C\u064A"],[64799,1,"\u062E\u0649"],[64800,1,"\u062E\u064A"],[64801,1,"\u0635\u0649"],[64802,1,"\u0635\u064A"],[64803,1,"\u0636\u0649"],[64804,1,"\u0636\u064A"],[64805,1,"\u0634\u062C"],[64806,1,"\u0634\u062D"],[64807,1,"\u0634\u062E"],[64808,1,"\u0634\u0645"],[64809,1,"\u0634\u0631"],[64810,1,"\u0633\u0631"],[64811,1,"\u0635\u0631"],[64812,1,"\u0636\u0631"],[64813,1,"\u0634\u062C"],[64814,1,"\u0634\u062D"],[64815,1,"\u0634\u062E"],[64816,1,"\u0634\u0645"],[64817,1,"\u0633\u0647"],[64818,1,"\u0634\u0647"],[64819,1,"\u0637\u0645"],[64820,1,"\u0633\u062C"],[64821,1,"\u0633\u062D"],[64822,1,"\u0633\u062E"],[64823,1,"\u0634\u062C"],[64824,1,"\u0634\u062D"],[64825,1,"\u0634\u062E"],[64826,1,"\u0637\u0645"],[64827,1,"\u0638\u0645"],[[64828,64829],1,"\u0627\u064B"],[[64830,64831],2],[[64832,64847],2],[64848,1,"\u062A\u062C\u0645"],[[64849,64850],1,"\u062A\u062D\u062C"],[64851,1,"\u062A\u062D\u0645"],[64852,1,"\u062A\u062E\u0645"],[64853,1,"\u062A\u0645\u062C"],[64854,1,"\u062A\u0645\u062D"],[64855,1,"\u062A\u0645\u062E"],[[64856,64857],1,"\u062C\u0645\u062D"],[64858,1,"\u062D\u0645\u064A"],[64859,1,"\u062D\u0645\u0649"],[64860,1,"\u0633\u062D\u062C"],[64861,1,"\u0633\u062C\u062D"],[64862,1,"\u0633\u062C\u0649"],[[64863,64864],1,"\u0633\u0645\u062D"],[64865,1,"\u0633\u0645\u062C"],[[64866,64867],1,"\u0633\u0645\u0645"],[[64868,64869],1,"\u0635\u062D\u062D"],[64870,1,"\u0635\u0645\u0645"],[[64871,64872],1,"\u0634\u062D\u0645"],[64873,1,"\u0634\u062C\u064A"],[[64874,64875],1,"\u0634\u0645\u062E"],[[64876,64877],1,"\u0634\u0645\u0645"],[64878,1,"\u0636\u062D\u0649"],[[64879,64880],1,"\u0636\u062E\u0645"],[[64881,64882],1,"\u0637\u0645\u062D"],[64883,1,"\u0637\u0645\u0645"],[64884,1,"\u0637\u0645\u064A"],[64885,1,"\u0639\u062C\u0645"],[[64886,64887],1,"\u0639\u0645\u0645"],[64888,1,"\u0639\u0645\u0649"],[64889,1,"\u063A\u0645\u0645"],[64890,1,"\u063A\u0645\u064A"],[64891,1,"\u063A\u0645\u0649"],[[64892,64893],1,"\u0641\u062E\u0645"],[64894,1,"\u0642\u0645\u062D"],[64895,1,"\u0642\u0645\u0645"],[64896,1,"\u0644\u062D\u0645"],[64897,1,"\u0644\u062D\u064A"],[64898,1,"\u0644\u062D\u0649"],[[64899,64900],1,"\u0644\u062C\u062C"],[[64901,64902],1,"\u0644\u062E\u0645"],[[64903,64904],1,"\u0644\u0645\u062D"],[64905,1,"\u0645\u062D\u062C"],[64906,1,"\u0645\u062D\u0645"],[64907,1,"\u0645\u062D\u064A"],[64908,1,"\u0645\u062C\u062D"],[64909,1,"\u0645\u062C\u0645"],[64910,1,"\u0645\u062E\u062C"],[64911,1,"\u0645\u062E\u0645"],[[64912,64913],3],[64914,1,"\u0645\u062C\u062E"],[64915,1,"\u0647\u0645\u062C"],[64916,1,"\u0647\u0645\u0645"],[64917,1,"\u0646\u062D\u0645"],[64918,1,"\u0646\u062D\u0649"],[[64919,64920],1,"\u0646\u062C\u0645"],[64921,1,"\u0646\u062C\u0649"],[64922,1,"\u0646\u0645\u064A"],[64923,1,"\u0646\u0645\u0649"],[[64924,64925],1,"\u064A\u0645\u0645"],[64926,1,"\u0628\u062E\u064A"],[64927,1,"\u062A\u062C\u064A"],[64928,1,"\u062A\u062C\u0649"],[64929,1,"\u062A\u062E\u064A"],[64930,1,"\u062A\u062E\u0649"],[64931,1,"\u062A\u0645\u064A"],[64932,1,"\u062A\u0645\u0649"],[64933,1,"\u062C\u0645\u064A"],[64934,1,"\u062C\u062D\u0649"],[64935,1,"\u062C\u0645\u0649"],[64936,1,"\u0633\u062E\u0649"],[64937,1,"\u0635\u062D\u064A"],[64938,1,"\u0634\u062D\u064A"],[64939,1,"\u0636\u062D\u064A"],[64940,1,"\u0644\u062C\u064A"],[64941,1,"\u0644\u0645\u064A"],[64942,1,"\u064A\u062D\u064A"],[64943,1,"\u064A\u062C\u064A"],[64944,1,"\u064A\u0645\u064A"],[64945,1,"\u0645\u0645\u064A"],[64946,1,"\u0642\u0645\u064A"],[64947,1,"\u0646\u062D\u064A"],[64948,1,"\u0642\u0645\u062D"],[64949,1,"\u0644\u062D\u0645"],[64950,1,"\u0639\u0645\u064A"],[64951,1,"\u0643\u0645\u064A"],[64952,1,"\u0646\u062C\u062D"],[64953,1,"\u0645\u062E\u064A"],[64954,1,"\u0644\u062C\u0645"],[64955,1,"\u0643\u0645\u0645"],[64956,1,"\u0644\u062C\u0645"],[64957,1,"\u0646\u062C\u062D"],[64958,1,"\u062C\u062D\u064A"],[64959,1,"\u062D\u062C\u064A"],[64960,1,"\u0645\u062C\u064A"],[64961,1,"\u0641\u0645\u064A"],[64962,1,"\u0628\u062D\u064A"],[64963,1,"\u0643\u0645\u0645"],[64964,1,"\u0639\u062C\u0645"],[64965,1,"\u0635\u0645\u0645"],[64966,1,"\u0633\u062E\u064A"],[64967,1,"\u0646\u062C\u064A"],[[64968,64974],3],[64975,2],[[64976,65007],3],[65008,1,"\u0635\u0644\u06D2"],[65009,1,"\u0642\u0644\u06D2"],[65010,1,"\u0627\u0644\u0644\u0647"],[65011,1,"\u0627\u0643\u0628\u0631"],[65012,1,"\u0645\u062D\u0645\u062F"],[65013,1,"\u0635\u0644\u0639\u0645"],[65014,1,"\u0631\u0633\u0648\u0644"],[65015,1,"\u0639\u0644\u064A\u0647"],[65016,1,"\u0648\u0633\u0644\u0645"],[65017,1,"\u0635\u0644\u0649"],[65018,1,"\u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064A\u0647 \u0648\u0633\u0644\u0645"],[65019,1,"\u062C\u0644 \u062C\u0644\u0627\u0644\u0647"],[65020,1,"\u0631\u06CC\u0627\u0644"],[65021,2],[[65022,65023],2],[[65024,65039],7],[65040,1,","],[65041,1,"\u3001"],[65042,3],[65043,1,":"],[65044,1,";"],[65045,1,"!"],[65046,1,"?"],[65047,1,"\u3016"],[65048,1,"\u3017"],[65049,3],[[65050,65055],3],[[65056,65059],2],[[65060,65062],2],[[65063,65069],2],[[65070,65071],2],[65072,3],[65073,1,"\u2014"],[65074,1,"\u2013"],[[65075,65076],1,"_"],[65077,1,"("],[65078,1,")"],[65079,1,"{"],[65080,1,"}"],[65081,1,"\u3014"],[65082,1,"\u3015"],[65083,1,"\u3010"],[65084,1,"\u3011"],[65085,1,"\u300A"],[65086,1,"\u300B"],[65087,1,"\u3008"],[65088,1,"\u3009"],[65089,1,"\u300C"],[65090,1,"\u300D"],[65091,1,"\u300E"],[65092,1,"\u300F"],[[65093,65094],2],[65095,1,"["],[65096,1,"]"],[[65097,65100],1," \u0305"],[[65101,65103],1,"_"],[65104,1,","],[65105,1,"\u3001"],[65106,3],[65107,3],[65108,1,";"],[65109,1,":"],[65110,1,"?"],[65111,1,"!"],[65112,1,"\u2014"],[65113,1,"("],[65114,1,")"],[65115,1,"{"],[65116,1,"}"],[65117,1,"\u3014"],[65118,1,"\u3015"],[65119,1,"#"],[65120,1,"&"],[65121,1,"*"],[65122,1,"+"],[65123,1,"-"],[65124,1,"<"],[65125,1,">"],[65126,1,"="],[65127,3],[65128,1,"\\"],[65129,1,"$"],[65130,1,"%"],[65131,1,"@"],[[65132,65135],3],[65136,1," \u064B"],[65137,1,"\u0640\u064B"],[65138,1," \u064C"],[65139,2],[65140,1," \u064D"],[65141,3],[65142,1," \u064E"],[65143,1,"\u0640\u064E"],[65144,1," \u064F"],[65145,1,"\u0640\u064F"],[65146,1," \u0650"],[65147,1,"\u0640\u0650"],[65148,1," \u0651"],[65149,1,"\u0640\u0651"],[65150,1," \u0652"],[65151,1,"\u0640\u0652"],[65152,1,"\u0621"],[[65153,65154],1,"\u0622"],[[65155,65156],1,"\u0623"],[[65157,65158],1,"\u0624"],[[65159,65160],1,"\u0625"],[[65161,65164],1,"\u0626"],[[65165,65166],1,"\u0627"],[[65167,65170],1,"\u0628"],[[65171,65172],1,"\u0629"],[[65173,65176],1,"\u062A"],[[65177,65180],1,"\u062B"],[[65181,65184],1,"\u062C"],[[65185,65188],1,"\u062D"],[[65189,65192],1,"\u062E"],[[65193,65194],1,"\u062F"],[[65195,65196],1,"\u0630"],[[65197,65198],1,"\u0631"],[[65199,65200],1,"\u0632"],[[65201,65204],1,"\u0633"],[[65205,65208],1,"\u0634"],[[65209,65212],1,"\u0635"],[[65213,65216],1,"\u0636"],[[65217,65220],1,"\u0637"],[[65221,65224],1,"\u0638"],[[65225,65228],1,"\u0639"],[[65229,65232],1,"\u063A"],[[65233,65236],1,"\u0641"],[[65237,65240],1,"\u0642"],[[65241,65244],1,"\u0643"],[[65245,65248],1,"\u0644"],[[65249,65252],1,"\u0645"],[[65253,65256],1,"\u0646"],[[65257,65260],1,"\u0647"],[[65261,65262],1,"\u0648"],[[65263,65264],1,"\u0649"],[[65265,65268],1,"\u064A"],[[65269,65270],1,"\u0644\u0622"],[[65271,65272],1,"\u0644\u0623"],[[65273,65274],1,"\u0644\u0625"],[[65275,65276],1,"\u0644\u0627"],[[65277,65278],3],[65279,7],[65280,3],[65281,1,"!"],[65282,1,'"'],[65283,1,"#"],[65284,1,"$"],[65285,1,"%"],[65286,1,"&"],[65287,1,"'"],[65288,1,"("],[65289,1,")"],[65290,1,"*"],[65291,1,"+"],[65292,1,","],[65293,1,"-"],[65294,1,"."],[65295,1,"/"],[65296,1,"0"],[65297,1,"1"],[65298,1,"2"],[65299,1,"3"],[65300,1,"4"],[65301,1,"5"],[65302,1,"6"],[65303,1,"7"],[65304,1,"8"],[65305,1,"9"],[65306,1,":"],[65307,1,";"],[65308,1,"<"],[65309,1,"="],[65310,1,">"],[65311,1,"?"],[65312,1,"@"],[65313,1,"a"],[65314,1,"b"],[65315,1,"c"],[65316,1,"d"],[65317,1,"e"],[65318,1,"f"],[65319,1,"g"],[65320,1,"h"],[65321,1,"i"],[65322,1,"j"],[65323,1,"k"],[65324,1,"l"],[65325,1,"m"],[65326,1,"n"],[65327,1,"o"],[65328,1,"p"],[65329,1,"q"],[65330,1,"r"],[65331,1,"s"],[65332,1,"t"],[65333,1,"u"],[65334,1,"v"],[65335,1,"w"],[65336,1,"x"],[65337,1,"y"],[65338,1,"z"],[65339,1,"["],[65340,1,"\\"],[65341,1,"]"],[65342,1,"^"],[65343,1,"_"],[65344,1,"`"],[65345,1,"a"],[65346,1,"b"],[65347,1,"c"],[65348,1,"d"],[65349,1,"e"],[65350,1,"f"],[65351,1,"g"],[65352,1,"h"],[65353,1,"i"],[65354,1,"j"],[65355,1,"k"],[65356,1,"l"],[65357,1,"m"],[65358,1,"n"],[65359,1,"o"],[65360,1,"p"],[65361,1,"q"],[65362,1,"r"],[65363,1,"s"],[65364,1,"t"],[65365,1,"u"],[65366,1,"v"],[65367,1,"w"],[65368,1,"x"],[65369,1,"y"],[65370,1,"z"],[65371,1,"{"],[65372,1,"|"],[65373,1,"}"],[65374,1,"~"],[65375,1,"\u2985"],[65376,1,"\u2986"],[65377,1,"."],[65378,1,"\u300C"],[65379,1,"\u300D"],[65380,1,"\u3001"],[65381,1,"\u30FB"],[65382,1,"\u30F2"],[65383,1,"\u30A1"],[65384,1,"\u30A3"],[65385,1,"\u30A5"],[65386,1,"\u30A7"],[65387,1,"\u30A9"],[65388,1,"\u30E3"],[65389,1,"\u30E5"],[65390,1,"\u30E7"],[65391,1,"\u30C3"],[65392,1,"\u30FC"],[65393,1,"\u30A2"],[65394,1,"\u30A4"],[65395,1,"\u30A6"],[65396,1,"\u30A8"],[65397,1,"\u30AA"],[65398,1,"\u30AB"],[65399,1,"\u30AD"],[65400,1,"\u30AF"],[65401,1,"\u30B1"],[65402,1,"\u30B3"],[65403,1,"\u30B5"],[65404,1,"\u30B7"],[65405,1,"\u30B9"],[65406,1,"\u30BB"],[65407,1,"\u30BD"],[65408,1,"\u30BF"],[65409,1,"\u30C1"],[65410,1,"\u30C4"],[65411,1,"\u30C6"],[65412,1,"\u30C8"],[65413,1,"\u30CA"],[65414,1,"\u30CB"],[65415,1,"\u30CC"],[65416,1,"\u30CD"],[65417,1,"\u30CE"],[65418,1,"\u30CF"],[65419,1,"\u30D2"],[65420,1,"\u30D5"],[65421,1,"\u30D8"],[65422,1,"\u30DB"],[65423,1,"\u30DE"],[65424,1,"\u30DF"],[65425,1,"\u30E0"],[65426,1,"\u30E1"],[65427,1,"\u30E2"],[65428,1,"\u30E4"],[65429,1,"\u30E6"],[65430,1,"\u30E8"],[65431,1,"\u30E9"],[65432,1,"\u30EA"],[65433,1,"\u30EB"],[65434,1,"\u30EC"],[65435,1,"\u30ED"],[65436,1,"\u30EF"],[65437,1,"\u30F3"],[65438,1,"\u3099"],[65439,1,"\u309A"],[65440,7],[65441,1,"\u1100"],[65442,1,"\u1101"],[65443,1,"\u11AA"],[65444,1,"\u1102"],[65445,1,"\u11AC"],[65446,1,"\u11AD"],[65447,1,"\u1103"],[65448,1,"\u1104"],[65449,1,"\u1105"],[65450,1,"\u11B0"],[65451,1,"\u11B1"],[65452,1,"\u11B2"],[65453,1,"\u11B3"],[65454,1,"\u11B4"],[65455,1,"\u11B5"],[65456,1,"\u111A"],[65457,1,"\u1106"],[65458,1,"\u1107"],[65459,1,"\u1108"],[65460,1,"\u1121"],[65461,1,"\u1109"],[65462,1,"\u110A"],[65463,1,"\u110B"],[65464,1,"\u110C"],[65465,1,"\u110D"],[65466,1,"\u110E"],[65467,1,"\u110F"],[65468,1,"\u1110"],[65469,1,"\u1111"],[65470,1,"\u1112"],[[65471,65473],3],[65474,1,"\u1161"],[65475,1,"\u1162"],[65476,1,"\u1163"],[65477,1,"\u1164"],[65478,1,"\u1165"],[65479,1,"\u1166"],[[65480,65481],3],[65482,1,"\u1167"],[65483,1,"\u1168"],[65484,1,"\u1169"],[65485,1,"\u116A"],[65486,1,"\u116B"],[65487,1,"\u116C"],[[65488,65489],3],[65490,1,"\u116D"],[65491,1,"\u116E"],[65492,1,"\u116F"],[65493,1,"\u1170"],[65494,1,"\u1171"],[65495,1,"\u1172"],[[65496,65497],3],[65498,1,"\u1173"],[65499,1,"\u1174"],[65500,1,"\u1175"],[[65501,65503],3],[65504,1,"\xA2"],[65505,1,"\xA3"],[65506,1,"\xAC"],[65507,1," \u0304"],[65508,1,"\xA6"],[65509,1,"\xA5"],[65510,1,"\u20A9"],[65511,3],[65512,1,"\u2502"],[65513,1,"\u2190"],[65514,1,"\u2191"],[65515,1,"\u2192"],[65516,1,"\u2193"],[65517,1,"\u25A0"],[65518,1,"\u25CB"],[[65519,65528],3],[[65529,65531],3],[65532,3],[65533,3],[[65534,65535],3],[[65536,65547],2],[65548,3],[[65549,65574],2],[65575,3],[[65576,65594],2],[65595,3],[[65596,65597],2],[65598,3],[[65599,65613],2],[[65614,65615],3],[[65616,65629],2],[[65630,65663],3],[[65664,65786],2],[[65787,65791],3],[[65792,65794],2],[[65795,65798],3],[[65799,65843],2],[[65844,65846],3],[[65847,65855],2],[[65856,65930],2],[[65931,65932],2],[[65933,65934],2],[65935,3],[[65936,65947],2],[65948,2],[[65949,65951],3],[65952,2],[[65953,65999],3],[[66000,66044],2],[66045,2],[[66046,66175],3],[[66176,66204],2],[[66205,66207],3],[[66208,66256],2],[[66257,66271],3],[66272,2],[[66273,66299],2],[[66300,66303],3],[[66304,66334],2],[66335,2],[[66336,66339],2],[[66340,66348],3],[[66349,66351],2],[[66352,66368],2],[66369,2],[[66370,66377],2],[66378,2],[[66379,66383],3],[[66384,66426],2],[[66427,66431],3],[[66432,66461],2],[66462,3],[66463,2],[[66464,66499],2],[[66500,66503],3],[[66504,66511],2],[[66512,66517],2],[[66518,66559],3],[66560,1,"\uD801\uDC28"],[66561,1,"\uD801\uDC29"],[66562,1,"\uD801\uDC2A"],[66563,1,"\uD801\uDC2B"],[66564,1,"\uD801\uDC2C"],[66565,1,"\uD801\uDC2D"],[66566,1,"\uD801\uDC2E"],[66567,1,"\uD801\uDC2F"],[66568,1,"\uD801\uDC30"],[66569,1,"\uD801\uDC31"],[66570,1,"\uD801\uDC32"],[66571,1,"\uD801\uDC33"],[66572,1,"\uD801\uDC34"],[66573,1,"\uD801\uDC35"],[66574,1,"\uD801\uDC36"],[66575,1,"\uD801\uDC37"],[66576,1,"\uD801\uDC38"],[66577,1,"\uD801\uDC39"],[66578,1,"\uD801\uDC3A"],[66579,1,"\uD801\uDC3B"],[66580,1,"\uD801\uDC3C"],[66581,1,"\uD801\uDC3D"],[66582,1,"\uD801\uDC3E"],[66583,1,"\uD801\uDC3F"],[66584,1,"\uD801\uDC40"],[66585,1,"\uD801\uDC41"],[66586,1,"\uD801\uDC42"],[66587,1,"\uD801\uDC43"],[66588,1,"\uD801\uDC44"],[66589,1,"\uD801\uDC45"],[66590,1,"\uD801\uDC46"],[66591,1,"\uD801\uDC47"],[66592,1,"\uD801\uDC48"],[66593,1,"\uD801\uDC49"],[66594,1,"\uD801\uDC4A"],[66595,1,"\uD801\uDC4B"],[66596,1,"\uD801\uDC4C"],[66597,1,"\uD801\uDC4D"],[66598,1,"\uD801\uDC4E"],[66599,1,"\uD801\uDC4F"],[[66600,66637],2],[[66638,66717],2],[[66718,66719],3],[[66720,66729],2],[[66730,66735],3],[66736,1,"\uD801\uDCD8"],[66737,1,"\uD801\uDCD9"],[66738,1,"\uD801\uDCDA"],[66739,1,"\uD801\uDCDB"],[66740,1,"\uD801\uDCDC"],[66741,1,"\uD801\uDCDD"],[66742,1,"\uD801\uDCDE"],[66743,1,"\uD801\uDCDF"],[66744,1,"\uD801\uDCE0"],[66745,1,"\uD801\uDCE1"],[66746,1,"\uD801\uDCE2"],[66747,1,"\uD801\uDCE3"],[66748,1,"\uD801\uDCE4"],[66749,1,"\uD801\uDCE5"],[66750,1,"\uD801\uDCE6"],[66751,1,"\uD801\uDCE7"],[66752,1,"\uD801\uDCE8"],[66753,1,"\uD801\uDCE9"],[66754,1,"\uD801\uDCEA"],[66755,1,"\uD801\uDCEB"],[66756,1,"\uD801\uDCEC"],[66757,1,"\uD801\uDCED"],[66758,1,"\uD801\uDCEE"],[66759,1,"\uD801\uDCEF"],[66760,1,"\uD801\uDCF0"],[66761,1,"\uD801\uDCF1"],[66762,1,"\uD801\uDCF2"],[66763,1,"\uD801\uDCF3"],[66764,1,"\uD801\uDCF4"],[66765,1,"\uD801\uDCF5"],[66766,1,"\uD801\uDCF6"],[66767,1,"\uD801\uDCF7"],[66768,1,"\uD801\uDCF8"],[66769,1,"\uD801\uDCF9"],[66770,1,"\uD801\uDCFA"],[66771,1,"\uD801\uDCFB"],[[66772,66775],3],[[66776,66811],2],[[66812,66815],3],[[66816,66855],2],[[66856,66863],3],[[66864,66915],2],[[66916,66926],3],[66927,2],[66928,1,"\uD801\uDD97"],[66929,1,"\uD801\uDD98"],[66930,1,"\uD801\uDD99"],[66931,1,"\uD801\uDD9A"],[66932,1,"\uD801\uDD9B"],[66933,1,"\uD801\uDD9C"],[66934,1,"\uD801\uDD9D"],[66935,1,"\uD801\uDD9E"],[66936,1,"\uD801\uDD9F"],[66937,1,"\uD801\uDDA0"],[66938,1,"\uD801\uDDA1"],[66939,3],[66940,1,"\uD801\uDDA3"],[66941,1,"\uD801\uDDA4"],[66942,1,"\uD801\uDDA5"],[66943,1,"\uD801\uDDA6"],[66944,1,"\uD801\uDDA7"],[66945,1,"\uD801\uDDA8"],[66946,1,"\uD801\uDDA9"],[66947,1,"\uD801\uDDAA"],[66948,1,"\uD801\uDDAB"],[66949,1,"\uD801\uDDAC"],[66950,1,"\uD801\uDDAD"],[66951,1,"\uD801\uDDAE"],[66952,1,"\uD801\uDDAF"],[66953,1,"\uD801\uDDB0"],[66954,1,"\uD801\uDDB1"],[66955,3],[66956,1,"\uD801\uDDB3"],[66957,1,"\uD801\uDDB4"],[66958,1,"\uD801\uDDB5"],[66959,1,"\uD801\uDDB6"],[66960,1,"\uD801\uDDB7"],[66961,1,"\uD801\uDDB8"],[66962,1,"\uD801\uDDB9"],[66963,3],[66964,1,"\uD801\uDDBB"],[66965,1,"\uD801\uDDBC"],[66966,3],[[66967,66977],2],[66978,3],[[66979,66993],2],[66994,3],[[66995,67001],2],[67002,3],[[67003,67004],2],[[67005,67007],3],[[67008,67059],2],[[67060,67071],3],[[67072,67382],2],[[67383,67391],3],[[67392,67413],2],[[67414,67423],3],[[67424,67431],2],[[67432,67455],3],[67456,2],[67457,1,"\u02D0"],[67458,1,"\u02D1"],[67459,1,"\xE6"],[67460,1,"\u0299"],[67461,1,"\u0253"],[67462,3],[67463,1,"\u02A3"],[67464,1,"\uAB66"],[67465,1,"\u02A5"],[67466,1,"\u02A4"],[67467,1,"\u0256"],[67468,1,"\u0257"],[67469,1,"\u1D91"],[67470,1,"\u0258"],[67471,1,"\u025E"],[67472,1,"\u02A9"],[67473,1,"\u0264"],[67474,1,"\u0262"],[67475,1,"\u0260"],[67476,1,"\u029B"],[67477,1,"\u0127"],[67478,1,"\u029C"],[67479,1,"\u0267"],[67480,1,"\u0284"],[67481,1,"\u02AA"],[67482,1,"\u02AB"],[67483,1,"\u026C"],[67484,1,"\uD837\uDF04"],[67485,1,"\uA78E"],[67486,1,"\u026E"],[67487,1,"\uD837\uDF05"],[67488,1,"\u028E"],[67489,1,"\uD837\uDF06"],[67490,1,"\xF8"],[67491,1,"\u0276"],[67492,1,"\u0277"],[67493,1,"q"],[67494,1,"\u027A"],[67495,1,"\uD837\uDF08"],[67496,1,"\u027D"],[67497,1,"\u027E"],[67498,1,"\u0280"],[67499,1,"\u02A8"],[67500,1,"\u02A6"],[67501,1,"\uAB67"],[67502,1,"\u02A7"],[67503,1,"\u0288"],[67504,1,"\u2C71"],[67505,3],[67506,1,"\u028F"],[67507,1,"\u02A1"],[67508,1,"\u02A2"],[67509,1,"\u0298"],[67510,1,"\u01C0"],[67511,1,"\u01C1"],[67512,1,"\u01C2"],[67513,1,"\uD837\uDF0A"],[67514,1,"\uD837\uDF1E"],[[67515,67583],3],[[67584,67589],2],[[67590,67591],3],[67592,2],[67593,3],[[67594,67637],2],[67638,3],[[67639,67640],2],[[67641,67643],3],[67644,2],[[67645,67646],3],[67647,2],[[67648,67669],2],[67670,3],[[67671,67679],2],[[67680,67702],2],[[67703,67711],2],[[67712,67742],2],[[67743,67750],3],[[67751,67759],2],[[67760,67807],3],[[67808,67826],2],[67827,3],[[67828,67829],2],[[67830,67834],3],[[67835,67839],2],[[67840,67861],2],[[67862,67865],2],[[67866,67867],2],[[67868,67870],3],[67871,2],[[67872,67897],2],[[67898,67902],3],[67903,2],[[67904,67967],3],[[67968,68023],2],[[68024,68027],3],[[68028,68029],2],[[68030,68031],2],[[68032,68047],2],[[68048,68049],3],[[68050,68095],2],[[68096,68099],2],[68100,3],[[68101,68102],2],[[68103,68107],3],[[68108,68115],2],[68116,3],[[68117,68119],2],[68120,3],[[68121,68147],2],[[68148,68149],2],[[68150,68151],3],[[68152,68154],2],[[68155,68158],3],[68159,2],[[68160,68167],2],[68168,2],[[68169,68175],3],[[68176,68184],2],[[68185,68191],3],[[68192,68220],2],[[68221,68223],2],[[68224,68252],2],[[68253,68255],2],[[68256,68287],3],[[68288,68295],2],[68296,2],[[68297,68326],2],[[68327,68330],3],[[68331,68342],2],[[68343,68351],3],[[68352,68405],2],[[68406,68408],3],[[68409,68415],2],[[68416,68437],2],[[68438,68439],3],[[68440,68447],2],[[68448,68466],2],[[68467,68471],3],[[68472,68479],2],[[68480,68497],2],[[68498,68504],3],[[68505,68508],2],[[68509,68520],3],[[68521,68527],2],[[68528,68607],3],[[68608,68680],2],[[68681,68735],3],[68736,1,"\uD803\uDCC0"],[68737,1,"\uD803\uDCC1"],[68738,1,"\uD803\uDCC2"],[68739,1,"\uD803\uDCC3"],[68740,1,"\uD803\uDCC4"],[68741,1,"\uD803\uDCC5"],[68742,1,"\uD803\uDCC6"],[68743,1,"\uD803\uDCC7"],[68744,1,"\uD803\uDCC8"],[68745,1,"\uD803\uDCC9"],[68746,1,"\uD803\uDCCA"],[68747,1,"\uD803\uDCCB"],[68748,1,"\uD803\uDCCC"],[68749,1,"\uD803\uDCCD"],[68750,1,"\uD803\uDCCE"],[68751,1,"\uD803\uDCCF"],[68752,1,"\uD803\uDCD0"],[68753,1,"\uD803\uDCD1"],[68754,1,"\uD803\uDCD2"],[68755,1,"\uD803\uDCD3"],[68756,1,"\uD803\uDCD4"],[68757,1,"\uD803\uDCD5"],[68758,1,"\uD803\uDCD6"],[68759,1,"\uD803\uDCD7"],[68760,1,"\uD803\uDCD8"],[68761,1,"\uD803\uDCD9"],[68762,1,"\uD803\uDCDA"],[68763,1,"\uD803\uDCDB"],[68764,1,"\uD803\uDCDC"],[68765,1,"\uD803\uDCDD"],[68766,1,"\uD803\uDCDE"],[68767,1,"\uD803\uDCDF"],[68768,1,"\uD803\uDCE0"],[68769,1,"\uD803\uDCE1"],[68770,1,"\uD803\uDCE2"],[68771,1,"\uD803\uDCE3"],[68772,1,"\uD803\uDCE4"],[68773,1,"\uD803\uDCE5"],[68774,1,"\uD803\uDCE6"],[68775,1,"\uD803\uDCE7"],[68776,1,"\uD803\uDCE8"],[68777,1,"\uD803\uDCE9"],[68778,1,"\uD803\uDCEA"],[68779,1,"\uD803\uDCEB"],[68780,1,"\uD803\uDCEC"],[68781,1,"\uD803\uDCED"],[68782,1,"\uD803\uDCEE"],[68783,1,"\uD803\uDCEF"],[68784,1,"\uD803\uDCF0"],[68785,1,"\uD803\uDCF1"],[68786,1,"\uD803\uDCF2"],[[68787,68799],3],[[68800,68850],2],[[68851,68857],3],[[68858,68863],2],[[68864,68903],2],[[68904,68911],3],[[68912,68921],2],[[68922,68927],3],[[68928,68943],2],[68944,1,"\uD803\uDD70"],[68945,1,"\uD803\uDD71"],[68946,1,"\uD803\uDD72"],[68947,1,"\uD803\uDD73"],[68948,1,"\uD803\uDD74"],[68949,1,"\uD803\uDD75"],[68950,1,"\uD803\uDD76"],[68951,1,"\uD803\uDD77"],[68952,1,"\uD803\uDD78"],[68953,1,"\uD803\uDD79"],[68954,1,"\uD803\uDD7A"],[68955,1,"\uD803\uDD7B"],[68956,1,"\uD803\uDD7C"],[68957,1,"\uD803\uDD7D"],[68958,1,"\uD803\uDD7E"],[68959,1,"\uD803\uDD7F"],[68960,1,"\uD803\uDD80"],[68961,1,"\uD803\uDD81"],[68962,1,"\uD803\uDD82"],[68963,1,"\uD803\uDD83"],[68964,1,"\uD803\uDD84"],[68965,1,"\uD803\uDD85"],[[68966,68968],3],[[68969,68973],2],[68974,2],[[68975,68997],2],[[68998,69005],3],[[69006,69007],2],[[69008,69215],3],[[69216,69246],2],[69247,3],[[69248,69289],2],[69290,3],[[69291,69292],2],[69293,2],[[69294,69295],3],[[69296,69297],2],[[69298,69313],3],[[69314,69316],2],[[69317,69371],3],[69372,2],[[69373,69375],2],[[69376,69404],2],[[69405,69414],2],[69415,2],[[69416,69423],3],[[69424,69456],2],[[69457,69465],2],[[69466,69487],3],[[69488,69509],2],[[69510,69513],2],[[69514,69551],3],[[69552,69572],2],[[69573,69579],2],[[69580,69599],3],[[69600,69622],2],[[69623,69631],3],[[69632,69702],2],[[69703,69709],2],[[69710,69713],3],[[69714,69733],2],[[69734,69743],2],[[69744,69749],2],[[69750,69758],3],[69759,2],[[69760,69818],2],[[69819,69820],2],[69821,3],[[69822,69825],2],[69826,2],[[69827,69836],3],[69837,3],[[69838,69839],3],[[69840,69864],2],[[69865,69871],3],[[69872,69881],2],[[69882,69887],3],[[69888,69940],2],[69941,3],[[69942,69951],2],[[69952,69955],2],[[69956,69958],2],[69959,2],[[69960,69967],3],[[69968,70003],2],[[70004,70005],2],[70006,2],[[70007,70015],3],[[70016,70084],2],[[70085,70088],2],[[70089,70092],2],[70093,2],[[70094,70095],2],[[70096,70105],2],[70106,2],[70107,2],[70108,2],[[70109,70111],2],[70112,3],[[70113,70132],2],[[70133,70143],3],[[70144,70161],2],[70162,3],[[70163,70199],2],[[70200,70205],2],[70206,2],[[70207,70209],2],[[70210,70271],3],[[70272,70278],2],[70279,3],[70280,2],[70281,3],[[70282,70285],2],[70286,3],[[70287,70301],2],[70302,3],[[70303,70312],2],[70313,2],[[70314,70319],3],[[70320,70378],2],[[70379,70383],3],[[70384,70393],2],[[70394,70399],3],[70400,2],[[70401,70403],2],[70404,3],[[70405,70412],2],[[70413,70414],3],[[70415,70416],2],[[70417,70418],3],[[70419,70440],2],[70441,3],[[70442,70448],2],[70449,3],[[70450,70451],2],[70452,3],[[70453,70457],2],[70458,3],[70459,2],[[70460,70468],2],[[70469,70470],3],[[70471,70472],2],[[70473,70474],3],[[70475,70477],2],[[70478,70479],3],[70480,2],[[70481,70486],3],[70487,2],[[70488,70492],3],[[70493,70499],2],[[70500,70501],3],[[70502,70508],2],[[70509,70511],3],[[70512,70516],2],[[70517,70527],3],[[70528,70537],2],[70538,3],[70539,2],[[70540,70541],3],[70542,2],[70543,3],[[70544,70581],2],[70582,3],[[70583,70592],2],[70593,3],[70594,2],[[70595,70596],3],[70597,2],[70598,3],[[70599,70602],2],[70603,3],[[70604,70611],2],[[70612,70613],2],[70614,3],[[70615,70616],2],[[70617,70624],3],[[70625,70626],2],[[70627,70655],3],[[70656,70730],2],[[70731,70735],2],[[70736,70745],2],[70746,2],[70747,2],[70748,3],[70749,2],[70750,2],[70751,2],[[70752,70753],2],[[70754,70783],3],[[70784,70853],2],[70854,2],[70855,2],[[70856,70863],3],[[70864,70873],2],[[70874,71039],3],[[71040,71093],2],[[71094,71095],3],[[71096,71104],2],[[71105,71113],2],[[71114,71127],2],[[71128,71133],2],[[71134,71167],3],[[71168,71232],2],[[71233,71235],2],[71236,2],[[71237,71247],3],[[71248,71257],2],[[71258,71263],3],[[71264,71276],2],[[71277,71295],3],[[71296,71351],2],[71352,2],[71353,2],[[71354,71359],3],[[71360,71369],2],[[71370,71375],3],[[71376,71395],2],[[71396,71423],3],[[71424,71449],2],[71450,2],[[71451,71452],3],[[71453,71467],2],[[71468,71471],3],[[71472,71481],2],[[71482,71487],2],[[71488,71494],2],[[71495,71679],3],[[71680,71738],2],[71739,2],[[71740,71839],3],[71840,1,"\uD806\uDCC0"],[71841,1,"\uD806\uDCC1"],[71842,1,"\uD806\uDCC2"],[71843,1,"\uD806\uDCC3"],[71844,1,"\uD806\uDCC4"],[71845,1,"\uD806\uDCC5"],[71846,1,"\uD806\uDCC6"],[71847,1,"\uD806\uDCC7"],[71848,1,"\uD806\uDCC8"],[71849,1,"\uD806\uDCC9"],[71850,1,"\uD806\uDCCA"],[71851,1,"\uD806\uDCCB"],[71852,1,"\uD806\uDCCC"],[71853,1,"\uD806\uDCCD"],[71854,1,"\uD806\uDCCE"],[71855,1,"\uD806\uDCCF"],[71856,1,"\uD806\uDCD0"],[71857,1,"\uD806\uDCD1"],[71858,1,"\uD806\uDCD2"],[71859,1,"\uD806\uDCD3"],[71860,1,"\uD806\uDCD4"],[71861,1,"\uD806\uDCD5"],[71862,1,"\uD806\uDCD6"],[71863,1,"\uD806\uDCD7"],[71864,1,"\uD806\uDCD8"],[71865,1,"\uD806\uDCD9"],[71866,1,"\uD806\uDCDA"],[71867,1,"\uD806\uDCDB"],[71868,1,"\uD806\uDCDC"],[71869,1,"\uD806\uDCDD"],[71870,1,"\uD806\uDCDE"],[71871,1,"\uD806\uDCDF"],[[71872,71913],2],[[71914,71922],2],[[71923,71934],3],[71935,2],[[71936,71942],2],[[71943,71944],3],[71945,2],[[71946,71947],3],[[71948,71955],2],[71956,3],[[71957,71958],2],[71959,3],[[71960,71989],2],[71990,3],[[71991,71992],2],[[71993,71994],3],[[71995,72003],2],[[72004,72006],2],[[72007,72015],3],[[72016,72025],2],[[72026,72095],3],[[72096,72103],2],[[72104,72105],3],[[72106,72151],2],[[72152,72153],3],[[72154,72161],2],[72162,2],[[72163,72164],2],[[72165,72191],3],[[72192,72254],2],[[72255,72262],2],[72263,2],[[72264,72271],3],[[72272,72323],2],[[72324,72325],2],[[72326,72345],2],[[72346,72348],2],[72349,2],[[72350,72354],2],[[72355,72367],3],[[72368,72383],2],[[72384,72440],2],[[72441,72447],3],[[72448,72457],2],[[72458,72639],3],[[72640,72672],2],[72673,2],[[72674,72687],3],[[72688,72697],2],[[72698,72703],3],[[72704,72712],2],[72713,3],[[72714,72758],2],[72759,3],[[72760,72768],2],[[72769,72773],2],[[72774,72783],3],[[72784,72793],2],[[72794,72812],2],[[72813,72815],3],[[72816,72817],2],[[72818,72847],2],[[72848,72849],3],[[72850,72871],2],[72872,3],[[72873,72886],2],[[72887,72959],3],[[72960,72966],2],[72967,3],[[72968,72969],2],[72970,3],[[72971,73014],2],[[73015,73017],3],[73018,2],[73019,3],[[73020,73021],2],[73022,3],[[73023,73031],2],[[73032,73039],3],[[73040,73049],2],[[73050,73055],3],[[73056,73061],2],[73062,3],[[73063,73064],2],[73065,3],[[73066,73102],2],[73103,3],[[73104,73105],2],[73106,3],[[73107,73112],2],[[73113,73119],3],[[73120,73129],2],[[73130,73439],3],[[73440,73462],2],[[73463,73464],2],[[73465,73471],3],[[73472,73488],2],[73489,3],[[73490,73530],2],[[73531,73533],3],[[73534,73538],2],[[73539,73551],2],[[73552,73561],2],[73562,2],[[73563,73647],3],[73648,2],[[73649,73663],3],[[73664,73713],2],[[73714,73726],3],[73727,2],[[73728,74606],2],[[74607,74648],2],[74649,2],[[74650,74751],3],[[74752,74850],2],[[74851,74862],2],[74863,3],[[74864,74867],2],[74868,2],[[74869,74879],3],[[74880,75075],2],[[75076,77711],3],[[77712,77808],2],[[77809,77810],2],[[77811,77823],3],[[77824,78894],2],[78895,2],[[78896,78904],3],[[78905,78911],3],[[78912,78933],2],[[78934,78943],3],[[78944,82938],2],[[82939,82943],3],[[82944,83526],2],[[83527,90367],3],[[90368,90425],2],[[90426,92159],3],[[92160,92728],2],[[92729,92735],3],[[92736,92766],2],[92767,3],[[92768,92777],2],[[92778,92781],3],[[92782,92783],2],[[92784,92862],2],[92863,3],[[92864,92873],2],[[92874,92879],3],[[92880,92909],2],[[92910,92911],3],[[92912,92916],2],[92917,2],[[92918,92927],3],[[92928,92982],2],[[92983,92991],2],[[92992,92995],2],[[92996,92997],2],[[92998,93007],3],[[93008,93017],2],[93018,3],[[93019,93025],2],[93026,3],[[93027,93047],2],[[93048,93052],3],[[93053,93071],2],[[93072,93503],3],[[93504,93548],2],[[93549,93551],2],[[93552,93561],2],[[93562,93759],3],[93760,1,"\uD81B\uDE60"],[93761,1,"\uD81B\uDE61"],[93762,1,"\uD81B\uDE62"],[93763,1,"\uD81B\uDE63"],[93764,1,"\uD81B\uDE64"],[93765,1,"\uD81B\uDE65"],[93766,1,"\uD81B\uDE66"],[93767,1,"\uD81B\uDE67"],[93768,1,"\uD81B\uDE68"],[93769,1,"\uD81B\uDE69"],[93770,1,"\uD81B\uDE6A"],[93771,1,"\uD81B\uDE6B"],[93772,1,"\uD81B\uDE6C"],[93773,1,"\uD81B\uDE6D"],[93774,1,"\uD81B\uDE6E"],[93775,1,"\uD81B\uDE6F"],[93776,1,"\uD81B\uDE70"],[93777,1,"\uD81B\uDE71"],[93778,1,"\uD81B\uDE72"],[93779,1,"\uD81B\uDE73"],[93780,1,"\uD81B\uDE74"],[93781,1,"\uD81B\uDE75"],[93782,1,"\uD81B\uDE76"],[93783,1,"\uD81B\uDE77"],[93784,1,"\uD81B\uDE78"],[93785,1,"\uD81B\uDE79"],[93786,1,"\uD81B\uDE7A"],[93787,1,"\uD81B\uDE7B"],[93788,1,"\uD81B\uDE7C"],[93789,1,"\uD81B\uDE7D"],[93790,1,"\uD81B\uDE7E"],[93791,1,"\uD81B\uDE7F"],[[93792,93823],2],[[93824,93850],2],[[93851,93951],3],[[93952,94020],2],[[94021,94026],2],[[94027,94030],3],[94031,2],[[94032,94078],2],[[94079,94087],2],[[94088,94094],3],[[94095,94111],2],[[94112,94175],3],[94176,2],[94177,2],[94178,2],[94179,2],[94180,2],[[94181,94191],3],[[94192,94193],2],[[94194,94207],3],[[94208,100332],2],[[100333,100337],2],[[100338,100343],2],[[100344,100351],3],[[100352,101106],2],[[101107,101589],2],[[101590,101630],3],[101631,2],[[101632,101640],2],[[101641,110575],3],[[110576,110579],2],[110580,3],[[110581,110587],2],[110588,3],[[110589,110590],2],[110591,3],[[110592,110593],2],[[110594,110878],2],[[110879,110882],2],[[110883,110897],3],[110898,2],[[110899,110927],3],[[110928,110930],2],[[110931,110932],3],[110933,2],[[110934,110947],3],[[110948,110951],2],[[110952,110959],3],[[110960,111355],2],[[111356,113663],3],[[113664,113770],2],[[113771,113775],3],[[113776,113788],2],[[113789,113791],3],[[113792,113800],2],[[113801,113807],3],[[113808,113817],2],[[113818,113819],3],[113820,2],[[113821,113822],2],[113823,2],[[113824,113827],7],[[113828,117759],3],[[117760,117973],2],[117974,1,"a"],[117975,1,"b"],[117976,1,"c"],[117977,1,"d"],[117978,1,"e"],[117979,1,"f"],[117980,1,"g"],[117981,1,"h"],[117982,1,"i"],[117983,1,"j"],[117984,1,"k"],[117985,1,"l"],[117986,1,"m"],[117987,1,"n"],[117988,1,"o"],[117989,1,"p"],[117990,1,"q"],[117991,1,"r"],[117992,1,"s"],[117993,1,"t"],[117994,1,"u"],[117995,1,"v"],[117996,1,"w"],[117997,1,"x"],[117998,1,"y"],[117999,1,"z"],[118000,1,"0"],[118001,1,"1"],[118002,1,"2"],[118003,1,"3"],[118004,1,"4"],[118005,1,"5"],[118006,1,"6"],[118007,1,"7"],[118008,1,"8"],[118009,1,"9"],[[118010,118015],3],[[118016,118451],2],[[118452,118527],3],[[118528,118573],2],[[118574,118575],3],[[118576,118598],2],[[118599,118607],3],[[118608,118723],2],[[118724,118783],3],[[118784,119029],2],[[119030,119039],3],[[119040,119078],2],[[119079,119080],3],[119081,2],[[119082,119133],2],[119134,1,"\uD834\uDD57\uD834\uDD65"],[119135,1,"\uD834\uDD58\uD834\uDD65"],[119136,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD6E"],[119137,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD6F"],[119138,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD70"],[119139,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD71"],[119140,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD72"],[[119141,119154],2],[[119155,119162],7],[[119163,119226],2],[119227,1,"\uD834\uDDB9\uD834\uDD65"],[119228,1,"\uD834\uDDBA\uD834\uDD65"],[119229,1,"\uD834\uDDB9\uD834\uDD65\uD834\uDD6E"],[119230,1,"\uD834\uDDBA\uD834\uDD65\uD834\uDD6E"],[119231,1,"\uD834\uDDB9\uD834\uDD65\uD834\uDD6F"],[119232,1,"\uD834\uDDBA\uD834\uDD65\uD834\uDD6F"],[[119233,119261],2],[[119262,119272],2],[[119273,119274],2],[[119275,119295],3],[[119296,119365],2],[[119366,119487],3],[[119488,119507],2],[[119508,119519],3],[[119520,119539],2],[[119540,119551],3],[[119552,119638],2],[[119639,119647],3],[[119648,119665],2],[[119666,119672],2],[[119673,119807],3],[119808,1,"a"],[119809,1,"b"],[119810,1,"c"],[119811,1,"d"],[119812,1,"e"],[119813,1,"f"],[119814,1,"g"],[119815,1,"h"],[119816,1,"i"],[119817,1,"j"],[119818,1,"k"],[119819,1,"l"],[119820,1,"m"],[119821,1,"n"],[119822,1,"o"],[119823,1,"p"],[119824,1,"q"],[119825,1,"r"],[119826,1,"s"],[119827,1,"t"],[119828,1,"u"],[119829,1,"v"],[119830,1,"w"],[119831,1,"x"],[119832,1,"y"],[119833,1,"z"],[119834,1,"a"],[119835,1,"b"],[119836,1,"c"],[119837,1,"d"],[119838,1,"e"],[119839,1,"f"],[119840,1,"g"],[119841,1,"h"],[119842,1,"i"],[119843,1,"j"],[119844,1,"k"],[119845,1,"l"],[119846,1,"m"],[119847,1,"n"],[119848,1,"o"],[119849,1,"p"],[119850,1,"q"],[119851,1,"r"],[119852,1,"s"],[119853,1,"t"],[119854,1,"u"],[119855,1,"v"],[119856,1,"w"],[119857,1,"x"],[119858,1,"y"],[119859,1,"z"],[119860,1,"a"],[119861,1,"b"],[119862,1,"c"],[119863,1,"d"],[119864,1,"e"],[119865,1,"f"],[119866,1,"g"],[119867,1,"h"],[119868,1,"i"],[119869,1,"j"],[119870,1,"k"],[119871,1,"l"],[119872,1,"m"],[119873,1,"n"],[119874,1,"o"],[119875,1,"p"],[119876,1,"q"],[119877,1,"r"],[119878,1,"s"],[119879,1,"t"],[119880,1,"u"],[119881,1,"v"],[119882,1,"w"],[119883,1,"x"],[119884,1,"y"],[119885,1,"z"],[119886,1,"a"],[119887,1,"b"],[119888,1,"c"],[119889,1,"d"],[119890,1,"e"],[119891,1,"f"],[119892,1,"g"],[119893,3],[119894,1,"i"],[119895,1,"j"],[119896,1,"k"],[119897,1,"l"],[119898,1,"m"],[119899,1,"n"],[119900,1,"o"],[119901,1,"p"],[119902,1,"q"],[119903,1,"r"],[119904,1,"s"],[119905,1,"t"],[119906,1,"u"],[119907,1,"v"],[119908,1,"w"],[119909,1,"x"],[119910,1,"y"],[119911,1,"z"],[119912,1,"a"],[119913,1,"b"],[119914,1,"c"],[119915,1,"d"],[119916,1,"e"],[119917,1,"f"],[119918,1,"g"],[119919,1,"h"],[119920,1,"i"],[119921,1,"j"],[119922,1,"k"],[119923,1,"l"],[119924,1,"m"],[119925,1,"n"],[119926,1,"o"],[119927,1,"p"],[119928,1,"q"],[119929,1,"r"],[119930,1,"s"],[119931,1,"t"],[119932,1,"u"],[119933,1,"v"],[119934,1,"w"],[119935,1,"x"],[119936,1,"y"],[119937,1,"z"],[119938,1,"a"],[119939,1,"b"],[119940,1,"c"],[119941,1,"d"],[119942,1,"e"],[119943,1,"f"],[119944,1,"g"],[119945,1,"h"],[119946,1,"i"],[119947,1,"j"],[119948,1,"k"],[119949,1,"l"],[119950,1,"m"],[119951,1,"n"],[119952,1,"o"],[119953,1,"p"],[119954,1,"q"],[119955,1,"r"],[119956,1,"s"],[119957,1,"t"],[119958,1,"u"],[119959,1,"v"],[119960,1,"w"],[119961,1,"x"],[119962,1,"y"],[119963,1,"z"],[119964,1,"a"],[119965,3],[119966,1,"c"],[119967,1,"d"],[[119968,119969],3],[119970,1,"g"],[[119971,119972],3],[119973,1,"j"],[119974,1,"k"],[[119975,119976],3],[119977,1,"n"],[119978,1,"o"],[119979,1,"p"],[119980,1,"q"],[119981,3],[119982,1,"s"],[119983,1,"t"],[119984,1,"u"],[119985,1,"v"],[119986,1,"w"],[119987,1,"x"],[119988,1,"y"],[119989,1,"z"],[119990,1,"a"],[119991,1,"b"],[119992,1,"c"],[119993,1,"d"],[119994,3],[119995,1,"f"],[119996,3],[119997,1,"h"],[119998,1,"i"],[119999,1,"j"],[120000,1,"k"],[120001,1,"l"],[120002,1,"m"],[120003,1,"n"],[120004,3],[120005,1,"p"],[120006,1,"q"],[120007,1,"r"],[120008,1,"s"],[120009,1,"t"],[120010,1,"u"],[120011,1,"v"],[120012,1,"w"],[120013,1,"x"],[120014,1,"y"],[120015,1,"z"],[120016,1,"a"],[120017,1,"b"],[120018,1,"c"],[120019,1,"d"],[120020,1,"e"],[120021,1,"f"],[120022,1,"g"],[120023,1,"h"],[120024,1,"i"],[120025,1,"j"],[120026,1,"k"],[120027,1,"l"],[120028,1,"m"],[120029,1,"n"],[120030,1,"o"],[120031,1,"p"],[120032,1,"q"],[120033,1,"r"],[120034,1,"s"],[120035,1,"t"],[120036,1,"u"],[120037,1,"v"],[120038,1,"w"],[120039,1,"x"],[120040,1,"y"],[120041,1,"z"],[120042,1,"a"],[120043,1,"b"],[120044,1,"c"],[120045,1,"d"],[120046,1,"e"],[120047,1,"f"],[120048,1,"g"],[120049,1,"h"],[120050,1,"i"],[120051,1,"j"],[120052,1,"k"],[120053,1,"l"],[120054,1,"m"],[120055,1,"n"],[120056,1,"o"],[120057,1,"p"],[120058,1,"q"],[120059,1,"r"],[120060,1,"s"],[120061,1,"t"],[120062,1,"u"],[120063,1,"v"],[120064,1,"w"],[120065,1,"x"],[120066,1,"y"],[120067,1,"z"],[120068,1,"a"],[120069,1,"b"],[120070,3],[120071,1,"d"],[120072,1,"e"],[120073,1,"f"],[120074,1,"g"],[[120075,120076],3],[120077,1,"j"],[120078,1,"k"],[120079,1,"l"],[120080,1,"m"],[120081,1,"n"],[120082,1,"o"],[120083,1,"p"],[120084,1,"q"],[120085,3],[120086,1,"s"],[120087,1,"t"],[120088,1,"u"],[120089,1,"v"],[120090,1,"w"],[120091,1,"x"],[120092,1,"y"],[120093,3],[120094,1,"a"],[120095,1,"b"],[120096,1,"c"],[120097,1,"d"],[120098,1,"e"],[120099,1,"f"],[120100,1,"g"],[120101,1,"h"],[120102,1,"i"],[120103,1,"j"],[120104,1,"k"],[120105,1,"l"],[120106,1,"m"],[120107,1,"n"],[120108,1,"o"],[120109,1,"p"],[120110,1,"q"],[120111,1,"r"],[120112,1,"s"],[120113,1,"t"],[120114,1,"u"],[120115,1,"v"],[120116,1,"w"],[120117,1,"x"],[120118,1,"y"],[120119,1,"z"],[120120,1,"a"],[120121,1,"b"],[120122,3],[120123,1,"d"],[120124,1,"e"],[120125,1,"f"],[120126,1,"g"],[120127,3],[120128,1,"i"],[120129,1,"j"],[120130,1,"k"],[120131,1,"l"],[120132,1,"m"],[120133,3],[120134,1,"o"],[[120135,120137],3],[120138,1,"s"],[120139,1,"t"],[120140,1,"u"],[120141,1,"v"],[120142,1,"w"],[120143,1,"x"],[120144,1,"y"],[120145,3],[120146,1,"a"],[120147,1,"b"],[120148,1,"c"],[120149,1,"d"],[120150,1,"e"],[120151,1,"f"],[120152,1,"g"],[120153,1,"h"],[120154,1,"i"],[120155,1,"j"],[120156,1,"k"],[120157,1,"l"],[120158,1,"m"],[120159,1,"n"],[120160,1,"o"],[120161,1,"p"],[120162,1,"q"],[120163,1,"r"],[120164,1,"s"],[120165,1,"t"],[120166,1,"u"],[120167,1,"v"],[120168,1,"w"],[120169,1,"x"],[120170,1,"y"],[120171,1,"z"],[120172,1,"a"],[120173,1,"b"],[120174,1,"c"],[120175,1,"d"],[120176,1,"e"],[120177,1,"f"],[120178,1,"g"],[120179,1,"h"],[120180,1,"i"],[120181,1,"j"],[120182,1,"k"],[120183,1,"l"],[120184,1,"m"],[120185,1,"n"],[120186,1,"o"],[120187,1,"p"],[120188,1,"q"],[120189,1,"r"],[120190,1,"s"],[120191,1,"t"],[120192,1,"u"],[120193,1,"v"],[120194,1,"w"],[120195,1,"x"],[120196,1,"y"],[120197,1,"z"],[120198,1,"a"],[120199,1,"b"],[120200,1,"c"],[120201,1,"d"],[120202,1,"e"],[120203,1,"f"],[120204,1,"g"],[120205,1,"h"],[120206,1,"i"],[120207,1,"j"],[120208,1,"k"],[120209,1,"l"],[120210,1,"m"],[120211,1,"n"],[120212,1,"o"],[120213,1,"p"],[120214,1,"q"],[120215,1,"r"],[120216,1,"s"],[120217,1,"t"],[120218,1,"u"],[120219,1,"v"],[120220,1,"w"],[120221,1,"x"],[120222,1,"y"],[120223,1,"z"],[120224,1,"a"],[120225,1,"b"],[120226,1,"c"],[120227,1,"d"],[120228,1,"e"],[120229,1,"f"],[120230,1,"g"],[120231,1,"h"],[120232,1,"i"],[120233,1,"j"],[120234,1,"k"],[120235,1,"l"],[120236,1,"m"],[120237,1,"n"],[120238,1,"o"],[120239,1,"p"],[120240,1,"q"],[120241,1,"r"],[120242,1,"s"],[120243,1,"t"],[120244,1,"u"],[120245,1,"v"],[120246,1,"w"],[120247,1,"x"],[120248,1,"y"],[120249,1,"z"],[120250,1,"a"],[120251,1,"b"],[120252,1,"c"],[120253,1,"d"],[120254,1,"e"],[120255,1,"f"],[120256,1,"g"],[120257,1,"h"],[120258,1,"i"],[120259,1,"j"],[120260,1,"k"],[120261,1,"l"],[120262,1,"m"],[120263,1,"n"],[120264,1,"o"],[120265,1,"p"],[120266,1,"q"],[120267,1,"r"],[120268,1,"s"],[120269,1,"t"],[120270,1,"u"],[120271,1,"v"],[120272,1,"w"],[120273,1,"x"],[120274,1,"y"],[120275,1,"z"],[120276,1,"a"],[120277,1,"b"],[120278,1,"c"],[120279,1,"d"],[120280,1,"e"],[120281,1,"f"],[120282,1,"g"],[120283,1,"h"],[120284,1,"i"],[120285,1,"j"],[120286,1,"k"],[120287,1,"l"],[120288,1,"m"],[120289,1,"n"],[120290,1,"o"],[120291,1,"p"],[120292,1,"q"],[120293,1,"r"],[120294,1,"s"],[120295,1,"t"],[120296,1,"u"],[120297,1,"v"],[120298,1,"w"],[120299,1,"x"],[120300,1,"y"],[120301,1,"z"],[120302,1,"a"],[120303,1,"b"],[120304,1,"c"],[120305,1,"d"],[120306,1,"e"],[120307,1,"f"],[120308,1,"g"],[120309,1,"h"],[120310,1,"i"],[120311,1,"j"],[120312,1,"k"],[120313,1,"l"],[120314,1,"m"],[120315,1,"n"],[120316,1,"o"],[120317,1,"p"],[120318,1,"q"],[120319,1,"r"],[120320,1,"s"],[120321,1,"t"],[120322,1,"u"],[120323,1,"v"],[120324,1,"w"],[120325,1,"x"],[120326,1,"y"],[120327,1,"z"],[120328,1,"a"],[120329,1,"b"],[120330,1,"c"],[120331,1,"d"],[120332,1,"e"],[120333,1,"f"],[120334,1,"g"],[120335,1,"h"],[120336,1,"i"],[120337,1,"j"],[120338,1,"k"],[120339,1,"l"],[120340,1,"m"],[120341,1,"n"],[120342,1,"o"],[120343,1,"p"],[120344,1,"q"],[120345,1,"r"],[120346,1,"s"],[120347,1,"t"],[120348,1,"u"],[120349,1,"v"],[120350,1,"w"],[120351,1,"x"],[120352,1,"y"],[120353,1,"z"],[120354,1,"a"],[120355,1,"b"],[120356,1,"c"],[120357,1,"d"],[120358,1,"e"],[120359,1,"f"],[120360,1,"g"],[120361,1,"h"],[120362,1,"i"],[120363,1,"j"],[120364,1,"k"],[120365,1,"l"],[120366,1,"m"],[120367,1,"n"],[120368,1,"o"],[120369,1,"p"],[120370,1,"q"],[120371,1,"r"],[120372,1,"s"],[120373,1,"t"],[120374,1,"u"],[120375,1,"v"],[120376,1,"w"],[120377,1,"x"],[120378,1,"y"],[120379,1,"z"],[120380,1,"a"],[120381,1,"b"],[120382,1,"c"],[120383,1,"d"],[120384,1,"e"],[120385,1,"f"],[120386,1,"g"],[120387,1,"h"],[120388,1,"i"],[120389,1,"j"],[120390,1,"k"],[120391,1,"l"],[120392,1,"m"],[120393,1,"n"],[120394,1,"o"],[120395,1,"p"],[120396,1,"q"],[120397,1,"r"],[120398,1,"s"],[120399,1,"t"],[120400,1,"u"],[120401,1,"v"],[120402,1,"w"],[120403,1,"x"],[120404,1,"y"],[120405,1,"z"],[120406,1,"a"],[120407,1,"b"],[120408,1,"c"],[120409,1,"d"],[120410,1,"e"],[120411,1,"f"],[120412,1,"g"],[120413,1,"h"],[120414,1,"i"],[120415,1,"j"],[120416,1,"k"],[120417,1,"l"],[120418,1,"m"],[120419,1,"n"],[120420,1,"o"],[120421,1,"p"],[120422,1,"q"],[120423,1,"r"],[120424,1,"s"],[120425,1,"t"],[120426,1,"u"],[120427,1,"v"],[120428,1,"w"],[120429,1,"x"],[120430,1,"y"],[120431,1,"z"],[120432,1,"a"],[120433,1,"b"],[120434,1,"c"],[120435,1,"d"],[120436,1,"e"],[120437,1,"f"],[120438,1,"g"],[120439,1,"h"],[120440,1,"i"],[120441,1,"j"],[120442,1,"k"],[120443,1,"l"],[120444,1,"m"],[120445,1,"n"],[120446,1,"o"],[120447,1,"p"],[120448,1,"q"],[120449,1,"r"],[120450,1,"s"],[120451,1,"t"],[120452,1,"u"],[120453,1,"v"],[120454,1,"w"],[120455,1,"x"],[120456,1,"y"],[120457,1,"z"],[120458,1,"a"],[120459,1,"b"],[120460,1,"c"],[120461,1,"d"],[120462,1,"e"],[120463,1,"f"],[120464,1,"g"],[120465,1,"h"],[120466,1,"i"],[120467,1,"j"],[120468,1,"k"],[120469,1,"l"],[120470,1,"m"],[120471,1,"n"],[120472,1,"o"],[120473,1,"p"],[120474,1,"q"],[120475,1,"r"],[120476,1,"s"],[120477,1,"t"],[120478,1,"u"],[120479,1,"v"],[120480,1,"w"],[120481,1,"x"],[120482,1,"y"],[120483,1,"z"],[120484,1,"\u0131"],[120485,1,"\u0237"],[[120486,120487],3],[120488,1,"\u03B1"],[120489,1,"\u03B2"],[120490,1,"\u03B3"],[120491,1,"\u03B4"],[120492,1,"\u03B5"],[120493,1,"\u03B6"],[120494,1,"\u03B7"],[120495,1,"\u03B8"],[120496,1,"\u03B9"],[120497,1,"\u03BA"],[120498,1,"\u03BB"],[120499,1,"\u03BC"],[120500,1,"\u03BD"],[120501,1,"\u03BE"],[120502,1,"\u03BF"],[120503,1,"\u03C0"],[120504,1,"\u03C1"],[120505,1,"\u03B8"],[120506,1,"\u03C3"],[120507,1,"\u03C4"],[120508,1,"\u03C5"],[120509,1,"\u03C6"],[120510,1,"\u03C7"],[120511,1,"\u03C8"],[120512,1,"\u03C9"],[120513,1,"\u2207"],[120514,1,"\u03B1"],[120515,1,"\u03B2"],[120516,1,"\u03B3"],[120517,1,"\u03B4"],[120518,1,"\u03B5"],[120519,1,"\u03B6"],[120520,1,"\u03B7"],[120521,1,"\u03B8"],[120522,1,"\u03B9"],[120523,1,"\u03BA"],[120524,1,"\u03BB"],[120525,1,"\u03BC"],[120526,1,"\u03BD"],[120527,1,"\u03BE"],[120528,1,"\u03BF"],[120529,1,"\u03C0"],[120530,1,"\u03C1"],[[120531,120532],1,"\u03C3"],[120533,1,"\u03C4"],[120534,1,"\u03C5"],[120535,1,"\u03C6"],[120536,1,"\u03C7"],[120537,1,"\u03C8"],[120538,1,"\u03C9"],[120539,1,"\u2202"],[120540,1,"\u03B5"],[120541,1,"\u03B8"],[120542,1,"\u03BA"],[120543,1,"\u03C6"],[120544,1,"\u03C1"],[120545,1,"\u03C0"],[120546,1,"\u03B1"],[120547,1,"\u03B2"],[120548,1,"\u03B3"],[120549,1,"\u03B4"],[120550,1,"\u03B5"],[120551,1,"\u03B6"],[120552,1,"\u03B7"],[120553,1,"\u03B8"],[120554,1,"\u03B9"],[120555,1,"\u03BA"],[120556,1,"\u03BB"],[120557,1,"\u03BC"],[120558,1,"\u03BD"],[120559,1,"\u03BE"],[120560,1,"\u03BF"],[120561,1,"\u03C0"],[120562,1,"\u03C1"],[120563,1,"\u03B8"],[120564,1,"\u03C3"],[120565,1,"\u03C4"],[120566,1,"\u03C5"],[120567,1,"\u03C6"],[120568,1,"\u03C7"],[120569,1,"\u03C8"],[120570,1,"\u03C9"],[120571,1,"\u2207"],[120572,1,"\u03B1"],[120573,1,"\u03B2"],[120574,1,"\u03B3"],[120575,1,"\u03B4"],[120576,1,"\u03B5"],[120577,1,"\u03B6"],[120578,1,"\u03B7"],[120579,1,"\u03B8"],[120580,1,"\u03B9"],[120581,1,"\u03BA"],[120582,1,"\u03BB"],[120583,1,"\u03BC"],[120584,1,"\u03BD"],[120585,1,"\u03BE"],[120586,1,"\u03BF"],[120587,1,"\u03C0"],[120588,1,"\u03C1"],[[120589,120590],1,"\u03C3"],[120591,1,"\u03C4"],[120592,1,"\u03C5"],[120593,1,"\u03C6"],[120594,1,"\u03C7"],[120595,1,"\u03C8"],[120596,1,"\u03C9"],[120597,1,"\u2202"],[120598,1,"\u03B5"],[120599,1,"\u03B8"],[120600,1,"\u03BA"],[120601,1,"\u03C6"],[120602,1,"\u03C1"],[120603,1,"\u03C0"],[120604,1,"\u03B1"],[120605,1,"\u03B2"],[120606,1,"\u03B3"],[120607,1,"\u03B4"],[120608,1,"\u03B5"],[120609,1,"\u03B6"],[120610,1,"\u03B7"],[120611,1,"\u03B8"],[120612,1,"\u03B9"],[120613,1,"\u03BA"],[120614,1,"\u03BB"],[120615,1,"\u03BC"],[120616,1,"\u03BD"],[120617,1,"\u03BE"],[120618,1,"\u03BF"],[120619,1,"\u03C0"],[120620,1,"\u03C1"],[120621,1,"\u03B8"],[120622,1,"\u03C3"],[120623,1,"\u03C4"],[120624,1,"\u03C5"],[120625,1,"\u03C6"],[120626,1,"\u03C7"],[120627,1,"\u03C8"],[120628,1,"\u03C9"],[120629,1,"\u2207"],[120630,1,"\u03B1"],[120631,1,"\u03B2"],[120632,1,"\u03B3"],[120633,1,"\u03B4"],[120634,1,"\u03B5"],[120635,1,"\u03B6"],[120636,1,"\u03B7"],[120637,1,"\u03B8"],[120638,1,"\u03B9"],[120639,1,"\u03BA"],[120640,1,"\u03BB"],[120641,1,"\u03BC"],[120642,1,"\u03BD"],[120643,1,"\u03BE"],[120644,1,"\u03BF"],[120645,1,"\u03C0"],[120646,1,"\u03C1"],[[120647,120648],1,"\u03C3"],[120649,1,"\u03C4"],[120650,1,"\u03C5"],[120651,1,"\u03C6"],[120652,1,"\u03C7"],[120653,1,"\u03C8"],[120654,1,"\u03C9"],[120655,1,"\u2202"],[120656,1,"\u03B5"],[120657,1,"\u03B8"],[120658,1,"\u03BA"],[120659,1,"\u03C6"],[120660,1,"\u03C1"],[120661,1,"\u03C0"],[120662,1,"\u03B1"],[120663,1,"\u03B2"],[120664,1,"\u03B3"],[120665,1,"\u03B4"],[120666,1,"\u03B5"],[120667,1,"\u03B6"],[120668,1,"\u03B7"],[120669,1,"\u03B8"],[120670,1,"\u03B9"],[120671,1,"\u03BA"],[120672,1,"\u03BB"],[120673,1,"\u03BC"],[120674,1,"\u03BD"],[120675,1,"\u03BE"],[120676,1,"\u03BF"],[120677,1,"\u03C0"],[120678,1,"\u03C1"],[120679,1,"\u03B8"],[120680,1,"\u03C3"],[120681,1,"\u03C4"],[120682,1,"\u03C5"],[120683,1,"\u03C6"],[120684,1,"\u03C7"],[120685,1,"\u03C8"],[120686,1,"\u03C9"],[120687,1,"\u2207"],[120688,1,"\u03B1"],[120689,1,"\u03B2"],[120690,1,"\u03B3"],[120691,1,"\u03B4"],[120692,1,"\u03B5"],[120693,1,"\u03B6"],[120694,1,"\u03B7"],[120695,1,"\u03B8"],[120696,1,"\u03B9"],[120697,1,"\u03BA"],[120698,1,"\u03BB"],[120699,1,"\u03BC"],[120700,1,"\u03BD"],[120701,1,"\u03BE"],[120702,1,"\u03BF"],[120703,1,"\u03C0"],[120704,1,"\u03C1"],[[120705,120706],1,"\u03C3"],[120707,1,"\u03C4"],[120708,1,"\u03C5"],[120709,1,"\u03C6"],[120710,1,"\u03C7"],[120711,1,"\u03C8"],[120712,1,"\u03C9"],[120713,1,"\u2202"],[120714,1,"\u03B5"],[120715,1,"\u03B8"],[120716,1,"\u03BA"],[120717,1,"\u03C6"],[120718,1,"\u03C1"],[120719,1,"\u03C0"],[120720,1,"\u03B1"],[120721,1,"\u03B2"],[120722,1,"\u03B3"],[120723,1,"\u03B4"],[120724,1,"\u03B5"],[120725,1,"\u03B6"],[120726,1,"\u03B7"],[120727,1,"\u03B8"],[120728,1,"\u03B9"],[120729,1,"\u03BA"],[120730,1,"\u03BB"],[120731,1,"\u03BC"],[120732,1,"\u03BD"],[120733,1,"\u03BE"],[120734,1,"\u03BF"],[120735,1,"\u03C0"],[120736,1,"\u03C1"],[120737,1,"\u03B8"],[120738,1,"\u03C3"],[120739,1,"\u03C4"],[120740,1,"\u03C5"],[120741,1,"\u03C6"],[120742,1,"\u03C7"],[120743,1,"\u03C8"],[120744,1,"\u03C9"],[120745,1,"\u2207"],[120746,1,"\u03B1"],[120747,1,"\u03B2"],[120748,1,"\u03B3"],[120749,1,"\u03B4"],[120750,1,"\u03B5"],[120751,1,"\u03B6"],[120752,1,"\u03B7"],[120753,1,"\u03B8"],[120754,1,"\u03B9"],[120755,1,"\u03BA"],[120756,1,"\u03BB"],[120757,1,"\u03BC"],[120758,1,"\u03BD"],[120759,1,"\u03BE"],[120760,1,"\u03BF"],[120761,1,"\u03C0"],[120762,1,"\u03C1"],[[120763,120764],1,"\u03C3"],[120765,1,"\u03C4"],[120766,1,"\u03C5"],[120767,1,"\u03C6"],[120768,1,"\u03C7"],[120769,1,"\u03C8"],[120770,1,"\u03C9"],[120771,1,"\u2202"],[120772,1,"\u03B5"],[120773,1,"\u03B8"],[120774,1,"\u03BA"],[120775,1,"\u03C6"],[120776,1,"\u03C1"],[120777,1,"\u03C0"],[[120778,120779],1,"\u03DD"],[[120780,120781],3],[120782,1,"0"],[120783,1,"1"],[120784,1,"2"],[120785,1,"3"],[120786,1,"4"],[120787,1,"5"],[120788,1,"6"],[120789,1,"7"],[120790,1,"8"],[120791,1,"9"],[120792,1,"0"],[120793,1,"1"],[120794,1,"2"],[120795,1,"3"],[120796,1,"4"],[120797,1,"5"],[120798,1,"6"],[120799,1,"7"],[120800,1,"8"],[120801,1,"9"],[120802,1,"0"],[120803,1,"1"],[120804,1,"2"],[120805,1,"3"],[120806,1,"4"],[120807,1,"5"],[120808,1,"6"],[120809,1,"7"],[120810,1,"8"],[120811,1,"9"],[120812,1,"0"],[120813,1,"1"],[120814,1,"2"],[120815,1,"3"],[120816,1,"4"],[120817,1,"5"],[120818,1,"6"],[120819,1,"7"],[120820,1,"8"],[120821,1,"9"],[120822,1,"0"],[120823,1,"1"],[120824,1,"2"],[120825,1,"3"],[120826,1,"4"],[120827,1,"5"],[120828,1,"6"],[120829,1,"7"],[120830,1,"8"],[120831,1,"9"],[[120832,121343],2],[[121344,121398],2],[[121399,121402],2],[[121403,121452],2],[[121453,121460],2],[121461,2],[[121462,121475],2],[121476,2],[[121477,121483],2],[[121484,121498],3],[[121499,121503],2],[121504,3],[[121505,121519],2],[[121520,122623],3],[[122624,122654],2],[[122655,122660],3],[[122661,122666],2],[[122667,122879],3],[[122880,122886],2],[122887,3],[[122888,122904],2],[[122905,122906],3],[[122907,122913],2],[122914,3],[[122915,122916],2],[122917,3],[[122918,122922],2],[[122923,122927],3],[122928,1,"\u0430"],[122929,1,"\u0431"],[122930,1,"\u0432"],[122931,1,"\u0433"],[122932,1,"\u0434"],[122933,1,"\u0435"],[122934,1,"\u0436"],[122935,1,"\u0437"],[122936,1,"\u0438"],[122937,1,"\u043A"],[122938,1,"\u043B"],[122939,1,"\u043C"],[122940,1,"\u043E"],[122941,1,"\u043F"],[122942,1,"\u0440"],[122943,1,"\u0441"],[122944,1,"\u0442"],[122945,1,"\u0443"],[122946,1,"\u0444"],[122947,1,"\u0445"],[122948,1,"\u0446"],[122949,1,"\u0447"],[122950,1,"\u0448"],[122951,1,"\u044B"],[122952,1,"\u044D"],[122953,1,"\u044E"],[122954,1,"\uA689"],[122955,1,"\u04D9"],[122956,1,"\u0456"],[122957,1,"\u0458"],[122958,1,"\u04E9"],[122959,1,"\u04AF"],[122960,1,"\u04CF"],[122961,1,"\u0430"],[122962,1,"\u0431"],[122963,1,"\u0432"],[122964,1,"\u0433"],[122965,1,"\u0434"],[122966,1,"\u0435"],[122967,1,"\u0436"],[122968,1,"\u0437"],[122969,1,"\u0438"],[122970,1,"\u043A"],[122971,1,"\u043B"],[122972,1,"\u043E"],[122973,1,"\u043F"],[122974,1,"\u0441"],[122975,1,"\u0443"],[122976,1,"\u0444"],[122977,1,"\u0445"],[122978,1,"\u0446"],[122979,1,"\u0447"],[122980,1,"\u0448"],[122981,1,"\u044A"],[122982,1,"\u044B"],[122983,1,"\u0491"],[122984,1,"\u0456"],[122985,1,"\u0455"],[122986,1,"\u045F"],[122987,1,"\u04AB"],[122988,1,"\uA651"],[122989,1,"\u04B1"],[[122990,123022],3],[123023,2],[[123024,123135],3],[[123136,123180],2],[[123181,123183],3],[[123184,123197],2],[[123198,123199],3],[[123200,123209],2],[[123210,123213],3],[123214,2],[123215,2],[[123216,123535],3],[[123536,123566],2],[[123567,123583],3],[[123584,123641],2],[[123642,123646],3],[123647,2],[[123648,124111],3],[[124112,124153],2],[[124154,124367],3],[[124368,124410],2],[[124411,124414],3],[124415,2],[[124416,124895],3],[[124896,124902],2],[124903,3],[[124904,124907],2],[124908,3],[[124909,124910],2],[124911,3],[[124912,124926],2],[124927,3],[[124928,125124],2],[[125125,125126],3],[[125127,125135],2],[[125136,125142],2],[[125143,125183],3],[125184,1,"\uD83A\uDD22"],[125185,1,"\uD83A\uDD23"],[125186,1,"\uD83A\uDD24"],[125187,1,"\uD83A\uDD25"],[125188,1,"\uD83A\uDD26"],[125189,1,"\uD83A\uDD27"],[125190,1,"\uD83A\uDD28"],[125191,1,"\uD83A\uDD29"],[125192,1,"\uD83A\uDD2A"],[125193,1,"\uD83A\uDD2B"],[125194,1,"\uD83A\uDD2C"],[125195,1,"\uD83A\uDD2D"],[125196,1,"\uD83A\uDD2E"],[125197,1,"\uD83A\uDD2F"],[125198,1,"\uD83A\uDD30"],[125199,1,"\uD83A\uDD31"],[125200,1,"\uD83A\uDD32"],[125201,1,"\uD83A\uDD33"],[125202,1,"\uD83A\uDD34"],[125203,1,"\uD83A\uDD35"],[125204,1,"\uD83A\uDD36"],[125205,1,"\uD83A\uDD37"],[125206,1,"\uD83A\uDD38"],[125207,1,"\uD83A\uDD39"],[125208,1,"\uD83A\uDD3A"],[125209,1,"\uD83A\uDD3B"],[125210,1,"\uD83A\uDD3C"],[125211,1,"\uD83A\uDD3D"],[125212,1,"\uD83A\uDD3E"],[125213,1,"\uD83A\uDD3F"],[125214,1,"\uD83A\uDD40"],[125215,1,"\uD83A\uDD41"],[125216,1,"\uD83A\uDD42"],[125217,1,"\uD83A\uDD43"],[[125218,125258],2],[125259,2],[[125260,125263],3],[[125264,125273],2],[[125274,125277],3],[[125278,125279],2],[[125280,126064],3],[[126065,126132],2],[[126133,126208],3],[[126209,126269],2],[[126270,126463],3],[126464,1,"\u0627"],[126465,1,"\u0628"],[126466,1,"\u062C"],[126467,1,"\u062F"],[126468,3],[126469,1,"\u0648"],[126470,1,"\u0632"],[126471,1,"\u062D"],[126472,1,"\u0637"],[126473,1,"\u064A"],[126474,1,"\u0643"],[126475,1,"\u0644"],[126476,1,"\u0645"],[126477,1,"\u0646"],[126478,1,"\u0633"],[126479,1,"\u0639"],[126480,1,"\u0641"],[126481,1,"\u0635"],[126482,1,"\u0642"],[126483,1,"\u0631"],[126484,1,"\u0634"],[126485,1,"\u062A"],[126486,1,"\u062B"],[126487,1,"\u062E"],[126488,1,"\u0630"],[126489,1,"\u0636"],[126490,1,"\u0638"],[126491,1,"\u063A"],[126492,1,"\u066E"],[126493,1,"\u06BA"],[126494,1,"\u06A1"],[126495,1,"\u066F"],[126496,3],[126497,1,"\u0628"],[126498,1,"\u062C"],[126499,3],[126500,1,"\u0647"],[[126501,126502],3],[126503,1,"\u062D"],[126504,3],[126505,1,"\u064A"],[126506,1,"\u0643"],[126507,1,"\u0644"],[126508,1,"\u0645"],[126509,1,"\u0646"],[126510,1,"\u0633"],[126511,1,"\u0639"],[126512,1,"\u0641"],[126513,1,"\u0635"],[126514,1,"\u0642"],[126515,3],[126516,1,"\u0634"],[126517,1,"\u062A"],[126518,1,"\u062B"],[126519,1,"\u062E"],[126520,3],[126521,1,"\u0636"],[126522,3],[126523,1,"\u063A"],[[126524,126529],3],[126530,1,"\u062C"],[[126531,126534],3],[126535,1,"\u062D"],[126536,3],[126537,1,"\u064A"],[126538,3],[126539,1,"\u0644"],[126540,3],[126541,1,"\u0646"],[126542,1,"\u0633"],[126543,1,"\u0639"],[126544,3],[126545,1,"\u0635"],[126546,1,"\u0642"],[126547,3],[126548,1,"\u0634"],[[126549,126550],3],[126551,1,"\u062E"],[126552,3],[126553,1,"\u0636"],[126554,3],[126555,1,"\u063A"],[126556,3],[126557,1,"\u06BA"],[126558,3],[126559,1,"\u066F"],[126560,3],[126561,1,"\u0628"],[126562,1,"\u062C"],[126563,3],[126564,1,"\u0647"],[[126565,126566],3],[126567,1,"\u062D"],[126568,1,"\u0637"],[126569,1,"\u064A"],[126570,1,"\u0643"],[126571,3],[126572,1,"\u0645"],[126573,1,"\u0646"],[126574,1,"\u0633"],[126575,1,"\u0639"],[126576,1,"\u0641"],[126577,1,"\u0635"],[126578,1,"\u0642"],[126579,3],[126580,1,"\u0634"],[126581,1,"\u062A"],[126582,1,"\u062B"],[126583,1,"\u062E"],[126584,3],[126585,1,"\u0636"],[126586,1,"\u0638"],[126587,1,"\u063A"],[126588,1,"\u066E"],[126589,3],[126590,1,"\u06A1"],[126591,3],[126592,1,"\u0627"],[126593,1,"\u0628"],[126594,1,"\u062C"],[126595,1,"\u062F"],[126596,1,"\u0647"],[126597,1,"\u0648"],[126598,1,"\u0632"],[126599,1,"\u062D"],[126600,1,"\u0637"],[126601,1,"\u064A"],[126602,3],[126603,1,"\u0644"],[126604,1,"\u0645"],[126605,1,"\u0646"],[126606,1,"\u0633"],[126607,1,"\u0639"],[126608,1,"\u0641"],[126609,1,"\u0635"],[126610,1,"\u0642"],[126611,1,"\u0631"],[126612,1,"\u0634"],[126613,1,"\u062A"],[126614,1,"\u062B"],[126615,1,"\u062E"],[126616,1,"\u0630"],[126617,1,"\u0636"],[126618,1,"\u0638"],[126619,1,"\u063A"],[[126620,126624],3],[126625,1,"\u0628"],[126626,1,"\u062C"],[126627,1,"\u062F"],[126628,3],[126629,1,"\u0648"],[126630,1,"\u0632"],[126631,1,"\u062D"],[126632,1,"\u0637"],[126633,1,"\u064A"],[126634,3],[126635,1,"\u0644"],[126636,1,"\u0645"],[126637,1,"\u0646"],[126638,1,"\u0633"],[126639,1,"\u0639"],[126640,1,"\u0641"],[126641,1,"\u0635"],[126642,1,"\u0642"],[126643,1,"\u0631"],[126644,1,"\u0634"],[126645,1,"\u062A"],[126646,1,"\u062B"],[126647,1,"\u062E"],[126648,1,"\u0630"],[126649,1,"\u0636"],[126650,1,"\u0638"],[126651,1,"\u063A"],[[126652,126703],3],[[126704,126705],2],[[126706,126975],3],[[126976,127019],2],[[127020,127023],3],[[127024,127123],2],[[127124,127135],3],[[127136,127150],2],[[127151,127152],3],[[127153,127166],2],[127167,2],[127168,3],[[127169,127183],2],[127184,3],[[127185,127199],2],[[127200,127221],2],[[127222,127231],3],[127232,3],[127233,1,"0,"],[127234,1,"1,"],[127235,1,"2,"],[127236,1,"3,"],[127237,1,"4,"],[127238,1,"5,"],[127239,1,"6,"],[127240,1,"7,"],[127241,1,"8,"],[127242,1,"9,"],[[127243,127244],2],[[127245,127247],2],[127248,1,"(a)"],[127249,1,"(b)"],[127250,1,"(c)"],[127251,1,"(d)"],[127252,1,"(e)"],[127253,1,"(f)"],[127254,1,"(g)"],[127255,1,"(h)"],[127256,1,"(i)"],[127257,1,"(j)"],[127258,1,"(k)"],[127259,1,"(l)"],[127260,1,"(m)"],[127261,1,"(n)"],[127262,1,"(o)"],[127263,1,"(p)"],[127264,1,"(q)"],[127265,1,"(r)"],[127266,1,"(s)"],[127267,1,"(t)"],[127268,1,"(u)"],[127269,1,"(v)"],[127270,1,"(w)"],[127271,1,"(x)"],[127272,1,"(y)"],[127273,1,"(z)"],[127274,1,"\u3014s\u3015"],[127275,1,"c"],[127276,1,"r"],[127277,1,"cd"],[127278,1,"wz"],[127279,2],[127280,1,"a"],[127281,1,"b"],[127282,1,"c"],[127283,1,"d"],[127284,1,"e"],[127285,1,"f"],[127286,1,"g"],[127287,1,"h"],[127288,1,"i"],[127289,1,"j"],[127290,1,"k"],[127291,1,"l"],[127292,1,"m"],[127293,1,"n"],[127294,1,"o"],[127295,1,"p"],[127296,1,"q"],[127297,1,"r"],[127298,1,"s"],[127299,1,"t"],[127300,1,"u"],[127301,1,"v"],[127302,1,"w"],[127303,1,"x"],[127304,1,"y"],[127305,1,"z"],[127306,1,"hv"],[127307,1,"mv"],[127308,1,"sd"],[127309,1,"ss"],[127310,1,"ppv"],[127311,1,"wc"],[[127312,127318],2],[127319,2],[[127320,127326],2],[127327,2],[[127328,127337],2],[127338,1,"mc"],[127339,1,"md"],[127340,1,"mr"],[[127341,127343],2],[[127344,127352],2],[127353,2],[127354,2],[[127355,127356],2],[[127357,127358],2],[127359,2],[[127360,127369],2],[[127370,127373],2],[[127374,127375],2],[127376,1,"dj"],[[127377,127386],2],[[127387,127404],2],[127405,2],[[127406,127461],3],[[127462,127487],2],[127488,1,"\u307B\u304B"],[127489,1,"\u30B3\u30B3"],[127490,1,"\u30B5"],[[127491,127503],3],[127504,1,"\u624B"],[127505,1,"\u5B57"],[127506,1,"\u53CC"],[127507,1,"\u30C7"],[127508,1,"\u4E8C"],[127509,1,"\u591A"],[127510,1,"\u89E3"],[127511,1,"\u5929"],[127512,1,"\u4EA4"],[127513,1,"\u6620"],[127514,1,"\u7121"],[127515,1,"\u6599"],[127516,1,"\u524D"],[127517,1,"\u5F8C"],[127518,1,"\u518D"],[127519,1,"\u65B0"],[127520,1,"\u521D"],[127521,1,"\u7D42"],[127522,1,"\u751F"],[127523,1,"\u8CA9"],[127524,1,"\u58F0"],[127525,1,"\u5439"],[127526,1,"\u6F14"],[127527,1,"\u6295"],[127528,1,"\u6355"],[127529,1,"\u4E00"],[127530,1,"\u4E09"],[127531,1,"\u904A"],[127532,1,"\u5DE6"],[127533,1,"\u4E2D"],[127534,1,"\u53F3"],[127535,1,"\u6307"],[127536,1,"\u8D70"],[127537,1,"\u6253"],[127538,1,"\u7981"],[127539,1,"\u7A7A"],[127540,1,"\u5408"],[127541,1,"\u6E80"],[127542,1,"\u6709"],[127543,1,"\u6708"],[127544,1,"\u7533"],[127545,1,"\u5272"],[127546,1,"\u55B6"],[127547,1,"\u914D"],[[127548,127551],3],[127552,1,"\u3014\u672C\u3015"],[127553,1,"\u3014\u4E09\u3015"],[127554,1,"\u3014\u4E8C\u3015"],[127555,1,"\u3014\u5B89\u3015"],[127556,1,"\u3014\u70B9\u3015"],[127557,1,"\u3014\u6253\u3015"],[127558,1,"\u3014\u76D7\u3015"],[127559,1,"\u3014\u52DD\u3015"],[127560,1,"\u3014\u6557\u3015"],[[127561,127567],3],[127568,1,"\u5F97"],[127569,1,"\u53EF"],[[127570,127583],3],[[127584,127589],2],[[127590,127743],3],[[127744,127776],2],[[127777,127788],2],[[127789,127791],2],[[127792,127797],2],[127798,2],[[127799,127868],2],[127869,2],[[127870,127871],2],[[127872,127891],2],[[127892,127903],2],[[127904,127940],2],[127941,2],[[127942,127946],2],[[127947,127950],2],[[127951,127955],2],[[127956,127967],2],[[127968,127984],2],[[127985,127991],2],[[127992,127999],2],[[128000,128062],2],[128063,2],[128064,2],[128065,2],[[128066,128247],2],[128248,2],[[128249,128252],2],[[128253,128254],2],[128255,2],[[128256,128317],2],[[128318,128319],2],[[128320,128323],2],[[128324,128330],2],[[128331,128335],2],[[128336,128359],2],[[128360,128377],2],[128378,2],[[128379,128419],2],[128420,2],[[128421,128506],2],[[128507,128511],2],[128512,2],[[128513,128528],2],[128529,2],[[128530,128532],2],[128533,2],[128534,2],[128535,2],[128536,2],[128537,2],[128538,2],[128539,2],[[128540,128542],2],[128543,2],[[128544,128549],2],[[128550,128551],2],[[128552,128555],2],[128556,2],[128557,2],[[128558,128559],2],[[128560,128563],2],[128564,2],[[128565,128576],2],[[128577,128578],2],[[128579,128580],2],[[128581,128591],2],[[128592,128639],2],[[128640,128709],2],[[128710,128719],2],[128720,2],[[128721,128722],2],[[128723,128724],2],[128725,2],[[128726,128727],2],[[128728,128731],3],[128732,2],[[128733,128735],2],[[128736,128748],2],[[128749,128751],3],[[128752,128755],2],[[128756,128758],2],[[128759,128760],2],[128761,2],[128762,2],[[128763,128764],2],[[128765,128767],3],[[128768,128883],2],[[128884,128886],2],[[128887,128890],3],[[128891,128895],2],[[128896,128980],2],[[128981,128984],2],[128985,2],[[128986,128991],3],[[128992,129003],2],[[129004,129007],3],[129008,2],[[129009,129023],3],[[129024,129035],2],[[129036,129039],3],[[129040,129095],2],[[129096,129103],3],[[129104,129113],2],[[129114,129119],3],[[129120,129159],2],[[129160,129167],3],[[129168,129197],2],[[129198,129199],3],[[129200,129201],2],[[129202,129211],2],[[129212,129215],3],[[129216,129217],2],[[129218,129279],3],[[129280,129291],2],[129292,2],[[129293,129295],2],[[129296,129304],2],[[129305,129310],2],[129311,2],[[129312,129319],2],[[129320,129327],2],[129328,2],[[129329,129330],2],[[129331,129342],2],[129343,2],[[129344,129355],2],[129356,2],[[129357,129359],2],[[129360,129374],2],[[129375,129387],2],[[129388,129392],2],[129393,2],[129394,2],[[129395,129398],2],[[129399,129400],2],[129401,2],[129402,2],[129403,2],[[129404,129407],2],[[129408,129412],2],[[129413,129425],2],[[129426,129431],2],[[129432,129442],2],[[129443,129444],2],[[129445,129450],2],[[129451,129453],2],[[129454,129455],2],[[129456,129465],2],[[129466,129471],2],[129472,2],[[129473,129474],2],[[129475,129482],2],[129483,2],[129484,2],[[129485,129487],2],[[129488,129510],2],[[129511,129535],2],[[129536,129619],2],[[129620,129631],3],[[129632,129645],2],[[129646,129647],3],[[129648,129651],2],[129652,2],[[129653,129655],2],[[129656,129658],2],[[129659,129660],2],[[129661,129663],3],[[129664,129666],2],[[129667,129670],2],[[129671,129672],2],[129673,2],[[129674,129678],3],[129679,2],[[129680,129685],2],[[129686,129704],2],[[129705,129708],2],[[129709,129711],2],[[129712,129718],2],[[129719,129722],2],[[129723,129725],2],[129726,2],[129727,2],[[129728,129730],2],[[129731,129733],2],[129734,2],[[129735,129741],3],[[129742,129743],2],[[129744,129750],2],[[129751,129753],2],[[129754,129755],2],[129756,2],[[129757,129758],3],[129759,2],[[129760,129767],2],[129768,2],[129769,2],[[129770,129775],3],[[129776,129782],2],[[129783,129784],2],[[129785,129791],3],[[129792,129938],2],[129939,3],[[129940,129994],2],[[129995,130031],2],[130032,1,"0"],[130033,1,"1"],[130034,1,"2"],[130035,1,"3"],[130036,1,"4"],[130037,1,"5"],[130038,1,"6"],[130039,1,"7"],[130040,1,"8"],[130041,1,"9"],[[130042,131069],3],[[131070,131071],3],[[131072,173782],2],[[173783,173789],2],[[173790,173791],2],[[173792,173823],3],[[173824,177972],2],[[177973,177976],2],[177977,2],[[177978,177983],3],[[177984,178205],2],[[178206,178207],3],[[178208,183969],2],[[183970,183983],3],[[183984,191456],2],[[191457,191471],3],[[191472,192093],2],[[192094,194559],3],[194560,1,"\u4E3D"],[194561,1,"\u4E38"],[194562,1,"\u4E41"],[194563,1,"\uD840\uDD22"],[194564,1,"\u4F60"],[194565,1,"\u4FAE"],[194566,1,"\u4FBB"],[194567,1,"\u5002"],[194568,1,"\u507A"],[194569,1,"\u5099"],[194570,1,"\u50E7"],[194571,1,"\u50CF"],[194572,1,"\u349E"],[194573,1,"\uD841\uDE3A"],[194574,1,"\u514D"],[194575,1,"\u5154"],[194576,1,"\u5164"],[194577,1,"\u5177"],[194578,1,"\uD841\uDD1C"],[194579,1,"\u34B9"],[194580,1,"\u5167"],[194581,1,"\u518D"],[194582,1,"\uD841\uDD4B"],[194583,1,"\u5197"],[194584,1,"\u51A4"],[194585,1,"\u4ECC"],[194586,1,"\u51AC"],[194587,1,"\u51B5"],[194588,1,"\uD864\uDDDF"],[194589,1,"\u51F5"],[194590,1,"\u5203"],[194591,1,"\u34DF"],[194592,1,"\u523B"],[194593,1,"\u5246"],[194594,1,"\u5272"],[194595,1,"\u5277"],[194596,1,"\u3515"],[194597,1,"\u52C7"],[194598,1,"\u52C9"],[194599,1,"\u52E4"],[194600,1,"\u52FA"],[194601,1,"\u5305"],[194602,1,"\u5306"],[194603,1,"\u5317"],[194604,1,"\u5349"],[194605,1,"\u5351"],[194606,1,"\u535A"],[194607,1,"\u5373"],[194608,1,"\u537D"],[[194609,194611],1,"\u537F"],[194612,1,"\uD842\uDE2C"],[194613,1,"\u7070"],[194614,1,"\u53CA"],[194615,1,"\u53DF"],[194616,1,"\uD842\uDF63"],[194617,1,"\u53EB"],[194618,1,"\u53F1"],[194619,1,"\u5406"],[194620,1,"\u549E"],[194621,1,"\u5438"],[194622,1,"\u5448"],[194623,1,"\u5468"],[194624,1,"\u54A2"],[194625,1,"\u54F6"],[194626,1,"\u5510"],[194627,1,"\u5553"],[194628,1,"\u5563"],[[194629,194630],1,"\u5584"],[194631,1,"\u5599"],[194632,1,"\u55AB"],[194633,1,"\u55B3"],[194634,1,"\u55C2"],[194635,1,"\u5716"],[194636,1,"\u5606"],[194637,1,"\u5717"],[194638,1,"\u5651"],[194639,1,"\u5674"],[194640,1,"\u5207"],[194641,1,"\u58EE"],[194642,1,"\u57CE"],[194643,1,"\u57F4"],[194644,1,"\u580D"],[194645,1,"\u578B"],[194646,1,"\u5832"],[194647,1,"\u5831"],[194648,1,"\u58AC"],[194649,1,"\uD845\uDCE4"],[194650,1,"\u58F2"],[194651,1,"\u58F7"],[194652,1,"\u5906"],[194653,1,"\u591A"],[194654,1,"\u5922"],[194655,1,"\u5962"],[194656,1,"\uD845\uDEA8"],[194657,1,"\uD845\uDEEA"],[194658,1,"\u59EC"],[194659,1,"\u5A1B"],[194660,1,"\u5A27"],[194661,1,"\u59D8"],[194662,1,"\u5A66"],[194663,1,"\u36EE"],[194664,1,"\u36FC"],[194665,1,"\u5B08"],[[194666,194667],1,"\u5B3E"],[194668,1,"\uD846\uDDC8"],[194669,1,"\u5BC3"],[194670,1,"\u5BD8"],[194671,1,"\u5BE7"],[194672,1,"\u5BF3"],[194673,1,"\uD846\uDF18"],[194674,1,"\u5BFF"],[194675,1,"\u5C06"],[194676,1,"\u5F53"],[194677,1,"\u5C22"],[194678,1,"\u3781"],[194679,1,"\u5C60"],[194680,1,"\u5C6E"],[194681,1,"\u5CC0"],[194682,1,"\u5C8D"],[194683,1,"\uD847\uDDE4"],[194684,1,"\u5D43"],[194685,1,"\uD847\uDDE6"],[194686,1,"\u5D6E"],[194687,1,"\u5D6B"],[194688,1,"\u5D7C"],[194689,1,"\u5DE1"],[194690,1,"\u5DE2"],[194691,1,"\u382F"],[194692,1,"\u5DFD"],[194693,1,"\u5E28"],[194694,1,"\u5E3D"],[194695,1,"\u5E69"],[194696,1,"\u3862"],[194697,1,"\uD848\uDD83"],[194698,1,"\u387C"],[194699,1,"\u5EB0"],[194700,1,"\u5EB3"],[194701,1,"\u5EB6"],[194702,1,"\u5ECA"],[194703,1,"\uD868\uDF92"],[194704,1,"\u5EFE"],[[194705,194706],1,"\uD848\uDF31"],[194707,1,"\u8201"],[[194708,194709],1,"\u5F22"],[194710,1,"\u38C7"],[194711,1,"\uD84C\uDEB8"],[194712,1,"\uD858\uDDDA"],[194713,1,"\u5F62"],[194714,1,"\u5F6B"],[194715,1,"\u38E3"],[194716,1,"\u5F9A"],[194717,1,"\u5FCD"],[194718,1,"\u5FD7"],[194719,1,"\u5FF9"],[194720,1,"\u6081"],[194721,1,"\u393A"],[194722,1,"\u391C"],[194723,1,"\u6094"],[194724,1,"\uD849\uDED4"],[194725,1,"\u60C7"],[194726,1,"\u6148"],[194727,1,"\u614C"],[194728,1,"\u614E"],[194729,1,"\u614C"],[194730,1,"\u617A"],[194731,1,"\u618E"],[194732,1,"\u61B2"],[194733,1,"\u61A4"],[194734,1,"\u61AF"],[194735,1,"\u61DE"],[194736,1,"\u61F2"],[194737,1,"\u61F6"],[194738,1,"\u6210"],[194739,1,"\u621B"],[194740,1,"\u625D"],[194741,1,"\u62B1"],[194742,1,"\u62D4"],[194743,1,"\u6350"],[194744,1,"\uD84A\uDF0C"],[194745,1,"\u633D"],[194746,1,"\u62FC"],[194747,1,"\u6368"],[194748,1,"\u6383"],[194749,1,"\u63E4"],[194750,1,"\uD84A\uDFF1"],[194751,1,"\u6422"],[194752,1,"\u63C5"],[194753,1,"\u63A9"],[194754,1,"\u3A2E"],[194755,1,"\u6469"],[194756,1,"\u647E"],[194757,1,"\u649D"],[194758,1,"\u6477"],[194759,1,"\u3A6C"],[194760,1,"\u654F"],[194761,1,"\u656C"],[194762,1,"\uD84C\uDC0A"],[194763,1,"\u65E3"],[194764,1,"\u66F8"],[194765,1,"\u6649"],[194766,1,"\u3B19"],[194767,1,"\u6691"],[194768,1,"\u3B08"],[194769,1,"\u3AE4"],[194770,1,"\u5192"],[194771,1,"\u5195"],[194772,1,"\u6700"],[194773,1,"\u669C"],[194774,1,"\u80AD"],[194775,1,"\u43D9"],[194776,1,"\u6717"],[194777,1,"\u671B"],[194778,1,"\u6721"],[194779,1,"\u675E"],[194780,1,"\u6753"],[194781,1,"\uD84C\uDFC3"],[194782,1,"\u3B49"],[194783,1,"\u67FA"],[194784,1,"\u6785"],[194785,1,"\u6852"],[194786,1,"\u6885"],[194787,1,"\uD84D\uDC6D"],[194788,1,"\u688E"],[194789,1,"\u681F"],[194790,1,"\u6914"],[194791,1,"\u3B9D"],[194792,1,"\u6942"],[194793,1,"\u69A3"],[194794,1,"\u69EA"],[194795,1,"\u6AA8"],[194796,1,"\uD84D\uDEA3"],[194797,1,"\u6ADB"],[194798,1,"\u3C18"],[194799,1,"\u6B21"],[194800,1,"\uD84E\uDCA7"],[194801,1,"\u6B54"],[194802,1,"\u3C4E"],[194803,1,"\u6B72"],[194804,1,"\u6B9F"],[194805,1,"\u6BBA"],[194806,1,"\u6BBB"],[194807,1,"\uD84E\uDE8D"],[194808,1,"\uD847\uDD0B"],[194809,1,"\uD84E\uDEFA"],[194810,1,"\u6C4E"],[194811,1,"\uD84F\uDCBC"],[194812,1,"\u6CBF"],[194813,1,"\u6CCD"],[194814,1,"\u6C67"],[194815,1,"\u6D16"],[194816,1,"\u6D3E"],[194817,1,"\u6D77"],[194818,1,"\u6D41"],[194819,1,"\u6D69"],[194820,1,"\u6D78"],[194821,1,"\u6D85"],[194822,1,"\uD84F\uDD1E"],[194823,1,"\u6D34"],[194824,1,"\u6E2F"],[194825,1,"\u6E6E"],[194826,1,"\u3D33"],[194827,1,"\u6ECB"],[194828,1,"\u6EC7"],[194829,1,"\uD84F\uDED1"],[194830,1,"\u6DF9"],[194831,1,"\u6F6E"],[194832,1,"\uD84F\uDF5E"],[194833,1,"\uD84F\uDF8E"],[194834,1,"\u6FC6"],[194835,1,"\u7039"],[194836,1,"\u701E"],[194837,1,"\u701B"],[194838,1,"\u3D96"],[194839,1,"\u704A"],[194840,1,"\u707D"],[194841,1,"\u7077"],[194842,1,"\u70AD"],[194843,1,"\uD841\uDD25"],[194844,1,"\u7145"],[194845,1,"\uD850\uDE63"],[194846,1,"\u719C"],[194847,1,"\uD850\uDFAB"],[194848,1,"\u7228"],[194849,1,"\u7235"],[194850,1,"\u7250"],[194851,1,"\uD851\uDE08"],[194852,1,"\u7280"],[194853,1,"\u7295"],[194854,1,"\uD851\uDF35"],[194855,1,"\uD852\uDC14"],[194856,1,"\u737A"],[194857,1,"\u738B"],[194858,1,"\u3EAC"],[194859,1,"\u73A5"],[[194860,194861],1,"\u3EB8"],[194862,1,"\u7447"],[194863,1,"\u745C"],[194864,1,"\u7471"],[194865,1,"\u7485"],[194866,1,"\u74CA"],[194867,1,"\u3F1B"],[194868,1,"\u7524"],[194869,1,"\uD853\uDC36"],[194870,1,"\u753E"],[194871,1,"\uD853\uDC92"],[194872,1,"\u7570"],[194873,1,"\uD848\uDD9F"],[194874,1,"\u7610"],[194875,1,"\uD853\uDFA1"],[194876,1,"\uD853\uDFB8"],[194877,1,"\uD854\uDC44"],[194878,1,"\u3FFC"],[194879,1,"\u4008"],[194880,1,"\u76F4"],[194881,1,"\uD854\uDCF3"],[194882,1,"\uD854\uDCF2"],[194883,1,"\uD854\uDD19"],[194884,1,"\uD854\uDD33"],[194885,1,"\u771E"],[[194886,194887],1,"\u771F"],[194888,1,"\u774A"],[194889,1,"\u4039"],[194890,1,"\u778B"],[194891,1,"\u4046"],[194892,1,"\u4096"],[194893,1,"\uD855\uDC1D"],[194894,1,"\u784E"],[194895,1,"\u788C"],[194896,1,"\u78CC"],[194897,1,"\u40E3"],[194898,1,"\uD855\uDE26"],[194899,1,"\u7956"],[194900,1,"\uD855\uDE9A"],[194901,1,"\uD855\uDEC5"],[194902,1,"\u798F"],[194903,1,"\u79EB"],[194904,1,"\u412F"],[194905,1,"\u7A40"],[194906,1,"\u7A4A"],[194907,1,"\u7A4F"],[194908,1,"\uD856\uDD7C"],[[194909,194910],1,"\uD856\uDEA7"],[194911,1,"\u7AEE"],[194912,1,"\u4202"],[194913,1,"\uD856\uDFAB"],[194914,1,"\u7BC6"],[194915,1,"\u7BC9"],[194916,1,"\u4227"],[194917,1,"\uD857\uDC80"],[194918,1,"\u7CD2"],[194919,1,"\u42A0"],[194920,1,"\u7CE8"],[194921,1,"\u7CE3"],[194922,1,"\u7D00"],[194923,1,"\uD857\uDF86"],[194924,1,"\u7D63"],[194925,1,"\u4301"],[194926,1,"\u7DC7"],[194927,1,"\u7E02"],[194928,1,"\u7E45"],[194929,1,"\u4334"],[194930,1,"\uD858\uDE28"],[194931,1,"\uD858\uDE47"],[194932,1,"\u4359"],[194933,1,"\uD858\uDED9"],[194934,1,"\u7F7A"],[194935,1,"\uD858\uDF3E"],[194936,1,"\u7F95"],[194937,1,"\u7FFA"],[194938,1,"\u8005"],[194939,1,"\uD859\uDCDA"],[194940,1,"\uD859\uDD23"],[194941,1,"\u8060"],[194942,1,"\uD859\uDDA8"],[194943,1,"\u8070"],[194944,1,"\uD84C\uDF5F"],[194945,1,"\u43D5"],[194946,1,"\u80B2"],[194947,1,"\u8103"],[194948,1,"\u440B"],[194949,1,"\u813E"],[194950,1,"\u5AB5"],[194951,1,"\uD859\uDFA7"],[194952,1,"\uD859\uDFB5"],[194953,1,"\uD84C\uDF93"],[194954,1,"\uD84C\uDF9C"],[194955,1,"\u8201"],[194956,1,"\u8204"],[194957,1,"\u8F9E"],[194958,1,"\u446B"],[194959,1,"\u8291"],[194960,1,"\u828B"],[194961,1,"\u829D"],[194962,1,"\u52B3"],[194963,1,"\u82B1"],[194964,1,"\u82B3"],[194965,1,"\u82BD"],[194966,1,"\u82E6"],[194967,1,"\uD85A\uDF3C"],[194968,1,"\u82E5"],[194969,1,"\u831D"],[194970,1,"\u8363"],[194971,1,"\u83AD"],[194972,1,"\u8323"],[194973,1,"\u83BD"],[194974,1,"\u83E7"],[194975,1,"\u8457"],[194976,1,"\u8353"],[194977,1,"\u83CA"],[194978,1,"\u83CC"],[194979,1,"\u83DC"],[194980,1,"\uD85B\uDC36"],[194981,1,"\uD85B\uDD6B"],[194982,1,"\uD85B\uDCD5"],[194983,1,"\u452B"],[194984,1,"\u84F1"],[194985,1,"\u84F3"],[194986,1,"\u8516"],[194987,1,"\uD85C\uDFCA"],[194988,1,"\u8564"],[194989,1,"\uD85B\uDF2C"],[194990,1,"\u455D"],[194991,1,"\u4561"],[194992,1,"\uD85B\uDFB1"],[194993,1,"\uD85C\uDCD2"],[194994,1,"\u456B"],[194995,1,"\u8650"],[194996,1,"\u865C"],[194997,1,"\u8667"],[194998,1,"\u8669"],[194999,1,"\u86A9"],[195000,1,"\u8688"],[195001,1,"\u870E"],[195002,1,"\u86E2"],[195003,1,"\u8779"],[195004,1,"\u8728"],[195005,1,"\u876B"],[195006,1,"\u8786"],[195007,1,"\u45D7"],[195008,1,"\u87E1"],[195009,1,"\u8801"],[195010,1,"\u45F9"],[195011,1,"\u8860"],[195012,1,"\u8863"],[195013,1,"\uD85D\uDE67"],[195014,1,"\u88D7"],[195015,1,"\u88DE"],[195016,1,"\u4635"],[195017,1,"\u88FA"],[195018,1,"\u34BB"],[195019,1,"\uD85E\uDCAE"],[195020,1,"\uD85E\uDD66"],[195021,1,"\u46BE"],[195022,1,"\u46C7"],[195023,1,"\u8AA0"],[195024,1,"\u8AED"],[195025,1,"\u8B8A"],[195026,1,"\u8C55"],[195027,1,"\uD85F\uDCA8"],[195028,1,"\u8CAB"],[195029,1,"\u8CC1"],[195030,1,"\u8D1B"],[195031,1,"\u8D77"],[195032,1,"\uD85F\uDF2F"],[195033,1,"\uD842\uDC04"],[195034,1,"\u8DCB"],[195035,1,"\u8DBC"],[195036,1,"\u8DF0"],[195037,1,"\uD842\uDCDE"],[195038,1,"\u8ED4"],[195039,1,"\u8F38"],[195040,1,"\uD861\uDDD2"],[195041,1,"\uD861\uDDED"],[195042,1,"\u9094"],[195043,1,"\u90F1"],[195044,1,"\u9111"],[195045,1,"\uD861\uDF2E"],[195046,1,"\u911B"],[195047,1,"\u9238"],[195048,1,"\u92D7"],[195049,1,"\u92D8"],[195050,1,"\u927C"],[195051,1,"\u93F9"],[195052,1,"\u9415"],[195053,1,"\uD862\uDFFA"],[195054,1,"\u958B"],[195055,1,"\u4995"],[195056,1,"\u95B7"],[195057,1,"\uD863\uDD77"],[195058,1,"\u49E6"],[195059,1,"\u96C3"],[195060,1,"\u5DB2"],[195061,1,"\u9723"],[195062,1,"\uD864\uDD45"],[195063,1,"\uD864\uDE1A"],[195064,1,"\u4A6E"],[195065,1,"\u4A76"],[195066,1,"\u97E0"],[195067,1,"\uD865\uDC0A"],[195068,1,"\u4AB2"],[195069,1,"\uD865\uDC96"],[[195070,195071],1,"\u980B"],[195072,1,"\u9829"],[195073,1,"\uD865\uDDB6"],[195074,1,"\u98E2"],[195075,1,"\u4B33"],[195076,1,"\u9929"],[195077,1,"\u99A7"],[195078,1,"\u99C2"],[195079,1,"\u99FE"],[195080,1,"\u4BCE"],[195081,1,"\uD866\uDF30"],[195082,1,"\u9B12"],[195083,1,"\u9C40"],[195084,1,"\u9CFD"],[195085,1,"\u4CCE"],[195086,1,"\u4CED"],[195087,1,"\u9D67"],[195088,1,"\uD868\uDCCE"],[195089,1,"\u4CF8"],[195090,1,"\uD868\uDD05"],[195091,1,"\uD868\uDE0E"],[195092,1,"\uD868\uDE91"],[195093,1,"\u9EBB"],[195094,1,"\u4D56"],[195095,1,"\u9EF9"],[195096,1,"\u9EFE"],[195097,1,"\u9F05"],[195098,1,"\u9F0F"],[195099,1,"\u9F16"],[195100,1,"\u9F3B"],[195101,1,"\uD869\uDE00"],[[195102,196605],3],[[196606,196607],3],[[196608,201546],2],[[201547,201551],3],[[201552,205743],2],[[205744,262141],3],[[262142,262143],3],[[262144,327677],3],[[327678,327679],3],[[327680,393213],3],[[393214,393215],3],[[393216,458749],3],[[458750,458751],3],[[458752,524285],3],[[524286,524287],3],[[524288,589821],3],[[589822,589823],3],[[589824,655357],3],[[655358,655359],3],[[655360,720893],3],[[720894,720895],3],[[720896,786429],3],[[786430,786431],3],[[786432,851965],3],[[851966,851967],3],[[851968,917501],3],[[917502,917503],3],[917504,3],[917505,3],[[917506,917535],3],[[917536,917631],3],[[917632,917759],3],[[917760,917999],7],[[918000,983037],3],[[983038,983039],3],[[983040,1048573],3],[[1048574,1048575],3],[[1048576,1114109],3],[[1114110,1114111],3]]});var bF1=O((i00,kF1)=>{i00.STATUS_MAPPING={mapped:1,valid:2,disallowed:3,deviation:6,ignored:7}});var yF1=O((Xr0,vF1)=>{var vx=jF1(),E5=SF1(),xF1=_F1(),{STATUS_MAPPING:fX}=bF1();function fx($){return/[^\x00-\x7F]/u.test($)}function gF1($){let F=0,A=xF1.length-1;while(F<=A){let J=Math.floor((F+A)/2),X=xF1[J],Y=Array.isArray(X[0])?X[0][0]:X[0],W=Array.isArray(X[0])?X[0][1]:X[0];if(Y<=$&&W>=$)return X.slice(1);else if(Y>$)A=J-1;else F=J+1}return null}function r00($,{transitionalProcessing:F}){let A="";for(let J of $){let[X,Y]=gF1(J.codePointAt(0));switch(X){case fX.disallowed:A+=J;break;case fX.ignored:break;case fX.mapped:if(F&&J==="\u1E9E")A+="ss";else A+=Y;break;case fX.deviation:if(F)A+=Y;else A+=J;break;case fX.valid:A+=J;break}}return A}function a00($,{checkHyphens:F,checkBidi:A,checkJoiners:J,transitionalProcessing:X,useSTD3ASCIIRules:Y,isBidi:W}){if($.length===0)return!0;if($.normalize("NFC")!==$)return!1;let Z=Array.from($);if(F){if(Z[2]==="-"&&Z[3]==="-"||($.startsWith("-")||$.endsWith("-")))return!1}if(!F){if($.startsWith("xn--"))return!1}if($.includes("."))return!1;if(E5.combiningMarks.test(Z[0]))return!1;for(let D of Z){let G=D.codePointAt(0),[z]=gF1(G);if(X){if(z!==fX.valid)return!1}else if(z!==fX.valid&&z!==fX.deviation)return!1;if(Y&&G<=127){if(!/^(?:[a-z]|[0-9]|-)$/u.test(D))return!1}}if(J){let D=0;for(let[G,z]of Z.entries())if(z==="\u200C"||z==="\u200D"){if(G>0){if(E5.combiningClassVirama.test(Z[G-1]))continue;if(z==="\u200C"){let H=Z.indexOf("\u200C",G+1),U=H<0?Z.slice(D):Z.slice(D,H);if(E5.validZWNJ.test(U.join(""))){D=G+1;continue}}}return!1}}if(A&&W){let D;if(E5.bidiS1LTR.test(Z[0]))D=!1;else if(E5.bidiS1RTL.test(Z[0]))D=!0;else return!1;if(D){if(!E5.bidiS2.test($)||!E5.bidiS3.test($)||E5.bidiS4EN.test($)&&E5.bidiS4AN.test($))return!1}else if(!E5.bidiS5.test($)||!E5.bidiS6.test($))return!1}return!0}function t00($){let F=$.map((A)=>{if(A.startsWith("xn--"))try{return vx.decode(A.substring(4))}catch{return""}return A}).join(".");return E5.bidiDomain.test(F)}function fF1($,F){let A=r00($,F);A=A.normalize("NFC");let J=A.split("."),X=t00(J),Y=!1;for(let[W,Z]of J.entries()){let D=Z,G=F.transitionalProcessing;if(D.startsWith("xn--")){if(fx(D)){Y=!0;continue}try{D=vx.decode(D.substring(4))}catch{if(!F.ignoreInvalidPunycode){Y=!0;continue}}if(J[W]=D,D===""||!fx(D))Y=!0;G=!1}if(Y)continue;if(!a00(D,{...F,transitionalProcessing:G,isBidi:X}))Y=!0}return{string:J.join("."),error:Y}}function s00($,{checkHyphens:F=!1,checkBidi:A=!1,checkJoiners:J=!1,useSTD3ASCIIRules:X=!1,verifyDNSLength:Y=!1,transitionalProcessing:W=!1,ignoreInvalidPunycode:Z=!1}={}){let D=fF1($,{checkHyphens:F,checkBidi:A,checkJoiners:J,useSTD3ASCIIRules:X,transitionalProcessing:W,ignoreInvalidPunycode:Z}),G=D.string.split(".");if(G=G.map((z)=>{if(fx(z))try{return`xn--${vx.encode(z)}`}catch{D.error=!0}return z}),Y){let z=G.join(".").length;if(z>253||z===0)D.error=!0;for(let H=0;H<G.length;++H)if(G[H].length>63||G[H].length===0){D.error=!0;break}}if(D.error)return null;return G.join(".")}function o00($,{checkHyphens:F=!1,checkBidi:A=!1,checkJoiners:J=!1,useSTD3ASCIIRules:X=!1,transitionalProcessing:Y=!1,ignoreInvalidPunycode:W=!1}={}){let Z=fF1($,{checkHyphens:F,checkBidi:A,checkJoiners:J,useSTD3ASCIIRules:X,transitionalProcessing:Y,ignoreInvalidPunycode:W});return{domain:Z.string,error:Z.error}}vF1.exports={toASCII:s00,toUnicode:o00}});var ux=O((Yr0,hF1)=>{function yx($){return $>=48&&$<=57}function uF1($){return $>=65&&$<=90||$>=97&&$<=122}function e00($){return uF1($)||yx($)}function $60($){return yx($)||$>=65&&$<=70||$>=97&&$<=102}hF1.exports={isASCIIDigit:yx,isASCIIAlpha:uF1,isASCIIAlphanumeric:e00,isASCIIHex:$60}});var rN=O((Wr0,mF1)=>{var F60=new TextEncoder,A60=new TextDecoder("utf-8",{ignoreBOM:!0});function J60($){return F60.encode($)}function X60($){return A60.decode($)}mF1.exports={utf8Encode:J60,utf8DecodeWithoutBOM:X60}});var aN=O((Zr0,rF1)=>{var{isASCIIHex:dF1}=ux(),{utf8Encode:cF1}=rN();function $6($){return $.codePointAt(0)}function Y60($){let F=$.toString(16).toUpperCase();if(F.length===1)F=`0${F}`;return`%${F}`}function lF1($){let F=new Uint8Array($.byteLength),A=0;for(let J=0;J<$.byteLength;++J){let X=$[J];if(X!==37)F[A++]=X;else if(X===37&&(!dF1($[J+1])||!dF1($[J+2])))F[A++]=X;else{let Y=parseInt(String.fromCodePoint($[J+1],$[J+2]),16);F[A++]=Y,J+=2}}return F.slice(0,A)}function W60($){let F=cF1($);return lF1(F)}function hx($){return $<=31||$>126}var Z60=new Set([$6(" "),$6('"'),$6("<"),$6(">"),$6("`")]);function D60($){return hx($)||Z60.has($)}var G60=new Set([$6(" "),$6('"'),$6("#"),$6("<"),$6(">")]);function mx($){return hx($)||G60.has($)}function z60($){return mx($)||$===$6("'")}var H60=new Set([$6("?"),$6("`"),$6("{"),$6("}"),$6("^")]);function pF1($){return mx($)||H60.has($)}var U60=new Set([$6("/"),$6(":"),$6(";"),$6("="),$6("@"),$6("["),$6("\\"),$6("]"),$6("|")]);function iF1($){return pF1($)||U60.has($)}var Q60=new Set([$6("$"),$6("%"),$6("&"),$6("+"),$6(",")]);function K60($){return iF1($)||Q60.has($)}var B60=new Set([$6("!"),$6("'"),$6("("),$6(")"),$6("~")]);function w60($){return K60($)||B60.has($)}function nF1($,F){let A=cF1($),J="";for(let X of A)if(!F(X))J+=String.fromCharCode(X);else J+=Y60(X);return J}function q60($,F){return nF1(String.fromCodePoint($),F)}function L60($,F,A=!1){let J="";for(let X of $)if(A&&X===" ")J+="+";else J+=nF1(X,F);return J}rF1.exports={isC0ControlPercentEncode:hx,isFragmentPercentEncode:D60,isQueryPercentEncode:mx,isSpecialQueryPercentEncode:z60,isPathPercentEncode:pF1,isUserinfoPercentEncode:iF1,isURLEncodedPercentEncode:w60,percentDecodeString:W60,percentDecodeBytes:lF1,utf8PercentEncodeString:L60,utf8PercentEncodeCodePoint:q60}});var nx=O((p60,s8)=>{var E60=yF1(),p9=ux(),{utf8DecodeWithoutBOM:V60}=rN(),{percentDecodeString:N60,utf8PercentEncodeCodePoint:sN,utf8PercentEncodeString:oN,isC0ControlPercentEncode:eF1,isFragmentPercentEncode:C60,isQueryPercentEncode:M60,isSpecialQueryPercentEncode:P60,isPathPercentEncode:R60,isUserinfoPercentEncode:lx}=aN();function T1($){return $.codePointAt(0)}var $A1={ftp:21,file:null,http:80,https:443,ws:80,wss:443},j0=Symbol("failure");function aF1($){return[...$].length}function tF1($,F){let A=$[F];return isNaN(A)?void 0:String.fromCodePoint(A)}function sF1($){return $==="."||$.toLowerCase()==="%2e"}function I60($){return $=$.toLowerCase(),$===".."||$==="%2e."||$===".%2e"||$==="%2e%2e"}function T60($,F){return p9.isASCIIAlpha($)&&(F===T1(":")||F===T1("|"))}function FA1($){return $.length===2&&p9.isASCIIAlpha($.codePointAt(0))&&($[1]===":"||$[1]==="|")}function j60($){return $.length===2&&p9.isASCIIAlpha($.codePointAt(0))&&$[1]===":"}function AA1($){return $.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|<|>|\?|@|\[|\\|\]|\^|\|/u)!==-1}function O60($){return AA1($)||$.search(/[\u0000-\u001F]|%|\u007F/u)!==-1}function tN($){return $A1[$]!==void 0}function l9($){return tN($.scheme)}function dx($){return!tN($.scheme)}function JA1($){return $A1[$]}function XA1($){if($==="")return j0;let F=10;if($.length>=2&&$.charAt(0)==="0"&&$.charAt(1).toLowerCase()==="x")$=$.substring(2),F=16;else if($.length>=2&&$.charAt(0)==="0")$=$.substring(1),F=8;if($==="")return 0;let A=/[^0-7]/u;if(F===10)A=/[^0-9]/u;if(F===16)A=/[^0-9A-Fa-f]/u;if(A.test($))return j0;return parseInt($,F)}function S60($){let F=$.split(".");if(F[F.length-1]===""){if(F.length>1)F.pop()}if(F.length>4)return j0;let A=[];for(let Y of F){let W=XA1(Y);if(W===j0)return j0;A.push(W)}for(let Y=0;Y<A.length-1;++Y)if(A[Y]>255)return j0;if(A[A.length-1]>=256**(5-A.length))return j0;let J=A.pop(),X=0;for(let Y of A)J+=Y*256**(3-X),++X;return J}function _60($){let F="",A=$;for(let J=1;J<=4;++J){if(F=String(A%256)+F,J!==4)F=`.${F}`;A=Math.floor(A/256)}return F}function k60($){let F=[0,0,0,0,0,0,0,0],A=0,J=null,X=0;if($=Array.from($,(Y)=>Y.codePointAt(0)),$[X]===T1(":")){if($[X+1]!==T1(":"))return j0;X+=2,++A,J=A}while(X<$.length){if(A===8)return j0;if($[X]===T1(":")){if(J!==null)return j0;++X,++A,J=A;continue}let Y=0,W=0;while(W<4&&p9.isASCIIHex($[X]))Y=Y*16+parseInt(tF1($,X),16),++X,++W;if($[X]===T1(".")){if(W===0)return j0;if(X-=W,A>6)return j0;let Z=0;while($[X]!==void 0){let D=null;if(Z>0)if($[X]===T1(".")&&Z<4)++X;else return j0;if(!p9.isASCIIDigit($[X]))return j0;while(p9.isASCIIDigit($[X])){let G=parseInt(tF1($,X));if(D===null)D=G;else if(D===0)return j0;else D=D*10+G;if(D>255)return j0;++X}if(F[A]=F[A]*256+D,++Z,Z===2||Z===4)++A}if(Z!==4)return j0;break}else if($[X]===T1(":")){if(++X,$[X]===void 0)return j0}else if($[X]!==void 0)return j0;F[A]=Y,++A}if(J!==null){let Y=A-J;A=7;while(A!==0&&Y>0){let W=F[J+Y-1];F[J+Y-1]=F[A],F[A]=W,--A,--Y}}else if(J===null&&A!==8)return j0;return F}function b60($){let F="",A=f60($),J=!1;for(let X=0;X<=7;++X){if(J&&$[X]===0)continue;else if(J)J=!1;if(A===X){F+=X===0?"::":":",J=!0;continue}if(F+=$[X].toString(16),X!==7)F+=":"}return F}function cx($,F=!1){if($[0]==="["){if($[$.length-1]!=="]")return j0;return k60($.substring(1,$.length-1))}if(F)return g60($);let A=V60(N60($)),J=v60(A);if(J===j0)return j0;if(x60(J))return S60(J);return J}function x60($){let F=$.split(".");if(F[F.length-1]===""){if(F.length===1)return!1;F.pop()}let A=F[F.length-1];if(XA1(A)!==j0)return!0;if(/^[0-9]+$/u.test(A))return!0;return!1}function g60($){if(AA1($))return j0;return oN($,eF1)}function f60($){let F=null,A=1,J=null,X=0;for(let Y=0;Y<$.length;++Y)if($[Y]!==0){if(X>A)F=J,A=X;J=null,X=0}else{if(J===null)J=Y;++X}if(X>A)return J;return F}function px($){if(typeof $==="number")return _60($);if($ instanceof Array)return`[${b60($)}]`;return $}function v60($,F=!1){let A=E60.toASCII($,{checkHyphens:F,checkBidi:!0,checkJoiners:!0,useSTD3ASCIIRules:F,transitionalProcessing:!1,verifyDNSLength:F,ignoreInvalidPunycode:!1});if(A===null)return j0;if(!F){if(A==="")return j0;if(O60(A))return j0}return A}function y60($){let F=0,A=$.length;for(;F<A;++F)if($.charCodeAt(F)>32)break;for(;A>F;--A)if($.charCodeAt(A-1)>32)break;return $.substring(F,A)}function u60($){return $.replace(/\u0009|\u000A|\u000D/ug,"")}function YA1($){let{path:F}=$;if(F.length===0)return;if($.scheme==="file"&&F.length===1&&m60(F[0]))return;F.pop()}function WA1($){return $.username!==""||$.password!==""}function h60($){return $.host===null||$.host===""||$.scheme==="file"}function eK($){return typeof $.path==="string"}function m60($){return/^[A-Za-z]:$/u.test($)}function w4($,F,A,J,X){if(this.pointer=0,this.input=$,this.base=F||null,this.encodingOverride=A||"utf-8",this.stateOverride=X,this.url=J,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null};let W=y60(this.input);if(W!==this.input)this.parseError=!0;this.input=W}let Y=u60(this.input);if(Y!==this.input)this.parseError=!0;this.input=Y,this.state=X||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=Array.from(this.input,(W)=>W.codePointAt(0));for(;this.pointer<=this.input.length;++this.pointer){let W=this.input[this.pointer],Z=isNaN(W)?void 0:String.fromCodePoint(W),D=this[`parse ${this.state}`](W,Z);if(!D)break;else if(D===j0){this.failure=!0;break}}}w4.prototype["parse scheme start"]=function(F,A){if(p9.isASCIIAlpha(F))this.buffer+=A.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,j0;return!0};w4.prototype["parse scheme"]=function(F,A){if(p9.isASCIIAlphanumeric(F)||F===T1("+")||F===T1("-")||F===T1("."))this.buffer+=A.toLowerCase();else if(F===T1(":")){if(this.stateOverride){if(l9(this.url)&&!tN(this.buffer))return!1;if(!l9(this.url)&&tN(this.buffer))return!1;if((WA1(this.url)||this.url.port!==null)&&this.buffer==="file")return!1;if(this.url.scheme==="file"&&this.url.host==="")return!1}if(this.url.scheme=this.buffer,this.stateOverride){if(this.url.port===JA1(this.url.scheme))this.url.port=null;return!1}if(this.buffer="",this.url.scheme==="file"){if(this.input[this.pointer+1]!==T1("/")||this.input[this.pointer+2]!==T1("/"))this.parseError=!0;this.state="file"}else if(l9(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme)this.state="special relative or authority";else if(l9(this.url))this.state="special authority slashes";else if(this.input[this.pointer+1]===T1("/"))this.state="path or authority",++this.pointer;else this.url.path="",this.state="opaque path"}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,j0;return!0};w4.prototype["parse no scheme"]=function(F){if(this.base===null||eK(this.base)&&F!==T1("#"))return j0;else if(eK(this.base)&&F===T1("#"))this.url.scheme=this.base.scheme,this.url.path=this.base.path,this.url.query=this.base.query,this.url.fragment="",this.state="fragment";else if(this.base.scheme==="file")this.state="file",--this.pointer;else this.state="relative",--this.pointer;return!0};w4.prototype["parse special relative or authority"]=function(F){if(F===T1("/")&&this.input[this.pointer+1]===T1("/"))this.state="special authority ignore slashes",++this.pointer;else this.parseError=!0,this.state="relative",--this.pointer;return!0};w4.prototype["parse path or authority"]=function(F){if(F===T1("/"))this.state="authority";else this.state="path",--this.pointer;return!0};w4.prototype["parse relative"]=function(F){if(this.url.scheme=this.base.scheme,F===T1("/"))this.state="relative slash";else if(l9(this.url)&&F===T1("\\"))this.parseError=!0,this.state="relative slash";else if(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,F===T1("?"))this.url.query="",this.state="query";else if(F===T1("#"))this.url.fragment="",this.state="fragment";else if(!isNaN(F))this.url.query=null,this.url.path.pop(),this.state="path",--this.pointer;return!0};w4.prototype["parse relative slash"]=function(F){if(l9(this.url)&&(F===T1("/")||F===T1("\\"))){if(F===T1("\\"))this.parseError=!0;this.state="special authority ignore slashes"}else if(F===T1("/"))this.state="authority";else this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer;return!0};w4.prototype["parse special authority slashes"]=function(F){if(F===T1("/")&&this.input[this.pointer+1]===T1("/"))this.state="special authority ignore slashes",++this.pointer;else this.parseError=!0,this.state="special authority ignore slashes",--this.pointer;return!0};w4.prototype["parse special authority ignore slashes"]=function(F){if(F!==T1("/")&&F!==T1("\\"))this.state="authority",--this.pointer;else this.parseError=!0;return!0};w4.prototype["parse authority"]=function(F,A){if(F===T1("@")){if(this.parseError=!0,this.atFlag)this.buffer=`%40${this.buffer}`;this.atFlag=!0;let J=aF1(this.buffer);for(let X=0;X<J;++X){let Y=this.buffer.codePointAt(X);if(Y===T1(":")&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let W=sN(Y,lx);if(this.passwordTokenSeenFlag)this.url.password+=W;else this.url.username+=W}this.buffer=""}else if(isNaN(F)||F===T1("/")||F===T1("?")||F===T1("#")||l9(this.url)&&F===T1("\\")){if(this.atFlag&&this.buffer==="")return this.parseError=!0,j0;this.pointer-=aF1(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=A;return!0};w4.prototype["parse hostname"]=w4.prototype["parse host"]=function(F,A){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(F===T1(":")&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,j0;if(this.stateOverride==="hostname")return!1;let J=cx(this.buffer,dx(this.url));if(J===j0)return j0;this.url.host=J,this.buffer="",this.state="port"}else if(isNaN(F)||F===T1("/")||F===T1("?")||F===T1("#")||l9(this.url)&&F===T1("\\")){if(--this.pointer,l9(this.url)&&this.buffer==="")return this.parseError=!0,j0;else if(this.stateOverride&&this.buffer===""&&(WA1(this.url)||this.url.port!==null))return this.parseError=!0,!1;let J=cx(this.buffer,dx(this.url));if(J===j0)return j0;if(this.url.host=J,this.buffer="",this.state="path start",this.stateOverride)return!1}else{if(F===T1("["))this.arrFlag=!0;else if(F===T1("]"))this.arrFlag=!1;this.buffer+=A}return!0};w4.prototype["parse port"]=function(F,A){if(p9.isASCIIDigit(F))this.buffer+=A;else if(isNaN(F)||F===T1("/")||F===T1("?")||F===T1("#")||l9(this.url)&&F===T1("\\")||this.stateOverride){if(this.buffer!==""){let J=parseInt(this.buffer);if(J>65535)return this.parseError=!0,j0;this.url.port=J===JA1(this.url.scheme)?null:J,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,j0;return!0};var d60=new Set([T1("/"),T1("\\"),T1("?"),T1("#")]);function ZA1($,F){let A=$.length-F;return A>=2&&T60($[F],$[F+1])&&(A===2||d60.has($[F+2]))}w4.prototype["parse file"]=function(F){if(this.url.scheme="file",this.url.host="",F===T1("/")||F===T1("\\")){if(F===T1("\\"))this.parseError=!0;this.state="file slash"}else if(this.base!==null&&this.base.scheme==="file"){if(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,F===T1("?"))this.url.query="",this.state="query";else if(F===T1("#"))this.url.fragment="",this.state="fragment";else if(!isNaN(F)){if(this.url.query=null,!ZA1(this.input,this.pointer))YA1(this.url);else this.parseError=!0,this.url.path=[];this.state="path",--this.pointer}}else this.state="path",--this.pointer;return!0};w4.prototype["parse file slash"]=function(F){if(F===T1("/")||F===T1("\\")){if(F===T1("\\"))this.parseError=!0;this.state="file host"}else{if(this.base!==null&&this.base.scheme==="file"){if(!ZA1(this.input,this.pointer)&&j60(this.base.path[0]))this.url.path.push(this.base.path[0]);this.url.host=this.base.host}this.state="path",--this.pointer}return!0};w4.prototype["parse file host"]=function(F,A){if(isNaN(F)||F===T1("/")||F===T1("\\")||F===T1("?")||F===T1("#"))if(--this.pointer,!this.stateOverride&&FA1(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let J=cx(this.buffer,dx(this.url));if(J===j0)return j0;if(J==="localhost")J="";if(this.url.host=J,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=A;return!0};w4.prototype["parse path start"]=function(F){if(l9(this.url)){if(F===T1("\\"))this.parseError=!0;if(this.state="path",F!==T1("/")&&F!==T1("\\"))--this.pointer}else if(!this.stateOverride&&F===T1("?"))this.url.query="",this.state="query";else if(!this.stateOverride&&F===T1("#"))this.url.fragment="",this.state="fragment";else if(F!==void 0){if(this.state="path",F!==T1("/"))--this.pointer}else if(this.stateOverride&&this.url.host===null)this.url.path.push("");return!0};w4.prototype["parse path"]=function(F){if(isNaN(F)||F===T1("/")||l9(this.url)&&F===T1("\\")||!this.stateOverride&&(F===T1("?")||F===T1("#"))){if(l9(this.url)&&F===T1("\\"))this.parseError=!0;if(I60(this.buffer)){if(YA1(this.url),F!==T1("/")&&!(l9(this.url)&&F===T1("\\")))this.url.path.push("")}else if(sF1(this.buffer)&&F!==T1("/")&&!(l9(this.url)&&F===T1("\\")))this.url.path.push("");else if(!sF1(this.buffer)){if(this.url.scheme==="file"&&this.url.path.length===0&&FA1(this.buffer))this.buffer=`${this.buffer[0]}:`;this.url.path.push(this.buffer)}if(this.buffer="",F===T1("?"))this.url.query="",this.state="query";if(F===T1("#"))this.url.fragment="",this.state="fragment"}else{if(F===T1("%")&&(!p9.isASCIIHex(this.input[this.pointer+1])||!p9.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.buffer+=sN(F,R60)}return!0};w4.prototype["parse opaque path"]=function(F){if(F===T1("?"))this.url.query="",this.state="query";else if(F===T1("#"))this.url.fragment="",this.state="fragment";else if(F===T1(" ")){let A=this.input[this.pointer+1];if(A===T1("?")||A===T1("#"))this.url.path+="%20";else this.url.path+=" "}else{if(!isNaN(F)&&F!==T1("%"))this.parseError=!0;if(F===T1("%")&&(!p9.isASCIIHex(this.input[this.pointer+1])||!p9.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;if(!isNaN(F))this.url.path+=sN(F,eF1)}return!0};w4.prototype["parse query"]=function(F,A){if(!l9(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")this.encodingOverride="utf-8";if(!this.stateOverride&&F===T1("#")||isNaN(F)){let J=l9(this.url)?P60:M60;if(this.url.query+=oN(this.buffer,J),this.buffer="",F===T1("#"))this.url.fragment="",this.state="fragment"}else if(!isNaN(F)){if(F===T1("%")&&(!p9.isASCIIHex(this.input[this.pointer+1])||!p9.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.buffer+=A}return!0};w4.prototype["parse fragment"]=function(F){if(!isNaN(F)){if(F===T1("%")&&(!p9.isASCIIHex(this.input[this.pointer+1])||!p9.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.url.fragment+=sN(F,C60)}return!0};function c60($,F){let A=`${$.scheme}:`;if($.host!==null){if(A+="//",$.username!==""||$.password!==""){if(A+=$.username,$.password!=="")A+=`:${$.password}`;A+="@"}if(A+=px($.host),$.port!==null)A+=`:${$.port}`}if($.host===null&&!eK($)&&$.path.length>1&&$.path[0]==="")A+="/.";if(A+=ix($),$.query!==null)A+=`?${$.query}`;if(!F&&$.fragment!==null)A+=`#${$.fragment}`;return A}function l60($){let F=`${$.scheme}://`;if(F+=px($.host),$.port!==null)F+=`:${$.port}`;return F}function ix($){if(eK($))return $.path;let F="";for(let A of $.path)F+=`/${A}`;return F}p60.serializeURL=c60;p60.serializePath=ix;p60.serializeURLOrigin=function($){switch($.scheme){case"blob":{let F=p60.parseURL(ix($));if(F===null)return"null";if(F.scheme!=="http"&&F.scheme!=="https")return"null";return p60.serializeURLOrigin(F)}case"ftp":case"http":case"https":case"ws":case"wss":return l60({scheme:$.scheme,host:$.host,port:$.port});case"file":return"null";default:return"null"}};p60.basicURLParse=function($,F){if(F===void 0)F={};let A=new w4($,F.baseURL,F.encodingOverride,F.url,F.stateOverride);if(A.failure)return null;return A.url};p60.setTheUsername=function($,F){$.username=oN(F,lx)};p60.setThePassword=function($,F){$.password=oN(F,lx)};p60.serializeHost=px;p60.cannotHaveAUsernamePasswordPort=h60;p60.hasAnOpaquePath=eK;p60.serializeInteger=function($){return String($)};p60.parseURL=function($,F){if(F===void 0)F={};return p60.basicURLParse($,{baseURL:F.baseURL,encodingOverride:F.encodingOverride})}});var rx=O((Dr0,BA1)=>{var{utf8Encode:F20,utf8DecodeWithoutBOM:GA1}=rN(),{percentDecodeBytes:zA1,utf8PercentEncodeString:HA1,isURLEncodedPercentEncode:UA1}=aN();function QA1($){return $.codePointAt(0)}function A20($){let F=Y20($,QA1("&")),A=[];for(let J of F){if(J.length===0)continue;let X,Y,W=J.indexOf(QA1("="));if(W>=0)X=J.slice(0,W),Y=J.slice(W+1);else X=J,Y=new Uint8Array(0);X=KA1(X,43,32),Y=KA1(Y,43,32);let Z=GA1(zA1(X)),D=GA1(zA1(Y));A.push([Z,D])}return A}function J20($){return A20(F20($))}function X20($){let F="";for(let[A,J]of $.entries()){let X=HA1(J[0],UA1,!0),Y=HA1(J[1],UA1,!0);if(A!==0)F+="&";F+=`${X}=${Y}`}return F}function Y20($,F){let A=[],J=0,X=$.indexOf(F);while(X>=0)A.push($.slice(J,X)),J=X+1,X=$.indexOf(F,J);if(J!==$.length)A.push($.slice(J));return A}function KA1($,F,A){let J=$.indexOf(F);while(J>=0)$[J]=A,J=$.indexOf(F,J+1);return $}BA1.exports={parseUrlencodedString:J20,serializeUrlencoded:X20}});var qA1=O((W20)=>{var wA1=pN(),eN=nN();W20.convert=($,F,{context:A="The provided value"}={})=>{if(typeof F!=="function")throw new $.TypeError(A+" is not a function");function J(...X){let Y=eN.tryWrapperForImpl(this),W;for(let Z=0;Z<X.length;Z++)X[Z]=eN.tryWrapperForImpl(X[Z]);return W=Reflect.apply(F,Y,X),W=wA1.any(W,{context:A,globals:$}),W}return J.construct=(...X)=>{for(let W=0;W<X.length;W++)X[W]=eN.tryWrapperForImpl(X[W]);let Y=Reflect.construct(F,X);return Y=wA1.any(Y,{context:A,globals:$}),Y},J[eN.wrapperSymbol]=F,J.objectReference=F,J}});var LA1=O((D20)=>{var ax=rx();D20.implementation=class{constructor(F,A,{doNotStripQMark:J=!1}){let X=A[0];if(this._list=[],this._url=null,!J&&typeof X==="string"&&X[0]==="?")X=X.slice(1);if(Array.isArray(X))for(let Y of X){if(Y.length!==2)throw TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element does not contain exactly two elements.");this._list.push([Y[0],Y[1]])}else if(typeof X==="object"&&Object.getPrototypeOf(X)===null)for(let Y of Object.keys(X)){let W=X[Y];this._list.push([Y,W])}else this._list=ax.parseUrlencodedString(X)}_updateSteps(){if(this._url!==null){let F=ax.serializeUrlencoded(this._list);if(F==="")F=null;this._url._url.query=F}}get size(){return this._list.length}append(F,A){this._list.push([F,A]),this._updateSteps()}delete(F,A){let J=0;while(J<this._list.length)if(this._list[J][0]===F&&(A===void 0||this._list[J][1]===A))this._list.splice(J,1);else J++;this._updateSteps()}get(F){for(let A of this._list)if(A[0]===F)return A[1];return null}getAll(F){let A=[];for(let J of this._list)if(J[0]===F)A.push(J[1]);return A}has(F,A){for(let J of this._list)if(J[0]===F&&(A===void 0||J[1]===A))return!0;return!1}set(F,A){let J=!1,X=0;while(X<this._list.length)if(this._list[X][0]===F)if(J)this._list.splice(X,1);else J=!0,this._list[X][1]=A,X++;else X++;if(!J)this._list.push([F,A]);this._updateSteps()}sort(){this._list.sort((F,A)=>{if(F[0]<A[0])return-1;if(F[0]>A[0])return 1;return 0}),this._updateSteps()}[Symbol.iterator](){return this._list[Symbol.iterator]()}toString(){return ax.serializeUrlencoded(this._list)}}});var sx=O((U20)=>{var R3=pN(),H2=nN(),z20=qA1(),EA1=H2.newObjectInRealm,k4=H2.implSymbol,VA1=H2.ctorRegistrySymbol;U20.is=($)=>{return H2.isObject($)&&H2.hasOwn($,k4)&&$[k4]instanceof vX.implementation};U20.isImpl=($)=>{return H2.isObject($)&&$ instanceof vX.implementation};U20.convert=($,F,{context:A="The provided value"}={})=>{if(U20.is(F))return H2.implForWrapper(F);throw new $.TypeError(`${A} is not of type 'URLSearchParams'.`)};U20.createDefaultIterator=($,F,A)=>{let X=$[VA1]["URLSearchParams Iterator"],Y=Object.create(X);return Object.defineProperty(Y,H2.iterInternalSymbol,{value:{target:F,kind:A,index:0},configurable:!0}),Y};function NA1($,F){let A;if(F!==void 0)A=F.prototype;if(!H2.isObject(A))A=$[VA1].URLSearchParams.prototype;return Object.create(A)}U20.create=($,F,A)=>{let J=NA1($);return U20.setup(J,$,F,A)};U20.createImpl=($,F,A)=>{let J=U20.create($,F,A);return H2.implForWrapper(J)};U20._internalSetup=($,F)=>{};U20.setup=($,F,A=[],J={})=>{if(J.wrapper=$,U20._internalSetup($,F),Object.defineProperty($,k4,{value:new vX.implementation(F,A,J),configurable:!0}),$[k4][H2.wrapperSymbol]=$,vX.init)vX.init($[k4]);return $};U20.new=($,F)=>{let A=NA1($,F);if(U20._internalSetup(A,$),Object.defineProperty(A,k4,{value:Object.create(vX.implementation.prototype),configurable:!0}),A[k4][H2.wrapperSymbol]=A,vX.init)vX.init(A[k4]);return A[k4]};var H20=new Set(["Window","Worker"]);U20.install=($,F)=>{if(!F.some((X)=>H20.has(X)))return;let A=H2.initCtorRegistry($);class J{constructor(){let X=[];{let Y=arguments[0];if(Y!==void 0)if(H2.isObject(Y))if(Y[Symbol.iterator]!==void 0)if(!H2.isObject(Y))throw new $.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence is not an iterable object.");else{let W=[],Z=Y;for(let D of Z){if(!H2.isObject(D))throw new $.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element is not an iterable object.");else{let G=[],z=D;for(let H of z)H=R3.USVString(H,{context:"Failed to construct 'URLSearchParams': parameter 1 sequence's element's element",globals:$}),G.push(H);D=G}W.push(D)}Y=W}else if(!H2.isObject(Y))throw new $.TypeError("Failed to construct 'URLSearchParams': parameter 1 record is not an object.");else{let W=Object.create(null);for(let Z of Reflect.ownKeys(Y)){let D=Object.getOwnPropertyDescriptor(Y,Z);if(D&&D.enumerable){let G=Z;G=R3.USVString(G,{context:"Failed to construct 'URLSearchParams': parameter 1 record's key",globals:$});let z=Y[Z];z=R3.USVString(z,{context:"Failed to construct 'URLSearchParams': parameter 1 record's value",globals:$}),W[G]=z}}Y=W}else Y=R3.USVString(Y,{context:"Failed to construct 'URLSearchParams': parameter 1",globals:$});else Y="";X.push(Y)}return U20.setup(Object.create(new.target.prototype),$,X)}append(X,Y){let W=this!==null&&this!==void 0?this:$;if(!U20.is(W))throw new $.TypeError("'append' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new $.TypeError(`Failed to execute 'append' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let Z=[];{let D=arguments[0];D=R3.USVString(D,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 1",globals:$}),Z.push(D)}{let D=arguments[1];D=R3.USVString(D,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 2",globals:$}),Z.push(D)}return H2.tryWrapperForImpl(W[k4].append(...Z))}delete(X){let Y=this!==null&&this!==void 0?this:$;if(!U20.is(Y))throw new $.TypeError("'delete' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new $.TypeError(`Failed to execute 'delete' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let W=[];{let Z=arguments[0];Z=R3.USVString(Z,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 1",globals:$}),W.push(Z)}{let Z=arguments[1];if(Z!==void 0)Z=R3.USVString(Z,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 2",globals:$});W.push(Z)}return H2.tryWrapperForImpl(Y[k4].delete(...W))}get(X){let Y=this!==null&&this!==void 0?this:$;if(!U20.is(Y))throw new $.TypeError("'get' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new $.TypeError(`Failed to execute 'get' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let W=[];{let Z=arguments[0];Z=R3.USVString(Z,{context:"Failed to execute 'get' on 'URLSearchParams': parameter 1",globals:$}),W.push(Z)}return Y[k4].get(...W)}getAll(X){let Y=this!==null&&this!==void 0?this:$;if(!U20.is(Y))throw new $.TypeError("'getAll' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new $.TypeError(`Failed to execute 'getAll' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let W=[];{let Z=arguments[0];Z=R3.USVString(Z,{context:"Failed to execute 'getAll' on 'URLSearchParams': parameter 1",globals:$}),W.push(Z)}return H2.tryWrapperForImpl(Y[k4].getAll(...W))}has(X){let Y=this!==null&&this!==void 0?this:$;if(!U20.is(Y))throw new $.TypeError("'has' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new $.TypeError(`Failed to execute 'has' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let W=[];{let Z=arguments[0];Z=R3.USVString(Z,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 1",globals:$}),W.push(Z)}{let Z=arguments[1];if(Z!==void 0)Z=R3.USVString(Z,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 2",globals:$});W.push(Z)}return Y[k4].has(...W)}set(X,Y){let W=this!==null&&this!==void 0?this:$;if(!U20.is(W))throw new $.TypeError("'set' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new $.TypeError(`Failed to execute 'set' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let Z=[];{let D=arguments[0];D=R3.USVString(D,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 1",globals:$}),Z.push(D)}{let D=arguments[1];D=R3.USVString(D,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 2",globals:$}),Z.push(D)}return H2.tryWrapperForImpl(W[k4].set(...Z))}sort(){let X=this!==null&&this!==void 0?this:$;if(!U20.is(X))throw new $.TypeError("'sort' called on an object that is not a valid instance of URLSearchParams.");return H2.tryWrapperForImpl(X[k4].sort())}toString(){let X=this!==null&&this!==void 0?this:$;if(!U20.is(X))throw new $.TypeError("'toString' called on an object that is not a valid instance of URLSearchParams.");return X[k4].toString()}keys(){if(!U20.is(this))throw new $.TypeError("'keys' called on an object that is not a valid instance of URLSearchParams.");return U20.createDefaultIterator($,this,"key")}values(){if(!U20.is(this))throw new $.TypeError("'values' called on an object that is not a valid instance of URLSearchParams.");return U20.createDefaultIterator($,this,"value")}entries(){if(!U20.is(this))throw new $.TypeError("'entries' called on an object that is not a valid instance of URLSearchParams.");return U20.createDefaultIterator($,this,"key+value")}forEach(X){if(!U20.is(this))throw new $.TypeError("'forEach' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new $.TypeError("Failed to execute 'forEach' on 'iterable': 1 argument required, but only 0 present.");X=z20.convert($,X,{context:"Failed to execute 'forEach' on 'iterable': The callback provided as parameter 1"});let Y=arguments[1],W=Array.from(this[k4]),Z=0;while(Z<W.length){let[D,G]=W[Z].map(H2.tryWrapperForImpl);X.call(Y,G,D,this),W=Array.from(this[k4]),Z++}}get size(){let X=this!==null&&this!==void 0?this:$;if(!U20.is(X))throw new $.TypeError("'get size' called on an object that is not a valid instance of URLSearchParams.");return X[k4].size}}Object.defineProperties(J.prototype,{append:{enumerable:!0},delete:{enumerable:!0},get:{enumerable:!0},getAll:{enumerable:!0},has:{enumerable:!0},set:{enumerable:!0},sort:{enumerable:!0},toString:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0},forEach:{enumerable:!0},size:{enumerable:!0},[Symbol.toStringTag]:{value:"URLSearchParams",configurable:!0},[Symbol.iterator]:{value:J.prototype.entries,configurable:!0,writable:!0}}),A.URLSearchParams=J,A["URLSearchParams Iterator"]=Object.create(A["%IteratorPrototype%"],{[Symbol.toStringTag]:{configurable:!0,value:"URLSearchParams Iterator"}}),H2.define(A["URLSearchParams Iterator"],{next(){let X=this&&this[H2.iterInternalSymbol];if(!X)throw new $.TypeError("next() called on a value that is not a URLSearchParams iterator object");let{target:Y,kind:W,index:Z}=X,D=Array.from(Y[k4]),G=D.length;if(Z>=G)return EA1($,{value:void 0,done:!0});let z=D[Z];return X.index=Z+1,EA1($,H2.iteratorResult(z.map(H2.tryWrapperForImpl),W))}}),Object.defineProperty($,"URLSearchParams",{configurable:!0,writable:!0,value:J})};var vX=LA1()});var RA1=O((E20)=>{var A2=nx(),PA1=rx(),L20=sx();E20.implementation=class ${constructor(F,[A,J]){let X=null;if(J!==void 0){if(X=A2.basicURLParse(J),X===null)throw TypeError(`Invalid base URL: ${J}`)}let Y=A2.basicURLParse(A,{baseURL:X});if(Y===null)throw TypeError(`Invalid URL: ${A}`);let W=Y.query!==null?Y.query:"";this._url=Y,this._query=L20.createImpl(F,[W],{doNotStripQMark:!0}),this._query._url=this}static parse(F,A,J){try{return new $(F,[A,J])}catch{return null}}static canParse(F,A){let J=null;if(A!==void 0){if(J=A2.basicURLParse(A),J===null)return!1}if(A2.basicURLParse(F,{baseURL:J})===null)return!1;return!0}get href(){return A2.serializeURL(this._url)}set href(F){let A=A2.basicURLParse(F);if(A===null)throw TypeError(`Invalid URL: ${F}`);this._url=A,this._query._list.splice(0);let{query:J}=A;if(J!==null)this._query._list=PA1.parseUrlencodedString(J)}get origin(){return A2.serializeURLOrigin(this._url)}get protocol(){return`${this._url.scheme}:`}set protocol(F){A2.basicURLParse(`${F}:`,{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(F){if(A2.cannotHaveAUsernamePasswordPort(this._url))return;A2.setTheUsername(this._url,F)}get password(){return this._url.password}set password(F){if(A2.cannotHaveAUsernamePasswordPort(this._url))return;A2.setThePassword(this._url,F)}get host(){let F=this._url;if(F.host===null)return"";if(F.port===null)return A2.serializeHost(F.host);return`${A2.serializeHost(F.host)}:${A2.serializeInteger(F.port)}`}set host(F){if(A2.hasAnOpaquePath(this._url))return;A2.basicURLParse(F,{url:this._url,stateOverride:"host"})}get hostname(){if(this._url.host===null)return"";return A2.serializeHost(this._url.host)}set hostname(F){if(A2.hasAnOpaquePath(this._url))return;A2.basicURLParse(F,{url:this._url,stateOverride:"hostname"})}get port(){if(this._url.port===null)return"";return A2.serializeInteger(this._url.port)}set port(F){if(A2.cannotHaveAUsernamePasswordPort(this._url))return;if(F==="")this._url.port=null;else A2.basicURLParse(F,{url:this._url,stateOverride:"port"})}get pathname(){return A2.serializePath(this._url)}set pathname(F){if(A2.hasAnOpaquePath(this._url))return;this._url.path=[],A2.basicURLParse(F,{url:this._url,stateOverride:"path start"})}get search(){if(this._url.query===null||this._url.query==="")return"";return`?${this._url.query}`}set search(F){let A=this._url;if(F===""){A.query=null,this._query._list=[];return}let J=F[0]==="?"?F.substring(1):F;A.query="",A2.basicURLParse(J,{url:A,stateOverride:"query"}),this._query._list=PA1.parseUrlencodedString(J)}get searchParams(){return this._query}get hash(){if(this._url.fragment===null||this._url.fragment==="")return"";return`#${this._url.fragment}`}set hash(F){if(F===""){this._url.fragment=null;return}let A=F[0]==="#"?F.substring(1):F;this._url.fragment="",A2.basicURLParse(A,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var OA1=O((M20)=>{var L8=pN(),I3=nN(),V6=I3.implSymbol,N20=I3.ctorRegistrySymbol;M20.is=($)=>{return I3.isObject($)&&I3.hasOwn($,V6)&&$[V6]instanceof yF.implementation};M20.isImpl=($)=>{return I3.isObject($)&&$ instanceof yF.implementation};M20.convert=($,F,{context:A="The provided value"}={})=>{if(M20.is(F))return I3.implForWrapper(F);throw new $.TypeError(`${A} is not of type 'URL'.`)};function IA1($,F){let A;if(F!==void 0)A=F.prototype;if(!I3.isObject(A))A=$[N20].URL.prototype;return Object.create(A)}M20.create=($,F,A)=>{let J=IA1($);return M20.setup(J,$,F,A)};M20.createImpl=($,F,A)=>{let J=M20.create($,F,A);return I3.implForWrapper(J)};M20._internalSetup=($,F)=>{};M20.setup=($,F,A=[],J={})=>{if(J.wrapper=$,M20._internalSetup($,F),Object.defineProperty($,V6,{value:new yF.implementation(F,A,J),configurable:!0}),$[V6][I3.wrapperSymbol]=$,yF.init)yF.init($[V6]);return $};M20.new=($,F)=>{let A=IA1($,F);if(M20._internalSetup(A,$),Object.defineProperty(A,V6,{value:Object.create(yF.implementation.prototype),configurable:!0}),A[V6][I3.wrapperSymbol]=A,yF.init)yF.init(A[V6]);return A[V6]};var C20=new Set(["Window","Worker"]);M20.install=($,F)=>{if(!F.some((X)=>C20.has(X)))return;let A=I3.initCtorRegistry($);class J{constructor(X){if(arguments.length<1)throw new $.TypeError(`Failed to construct 'URL': 1 argument required, but only ${arguments.length} present.`);let Y=[];{let W=arguments[0];W=L8.USVString(W,{context:"Failed to construct 'URL': parameter 1",globals:$}),Y.push(W)}{let W=arguments[1];if(W!==void 0)W=L8.USVString(W,{context:"Failed to construct 'URL': parameter 2",globals:$});Y.push(W)}return M20.setup(Object.create(new.target.prototype),$,Y)}toJSON(){let X=this!==null&&this!==void 0?this:$;if(!M20.is(X))throw new $.TypeError("'toJSON' called on an object that is not a valid instance of URL.");return X[V6].toJSON()}get href(){let X=this!==null&&this!==void 0?this:$;if(!M20.is(X))throw new $.TypeError("'get href' called on an object that is not a valid instance of URL.");return X[V6].href}set href(X){let Y=this!==null&&this!==void 0?this:$;if(!M20.is(Y))throw new $.TypeError("'set href' called on an object that is not a valid instance of URL.");X=L8.USVString(X,{context:"Failed to set the 'href' property on 'URL': The provided value",globals:$}),Y[V6].href=X}toString(){let X=this;if(!M20.is(X))throw new $.TypeError("'toString' called on an object that is not a valid instance of URL.");return X[V6].href}get origin(){let X=this!==null&&this!==void 0?this:$;if(!M20.is(X))throw new $.TypeError("'get origin' called on an object that is not a valid instance of URL.");return X[V6].origin}get protocol(){let X=this!==null&&this!==void 0?this:$;if(!M20.is(X))throw new $.TypeError("'get protocol' called on an object that is not a valid instance of URL.");return X[V6].protocol}set protocol(X){let Y=this!==null&&this!==void 0?this:$;if(!M20.is(Y))throw new $.TypeError("'set protocol' called on an object that is not a valid instance of URL.");X=L8.USVString(X,{context:"Failed to set the 'protocol' property on 'URL': The provided value",globals:$}),Y[V6].protocol=X}get username(){let X=this!==null&&this!==void 0?this:$;if(!M20.is(X))throw new $.TypeError("'get username' called on an object that is not a valid instance of URL.");return X[V6].username}set username(X){let Y=this!==null&&this!==void 0?this:$;if(!M20.is(Y))throw new $.TypeError("'set username' called on an object that is not a valid instance of URL.");X=L8.USVString(X,{context:"Failed to set the 'username' property on 'URL': The provided value",globals:$}),Y[V6].username=X}get password(){let X=this!==null&&this!==void 0?this:$;if(!M20.is(X))throw new $.TypeError("'get password' called on an object that is not a valid instance of URL.");return X[V6].password}set password(X){let Y=this!==null&&this!==void 0?this:$;if(!M20.is(Y))throw new $.TypeError("'set password' called on an object that is not a valid instance of URL.");X=L8.USVString(X,{context:"Failed to set the 'password' property on 'URL': The provided value",globals:$}),Y[V6].password=X}get host(){let X=this!==null&&this!==void 0?this:$;if(!M20.is(X))throw new $.TypeError("'get host' called on an object that is not a valid instance of URL.");return X[V6].host}set host(X){let Y=this!==null&&this!==void 0?this:$;if(!M20.is(Y))throw new $.TypeError("'set host' called on an object that is not a valid instance of URL.");X=L8.USVString(X,{context:"Failed to set the 'host' property on 'URL': The provided value",globals:$}),Y[V6].host=X}get hostname(){let X=this!==null&&this!==void 0?this:$;if(!M20.is(X))throw new $.TypeError("'get hostname' called on an object that is not a valid instance of URL.");return X[V6].hostname}set hostname(X){let Y=this!==null&&this!==void 0?this:$;if(!M20.is(Y))throw new $.TypeError("'set hostname' called on an object that is not a valid instance of URL.");X=L8.USVString(X,{context:"Failed to set the 'hostname' property on 'URL': The provided value",globals:$}),Y[V6].hostname=X}get port(){let X=this!==null&&this!==void 0?this:$;if(!M20.is(X))throw new $.TypeError("'get port' called on an object that is not a valid instance of URL.");return X[V6].port}set port(X){let Y=this!==null&&this!==void 0?this:$;if(!M20.is(Y))throw new $.TypeError("'set port' called on an object that is not a valid instance of URL.");X=L8.USVString(X,{context:"Failed to set the 'port' property on 'URL': The provided value",globals:$}),Y[V6].port=X}get pathname(){let X=this!==null&&this!==void 0?this:$;if(!M20.is(X))throw new $.TypeError("'get pathname' called on an object that is not a valid instance of URL.");return X[V6].pathname}set pathname(X){let Y=this!==null&&this!==void 0?this:$;if(!M20.is(Y))throw new $.TypeError("'set pathname' called on an object that is not a valid instance of URL.");X=L8.USVString(X,{context:"Failed to set the 'pathname' property on 'URL': The provided value",globals:$}),Y[V6].pathname=X}get search(){let X=this!==null&&this!==void 0?this:$;if(!M20.is(X))throw new $.TypeError("'get search' called on an object that is not a valid instance of URL.");return X[V6].search}set search(X){let Y=this!==null&&this!==void 0?this:$;if(!M20.is(Y))throw new $.TypeError("'set search' called on an object that is not a valid instance of URL.");X=L8.USVString(X,{context:"Failed to set the 'search' property on 'URL': The provided value",globals:$}),Y[V6].search=X}get searchParams(){let X=this!==null&&this!==void 0?this:$;if(!M20.is(X))throw new $.TypeError("'get searchParams' called on an object that is not a valid instance of URL.");return I3.getSameObject(this,"searchParams",()=>{return I3.tryWrapperForImpl(X[V6].searchParams)})}get hash(){let X=this!==null&&this!==void 0?this:$;if(!M20.is(X))throw new $.TypeError("'get hash' called on an object that is not a valid instance of URL.");return X[V6].hash}set hash(X){let Y=this!==null&&this!==void 0?this:$;if(!M20.is(Y))throw new $.TypeError("'set hash' called on an object that is not a valid instance of URL.");X=L8.USVString(X,{context:"Failed to set the 'hash' property on 'URL': The provided value",globals:$}),Y[V6].hash=X}static parse(X){if(arguments.length<1)throw new $.TypeError(`Failed to execute 'parse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let Y=[];{let W=arguments[0];W=L8.USVString(W,{context:"Failed to execute 'parse' on 'URL': parameter 1",globals:$}),Y.push(W)}{let W=arguments[1];if(W!==void 0)W=L8.USVString(W,{context:"Failed to execute 'parse' on 'URL': parameter 2",globals:$});Y.push(W)}return I3.tryWrapperForImpl(yF.implementation.parse($,...Y))}static canParse(X){if(arguments.length<1)throw new $.TypeError(`Failed to execute 'canParse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let Y=[];{let W=arguments[0];W=L8.USVString(W,{context:"Failed to execute 'canParse' on 'URL': parameter 1",globals:$}),Y.push(W)}{let W=arguments[1];if(W!==void 0)W=L8.USVString(W,{context:"Failed to execute 'canParse' on 'URL': parameter 2",globals:$});Y.push(W)}return yF.implementation.canParse(...Y)}}if(Object.defineProperties(J.prototype,{toJSON:{enumerable:!0},href:{enumerable:!0},toString:{enumerable:!0},origin:{enumerable:!0},protocol:{enumerable:!0},username:{enumerable:!0},password:{enumerable:!0},host:{enumerable:!0},hostname:{enumerable:!0},port:{enumerable:!0},pathname:{enumerable:!0},search:{enumerable:!0},searchParams:{enumerable:!0},hash:{enumerable:!0},[Symbol.toStringTag]:{value:"URL",configurable:!0}}),Object.defineProperties(J,{parse:{enumerable:!0},canParse:{enumerable:!0}}),A.URL=J,Object.defineProperty($,"URL",{configurable:!0,writable:!0,value:J}),F.includes("Window"))Object.defineProperty($,"webkitURL",{configurable:!0,writable:!0,value:J})};var yF=RA1()});var SA1=O((_20)=>{var O20=OA1(),S20=sx();_20.URL=O20;_20.URLSearchParams=S20});var kA1=O((f20)=>{var{URL:x20,URLSearchParams:g20}=SA1(),K$=nx(),_A1=aN(),FC={Array,Object,Promise,String,TypeError};x20.install(FC,["Window"]);g20.install(FC,["Window"]);f20.URL=FC.URL;f20.URLSearchParams=FC.URLSearchParams;f20.parseURL=K$.parseURL;f20.basicURLParse=K$.basicURLParse;f20.serializeURL=K$.serializeURL;f20.serializePath=K$.serializePath;f20.serializeHost=K$.serializeHost;f20.serializeInteger=K$.serializeInteger;f20.serializeURLOrigin=K$.serializeURLOrigin;f20.setTheUsername=K$.setTheUsername;f20.setThePassword=K$.setThePassword;f20.cannotHaveAUsernamePasswordPort=K$.cannotHaveAUsernamePasswordPort;f20.hasAnOpaquePath=K$.hasAnOpaquePath;f20.percentDecodeString=_A1.percentDecodeString;f20.percentDecodeBytes=_A1.percentDecodeBytes});var xA1=O((uF)=>{var o20=uF&&uF.__createBinding||(Object.create?function($,F,A,J){if(J===void 0)J=A;var X=Object.getOwnPropertyDescriptor(F,A);if(!X||("get"in X?!F.__esModule:X.writable||X.configurable))X={enumerable:!0,get:function(){return F[A]}};Object.defineProperty($,J,X)}:function($,F,A,J){if(J===void 0)J=A;$[J]=F[A]}),e20=uF&&uF.__setModuleDefault||(Object.create?function($,F){Object.defineProperty($,"default",{enumerable:!0,value:F})}:function($,F){$.default=F}),$40=uF&&uF.__importStar||function(){var $=function(F){return $=Object.getOwnPropertyNames||function(A){var J=[];for(var X in A)if(Object.prototype.hasOwnProperty.call(A,X))J[J.length]=X;return J},$(F)};return function(F){if(F&&F.__esModule)return F;var A={};if(F!=null){for(var J=$(F),X=0;X<J.length;X++)if(J[X]!=="default")o20(A,F,J[X])}return e20(A,F),A}}();Object.defineProperty(uF,"__esModule",{value:!0});uF.redactValidConnectionString=F40;uF.redactConnectionString=A40;var bA1=$40(ex());function F40($,F){let A=$.clone(),J=F?.replacementString??"_credentials_",X=F?.redactUsernames??!0;if((A.username||A.password)&&X)A.username=J,A.password="";else if(A.password)A.password=J;if(A.searchParams.has("authMechanismProperties")){let Y=new bA1.CommaAndColonSeparatedRecord(A.searchParams.get("authMechanismProperties"));if(Y.get("AWS_SESSION_TOKEN"))Y.set("AWS_SESSION_TOKEN",J),A.searchParams.set("authMechanismProperties",Y.toString())}if(A.searchParams.has("tlsCertificateKeyFilePassword"))A.searchParams.set("tlsCertificateKeyFilePassword",J);if(A.searchParams.has("proxyUsername")&&X)A.searchParams.set("proxyUsername",J);if(A.searchParams.has("proxyPassword"))A.searchParams.set("proxyPassword",J);return A}function A40($,F){let A=F?.replacementString??"<credentials>",J=F?.redactUsernames??!0,X;try{X=new bA1.default($)}catch{}if(X)return F={...F,replacementString:"___credentials___"},X.redact(F).toString().replace(/___credentials___/g,A);let Y=A,W=[(Z)=>Z.replace(J?/(\/\/)(.*)(@)/g:/(\/\/[^@]*:)(.*)(@)/g,`$1${Y}$3`),(Z)=>Z.replace(/(AWS_SESSION_TOKEN(:|%3A))([^,&]+)/gi,`$1${Y}`),(Z)=>Z.replace(/(tlsCertificateKeyFilePassword=)([^&]+)/gi,`$1${Y}`),(Z)=>J?Z.replace(/(proxyUsername=)([^&]+)/gi,`$1${Y}`):Z,(Z)=>Z.replace(/(proxyPassword=)([^&]+)/gi,`$1${Y}`)];for(let Z of W)$=Z($);return $}});var ex=O((Fg)=>{Object.defineProperty(Fg,"__esModule",{value:!0});Fg.CommaAndColonSeparatedRecord=Fg.ConnectionString=Fg.redactConnectionString=void 0;var J40=kA1(),gA1=xA1();Object.defineProperty(Fg,"redactConnectionString",{enumerable:!0,get:function(){return gA1.redactConnectionString}});var $B="__this_is_a_placeholder__";function X40($){return $.startsWith("mongodb://")||$.startsWith("mongodb+srv://")}var Y40=/^(?<protocol>[^/]+):\/\/(?:(?<username>[^:@]*)(?::(?<password>[^@]*))?@)?(?<hosts>(?!:)[^/?@]*)(?<rest>.*)/;class $g extends Map{delete($){return super.delete(this._normalizeKey($))}get($){return super.get(this._normalizeKey($))}has($){return super.has(this._normalizeKey($))}set($,F){return super.set(this._normalizeKey($),F)}_normalizeKey($){$=`${$}`;for(let F of this.keys())if(F.toLowerCase()===$.toLowerCase()){$=F;break}return $}}function W40($){return class extends ${append(A,J){return super.append(this._normalizeKey(A),J)}delete(A){return super.delete(this._normalizeKey(A))}get(A){return super.get(this._normalizeKey(A))}getAll(A){return super.getAll(this._normalizeKey(A))}has(A){return super.has(this._normalizeKey(A))}set(A,J){return super.set(this._normalizeKey(A),J)}keys(){return super.keys()}values(){return super.values()}entries(){return super.entries()}[Symbol.iterator](){return super[Symbol.iterator]()}_normalizeKey(A){return $g.prototype._normalizeKey.call(this,A)}}}class fA1 extends J40.URL{}class hF extends Error{get name(){return"MongoParseError"}}class FB extends fA1{_hosts;constructor($,F={}){let{looseValidation:A}=F;if(!A&&!X40($))throw new hF('Invalid scheme, expected connection string to start with "mongodb://" or "mongodb+srv://"');let J=$.match(Y40);if(!J)throw new hF(`Invalid connection string "${$}"`);let{protocol:X,username:Y,password:W,hosts:Z,rest:D}=J.groups??{};if(!A){if(!X||!Z)throw new hF(`Protocol and host list are required in "${$}"`);try{decodeURIComponent(Y??""),decodeURIComponent(W??"")}catch(H){throw new hF(H.message)}let z=/[:/?#[\]@]/gi;if(Y?.match(z))throw new hF(`Username contains unescaped characters ${Y}`);if(!Y||!W){let H=$.replace(`${X}://`,"");if(H.startsWith("@")||H.startsWith(":"))throw new hF("URI contained empty userinfo section")}if(W?.match(z))throw new hF("Password contains unescaped characters")}let G="";if(typeof Y==="string")G+=Y;if(typeof W==="string")G+=`:${W}`;if(G)G+="@";try{super(`${X.toLowerCase()}://${G}${$B}${D}`)}catch(z){if(A)new FB($,{...F,looseValidation:!1});if(typeof z.message==="string")z.message=z.message.replace($B,Z);throw z}if(this._hosts=Z.split(","),!A){if(this.isSRV&&this.hosts.length!==1)throw new hF("mongodb+srv URI cannot have multiple service names");if(this.isSRV&&this.hosts.some((z)=>z.includes(":")))throw new hF("mongodb+srv URI cannot have port number")}if(!this.pathname)this.pathname="/";Object.setPrototypeOf(this.searchParams,W40(this.searchParams.constructor).prototype)}get host(){return $B}set host($){throw Error("No single host for connection string")}get hostname(){return $B}set hostname($){throw Error("No single host for connection string")}get port(){return""}set port($){throw Error("No single host for connection string")}get href(){return this.toString()}set href($){throw Error("Cannot set href for connection strings")}get isSRV(){return this.protocol.includes("srv")}get hosts(){return this._hosts}set hosts($){this._hosts=$}toString(){return super.toString().replace($B,this.hosts.join(","))}clone(){return new FB(this.toString(),{looseValidation:!0})}redact($){return(0,gA1.redactValidConnectionString)(this,$)}typedSearchParams(){return this.searchParams}[Symbol.for("nodejs.util.inspect.custom")](){let{href:$,origin:F,protocol:A,username:J,password:X,hosts:Y,pathname:W,search:Z,searchParams:D,hash:G}=this;return{href:$,origin:F,protocol:A,username:J,password:X,hosts:Y,pathname:W,search:Z,searchParams:D,hash:G}}}Fg.ConnectionString=FB;class vA1 extends $g{constructor($){super();for(let F of($??"").split(",")){if(!F)continue;let A=F.indexOf(":");if(A===-1)this.set(F,"");else this.set(F.slice(0,A),F.slice(A+1))}}toString(){return[...this].map(($)=>$.join(":")).join(",")}}Fg.CommaAndColonSeparatedRecord=vA1;Fg.default=FB});var JB=O((iA1)=>{Object.defineProperty(iA1,"__esModule",{value:!0});iA1.OpCompressedRequest=iA1.OpMsgResponse=iA1.OpMsgRequest=iA1.DocumentSequence=iA1.OpReply=iA1.OpQueryRequest=void 0;var Jz=w0(),AB=_1(),Ag=XB(),Fz=dA(),Az=0,G40=2,z40=4,H40=8,U40=16,Q40=32,K40=64,B40=128,w40=1,q40=2,L40=4,E40=8,V40=Jz.BSON.onDemand.ByteUtils.encodeUTF8Into;class Xg{constructor($,F,A){this.moreToCome=!1;let J=`${$}.$cmd`;if(typeof $!=="string")throw new AB.MongoRuntimeError("Database name must be a string for a query");if(F==null)throw new AB.MongoRuntimeError("A query document must be specified for query");if(J.indexOf("\x00")!==-1)throw new AB.MongoRuntimeError("Namespace cannot contain a null character");this.databaseName=$,this.query=F,this.ns=J,this.numberToSkip=A.numberToSkip||0,this.numberToReturn=A.numberToReturn||0,this.returnFieldSelector=A.returnFieldSelector||void 0,this.requestId=A.requestId??Xg.getRequestId(),this.pre32Limit=A.pre32Limit,this.serializeFunctions=typeof A.serializeFunctions==="boolean"?A.serializeFunctions:!1,this.ignoreUndefined=typeof A.ignoreUndefined==="boolean"?A.ignoreUndefined:!1,this.maxBsonSize=A.maxBsonSize||16777216,this.checkKeys=typeof A.checkKeys==="boolean"?A.checkKeys:!1,this.batchSize=this.numberToReturn,this.tailable=!1,this.secondaryOk=typeof A.secondaryOk==="boolean"?A.secondaryOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1}incRequestId(){this.requestId=Az++}nextRequestId(){return Az+1}static getRequestId(){return++Az}toBin(){let $=[],F=null,A=0;if(this.tailable)A|=G40;if(this.secondaryOk)A|=z40;if(this.oplogReplay)A|=H40;if(this.noCursorTimeout)A|=U40;if(this.awaitData)A|=Q40;if(this.exhaust)A|=K40;if(this.partial)A|=B40;if(this.batchSize!==this.numberToReturn)this.numberToReturn=this.batchSize;let J=Buffer.alloc(20+Buffer.byteLength(this.ns)+1+4+4);$.push(J);let X=Jz.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});if($.push(X),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0)F=Jz.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),$.push(F);let Y=J.length+X.length+(F?F.length:0),W=4;return J[3]=Y>>24&255,J[2]=Y>>16&255,J[1]=Y>>8&255,J[0]=Y&255,J[W+3]=this.requestId>>24&255,J[W+2]=this.requestId>>16&255,J[W+1]=this.requestId>>8&255,J[W]=this.requestId&255,W=W+4,J[W+3]=0,J[W+2]=0,J[W+1]=0,J[W]=0,W=W+4,J[W+3]=Fz.OP_QUERY>>24&255,J[W+2]=Fz.OP_QUERY>>16&255,J[W+1]=Fz.OP_QUERY>>8&255,J[W]=Fz.OP_QUERY&255,W=W+4,J[W+3]=A>>24&255,J[W+2]=A>>16&255,J[W+1]=A>>8&255,J[W]=A&255,W=W+4,W=W+J.write(this.ns,W,"utf8")+1,J[W-1]=0,J[W+3]=this.numberToSkip>>24&255,J[W+2]=this.numberToSkip>>16&255,J[W+1]=this.numberToSkip>>8&255,J[W]=this.numberToSkip&255,W=W+4,J[W+3]=this.numberToReturn>>24&255,J[W+2]=this.numberToReturn>>16&255,J[W+1]=this.numberToReturn>>8&255,J[W]=this.numberToReturn&255,W=W+4,$}}iA1.OpQueryRequest=Xg;class hA1{constructor($,F,A,J){this.index=0,this.sections=[],this.moreToCome=!1,this.parsed=!1,this.raw=$,this.data=A,this.opts=J??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=F.length,this.requestId=F.requestId,this.responseTo=F.responseTo,this.opCode=F.opCode,this.fromCompressed=F.fromCompressed,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];if(this.index=20,this.responseFlags=this.data.readInt32LE(0),this.cursorId=new Jz.Long(this.data.readInt32LE(4),this.data.readInt32LE(8)),this.startingFrom=this.data.readInt32LE(12),this.numberReturned=this.data.readInt32LE(16),this.numberReturned<0||this.numberReturned>4294967295)throw RangeError(`OP_REPLY numberReturned is an invalid array length ${this.numberReturned}`);this.cursorNotFound=(this.responseFlags&w40)!==0,this.queryFailure=(this.responseFlags&q40)!==0,this.shardConfigStale=(this.responseFlags&L40)!==0,this.awaitCapable=(this.responseFlags&E40)!==0;for(let $=0;$<this.numberReturned;$++){let F=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,A=this.data.subarray(this.index,this.index+F);this.sections.push(A),this.index=this.index+F}return this.parsed=!0,this.sections[0]}}iA1.OpReply=hA1;var mA1=1,dA1=2,cA1=65536;class Yg{constructor($,F){this.field=$,this.documents=[],this.chunks=[],this.serializedDocumentsLength=0;let A=Buffer.allocUnsafe(5+this.field.length+1);if(A[0]=1,V40(A,`${this.field}\x00`,5),this.chunks.push(A),this.header=A,F)for(let J of F)this.push(J,Jz.serialize(J))}push($,F){return this.serializedDocumentsLength+=F.length,this.documents.push($),this.chunks.push(F),this.header?.writeInt32LE(4+this.field.length+1+this.serializedDocumentsLength,1),this.serializedDocumentsLength+this.header.length}toBin(){return Buffer.concat(this.chunks)}}iA1.DocumentSequence=Yg;class AC{constructor($,F,A){if(F==null)throw new AB.MongoInvalidArgumentError("Query document must be specified for query");this.databaseName=$,this.command=F,this.command.$db=$,this.options=A??{},this.requestId=A.requestId?A.requestId:AC.getRequestId(),this.serializeFunctions=typeof A.serializeFunctions==="boolean"?A.serializeFunctions:!1,this.ignoreUndefined=typeof A.ignoreUndefined==="boolean"?A.ignoreUndefined:!1,this.checkKeys=typeof A.checkKeys==="boolean"?A.checkKeys:!1,this.maxBsonSize=A.maxBsonSize||16777216,this.checksumPresent=!1,this.moreToCome=A.moreToCome??F.writeConcern?.w===0,this.exhaustAllowed=typeof A.exhaustAllowed==="boolean"?A.exhaustAllowed:!1}toBin(){let $=[],F=0;if(this.checksumPresent)F|=mA1;if(this.moreToCome)F|=dA1;if(this.exhaustAllowed)F|=cA1;let A=Buffer.alloc(20);$.push(A);let J=A.length,X=this.command;return J+=this.makeSections($,X),A.writeInt32LE(J,0),A.writeInt32LE(this.requestId,4),A.writeInt32LE(0,8),A.writeInt32LE(Fz.OP_MSG,12),A.writeUInt32LE(F,16),$}makeSections($,F){let A=this.extractDocumentSequences(F),J=Buffer.allocUnsafe(1);J[0]=0;let X=this.serializeBson(F);return $.push(J),$.push(X),$.push(A),J.length+X.length+A.length}extractDocumentSequences($){let F=[];for(let[A,J]of Object.entries($))if(J instanceof Yg)F.push(J.toBin()),delete $[A];if(F.length>0)return Buffer.concat(F);return Buffer.alloc(0)}serializeBson($){return Jz.serialize($,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}static getRequestId(){return Az=Az+1&2147483647,Az}}iA1.OpMsgRequest=AC;class lA1{constructor($,F,A,J){this.index=0,this.sections=[],this.parsed=!1,this.raw=$,this.data=A,this.opts=J??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=F.length,this.requestId=F.requestId,this.responseTo=F.responseTo,this.opCode=F.opCode,this.fromCompressed=F.fromCompressed,this.responseFlags=A.readInt32LE(0),this.checksumPresent=(this.responseFlags&mA1)!==0,this.moreToCome=(this.responseFlags&dA1)!==0,this.exhaustAllowed=(this.responseFlags&cA1)!==0,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];this.index=4;while(this.index<this.data.length){let $=this.data.readUInt8(this.index++);if($===0){let F=this.data.readUInt32LE(this.index),A=this.data.subarray(this.index,this.index+F);this.sections.push(A),this.index+=F}else if($===1)throw new AB.MongoRuntimeError("OP_MSG Payload Type 1 detected unsupported protocol")}return this.parsed=!0,this.sections[0]}}iA1.OpMsgResponse=lA1;var Jg=16,uA1=9;class pA1{constructor($,F){this.command=$,this.options={zlibCompressionLevel:F.zlibCompressionLevel,agreedCompressor:F.agreedCompressor}}static canCompress($){let F=$ instanceof AC?$.command:$.query,A=Object.keys(F)[0];return!Ag.uncompressibleCommands.has(A)}async toBin(){let $=Buffer.concat(this.command.toBin()),F=$.slice(Jg),A=$.readInt32LE(12),J=await(0,Ag.compress)(this.options,F),X=Buffer.alloc(Jg);X.writeInt32LE(Jg+uA1+J.length,0),X.writeInt32LE(this.command.requestId,4),X.writeInt32LE(0,8),X.writeInt32LE(Fz.OP_COMPRESSED,12);let Y=Buffer.alloc(uA1);return Y.writeInt32LE(A,0),Y.writeInt32LE(F.length,4),Y.writeUInt8(Ag.Compressor[this.options.agreedCompressor],8),[X,Y,J]}}iA1.OpCompressedRequest=pA1});var XB=O((eA1)=>{Object.defineProperty(eA1,"__esModule",{value:!0});eA1.uncompressibleCommands=eA1.Compressor=void 0;eA1.compress=S40;eA1.decompress=sA1;eA1.compressCommand=_40;eA1.decompressResponse=k40;var rA1=Z1("util"),JC=Z1("zlib"),I40=O4(),aA1=Q$(),Zg=_1(),Xz=JB(),Wg=dA();eA1.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3});eA1.uncompressibleCommands=new Set([I40.LEGACY_HELLO_COMMAND,"saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);var T40=3,j40=(0,rA1.promisify)(JC.inflate.bind(JC)),O40=(0,rA1.promisify)(JC.deflate.bind(JC)),uX,sW=null;function tA1(){if(sW==null){let $=(0,aA1.getSnappy)();if("kModuleError"in $)throw $.kModuleError;sW=$}return sW}async function S40($,F){let A={};switch($.agreedCompressor){case"snappy":return sW??=tA1(),await sW.compress(F);case"zstd":{if(oA1(),"kModuleError"in uX)throw uX.kModuleError;return await uX.compress(F,T40)}case"zlib":{if($.zlibCompressionLevel)A.level=$.zlibCompressionLevel;return await O40(F,A)}default:throw new Zg.MongoInvalidArgumentError(`Unknown compressor ${$.agreedCompressor} failed to compress`)}}async function sA1($,F){if($!==eA1.Compressor.snappy&&$!==eA1.Compressor.zstd&&$!==eA1.Compressor.zlib&&$!==eA1.Compressor.none)throw new Zg.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${$})`);switch($){case eA1.Compressor.snappy:return sW??=tA1(),await sW.uncompress(F,{asBuffer:!0});case eA1.Compressor.zstd:{if(oA1(),"kModuleError"in uX)throw uX.kModuleError;return await uX.decompress(F)}case eA1.Compressor.zlib:return await j40(F);default:return F}}function oA1(){if(!uX)uX=(0,aA1.getZstdLibrary)()}var YB=16;async function _40($,F){let J=await(F.agreedCompressor==="none"||!Xz.OpCompressedRequest.canCompress($)?$:new Xz.OpCompressedRequest($,{agreedCompressor:F.agreedCompressor??"none",zlibCompressionLevel:F.zlibCompressionLevel??0})).toBin();return Buffer.concat(J)}async function k40($){let F={length:$.readInt32LE(0),requestId:$.readInt32LE(4),responseTo:$.readInt32LE(8),opCode:$.readInt32LE(12)};if(F.opCode!==Wg.OP_COMPRESSED){let Z=F.opCode===Wg.OP_MSG?Xz.OpMsgResponse:Xz.OpReply,D=$.subarray(YB);return new Z($,F,D)}let A={...F,fromCompressed:!0,opCode:$.readInt32LE(YB),length:$.readInt32LE(YB+4)},J=$[YB+8],X=$.slice(YB+9),Y=A.opCode===Wg.OP_MSG?Xz.OpMsgResponse:Xz.OpReply,W=await sA1(J,X);if(W.length!==A.length)throw new Zg.MongoDecompressionError("Message body and message header must be the same length");return new Y($,A,W)}});var Yz=O((WJ1)=>{Object.defineProperty(WJ1,"__esModule",{value:!0});WJ1.MongoCryptKMSRequestNetworkTimeoutError=WJ1.MongoCryptAzureKMSRequestError=WJ1.MongoCryptCreateEncryptedCollectionError=WJ1.MongoCryptCreateDataKeyError=WJ1.MongoCryptInvalidArgumentError=WJ1.defaultErrorWrapper=WJ1.MongoCryptError=void 0;var v40=_1();class hX extends v40.MongoError{constructor($,F={}){super($,F)}get name(){return"MongoCryptError"}}WJ1.MongoCryptError=hX;var y40=($)=>new hX($.message,{cause:$});WJ1.defaultErrorWrapper=y40;class FJ1 extends hX{constructor($){super($)}get name(){return"MongoCryptInvalidArgumentError"}}WJ1.MongoCryptInvalidArgumentError=FJ1;class AJ1 extends hX{constructor($,{cause:F}){super(`Unable to complete creating data keys: ${F.message}`,{cause:F});this.encryptedFields=$}get name(){return"MongoCryptCreateDataKeyError"}}WJ1.MongoCryptCreateDataKeyError=AJ1;class JJ1 extends hX{constructor($,{cause:F}){super(`Unable to create collection: ${F.message}`,{cause:F});this.encryptedFields=$}get name(){return"MongoCryptCreateEncryptedCollectionError"}}WJ1.MongoCryptCreateEncryptedCollectionError=JJ1;class XJ1 extends hX{constructor($,F){super($);this.body=F}get name(){return"MongoCryptAzureKMSRequestError"}}WJ1.MongoCryptAzureKMSRequestError=XJ1;class YJ1 extends hX{get name(){return"MongoCryptKMSRequestNetworkTimeoutError"}}WJ1.MongoCryptKMSRequestNetworkTimeoutError=YJ1});var Dg=O((DJ1)=>{Object.defineProperty(DJ1,"__esModule",{value:!0});DJ1.AWSSDKCredentialProvider=void 0;var p40=Q$(),i40=_1();class mX{constructor($){if($)this._provider=$}static get awsSDK(){return mX._awsSDK??=(0,p40.getAwsCredentialProvider)(),mX._awsSDK}get provider(){if("kModuleError"in mX.awsSDK)throw mX.awsSDK.kModuleError;if(this._provider)return this._provider;let{AWS_STS_REGIONAL_ENDPOINTS:$="",AWS_REGION:F=""}=process.env;$=$.toLowerCase(),F=F.toLowerCase();let A=F.length!==0&&$.length!==0,X=$==="regional"||$==="legacy"&&!new Set(["ap-northeast-1","ap-south-1","ap-southeast-1","ap-southeast-2","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]).has(F);return this._provider=A&&X?mX.awsSDK.fromNodeProviderChain({clientConfig:{region:F}}):mX.awsSDK.fromNodeProviderChain(),this._provider}async getCredentials(){try{let $=await this.provider();return{AccessKeyId:$.accessKeyId,SecretAccessKey:$.secretAccessKey,Token:$.sessionToken,Expiration:$.expiration}}catch($){throw new i40.MongoAWSError($.message,{cause:$})}}}DJ1.AWSSDKCredentialProvider=mX});var HJ1=O((zJ1)=>{Object.defineProperty(zJ1,"__esModule",{value:!0});zJ1.loadAWSCredentials=r40;var n40=Dg();async function r40($,F){let A=new n40.AWSSDKCredentialProvider(F),{SecretAccessKey:J="",AccessKeyId:X="",Token:Y}=await A.getCredentials(),W={secretAccessKey:J,accessKeyId:X};return Y!=null&&(W.sessionToken=Y),{...$,aws:W}}});var Hg=O((BJ1)=>{Object.defineProperty(BJ1,"__esModule",{value:!0});BJ1.tokenCache=BJ1.AzureCredentialCache=BJ1.AZURE_BASE_URL=void 0;BJ1.addAzureParams=UJ1;BJ1.prepareRequest=QJ1;BJ1.fetchAzureKMSToken=KJ1;BJ1.loadAzureCredentials=$90;var t40=_1(),s40=l1(),Wz=Yz(),o40=6000;BJ1.AZURE_BASE_URL="http://169.254.169.254/metadata/identity/oauth2/token?";class Gg{constructor(){this.cachedToken=null}async getToken(){if(this.cachedToken==null||this.needsRefresh(this.cachedToken))this.cachedToken=await this._getToken();return{accessToken:this.cachedToken.accessToken}}needsRefresh($){return $.expiresOnTimestamp-Date.now()<=o40}resetCache(){this.cachedToken=null}_getToken(){return KJ1()}}BJ1.AzureCredentialCache=Gg;BJ1.tokenCache=new Gg;async function e40($){let{status:F,body:A}=$,J=(()=>{try{return JSON.parse(A)}catch{throw new Wz.MongoCryptAzureKMSRequestError("Malformed JSON body in GET request.")}})();if(F!==200)throw new Wz.MongoCryptAzureKMSRequestError("Unable to complete request.",J);if(!J.access_token)throw new Wz.MongoCryptAzureKMSRequestError("Malformed response body - missing field `access_token`.");if(!J.expires_in)throw new Wz.MongoCryptAzureKMSRequestError("Malformed response body - missing field `expires_in`.");let X=Number(J.expires_in)*1000;if(Number.isNaN(X))throw new Wz.MongoCryptAzureKMSRequestError("Malformed response body - unable to parse int from `expires_in` field.");return{accessToken:J.access_token,expiresOnTimestamp:Date.now()+X}}function UJ1($,F,A){if($.searchParams.append("api-version","2018-02-01"),$.searchParams.append("resource",F),A)$.searchParams.append("client_id",A);return $}function QJ1($){let F=new URL($.url?.toString()??BJ1.AZURE_BASE_URL);return UJ1(F,"https://vault.azure.net"),{headers:{...$.headers,"Content-Type":"application/json",Metadata:!0},url:F}}async function KJ1($={}){let{headers:F,url:A}=QJ1($);try{let J=await(0,s40.get)(A,{headers:F});return await e40(J)}catch(J){if(J instanceof t40.MongoNetworkTimeoutError)throw new Wz.MongoCryptAzureKMSRequestError(`[Azure KMS] ${J.message}`);throw J}}async function $90($){let F=await BJ1.tokenCache.getToken();return{...$,azure:F}}});var LJ1=O((qJ1)=>{Object.defineProperty(qJ1,"__esModule",{value:!0});qJ1.loadGCPCredentials=Z90;var W90=Q$();async function Z90($){let F=(0,W90.getGcpMetadata)();if("kModuleError"in F)return $;let{access_token:A}=await F.instance({property:"service-accounts/default/token"});return{...$,gcp:{accessToken:A}}}});var Ug=O((EJ1)=>{Object.defineProperty(EJ1,"__esModule",{value:!0});EJ1.isEmptyCredentials=XC;EJ1.refreshKMSCredentials=U90;var G90=HJ1(),z90=Hg(),H90=LJ1();function XC($,F){let A=F[$];if(A==null)return!1;return typeof A==="object"&&Object.keys(A).length===0}async function U90($,F){let A=$;if(XC("aws",$))A=await(0,G90.loadAWSCredentials)(A,F?.aws);if(XC("gcp",$))A=await(0,H90.loadGCPCredentials)(A);if(XC("azure",$))A=await(0,z90.loadAzureCredentials)(A);return A}});var Qg=O((kJ1)=>{Object.defineProperty(kJ1,"__esModule",{value:!0});kJ1.StateMachine=void 0;var VJ1=Z1("fs/promises"),B90=Z1("net"),w90=Z1("tls"),nA=w0(),NJ1=q8(),q90=Q$(),L90=_1(),CJ1=$9(),dX=l1(),E90=YC(),cX=Yz(),WB=null;function V90(){if(WB==null){let $=(0,q90.getSocks)();if("kModuleError"in $)throw $.kModuleError;WB=$}return WB}var oW=0,PJ1=1,RJ1=2,IJ1=3,TJ1=7,jJ1=4,OJ1=5,SJ1=6,N90=443,C90=new Map([[oW,"MONGOCRYPT_CTX_ERROR"],[PJ1,"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO"],[RJ1,"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS"],[IJ1,"MONGOCRYPT_CTX_NEED_MONGO_KEYS"],[TJ1,"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS"],[jJ1,"MONGOCRYPT_CTX_NEED_KMS"],[OJ1,"MONGOCRYPT_CTX_READY"],[SJ1,"MONGOCRYPT_CTX_DONE"]]),M90=["tlsInsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames"];function MJ1($){if(process.env.MONGODB_CRYPT_DEBUG)console.error($)}var P90;class _J1{constructor($,F=(0,nA.pluckBSONSerializeOptions)($)){this.options=$,this.bsonOptions=F}async execute($,F,A){let{_keyVaultNamespace:J,_keyVaultClient:X,_metaDataClient:Y,_mongocryptdClient:W,_mongocryptdManager:Z}=$,D=null,G=()=>F.status,z=()=>F.state;while(z()!==SJ1&&z()!==oW)switch(A.signal?.throwIfAborted(),MJ1(`[context#${F.id}] ${C90.get(z())||z()}`),z()){case PJ1:{let H=(0,nA.deserialize)(F.nextMongoOperation());if(!Y)throw new cX.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined");let U=this.fetchCollectionInfo(Y,F.ns,H,A);for await(let Q of U)if(F.addMongoOperationResponse((0,nA.serialize)(Q)),z()===oW)break;if(z()===oW)break;F.finishMongoOperation();break}case RJ1:{let H=F.nextMongoOperation();if(z()===oW)break;if(!W)throw new cX.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined");let U=Z?await Z.withRespawn(this.markCommand.bind(this,W,F.ns,H,A)):await this.markCommand(W,F.ns,H,A);F.addMongoOperationResponse(U),F.finishMongoOperation();break}case IJ1:{let H=F.nextMongoOperation(),U=await this.fetchKeys(X,J,H,A);if(U.length===0)D=P90??=(0,nA.serialize)({v:[]});for(let Q of U)F.addMongoOperationResponse((0,nA.serialize)(Q));F.finishMongoOperation();break}case TJ1:{let H=await $.askForKMSCredentials();F.provideKMSProviders((0,nA.serialize)(H));break}case jJ1:{await Promise.all(this.requests(F,A)),F.finishKMSRequests();break}case OJ1:{let H=F.finalize();if(z()===oW){let U=G().message||"Finalization error";throw new cX.MongoCryptError(U)}D=H;break}default:throw new cX.MongoCryptError(`Unknown state: ${z()}`)}if(z()===oW||D==null){let H=G().message;if(!H)MJ1("unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.");throw new cX.MongoCryptError(H??"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.")}return D}async kmsRequest($,F){let A=$.endpoint.split(":"),J=A[1]!=null?Number.parseInt(A[1],10):N90,X={host:A[0],servername:A[0],port:J,...(0,E90.autoSelectSocketOptions)(this.options.socketOptions||{})},Y=$.message,W=new dX.BufferPool,Z,D;function G(){for(let B of[D,Z])if(B)B.destroy()}function z(B){return new cX.MongoCryptError("KMS request failed",{cause:B})}function H(){return new cX.MongoCryptError("KMS request closed")}let U=this.options.tlsOptions;if(U){let B=$.kmsProvider,q=U[B];if(q){let L=this.validateTlsOptions(B,q);if(L)throw L;try{await this.setTlsOptions(q,X)}catch(E){throw z(E)}}}let Q;try{if(this.options.proxyOptions&&this.options.proxyOptions.proxyHost){Z=new B90.Socket;let{promise:E,reject:V,resolve:R}=(0,dX.promiseWithResolvers)();Z.once("error",(S)=>V(z(S))).once("close",()=>V(H())).once("connect",()=>R());let N={...X,host:this.options.proxyOptions.proxyHost,port:this.options.proxyOptions.proxyPort||1080};Z.connect(N),await E;try{WB??=V90(),X.socket=(await WB.SocksClient.createConnection({existing_socket:Z,command:"connect",destination:{host:X.host,port:X.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:this.options.proxyOptions.proxyUsername,password:this.options.proxyOptions.proxyPassword}})).socket}catch(S){throw z(S)}}D=w90.connect(X,()=>{D.write(Y)});let{promise:B,reject:q,resolve:L}=(0,dX.promiseWithResolvers)();Q=(0,dX.addAbortListener)(F?.signal,function(){G(),q(this.reason)}),D.once("error",(E)=>q(z(E))).once("close",()=>q(H())).on("data",(E)=>{W.append(E);while($.bytesNeeded>0&&W.length){let V=Math.min($.bytesNeeded,W.length);$.addResponse(W.read(V))}if($.bytesNeeded<=0)L()}),await(F?.timeoutContext?.csotEnabled()?Promise.all([B,CJ1.Timeout.expires(F.timeoutContext?.remainingTimeMS)]):B)}catch(B){if(B instanceof CJ1.TimeoutError)throw new L90.MongoOperationTimeoutError("KMS request timed out");throw B}finally{G(),Q?.[dX.kDispose]()}}*requests($,F){for(let A=$.nextKMSRequest();A!=null;A=$.nextKMSRequest())yield this.kmsRequest(A,F)}validateTlsOptions($,F){let A=Object.keys(F);for(let J of M90)if(A.includes(J))return new cX.MongoCryptError(`Insecure TLS options prohibited for ${$}: ${J}`)}async setTlsOptions($,F){if($.secureContext)F.secureContext=$.secureContext;if($.tlsCertificateKeyFile){let A=await VJ1.readFile($.tlsCertificateKeyFile);F.cert=F.key=A}if($.tlsCAFile)F.ca=await VJ1.readFile($.tlsCAFile);if($.tlsCertificateKeyFilePassword)F.passphrase=$.tlsCertificateKeyFilePassword}fetchCollectionInfo($,F,A,J){let{db:X}=dX.MongoDBCollectionNamespace.fromString(F);return $.db(X).listCollections(A,{promoteLongs:!1,promoteValues:!1,timeoutContext:J?.timeoutContext&&new NJ1.CursorTimeoutContext(J?.timeoutContext,Symbol()),signal:J?.signal,nameOnly:!1})}async markCommand($,F,A,J){let{db:X}=dX.MongoDBCollectionNamespace.fromString(F),Y={promoteLongs:!1,promoteValues:!1},W=(0,nA.deserialize)(A,Y),Z={timeoutMS:void 0,signal:void 0};if(J?.timeoutContext?.csotEnabled())Z.timeoutMS=J.timeoutContext.remainingTimeMS;if(J?.signal)Z.signal=J.signal;let D=await $.db(X).command(W,{...Y,...Z});return(0,nA.serialize)(D,this.bsonOptions)}fetchKeys($,F,A,J){let{db:X,collection:Y}=dX.MongoDBCollectionNamespace.fromString(F),W={timeoutContext:void 0,signal:void 0};if(J?.timeoutContext!=null)W.timeoutContext=new NJ1.CursorTimeoutContext(J.timeoutContext,Symbol());if(J?.signal!=null)W.signal=J.signal;return $.db(X).collection(Y,{readConcern:{level:"majority"}}).find((0,nA.deserialize)(A),W).toArray()}}kJ1.StateMachine=_J1});var YC=O((gJ1)=>{Object.defineProperty(gJ1,"__esModule",{value:!0});gJ1.ClientEncryption=void 0;gJ1.autoSelectSocketOptions=DB;var e8=w0(),R90=Q$(),ZB=$9(),T3=l1(),rA=Yz(),xJ1=Ug(),WC=Qg();class ZC{static getMongoCrypt(){let $=(0,R90.getMongoDBClientEncryption)();if("kModuleError"in $)throw $.kModuleError;return $.MongoCrypt}constructor($,F){this._client=$,this._proxyOptions=F.proxyOptions??{},this._tlsOptions=F.tlsOptions??{},this._kmsProviders=F.kmsProviders||{};let{timeoutMS:A}=(0,T3.resolveTimeoutOptions)($,F);if(this._timeoutMS=A,this._credentialProviders=F.credentialProviders,F.credentialProviders?.aws&&!(0,xJ1.isEmptyCredentials)("aws",this._kmsProviders))throw new rA.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");if(F.keyVaultNamespace==null)throw new rA.MongoCryptInvalidArgumentError("Missing required option `keyVaultNamespace`");let J={...F,kmsProviders:!Buffer.isBuffer(this._kmsProviders)?(0,e8.serialize)(this._kmsProviders):this._kmsProviders,errorWrapper:rA.defaultErrorWrapper};this._keyVaultNamespace=F.keyVaultNamespace,this._keyVaultClient=F.keyVaultClient||$;let X=ZC.getMongoCrypt();this._mongoCrypt=new X(J)}async createDataKey($,F={}){if(F.keyAltNames&&!Array.isArray(F.keyAltNames))throw new rA.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but was of type ${typeof F.keyAltNames}.`);let A=void 0;if(F.keyAltNames&&F.keyAltNames.length>0)A=F.keyAltNames.map((U,Q)=>{if(typeof U!=="string")throw new rA.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but item at index ${Q} was of type ${typeof U}`);return(0,e8.serialize)({keyAltName:U})});let J=void 0;if(F.keyMaterial)J=(0,e8.serialize)({keyMaterial:F.keyMaterial});let X=(0,e8.serialize)({provider:$,...F.masterKey}),Y=this._mongoCrypt.makeDataKeyContext(X,{keyAltNames:A,keyMaterial:J}),W=new WC.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:DB(this._client.s.options)}),Z=F?.timeoutContext??ZB.TimeoutContext.create((0,T3.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),D=(0,e8.deserialize)(await W.execute(this,Y,{timeoutContext:Z})),{db:G,collection:z}=T3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),{insertedId:H}=await this._keyVaultClient.db(G).collection(z).insertOne(D,{writeConcern:{w:"majority"},timeoutMS:Z?.csotEnabled()?Z?.getRemainingTimeMSOrThrow():void 0});return H}async rewrapManyDataKey($,F){let A=void 0;if(F){let U=Object.assign({provider:F.provider},F.masterKey);A=(0,e8.serialize)(U)}let J=(0,e8.serialize)($),X=this._mongoCrypt.makeRewrapManyDataKeyContext(J,A),Y=new WC.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:DB(this._client.s.options)}),W=ZB.TimeoutContext.create((0,T3.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),{v:Z}=(0,e8.deserialize)(await Y.execute(this,X,{timeoutContext:W}));if(Z.length===0)return{};let{db:D,collection:G}=T3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),z=Z.map((U)=>({updateOne:{filter:{_id:U._id},update:{$set:{masterKey:U.masterKey,keyMaterial:U.keyMaterial},$currentDate:{updateDate:!0}}}}));return{bulkWriteResult:await this._keyVaultClient.db(D).collection(G).bulkWrite(z,{writeConcern:{w:"majority"},timeoutMS:W.csotEnabled()?W?.remainingTimeMS:void 0})}}async deleteKey($){let{db:F,collection:A}=T3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(F).collection(A).deleteOne({_id:$},{writeConcern:{w:"majority"},timeoutMS:this._timeoutMS})}getKeys(){let{db:$,collection:F}=T3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db($).collection(F).find({},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKey($){let{db:F,collection:A}=T3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(F).collection(A).findOne({_id:$},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKeyByAltName($){let{db:F,collection:A}=T3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(F).collection(A).findOne({keyAltNames:$},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async addKeyAltName($,F){let{db:A,collection:J}=T3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(A).collection(J).findOneAndUpdate({_id:$},{$addToSet:{keyAltNames:F}},{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async removeKeyAltName($,F){let{db:A,collection:J}=T3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),X=[{$set:{keyAltNames:{$cond:[{$eq:["$keyAltNames",[F]]},"$$REMOVE",{$filter:{input:"$keyAltNames",cond:{$ne:["$$this",F]}}}]}}}];return await this._keyVaultClient.db(A).collection(J).findOneAndUpdate({_id:$},X,{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async createEncryptedCollection($,F,A){let{provider:J,masterKey:X,createCollectionOptions:{encryptedFields:{...Y},...W}}=A,Z=this._timeoutMS!=null?ZB.TimeoutContext.create((0,T3.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0;if(Array.isArray(Y.fields)){let D=Y.fields.map(async(H)=>H==null||typeof H!=="object"||H.keyId!=null?H:{...H,keyId:await this.createDataKey(J,{masterKey:X,timeoutContext:Z?.csotEnabled()?Z?.clone():void 0})}),G=await Promise.allSettled(D);Y.fields=G.map((H,U)=>H.status==="fulfilled"?H.value:Y.fields[U]);let z=G.find((H)=>H.status==="rejected");if(z!=null)throw new rA.MongoCryptCreateDataKeyError(Y,{cause:z.reason})}try{return{collection:await $.createCollection(F,{...W,encryptedFields:Y,timeoutMS:Z?.csotEnabled()?Z?.getRemainingTimeMSOrThrow():void 0}),encryptedFields:Y}}catch(D){throw new rA.MongoCryptCreateEncryptedCollectionError(Y,{cause:D})}}async encrypt($,F){return await this._encrypt($,!1,F)}async encryptExpression($,F){return await this._encrypt($,!0,F)}async decrypt($){let F=(0,e8.serialize)({v:$}),A=this._mongoCrypt.makeExplicitDecryptionContext(F),J=new WC.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:DB(this._client.s.options)}),X=this._timeoutMS!=null?ZB.TimeoutContext.create((0,T3.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:Y}=(0,e8.deserialize)(await J.execute(this,A,{timeoutContext:X}));return Y}async askForKMSCredentials(){return await(0,xJ1.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}static get libmongocryptVersion(){return ZC.getMongoCrypt().libmongocryptVersion}async _encrypt($,F,A){let{algorithm:J,keyId:X,keyAltName:Y,contentionFactor:W,queryType:Z,rangeOptions:D,textOptions:G}=A,z={expressionMode:F,algorithm:J};if(X)z.keyId=X.buffer;if(Y){if(X)throw new rA.MongoCryptInvalidArgumentError('"options" cannot contain both "keyId" and "keyAltName"');if(typeof Y!=="string")throw new rA.MongoCryptInvalidArgumentError(`"options.keyAltName" must be of type string, but was of type ${typeof Y}`);z.keyAltName=(0,e8.serialize)({keyAltName:Y})}if(typeof W==="number"||typeof W==="bigint")z.contentionFactor=W;if(typeof Z==="string")z.queryType=Z;if(typeof D==="object")z.rangeOptions=(0,e8.serialize)(D);if(typeof G==="object")z.textOptions=(0,e8.serialize)(G);let H=(0,e8.serialize)({v:$}),U=new WC.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:DB(this._client.s.options)}),Q=this._mongoCrypt.makeExplicitEncryptionContext(H,z),B=this._timeoutMS!=null?ZB.TimeoutContext.create((0,T3.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:q}=(0,e8.deserialize)(await U.execute(this,Q,{timeoutContext:B}));return q}}gJ1.ClientEncryption=ZC;function DB($){let F={autoSelectFamily:!0};if("autoSelectFamily"in $)F.autoSelectFamily=$.autoSelectFamily;if("autoSelectFamilyAttemptTimeout"in $)F.autoSelectFamilyAttemptTimeout=$.autoSelectFamilyAttemptTimeout;return F}});var uJ1=O((vJ1)=>{Object.defineProperty(vJ1,"__esModule",{value:!0});vJ1.MongocryptdManager=void 0;var T90=_1();class Kg{static{this.DEFAULT_MONGOCRYPTD_URI="mongodb://localhost:27020"}constructor($={}){if(this.spawnPath="",this.spawnArgs=[],this.uri=typeof $.mongocryptdURI==="string"&&$.mongocryptdURI.length>0?$.mongocryptdURI:Kg.DEFAULT_MONGOCRYPTD_URI,this.bypassSpawn=!!$.mongocryptdBypassSpawn,Object.hasOwn($,"mongocryptdSpawnPath")&&$.mongocryptdSpawnPath)this.spawnPath=$.mongocryptdSpawnPath;if(Object.hasOwn($,"mongocryptdSpawnArgs")&&Array.isArray($.mongocryptdSpawnArgs))this.spawnArgs=this.spawnArgs.concat($.mongocryptdSpawnArgs);if(this.spawnArgs.filter((F)=>typeof F==="string").every((F)=>F.indexOf("--idleShutdownTimeoutSecs")<0))this.spawnArgs.push("--idleShutdownTimeoutSecs","60")}async spawn(){let $=this.spawnPath||"mongocryptd",{spawn:F}=Z1("child_process");this._child=F($,this.spawnArgs,{stdio:"ignore",detached:!0}),this._child.on("error",()=>{}),this._child.unref()}async withRespawn($){try{return await $()}catch(A){if(!(A instanceof T90.MongoNetworkTimeoutError&&!this.bypassSpawn))throw A}return await this.spawn(),await $()}}vJ1.MongocryptdManager=Kg});var Lg=O((lJ1)=>{var hJ1;Object.defineProperty(lJ1,"__esModule",{value:!0});lJ1.AutoEncrypter=lJ1.AutoEncryptionLoggerLevel=void 0;var mJ1=Z1("net"),GB=w0(),j90=O4(),O90=Q$(),Bg=_1(),S90=eW(),_90=l1(),wg=YC(),qg=Yz(),k90=uJ1(),dJ1=Ug(),cJ1=Qg();lJ1.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4});class DC{static{hJ1=j90.kDecorateResult}static getMongoCrypt(){let $=(0,O90.getMongoDBClientEncryption)();if("kModuleError"in $)throw $.kModuleError;return $.MongoCrypt}constructor($,F){if(this[hJ1]=!1,this._client=$,this._bypassEncryption=F.bypassAutoEncryption===!0,this._keyVaultNamespace=F.keyVaultNamespace||"admin.datakeys",this._keyVaultClient=F.keyVaultClient||$,this._metaDataClient=F.metadataClient||$,this._proxyOptions=F.proxyOptions||{},this._tlsOptions=F.tlsOptions||{},this._kmsProviders=F.kmsProviders||{},this._credentialProviders=F.credentialProviders,F.credentialProviders?.aws&&!(0,dJ1.isEmptyCredentials)("aws",this._kmsProviders))throw new qg.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");let A={errorWrapper:qg.defaultErrorWrapper};if(F.schemaMap)A.schemaMap=Buffer.isBuffer(F.schemaMap)?F.schemaMap:(0,GB.serialize)(F.schemaMap);if(F.encryptedFieldsMap)A.encryptedFieldsMap=Buffer.isBuffer(F.encryptedFieldsMap)?F.encryptedFieldsMap:(0,GB.serialize)(F.encryptedFieldsMap);if(A.kmsProviders=!Buffer.isBuffer(this._kmsProviders)?(0,GB.serialize)(this._kmsProviders):this._kmsProviders,F.options?.logger)A.logger=F.options.logger;if(F.extraOptions&&F.extraOptions.cryptSharedLibPath)A.cryptSharedLibPath=F.extraOptions.cryptSharedLibPath;if(F.bypassQueryAnalysis)A.bypassQueryAnalysis=F.bypassQueryAnalysis;if(F.keyExpirationMS!=null)A.keyExpirationMS=F.keyExpirationMS;if(this._bypassMongocryptdAndCryptShared=this._bypassEncryption||!!F.bypassQueryAnalysis,F.extraOptions&&F.extraOptions.cryptSharedLibSearchPaths)A.cryptSharedLibSearchPaths=F.extraOptions.cryptSharedLibSearchPaths;else if(!this._bypassMongocryptdAndCryptShared)A.cryptSharedLibSearchPaths=["$SYSTEM"];let J=DC.getMongoCrypt();if(this._mongocrypt=new J(A),this._contextCounter=0,F.extraOptions&&F.extraOptions.cryptSharedLibRequired&&!this.cryptSharedLibVersionInfo)throw new qg.MongoCryptInvalidArgumentError("`cryptSharedLibRequired` set but no crypt_shared library loaded");if(!this._bypassMongocryptdAndCryptShared&&!this.cryptSharedLibVersionInfo){this._mongocryptdManager=new k90.MongocryptdManager(F.extraOptions);let X={serverSelectionTimeoutMS:1e4};if((F.extraOptions==null||typeof F.extraOptions.mongocryptdURI!=="string")&&!mJ1.getDefaultAutoSelectFamily)X.family=4;if(mJ1.getDefaultAutoSelectFamily)Object.assign(X,(0,wg.autoSelectSocketOptions)(this._client.s?.options??{}));this._mongocryptdClient=new S90.MongoClient(this._mongocryptdManager.uri,X)}}async init(){if(this._bypassMongocryptdAndCryptShared||this.cryptSharedLibVersionInfo)return;if(!this._mongocryptdManager)throw new Bg.MongoRuntimeError("Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdClient)throw new Bg.MongoRuntimeError("Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdManager.bypassSpawn)await this._mongocryptdManager.spawn();try{return await this._mongocryptdClient.connect()}catch($){throw new Bg.MongoRuntimeError("Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn",{cause:$})}}async close(){await this._mongocryptdClient?.close()}async encrypt($,F,A={}){if(A.signal?.throwIfAborted(),this._bypassEncryption)return F;let J=Buffer.isBuffer(F)?F:(0,GB.serialize)(F,A),X=this._mongocrypt.makeEncryptionContext(_90.MongoDBCollectionNamespace.fromString($).db,J);X.id=this._contextCounter++,X.ns=$,X.document=F;let Y=new cJ1.StateMachine({promoteValues:!1,promoteLongs:!1,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,wg.autoSelectSocketOptions)(this._client.s.options)});return(0,GB.deserialize)(await Y.execute(this,X,A),{promoteValues:!1,promoteLongs:!1})}async decrypt($,F={}){F.signal?.throwIfAborted();let A=this._mongocrypt.makeDecryptionContext($);return A.id=this._contextCounter++,await new cJ1.StateMachine({...F,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,wg.autoSelectSocketOptions)(this._client.s.options)}).execute(this,A,F)}async askForKMSCredentials(){return await(0,dJ1.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}get cryptSharedLibVersionInfo(){return this._mongocrypt.cryptSharedLibVersionInfo}static get libmongocryptVersion(){return DC.getMongoCrypt().libmongocryptVersion}}lJ1.AutoEncrypter=DC});var tJ1=O((rJ1)=>{Object.defineProperty(rJ1,"__esModule",{value:!0});rJ1.Encrypter=void 0;var x90=Lg(),g90=O4(),f90=Q$(),iJ1=_1(),v90=eW();class nJ1{constructor($,F,A){if(typeof A.autoEncryption!=="object")throw new iJ1.MongoInvalidArgumentError('Option "autoEncryption" must be specified');if(this.internalClient=null,this.bypassAutoEncryption=!!A.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,A.maxPoolSize===0&&A.autoEncryption.keyVaultClient==null)A.autoEncryption.keyVaultClient=$;else if(A.autoEncryption.keyVaultClient==null)A.autoEncryption.keyVaultClient=this.getInternalClient($,F,A);if(this.bypassAutoEncryption)A.autoEncryption.metadataClient=void 0;else if(A.maxPoolSize===0)A.autoEncryption.metadataClient=$;else A.autoEncryption.metadataClient=this.getInternalClient($,F,A);if(A.proxyHost)A.autoEncryption.proxyOptions={proxyHost:A.proxyHost,proxyPort:A.proxyPort,proxyUsername:A.proxyUsername,proxyPassword:A.proxyPassword};this.autoEncrypter=new x90.AutoEncrypter($,A.autoEncryption)}getInternalClient($,F,A){let J=this.internalClient;if(J==null){let X={};for(let Y of[...Object.getOwnPropertyNames(A),...Object.getOwnPropertySymbols(A)]){if(["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].includes(Y))continue;Reflect.set(X,Y,Reflect.get(A,Y))}X.minPoolSize=0,J=new v90.MongoClient(F,X),this.internalClient=J;for(let Y of g90.MONGO_CLIENT_EVENTS)for(let W of $.listeners(Y))J.on(Y,W);$.on("newListener",(Y,W)=>{J?.on(Y,W)}),this.needsConnecting=!0}return J}async connectInternalClient(){let $=this.internalClient;if(this.needsConnecting&&$!=null)this.needsConnecting=!1,await $.connect()}async close($){let F;try{await this.autoEncrypter.close()}catch(J){F=J}let A=this.internalClient;if(A!=null&&$!==A)return await A.close();if(F!=null)throw F}static checkForMongoCrypt(){let $=(0,f90.getMongoDBClientEncryption)();if("kModuleError"in $)throw new iJ1.MongoMissingDependencyError("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project",{cause:$.kModuleError,dependencyName:"mongodb-client-encryption"})}}rJ1.Encrypter=nJ1});var Pg=O((JX1)=>{Object.defineProperty(JX1,"__esModule",{value:!0});JX1.SENSITIVE_COMMANDS=JX1.CommandFailedEvent=JX1.CommandSucceededEvent=JX1.CommandStartedEvent=void 0;var zB=O4(),eJ1=l1(),Eg=JB();class $X1{constructor($,F,A){this.name=zB.COMMAND_STARTED;let J=Cg(F),X=Vg(J),{address:Y,connectionId:W,serviceId:Z}=Mg($);if(JX1.SENSITIVE_COMMANDS.has(X))this.commandObj={},this.commandObj[X]=!0;this.address=Y,this.connectionId=W,this.serviceId=Z,this.requestId=F.requestId,this.databaseName=F.databaseName,this.commandName=X,this.command=Ng(X,J,J),this.serverConnectionId=A}get hasServiceId(){return!!this.serviceId}}JX1.CommandStartedEvent=$X1;class FX1{constructor($,F,A,J,X){this.name=zB.COMMAND_SUCCEEDED;let Y=Cg(F),W=Vg(Y),{address:Z,connectionId:D,serviceId:G}=Mg($);this.address=Z,this.connectionId=D,this.serviceId=G,this.requestId=F.requestId,this.commandName=W,this.duration=(0,eJ1.calculateDurationInMs)(J),this.reply=Ng(W,Y,h90(A)),this.serverConnectionId=X,this.databaseName=F.databaseName}get hasServiceId(){return!!this.serviceId}}JX1.CommandSucceededEvent=FX1;class AX1{constructor($,F,A,J,X){this.name=zB.COMMAND_FAILED;let Y=Cg(F),W=Vg(Y),{address:Z,connectionId:D,serviceId:G}=Mg($);this.address=Z,this.connectionId=D,this.serviceId=G,this.requestId=F.requestId,this.commandName=W,this.duration=(0,eJ1.calculateDurationInMs)(J),this.failure=Ng(W,Y,A),this.serverConnectionId=X,this.databaseName=F.databaseName}get hasServiceId(){return!!this.serviceId}}JX1.CommandFailedEvent=AX1;JX1.SENSITIVE_COMMANDS=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]);var y90=new Set(["hello",zB.LEGACY_HELLO_COMMAND,zB.LEGACY_HELLO_COMMAND_CAMEL_CASE]),Vg=($)=>Object.keys($)[0],u90=($)=>$.ns.split(".")[1],Ng=($,F,A)=>JX1.SENSITIVE_COMMANDS.has($)||y90.has($)&&F.speculativeAuthenticate?{}:A,sJ1={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},oJ1={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldSelector:"projection"};function Cg($){if($ instanceof Eg.OpMsgRequest){let J={...$.command};if(J.ops instanceof Eg.DocumentSequence)J.ops=J.ops.documents;if(J.nsInfo instanceof Eg.DocumentSequence)J.nsInfo=J.nsInfo.documents;return J}if($.query?.$query){let J;if($.ns==="admin.$cmd")J=Object.assign({},$.query.$query);else J={find:u90($)},Object.keys(sJ1).forEach((X)=>{if($.query[X]!=null)J[sJ1[X]]={...$.query[X]}});return Object.keys(oJ1).forEach((X)=>{let Y=X;if($[Y]!=null)J[oJ1[Y]]=$[Y]}),J}let F={},A={...$};if($.query)F={...$.query},A.query=F;return $.query?F:A}function h90($){if(!$)return $;return $.result?$.result:$}function Mg($){let F;if("id"in $)F=$.id;return{address:$.address,serviceId:$.serviceId,connectionId:F}}});var HB=O((ZX1)=>{Object.defineProperty(ZX1,"__esModule",{value:!0});ZX1.ServerDescription=void 0;ZX1.parseServerType=YX1;ZX1.compareTopologyVersion=WX1;var Zz=w0(),l90=_1(),Dz=l1(),n4=B7(),p90=new Set([n4.ServerType.RSPrimary,n4.ServerType.Standalone,n4.ServerType.Mongos,n4.ServerType.LoadBalancer]),i90=new Set([n4.ServerType.RSPrimary,n4.ServerType.RSSecondary,n4.ServerType.Mongos,n4.ServerType.Standalone,n4.ServerType.LoadBalancer]);class XX1{constructor($,F,A={}){if($==null||$==="")throw new l90.MongoRuntimeError("ServerDescription must be provided with a non-empty address");this.address=typeof $==="string"?Dz.HostAddress.fromString($).toString():$.toString(),this.type=YX1(F,A),this.hosts=F?.hosts?.map((J)=>J.toLowerCase())??[],this.passives=F?.passives?.map((J)=>J.toLowerCase())??[],this.arbiters=F?.arbiters?.map((J)=>J.toLowerCase())??[],this.tags=F?.tags??{},this.minWireVersion=F?.minWireVersion??0,this.maxWireVersion=F?.maxWireVersion??0,this.roundTripTime=A?.roundTripTime??-1,this.minRoundTripTime=A?.minRoundTripTime??0,this.lastUpdateTime=(0,Dz.now)(),this.lastWriteDate=F?.lastWrite?.lastWriteDate??0,this.error=A.error??null,this.error?.stack,this.topologyVersion=this.error?.topologyVersion??F?.topologyVersion??null,this.setName=F?.setName??null,this.setVersion=F?.setVersion??null,this.electionId=F?.electionId??null,this.logicalSessionTimeoutMinutes=F?.logicalSessionTimeoutMinutes??null,this.maxMessageSizeBytes=F?.maxMessageSizeBytes??null,this.maxWriteBatchSize=F?.maxWriteBatchSize??null,this.maxBsonObjectSize=F?.maxBsonObjectSize??null,this.primary=F?.primary??null,this.me=F?.me?.toLowerCase()??null,this.$clusterTime=F?.$clusterTime??null,this.iscryptd=Boolean(F?.iscryptd)}get hostAddress(){return Dz.HostAddress.fromString(this.address)}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===n4.ServerType.RSSecondary||this.isWritable}get isDataBearing(){return i90.has(this.type)}get isWritable(){return p90.has(this.type)}get host(){let $=`:${this.port}`.length;return this.address.slice(0,-$)}get port(){let $=this.address.split(":").pop();return $?Number.parseInt($,10):27017}equals($){let F=this.topologyVersion===$?.topologyVersion||WX1(this.topologyVersion,$?.topologyVersion)===0,A=this.electionId!=null&&$?.electionId!=null?(0,Dz.compareObjectId)(this.electionId,$.electionId)===0:this.electionId===$?.electionId;return $!=null&&$.iscryptd===this.iscryptd&&(0,Dz.errorStrictEqual)(this.error,$.error)&&this.type===$.type&&this.minWireVersion===$.minWireVersion&&(0,Dz.arrayStrictEqual)(this.hosts,$.hosts)&&n90(this.tags,$.tags)&&this.setName===$.setName&&this.setVersion===$.setVersion&&A&&this.primary===$.primary&&this.logicalSessionTimeoutMinutes===$.logicalSessionTimeoutMinutes&&F}}ZX1.ServerDescription=XX1;function YX1($,F){if(F?.loadBalanced)return n4.ServerType.LoadBalancer;if(!$||!$.ok)return n4.ServerType.Unknown;if($.isreplicaset)return n4.ServerType.RSGhost;if($.msg&&$.msg==="isdbgrid")return n4.ServerType.Mongos;if($.setName)if($.hidden)return n4.ServerType.RSOther;else if($.isWritablePrimary)return n4.ServerType.RSPrimary;else if($.secondary)return n4.ServerType.RSSecondary;else if($.arbiterOnly)return n4.ServerType.RSArbiter;else return n4.ServerType.RSOther;return n4.ServerType.Standalone}function n90($,F){let A=Object.keys($),J=Object.keys(F);return A.length===J.length&&A.every((X)=>F[X]===$[X])}function WX1($,F){if($==null||F==null)return-1;if(!$.processId.equals(F.processId))return-1;let A=typeof $.counter==="bigint"?Zz.Long.fromBigInt($.counter):Zz.Long.isLong($.counter)?$.counter:Zz.Long.fromNumber($.counter),J=typeof F.counter==="bigint"?Zz.Long.fromBigInt(F.counter):Zz.Long.isLong(F.counter)?F.counter:Zz.Long.fromNumber(F.counter);return A.compare(J)}});var UX1=O((zX1)=>{Object.defineProperty(zX1,"__esModule",{value:!0});zX1.StreamDescription=void 0;var t90=w0(),s90=B7(),o90=HB(),e90=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes"];class GX1{constructor($,F){this.hello=null,this.address=$,this.type=s90.ServerType.Unknown,this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48000000,this.maxWriteBatchSize=1e5,this.logicalSessionTimeoutMinutes=F?.logicalSessionTimeoutMinutes,this.loadBalanced=!!F?.loadBalanced,this.compressors=F&&F.compressors&&Array.isArray(F.compressors)?F.compressors:[],this.serverConnectionId=null}receiveResponse($){if($==null)return;if(this.hello=$,this.type=(0,o90.parseServerType)($),"connectionId"in $)this.serverConnectionId=this.parseServerConnectionID($.connectionId);else this.serverConnectionId=null;for(let F of e90){if($[F]!=null)this[F]=$[F];if("__nodejs_mock_server__"in $)this.__nodejs_mock_server__=$.__nodejs_mock_server__}if($.compression)this.compressor=this.compressors.filter((F)=>$.compression?.includes(F))[0]}parseServerConnectionID($){return t90.Long.isLong($)?$.toBigInt():BigInt($)}}zX1.StreamDescription=GX1});var KX1=O((QX1)=>{Object.defineProperty(QX1,"__esModule",{value:!0});QX1.onData=$80;var UB=l1();function $80($,{timeoutContext:F,signal:A}){A?.throwIfAborted();let J=new UB.List,X=new UB.List,Y=null,W=!1,Z={next(){let Q=J.shift();if(Q!=null)return Promise.resolve({value:Q,done:!1});if(Y!=null){let E=Promise.reject(Y);return Y=null,E}if(W)return U();let{promise:B,resolve:q,reject:L}=(0,UB.promiseWithResolvers)();return X.push({resolve:q,reject:L}),B},return(){return U()},throw(Q){return H(Q),Promise.resolve({value:void 0,done:!0})},[Symbol.asyncIterator](){return this},async[Symbol.asyncDispose](){await U()}};$.on("data",z),$.on("error",H);let D=(0,UB.addAbortListener)(A,function(){H(this.reason)}),G=F?.timeoutForSocketRead;return G?.throwIfExpired(),G?.then(void 0,H),Z;function z(Q){let B=X.shift();if(B!=null)B.resolve({value:Q,done:!1});else J.push(Q)}function H(Q){let B=X.shift();if(B!=null)B.reject(Q);else Y=Q;U()}function U(){$.off("data",z),$.off("error",H),D?.[UB.kDispose](),W=!0,G?.clear();let Q={value:void 0,done:W};for(let B of X)B.resolve(Q);return Promise.resolve(Q)}}});var Ig=O((VX1)=>{Object.defineProperty(VX1,"__esModule",{value:!0});VX1.TopologyDescription=void 0;var A80=w0(),HC=dA(),zC=_1(),Rg=l1(),s0=B7(),lX=HB(),J80=HC.MIN_SUPPORTED_SERVER_VERSION,X80=HC.MAX_SUPPORTED_SERVER_VERSION,BX1=HC.MIN_SUPPORTED_WIRE_VERSION,wX1=HC.MAX_SUPPORTED_WIRE_VERSION,Y80=new Set([s0.ServerType.Mongos,s0.ServerType.Unknown]),qX1=new Set([s0.ServerType.Mongos,s0.ServerType.Standalone]),LX1=new Set([s0.ServerType.RSSecondary,s0.ServerType.RSArbiter,s0.ServerType.RSOther]);class QB{constructor($,F=null,A=null,J=null,X=null,Y=null,W=null){W=W??{},this.type=$??s0.TopologyType.Unknown,this.servers=F??new Map,this.stale=!1,this.compatible=!0,this.heartbeatFrequencyMS=W.heartbeatFrequencyMS??0,this.localThresholdMS=W.localThresholdMS??15,this.setName=A??null,this.maxElectionId=X??null,this.maxSetVersion=J??null,this.commonWireVersion=Y??0;for(let Z of this.servers.values()){if(Z.type===s0.ServerType.Unknown||Z.type===s0.ServerType.LoadBalancer)continue;if(Z.minWireVersion>wX1)this.compatible=!1,this.compatibilityError=`Server at ${Z.address} requires wire version ${Z.minWireVersion}, but this version of the driver only supports up to ${wX1} (MongoDB ${X80})`;if(Z.maxWireVersion<BX1){this.compatible=!1,this.compatibilityError=`Server at ${Z.address} reports wire version ${Z.maxWireVersion}, but this version of the driver requires at least ${BX1} (MongoDB ${J80}).`;break}}this.logicalSessionTimeoutMinutes=null;for(let[,Z]of this.servers)if(Z.isReadable){if(Z.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=Z.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,Z.logicalSessionTimeoutMinutes)}}updateFromSrvPollingEvent($,F=0){let A=$.hostnames(),J=new Set(this.servers.keys()),X=new Set(A),Y=new Set;for(let Z of J)if(X.delete(Z),!A.has(Z))Y.add(Z);if(X.size===0&&Y.size===0)return this;let W=new Map(this.servers);for(let Z of Y)W.delete(Z);if(X.size>0){if(F===0)for(let Z of X)W.set(Z,new lX.ServerDescription(Z));else if(W.size<F){let Z=(0,Rg.shuffle)(X,F-W.size);for(let D of Z)W.set(D,new lX.ServerDescription(D))}}return new QB(this.type,W,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}update($){let F=$.address,{type:A,setName:J,maxSetVersion:X,maxElectionId:Y,commonWireVersion:W}=this,Z=$.type,D=new Map(this.servers);if($.maxWireVersion!==0)if(W==null)W=$.maxWireVersion;else W=Math.min(W,$.maxWireVersion);if(typeof $.setName==="string"&&typeof J==="string"&&$.setName!==J)if(A===s0.TopologyType.Single)$=new lX.ServerDescription(F);else D.delete(F);if(D.set(F,$),A===s0.TopologyType.Single)return new QB(s0.TopologyType.Single,D,J,X,Y,W,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS});if(A===s0.TopologyType.Unknown)if(Z===s0.ServerType.Standalone&&this.servers.size!==1)D.delete(F);else A=W80(Z);if(A===s0.TopologyType.Sharded){if(!Y80.has(Z))D.delete(F)}if(A===s0.TopologyType.ReplicaSetNoPrimary){if(qX1.has(Z))D.delete(F);if(Z===s0.ServerType.RSPrimary){let G=EX1(D,$,J,X,Y);A=G[0],J=G[1],X=G[2],Y=G[3]}else if(LX1.has(Z)){let G=D80(D,$,J);A=G[0],J=G[1]}}if(A===s0.TopologyType.ReplicaSetWithPrimary)if(qX1.has(Z))D.delete(F),A=$Z(D);else if(Z===s0.ServerType.RSPrimary){let G=EX1(D,$,J,X,Y);A=G[0],J=G[1],X=G[2],Y=G[3]}else if(LX1.has(Z))A=Z80(D,$,J);else A=$Z(D);return new QB(A,D,J,X,Y,W,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}get error(){let $=Array.from(this.servers.values()).filter((F)=>F.error);if($.length>0)return $[0].error;return null}get hasKnownServers(){return Array.from(this.servers.values()).some(($)=>$.type!==s0.ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some(($)=>$.isDataBearing)}hasServer($){return this.servers.has($)}toJSON(){return A80.EJSON.serialize(this)}}VX1.TopologyDescription=QB;function W80($){switch($){case s0.ServerType.Standalone:return s0.TopologyType.Single;case s0.ServerType.Mongos:return s0.TopologyType.Sharded;case s0.ServerType.RSPrimary:return s0.TopologyType.ReplicaSetWithPrimary;case s0.ServerType.RSOther:case s0.ServerType.RSSecondary:return s0.TopologyType.ReplicaSetNoPrimary;default:return s0.TopologyType.Unknown}}function EX1($,F,A=null,J=null,X=null){let Y=(D,G,z)=>{return`primary marked stale due to electionId/setVersion mismatch: server setVersion: ${D.setVersion}, server electionId: ${D.electionId}, topology setVersion: ${G}, topology electionId: ${z}`};if(A=A||F.setName,A!==F.setName)return $.delete(F.address),[$Z($),A,J,X];if(F.maxWireVersion>=17){let D=(0,Rg.compareObjectId)(X,F.electionId),G=D===0,z=D===-1,H=(J??-1)<=(F.setVersion??-1);if(z||G&&H)X=F.electionId,J=F.setVersion;else return $.set(F.address,new lX.ServerDescription(F.address,void 0,{error:new zC.MongoStalePrimaryError(Y(F,J,X))})),[$Z($),A,J,X]}else{let D=F.electionId?F.electionId:null;if(F.setVersion&&D){if(J&&X){if(J>F.setVersion||(0,Rg.compareObjectId)(X,D)>0)return $.set(F.address,new lX.ServerDescription(F.address,void 0,{error:new zC.MongoStalePrimaryError(Y(F,J,X))})),[$Z($),A,J,X]}X=F.electionId}if(F.setVersion!=null&&(J==null||F.setVersion>J))J=F.setVersion}for(let[D,G]of $)if(G.type===s0.ServerType.RSPrimary&&G.address!==F.address){$.set(D,new lX.ServerDescription(G.address,void 0,{error:new zC.MongoStalePrimaryError("primary marked stale due to discovery of newer primary")}));break}F.allHosts.forEach((D)=>{if(!$.has(D))$.set(D,new lX.ServerDescription(D))});let W=Array.from($.keys()),Z=F.allHosts;return W.filter((D)=>Z.indexOf(D)===-1).forEach((D)=>{$.delete(D)}),[$Z($),A,J,X]}function Z80($,F,A=null){if(A==null)throw new zC.MongoRuntimeError('Argument "setName" is required if connected to a replica set');if(A!==F.setName||F.me&&F.address!==F.me)$.delete(F.address);return $Z($)}function D80($,F,A=null){let J=s0.TopologyType.ReplicaSetNoPrimary;if(A=A??F.setName,A!==F.setName)return $.delete(F.address),[J,A];if(F.allHosts.forEach((X)=>{if(!$.has(X))$.set(X,new lX.ServerDescription(X))}),F.me&&F.address!==F.me)$.delete(F.address);return[J,A]}function $Z($){for(let F of $.values())if(F.type===s0.ServerType.RSPrimary)return s0.TopologyType.ReplicaSetWithPrimary;return s0.TopologyType.ReplicaSetNoPrimary}});var PX1=O((MX1)=>{Object.defineProperty(MX1,"__esModule",{value:!0});MX1.getReadPreference=H80;MX1.isSharded=U80;var G80=_1(),Tg=e4(),CX1=B7(),z80=Ig();function H80($){let F=$?.readPreference??Tg.ReadPreference.primary;if(typeof F==="string")F=Tg.ReadPreference.fromString(F);if(!(F instanceof Tg.ReadPreference))throw new G80.MongoInvalidArgumentError('Option "readPreference" must be a ReadPreference instance');return F}function U80($){if($==null)return!1;if($.description&&$.description.type===CX1.ServerType.Mongos)return!0;if($.description&&$.description instanceof z80.TopologyDescription)return Array.from($.description.servers.values()).some((A)=>A.type===CX1.ServerType.Mongos);return!1}});var QC=O((SX1)=>{Object.defineProperty(SX1,"__esModule",{value:!0});SX1.CryptoConnection=SX1.SizedMessageTransform=SX1.Connection=void 0;SX1.hasSessionSupport=M80;var B80=Z1("stream"),jX1=Z1("timers"),w80=w0(),pX=O4(),p2=_1(),RX1=SX(),q80=E7(),L80=e4(),E80=B7(),IX1=SK(),TX1=$9(),P7=l1(),jg=Pg(),UC=JB(),V80=UX1(),N80=XB(),C80=KX1(),KB=T6(),Og=PX1();function M80($){return $.description.logicalSessionTimeoutMinutes!=null}function P80($,F){if(F.proxyHost)return F.hostAddress.toString();let{remoteAddress:A,remotePort:J}=$;if(typeof A==="string"&&typeof J==="number")return P7.HostAddress.fromHostPort(A,J).toString();return(0,P7.uuidV4)().toString("hex")}class mF extends q80.TypedEventEmitter{static{this.COMMAND_STARTED=pX.COMMAND_STARTED}static{this.COMMAND_SUCCEEDED=pX.COMMAND_SUCCEEDED}static{this.COMMAND_FAILED=pX.COMMAND_FAILED}static{this.CLUSTER_TIME_RECEIVED=pX.CLUSTER_TIME_RECEIVED}static{this.CLOSE=pX.CLOSE}static{this.PINNED=pX.PINNED}static{this.UNPINNED=pX.UNPINNED}constructor($,F){super();this.lastHelloMS=-1,this.helloOk=!1,this.delayedTimeoutId=null,this.closed=!1,this.clusterTime=null,this.error=null,this.dataEvents=null,this.on("error",P7.noop),this.socket=$,this.id=F.id,this.address=P80($,F),this.socketTimeoutMS=F.socketTimeoutMS??0,this.monitorCommands=F.monitorCommands,this.serverApi=F.serverApi,this.mongoLogger=F.mongoLogger,this.established=!1,this.description=new V80.StreamDescription(this.address,F),this.generation=F.generation,this.lastUseTime=(0,P7.now)(),this.messageStream=this.socket.on("error",this.onSocketError.bind(this)).pipe(new Sg({connection:this})).on("error",this.onTransformError.bind(this)),this.socket.on("close",this.onClose.bind(this)),this.socket.on("timeout",this.onTimeout.bind(this)),this.messageStream.pause()}get hello(){return this.description.hello}set hello($){this.description.receiveResponse($),Object.freeze(this.description)}get serviceId(){return this.hello?.serviceId}get loadBalanced(){return this.description.loadBalanced}get idleTime(){return(0,P7.calculateDurationInMs)(this.lastUseTime)}get hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}get supportsOpMsg(){return this.description!=null&&(0,P7.maxWireVersion)(this)>=6&&!this.description.__nodejs_mock_server__}get shouldEmitAndLogCommand(){return(this.monitorCommands||this.established&&!this.authContext?.reauthenticating&&this.mongoLogger?.willLog(RX1.MongoLoggableComponent.COMMAND,RX1.SeverityLevel.DEBUG))??!1}markAvailable(){this.lastUseTime=(0,P7.now)()}onSocketError($){this.onError(new p2.MongoNetworkError($.message,{cause:$}))}onTransformError($){this.onError($)}onError($){this.cleanup($)}onClose(){let $=`connection ${this.id} to ${this.address} closed`;this.cleanup(new p2.MongoNetworkError($))}onTimeout(){this.delayedTimeoutId=(0,jX1.setTimeout)(()=>{let $=`connection ${this.id} to ${this.address} timed out`,F=this.hello==null;this.cleanup(new p2.MongoNetworkTimeoutError($,{beforeHandshake:F}))},1).unref()}destroy(){if(this.closed)return;this.removeAllListeners(mF.PINNED),this.removeAllListeners(mF.UNPINNED);let $=`connection ${this.id} to ${this.address} closed`;this.cleanup(new p2.MongoNetworkError($))}cleanup($){if(this.closed)return;this.socket.destroy(),this.error=$,this.dataEvents?.throw($).then(void 0,P7.squashError),this.closed=!0,this.emit(mF.CLOSE)}prepareCommand($,F,A){let J={...F},X=(0,Og.getReadPreference)(A),Y=A?.session,W=this.clusterTime;if(this.serverApi){let{version:G,strict:z,deprecationErrors:H}=this.serverApi;if(J.apiVersion=G,z!=null)J.apiStrict=z;if(H!=null)J.apiDeprecationErrors=H}if(this.hasSessionSupport&&Y){if(Y.clusterTime&&W&&Y.clusterTime.clusterTime.greaterThan(W.clusterTime))W=Y.clusterTime;let G=(0,IX1.applySession)(Y,J,A);if(G)throw G}else if(Y?.explicit)throw new p2.MongoCompatibilityError("Current topology does not support sessions");if(W)J.$clusterTime=W;if(this.description.type!==E80.ServerType.Standalone){if(!(0,Og.isSharded)(this)&&!this.description.loadBalanced&&this.supportsOpMsg&&A.directConnection===!0&&X?.mode==="primary")J.$readPreference=L80.ReadPreference.primaryPreferred.toJSON();else if((0,Og.isSharded)(this)&&!this.supportsOpMsg&&X?.mode!=="primary")J={$query:J,$readPreference:X.toJSON()};else if(X?.mode!=="primary")J.$readPreference=X.toJSON()}let Z={numberToSkip:0,numberToReturn:-1,checkKeys:!1,secondaryOk:X.secondaryOk(),...A};return A.timeoutContext?.addMaxTimeMSToCommand(J,A),this.supportsOpMsg?new UC.OpMsgRequest($,J,Z):new UC.OpQueryRequest($,J,Z)}async*sendWire($,F,A){this.throwIfAborted();let J=F.socketTimeoutMS??F?.timeoutContext?.getSocketTimeoutMS()??this.socketTimeoutMS;this.socket.setTimeout(J);try{if(await this.writeCommand($,{agreedCompressor:this.description.compressor??"none",zlibCompressionLevel:this.description.zlibCompressionLevel,timeoutContext:F.timeoutContext,signal:F.signal}),$.moreToCome){yield KB.MongoDBResponse.empty;return}if(this.throwIfAborted(),F.timeoutContext?.csotEnabled()&&F.timeoutContext.minRoundTripTime!=null&&F.timeoutContext.remainingTimeMS<F.timeoutContext.minRoundTripTime)throw new p2.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");for await(let X of this.readMany(F)){this.socket.setTimeout(0);let Y=X.parse();yield(A??KB.MongoDBResponse).make(Y),this.throwIfAborted(),this.socket.setTimeout(J)}}finally{this.socket.setTimeout(0)}}async*sendCommand($,F,A,J){A?.signal?.throwIfAborted();let X=this.prepareCommand($.db,F,A),Y=0;if(this.shouldEmitAndLogCommand)Y=(0,P7.now)(),this.emitAndLogCommand(this.monitorCommands,mF.COMMAND_STARTED,X.databaseName,this.established,new jg.CommandStartedEvent(this,X,this.description.serverConnectionId));let W=A.documentsReturnedIn==null||!A.raw?A:{...A,raw:!1,fieldsAsRaw:{[A.documentsReturnedIn]:!0}},Z=void 0,D=void 0;try{this.throwIfAborted();for await(Z of this.sendWire(X,A,J)){if(D=void 0,A.session!=null)(0,IX1.updateSessionFromResponse)(A.session,Z);if(Z.$clusterTime)this.clusterTime=Z.$clusterTime,this.emit(mF.CLUSTER_TIME_RECEIVED,Z.$clusterTime);if(Z.ok===0){if(A.timeoutContext?.csotEnabled()&&Z.isMaxTimeExpiredError)throw new p2.MongoOperationTimeoutError("Server reported a timeout error",{cause:new p2.MongoServerError(D??=Z.toObject(W))});throw new p2.MongoServerError(D??=Z.toObject(W))}if(this.shouldEmitAndLogCommand)this.emitAndLogCommand(this.monitorCommands,mF.COMMAND_SUCCEEDED,X.databaseName,this.established,new jg.CommandSucceededEvent(this,X,X.moreToCome?{ok:1}:D??=Z.toObject(W),Y,this.description.serverConnectionId));if(J==null)yield D??=Z.toObject(W);else yield Z;this.throwIfAborted()}}catch(G){if(this.shouldEmitAndLogCommand)this.emitAndLogCommand(this.monitorCommands,mF.COMMAND_FAILED,X.databaseName,this.established,new jg.CommandFailedEvent(this,X,G,Y,this.description.serverConnectionId));throw G}}async command($,F,A={},J){this.throwIfAborted(),A.signal?.throwIfAborted();for await(let X of this.sendCommand($,F,A,J)){if(A.timeoutContext?.csotEnabled()){if(KB.MongoDBResponse.is(X)){if(X.isMaxTimeExpiredError)throw new p2.MongoOperationTimeoutError("Server reported a timeout error",{cause:new p2.MongoServerError(X.toObject())})}else if(Array.isArray(X?.writeErrors)&&X.writeErrors.some((Y)=>Y?.code===p2.MONGODB_ERROR_CODES.MaxTimeMSExpired)||X?.writeConcernError?.code===p2.MONGODB_ERROR_CODES.MaxTimeMSExpired)throw new p2.MongoOperationTimeoutError("Server reported a timeout error",{cause:new p2.MongoServerError(X)})}return X}throw new p2.MongoUnexpectedServerResponseError("Unable to get response from server")}exhaustCommand($,F,A,J){(async()=>{this.throwIfAborted();for await(let Y of this.sendCommand($,F,A))J(void 0,Y),this.throwIfAborted();throw new p2.MongoUnexpectedServerResponseError("Server ended moreToCome unexpectedly")})().then(void 0,J)}throwIfAborted(){if(this.error)throw this.error}async writeCommand($,F){let A=F.agreedCompressor==="none"||!UC.OpCompressedRequest.canCompress($)?$:new UC.OpCompressedRequest($,{agreedCompressor:F.agreedCompressor??"none",zlibCompressionLevel:F.zlibCompressionLevel??0}),J=Buffer.concat(await A.toBin());if(F.timeoutContext?.csotEnabled()){if(F.timeoutContext.minRoundTripTime!=null&&F.timeoutContext.remainingTimeMS<F.timeoutContext.minRoundTripTime)throw new p2.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining")}try{if(this.socket.write(J))return}catch(Z){let D=new p2.MongoNetworkError("unexpected error writing to socket",{cause:Z});throw this.onError(D),D}let X=(0,P7.once)(this.socket,"drain",F),Y=F?.timeoutContext?.timeoutForSocketWrite,W=Y?Promise.race([X,Y]):X;try{return await W}catch(Z){if(TX1.TimeoutError.is(Z)){let D=new p2.MongoOperationTimeoutError("Timed out at socket write");throw this.onError(D),D}else if(Z===F.signal?.reason)this.onError(Z);throw Z}finally{Y?.clear()}}async*readMany($){try{this.dataEvents=(0,C80.onData)(this.messageStream,$),this.messageStream.resume();for await(let F of this.dataEvents){let A=await(0,N80.decompressResponse)(F);if(yield A,!A.moreToCome)return}}catch(F){if(TX1.TimeoutError.is(F)){let A=new p2.MongoOperationTimeoutError(`Timed out during socket read (${F.duration}ms)`);throw this.dataEvents=null,this.onError(A),A}else if(F===$.signal?.reason)this.onError(F);throw F}finally{this.dataEvents=null,this.messageStream.pause()}}}SX1.Connection=mF;class Sg extends B80.Transform{constructor({connection:$}){super({writableObjectMode:!1,readableObjectMode:!0});this.bufferPool=new P7.BufferPool,this.connection=$}_transform($,F,A){if(this.connection.delayedTimeoutId!=null)(0,jX1.clearTimeout)(this.connection.delayedTimeoutId),this.connection.delayedTimeoutId=null;this.bufferPool.append($);while(this.bufferPool.length){let J=this.bufferPool.getInt32();if(J==null)break;if(J<0)return A(new p2.MongoParseError(`Message size cannot be negative: ${J}`));if(J>this.bufferPool.length)break;let X=this.bufferPool.read(J);if(!this.push(X))return A(new p2.MongoRuntimeError("SizedMessageTransform does not support backpressure"))}A()}}SX1.SizedMessageTransform=Sg;class OX1 extends mF{constructor($,F){super($,F);this.autoEncrypter=F.autoEncrypter}async command($,F,A,J){let{autoEncrypter:X}=this;if(!X)throw new p2.MongoRuntimeError("No AutoEncrypter available for encryption");if((0,P7.maxWireVersion)(this)===0)return await super.command($,F,A,J);let W=F.find||F.findAndModify?F.sort:null,Z=F.createIndexes?F.indexes.map((U)=>U.key):null,D=await X.encrypt($.toString(),F,A);if(W!=null&&(F.find||F.findAndModify))D.sort=W;if(Z!=null&&F.createIndexes)for(let[U,Q]of Z.entries())D.indexes[U].key=Q;let G=await super.command($,D,A,J??KB.MongoDBResponse),z=await X.decrypt(G.toBytes(),A),H=J?.make(z)??(0,w80.deserialize)(z,A);if(X[pX.kDecorateResult]){if(J==null)(0,P7.decorateDecryptionResult)(H,G.toObject(),!0);else if(H instanceof KB.CursorResponse)H.encryptedResponse=G}return H}}SX1.CryptoConnection=OX1});var xg=O((yX1)=>{Object.defineProperty(yX1,"__esModule",{value:!0});yX1.LEGAL_TCP_SOCKET_OPTIONS=yX1.LEGAL_TLS_SOCKET_OPTIONS=void 0;yX1.connect=_80;yX1.makeConnection=gX1;yX1.performInitialHandshake=fX1;yX1.prepareHandshakeDocument=vX1;yX1.makeSocket=BC;var bX1=Z1("net"),j80=Z1("tls"),xX1=O4(),O80=Q$(),Y4=_1(),_g=l1(),S80=xX(),KC=fF(),kX1=QC(),Gz=dA();async function _80($){let F=null;try{let A=await BC($);return F=gX1($,A),await fX1(F,$),F}catch(A){throw F?.destroy(),A}}function gX1($,F){let A=$.connectionType??kX1.Connection;if($.autoEncrypter)A=kX1.CryptoConnection;return new A(F,$)}function k80($,F){let A=Number($.maxWireVersion),J=Number($.minWireVersion),X=!Number.isNaN(A)&&A>=Gz.MIN_SUPPORTED_WIRE_VERSION,Y=!Number.isNaN(J)&&J<=Gz.MAX_SUPPORTED_WIRE_VERSION;if(X){if(Y)return null;let Z=`Server at ${F.hostAddress} reports minimum wire version ${JSON.stringify($.minWireVersion)}, but this version of the Node.js Driver requires at most ${Gz.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${Gz.MAX_SUPPORTED_SERVER_VERSION})`;return new Y4.MongoCompatibilityError(Z)}let W=`Server at ${F.hostAddress} reports maximum wire version ${JSON.stringify($.maxWireVersion)??0}, but this version of the Node.js Driver requires at least ${Gz.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${Gz.MIN_SUPPORTED_SERVER_VERSION})`;return new Y4.MongoCompatibilityError(W)}async function fX1($,F){let A=F.credentials;if(A){if(A.mechanism!==KC.AuthMechanism.MONGODB_DEFAULT&&!F.authProviders.getOrCreateProvider(A.mechanism,A.mechanismProperties))throw new Y4.MongoInvalidArgumentError(`AuthMechanism '${A.mechanism}' not supported`)}let J=new S80.AuthContext($,A,F);$.authContext=J;let X=await vX1(J),Y={...F,raw:!1};if(typeof F.connectTimeoutMS==="number")Y.socketTimeoutMS=F.connectTimeoutMS;let W=new Date().getTime(),Z=await G(X,Y);if(!("isWritablePrimary"in Z))Z.isWritablePrimary=Z[xX1.LEGACY_HELLO_COMMAND];if(Z.helloOk)$.helloOk=!0;let D=k80(Z,F);if(D)throw D;if(F.loadBalanced){if(!Z.serviceId)throw new Y4.MongoCompatibilityError("Driver attempted to initialize in load balancing mode, but the server does not support this mode.")}if($.hello=Z,$.lastHelloMS=new Date().getTime()-W,!Z.arbiterOnly&&A){J.response=Z;let z=A.resolveAuthMechanism(Z),H=F.authProviders.getOrCreateProvider(z.mechanism,z.mechanismProperties);if(!H)throw new Y4.MongoInvalidArgumentError(`No AuthProvider for ${z.mechanism} defined.`);try{await H.auth(J)}catch(U){if(U instanceof Y4.MongoError){if(U.addErrorLabel(Y4.MongoErrorLabel.HandshakeError),(0,Y4.needsRetryableWriteLabel)(U,Z.maxWireVersion,$.description.type))U.addErrorLabel(Y4.MongoErrorLabel.RetryableWriteError)}throw U}}$.established=!0;async function G(z,H){try{return await $.command((0,_g.ns)("admin.$cmd"),z,H)}catch(U){if(U instanceof Y4.MongoError)U.addErrorLabel(Y4.MongoErrorLabel.HandshakeError);throw U}}}async function vX1($){let F=$.options,A=F.compressors?F.compressors:[],{serverApi:J}=$.connection,X=await F.metadata,Y={[J?.version||F.loadBalanced===!0?"hello":xX1.LEGACY_HELLO_COMMAND]:1,helloOk:!0,client:X,compression:A};if(F.loadBalanced===!0)Y.loadBalanced=!0;let W=$.credentials;if(W){if(W.mechanism===KC.AuthMechanism.MONGODB_DEFAULT&&W.username){Y.saslSupportedMechs=`${W.source}.${W.username}`;let D=$.options.authProviders.getOrCreateProvider(KC.AuthMechanism.MONGODB_SCRAM_SHA256,W.mechanismProperties);if(!D)throw new Y4.MongoInvalidArgumentError(`No AuthProvider for ${KC.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);return await D.prepare(Y,$)}let Z=$.options.authProviders.getOrCreateProvider(W.mechanism,W.mechanismProperties);if(!Z)throw new Y4.MongoInvalidArgumentError(`No AuthProvider for ${W.mechanism} defined.`);return await Z.prepare(Y,$)}return Y}yX1.LEGAL_TLS_SOCKET_OPTIONS=["allowPartialTrustChain","ALPNProtocols","ca","cert","checkServerIdentity","ciphers","crl","ecdhCurve","key","minDHSize","passphrase","pfx","rejectUnauthorized","secureContext","secureProtocol","servername","session"];yX1.LEGAL_TCP_SOCKET_OPTIONS=["autoSelectFamily","autoSelectFamilyAttemptTimeout","keepAliveInitialDelay","family","hints","localAddress","localPort","lookup"];function kg($){let F=$.hostAddress;if(!F)throw new Y4.MongoInvalidArgumentError('Option "hostAddress" is required');let A={};for(let J of yX1.LEGAL_TCP_SOCKET_OPTIONS)if($[J]!=null)A[J]=$[J];if(A.keepAliveInitialDelay??=120000,A.keepAlive=!0,A.noDelay=$.noDelay??!0,typeof F.socketPath==="string")return A.path=F.socketPath,A;else if(typeof F.host==="string")return A.host=F.host,A.port=F.port,A;else throw new Y4.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(F)}`)}function b80($){let F=kg($);for(let A of yX1.LEGAL_TLS_SOCKET_OPTIONS)if($[A]!=null)F[A]=$[A];if($.existingSocket)F.socket=$.existingSocket;if(F.servername==null&&F.host&&!bX1.isIP(F.host))F.servername=F.host;return F}async function BC($){let F=$.tls??!1,A=$.connectTimeoutMS??30000,J=$.existingSocket,X;if($.proxyHost!=null)return await g80({...$,connectTimeoutMS:A});if(F){let G=j80.connect(b80($));if(typeof G.disableRenegotiation==="function")G.disableRenegotiation();X=G}else if(J)X=J;else X=bX1.createConnection(kg($));X.setTimeout(A);let Y=null,{promise:W,resolve:Z,reject:D}=(0,_g.promiseWithResolvers)();if(J)Z(X);else{let G=performance.now(),z=F?"secureConnect":"connect";if(X.once(z,()=>Z(X)).once("error",(H)=>D(new Y4.MongoNetworkError(Y4.MongoError.buildErrorMessage(H),{cause:H}))).once("timeout",()=>{D(new Y4.MongoNetworkTimeoutError(`Socket '${z}' timed out after ${performance.now()-G|0}ms (connectTimeoutMS: ${A})`))}).once("close",()=>D(new Y4.MongoNetworkError(`Socket closed after ${performance.now()-G|0} during connection establishment`))),$.cancellationToken!=null)Y=()=>D(new Y4.MongoNetworkError(`Socket connection establishment was cancelled after ${performance.now()-G|0}`)),$.cancellationToken.once("cancel",Y)}try{return X=await W,X}catch(G){throw X.destroy(),G}finally{if(X.setTimeout(0),Y!=null)$.cancellationToken?.removeListener("cancel",Y)}}var BB=null;function x80(){if(BB==null){let $=(0,O80.getSocks)();if("kModuleError"in $)throw $.kModuleError;BB=$}return BB}async function g80($){let F=_g.HostAddress.fromHostPort($.proxyHost??"",$.proxyPort??1080),A=await BC({...$,hostAddress:F,tls:!1,proxyHost:void 0}),J=kg($);if(typeof J.host!=="string"||typeof J.port!=="number")throw new Y4.MongoInvalidArgumentError("Can only make Socks5 connections to TCP hosts");BB??=x80();let X;try{X=(await BB.SocksClient.createConnection({existing_socket:A,timeout:$.connectTimeoutMS,command:"connect",destination:{host:J.host,port:J.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:$.proxyUsername||void 0,password:$.proxyPassword||void 0}})).socket}catch(Y){throw new Y4.MongoNetworkError(Y4.MongoError.buildErrorMessage(Y),{cause:Y})}return await BC({...$,existingSocket:X,proxyHost:void 0})}});var wC=O((aX1)=>{Object.defineProperty(aX1,"__esModule",{value:!0});aX1.ServerHeartbeatFailedEvent=aX1.ServerHeartbeatSucceededEvent=aX1.ServerHeartbeatStartedEvent=aX1.TopologyClosedEvent=aX1.TopologyOpeningEvent=aX1.TopologyDescriptionChangedEvent=aX1.ServerClosedEvent=aX1.ServerOpeningEvent=aX1.ServerDescriptionChangedEvent=void 0;var aA=O4();class hX1{constructor($,F,A,J){this.name=aA.SERVER_DESCRIPTION_CHANGED,this.topologyId=$,this.address=F,this.previousDescription=A,this.newDescription=J}}aX1.ServerDescriptionChangedEvent=hX1;class mX1{constructor($,F){this.name=aA.SERVER_OPENING,this.topologyId=$,this.address=F}}aX1.ServerOpeningEvent=mX1;class dX1{constructor($,F){this.name=aA.SERVER_CLOSED,this.topologyId=$,this.address=F}}aX1.ServerClosedEvent=dX1;class cX1{constructor($,F,A){this.name=aA.TOPOLOGY_DESCRIPTION_CHANGED,this.topologyId=$,this.previousDescription=F,this.newDescription=A}}aX1.TopologyDescriptionChangedEvent=cX1;class lX1{constructor($){this.name=aA.TOPOLOGY_OPENING,this.topologyId=$}}aX1.TopologyOpeningEvent=lX1;class pX1{constructor($){this.name=aA.TOPOLOGY_CLOSED,this.topologyId=$}}aX1.TopologyClosedEvent=pX1;class iX1{constructor($,F){this.name=aA.SERVER_HEARTBEAT_STARTED,this.connectionId=$,this.awaited=F}}aX1.ServerHeartbeatStartedEvent=iX1;class nX1{constructor($,F,A,J){this.name=aA.SERVER_HEARTBEAT_SUCCEEDED,this.connectionId=$,this.duration=F,this.reply=A??{},this.awaited=J}}aX1.ServerHeartbeatSucceededEvent=nX1;class rX1{constructor($,F,A,J){this.name=aA.SERVER_HEARTBEAT_FAILED,this.connectionId=$,this.duration=F,this.failure=A,this.awaited=J}}aX1.ServerHeartbeatFailedEvent=rX1});var fg=O((DY1)=>{Object.defineProperty(DY1,"__esModule",{value:!0});DY1.ConnectionPoolClearedEvent=DY1.ConnectionCheckedInEvent=DY1.ConnectionCheckedOutEvent=DY1.ConnectionCheckOutFailedEvent=DY1.ConnectionCheckOutStartedEvent=DY1.ConnectionClosedEvent=DY1.ConnectionReadyEvent=DY1.ConnectionCreatedEvent=DY1.ConnectionPoolClosedEvent=DY1.ConnectionPoolReadyEvent=DY1.ConnectionPoolCreatedEvent=DY1.ConnectionPoolMonitoringEvent=void 0;var B$=O4(),gg=l1();class R7{constructor($){this.time=new Date,this.address=$.address}}DY1.ConnectionPoolMonitoringEvent=R7;class sX1 extends R7{constructor($){super($);this.name=B$.CONNECTION_POOL_CREATED;let{maxConnecting:F,maxPoolSize:A,minPoolSize:J,maxIdleTimeMS:X,waitQueueTimeoutMS:Y}=$.options;this.options={maxConnecting:F,maxPoolSize:A,minPoolSize:J,maxIdleTimeMS:X,waitQueueTimeoutMS:Y}}}DY1.ConnectionPoolCreatedEvent=sX1;class oX1 extends R7{constructor($){super($);this.name=B$.CONNECTION_POOL_READY}}DY1.ConnectionPoolReadyEvent=oX1;class eX1 extends R7{constructor($){super($);this.name=B$.CONNECTION_POOL_CLOSED}}DY1.ConnectionPoolClosedEvent=eX1;class $Y1 extends R7{constructor($,F){super($);this.name=B$.CONNECTION_CREATED,this.connectionId=F.id}}DY1.ConnectionCreatedEvent=$Y1;class FY1 extends R7{constructor($,F,A){super($);this.name=B$.CONNECTION_READY,this.durationMS=(0,gg.now)()-A,this.connectionId=F.id}}DY1.ConnectionReadyEvent=FY1;class AY1 extends R7{constructor($,F,A,J){super($);this.name=B$.CONNECTION_CLOSED,this.connectionId=F.id,this.reason=A,this.serviceId=F.serviceId,this.error=J??null}}DY1.ConnectionClosedEvent=AY1;class JY1 extends R7{constructor($){super($);this.name=B$.CONNECTION_CHECK_OUT_STARTED}}DY1.ConnectionCheckOutStartedEvent=JY1;class XY1 extends R7{constructor($,F,A,J){super($);this.name=B$.CONNECTION_CHECK_OUT_FAILED,this.durationMS=(0,gg.now)()-A,this.reason=F,this.error=J}}DY1.ConnectionCheckOutFailedEvent=XY1;class YY1 extends R7{constructor($,F,A){super($);this.name=B$.CONNECTION_CHECKED_OUT,this.durationMS=(0,gg.now)()-A,this.connectionId=F.id}}DY1.ConnectionCheckedOutEvent=YY1;class WY1 extends R7{constructor($,F){super($);this.name=B$.CONNECTION_CHECKED_IN,this.connectionId=F.id}}DY1.ConnectionCheckedInEvent=WY1;class ZY1 extends R7{constructor($,F={}){super($);this.name=B$.CONNECTION_POOL_CLEARED,this.serviceId=F.serviceId,this.interruptInUseConnections=F.interruptInUseConnections}}DY1.ConnectionPoolClearedEvent=ZY1});var yg=O((QY1)=>{Object.defineProperty(QY1,"__esModule",{value:!0});QY1.WaitQueueTimeoutError=QY1.PoolClearedOnNetworkError=QY1.PoolClearedError=QY1.PoolClosedError=void 0;var qC=_1();class zY1 extends qC.MongoDriverError{constructor($){super("Attempted to check out a connection from closed connection pool");this.address=$.address}get name(){return"MongoPoolClosedError"}}QY1.PoolClosedError=zY1;class vg extends qC.MongoNetworkError{constructor($,F){let A=F?F:`Connection pool for ${$.address} was cleared because another operation failed with: "${$.serverError?.message}"`;super(A,$.serverError?{cause:$.serverError}:void 0);this.address=$.address,this.addErrorLabel(qC.MongoErrorLabel.PoolRequestedRetry)}get name(){return"MongoPoolClearedError"}}QY1.PoolClearedError=vg;class HY1 extends vg{constructor($){super($,`Connection to ${$.address} interrupted due to server monitor timeout`)}get name(){return"PoolClearedOnNetworkError"}}QY1.PoolClearedOnNetworkError=HY1;class UY1 extends qC.MongoDriverError{constructor($,F){super($);this.address=F}get name(){return"MongoWaitQueueTimeoutError"}}QY1.WaitQueueTimeoutError=UY1});var LY1=O((wY1)=>{Object.defineProperty(wY1,"__esModule",{value:!0});wY1.ConnectionPool=wY1.PoolState=void 0;var zz=Z1("timers"),V5=O4(),w$=_1(),BY1=E7(),G30=$9(),tA=l1(),z30=xg(),LC=QC(),i9=fg(),Hz=yg(),H30=Eb();wY1.PoolState=Object.freeze({paused:"paused",ready:"ready",closed:"closed"});class J9 extends BY1.TypedEventEmitter{static{this.CONNECTION_POOL_CREATED=V5.CONNECTION_POOL_CREATED}static{this.CONNECTION_POOL_CLOSED=V5.CONNECTION_POOL_CLOSED}static{this.CONNECTION_POOL_CLEARED=V5.CONNECTION_POOL_CLEARED}static{this.CONNECTION_POOL_READY=V5.CONNECTION_POOL_READY}static{this.CONNECTION_CREATED=V5.CONNECTION_CREATED}static{this.CONNECTION_READY=V5.CONNECTION_READY}static{this.CONNECTION_CLOSED=V5.CONNECTION_CLOSED}static{this.CONNECTION_CHECK_OUT_STARTED=V5.CONNECTION_CHECK_OUT_STARTED}static{this.CONNECTION_CHECK_OUT_FAILED=V5.CONNECTION_CHECK_OUT_FAILED}static{this.CONNECTION_CHECKED_OUT=V5.CONNECTION_CHECKED_OUT}static{this.CONNECTION_CHECKED_IN=V5.CONNECTION_CHECKED_IN}constructor($,F){super();if(this.on("error",tA.noop),this.options=Object.freeze({connectionType:LC.Connection,...F,maxPoolSize:F.maxPoolSize??100,minPoolSize:F.minPoolSize??0,maxConnecting:F.maxConnecting??2,maxIdleTimeMS:F.maxIdleTimeMS??0,waitQueueTimeoutMS:F.waitQueueTimeoutMS??0,minPoolSizeCheckFrequencyMS:F.minPoolSizeCheckFrequencyMS??100,autoEncrypter:F.autoEncrypter}),this.options.minPoolSize>this.options.maxPoolSize)throw new w$.MongoInvalidArgumentError("Connection pool minimum size must not be greater than maximum pool size");this.poolState=wY1.PoolState.paused,this.server=$,this.connections=new tA.List,this.pending=0,this.checkedOut=new Set,this.minPoolSizeTimer=void 0,this.generation=0,this.serviceGenerations=new Map,this.connectionCounter=(0,tA.makeCounter)(1),this.cancellationToken=new BY1.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.waitQueue=new tA.List,this.metrics=new H30.ConnectionPoolMetrics,this.processingWaitQueue=!1,this.mongoLogger=this.server.topology.client?.mongoLogger,this.component="connection",process.nextTick(()=>{this.emitAndLog(J9.CONNECTION_POOL_CREATED,new i9.ConnectionPoolCreatedEvent(this))})}get address(){return this.options.hostAddress.toString()}get closed(){return this.poolState===wY1.PoolState.closed}get totalConnectionCount(){return this.availableConnectionCount+this.pendingConnectionCount+this.currentCheckedOutCount}get availableConnectionCount(){return this.connections.length}get pendingConnectionCount(){return this.pending}get currentCheckedOutCount(){return this.checkedOut.size}get waitQueueSize(){return this.waitQueue.length}get loadBalanced(){return this.options.loadBalanced}get serverError(){return this.server.description.error}get checkedOutConnections(){return this.checkedOut}waitQueueErrorMetrics(){return this.metrics.info(this.options.maxPoolSize)}ready(){if(this.poolState!==wY1.PoolState.paused)return;this.poolState=wY1.PoolState.ready,this.emitAndLog(J9.CONNECTION_POOL_READY,new i9.ConnectionPoolReadyEvent(this)),(0,zz.clearTimeout)(this.minPoolSizeTimer),this.ensureMinPoolSize()}async checkOut($){let F=(0,tA.now)();this.emitAndLog(J9.CONNECTION_CHECK_OUT_STARTED,new i9.ConnectionCheckOutStartedEvent(this));let{promise:A,resolve:J,reject:X}=(0,tA.promiseWithResolvers)(),Y=$.timeoutContext.connectionCheckoutTimeout,W={resolve:J,reject:X,cancelled:!1,checkoutTime:F},Z=(0,tA.addAbortListener)($.signal,function(){W.cancelled=!0,X(this.reason)});this.waitQueue.push(W),process.nextTick(()=>this.processWaitQueue());try{return Y?.throwIfExpired(),await(Y?Promise.race([A,Y]):A)}catch(D){if(G30.TimeoutError.is(D)){Y?.clear(),W.cancelled=!0,this.emitAndLog(J9.CONNECTION_CHECK_OUT_FAILED,new i9.ConnectionCheckOutFailedEvent(this,"timeout",W.checkoutTime));let G=new Hz.WaitQueueTimeoutError(this.loadBalanced?this.waitQueueErrorMetrics():"Timed out while checking out a connection from connection pool",this.address);if($.timeoutContext.csotEnabled())throw new w$.MongoOperationTimeoutError("Timed out during connection checkout",{cause:G});throw G}throw D}finally{Z?.[tA.kDispose](),Y?.clear()}}checkIn($){if(!this.checkedOut.has($))return;let F=this.closed,A=this.connectionIsStale($),J=!!(F||A||$.closed);if(!J)$.markAvailable(),this.connections.unshift($);if(this.checkedOut.delete($),this.emitAndLog(J9.CONNECTION_CHECKED_IN,new i9.ConnectionCheckedInEvent(this,$)),J){let X=$.closed?"error":F?"poolClosed":"stale";this.destroyConnection($,X)}process.nextTick(()=>this.processWaitQueue())}clear($={}){if(this.closed)return;if(this.loadBalanced){let{serviceId:X}=$;if(!X)throw new w$.MongoRuntimeError("ConnectionPool.clear() called in load balanced mode with no serviceId.");let Y=X.toHexString(),W=this.serviceGenerations.get(Y);if(W==null)throw new w$.MongoRuntimeError("Service generations are required in load balancer mode.");else this.serviceGenerations.set(Y,W+1);this.emitAndLog(J9.CONNECTION_POOL_CLEARED,new i9.ConnectionPoolClearedEvent(this,{serviceId:X}));return}let F=$.interruptInUseConnections??!1,A=this.generation;this.generation+=1;let J=this.poolState===wY1.PoolState.paused;if(this.poolState=wY1.PoolState.paused,this.clearMinPoolSizeTimer(),!J)this.emitAndLog(J9.CONNECTION_POOL_CLEARED,new i9.ConnectionPoolClearedEvent(this,{interruptInUseConnections:F}));if(F)process.nextTick(()=>this.interruptInUseConnections(A));this.processWaitQueue()}interruptInUseConnections($){for(let F of this.checkedOut)if(F.generation<=$)F.onError(new Hz.PoolClearedOnNetworkError(this))}closeCheckedOutConnections(){for(let $ of this.checkedOut)$.onError(new w$.MongoClientClosedError)}close(){if(this.closed)return;if(this.cancellationToken.emit("cancel"),typeof this.connectionCounter.return==="function")this.connectionCounter.return(void 0);this.poolState=wY1.PoolState.closed,this.clearMinPoolSizeTimer(),this.processWaitQueue();for(let $ of this.connections)this.emitAndLog(J9.CONNECTION_CLOSED,new i9.ConnectionClosedEvent(this,$,"poolClosed")),$.destroy();this.connections.clear(),this.emitAndLog(J9.CONNECTION_POOL_CLOSED,new i9.ConnectionPoolClosedEvent(this))}async reauthenticate($){let F=$.authContext;if(!F)throw new w$.MongoRuntimeError("No auth context found on connection.");let A=F.credentials;if(!A)throw new w$.MongoMissingCredentialsError("Connection is missing credentials when asked to reauthenticate");let J=A.resolveAuthMechanism($.hello),X=this.server.topology.client.s.authProviders.getOrCreateProvider(J.mechanism,J.mechanismProperties);if(!X)throw new w$.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${A.mechanism}`);await X.reauth(F);return}clearMinPoolSizeTimer(){let $=this.minPoolSizeTimer;if($)(0,zz.clearTimeout)($)}destroyConnection($,F){this.emitAndLog(J9.CONNECTION_CLOSED,new i9.ConnectionClosedEvent(this,$,F)),$.destroy()}connectionIsStale($){let F=$.serviceId;if(this.loadBalanced&&F){let A=F.toHexString(),J=this.serviceGenerations.get(A);return $.generation!==J}return $.generation!==this.generation}connectionIsIdle($){return!!(this.options.maxIdleTimeMS&&$.idleTime>this.options.maxIdleTimeMS)}destroyConnectionIfPerished($){let F=this.connectionIsStale($),A=this.connectionIsIdle($);if(!F&&!A&&!$.closed)return!1;let J=$.closed?"error":F?"stale":"idle";return this.destroyConnection($,J),!0}createConnection($){let F={...this.options,id:this.connectionCounter.next().value,generation:this.generation,cancellationToken:this.cancellationToken,mongoLogger:this.mongoLogger,authProviders:this.server.topology.client.s.authProviders,metadata:this.server.topology.client.options.metadata};this.pending++;let A=(0,tA.now)();this.emitAndLog(J9.CONNECTION_CREATED,new i9.ConnectionCreatedEvent(this,{id:F.id})),(0,z30.connect)(F).then((J)=>{if(this.poolState!==wY1.PoolState.ready){this.pending--,J.destroy(),$(this.closed?new Hz.PoolClosedError(this):new Hz.PoolClearedError(this));return}for(let X of[...V5.APM_EVENTS,LC.Connection.CLUSTER_TIME_RECEIVED])J.on(X,(Y)=>this.emit(X,Y));if(this.loadBalanced){J.on(LC.Connection.PINNED,(Y)=>this.metrics.markPinned(Y)),J.on(LC.Connection.UNPINNED,(Y)=>this.metrics.markUnpinned(Y));let X=J.serviceId;if(X){let Y,W=X.toHexString();if(Y=this.serviceGenerations.get(W))J.generation=Y;else this.serviceGenerations.set(W,0),J.generation=0}}J.markAvailable(),this.emitAndLog(J9.CONNECTION_READY,new i9.ConnectionReadyEvent(this,J,A)),this.pending--,$(void 0,J)},(J)=>{if(this.pending--,this.server.handleError(J),this.emitAndLog(J9.CONNECTION_CLOSED,new i9.ConnectionClosedEvent(this,{id:F.id,serviceId:void 0},"error",J)),J instanceof w$.MongoNetworkError||J instanceof w$.MongoServerError)J.connectionGeneration=F.generation;$(J??new w$.MongoRuntimeError("Connection creation failed without error"))})}ensureMinPoolSize(){let $=this.options.minPoolSize;if(this.poolState!==wY1.PoolState.ready)return;if(this.connections.prune((F)=>this.destroyConnectionIfPerished(F)),this.totalConnectionCount<$&&this.pendingConnectionCount<this.options.maxConnecting)this.createConnection((F,A)=>{if(!F&&A)this.connections.push(A),process.nextTick(()=>this.processWaitQueue());if(this.poolState===wY1.PoolState.ready)(0,zz.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,zz.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)});else(0,zz.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,zz.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)}processWaitQueue(){if(this.processingWaitQueue)return;this.processingWaitQueue=!0;while(this.waitQueueSize){let A=this.waitQueue.first();if(!A){this.waitQueue.shift();continue}if(A.cancelled){this.waitQueue.shift();continue}if(this.poolState!==wY1.PoolState.ready){let X=this.closed?"poolClosed":"connectionError",Y=this.closed?new Hz.PoolClosedError(this):new Hz.PoolClearedError(this);this.emitAndLog(J9.CONNECTION_CHECK_OUT_FAILED,new i9.ConnectionCheckOutFailedEvent(this,X,A.checkoutTime,Y)),this.waitQueue.shift(),A.reject(Y);continue}if(!this.availableConnectionCount)break;let J=this.connections.shift();if(!J)break;if(!this.destroyConnectionIfPerished(J))this.checkedOut.add(J),this.emitAndLog(J9.CONNECTION_CHECKED_OUT,new i9.ConnectionCheckedOutEvent(this,J,A.checkoutTime)),this.waitQueue.shift(),A.resolve(J)}let{maxPoolSize:$,maxConnecting:F}=this.options;while(this.waitQueueSize>0&&this.pendingConnectionCount<F&&($===0||this.totalConnectionCount<$)){let A=this.waitQueue.shift();if(!A||A.cancelled)continue;this.createConnection((J,X)=>{if(A.cancelled){if(!J&&X)this.connections.push(X)}else if(J)this.emitAndLog(J9.CONNECTION_CHECK_OUT_FAILED,new i9.ConnectionCheckOutFailedEvent(this,"connectionError",A.checkoutTime,J)),A.reject(J);else if(X)this.checkedOut.add(X),this.emitAndLog(J9.CONNECTION_CHECKED_OUT,new i9.ConnectionCheckedOutEvent(this,X,A.checkoutTime)),A.resolve(X);process.nextTick(()=>this.processWaitQueue())})}this.processingWaitQueue=!1}}wY1.ConnectionPool=J9});var cg=O((NY1)=>{Object.defineProperty(NY1,"__esModule",{value:!0});NY1.Server=void 0;var U30=QC(),Q30=LY1(),K30=yg(),dF=O4(),i2=_1(),B30=E7(),w30=PK(),mg=Vb(),FZ=l1(),EY1=i8(),U2=B7(),q30=lg(),dg=HB(),L30=CK(),wB=(0,FZ.makeStateMachine)({[U2.STATE_CLOSED]:[U2.STATE_CLOSED,U2.STATE_CONNECTING],[U2.STATE_CONNECTING]:[U2.STATE_CONNECTING,U2.STATE_CLOSING,U2.STATE_CONNECTED,U2.STATE_CLOSED],[U2.STATE_CONNECTED]:[U2.STATE_CONNECTED,U2.STATE_CLOSING,U2.STATE_CLOSED],[U2.STATE_CLOSING]:[U2.STATE_CLOSING,U2.STATE_CLOSED]});class AZ extends B30.TypedEventEmitter{static{this.SERVER_HEARTBEAT_STARTED=dF.SERVER_HEARTBEAT_STARTED}static{this.SERVER_HEARTBEAT_SUCCEEDED=dF.SERVER_HEARTBEAT_SUCCEEDED}static{this.SERVER_HEARTBEAT_FAILED=dF.SERVER_HEARTBEAT_FAILED}static{this.CONNECT=dF.CONNECT}static{this.DESCRIPTION_RECEIVED=dF.DESCRIPTION_RECEIVED}static{this.CLOSED=dF.CLOSED}static{this.ENDED=dF.ENDED}constructor($,F,A){super();this.on("error",FZ.noop),this.serverApi=A.serverApi;let J={hostAddress:F.hostAddress,...A};this.topology=$,this.pool=new Q30.ConnectionPool(this,J),this.s={description:F,options:A,state:U2.STATE_CLOSED,operationCount:0};for(let X of[...dF.CMAP_EVENTS,...dF.APM_EVENTS])this.pool.on(X,(Y)=>this.emit(X,Y));if(this.pool.on(U30.Connection.CLUSTER_TIME_RECEIVED,(X)=>{this.clusterTime=X}),this.loadBalanced){this.monitor=null;return}this.monitor=new q30.Monitor(this,this.s.options);for(let X of dF.HEARTBEAT_EVENTS)this.monitor.on(X,(Y)=>this.emit(X,Y));this.monitor.on("resetServer",(X)=>ug(this,X)),this.monitor.on(AZ.SERVER_HEARTBEAT_SUCCEEDED,(X)=>{if(this.emit(AZ.DESCRIPTION_RECEIVED,new dg.ServerDescription(this.description.hostAddress,X.reply,{roundTripTime:this.monitor?.roundTripTime,minRoundTripTime:this.monitor?.minRoundTripTime})),this.s.state===U2.STATE_CONNECTING)wB(this,U2.STATE_CONNECTED),this.emit(AZ.CONNECT,this)})}get clusterTime(){return this.topology.clusterTime}set clusterTime($){this.topology.clusterTime=$}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){if(this.s.options&&this.s.options.autoEncrypter)return this.s.options.autoEncrypter;return}get loadBalanced(){return this.topology.description.type===U2.TopologyType.LoadBalanced}connect(){if(this.s.state!==U2.STATE_CLOSED)return;if(wB(this,U2.STATE_CONNECTING),!this.loadBalanced)this.monitor?.connect();else wB(this,U2.STATE_CONNECTED),this.emit(AZ.CONNECT,this)}closeCheckedOutConnections(){return this.pool.closeCheckedOutConnections()}close(){if(this.s.state===U2.STATE_CLOSED)return;if(wB(this,U2.STATE_CLOSING),!this.loadBalanced)this.monitor?.close();this.pool.close(),wB(this,U2.STATE_CLOSED),this.emit("closed")}requestCheck(){if(!this.loadBalanced)this.monitor?.requestCheck()}async command($,F){if(this.s.state===U2.STATE_CLOSING||this.s.state===U2.STATE_CLOSED)throw new i2.MongoServerClosedError;let A=$.session,J=A?.pinnedConnection;if(this.incrementOperationCount(),J==null)try{J=await this.pool.checkOut({timeoutContext:F,signal:$.options.signal})}catch(z){if(this.decrementOperationCount(),!(z instanceof K30.PoolClearedError))this.handleError(z);throw z}let X=null,Y=()=>{if(this.decrementOperationCount(),A?.pinnedConnection!==J)if(X!=null){let z=()=>{this.pool.checkIn(J)};X.then(z,z)}else this.pool.checkIn(J)},W;try{W=$.buildCommand(J,A)}catch(z){throw Y(),z}let Z=$.buildOptions(F),D=$.ns;if(this.loadBalanced&&E30(W,A)&&!A?.pinnedConnection)A?.pin(J);if(Z.directConnection=this.topology.s.options.directConnection,$ instanceof w30.AggregateOperation&&$.hasWriteStage&&(0,FZ.maxWireVersion)(J)<L30.MIN_SECONDARY_WRITE_WIRE_VERSION)delete Z.readPreference;if(this.description.iscryptd)Z.omitMaxTimeMS=!0;try{try{let z=await J.command(D,W,Z,$.SERVER_COMMAND_RESPONSE_TYPE);return(0,EY1.throwIfWriteConcernError)(z),z}catch(z){throw this.decorateCommandError(J,W,Z,z)}}catch(z){if(z instanceof i2.MongoError&&z.code===i2.MONGODB_ERROR_CODES.Reauthenticate){X=this.pool.reauthenticate(J),X.then(void 0,(H)=>{X=null,(0,FZ.squashError)(H)}),await(0,FZ.abortable)(X,Z),X=null;try{let H=await J.command(D,W,Z,$.SERVER_COMMAND_RESPONSE_TYPE);return(0,EY1.throwIfWriteConcernError)(H),H}catch(H){throw this.decorateCommandError(J,W,Z,H)}}else throw z}finally{Y()}}handleError($,F){if(!($ instanceof i2.MongoError))return;if($.connectionGeneration&&$.connectionGeneration<this.pool.generation)return;let J=$ instanceof i2.MongoNetworkError&&!($ instanceof i2.MongoNetworkTimeoutError),X=$ instanceof i2.MongoNetworkError&&$.beforeHandshake,Y=$.hasErrorLabel(i2.MongoErrorLabel.HandshakeError);if(J||X||Y){if(!this.loadBalanced)$.addErrorLabel(i2.MongoErrorLabel.ResetPool),ug(this,$);else if(F)this.pool.clear({serviceId:F.serviceId})}else if((0,i2.isSDAMUnrecoverableError)($)){if(N30(this,$)){let W=(0,i2.isNodeShuttingDownError)($);if(this.loadBalanced&&F&&W)this.pool.clear({serviceId:F.serviceId});if(!this.loadBalanced){if(W)$.addErrorLabel(i2.MongoErrorLabel.ResetPool);ug(this,$),process.nextTick(()=>this.requestCheck())}}}}decorateCommandError($,F,A,J){if(typeof J!=="object"||J==null||!("name"in J))throw new i2.MongoRuntimeError("An unexpected error type: "+typeof J);if(J.name==="AbortError"&&"cause"in J&&J.cause instanceof i2.MongoError)J=J.cause;if(!(J instanceof i2.MongoError))return J;if(V30(this.pool,$))return J;let X=A?.session;if(J instanceof i2.MongoNetworkError){if(X&&!X.hasEnded&&X.serverSession)X.serverSession.isDirty=!0;if(hg(X,F)&&!J.hasErrorLabel(i2.MongoErrorLabel.TransientTransactionError))J.addErrorLabel(i2.MongoErrorLabel.TransientTransactionError);if((VY1(this.topology)||(0,mg.isTransactionCommand)(F))&&(0,FZ.supportsRetryableWrites)(this)&&!hg(X,F))J.addErrorLabel(i2.MongoErrorLabel.RetryableWriteError)}else if((VY1(this.topology)||(0,mg.isTransactionCommand)(F))&&(0,i2.needsRetryableWriteLabel)(J,(0,FZ.maxWireVersion)(this),this.description.type)&&!hg(X,F))J.addErrorLabel(i2.MongoErrorLabel.RetryableWriteError);if(X&&X.isPinned&&J.hasErrorLabel(i2.MongoErrorLabel.TransientTransactionError))X.unpin({force:!0});return this.handleError(J,$),J}decrementOperationCount(){return this.s.operationCount-=1}incrementOperationCount(){return this.s.operationCount+=1}}NY1.Server=AZ;function ug($,F){if($.loadBalanced)return;if(F instanceof i2.MongoNetworkError&&!(F instanceof i2.MongoNetworkTimeoutError))$.monitor?.reset();$.emit(AZ.DESCRIPTION_RECEIVED,new dg.ServerDescription($.description.hostAddress,void 0,{error:F}))}function E30($,F){if(F)return F.inTransaction()||F.transaction.isCommitted&&"commitTransaction"in $||"aggregate"in $||"find"in $||"getMore"in $||"listCollections"in $||"listIndexes"in $||"bulkWrite"in $;return!1}function V30($,F){if(F.serviceId)return F.generation!==$.serviceGenerations.get(F.serviceId.toHexString());return F.generation!==$.generation}function N30($,F){let A=F.topologyVersion,J=$.description.topologyVersion;return(0,dg.compareTopologyVersion)(J,A)<0}function hg($,F){return $&&$.inTransaction()&&!(0,mg.isTransactionCommand)(F)}function VY1($){return $.s.options.retryWrites!==!1}});var lg=O((jY1)=>{Object.defineProperty(jY1,"__esModule",{value:!0});jY1.RTTSampler=jY1.MonitorInterval=jY1.RTTPinger=jY1.Monitor=jY1.ServerMonitoringMode=void 0;var iX=Z1("timers"),MY1=w0(),EC=xg(),C30=kx(),pg=O4(),Uz=_1(),M30=SX(),PY1=E7(),n9=l1(),r9=B7(),qB=wC(),LB=cg(),Qz="idle",JZ="monitoring",Kz=(0,n9.makeStateMachine)({[r9.STATE_CLOSING]:[r9.STATE_CLOSING,Qz,r9.STATE_CLOSED],[r9.STATE_CLOSED]:[r9.STATE_CLOSED,JZ],[Qz]:[Qz,JZ,r9.STATE_CLOSING],[JZ]:[JZ,Qz,r9.STATE_CLOSING]}),P30=new Set([r9.STATE_CLOSING,r9.STATE_CLOSED,JZ]);function EB($){return $.s.state===r9.STATE_CLOSED||$.s.state===r9.STATE_CLOSING}jY1.ServerMonitoringMode=Object.freeze({auto:"auto",poll:"poll",stream:"stream"});class TY1 extends PY1.TypedEventEmitter{constructor($,F){super();this.component=M30.MongoLoggableComponent.TOPOLOGY,this.on("error",n9.noop),this.server=$,this.connection=null,this.cancellationToken=new PY1.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.monitorId=void 0,this.s={state:r9.STATE_CLOSED},this.address=$.description.address,this.options=Object.freeze({connectTimeoutMS:F.connectTimeoutMS??1e4,heartbeatFrequencyMS:F.heartbeatFrequencyMS??1e4,minHeartbeatFrequencyMS:F.minHeartbeatFrequencyMS??500,serverMonitoringMode:F.serverMonitoringMode}),this.isRunningInFaasEnv=(0,C30.getFAASEnv)()!=null,this.mongoLogger=this.server.topology.client?.mongoLogger,this.rttSampler=new ag(10);let A=this.cancellationToken,J={id:"<monitor>",generation:$.pool.generation,cancellationToken:A,hostAddress:$.description.hostAddress,...F,raw:!1,useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0};if(delete J.credentials,J.autoEncrypter)delete J.autoEncrypter;this.connectOptions=Object.freeze(J)}connect(){if(this.s.state!==r9.STATE_CLOSED)return;let $=this.options.heartbeatFrequencyMS,F=this.options.minHeartbeatFrequencyMS;this.monitorId=new VC(IY1(this),{heartbeatFrequencyMS:$,minHeartbeatFrequencyMS:F,immediate:!0})}requestCheck(){if(P30.has(this.s.state))return;this.monitorId?.wake()}reset(){let $=this.server.description.topologyVersion;if(EB(this)||$==null)return;Kz(this,r9.STATE_CLOSING),RY1(this),Kz(this,Qz);let F=this.options.heartbeatFrequencyMS,A=this.options.minHeartbeatFrequencyMS;this.monitorId=new VC(IY1(this),{heartbeatFrequencyMS:F,minHeartbeatFrequencyMS:A})}close(){if(EB(this))return;Kz(this,r9.STATE_CLOSING),RY1(this),this.emit("close"),Kz(this,r9.STATE_CLOSED)}get roundTripTime(){return this.rttSampler.average()}get minRoundTripTime(){return this.rttSampler.min()}get latestRtt(){return this.rttSampler.last}addRttSample($){this.rttSampler.addSample($)}clearRttSamples(){this.rttSampler.clear()}}jY1.Monitor=TY1;function RY1($){$.monitorId?.stop(),$.monitorId=void 0,$.rttPinger?.close(),$.rttPinger=void 0,$.cancellationToken.emit("cancel"),$.connection?.destroy(),$.connection=null,$.clearRttSamples()}function ig($,F){if(F==null)return!1;let A=$.options.serverMonitoringMode;if(A===jY1.ServerMonitoringMode.poll)return!1;if(A===jY1.ServerMonitoringMode.stream)return!0;if($.isRunningInFaasEnv)return!1;return!0}function R30($,F){let A,J,X=$.server.description.topologyVersion,Y=ig($,X);$.emitAndLogHeartbeat(LB.Server.SERVER_HEARTBEAT_STARTED,$.server.topology.s.id,void 0,new qB.ServerHeartbeatStartedEvent($.address,Y));function W(G){$.connection?.destroy(),$.connection=null,$.emitAndLogHeartbeat(LB.Server.SERVER_HEARTBEAT_FAILED,$.server.topology.s.id,void 0,new qB.ServerHeartbeatFailedEvent($.address,(0,n9.calculateDurationInMs)(A),G,J));let z=!(G instanceof Uz.MongoError)?new Uz.MongoError(Uz.MongoError.buildErrorMessage(G),{cause:G}):G;if(z.addErrorLabel(Uz.MongoErrorLabel.ResetPool),z instanceof Uz.MongoNetworkTimeoutError)z.addErrorLabel(Uz.MongoErrorLabel.InterruptInUseConnections);$.emit("resetServer",z),F(G)}function Z(G){if(!("isWritablePrimary"in G))G.isWritablePrimary=G[pg.LEGACY_HELLO_COMMAND];let z=Y&&$.rttPinger?$.rttPinger.latestRtt??(0,n9.calculateDurationInMs)(A):(0,n9.calculateDurationInMs)(A);if($.addRttSample(z),$.emitAndLogHeartbeat(LB.Server.SERVER_HEARTBEAT_SUCCEEDED,$.server.topology.s.id,G.connectionId,new qB.ServerHeartbeatSucceededEvent($.address,z,G,Y)),Y)$.emitAndLogHeartbeat(LB.Server.SERVER_HEARTBEAT_STARTED,$.server.topology.s.id,void 0,new qB.ServerHeartbeatStartedEvent($.address,!0)),A=(0,n9.now)();else $.rttPinger?.close(),$.rttPinger=void 0,F(void 0,G)}let{connection:D}=$;if(D&&!D.closed){let{serverApi:G,helloOk:z}=D,H=$.options.connectTimeoutMS,U=$.options.heartbeatFrequencyMS,Q={[G?.version||z?"hello":pg.LEGACY_HELLO_COMMAND]:1,...Y&&X?{maxAwaitTimeMS:U,topologyVersion:I30(X)}:{}},B=Y?{socketTimeoutMS:H?H+U:0,exhaustAllowed:!0}:{socketTimeoutMS:H};if(Y&&$.rttPinger==null)$.rttPinger=new rg($);if(A=(0,n9.now)(),Y)return J=!0,D.exhaustCommand((0,n9.ns)("admin.$cmd"),Q,B,(q,L)=>{if(q)return W(q);return Z(L)});J=!1,D.command((0,n9.ns)("admin.$cmd"),Q,B).then(Z,W);return}(async()=>{let G=await(0,EC.makeSocket)($.connectOptions),z=(0,EC.makeConnection)($.connectOptions,G);A=(0,n9.now)();try{return await(0,EC.performInitialHandshake)(z,$.connectOptions),z}catch(H){throw z.destroy(),H}})().then((G)=>{if(EB($)){G.destroy();return}let z=(0,n9.calculateDurationInMs)(A);$.addRttSample(z),$.connection=G,$.emitAndLogHeartbeat(LB.Server.SERVER_HEARTBEAT_SUCCEEDED,$.server.topology.s.id,G.hello?.connectionId,new qB.ServerHeartbeatSucceededEvent($.address,z,G.hello,ig($,G.hello?.topologyVersion))),F(void 0,G.hello)},(G)=>{$.connection=null,J=!1,W(G)})}function IY1($){return(F)=>{if($.s.state===JZ){process.nextTick(F);return}Kz($,JZ);function A(){if(!EB($))Kz($,Qz);F()}R30($,(J,X)=>{if(J){if($.server.description.type===r9.ServerType.Unknown)return A()}if(ig($,X?.topologyVersion))(0,iX.setTimeout)(()=>{if(!EB($))$.monitorId?.wake()},0);A()})}}function I30($){return{processId:$.processId,counter:MY1.Long.isLong($.counter)?$.counter:MY1.Long.fromNumber($.counter)}}class rg{constructor($){this.connection=void 0,this.cancellationToken=$.cancellationToken,this.closed=!1,this.monitor=$,this.latestRtt=$.latestRtt??void 0;let F=$.options.heartbeatFrequencyMS;this.monitorId=(0,iX.setTimeout)(()=>this.measureRoundTripTime(),F)}get roundTripTime(){return this.monitor.roundTripTime}get minRoundTripTime(){return this.monitor.minRoundTripTime}close(){this.closed=!0,(0,iX.clearTimeout)(this.monitorId),this.connection?.destroy(),this.connection=void 0}measureAndReschedule($,F){if(this.closed){F?.destroy();return}if(this.connection==null)this.connection=F;this.latestRtt=(0,n9.calculateDurationInMs)($),this.monitorId=(0,iX.setTimeout)(()=>this.measureRoundTripTime(),this.monitor.options.heartbeatFrequencyMS)}measureRoundTripTime(){let $=(0,n9.now)();if(this.closed)return;let F=this.connection;if(F==null){(0,EC.connect)(this.monitor.connectOptions).then((J)=>{this.measureAndReschedule($,J)},()=>{this.connection=void 0});return}let A=F.serverApi?.version||F.helloOk?"hello":pg.LEGACY_HELLO_COMMAND;F.command((0,n9.ns)("admin.$cmd"),{[A]:1},void 0).then(()=>this.measureAndReschedule($),()=>{this.connection?.destroy(),this.connection=void 0;return})}}jY1.RTTPinger=rg;class VC{constructor($,F={}){if(this.isExpeditedCallToFnScheduled=!1,this.stopped=!1,this.isExecutionInProgress=!1,this.hasExecutedOnce=!1,this._executeAndReschedule=()=>{if(this.stopped)return;if(this.timerId)(0,iX.clearTimeout)(this.timerId);this.isExpeditedCallToFnScheduled=!1,this.isExecutionInProgress=!0,this.fn(()=>{this.lastExecutionEnded=(0,n9.now)(),this.isExecutionInProgress=!1,this._reschedule(this.heartbeatFrequencyMS)})},this.fn=$,this.lastExecutionEnded=-1/0,this.heartbeatFrequencyMS=F.heartbeatFrequencyMS??1000,this.minHeartbeatFrequencyMS=F.minHeartbeatFrequencyMS??500,F.immediate)this._executeAndReschedule();else this._reschedule(void 0)}wake(){let F=(0,n9.now)()-this.lastExecutionEnded;if(F<0)return this._executeAndReschedule();if(this.isExecutionInProgress)return;if(this.isExpeditedCallToFnScheduled)return;if(F<this.minHeartbeatFrequencyMS){this.isExpeditedCallToFnScheduled=!0,this._reschedule(this.minHeartbeatFrequencyMS-F);return}this._executeAndReschedule()}stop(){if(this.stopped=!0,this.timerId)(0,iX.clearTimeout)(this.timerId),this.timerId=void 0;this.lastExecutionEnded=-1/0,this.isExpeditedCallToFnScheduled=!1}toString(){return JSON.stringify(this)}toJSON(){let $=(0,n9.now)(),F=$-this.lastExecutionEnded;return{timerId:this.timerId!=null?"set":"cleared",lastCallTime:this.lastExecutionEnded,isExpeditedCheckScheduled:this.isExpeditedCallToFnScheduled,stopped:this.stopped,heartbeatFrequencyMS:this.heartbeatFrequencyMS,minHeartbeatFrequencyMS:this.minHeartbeatFrequencyMS,currentTime:$,timeSinceLastCall:F}}_reschedule($){if(this.stopped)return;if(this.timerId)(0,iX.clearTimeout)(this.timerId);this.timerId=(0,iX.setTimeout)(this._executeAndReschedule,$||this.heartbeatFrequencyMS)}}jY1.MonitorInterval=VC;class ag{constructor($=10){this.rttSamples=new Float64Array($),this.length=0,this.writeIndex=0}addSample($){if(this.rttSamples[this.writeIndex++]=$,this.length<this.rttSamples.length)this.length++;this.writeIndex%=this.rttSamples.length}min(){if(this.length<2)return 0;let $=this.rttSamples[0];for(let F=1;F<this.length;F++)if(this.rttSamples[F]<$)$=this.rttSamples[F];return $}average(){if(this.length===0)return 0;let $=0;for(let F=0;F<this.length;F++)$+=this.rttSamples[F];return $/this.length}get last(){if(this.length===0)return null;return this.rttSamples[this.writeIndex===0?this.length-1:this.writeIndex-1]}clear(){this.length=0,this.writeIndex=0}}jY1.RTTSampler=ag});var Af=O((gY1)=>{Object.defineProperty(gY1,"__esModule",{value:!0});gY1.DEFAULT_OPTIONS=gY1.OPTIONS=void 0;gY1.resolveSRVRecord=y30;gY1.parseOptions=h30;var tg=Z1("dns"),S30=ex(),_30=Z1("url"),Bz=dN(),cF=fF(),SY1=XB(),_Y1=tJ1(),t1=_1(),NC=eW(),eg=SX(),sg=Z$(),nX=e4(),k30=lg(),E8=l1(),sA=i8(),og=["authSource","replicaSet","loadBalanced"],b30="loadBalanced option only supported with a single host in the URI",x30="loadBalanced option not supported with a replicaSet option",g30="loadBalanced option not supported when directConnection is provided";function xY1($){return async function(A){try{return await tg.promises[$](A)}catch(J){if(J.code===tg.TIMEOUT)return await tg.promises[$](A);else throw J}}}var f30=xY1("resolveSrv"),v30=xY1("resolveTxt");async function y30($){if(typeof $.srvHost!=="string")throw new t1.MongoAPIError('Option "srvHost" must not be empty');let F=$.srvHost,A=v30(F);A.then(void 0,E8.squashError);let J=`_${$.srvServiceName}._tcp.${F}`,X=await f30(J);if(X.length===0)throw new t1.MongoAPIError("No addresses found at host");for(let{name:U}of X)(0,E8.checkParentDomainMatch)(U,F);let Y=X.map((U)=>E8.HostAddress.fromString(`${U.name}:${U.port??27017}`));$f(Y,$,!0);let W;try{W=await A}catch(U){if(U.code!=="ENODATA"&&U.code!=="ENOTFOUND")throw U;return Y}if(W.length>1)throw new t1.MongoParseError("Multiple text records not allowed");let Z=new _30.URLSearchParams(W[0].join(""));if([...Z.keys()].some((U)=>!og.includes(U)))throw new t1.MongoParseError(`Text record may only set any of: ${og.join(", ")}`);if(og.some((U)=>Z.get(U)===""))throw new t1.MongoParseError("Cannot have empty URI params in DNS TXT Record");let G=Z.get("authSource")??void 0,z=Z.get("replicaSet")??void 0,H=Z.get("loadBalanced")??void 0;if(!$.userSpecifiedAuthSource&&G&&$.credentials&&!cF.AUTH_MECHS_AUTH_SRC_EXTERNAL.has($.credentials.mechanism))$.credentials=Bz.MongoCredentials.merge($.credentials,{source:G});if(!$.userSpecifiedReplicaSet&&z)$.replicaSet=z;if(H==="true")$.loadBalanced=!0;if($.replicaSet&&$.srvMaxHosts>0)throw new t1.MongoParseError("Cannot combine replicaSet option with srvMaxHosts");return $f(Y,$,!0),Y}function u30($){if(!$)return;let F=(A,J)=>{if($.has(A)&&$.has(J))throw new t1.MongoAPIError(`The '${A}' option cannot be used with the '${J}' option`)};F("tlsInsecure","tlsAllowInvalidCertificates"),F("tlsInsecure","tlsAllowInvalidHostnames")}function oA($,F){if(typeof F==="boolean")return F;switch(F){case"true":return!0;case"false":return!1;default:throw new t1.MongoParseError(`${$} must be either "true" or "false"`)}}function Ff($,F){let A=(0,E8.parseInteger)(F);if(A!=null)return A;throw new t1.MongoParseError(`Expected ${$} to be stringified int value, got: ${F}`)}function VB($,F){let A=Ff($,F);if(A<0)throw new t1.MongoParseError(`${$} can only be a positive int value, got: ${F}`);return A}function*kY1($){if($==="")return;let F=$.split(",");for(let A of F){let[J,X]=A.split(/:(.*)/);if(X==null)throw new t1.MongoParseError("Cannot have undefined values in key value pairs");yield[J,X]}}class NB extends Map{constructor($=[]){super($.map(([F,A])=>[F.toLowerCase(),A]))}has($){return super.has($.toLowerCase())}get($){return super.get($.toLowerCase())}set($,F){return super.set($.toLowerCase(),F)}delete($){return super.delete($.toLowerCase())}}function h30($,F=void 0,A={}){if(F!=null&&!(F instanceof NC.MongoClient))A=F,F=void 0;if(A.useBigInt64&&typeof A.promoteLongs==="boolean"&&!A.promoteLongs)throw new t1.MongoAPIError("Must request either bigint or Long for int64 deserialization");if(A.useBigInt64&&typeof A.promoteValues==="boolean"&&!A.promoteValues)throw new t1.MongoAPIError("Must request either bigint or Long for int64 deserialization");let J=new S30.default($),{hosts:X,isSRV:Y}=J,W=Object.create(null);W.hosts=Y?[]:X.map(E8.HostAddress.fromString);let Z=new NB;if(J.pathname!=="/"&&J.pathname!==""){let B=decodeURIComponent(J.pathname[0]==="/"?J.pathname.slice(1):J.pathname);if(B)Z.set("dbName",[B])}if(J.username!==""){let B={username:decodeURIComponent(J.username)};if(typeof J.password==="string")B.password=decodeURIComponent(J.password);Z.set("auth",[B])}for(let B of J.searchParams.keys()){let q=J.searchParams.getAll(B),L=/readPreferenceTags/i.test(B);if(!L&&q.length>1)throw new t1.MongoInvalidArgumentError(`URI option "${B}" cannot appear more than once in the connection string`);if(!L&&q.includes(""))throw new t1.MongoAPIError(`URI option "${B}" cannot be specified with no value`);if(!Z.has(B))Z.set(B,q)}let D=new NB(Object.entries(A).filter(([,B])=>B!=null));if(Z.has("serverApi"))throw new t1.MongoParseError("URI cannot contain `serverApi`, it can only be passed to the client");let G=Z.get("authMechanismProperties");if(G){for(let B of G)if(/(^|,)ALLOWED_HOSTS:/.test(B))throw new t1.MongoParseError("Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.")}if(D.has("loadBalanced"))throw new t1.MongoParseError("loadBalanced is only a valid option in the URI");let z=new NB,H=new Set([...Z.keys(),...D.keys()]);for(let B of H){let q=[],L=D.get(B);if(L!=null)q.push(L);let E=Z.get(B)??[];q.push(...E),z.set(B,q)}if(z.has("tls")||z.has("ssl")){let B=(z.get("tls")||[]).concat(z.get("ssl")||[]).map(oA.bind(null,"tls/ssl"));if(new Set(B).size!==1)throw new t1.MongoParseError("All values of tls/ssl must be the same.")}u30(z);let U=(0,E8.setDifference)(H,Array.from(Object.keys(gY1.OPTIONS)).map((B)=>B.toLowerCase()));if(U.size!==0){let B=U.size>1?"options":"option",q=U.size>1?"are":"is";throw new t1.MongoParseError(`${B} ${Array.from(U).join(", ")} ${q} not supported`)}for(let[B,q]of Object.entries(gY1.OPTIONS)){let L=z.get(B);if(!L||L.length===0){if(gY1.DEFAULT_OPTIONS.has(B))bY1(W,B,q,[gY1.DEFAULT_OPTIONS.get(B)])}else{let{deprecated:E}=q;if(E){let V=typeof E==="string"?`: ${E}`:"";(0,E8.emitWarning)(`${B} is a deprecated option${V}`)}bY1(W,B,q,L)}}if(W.credentials){let B=W.credentials.mechanism===cF.AuthMechanism.MONGODB_GSSAPI,q=W.credentials.mechanism===cF.AuthMechanism.MONGODB_X509,L=W.credentials.mechanism===cF.AuthMechanism.MONGODB_AWS,E=W.credentials.mechanism===cF.AuthMechanism.MONGODB_OIDC;if((B||q)&&z.has("authSource")&&W.credentials.source!=="$external")throw new t1.MongoParseError(`authMechanism ${W.credentials.mechanism} requires an authSource of '$external'`);if(!(B||q||L||E)&&W.dbName&&!z.has("authSource"))W.credentials=Bz.MongoCredentials.merge(W.credentials,{source:W.dbName});if(L){let{username:V,password:R}=W.credentials;if(V||R)throw new t1.MongoAPIError("username and password cannot be provided when using MONGODB-AWS. Credentials must be provided in a manner that can be read by the AWS SDK.");if(W.credentials.mechanismProperties.AWS_SESSION_TOKEN)throw new t1.MongoAPIError("AWS_SESSION_TOKEN cannot be provided when using MONGODB-AWS. Credentials must be provided in a manner that can be read by the AWS SDK.")}if(W.credentials.validate(),W.credentials.password===""&&W.credentials.username===""&&W.credentials.mechanism===cF.AuthMechanism.MONGODB_DEFAULT&&Object.keys(W.credentials.mechanismProperties).length===0)delete W.credentials}if(!W.dbName)W.dbName="test";if($f(X,W,Y),F&&W.autoEncryption)_Y1.Encrypter.checkForMongoCrypt(),W.encrypter=new _Y1.Encrypter(F,$,A),W.autoEncrypter=W.encrypter.autoEncrypter;if(W.userSpecifiedAuthSource=D.has("authSource")||Z.has("authSource"),W.userSpecifiedReplicaSet=D.has("replicaSet")||Z.has("replicaSet"),Y){if(W.srvHost=X[0],W.directConnection)throw new t1.MongoAPIError("SRV URI does not support directConnection");if(W.srvMaxHosts>0&&typeof W.replicaSet==="string")throw new t1.MongoParseError("Cannot use srvMaxHosts option with replicaSet");let B=!D.has("tls")&&!Z.has("tls"),q=!D.has("ssl")&&!Z.has("ssl");if(B&&q)W.tls=!0}else if(Z.has("srvMaxHosts")||D.has("srvMaxHosts")||Z.has("srvServiceName")||D.has("srvServiceName"))throw new t1.MongoParseError("Cannot use srvMaxHosts or srvServiceName with a non-srv connection string");if(W.directConnection&&W.hosts.length!==1)throw new t1.MongoParseError("directConnection option requires exactly one host");if(!W.proxyHost&&(W.proxyPort||W.proxyUsername||W.proxyPassword))throw new t1.MongoParseError("Must specify proxyHost if other proxy options are passed");if(W.proxyUsername&&!W.proxyPassword||!W.proxyUsername&&W.proxyPassword)throw new t1.MongoParseError("Can only specify both of proxy username/password or neither");if(["proxyHost","proxyPort","proxyUsername","proxyPassword"].map((B)=>Z.get(B)??[]).some((B)=>B.length>1))throw new t1.MongoParseError("Proxy options cannot be specified multiple times in the connection string");return W.mongoLoggerOptions=eg.MongoLogger.resolveOptions({MONGODB_LOG_COMMAND:process.env.MONGODB_LOG_COMMAND,MONGODB_LOG_TOPOLOGY:process.env.MONGODB_LOG_TOPOLOGY,MONGODB_LOG_SERVER_SELECTION:process.env.MONGODB_LOG_SERVER_SELECTION,MONGODB_LOG_CONNECTION:process.env.MONGODB_LOG_CONNECTION,MONGODB_LOG_CLIENT:process.env.MONGODB_LOG_CLIENT,MONGODB_LOG_ALL:process.env.MONGODB_LOG_ALL,MONGODB_LOG_MAX_DOCUMENT_LENGTH:process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,MONGODB_LOG_PATH:process.env.MONGODB_LOG_PATH},{mongodbLogPath:W.mongodbLogPath,mongodbLogComponentSeverities:W.mongodbLogComponentSeverities,mongodbLogMaxDocumentLength:W.mongodbLogMaxDocumentLength}),W}function $f($,F,A){if(F.loadBalanced){if($.length>1)throw new t1.MongoParseError(b30);if(F.replicaSet)throw new t1.MongoParseError(x30);if(F.directConnection)throw new t1.MongoParseError(g30);if(A&&F.srvMaxHosts>0)throw new t1.MongoParseError("Cannot limit srv hosts with loadBalanced enabled")}return}function bY1($,F,A,J){let{target:X,type:Y,transform:W}=A,Z=X??F;switch(Y){case"boolean":$[Z]=oA(Z,J[0]);break;case"int":$[Z]=Ff(Z,J[0]);break;case"uint":$[Z]=VB(Z,J[0]);break;case"string":if(J[0]==null)break;$[Z]=String(J[0]);break;case"record":if(!(0,E8.isRecord)(J[0]))throw new t1.MongoParseError(`${Z} must be an object`);$[Z]=J[0];break;case"any":$[Z]=J[0];break;default:{if(!W)throw new t1.MongoParseError("Descriptors missing a type must define a transform");let D=W({name:Z,options:$,values:J});$[Z]=D;break}}}gY1.OPTIONS={appName:{type:"string"},auth:{target:"credentials",transform({name:$,options:F,values:[A]}){if(!(0,E8.isRecord)(A,["username","password"]))throw new t1.MongoParseError(`${$} must be an object with 'username' and 'password' properties`);return Bz.MongoCredentials.merge(F.credentials,{username:A.username,password:A.password})}},authMechanism:{target:"credentials",transform({options:$,values:[F]}){let A=Object.values(cF.AuthMechanism),[J]=A.filter((W)=>W.match(RegExp(String.raw`\b${F}\b`,"i")));if(!J)throw new t1.MongoParseError(`authMechanism one of ${A}, got ${F}`);let X=$.credentials?.source;if(J===cF.AuthMechanism.MONGODB_PLAIN||cF.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(J))X="$external";let Y=$.credentials?.password;if(J===cF.AuthMechanism.MONGODB_X509&&Y==="")Y=void 0;return Bz.MongoCredentials.merge($.credentials,{mechanism:J,source:X,password:Y})}},authMechanismProperties:{target:"credentials",transform({options:$,values:F}){let A=Object.create(null);for(let J of F)if(typeof J==="string")for(let[X,Y]of kY1(J))try{A[X]=oA(X,Y)}catch{A[X]=Y}else{if(!(0,E8.isRecord)(J))throw new t1.MongoParseError("AuthMechanismProperties must be an object");A={...J}}return Bz.MongoCredentials.merge($.credentials,{mechanismProperties:A})}},authSource:{target:"credentials",transform({options:$,values:[F]}){let A=String(F);return Bz.MongoCredentials.merge($.credentials,{source:A})}},autoEncryption:{type:"record"},autoSelectFamily:{type:"boolean",default:!0},autoSelectFamilyAttemptTimeout:{type:"uint"},bsonRegExp:{type:"boolean"},serverApi:{target:"serverApi",transform({values:[$]}){let F=typeof $==="string"?{version:$}:$,A=F&&F.version;if(!A)throw new t1.MongoParseError(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${Object.values(NC.ServerApiVersion).join('", "')}"]`);if(!Object.values(NC.ServerApiVersion).some((J)=>J===A))throw new t1.MongoParseError(`Invalid server API version=${A}; must be in the following enum: ["${Object.values(NC.ServerApiVersion).join('", "')}"]`);return F}},checkKeys:{type:"boolean"},compressors:{default:"none",target:"compressors",transform({values:$}){let F=new Set;for(let A of $){let J=typeof A==="string"?A.split(","):A;if(!Array.isArray(J))throw new t1.MongoInvalidArgumentError("compressors must be an array or a comma-delimited list of strings");for(let X of J)if(Object.keys(SY1.Compressor).includes(String(X)))F.add(String(X));else throw new t1.MongoInvalidArgumentError(`${X} is not a valid compression mechanism. Must be one of: ${Object.keys(SY1.Compressor)}.`)}return[...F]}},connectTimeoutMS:{default:30000,type:"uint"},dbName:{type:"string"},directConnection:{default:!1,type:"boolean"},driverInfo:{default:{},type:"record"},enableUtf8Validation:{type:"boolean",default:!0},family:{transform({name:$,values:[F]}){let A=Ff($,F);if(A===4||A===6)return A;throw new t1.MongoParseError(`Option 'family' must be 4 or 6 got ${A}.`)}},fieldsAsRaw:{type:"record"},forceServerObjectId:{default:!1,type:"boolean"},fsync:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:$,options:F,values:[A]}){let J=sA.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,fsync:oA($,A)}});if(!J)throw new t1.MongoParseError(`Unable to make a writeConcern from fsync=${A}`);return J}},heartbeatFrequencyMS:{default:1e4,type:"uint"},ignoreUndefined:{type:"boolean"},j:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:$,options:F,values:[A]}){let J=sA.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,journal:oA($,A)}});if(!J)throw new t1.MongoParseError(`Unable to make a writeConcern from journal=${A}`);return J}},journal:{target:"writeConcern",transform({name:$,options:F,values:[A]}){let J=sA.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,journal:oA($,A)}});if(!J)throw new t1.MongoParseError(`Unable to make a writeConcern from journal=${A}`);return J}},loadBalanced:{default:!1,type:"boolean"},localThresholdMS:{default:15,type:"uint"},maxConnecting:{default:2,transform({name:$,values:[F]}){let A=VB($,F);if(A===0)throw new t1.MongoInvalidArgumentError("maxConnecting must be > 0 if specified");return A}},maxIdleTimeMS:{default:0,type:"uint"},maxPoolSize:{default:100,type:"uint"},maxStalenessSeconds:{target:"readPreference",transform({name:$,options:F,values:[A]}){let J=VB($,A);if(F.readPreference)return nX.ReadPreference.fromOptions({readPreference:{...F.readPreference,maxStalenessSeconds:J}});else return new nX.ReadPreference("secondary",void 0,{maxStalenessSeconds:J})}},minInternalBufferSize:{type:"uint"},minPoolSize:{default:0,type:"uint"},minHeartbeatFrequencyMS:{default:500,type:"uint"},monitorCommands:{default:!1,type:"boolean"},name:{target:"driverInfo",transform({values:[$],options:F}){return{...F.driverInfo,name:String($)}}},noDelay:{default:!0,type:"boolean"},pkFactory:{default:E8.DEFAULT_PK_FACTORY,transform({values:[$]}){if((0,E8.isRecord)($,["createPk"])&&typeof $.createPk==="function")return $;throw new t1.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${$}`)}},promoteBuffers:{type:"boolean"},promoteLongs:{type:"boolean"},promoteValues:{type:"boolean"},useBigInt64:{type:"boolean"},proxyHost:{type:"string"},proxyPassword:{type:"string"},proxyPort:{type:"uint"},proxyUsername:{type:"string"},raw:{default:!1,type:"boolean"},readConcern:{transform({values:[$],options:F}){if($ instanceof sg.ReadConcern||(0,E8.isRecord)($,["level"]))return sg.ReadConcern.fromOptions({...F.readConcern,...$});throw new t1.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify($)}`)}},readConcernLevel:{target:"readConcern",transform({values:[$],options:F}){return sg.ReadConcern.fromOptions({...F.readConcern,level:$})}},readPreference:{default:nX.ReadPreference.primary,transform({values:[$],options:F}){if($ instanceof nX.ReadPreference)return nX.ReadPreference.fromOptions({readPreference:{...F.readPreference,...$},...$});if((0,E8.isRecord)($,["mode"])){let A=nX.ReadPreference.fromOptions({readPreference:{...F.readPreference,...$},...$});if(A)return A;else throw new t1.MongoParseError(`Cannot make read preference from ${JSON.stringify($)}`)}if(typeof $==="string"){let A={hedge:F.readPreference?.hedge,maxStalenessSeconds:F.readPreference?.maxStalenessSeconds};return new nX.ReadPreference($,F.readPreference?.tags,A)}throw new t1.MongoParseError(`Unknown ReadPreference value: ${$}`)}},readPreferenceTags:{target:"readPreference",transform({values:$,options:F}){let A=Array.isArray($[0])?$[0]:$,J=[];for(let X of A){let Y=Object.create(null);if(typeof X==="string")for(let[W,Z]of kY1(X))Y[W]=Z;if((0,E8.isRecord)(X))for(let[W,Z]of Object.entries(X))Y[W]=Z;J.push(Y)}return nX.ReadPreference.fromOptions({readPreference:F.readPreference,readPreferenceTags:J})}},replicaSet:{type:"string"},retryReads:{default:!0,type:"boolean"},retryWrites:{default:!0,type:"boolean"},serializeFunctions:{type:"boolean"},serverMonitoringMode:{default:"auto",transform({values:[$]}){if(!Object.values(k30.ServerMonitoringMode).includes($))throw new t1.MongoParseError("serverMonitoringMode must be one of `auto`, `poll`, or `stream`");return $}},serverSelectionTimeoutMS:{default:30000,type:"uint"},servername:{type:"string"},socketTimeoutMS:{default:0,type:"uint"},srvMaxHosts:{type:"uint",default:0},srvServiceName:{type:"string",default:"mongodb"},ssl:{target:"tls",type:"boolean"},timeoutMS:{type:"uint"},tls:{type:"boolean"},tlsAllowInvalidCertificates:{target:"rejectUnauthorized",transform({name:$,values:[F]}){return!oA($,F)}},tlsAllowInvalidHostnames:{target:"checkServerIdentity",transform({name:$,values:[F]}){return oA($,F)?()=>{return}:void 0}},tlsCAFile:{type:"string"},tlsCRLFile:{type:"string"},tlsCertificateKeyFile:{type:"string"},tlsCertificateKeyFilePassword:{target:"passphrase",type:"any"},tlsInsecure:{transform({name:$,options:F,values:[A]}){let J=oA($,A);if(J)F.checkServerIdentity=()=>{return},F.rejectUnauthorized=!1;else F.checkServerIdentity=F.tlsAllowInvalidHostnames?()=>{return}:void 0,F.rejectUnauthorized=F.tlsAllowInvalidCertificates?!1:!0;return J}},w:{target:"writeConcern",transform({values:[$],options:F}){return sA.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,w:$}})}},waitQueueTimeoutMS:{default:0,type:"uint"},writeConcern:{target:"writeConcern",transform({values:[$],options:F}){if((0,E8.isRecord)($)||$ instanceof sA.WriteConcern)return sA.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,...$}});else if($==="majority"||typeof $==="number")return sA.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,w:$}});throw new t1.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify($)}`)}},wtimeout:{deprecated:"Please use wtimeoutMS instead",target:"writeConcern",transform({values:[$],options:F}){let A=sA.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,wtimeout:VB("wtimeout",$)}});if(A)return A;throw new t1.MongoParseError("Cannot make WriteConcern from wtimeout")}},wtimeoutMS:{target:"writeConcern",transform({values:[$],options:F}){let A=sA.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,wtimeoutMS:VB("wtimeoutMS",$)}});if(A)return A;throw new t1.MongoParseError("Cannot make WriteConcern from wtimeout")}},zlibCompressionLevel:{default:0,type:"int"},mongodbLogPath:{transform({values:[$]}){if(!(typeof $==="string"&&["stderr","stdout"].includes($)||$&&typeof $==="object"&&("write"in $)&&typeof $.write==="function"))throw new t1.MongoAPIError("Option 'mongodbLogPath' must be of type 'stderr' | 'stdout' | MongoDBLogWritable");return $}},mongodbLogComponentSeverities:{transform({values:[$]}){if(typeof $!=="object"||!$)throw new t1.MongoAPIError("Option 'mongodbLogComponentSeverities' must be a non-null object");for(let[F,A]of Object.entries($)){if(typeof A!=="string"||typeof F!=="string")throw new t1.MongoAPIError("User input for option 'mongodbLogComponentSeverities' object cannot include a non-string key or value");if(!Object.values(eg.MongoLoggableComponent).some((J)=>J===F)&&F!=="default")throw new t1.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' contains invalid key: ${F}`);if(!Object.values(eg.SeverityLevel).some((J)=>J===A))throw new t1.MongoAPIError(`Option 'mongodbLogComponentSeverities' does not support ${A} as a value for ${F}`)}return $}},mongodbLogMaxDocumentLength:{type:"uint"},connectionType:{type:"any"},srvPoller:{type:"any"},allowPartialTrustChain:{type:"any"},minDHSize:{type:"any"},pskCallback:{type:"any"},secureContext:{type:"any"},enableTrace:{type:"any"},requestCert:{type:"any"},rejectUnauthorized:{type:"any"},checkServerIdentity:{type:"any"},keepAliveInitialDelay:{type:"any"},ALPNProtocols:{type:"any"},SNICallback:{type:"any"},session:{type:"any"},requestOCSP:{type:"any"},localAddress:{type:"any"},localPort:{type:"any"},hints:{type:"any"},lookup:{type:"any"},ca:{type:"any"},cert:{type:"any"},ciphers:{type:"any"},crl:{type:"any"},ecdhCurve:{type:"any"},key:{type:"any"},passphrase:{type:"any"},pfx:{type:"any"},secureProtocol:{type:"any"},index:{type:"any"},__skipPingOnConnect:{type:"boolean"}};gY1.DEFAULT_OPTIONS=new NB(Object.entries(gY1.OPTIONS).filter(([,$])=>$.default!=null).map(([$,F])=>[$,F.default]))});var uY1=O((vY1)=>{Object.defineProperty(vY1,"__esModule",{value:!0});vY1.MongoDBAWS=void 0;var Jf=w0(),Xf=Q$(),qz=_1(),wz=l1(),c30=xX(),l30=Dg(),p30=dN(),i30=fF(),n30=110,Yf={useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1};class fY1 extends c30.AuthProvider{constructor($){super();this.credentialFetcher=new l30.AWSSDKCredentialProvider($)}async auth($){let{connection:F}=$;if(!$.credentials)throw new qz.MongoMissingCredentialsError("AuthContext must provide credentials.");if("kModuleError"in Xf.aws4)throw Xf.aws4.kModuleError;let{sign:A}=Xf.aws4;if((0,wz.maxWireVersion)(F)<9)throw new qz.MongoCompatibilityError("MONGODB-AWS authentication requires MongoDB version 4.4 or later");$.credentials=await r30($.credentials,this.credentialFetcher);let{credentials:J}=$,X=J.username,Y=J.password,W=J.mechanismProperties.AWS_SESSION_TOKEN,Z=X&&Y&&W?{accessKeyId:X,secretAccessKey:Y,sessionToken:W}:X&&Y?{accessKeyId:X,secretAccessKey:Y}:void 0,D=J.source,G=await(0,wz.randomBytes)(32),z={saslStart:1,mechanism:"MONGODB-AWS",payload:Jf.serialize({r:G,p:n30},Yf)},H=await F.command((0,wz.ns)(`${D}.$cmd`),z,void 0),U=Jf.deserialize(H.payload.buffer,Yf),Q=U.h,B=U.s.buffer;if(B.length!==64)throw new qz.MongoRuntimeError(`Invalid server nonce length ${B.length}, expected 64`);if(!wz.ByteUtils.equals(B.subarray(0,G.byteLength),G))throw new qz.MongoRuntimeError("Server nonce does not begin with client nonce");if(Q.length<1||Q.length>255||Q.indexOf("..")!==-1)throw new qz.MongoRuntimeError(`Server returned an invalid host: "${Q}"`);let q="Action=GetCallerIdentity&Version=2011-06-15",L=A({method:"POST",host:Q,region:a30(U.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":q.length,"X-MongoDB-Server-Nonce":wz.ByteUtils.toBase64(B),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:q},Z),E={a:L.headers.Authorization,d:L.headers["X-Amz-Date"]};if(W)E.t=W;let V={saslContinue:1,conversationId:H.conversationId,payload:Jf.serialize(E,Yf)};await F.command((0,wz.ns)(`${D}.$cmd`),V,void 0)}}vY1.MongoDBAWS=fY1;async function r30($,F){function A(X){if(!X.AccessKeyId||!X.SecretAccessKey)throw new qz.MongoMissingCredentialsError("Could not obtain temporary MONGODB-AWS credentials");return new p30.MongoCredentials({username:X.AccessKeyId,password:X.SecretAccessKey,source:$.source,mechanism:i30.AuthMechanism.MONGODB_AWS,mechanismProperties:{AWS_SESSION_TOKEN:X.Token}})}let J=await F.getCredentials();return A(J)}function a30($){let F=$.split(".");if(F.length===1||F[1]==="amazonaws")return"us-east-1";return F[1]}});var dY1=O((mY1)=>{Object.defineProperty(mY1,"__esModule",{value:!0});mY1.finishCommandDocument=t30;mY1.startCommandDocument=s30;var Lz=w0(),hY1=fF();function t30($,F){if(F!=null)return{saslContinue:1,conversationId:F,payload:new Lz.Binary(Lz.BSON.serialize({jwt:$}))};return{saslStart:1,mechanism:hY1.AuthMechanism.MONGODB_OIDC,payload:new Lz.Binary(Lz.BSON.serialize({jwt:$}))}}function s30($){let F={};if($.username)F.n=$.username;return{saslStart:1,autoAuthorize:1,mechanism:hY1.AuthMechanism.MONGODB_OIDC,payload:new Lz.Binary(Lz.BSON.serialize(F))}}});var Df=O((pY1)=>{Object.defineProperty(pY1,"__esModule",{value:!0});pY1.CallbackWorkflow=pY1.AUTOMATED_TIMEOUT_MS=pY1.HUMAN_TIMEOUT_MS=void 0;var $70=Z1("timers/promises"),F70=_1(),cY1=l1(),Wf=dY1();pY1.HUMAN_TIMEOUT_MS=300000;pY1.AUTOMATED_TIMEOUT_MS=60000;var A70=["accessToken","expiresInSeconds","refreshToken"],J70="User provided OIDC callbacks must return a valid object with an accessToken.",Zf=100;class lY1{constructor($,F){this.cache=$,this.callback=this.withLock(F),this.lastExecutionTime=Date.now()-Zf}async speculativeAuth($,F){if(this.cache.hasAccessToken){let A=this.cache.getAccessToken();$.accessToken=A;let J=(0,Wf.finishCommandDocument)(A);return J.db=F.source,{speculativeAuthenticate:J}}return{}}async reauthenticate($,F){if(this.cache.hasAccessToken)if($.accessToken===this.cache.getAccessToken())this.cache.removeAccessToken(),delete $.accessToken;else $.accessToken=this.cache.getAccessToken();await this.execute($,F)}async startAuthentication($,F,A){let J;if(A?.speculativeAuthenticate)J=A.speculativeAuthenticate;else J=await $.command((0,cY1.ns)(F.source),(0,Wf.startCommandDocument)(F),void 0);return J}async finishAuthentication($,F,A,J){await $.command((0,cY1.ns)(F.source),(0,Wf.finishCommandDocument)(A,J),void 0)}async executeAndValidateCallback($){let F=await this.callback($);if(X70(F))throw new F70.MongoMissingCredentialsError(J70);return F}withLock($){let F=Promise.resolve();return async(A)=>{return await F,F=F.catch(()=>null).then(async()=>{let J=Date.now()-this.lastExecutionTime;if(J<=Zf)await(0,$70.setTimeout)(Zf-J,{signal:A.timeoutContext});return this.lastExecutionTime=Date.now(),await $(A)}),await F}}}pY1.CallbackWorkflow=lY1;function X70($){if($==null||typeof $!=="object")return!0;if(!("accessToken"in $))return!0;return!Object.getOwnPropertyNames($).every((F)=>A70.includes(F))}});var Hf=O((aY1)=>{Object.defineProperty(aY1,"__esModule",{value:!0});aY1.AutomatedCallbackWorkflow=void 0;var Gf=_1(),nY1=$9(),Z70=PC(),zf=Df();class rY1 extends zf.CallbackWorkflow{constructor($,F){super($,F)}async execute($,F){if(this.cache.hasAccessToken){let J=this.cache.getAccessToken();if(!$.accessToken)$.accessToken=J;try{return await this.finishAuthentication($,F,J)}catch(X){if(X instanceof Gf.MongoError&&X.code===Gf.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),await this.execute($,F);else throw X}}let A=await this.fetchAccessToken(F);this.cache.put(A),$.accessToken=A.accessToken,await this.finishAuthentication($,F,A.accessToken)}async fetchAccessToken($){let F=new AbortController,A={timeoutContext:F.signal,version:Z70.OIDC_VERSION};if($.username)A.username=$.username;if($.mechanismProperties.TOKEN_RESOURCE)A.tokenAudience=$.mechanismProperties.TOKEN_RESOURCE;let J=nY1.Timeout.expires(zf.AUTOMATED_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(A),J])}catch(X){if(nY1.TimeoutError.is(X))throw F.abort(),new Gf.MongoOIDCError(`OIDC callback timed out after ${zf.AUTOMATED_TIMEOUT_MS}ms.`);throw X}finally{J.clear()}}}aY1.AutomatedCallbackWorkflow=rY1});var $W1=O((oY1)=>{Object.defineProperty(oY1,"__esModule",{value:!0});oY1.callback=void 0;var sY1=Hg(),Uf=_1(),D70=l1(),G70=Object.freeze({Metadata:"true",Accept:"application/json"}),z70="Azure endpoint did not return a value with only access_token and expires_in properties",H70="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure.",U70=async($)=>{let{tokenAudience:F,username:A}=$;if(!F)throw new Uf.MongoAzureError(H70);let J=await Q70(F,A);if(!K70(J))throw new Uf.MongoAzureError(z70);return J};oY1.callback=U70;async function Q70($,F){let A=new URL(sY1.AZURE_BASE_URL);(0,sY1.addAzureParams)(A,$,F);let J=await(0,D70.get)(A,{headers:G70});if(J.status!==200)throw new Uf.MongoAzureError(`Status code ${J.status} returned from the Azure endpoint. Response body: ${J.body}`);let X=JSON.parse(J.body);return{accessToken:X.access_token,expiresInSeconds:Number(X.expires_in)}}function K70($){if($==null||typeof $!=="object")return!1;return"accessToken"in $&&typeof $.accessToken==="string"&&"expiresInSeconds"in $&&typeof $.expiresInSeconds==="number"}});var XW1=O((AW1)=>{Object.defineProperty(AW1,"__esModule",{value:!0});AW1.callback=void 0;var FW1=_1(),B70=l1(),w70="http://metadata/computeMetadata/v1/instance/service-accounts/default/identity",q70=Object.freeze({"Metadata-Flavor":"Google"}),L70="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is gcp.",E70=async($)=>{let F=$.tokenAudience;if(!F)throw new FW1.MongoGCPError(L70);return await V70(F)};AW1.callback=E70;async function V70($){let F=new URL(w70);F.searchParams.append("audience",$);let A=await(0,B70.get)(F,{headers:q70});if(A.status!==200)throw new FW1.MongoGCPError(`Status code ${A.status} returned from the GCP endpoint. Response body: ${A.body}`);return{accessToken:A.body}}});var GW1=O((ZW1)=>{Object.defineProperty(ZW1,"__esModule",{value:!0});ZW1.callback=void 0;var N70=Z1("fs/promises"),C70="/var/run/secrets/kubernetes.io/serviceaccount/token",YW1="AZURE_FEDERATED_TOKEN_FILE",WW1="AWS_WEB_IDENTITY_TOKEN_FILE",M70=async()=>{let $;if(process.env[YW1])$=process.env[YW1];else if(process.env[WW1])$=process.env[WW1];else $=C70;return{accessToken:await(0,N70.readFile)($,"utf8")}};ZW1.callback=M70});var Qf=O((HW1)=>{Object.defineProperty(HW1,"__esModule",{value:!0});HW1.TokenCache=void 0;var P70=_1();class RC extends P70.MongoDriverError{}class zW1{get hasAccessToken(){return!!this.accessToken}get hasRefreshToken(){return!!this.refreshToken}get hasIdpInfo(){return!!this.idpInfo}getAccessToken(){if(!this.accessToken)throw new RC("Attempted to get an access token when none exists.");return this.accessToken}getRefreshToken(){if(!this.refreshToken)throw new RC("Attempted to get a refresh token when none exists.");return this.refreshToken}getIdpInfo(){if(!this.idpInfo)throw new RC("Attempted to get IDP information when none exists.");return this.idpInfo}put($,F){if(this.accessToken=$.accessToken,this.refreshToken=$.refreshToken,this.expiresInSeconds=$.expiresInSeconds,F)this.idpInfo=F}removeAccessToken(){this.accessToken=void 0}removeRefreshToken(){this.refreshToken=void 0}}HW1.TokenCache=zW1});var BW1=O((QW1)=>{Object.defineProperty(QW1,"__esModule",{value:!0});QW1.callback=void 0;var R70=Z1("fs"),I70=_1(),T70="OIDC_TOKEN_FILE must be set in the environment.",j70=async()=>{let $=process.env.OIDC_TOKEN_FILE;if(!$)throw new I70.MongoAWSError(T70);return{accessToken:await R70.promises.readFile($,"utf8")}};QW1.callback=j70});var PC=O((EW1)=>{Object.defineProperty(EW1,"__esModule",{value:!0});EW1.MongoDBOIDC=EW1.OIDC_WORKFLOWS=EW1.OIDC_VERSION=void 0;var qW1=_1(),O70=xX(),IC=Hf(),S70=$W1(),_70=XW1(),k70=GW1(),TC=Qf(),b70=BW1(),x70="AuthContext must provide credentials.";EW1.OIDC_VERSION=1;EW1.OIDC_WORKFLOWS=new Map;EW1.OIDC_WORKFLOWS.set("test",()=>new IC.AutomatedCallbackWorkflow(new TC.TokenCache,b70.callback));EW1.OIDC_WORKFLOWS.set("azure",()=>new IC.AutomatedCallbackWorkflow(new TC.TokenCache,S70.callback));EW1.OIDC_WORKFLOWS.set("gcp",()=>new IC.AutomatedCallbackWorkflow(new TC.TokenCache,_70.callback));EW1.OIDC_WORKFLOWS.set("k8s",()=>new IC.AutomatedCallbackWorkflow(new TC.TokenCache,k70.callback));class LW1 extends O70.AuthProvider{constructor($){super();if(!$)throw new qW1.MongoInvalidArgumentError("No workflow provided to the OIDC auth provider.");this.workflow=$}async auth($){let{connection:F,reauthenticating:A,response:J}=$;if(J?.speculativeAuthenticate?.done&&!A)return;let X=wW1($);if(A)await this.workflow.reauthenticate(F,X);else await this.workflow.execute(F,X,J)}async prepare($,F){let{connection:A}=F,J=wW1(F),X=await this.workflow.speculativeAuth(A,J);return{...$,...X}}}EW1.MongoDBOIDC=LW1;function wW1($){let{credentials:F}=$;if(!F)throw new qW1.MongoMissingCredentialsError(x70);return F}});var RW1=O((MW1)=>{Object.defineProperty(MW1,"__esModule",{value:!0});MW1.HumanCallbackWorkflow=void 0;var f70=w0(),MB=_1(),NW1=$9(),v70=PC(),Kf=Df();class CW1 extends Kf.CallbackWorkflow{constructor($,F){super($,F)}async execute($,F){if(this.cache.hasAccessToken){let W=this.cache.getAccessToken();$.accessToken=W;try{return await this.finishAuthentication($,F,W)}catch(Z){if(Z instanceof MB.MongoError&&Z.code===MB.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),delete $.accessToken,await this.execute($,F);else throw Z}}if(this.cache.hasRefreshToken){let W=this.cache.getRefreshToken(),Z=await this.fetchAccessToken(this.cache.getIdpInfo(),F,W);this.cache.put(Z),$.accessToken=Z.accessToken;try{return await this.finishAuthentication($,F,Z.accessToken)}catch(D){if(D instanceof MB.MongoError&&D.code===MB.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeRefreshToken(),delete $.accessToken,await this.execute($,F);else throw D}}let A=await this.startAuthentication($,F),J=A.conversationId,X=f70.BSON.deserialize(A.payload.buffer),Y=await this.fetchAccessToken(X,F);return this.cache.put(Y,X),$.accessToken=Y.accessToken,await this.finishAuthentication($,F,Y.accessToken,J)}async fetchAccessToken($,F,A){let J=new AbortController,X={timeoutContext:J.signal,version:v70.OIDC_VERSION,idpInfo:$};if(F.username)X.username=F.username;if(A)X.refreshToken=A;let Y=NW1.Timeout.expires(Kf.HUMAN_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(X),Y])}catch(W){if(NW1.TimeoutError.is(W))throw J.abort(),new MB.MongoOIDCError(`OIDC callback timed out after ${Kf.HUMAN_TIMEOUT_MS}ms.`);throw W}finally{Y.clear()}}}MW1.HumanCallbackWorkflow=CW1});var OW1=O((TW1)=>{Object.defineProperty(TW1,"__esModule",{value:!0});TW1.Plain=void 0;var y70=w0(),u70=_1(),h70=l1(),m70=xX();class IW1 extends m70.AuthProvider{async auth($){let{connection:F,credentials:A}=$;if(!A)throw new u70.MongoMissingCredentialsError("AuthContext must provide credentials.");let{username:J,password:X}=A,W={saslStart:1,mechanism:"PLAIN",payload:new y70.Binary(Buffer.from(`\x00${J}\x00${X}`)),autoAuthorize:1};await F.command((0,h70.ns)("$external.$cmd"),W,void 0)}}TW1.Plain=IW1});var bW1=O((Ya0,kW1)=>{var SW1=($)=>$.codePointAt(0),d70=($)=>$[0],c70=($)=>$[$.length-1];function _W1($){let F=[],A=$.length;for(let J=0;J<A;J+=1){let X=$.charCodeAt(J);if(X>=55296&&X<=56319&&A>J+1){let Y=$.charCodeAt(J+1);if(Y>=56320&&Y<=57343){F.push((X-55296)*1024+Y-56320+65536),J+=1;continue}}F.push(X)}return F}function PB({unassigned_code_points:$,commonly_mapped_to_nothing:F,non_ASCII_space_characters:A,prohibited_characters:J,bidirectional_r_al:X,bidirectional_l:Y},W,Z={}){let D=A,G=F;if(typeof W!=="string")throw TypeError("Expected string.");if(W.length===0)return"";let z=_W1(W).map((V)=>D.get(V)?32:V).filter((V)=>!G.get(V)),H=String.fromCodePoint.apply(null,z).normalize("NFKC"),U=_W1(H);if(U.some((V)=>J.get(V)))throw Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if(Z.allowUnassigned!==!0){if(U.some((R)=>$.get(R)))throw Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5")}let B=U.some((V)=>X.get(V)),q=U.some((V)=>Y.get(V));if(B&&q)throw Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");let L=X.get(SW1(d70(H))),E=X.get(SW1(c70(H)));if(B&&!(L&&E))throw Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return H}PB.saslprep=PB;PB.default=PB;kW1.exports=PB});var fW1=O((Wa0,gW1)=>{gW1.exports=eA;function eA($,F){if(!(this instanceof eA))return new eA($,F);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=$||1024,this.deduplicate=F?F.deduplicate:null,this.zeros=this.deduplicate?jC(this.deduplicate.length):null}eA.prototype.updated=function($){while(this.deduplicate&&$.buffer[$.deduplicate]===this.deduplicate[$.deduplicate])if($.deduplicate++,$.deduplicate===this.deduplicate.length){if($.deduplicate=0,$.buffer.equals&&$.buffer.equals(this.deduplicate))$.buffer=this.deduplicate;break}if($.updated||!this.updates)return;$.updated=!0,this.updates.push($)};eA.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var $=this.updates.pop();return $.updated=!1,$};eA.prototype._array=function($,F){if($>=this.maxPages){if(F)return;l70(this,$)}n70($,this.path);var A=this.pages;for(var J=this.level;J>0;J--){var X=this.path[J],Y=A[X];if(!Y){if(F)return;Y=A[X]=Array(32768)}A=Y}return A};eA.prototype.get=function($,F){var A=this._array($,F),J=this.path[0],X=A&&A[J];if(!X&&!F){if(X=A[J]=new xW1($,jC(this.pageSize)),$>=this.length)this.length=$+1}if(X&&X.buffer===this.deduplicate&&this.deduplicate&&!F)X.buffer=i70(X.buffer),X.deduplicate=0;return X};eA.prototype.set=function($,F){var A=this._array($,!1),J=this.path[0];if($>=this.length)this.length=$+1;if(!F||this.zeros&&F.equals&&F.equals(this.zeros)){A[J]=void 0;return}if(this.deduplicate&&F.equals&&F.equals(this.deduplicate))F=this.deduplicate;var X=A[J],Y=p70(F,this.pageSize);if(X)X.buffer=Y;else A[J]=new xW1($,Y)};eA.prototype.toBuffer=function(){var $=Array(this.length),F=jC(this.pageSize),A=0;while(A<$.length){var J=this._array(A,!0);for(var X=0;X<32768&&A<$.length;X++)$[A++]=J&&J[X]?J[X].buffer:F}return Buffer.concat($)};function l70($,F){while($.maxPages<F){var A=$.pages;$.pages=Array(32768),$.pages[0]=A,$.level++,$.maxPages*=32768}}function p70($,F){if($.length===F)return $;if($.length>F)return $.slice(0,F);var A=jC(F);return $.copy(A),A}function jC($){if(Buffer.alloc)return Buffer.alloc($);var F=new Buffer($);return F.fill(0),F}function i70($){var F=Buffer.allocUnsafe?Buffer.allocUnsafe($.length):new Buffer($.length);return $.copy(F),F}function xW1($,F){this.offset=$*F.length,this.buffer=F,this.updated=!1,this.deduplicate=0}function n70($,F){$=($-(F[0]=$&32767))/32768,$=($-(F[1]=$&32767))/32768,F[3]=($-(F[2]=$&32767))/32768&32767}});var yW1=O((Za0,vW1)=>{var r70=fW1();vW1.exports=rX;function rX($){if(!(this instanceof rX))return new rX($);if(!$)$={};if(Buffer.isBuffer($))$={buffer:$};if(this.pageOffset=$.pageOffset||0,this.pageSize=$.pageSize||1024,this.pages=$.pages||r70(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!t70(this.pageSize))throw Error("The page size should be a power of two");if(this._trackUpdates=!!$.trackUpdates,this._pageMask=this.pageSize-1,$.buffer){for(var F=0;F<$.buffer.length;F+=this.pageSize)this.pages.set(F/this.pageSize,$.buffer.slice(F,F+this.pageSize));this.byteLength=$.buffer.length,this.length=8*this.byteLength}}rX.prototype.get=function($){var F=$&7,A=($-F)/8;return!!(this.getByte(A)&128>>F)};rX.prototype.getByte=function($){var F=$&this._pageMask,A=($-F)/this.pageSize,J=this.pages.get(A,!0);return J?J.buffer[F+this.pageOffset]:0};rX.prototype.set=function($,F){var A=$&7,J=($-A)/8,X=this.getByte(J);return this.setByte(J,F?X|128>>A:X&(255^128>>A))};rX.prototype.toBuffer=function(){var $=a70(this.pages.length*this.pageSize);for(var F=0;F<this.pages.length;F++){var A=this.pages.get(F,!0),J=F*this.pageSize;if(A)A.buffer.copy($,J,this.pageOffset,this.pageOffset+this.pageSize)}return $};rX.prototype.setByte=function($,F){var A=$&this._pageMask,J=($-A)/this.pageSize,X=this.pages.get(J,!1);if(A+=this.pageOffset,X.buffer[A]===F)return!1;if(X.buffer[A]=F,$>=this.byteLength)this.byteLength=$+1,this.length=this.byteLength*8;if(this._trackUpdates)this.pages.updated(X);return!0};function a70($){if(Buffer.alloc)return Buffer.alloc($);var F=new Buffer($);return F.fill(0),F}function t70($){return!($&$-1)}});var uW1=O((RB)=>{var s70=RB&&RB.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(RB,"__esModule",{value:!0});RB.createMemoryCodePoints=e70;var o70=s70(yW1());function e70($){let F=0;function A(){let G=$.readUInt32BE(F);F+=4;let z=$.slice(F,F+G);return F+=G,(0,o70.default)({buffer:z})}let J=A(),X=A(),Y=A(),W=A(),Z=A(),D=A();return{unassigned_code_points:J,commonly_mapped_to_nothing:X,non_ASCII_space_characters:Y,prohibited_characters:W,bidirectional_r_al:Z,bidirectional_l:D}}});var mW1=O((hW1)=>{Object.defineProperty(hW1,"__esModule",{value:!0});var $50=Z1("zlib");hW1.default=(0,$50.gunzipSync)(Buffer.from("H4sIAAAAAAACA+3dTYgcaRkA4LemO9Mhxm0FITnE9Cwr4jHgwgZ22B6YywqCJ0HQg5CL4sGTuOjCtGSF4CkHEW856MlTQHD3EJnWkU0Owh5VxE3LHlYQdNxd2U6mU59UV/d09fw4M2EySSXPAzNdP1/9fX/99bzVNZEN4jisRDulVFnQmLxm1aXF9Id/2/xMxNJ4XZlg576yuYlGt9gupV6xoFf8jhu9YvulVrFlp5XSx+lfvYhORGPXvqIRWSxERKtIm8bKFd10WNfKDS5Fo9jJWrq2+M2IlW+8uHgl/+BsROfPF4v5L7148Ur68Sha6dqZpYiVVy8tvLCWXo80Sf/lS89dGX2wHGvpzoXVn75/YWH5wmqe8uika82ViJXTy83Ve2k5Urozm38wm4/ls6t5uT6yfsTSJ7J3T0VKt8c5ExEXI8aFkH729c3eT+7EC6ca8cVULZUiYacX0R5PNWNxlh9L1y90q5kyzrpyy+9WcvOV6URntqw7La9sNVstXyczWVaWYbaaTYqzOHpr7pyiNT3/YzKuT63Z/FqKZlFTiuXtFM2vVOtIq7jiyKJbWZaOWD0euz0yoV2Z7kY0xq2x0YhfzVpmM5px9nTEH7JZ0ot5u39p0ma75Z472/s/H+2yr2inYyuq7fMvJivH2rM72N/Z3lyL31F2b1ya1P0zn816k2KP6JU9UzseucdQH5YqVeH/lFajSN2udg+TLJ9rksNxlvV2lki19rXKI43TPLejFu4ov7k3nMbhyhfY3Xb37f8BAGCf0eMTOH5szf154KmnNgKcnLb+Fzi2AfXktbN7fJelwTAiO/W5uQ2KINXRYu+znqo/WTAdLadURHmy3qciazd3bra4T3w16/f7t7Ms9U5gfJu10955sx1r3vmhBAAAAAAAgId20J1iZbDowNvIjuH427Gr5l/eiC+8OplZON8sVjx/qr9y+Pj+YRItT+NqAM+kkZs3AAAAAID6yfx1FwCAI97/dCh1/ub6SA0AAAAAAAAAgNoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hutp5SiQpYAAAAAAAAAQO2MIpZiT804flnAE2fhwjOeAZXr76kOAAAAAAAA8FjNf4N/l0NE3U/vuVQskLpSd4/Yh2xu9xTu0tFeeNYsLI2f/VMdNxTzj6Je9E/+6pp6Nn3awW3A54goe4Bss6v+PGsjQGMAAAAAAOBp5XEgwH6e7J7rwEQHRb/XvAMAAAAAAAA8yzoDeQDwVGjIAgAAAAAAAACoPfF/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqL/GSkSkClkCAAAAAAAAALXTSAAAAAAAAABA3Y1kAQAAAAAAAADUX8RSXZ9dsHC9+M8Fg2Ex/em1lAZpEBGttcrVjZqLEa+k0XpKw9mG4zWx4ukPUMhkAQAAAAAAABzBqbSe3//rXOS9HxGdo4TqR2XkutCdBu+LaPZw/lBbO7cbHnh2C7N7AIo4evEznllqLqWUp/LnYOtpM2bnOH66wI1+9GO4sOuISwv/TOlumu56FDv3NZhc4mR9v7zYIrafr40j/Cccvj9Xns3t3mu99E7qxUv3bqS0/ouNH/08++RGemfQ+nsx/5uNXsQPGulynPvv3ZTW37zd+1ovrqaYpP/122X6Xpx779Z3zr/3YOPKW1lkaRDf31pPaf3j/msRsVGkL+d/f+/m4sJsPm1cfSsr16e8m9Ldj/KsnyIuR3nXw83Is3EhxLd/2V773ks3m/cj/THKUummdP9qKhIOImuOU0Xjwb3y+oqt735rpTetVbF9n8R4x9crRfO77TKqVOZpDclv5bfK18lMnk+q0K18UpxF/RrGXE0Zxtqx3tWSj+vxbL4XaasfKb0dRbtLW73JsfPGg177H+OmGKlfvS1msllt7JEJm9XOJqXR+Fkfo1H66uy5H1v3Xx5+uJmGLw9jro2u7Loj4PnuR6+f+e3d261+eazNhzrL7X83MohoHpS4PddV8ki1it61//pw1g7z6p1U/26Nm2llST57B5rUvuG0XqSU/rPd7jYrqWcbd+beJQ77BgPMDwn37/8BAGCf0eMTOH4cPlufv9VGgJOzqf8Fjm1APXkd7B7f5dF57GPMaWy/MTvjvNvtXj6h8W2+GXvnzXaseeeHEgAAAAAAAB7aQXeKlcGiadBoEOeLb2dtpGOL2MyOtf391a3P/zD96c3JzIP3t4oV797vrh8+vn+YRL5bBuj/AQAAAABqJvfHXQAAHkX82zfXAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACeAgkAAAAAAAAAqLuRLAAAAAAAAACA2hv9D1iu/VAYaAYA","base64"))});var lW1=O((Bf,cW1)=>{var dW1=Bf&&Bf.__importDefault||function($){return $&&$.__esModule?$:{default:$}},A50=dW1(bW1()),J50=uW1(),X50=dW1(mW1()),Y50=(0,J50.createMemoryCodePoints)(X50.default);function IB($,F){return(0,A50.default)(Y50,$,F)}IB.saslprep=IB;IB.default=IB;cW1.exports=IB});var FZ1=O((eW1)=>{Object.defineProperty(eW1,"__esModule",{value:!0});eW1.ScramSHA256=eW1.ScramSHA1=void 0;var W50=lW1(),XZ=Z1("crypto"),wf=w0(),q$=_1(),_C=l1(),Z50=xX(),pW1=fF();class Lf extends Z50.AuthProvider{constructor($){super();this.cryptoMethod=$||"sha1"}async prepare($,F){let A=this.cryptoMethod,J=F.credentials;if(!J)throw new q$.MongoMissingCredentialsError("AuthContext must provide credentials.");let X=await(0,_C.randomBytes)(24);return F.nonce=X,{...$,speculativeAuthenticate:{...aW1(A,J,X),db:J.source}}}async auth($){let{reauthenticating:F,response:A}=$;if(A?.speculativeAuthenticate&&!F)return await tW1(this.cryptoMethod,A.speculativeAuthenticate,$);return await D50(this.cryptoMethod,$)}}function nW1($){return $.replace("=","=3D").replace(",","=2C")}function rW1($,F){return Buffer.concat([Buffer.from("n=","utf8"),Buffer.from($,"utf8"),Buffer.from(",r=","utf8"),Buffer.from(F.toString("base64"),"utf8")])}function aW1($,F,A){let J=nW1(F.username);return{saslStart:1,mechanism:$==="sha1"?pW1.AuthMechanism.MONGODB_SCRAM_SHA1:pW1.AuthMechanism.MONGODB_SCRAM_SHA256,payload:new wf.Binary(Buffer.concat([Buffer.from("n,,","utf8"),rW1(J,A)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}async function D50($,F){let{connection:A,credentials:J}=F;if(!J)throw new q$.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!F.nonce)throw new q$.MongoInvalidArgumentError("AuthContext must contain a valid nonce property");let X=F.nonce,Y=J.source,W=aW1($,J,X),Z=await A.command((0,_C.ns)(`${Y}.$cmd`),W,void 0);await tW1($,Z,F)}async function tW1($,F,A){let{connection:J,credentials:X}=A;if(!X)throw new q$.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!A.nonce)throw new q$.MongoInvalidArgumentError("Unable to continue SCRAM without valid nonce");let Y=A.nonce,W=X.source,Z=nW1(X.username),D=X.password,G=$==="sha256"?(0,W50.saslprep)(D):G50(Z,D),z=Buffer.isBuffer(F.payload)?new wf.Binary(F.payload):F.payload,H=iW1(z),U=parseInt(H.i,10);if(U&&U<4096)throw new q$.MongoRuntimeError(`Server returned an invalid iteration count ${U}`);let{s:Q,r:B}=H;if(B.startsWith("nonce"))throw new q$.MongoRuntimeError(`Server returned an invalid nonce: ${B}`);let q=`c=biws,r=${B}`,L=K50(G,Buffer.from(Q,"base64"),U,$),E=OC($,L,"Client Key"),V=OC($,L,"Server Key"),R=H50($,E),N=[rW1(Z,Y),z.toString("utf8"),q].join(","),S=OC($,R,N),C=`p=${z50(E,S)}`,M=[q,C].join(","),I=OC($,V,N),T={saslContinue:1,conversationId:F.conversationId,payload:new wf.Binary(Buffer.from(M))},j=await J.command((0,_C.ns)(`${W}.$cmd`),T,void 0),b=iW1(j.payload);if(!B50(Buffer.from(b.v,"base64"),I))throw new q$.MongoRuntimeError("Server returned an invalid signature");if(j.done!==!1)return;let g={saslContinue:1,conversationId:j.conversationId,payload:Buffer.alloc(0)};await J.command((0,_C.ns)(`${W}.$cmd`),g,void 0)}function iW1($){let F=$.toString("utf8"),A={},J=F.split(",");for(let X=0;X<J.length;X++){let Y=(J[X].match(/^([^=]*)=(.*)$/)??[]).slice(1);A[Y[0]]=Y[1]}return A}function G50($,F){if(typeof $!=="string")throw new q$.MongoInvalidArgumentError("Username must be a string");if(typeof F!=="string")throw new q$.MongoInvalidArgumentError("Password must be a string");if(F.length===0)throw new q$.MongoInvalidArgumentError("Password cannot be empty");let A;try{A=XZ.createHash("md5")}catch(J){if(XZ.getFips())throw Error("Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode");throw J}return A.update(`${$}:mongo:${F}`,"utf8"),A.digest("hex")}function z50($,F){if(!Buffer.isBuffer($))$=Buffer.from($);if(!Buffer.isBuffer(F))F=Buffer.from(F);let A=Math.max($.length,F.length),J=[];for(let X=0;X<A;X+=1)J.push($[X]^F[X]);return Buffer.from(J).toString("base64")}function H50($,F){return XZ.createHash($).update(F).digest()}function OC($,F,A){return XZ.createHmac($,F).update(A).digest()}var SC={},qf=0;function U50(){SC={},qf=0}var Q50={sha256:32,sha1:20};function K50($,F,A,J){let X=[$,F.toString("base64"),A].join("_");if(SC[X]!=null)return SC[X];let Y=XZ.pbkdf2Sync($,F,A,Q50[J],J);if(qf>=200)U50();return SC[X]=Y,qf+=1,Y}function B50($,F){if($.length!==F.length)return!1;if(typeof XZ.timingSafeEqual==="function")return XZ.timingSafeEqual($,F);let A=0;for(let J=0;J<$.length;J++)A|=$[J]^F[J];return A===0}class sW1 extends Lf{constructor(){super("sha1")}}eW1.ScramSHA1=sW1;class oW1 extends Lf{constructor(){super("sha256")}}eW1.ScramSHA256=oW1});var ZZ1=O((YZ1)=>{Object.defineProperty(YZ1,"__esModule",{value:!0});YZ1.X509=void 0;var AZ1=_1(),q50=l1(),L50=xX();class XZ1 extends L50.AuthProvider{async prepare($,F){let{credentials:A}=F;if(!A)throw new AZ1.MongoMissingCredentialsError("AuthContext must provide credentials.");return{...$,speculativeAuthenticate:JZ1(A)}}async auth($){let{connection:F,credentials:A}=$;if(!A)throw new AZ1.MongoMissingCredentialsError("AuthContext must provide credentials.");if($.response?.speculativeAuthenticate)return;await F.command((0,q50.ns)("$external.$cmd"),JZ1(A),void 0)}}YZ1.X509=XZ1;function JZ1($){let F={authenticate:1,mechanism:"MONGODB-X509"};if($.username)F.user=$.username;return F}});var Ef=O((QZ1)=>{Object.defineProperty(QZ1,"__esModule",{value:!0});QZ1.MongoClientAuthProviders=void 0;var E50=hN(),V50=uY1(),zZ1=PC(),N50=Hf(),C50=RW1(),DZ1=Qf(),M50=OW1(),YZ=fF(),GZ1=FZ1(),P50=ZZ1(),HZ1=_1(),R50=new Map([[YZ.AuthMechanism.MONGODB_AWS,({AWS_CREDENTIAL_PROVIDER:$})=>new V50.MongoDBAWS($)],[YZ.AuthMechanism.MONGODB_GSSAPI,()=>new E50.GSSAPI],[YZ.AuthMechanism.MONGODB_OIDC,($)=>new zZ1.MongoDBOIDC(I50($))],[YZ.AuthMechanism.MONGODB_PLAIN,()=>new M50.Plain],[YZ.AuthMechanism.MONGODB_SCRAM_SHA1,()=>new GZ1.ScramSHA1],[YZ.AuthMechanism.MONGODB_SCRAM_SHA256,()=>new GZ1.ScramSHA256],[YZ.AuthMechanism.MONGODB_X509,()=>new P50.X509]]);class UZ1{constructor(){this.existingProviders=new Map}getOrCreateProvider($,F){let A=this.existingProviders.get($);if(A)return A;let J=R50.get($);if(!J)throw new HZ1.MongoInvalidArgumentError(`authMechanism ${$} not supported`);let X=J(F);return this.existingProviders.set($,X),X}}QZ1.MongoClientAuthProviders=UZ1;function I50($){if($.OIDC_HUMAN_CALLBACK)return new C50.HumanCallbackWorkflow(new DZ1.TokenCache,$.OIDC_HUMAN_CALLBACK);else if($.OIDC_CALLBACK)return new N50.AutomatedCallbackWorkflow(new DZ1.TokenCache,$.OIDC_CALLBACK);else{let F=$.ENVIRONMENT,A=zZ1.OIDC_WORKFLOWS.get(F)?.();if(!A)throw new HZ1.MongoInvalidArgumentError(`Could not load workflow for environment ${$.ENVIRONMENT}`);return A}}});var Nf=O((BZ1)=>{Object.defineProperty(BZ1,"__esModule",{value:!0});BZ1.ClientBulkWriteOperation=void 0;var T50=T6(),j50=l1(),O50=X4(),WZ=o6();class Vf extends O50.CommandOperation{get commandName(){return"bulkWrite"}constructor($,F){super(void 0,F);this.SERVER_COMMAND_RESPONSE_TYPE=T50.ClientBulkWriteCursorResponse,this.commandBuilder=$,this.options=F,this.ns=new j50.MongoDBNamespace("admin","$cmd")}resetBatch(){return this.commandBuilder.resetBatch()}get canRetryWrite(){return this.commandBuilder.isBatchRetryable}handleOk($){return $}buildCommandDocument($,F){let A=this.commandBuilder.buildBatch($.description.maxMessageSizeBytes,$.description.maxWriteBatchSize,$.description.maxBsonObjectSize);if(!this.canRetryWrite)this.options.willRetryWrite=!1;return A}}BZ1.ClientBulkWriteOperation=Vf;(0,WZ.defineAspects)(Vf,[WZ.Aspect.WRITE_OPERATION,WZ.Aspect.SKIP_COLLATION,WZ.Aspect.CURSOR_CREATING,WZ.Aspect.RETRYABLE,WZ.Aspect.COMMAND_BATCHING,WZ.Aspect.SUPPORTS_RAW_DATA])});var VZ1=O((LZ1)=>{Object.defineProperty(LZ1,"__esModule",{value:!0});LZ1.ClientBulkWriteCursor=void 0;var S50=Nf(),_50=q9(),qZ1=l1(),k50=q8();class Cf extends k50.AbstractCursor{constructor($,F,A={}){super($,new qZ1.MongoDBNamespace("admin","$cmd"),A);this.commandBuilder=F,this.clientBulkWriteOptions=A}get response(){if(this.cursorResponse)return this.cursorResponse;return null}get operations(){return this.commandBuilder.lastOperations}clone(){let $=(0,qZ1.mergeOptions)({},this.clientBulkWriteOptions);return delete $.session,new Cf(this.client,this.commandBuilder,{...$})}async _initialize($){let F=new S50.ClientBulkWriteOperation(this.commandBuilder,{...this.clientBulkWriteOptions,...this.cursorOptions,session:$}),A=await(0,_50.executeOperation)(this.client,F,this.timeoutContext);return this.cursorResponse=A,{server:F.server,session:$,response:A}}}LZ1.ClientBulkWriteCursor=Cf});var bZ1=O((TZ1)=>{Object.defineProperty(TZ1,"__esModule",{value:!0});TZ1.buildReplaceOneOperation=TZ1.buildUpdateManyOperation=TZ1.buildUpdateOneOperation=TZ1.buildDeleteManyOperation=TZ1.buildDeleteOneOperation=TZ1.buildInsertOneOperation=TZ1.ClientBulkWriteCommandBuilder=void 0;TZ1.buildOperation=Rf;var Mf=w0(),NZ1=JB(),TB=_1(),MZ1=TG(),If=l1(),CZ1=1000;class PZ1{constructor($,F,A){this.models=$,this.options=F,this.pkFactory=A??If.DEFAULT_PK_FACTORY,this.currentModelIndex=0,this.previousModelIndex=0,this.lastOperations=[],this.isBatchRetryable=!0}get errorsOnly(){if("verboseResults"in this.options)return!this.options.verboseResults;return!0}hasNextBatch(){return this.currentModelIndex<this.models.length}resetBatch(){return this.currentModelIndex=this.previousModelIndex,!0}buildBatch($,F,A){this.isBatchRetryable=!0;let J=0,X=0,Y=this.baseCommand(),W=new Map;this.previousModelIndex=this.currentModelIndex;while(this.currentModelIndex<this.models.length){let Z=this.models[this.currentModelIndex],D=Z.namespace,G=W.get(D);if(Z.name==="deleteMany"||Z.name==="updateMany")this.isBatchRetryable=!1;if(G!=null){let z=Rf(Z,G,this.pkFactory,this.options),H;try{H=Mf.BSON.serialize(z)}catch(U){throw new TB.MongoInvalidArgumentError("Could not serialize operation to BSON",{cause:U})}if(Pf("ops",H,A),J+H.length<$&&Y.ops.documents.length<F)J=CZ1+Y.ops.push(z,H),this.currentModelIndex++;else break}else{W.set(D,X);let z={ns:D},H=Rf(Z,X,this.pkFactory,this.options),U,Q;try{U=Mf.BSON.serialize(z),Q=Mf.BSON.serialize(H)}catch(B){throw new TB.MongoInvalidArgumentError("Could not serialize ns info to BSON",{cause:B})}if(Pf("nsInfo",U,A),Pf("ops",Q,A),J+U.length+Q.length<$&&Y.ops.documents.length<F)J=CZ1+Y.nsInfo.push(z,U)+Y.ops.push(H,Q),X++,this.currentModelIndex++;else break}}return this.lastOperations=Y.ops.documents,Y}baseCommand(){let $={bulkWrite:1,errorsOnly:this.errorsOnly,ordered:this.options.ordered??!0,ops:new NZ1.DocumentSequence("ops"),nsInfo:new NZ1.DocumentSequence("nsInfo")};if(this.options.bypassDocumentValidation!=null)$.bypassDocumentValidation=this.options.bypassDocumentValidation;if(this.options.let)$.let=this.options.let;if(this.options.comment!==void 0)$.comment=this.options.comment;return $}}TZ1.ClientBulkWriteCommandBuilder=PZ1;function Pf($,F,A){if(F.length>A)throw new TB.MongoInvalidArgumentError(`Client bulk write operation ${$} of length ${F.length} exceeds the max bson object size of ${A}`)}var b50=($,F,A)=>{let J={insert:F,document:$.document};return J.document._id=$.document._id??A.createPk(),J};TZ1.buildInsertOneOperation=b50;var x50=($,F)=>{return RZ1($,F,!1)};TZ1.buildDeleteOneOperation=x50;var g50=($,F)=>{return RZ1($,F,!0)};TZ1.buildDeleteManyOperation=g50;function RZ1($,F,A){let J={delete:F,multi:A,filter:$.filter};if($.hint)J.hint=$.hint;if($.collation)J.collation=$.collation;return J}var f50=($,F,A)=>{return IZ1($,F,!1,A)};TZ1.buildUpdateOneOperation=f50;var v50=($,F,A)=>{return IZ1($,F,!0,A)};TZ1.buildUpdateManyOperation=v50;function y50($,F){if(!(0,If.hasAtomicOperators)($,F))throw new TB.MongoAPIError("Client bulk write update models must only contain atomic modifiers (start with $) and must not be empty.")}function IZ1($,F,A,J){y50($.update,J);let X={update:F,multi:A,filter:$.filter,updateMods:$.update};if($.hint)X.hint=$.hint;if($.upsert)X.upsert=$.upsert;if($.arrayFilters)X.arrayFilters=$.arrayFilters;if($.collation)X.collation=$.collation;if(!A&&"sort"in $&&$.sort!=null)X.sort=(0,MZ1.formatSort)($.sort);return X}var u50=($,F)=>{if((0,If.hasAtomicOperators)($.replacement))throw new TB.MongoAPIError("Client bulk write replace models must not contain atomic modifiers (start with $) and must not be empty.");let A={update:F,multi:!1,filter:$.filter,updateMods:$.replacement};if($.hint)A.hint=$.hint;if($.upsert)A.upsert=$.upsert;if($.collation)A.collation=$.collation;if($.sort!=null)A.sort=(0,MZ1.formatSort)($.sort);return A};TZ1.buildReplaceOneOperation=u50;function Rf($,F,A,J){switch($.name){case"insertOne":return TZ1.buildInsertOneOperation($,F,A);case"deleteOne":return TZ1.buildDeleteOneOperation($,F);case"deleteMany":return TZ1.buildDeleteManyOperation($,F);case"updateOne":return TZ1.buildUpdateOneOperation($,F,J);case"updateMany":return TZ1.buildUpdateManyOperation($,F,J);case"replaceOne":return TZ1.buildReplaceOneOperation($,F)}}});var vZ1=O((gZ1)=>{Object.defineProperty(gZ1,"__esModule",{value:!0});gZ1.ClientBulkWriteResultsMerger=void 0;var d50=iA(),c50=_1(),l50={acknowledged:!1,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0};class xZ1{static unacknowledged(){return l50}constructor($){if(this.options=$,this.currentBatchOffset=0,this.writeConcernErrors=[],this.writeErrors=new Map,this.result={acknowledged:!0,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},$.verboseResults)this.result.insertResults=new Map,this.result.updateResults=new Map,this.result.deleteResults=new Map}get bulkWriteResult(){return{acknowledged:this.result.acknowledged,insertedCount:this.result.insertedCount,upsertedCount:this.result.upsertedCount,matchedCount:this.result.matchedCount,modifiedCount:this.result.modifiedCount,deletedCount:this.result.deletedCount,insertResults:this.result.insertResults,updateResults:this.result.updateResults,deleteResults:this.result.deleteResults}}async merge($){let F;try{for await(let A of $)if(A.ok===1){if(this.options.verboseResults)this.processDocument($,A)}else if(this.options.ordered){let J=new c50.MongoClientBulkWriteError({message:"Mongo client ordered bulk write encountered a write error."});throw J.writeErrors.set(A.idx+this.currentBatchOffset,{code:A.code,message:A.errmsg}),J.partialResult=this.result,J}else this.writeErrors.set(A.idx+this.currentBatchOffset,{code:A.code,message:A.errmsg})}catch(A){if(A instanceof d50.MongoWriteConcernError){let J=A.result;if(F={insertedCount:J.nInserted,upsertedCount:J.nUpserted,matchedCount:J.nMatched,modifiedCount:J.nModified,deletedCount:J.nDeleted,writeConcernError:J.writeConcernError},this.options.verboseResults&&J.cursor.firstBatch){for(let X of J.cursor.firstBatch)if(X.ok===1)this.processDocument($,X)}}else throw A}finally{if($.response){let A=$.response;this.incrementCounts(A)}this.currentBatchOffset+=$.operations.length}if(F){let A=F.writeConcernError;this.incrementCounts(F),this.writeConcernErrors.push({code:A.code,message:A.errmsg})}return this.result}processDocument($,F){let A=$.operations[F.idx];if("insert"in A)this.result.insertResults?.set(F.idx+this.currentBatchOffset,{insertedId:A.document._id});if("update"in A){let J={matchedCount:F.n,modifiedCount:F.nModified??0,didUpsert:F.upserted!=null};if(F.upserted)J.upsertedId=F.upserted._id;this.result.updateResults?.set(F.idx+this.currentBatchOffset,J)}if("delete"in A)this.result.deleteResults?.set(F.idx+this.currentBatchOffset,{deletedCount:F.n})}incrementCounts($){this.result.insertedCount+=$.insertedCount,this.result.upsertedCount+=$.upsertedCount,this.result.matchedCount+=$.matchedCount,this.result.modifiedCount+=$.modifiedCount,this.result.deletedCount+=$.deletedCount}}gZ1.ClientBulkWriteResultsMerger=xZ1});var cZ1=O((mZ1)=>{Object.defineProperty(mZ1,"__esModule",{value:!0});mZ1.ClientBulkWriteExecutor=void 0;var yZ1=q8(),p50=VZ1(),ZZ=_1(),i50=$9(),n50=l1(),r50=i8(),a50=q9(),t50=Nf(),s50=bZ1(),uZ1=vZ1();class hZ1{constructor($,F,A){if(F.length===0)throw new ZZ.MongoClientBulkWriteExecutionError("No client bulk write models were provided.");if(this.client=$,this.operations=F,this.options={ordered:!0,bypassDocumentValidation:!1,verboseResults:!1,...A},!this.options.writeConcern)this.options.writeConcern=r50.WriteConcern.fromOptions(this.client.s.options);if(this.options.writeConcern?.w===0){if(this.options.verboseResults)throw new ZZ.MongoInvalidArgumentError("Cannot request unacknowledged write concern and verbose results");if(this.options.ordered)throw new ZZ.MongoInvalidArgumentError("Cannot request unacknowledged write concern and ordered writes")}}async execute(){let $=this.client.s.options.pkFactory,F=new s50.ClientBulkWriteCommandBuilder(this.operations,this.options,$),A=(0,n50.resolveTimeoutOptions)(this.client,this.options),J=i50.TimeoutContext.create(A);if(this.options.writeConcern?.w===0){while(F.hasNextBatch()){let X=new t50.ClientBulkWriteOperation(F,this.options);await(0,a50.executeOperation)(this.client,X,J)}return uZ1.ClientBulkWriteResultsMerger.unacknowledged()}else{let X=new uZ1.ClientBulkWriteResultsMerger(this.options);while(F.hasNextBatch()){let Y=new yZ1.CursorTimeoutContext(J,Symbol()),W={...this.options,timeoutContext:Y,...A.timeoutMS!=null&&{timeoutMode:yZ1.CursorTimeoutMode.LIFETIME}},Z=new p50.ClientBulkWriteCursor(this.client,F,W);try{await X.merge(Z)}catch(D){if(D instanceof ZZ.MongoServerError&&!(D instanceof ZZ.MongoClientBulkWriteError)){let G=new ZZ.MongoClientBulkWriteError({message:"Mongo client bulk write encountered an error during execution"});throw G.cause=D,G.partialResult=X.bulkWriteResult,G}else throw D}}if(X.writeConcernErrors.length>0||X.writeErrors.size>0){let Y=new ZZ.MongoClientBulkWriteError({message:"Mongo client bulk write encountered errors during execution."});throw Y.writeConcernErrors=X.writeConcernErrors,Y.writeErrors=X.writeErrors,Y.partialResult=X.bulkWriteResult,Y}return X.bulkWriteResult}}}mZ1.ClientBulkWriteExecutor=hZ1});var nZ1=O((pZ1)=>{Object.defineProperty(pZ1,"__esModule",{value:!0});pZ1.EndSessionsOperation=void 0;var o50=T6(),e50=X4(),$$0=e4(),F$0=l1(),lZ1=o6();class jf extends e50.CommandOperation{constructor($){super();this.writeConcern={w:0},this.ns=F$0.MongoDBNamespace.fromString("admin.$cmd"),this.SERVER_COMMAND_RESPONSE_TYPE=o50.MongoDBResponse,this.sessions=$}buildCommandDocument($,F){return{endSessions:this.sessions}}buildOptions($){return{timeoutContext:$,readPreference:$$0.ReadPreference.primaryPreferred}}get commandName(){return"endSessions"}}pZ1.EndSessionsOperation=jf;(0,lZ1.defineAspects)(jf,lZ1.Aspect.WRITE_OPERATION)});var Of=O((oZ1)=>{Object.defineProperty(oZ1,"__esModule",{value:!0});oZ1.WaitingForSuitableServerEvent=oZ1.ServerSelectionSucceededEvent=oZ1.ServerSelectionFailedEvent=oZ1.ServerSelectionStartedEvent=oZ1.ServerSelectionEvent=void 0;var A$0=l1(),kC=O4();class Ez{constructor($,F,A){this.selector=$,this.operation=A,this.topologyDescription=F}}oZ1.ServerSelectionEvent=Ez;class rZ1 extends Ez{constructor($,F,A){super($,F,A);this.name=kC.SERVER_SELECTION_STARTED,this.message="Server selection started"}}oZ1.ServerSelectionStartedEvent=rZ1;class aZ1 extends Ez{constructor($,F,A,J){super($,F,J);this.name=kC.SERVER_SELECTION_FAILED,this.message="Server selection failed",this.failure=A}}oZ1.ServerSelectionFailedEvent=aZ1;class tZ1 extends Ez{constructor($,F,A,J){super($,F,J);this.name=kC.SERVER_SELECTION_SUCCEEDED,this.message="Server selection succeeded";let{host:X,port:Y}=A$0.HostAddress.fromString(A).toHostPort();this.serverHost=X,this.serverPort=Y}}oZ1.ServerSelectionSucceededEvent=tZ1;class sZ1 extends Ez{constructor($,F,A,J){super($,F,J);this.name=kC.WAITING_FOR_SUITABLE_SERVER,this.message="Waiting for suitable server to become available",this.remainingTimeMS=A}}oZ1.WaitingForSuitableServerEvent=sZ1});var bf=O(($D1)=>{Object.defineProperty($D1,"__esModule",{value:!0});$D1.SrvPoller=$D1.SrvPollingEvent=void 0;var Z$0=Z1("dns"),Sf=Z1("timers"),D$0=_1(),G$0=E7(),jB=l1();class _f{constructor($){this.srvRecords=$}hostnames(){return new Set(this.srvRecords.map(($)=>jB.HostAddress.fromSrvRecord($).toString()))}}$D1.SrvPollingEvent=_f;class kf extends G$0.TypedEventEmitter{static{this.SRV_RECORD_DISCOVERY="srvRecordDiscovery"}constructor($){super();if(this.on("error",jB.noop),!$||!$.srvHost)throw new D$0.MongoRuntimeError("Options for SrvPoller must exist and include srvHost");this.srvHost=$.srvHost,this.srvMaxHosts=$.srvMaxHosts??0,this.srvServiceName=$.srvServiceName??"mongodb",this.rescanSrvIntervalMS=60000,this.heartbeatFrequencyMS=$.heartbeatFrequencyMS??1e4,this.haMode=!1,this.generation=0,this._timeout=void 0}get srvAddress(){return`_${this.srvServiceName}._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){if(!this._timeout)this.schedule()}stop(){if(this._timeout)(0,Sf.clearTimeout)(this._timeout),this.generation+=1,this._timeout=void 0}schedule(){if(this._timeout)(0,Sf.clearTimeout)(this._timeout);this._timeout=(0,Sf.setTimeout)(()=>{this._poll().then(void 0,jB.squashError)},this.intervalMS)}success($){this.haMode=!1,this.schedule(),this.emit(kf.SRV_RECORD_DISCOVERY,new _f($))}failure(){this.haMode=!0,this.schedule()}async _poll(){let $=this.generation,F;try{F=await Z$0.promises.resolveSrv(this.srvAddress)}catch{this.failure();return}if($!==this.generation)return;let A=[];for(let J of F)try{(0,jB.checkParentDomainMatch)(J.name,this.srvHost),A.push(J)}catch(X){(0,jB.squashError)(X)}if(!A.length){this.failure();return}this.success(A)}}$D1.SrvPoller=kf});var HD1=O((GD1)=>{Object.defineProperty(GD1,"__esModule",{value:!0});GD1.Topology=void 0;var H$0=Af(),j3=O4(),lF=_1(),n2=SX(),U$0=E7(),OB=e4(),xf=$9(),O3=l1(),y0=B7(),aX=wC(),AD1=cg(),ff=HB(),gf=CK(),tX=Of(),bC=bf(),JD1=Ig(),Q$0=0,SB=(0,O3.makeStateMachine)({[y0.STATE_CLOSED]:[y0.STATE_CLOSED,y0.STATE_CONNECTING],[y0.STATE_CONNECTING]:[y0.STATE_CONNECTING,y0.STATE_CLOSING,y0.STATE_CONNECTED,y0.STATE_CLOSED],[y0.STATE_CONNECTED]:[y0.STATE_CONNECTED,y0.STATE_CLOSING,y0.STATE_CLOSED],[y0.STATE_CLOSING]:[y0.STATE_CLOSING,y0.STATE_CLOSED]});class a9 extends U$0.TypedEventEmitter{static{this.SERVER_OPENING=j3.SERVER_OPENING}static{this.SERVER_CLOSED=j3.SERVER_CLOSED}static{this.SERVER_DESCRIPTION_CHANGED=j3.SERVER_DESCRIPTION_CHANGED}static{this.TOPOLOGY_OPENING=j3.TOPOLOGY_OPENING}static{this.TOPOLOGY_CLOSED=j3.TOPOLOGY_CLOSED}static{this.TOPOLOGY_DESCRIPTION_CHANGED=j3.TOPOLOGY_DESCRIPTION_CHANGED}static{this.ERROR=j3.ERROR}static{this.OPEN=j3.OPEN}static{this.CONNECT=j3.CONNECT}static{this.CLOSE=j3.CLOSE}static{this.TIMEOUT=j3.TIMEOUT}constructor($,F,A){super();if(this.on("error",O3.noop),this.client=$,A=A??{hosts:[O3.HostAddress.fromString("localhost:27017")],...Object.fromEntries(H$0.DEFAULT_OPTIONS.entries())},typeof F==="string")F=[O3.HostAddress.fromString(F)];else if(!Array.isArray(F))F=[F];let J=[];for(let D of F)if(typeof D==="string")J.push(O3.HostAddress.fromString(D));else if(D instanceof O3.HostAddress)J.push(D);else throw new lF.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify(D)}`);let X=K$0(A),Y=Q$0++,W=A.srvMaxHosts==null||A.srvMaxHosts===0||A.srvMaxHosts>=J.length?J:(0,O3.shuffle)(J,A.srvMaxHosts),Z=new Map;for(let D of W)Z.set(D.toString(),new ff.ServerDescription(D));if(this.waitQueue=new O3.List,this.s={id:Y,options:A,seedlist:J,state:y0.STATE_CLOSED,description:new JD1.TopologyDescription(X,Z,A.replicaSet,void 0,void 0,void 0,A),serverSelectionTimeoutMS:A.serverSelectionTimeoutMS,heartbeatFrequencyMS:A.heartbeatFrequencyMS,minHeartbeatFrequencyMS:A.minHeartbeatFrequencyMS,servers:new Map,credentials:A?.credentials,clusterTime:void 0,detectShardedTopology:(D)=>this.detectShardedTopology(D),detectSrvRecords:(D)=>this.detectSrvRecords(D)},this.mongoLogger=$.mongoLogger,this.component="topology",A.srvHost&&!A.loadBalanced)this.s.srvPoller=A.srvPoller??new bC.SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:A.srvHost,srvMaxHosts:A.srvMaxHosts,srvServiceName:A.srvServiceName}),this.on(a9.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology);this.connectionLock=void 0}detectShardedTopology($){let F=$.previousDescription.type,A=$.newDescription.type,J=F!==y0.TopologyType.Sharded&&A===y0.TopologyType.Sharded,Y=!!this.s.srvPoller?.listeners(bC.SrvPoller.SRV_RECORD_DISCOVERY)?.includes(this.s.detectSrvRecords);if(J&&!Y)this.s.srvPoller?.on(bC.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords),this.s.srvPoller?.start()}detectSrvRecords($){let F=this.s.description;if(this.s.description=this.s.description.updateFromSrvPollingEvent($,this.s.options.srvMaxHosts),this.s.description===F)return;XD1(this),this.emitAndLog(a9.TOPOLOGY_DESCRIPTION_CHANGED,new aX.TopologyDescriptionChangedEvent(this.s.id,F,this.s.description))}get description(){return this.s.description}get loadBalanced(){return this.s.options.loadBalanced}get serverApi(){return this.s.options.serverApi}async connect($){this.connectionLock??=this._connect($);try{return await this.connectionLock,this}finally{this.connectionLock=void 0}}async _connect($){if($=$??{},this.s.state===y0.STATE_CONNECTED)return this;SB(this,y0.STATE_CONNECTING),this.emitAndLog(a9.TOPOLOGY_OPENING,new aX.TopologyOpeningEvent(this.s.id)),this.emitAndLog(a9.TOPOLOGY_DESCRIPTION_CHANGED,new aX.TopologyDescriptionChangedEvent(this.s.id,new JD1.TopologyDescription(y0.TopologyType.Unknown),this.s.description));let F=Array.from(this.s.description.servers.values());if(this.s.servers=new Map(F.map((W)=>[W.address,ZD1(this,W)])),this.s.options.loadBalanced)for(let W of F){let Z=new ff.ServerDescription(W.hostAddress,void 0,{loadBalanced:this.s.options.loadBalanced});this.serverUpdateHandler(Z)}let A=this.client.s.options.serverSelectionTimeoutMS,J=$.readPreference??OB.ReadPreference.primary,X=xf.TimeoutContext.create({timeoutMS:void 0,serverSelectionTimeoutMS:A,waitQueueTimeoutMS:this.client.s.options.waitQueueTimeoutMS}),Y={operationName:"handshake",...$,timeoutContext:X};try{let W=await this.selectServer((0,gf.readPreferenceServerSelector)(J),Y);if(this.s.options.__skipPingOnConnect!==!0){let D=await W.pool.checkOut({timeoutContext:X});return W.pool.checkIn(D),SB(this,y0.STATE_CONNECTED),this.emit(a9.OPEN,this),this.emit(a9.CONNECT,this),this}return SB(this,y0.STATE_CONNECTED),this.emit(a9.OPEN,this),this.emit(a9.CONNECT,this),this}catch(W){throw this.close(),W}}closeCheckedOutConnections(){for(let $ of this.s.servers.values())return $.closeCheckedOutConnections()}close(){if(this.s.state===y0.STATE_CLOSED||this.s.state===y0.STATE_CLOSING)return;for(let $ of this.s.servers.values())WD1($,this);if(this.s.servers.clear(),SB(this,y0.STATE_CLOSING),DD1(this.waitQueue,new lF.MongoTopologyClosedError),this.s.srvPoller)this.s.srvPoller.stop(),this.s.srvPoller.removeListener(bC.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords);this.removeListener(a9.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology),SB(this,y0.STATE_CLOSED),this.emitAndLog(a9.TOPOLOGY_CLOSED,new aX.TopologyClosedEvent(this.s.id))}async selectServer($,F){let A;if(typeof $!=="function")if(typeof $==="string")A=(0,gf.readPreferenceServerSelector)(OB.ReadPreference.fromString($));else{let U;if($ instanceof OB.ReadPreference)U=$;else OB.ReadPreference.translate(F),U=F.readPreference||OB.ReadPreference.primary;A=(0,gf.readPreferenceServerSelector)(U)}else A=$;if(F={serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS,...F},this.client.mongoLogger?.willLog(n2.MongoLoggableComponent.SERVER_SELECTION,n2.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(n2.MongoLoggableComponent.SERVER_SELECTION,new tX.ServerSelectionStartedEvent($,this.description,F.operationName));let J;if(F.timeoutContext)J=F.timeoutContext.serverSelectionTimeout;else J=xf.Timeout.expires(F.serverSelectionTimeoutMS??0);let X=this.description.type===y0.TopologyType.Sharded,Y=F.session,W=Y&&Y.transaction;if(X&&W&&W.server){if(this.client.mongoLogger?.willLog(n2.MongoLoggableComponent.SERVER_SELECTION,n2.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(n2.MongoLoggableComponent.SERVER_SELECTION,new tX.ServerSelectionSucceededEvent($,this.description,W.server.pool.address,F.operationName));if(F.timeoutContext?.clearServerSelectionTimeout)J?.clear();return W.server}let{promise:Z,resolve:D,reject:G}=(0,O3.promiseWithResolvers)(),z={serverSelector:A,topologyDescription:this.description,mongoLogger:this.client.mongoLogger,transaction:W,resolve:D,reject:G,cancelled:!1,startTime:(0,O3.now)(),operationName:F.operationName,waitingLogged:!1,previousServer:F.previousServer},H=(0,O3.addAbortListener)(F.signal,function(){z.cancelled=!0,G(this.reason)});this.waitQueue.push(z),YD1(this);try{J?.throwIfExpired();let U=await(J?Promise.race([Z,J]):Z);if(F.timeoutContext?.csotEnabled()&&U.description.minRoundTripTime!==0)F.timeoutContext.minRoundTripTime=U.description.minRoundTripTime;return U}catch(U){if(xf.TimeoutError.is(U)){z.cancelled=!0;let Q=new lF.MongoServerSelectionError(`Server selection timed out after ${J?.duration} ms`,this.description);if(this.client.mongoLogger?.willLog(n2.MongoLoggableComponent.SERVER_SELECTION,n2.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(n2.MongoLoggableComponent.SERVER_SELECTION,new tX.ServerSelectionFailedEvent($,this.description,Q,F.operationName));if(F.timeoutContext?.csotEnabled())throw new lF.MongoOperationTimeoutError("Timed out during server selection",{cause:Q});throw Q}throw U}finally{if(H?.[O3.kDispose](),F.timeoutContext?.clearServerSelectionTimeout)J?.clear()}}serverUpdateHandler($){if(!this.s.description.hasServer($.address))return;if(B$0(this.s.description,$))return;let F=this.s.description,A=this.s.description.servers.get($.address);if(!A)return;let J=$.$clusterTime;if(J)(0,y0._advanceClusterTime)(this,J);let X=A&&A.equals($);if(this.s.description=this.s.description.update($),this.s.description.compatibilityError){this.emit(a9.ERROR,new lF.MongoCompatibilityError(this.s.description.compatibilityError));return}if(!X){let Y=this.s.description.servers.get($.address);if(Y)this.emit(a9.SERVER_DESCRIPTION_CHANGED,new aX.ServerDescriptionChangedEvent(this.s.id,$.address,A,Y))}if(XD1(this,$),this.waitQueue.length>0)YD1(this);if(!X)this.emitAndLog(a9.TOPOLOGY_DESCRIPTION_CHANGED,new aX.TopologyDescriptionChangedEvent(this.s.id,F,this.s.description))}auth($,F){if(typeof $==="function")F=$,$=void 0;if(typeof F==="function")F(void 0,!0)}isConnected(){return this.s.state===y0.STATE_CONNECTED}isDestroyed(){return this.s.state===y0.STATE_CLOSED}lastHello(){let $=Array.from(this.description.servers.values());if($.length===0)return{};return $.filter((J)=>J.type!==y0.ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get commonWireVersion(){return this.description.commonWireVersion}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get clusterTime(){return this.s.clusterTime}set clusterTime($){this.s.clusterTime=$}}GD1.Topology=a9;function WD1($,F){for(let A of j3.LOCAL_SERVER_EVENTS)$.removeAllListeners(A);$.close(),F.emitAndLog(a9.SERVER_CLOSED,new aX.ServerClosedEvent(F.s.id,$.description.address));for(let A of j3.SERVER_RELAY_EVENTS)$.removeAllListeners(A)}function K$0($){if($?.directConnection)return y0.TopologyType.Single;if($?.replicaSet)return y0.TopologyType.ReplicaSetNoPrimary;if($?.loadBalanced)return y0.TopologyType.LoadBalanced;return y0.TopologyType.Unknown}function ZD1($,F){$.emitAndLog(a9.SERVER_OPENING,new aX.ServerOpeningEvent($.s.id,F.address));let A=new AD1.Server($,F,$.s.options);for(let J of j3.SERVER_RELAY_EVENTS)A.on(J,(X)=>$.emit(J,X));return A.on(AD1.Server.DESCRIPTION_RECEIVED,(J)=>$.serverUpdateHandler(J)),A.connect(),A}function XD1($,F){if(F&&$.s.servers.has(F.address)){let A=$.s.servers.get(F.address);if(A){if(A.s.description=F,F.error instanceof lF.MongoError&&F.error.hasErrorLabel(lF.MongoErrorLabel.ResetPool)){let J=F.error.hasErrorLabel(lF.MongoErrorLabel.InterruptInUseConnections);A.pool.clear({interruptInUseConnections:J})}else if(F.error==null){let J=$.s.description.type;if(F.isDataBearing||F.type!==y0.ServerType.Unknown&&J===y0.TopologyType.Single)A.pool.ready()}}}for(let A of $.description.servers.values())if(!$.s.servers.has(A.address)){let J=ZD1($,A);$.s.servers.set(A.address,J)}for(let A of $.s.servers){let J=A[0];if($.description.hasServer(J))continue;if(!$.s.servers.has(J))continue;let X=$.s.servers.get(J);if($.s.servers.delete(J),X)WD1(X,$)}}function DD1($,F){while($.length){let A=$.shift();if(!A)continue;if(!A.cancelled){if(A.mongoLogger?.willLog(n2.MongoLoggableComponent.SERVER_SELECTION,n2.SeverityLevel.DEBUG))A.mongoLogger?.debug(n2.MongoLoggableComponent.SERVER_SELECTION,new tX.ServerSelectionFailedEvent(A.serverSelector,A.topologyDescription,F,A.operationName));A.reject(F)}}}function YD1($){if($.s.state===y0.STATE_CLOSED){DD1($.waitQueue,new lF.MongoTopologyClosedError);return}let F=$.description.type===y0.TopologyType.Sharded,A=Array.from($.description.servers.values()),J=$.waitQueue.length;for(let X=0;X<J;++X){let Y=$.waitQueue.shift();if(!Y)continue;if(Y.cancelled)continue;let W;try{let{serverSelector:G,previousServer:z}=Y;W=G?G($.description,A,z?[z]:[]):A}catch(G){if($.client.mongoLogger?.willLog(n2.MongoLoggableComponent.SERVER_SELECTION,n2.SeverityLevel.DEBUG))$.client.mongoLogger?.debug(n2.MongoLoggableComponent.SERVER_SELECTION,new tX.ServerSelectionFailedEvent(Y.serverSelector,$.description,G,Y.operationName));Y.reject(G);continue}let Z;if(W.length===0){if(!Y.waitingLogged){if($.client.mongoLogger?.willLog(n2.MongoLoggableComponent.SERVER_SELECTION,n2.SeverityLevel.INFORMATIONAL))$.client.mongoLogger?.info(n2.MongoLoggableComponent.SERVER_SELECTION,new tX.WaitingForSuitableServerEvent(Y.serverSelector,$.description,$.s.serverSelectionTimeoutMS!==0?$.s.serverSelectionTimeoutMS-((0,O3.now)()-Y.startTime):-1,Y.operationName));Y.waitingLogged=!0}$.waitQueue.push(Y);continue}else if(W.length===1)Z=$.s.servers.get(W[0].address);else{let G=(0,O3.shuffle)(W,2),z=$.s.servers.get(G[0].address),H=$.s.servers.get(G[1].address);Z=z&&H&&z.s.operationCount<H.s.operationCount?z:H}if(!Z){let G=new lF.MongoServerSelectionError("server selection returned a server description but the server was not found in the topology",$.description);if($.client.mongoLogger?.willLog(n2.MongoLoggableComponent.SERVER_SELECTION,n2.SeverityLevel.DEBUG))$.client.mongoLogger?.debug(n2.MongoLoggableComponent.SERVER_SELECTION,new tX.ServerSelectionFailedEvent(Y.serverSelector,$.description,G,Y.operationName));Y.reject(G);return}let D=Y.transaction;if(F&&D&&D.isActive&&Z)D.pinServer(Z);if($.client.mongoLogger?.willLog(n2.MongoLoggableComponent.SERVER_SELECTION,n2.SeverityLevel.DEBUG))$.client.mongoLogger?.debug(n2.MongoLoggableComponent.SERVER_SELECTION,new tX.ServerSelectionSucceededEvent(Y.serverSelector,Y.topologyDescription,Z.pool.address,Y.operationName));Y.resolve(Z)}if($.waitQueue.length>0)for(let[,X]of $.s.servers)process.nextTick(function(){return X.requestCheck()})}function B$0($,F){let J=$.servers.get(F.address)?.topologyVersion;return(0,ff.compareTopologyVersion)(J,F.topologyVersion)>0}});var eW=O((LD1)=>{Object.defineProperty(LD1,"__esModule",{value:!0});LD1.MongoClient=LD1.ServerApiVersion=void 0;var vf=Z1("fs"),w$0=iA(),q$0=w0(),L$0=uG(),E$0=dN(),V$0=fF(),UD1=kx(),QD1=Af(),N$0=O4(),C$0=PN(),yf=_1(),M$0=Ef(),KD1=SX(),P$0=E7(),R$0=cZ1(),I$0=nZ1(),T$0=q9(),j$0=e4(),O$0=CK(),BD1=HD1(),wD1=SK(),E9=l1();LD1.ServerApiVersion=Object.freeze({v1:"1"});class qD1 extends P$0.TypedEventEmitter{constructor($,F){super();this.driverInfoList=[],this.on("error",E9.noop),this.options=(0,QD1.parseOptions)($,this,F),this.appendMetadata(this.options.driverInfo);let A=Object.values(this.options.mongoLoggerOptions.componentSeverities).some((X)=>X!==KD1.SeverityLevel.OFF);this.mongoLogger=A?new KD1.MongoLogger(this.options.mongoLoggerOptions):void 0;let J=this;this.s={url:$,bsonOptions:(0,q$0.resolveBSONOptions)(this.options),namespace:(0,E9.ns)("admin"),hasBeenClosed:!1,sessionPool:new wD1.ServerSessionPool(this),activeSessions:new Set,activeCursors:new Set,authProviders:new M$0.MongoClientAuthProviders,get options(){return J.options},get readConcern(){return J.options.readConcern},get writeConcern(){return J.options.writeConcern},get readPreference(){return J.options.readPreference},get isMongoClient(){return!0}},this.checkForNonGenuineHosts()}async[Symbol.asyncDispose](){await this.close()}appendMetadata($){if(this.driverInfoList.some((A)=>(0,UD1.isDriverInfoEqual)(A,$)))return;this.driverInfoList.push($),this.options.metadata=(0,UD1.makeClientMetadata)(this.driverInfoList,this.options).then(void 0,E9.squashError).then((A)=>A??{})}checkForNonGenuineHosts(){let $=this.options.hosts.filter((X)=>(0,E9.isHostMatch)(E9.DOCUMENT_DB_CHECK,X.host)),F=(0,E9.isHostMatch)(E9.DOCUMENT_DB_CHECK,this.options.srvHost),A=this.options.hosts.filter((X)=>(0,E9.isHostMatch)(E9.COSMOS_DB_CHECK,X.host)),J=(0,E9.isHostMatch)(E9.COSMOS_DB_CHECK,this.options.srvHost);if($.length!==0||F)this.mongoLogger?.info("client",E9.DOCUMENT_DB_MSG);else if(A.length!==0||J)this.mongoLogger?.info("client",E9.COSMOS_DB_MSG)}get serverApi(){return this.options.serverApi&&Object.freeze({...this.options.serverApi})}get monitorCommands(){return this.options.monitorCommands}set monitorCommands($){this.options.monitorCommands=$}get autoEncrypter(){return this.options.autoEncrypter}get readConcern(){return this.s.readConcern}get writeConcern(){return this.s.writeConcern}get readPreference(){return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get timeoutMS(){return this.s.options.timeoutMS}async bulkWrite($,F){if(this.autoEncrypter)throw new yf.MongoInvalidArgumentError("MongoClient bulkWrite does not currently support automatic encryption.");return await new R$0.ClientBulkWriteExecutor(this,$,(0,E9.resolveOptions)(this,F)).execute()}async connect(){if(this.connectionLock)return await this.connectionLock;try{this.connectionLock=this._connect(),await this.connectionLock}finally{this.connectionLock=void 0}return this}async _connect(){if(this.topology&&this.topology.isConnected())return this;let $=this.options;if($.tls){if(typeof $.tlsCAFile==="string")$.ca??=await vf.promises.readFile($.tlsCAFile);if(typeof $.tlsCRLFile==="string")$.crl??=await vf.promises.readFile($.tlsCRLFile);if(typeof $.tlsCertificateKeyFile==="string"){if(!$.key||!$.cert){let A=await vf.promises.readFile($.tlsCertificateKeyFile);$.key??=A,$.cert??=A}}}if(typeof $.srvHost==="string"){let A=await(0,QD1.resolveSRVRecord)($);for(let[J,X]of A.entries())$.hosts[J]=X}if($.credentials?.mechanism===V$0.AuthMechanism.MONGODB_OIDC){let A=$.credentials?.mechanismProperties?.ALLOWED_HOSTS||E$0.DEFAULT_ALLOWED_HOSTS;if(!$.credentials?.mechanismProperties?.ENVIRONMENT){for(let X of $.hosts)if(!(0,E9.hostMatchesWildcards)(X.toHostPort().host,A))throw new yf.MongoInvalidArgumentError(`Host '${X}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${A.join(",")}'`)}}this.topology=new BD1.Topology(this,$.hosts,$),this.topology.once(BD1.Topology.OPEN,()=>this.emit("open",this));for(let A of N$0.MONGO_CLIENT_EVENTS)this.topology.on(A,(...J)=>this.emit(A,...J));let F=async()=>{try{await this.topology?.connect($)}catch(A){throw this.topology?.close(),A}};if(this.autoEncrypter)await this.autoEncrypter?.init(),await F(),await $.encrypter.connectInternalClient();else await F();return this}async close($=!1){if(this.closeLock)return await this.closeLock;try{this.closeLock=this._close(),await this.closeLock}finally{this.closeLock=void 0}}async _close(){Object.defineProperty(this.s,"hasBeenClosed",{value:!0,enumerable:!0,configurable:!1,writable:!1}),this.topology?.closeCheckedOutConnections();let $=Array.from(this.s.activeCursors,(W)=>W.close());this.s.activeCursors.clear(),await Promise.all($);let F=Array.from(this.s.activeSessions,(W)=>W.endSession());if(this.s.activeSessions.clear(),await Promise.all(F),this.topology==null)return;if(this.topology.description.type===w$0.TopologyType.LoadBalanced||this.topology.description.logicalSessionTimeoutMinutes!=null)await Y(this,this.topology);let J=this.topology;this.topology=void 0,J.close();let{encrypter:X}=this.options;if(X)await X.close(this);async function Y(W,{description:Z}){let D=(0,O$0.readPreferenceServerSelector)(j$0.ReadPreference.primaryPreferred),G=Array.from(Z.servers.values());if(D(Z,G).length!==0){let H=Array.from(W.s.sessionPool.sessions,({id:U})=>U);if(H.length!==0)try{await(0,T$0.executeOperation)(W,new I$0.EndSessionsOperation(H))}catch(U){(0,E9.squashError)(U)}}}}db($,F){if(F=F??{},!$)$=this.s.options.dbName;let A=Object.assign({},this.options,F);return new C$0.Db(this,$,A)}static async connect($,F){return await new this($,F).connect()}startSession($){let F=new wD1.ClientSession(this,this.s.sessionPool,{explicit:!0,...$},this.options);return this.s.activeSessions.add(F),F.once("ended",()=>{this.s.activeSessions.delete(F)}),F}async withSession($,F){let A={owner:Symbol(),...typeof $==="object"?$:{}},J=typeof $==="function"?$:F;if(J==null)throw new yf.MongoInvalidArgumentError("Missing required callback parameter");let X=this.startSession(A);try{return await J(X)}finally{try{await X.endSession()}catch(Y){(0,E9.squashError)(Y)}}}watch($=[],F={}){if(!Array.isArray($))F=$,$=[];return new L$0.ChangeStream(this,$,(0,E9.resolveOptions)(this,F))}}LD1.MongoClient=qD1});var uG=O((ND1)=>{Object.defineProperty(ND1,"__esModule",{value:!0});ND1.ChangeStream=void 0;ND1.filterOutOptions=VD1;var _$0=vG(),L$=O4(),k$0=q8(),b$0=Ax(),x$0=PN(),V9=_1(),g$0=eW(),f$0=E7(),v$0=$9(),$J=l1(),DZ={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},y$0=[L$.RESUME_TOKEN_CHANGED,L$.END,L$.CLOSE],u$0="A change stream document has been received that lacks a resume token (_id).",xC="ChangeStream is closed",h$0=m$0();function VD1($){return Object.fromEntries(Object.entries($).filter(([F,A])=>!h$0.has(F)))}class GZ extends f$0.TypedEventEmitter{async[Symbol.asyncDispose](){await this.close()}static{this.RESPONSE=L$.RESPONSE}static{this.MORE=L$.MORE}static{this.INIT=L$.INIT}static{this.CLOSE=L$.CLOSE}static{this.CHANGE=L$.CHANGE}static{this.END=L$.END}static{this.ERROR=L$.ERROR}static{this.RESUME_TOKEN_CHANGED=L$.RESUME_TOKEN_CHANGED}constructor($,F=[],A={}){super();this.pipeline=F,this.options={...A};let J;if(delete this.options.writeConcern,$ instanceof _$0.Collection)this.type=DZ.COLLECTION,J=$.s.db.client.options.serverSelectionTimeoutMS;else if($ instanceof x$0.Db)this.type=DZ.DATABASE,J=$.client.options.serverSelectionTimeoutMS;else if($ instanceof g$0.MongoClient)this.type=DZ.CLUSTER,J=$.options.serverSelectionTimeoutMS;else throw new V9.MongoChangeStreamError("Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient");if(this.contextOwner=Symbol(),this.parent=$,this.namespace=$.s.namespace,!this.options.readPreference&&$.readPreference)this.options.readPreference=$.readPreference;if(this.cursor=this._createChangeStreamCursor(A),this.isClosed=!1,this.mode=!1,this.on("newListener",(X)=>{if(X==="change"&&this.cursor&&this.listenerCount("change")===0)this._streamEvents(this.cursor)}),this.on("removeListener",(X)=>{if(X==="change"&&this.listenerCount("change")===0&&this.cursor)this.cursorStream?.removeAllListeners("data")}),this.options.timeoutMS!=null)this.timeoutContext=new v$0.CSOTTimeoutContext({timeoutMS:this.options.timeoutMS,serverSelectionTimeoutMS:J})}get resumeToken(){return this.cursor?.resumeToken}async hasNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{return await this.cursor.hasNext()}catch($){try{await this._processErrorIteratorMode($,this.cursor.id!=null)}catch(F){if(F instanceof V9.MongoOperationTimeoutError&&this.cursor.id==null)throw F;try{await this.close()}catch(A){(0,$J.squashError)(A)}throw F}}}finally{this.timeoutContext?.clear()}}async next(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{let $=await this.cursor.next();return this._processChange($??null)}catch($){try{await this._processErrorIteratorMode($,this.cursor.id!=null)}catch(F){if(F instanceof V9.MongoOperationTimeoutError&&this.cursor.id==null)throw F;try{await this.close()}catch(A){(0,$J.squashError)(A)}throw F}}}finally{this.timeoutContext?.clear()}}async tryNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{let $=await this.cursor.tryNext();if(!$)return null;return this._processChange($)}catch($){try{await this._processErrorIteratorMode($,this.cursor.id!=null)}catch(F){if(F instanceof V9.MongoOperationTimeoutError&&this.cursor.id==null)throw F;try{await this.close()}catch(A){(0,$J.squashError)(A)}throw F}}}finally{this.timeoutContext?.clear()}}async*[Symbol.asyncIterator](){if(this.closed)return;try{while(!0)yield await this.next()}finally{try{await this.close()}catch($){(0,$J.squashError)($)}}}get closed(){return this.isClosed||this.cursor.closed}async close(){this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!0;let $=this.cursor;try{await $.close()}finally{this._endStream()}}stream(){if(this.closed)throw new V9.MongoChangeStreamError(xC);return this.cursor.stream()}_setIsEmitter(){if(this.mode==="iterator")throw new V9.MongoAPIError("ChangeStream cannot be used as an EventEmitter after being used as an iterator");this.mode="emitter"}_setIsIterator(){if(this.mode==="emitter")throw new V9.MongoAPIError("ChangeStream cannot be used as an iterator after being used as an EventEmitter");this.mode="iterator"}_createChangeStreamCursor($){let F=VD1($);if(this.type===DZ.CLUSTER)F.allChangesForCluster=!0;let A=[{$changeStream:F},...this.pipeline],J=this.type===DZ.CLUSTER?this.parent:this.type===DZ.DATABASE?this.parent.client:this.type===DZ.COLLECTION?this.parent.client:null;if(J==null)throw new V9.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);let X=new b$0.ChangeStreamCursor(J,this.namespace,A,{...$,timeoutContext:this.timeoutContext?new k$0.CursorTimeoutContext(this.timeoutContext,this.contextOwner):void 0});for(let Y of y$0)X.on(Y,(W)=>this.emit(Y,W));if(this.listenerCount(GZ.CHANGE)>0)this._streamEvents(X);return X}_closeEmitterModeWithError($){this.emit(GZ.ERROR,$),this.close().then(void 0,$J.squashError)}_streamEvents($){this._setIsEmitter();let F=this.cursorStream??$.stream();this.cursorStream=F,F.on("data",(A)=>{try{let J=this._processChange(A);this.emit(GZ.CHANGE,J)}catch(J){this.emit(GZ.ERROR,J)}this.timeoutContext?.refresh()}),F.on("error",(A)=>this._processErrorStreamMode(A,this.cursor.id!=null))}_endStream(){this.cursorStream?.removeAllListeners("data"),this.cursorStream?.removeAllListeners("close"),this.cursorStream?.removeAllListeners("end"),this.cursorStream?.destroy(),this.cursorStream=void 0}_processChange($){if(this.isClosed)throw new V9.MongoAPIError(xC);if($==null)throw new V9.MongoRuntimeError(xC);if($&&!$._id)throw new V9.MongoChangeStreamError(u$0);return this.cursor.cacheResumeToken($._id),this.options.startAtOperationTime=void 0,$}_processErrorStreamMode($,F){if(this.isClosed)return;if(F&&((0,V9.isResumableError)($,this.cursor.maxWireVersion)||$ instanceof V9.MongoOperationTimeoutError))this._endStream(),this.cursor.close().then(()=>this._resume($),(A)=>{return(0,$J.squashError)(A),this._resume($)}).then(()=>{if($ instanceof V9.MongoOperationTimeoutError)this.emit(GZ.ERROR,$)},()=>this._closeEmitterModeWithError($));else this._closeEmitterModeWithError($)}async _processErrorIteratorMode($,F){if(this.isClosed)throw new V9.MongoAPIError(xC);if(F&&((0,V9.isResumableError)($,this.cursor.maxWireVersion)||$ instanceof V9.MongoOperationTimeoutError)){try{await this.cursor.close()}catch(A){(0,$J.squashError)(A)}if(await this._resume($),$ instanceof V9.MongoOperationTimeoutError)throw $}else{try{await this.close()}catch(A){(0,$J.squashError)(A)}throw $}}async _resume($){this.timeoutContext?.refresh();let F=(0,$J.getTopology)(this.parent);try{await F.selectServer(this.cursor.readPreference,{operationName:"reconnect topology in change stream",timeoutContext:this.timeoutContext}),this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)}catch{throw await this.close(),$}}}ND1.ChangeStream=GZ;function m$0(){return new Set(Object.keys({allowDiskUse:"",authdb:"",batchSize:"",bsonRegExp:"",bypassDocumentValidation:"",bypassPinningCheck:"",checkKeys:"",collation:"",comment:"",cursor:"",dbName:"",enableUtf8Validation:"",explain:"",fieldsAsRaw:"",hint:"",ignoreUndefined:"",let:"",maxAwaitTimeMS:"",maxTimeMS:"",omitMaxTimeMS:"",out:"",promoteBuffers:"",promoteLongs:"",promoteValues:"",raw:"",rawData:"",readConcern:"",readPreference:"",serializeFunctions:"",session:"",timeoutContext:"",timeoutMS:"",timeoutMode:"",useBigInt64:"",willRetryWrite:"",writeConcern:""}))}});var hf=O((PD1)=>{Object.defineProperty(PD1,"__esModule",{value:!0});PD1.GridFSBucketReadStream=void 0;var c$0=Z1("stream"),l$0=q8(),I7=_1(),p$0=$9();class uf extends c$0.Readable{static{this.FILE="file"}constructor($,F,A,J,X){super({emitClose:!0});this.s={bytesToTrim:0,bytesToSkip:0,bytesRead:0,chunks:$,expected:0,files:F,filter:J,init:!1,expectedEnd:0,options:{start:0,end:0,...X},readPreference:A,timeoutContext:X?.timeoutMS!=null?new p$0.CSOTTimeoutContext({timeoutMS:X.timeoutMS,serverSelectionTimeoutMS:0}):void 0}}_read(){if(this.destroyed)return;r$0(this,()=>i$0(this))}start($=0){return MD1(this),this.s.options.start=$,this}end($=0){return MD1(this),this.s.options.end=$,this}async abort(){this.push(null),this.destroy();let $=this.s.timeoutContext?.getRemainingTimeMSOrThrow();await this.s.cursor?.close({timeoutMS:$})}}PD1.GridFSBucketReadStream=uf;function MD1($){if($.s.init)throw new I7.MongoGridFSStreamError("Options cannot be changed after the stream is initialized")}function i$0($){if($.destroyed)return;if(!$.s.cursor)return;if(!$.s.file)return;let F=(A)=>{if($.destroyed)return;if(!A){$.push(null),$.s.cursor?.close().then(void 0,(H)=>$.destroy(H));return}if(!$.s.file)return;let J=$.s.file.length-$.s.bytesRead,X=$.s.expected++,Y=Math.min($.s.file.chunkSize,J);if(A.n>X)return $.destroy(new I7.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${A.n}, expected: ${X}`));if(A.n<X)return $.destroy(new I7.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${A.n}, expected: ${X}`));let W=Buffer.isBuffer(A.data)?A.data:A.data.buffer;if(W.byteLength!==Y){if(J<=0)return $.destroy(new I7.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${A.n}, expected file length ${$.s.file.length} bytes but already read ${$.s.bytesRead} bytes`));return $.destroy(new I7.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${W.byteLength}, expected: ${Y}`))}if($.s.bytesRead+=W.byteLength,W.byteLength===0)return $.push(null);let Z=null,D=null;if($.s.bytesToSkip!=null)Z=$.s.bytesToSkip,$.s.bytesToSkip=0;let G=X===$.s.expectedEnd-1,z=$.s.options.end-$.s.bytesToSkip;if(G&&$.s.bytesToTrim!=null)D=$.s.file.chunkSize-$.s.bytesToTrim;else if($.s.options.end&&z<A.data.byteLength)D=z;if(Z!=null||D!=null)W=W.slice(Z||0,D||W.byteLength);$.push(W);return};$.s.cursor.next().then(F,(A)=>{if($.destroyed)return;$.destroy(A)})}function n$0($){let F={};if($.s.readPreference)F.readPreference=$.s.readPreference;if($.s.options&&$.s.options.sort)F.sort=$.s.options.sort;if($.s.options&&$.s.options.skip)F.skip=$.s.options.skip;let A=(X)=>{if($.destroyed)return;if(!X){let D=`FileNotFound: file ${$.s.filter._id?$.s.filter._id.toString():$.s.filter.filename} was not found`,G=new I7.MongoRuntimeError(D);return G.code="ENOENT",$.destroy(G)}if(X.length<=0){$.push(null);return}if($.destroyed){$.destroy();return}try{$.s.bytesToSkip=a$0($,X,$.s.options)}catch(Z){return $.destroy(Z)}let Y={files_id:X._id};if($.s.options&&$.s.options.start!=null){let Z=Math.floor($.s.options.start/X.chunkSize);if(Z>0)Y.n={$gte:Z}}let W;try{W=$.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${$.s.timeoutContext?.timeoutMS}ms`)}catch(Z){return $.destroy(Z)}if($.s.cursor=$.s.chunks.find(Y,{timeoutMode:$.s.options.timeoutMS!=null?l$0.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:W}).sort({n:1}),$.s.readPreference)$.s.cursor.withReadPreference($.s.readPreference);$.s.expectedEnd=Math.ceil(X.length/X.chunkSize),$.s.file=X;try{$.s.bytesToTrim=t$0($,X,$.s.cursor,$.s.options)}catch(Z){return $.destroy(Z)}$.emit(uf.FILE,X);return},J;try{J=$.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${$.s.timeoutContext?.timeoutMS}ms`)}catch(X){if(!$.destroyed)$.destroy(X);return}F.timeoutMS=J,$.s.files.findOne($.s.filter,F).then(A,(X)=>{if($.destroyed)return;$.destroy(X)})}function r$0($,F){if($.s.file)return F();if(!$.s.init)n$0($),$.s.init=!0;$.once("file",()=>{F()})}function a$0($,F,A){if(A&&A.start!=null){if(A.start>F.length)throw new I7.MongoInvalidArgumentError(`Stream start (${A.start}) must not be more than the length of the file (${F.length})`);if(A.start<0)throw new I7.MongoInvalidArgumentError(`Stream start (${A.start}) must not be negative`);if(A.end!=null&&A.end<A.start)throw new I7.MongoInvalidArgumentError(`Stream start (${A.start}) must not be greater than stream end (${A.end})`);return $.s.bytesRead=Math.floor(A.start/F.chunkSize)*F.chunkSize,$.s.expected=Math.floor(A.start/F.chunkSize),A.start-$.s.bytesRead}throw new I7.MongoInvalidArgumentError("Start option must be defined")}function t$0($,F,A,J){if(J&&J.end!=null){if(J.end>F.length)throw new I7.MongoInvalidArgumentError(`Stream end (${J.end}) must not be more than the length of the file (${F.length})`);if(J.start==null||J.start<0)throw new I7.MongoInvalidArgumentError(`Stream end (${J.end}) must not be negative`);let X=J.start!=null?Math.floor(J.start/F.chunkSize):0;return A.limit(Math.ceil(J.end/F.chunkSize)-X),$.s.expectedEnd=Math.ceil(J.end/F.chunkSize),Math.ceil(J.end/F.chunkSize)*F.chunkSize-J.end}throw new I7.MongoInvalidArgumentError("End option must be defined")}});var df=O((_D1)=>{Object.defineProperty(_D1,"__esModule",{value:!0});_D1.GridFSBucketWriteStream=void 0;var s$0=Z1("stream"),TD1=w0(),jD1=q8(),E$=_1(),o$0=$9(),ID1=l1(),e$0=i8();class OD1 extends s$0.Writable{constructor($,F,A){super();if(this.gridFSFile=null,A=A??{},this.bucket=$,this.chunks=$.s._chunksCollection,this.filename=F,this.files=$.s._filesCollection,this.options=A,this.writeConcern=e$0.WriteConcern.fromOptions(A)||$.s.options.writeConcern,this.done=!1,this.id=A.id?A.id:new TD1.ObjectId,this.chunkSizeBytes=A.chunkSizeBytes||this.bucket.s.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1},A.timeoutMS!=null)this.timeoutContext=new o$0.CSOTTimeoutContext({timeoutMS:A.timeoutMS,serverSelectionTimeoutMS:(0,ID1.resolveTimeoutOptions)(this.bucket.s.db.client,{}).serverSelectionTimeoutMS})}_construct($){if(!this.bucket.s.calledOpenUploadStream)this.bucket.s.calledOpenUploadStream=!0,FF0(this).then(()=>{this.bucket.s.checkedIndexes=!0,this.bucket.emit("index"),$()},(F)=>{if(F instanceof E$.MongoOperationTimeoutError)return zZ(this,F,$);(0,ID1.squashError)(F),$()});else return process.nextTick($)}_write($,F,A){JF0(this,$,F,A)}_final($){if(this.state.streamEnd)return process.nextTick($);this.state.streamEnd=!0,XF0(this,$)}async abort(){if(this.state.streamEnd)throw new E$.MongoAPIError("Cannot abort a stream that has already completed");if(this.state.aborted)throw new E$.MongoAPIError("Cannot call abort() on a stream twice");this.state.aborted=!0;let $=this.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${this.timeoutContext?.timeoutMS}ms`);await this.chunks.deleteMany({files_id:this.id},{timeoutMS:$})}}_D1.GridFSBucketWriteStream=OD1;function zZ($,F,A){if($.state.errored){process.nextTick(A);return}$.state.errored=!0,process.nextTick(A,F)}function SD1($,F,A){return{_id:new TD1.ObjectId,files_id:$,n:F,data:A}}async function $F0($){let F={files_id:1,n:1},A;A=$.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${$.timeoutContext?.timeoutMS}ms`);let J;try{J=await $.chunks.listIndexes({timeoutMode:A!=null?jD1.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:A}).toArray()}catch(Y){if(Y instanceof E$.MongoError&&Y.code===E$.MONGODB_ERROR_CODES.NamespaceNotFound)J=[];else throw Y}if(!J.find((Y)=>{if(Object.keys(Y.key).length===2&&Y.key.files_id===1&&Y.key.n===1)return!0;return!1}))A=$.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${$.timeoutContext?.timeoutMS}ms`),await $.chunks.createIndex(F,{...$.writeConcern,background:!0,unique:!0,timeoutMS:A})}function mf($,F){if($.done)return process.nextTick(F);if($.state.streamEnd&&$.state.outstandingRequests===0&&!$.state.errored){$.done=!0;let A=AF0($.id,$.length,$.chunkSizeBytes,$.filename,$.options.metadata);if(gC($,F))return;let J=$.timeoutContext?.remainingTimeMS;if(J!=null&&J<=0)return zZ($,new E$.MongoOperationTimeoutError(`Upload timed out after ${$.timeoutContext?.timeoutMS}ms`),F);$.files.insertOne(A,{writeConcern:$.writeConcern,timeoutMS:J}).then(()=>{$.gridFSFile=A,F()},(X)=>{return zZ($,X,F)});return}process.nextTick(F)}async function FF0($){let F=$.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${$.timeoutContext?.timeoutMS}ms`);if(await $.files.findOne({},{projection:{_id:1},timeoutMS:F})!=null)return;let J={filename:1,uploadDate:1},X;F=$.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${$.timeoutContext?.timeoutMS}ms`);let Y={timeoutMode:F!=null?jD1.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:F};try{X=await $.files.listIndexes(Y).toArray()}catch(Z){if(Z instanceof E$.MongoError&&Z.code===E$.MONGODB_ERROR_CODES.NamespaceNotFound)X=[];else throw Z}if(!X.find((Z)=>{if(Object.keys(Z.key).length===2&&Z.key.filename===1&&Z.key.uploadDate===1)return!0;return!1}))F=$.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${$.timeoutContext?.timeoutMS}ms`),await $.files.createIndex(J,{background:!1,timeoutMS:F});await $F0($)}function AF0($,F,A,J,X){let Y={_id:$,length:F,chunkSize:A,uploadDate:new Date,filename:J};if(X)Y.metadata=X;return Y}function JF0($,F,A,J){if(gC($,J))return;let X=Buffer.isBuffer(F)?F:Buffer.from(F,A);if($.length+=X.length,$.pos+X.length<$.chunkSizeBytes){X.copy($.bufToStore,$.pos),$.pos+=X.length,process.nextTick(J);return}let Y=X.length,W=$.chunkSizeBytes-$.pos,Z=Math.min(W,X.length),D=0;while(Y>0){let G=X.length-Y;X.copy($.bufToStore,$.pos,G,G+Z),$.pos+=Z,W-=Z;let z;if(W===0){z=SD1($.id,$.n,Buffer.from($.bufToStore));let H=$.timeoutContext?.remainingTimeMS;if(H!=null&&H<=0)return zZ($,new E$.MongoOperationTimeoutError(`Upload timed out after ${$.timeoutContext?.timeoutMS}ms`),J);if(++$.state.outstandingRequests,++D,gC($,J))return;$.chunks.insertOne(z,{writeConcern:$.writeConcern,timeoutMS:H}).then(()=>{if(--$.state.outstandingRequests,--D,!D)mf($,J)},(U)=>{return zZ($,U,J)}),W=$.chunkSizeBytes,$.pos=0,++$.n}Y-=Z,Z=Math.min(W,Y)}}function XF0($,F){if($.pos===0)return mf($,F);let A=Buffer.alloc($.pos);$.bufToStore.copy(A,0,0,$.pos);let J=SD1($.id,$.n,A);if(gC($,F))return;let X=$.timeoutContext?.remainingTimeMS;if(X!=null&&X<=0)return zZ($,new E$.MongoOperationTimeoutError(`Upload timed out after ${$.timeoutContext?.timeoutMS}ms`),F);++$.state.outstandingRequests,$.chunks.insertOne(J,{writeConcern:$.writeConcern,timeoutMS:X}).then(()=>{--$.state.outstandingRequests,mf($,F)},(Y)=>{return zZ($,Y,F)})}function gC($,F){if($.state.aborted)return process.nextTick(F,new E$.MongoAPIError("Stream has been aborted")),!0;return!1}});var uD1=O((vD1)=>{Object.defineProperty(vD1,"__esModule",{value:!0});vD1.GridFSBucket=void 0;var cf=_1(),YF0=E7(),bD1=$9(),fC=l1(),WF0=i8(),xD1=hf(),gD1=df(),ZF0={bucketName:"fs",chunkSizeBytes:261120};class fD1 extends YF0.TypedEventEmitter{static{this.INDEX="index"}constructor($,F){super();this.on("error",fC.noop),this.setMaxListeners(0);let A=(0,fC.resolveOptions)($,{...ZF0,...F,writeConcern:WF0.WriteConcern.fromOptions(F)});this.s={db:$,options:A,_chunksCollection:$.collection(A.bucketName+".chunks"),_filesCollection:$.collection(A.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream($,F){return new gD1.GridFSBucketWriteStream(this,$,{timeoutMS:this.s.options.timeoutMS,...F})}openUploadStreamWithId($,F,A){return new gD1.GridFSBucketWriteStream(this,F,{timeoutMS:this.s.options.timeoutMS,...A,id:$})}openDownloadStream($,F){return new xD1.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:$},{timeoutMS:this.s.options.timeoutMS,...F})}async delete($,F){let{timeoutMS:A}=(0,fC.resolveOptions)(this.s.db,F),J=void 0;if(A)J=new bD1.CSOTTimeoutContext({timeoutMS:A,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS});let{deletedCount:X}=await this.s._filesCollection.deleteOne({_id:$},{timeoutMS:J?.remainingTimeMS}),Y=J?.remainingTimeMS;if(Y!=null&&Y<=0)throw new cf.MongoOperationTimeoutError(`Timed out after ${A}ms`);if(await this.s._chunksCollection.deleteMany({files_id:$},{timeoutMS:Y}),X===0)throw new cf.MongoRuntimeError(`File not found for id ${$}`)}find($={},F={}){return this.s._filesCollection.find($,F)}openDownloadStreamByName($,F){let A={uploadDate:-1},J=void 0;if(F&&F.revision!=null)if(F.revision>=0)A={uploadDate:1},J=F.revision;else J=-F.revision-1;return new xD1.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:$},{timeoutMS:this.s.options.timeoutMS,...F,sort:A,skip:J})}async rename($,F,A){let J={_id:$},X={$set:{filename:F}},{matchedCount:Y}=await this.s._filesCollection.updateOne(J,X,A);if(Y===0)throw new cf.MongoRuntimeError(`File with id ${$} not found`)}async drop($){let{timeoutMS:F}=(0,fC.resolveOptions)(this.s.db,$),A=void 0;if(F)A=new bD1.CSOTTimeoutContext({timeoutMS:F,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS});if(A){await this.s._filesCollection.drop({timeoutMS:A.remainingTimeMS});let J=A.getRemainingTimeMSOrThrow(`Timed out after ${F}ms`);await this.s._chunksCollection.drop({timeoutMS:J})}else await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}}vD1.GridFSBucket=fD1});var iA=O((H1)=>{Object.defineProperty(H1,"__esModule",{value:!0});H1.MongoRuntimeError=H1.MongoParseError=H1.MongoOperationTimeoutError=H1.MongoOIDCError=H1.MongoNotConnectedError=H1.MongoNetworkTimeoutError=H1.MongoNetworkError=H1.MongoMissingDependencyError=H1.MongoMissingCredentialsError=H1.MongoKerberosError=H1.MongoInvalidArgumentError=H1.MongoGridFSStreamError=H1.MongoGridFSChunkError=H1.MongoGCPError=H1.MongoExpiredSessionError=H1.MongoError=H1.MongoDriverError=H1.MongoDecompressionError=H1.MongoCursorInUseError=H1.MongoCursorExhaustedError=H1.MongoCompatibilityError=H1.MongoClientClosedError=H1.MongoClientBulkWriteExecutionError=H1.MongoClientBulkWriteError=H1.MongoClientBulkWriteCursorError=H1.MongoChangeStreamError=H1.MongoBatchReExecutionError=H1.MongoAzureError=H1.MongoAWSError=H1.MongoAPIError=H1.ExplainableCursor=H1.ChangeStreamCursor=H1.ClientEncryption=H1.MongoBulkWriteError=H1.UUID=H1.Timestamp=H1.ObjectId=H1.MinKey=H1.MaxKey=H1.Long=H1.Int32=H1.Double=H1.Decimal128=H1.DBRef=H1.Code=H1.BSONType=H1.BSONSymbol=H1.BSONRegExp=H1.Binary=H1.BSON=void 0;H1.CommandStartedEvent=H1.CommandFailedEvent=H1.WriteConcern=H1.ReadPreference=H1.ReadConcern=H1.TopologyType=H1.ServerType=H1.ReadPreferenceMode=H1.ReadConcernLevel=H1.ProfilingLevel=H1.ReturnDocument=H1.SeverityLevel=H1.MongoLoggableComponent=H1.ServerApiVersion=H1.ExplainVerbosity=H1.MongoErrorLabel=H1.CursorTimeoutMode=H1.CURSOR_FLAGS=H1.Compressor=H1.AuthMechanism=H1.GSSAPICanonicalizationValue=H1.AutoEncryptionLoggerLevel=H1.BatchType=H1.UnorderedBulkOperation=H1.OrderedBulkOperation=H1.MongoClient=H1.ListIndexesCursor=H1.ListCollectionsCursor=H1.GridFSBucketWriteStream=H1.GridFSBucketReadStream=H1.GridFSBucket=H1.FindCursor=H1.Db=H1.Collection=H1.ClientSession=H1.ChangeStream=H1.CancellationToken=H1.AggregationCursor=H1.Admin=H1.AbstractCursor=H1.MongoWriteConcernError=H1.MongoUnexpectedServerResponseError=H1.MongoTransactionError=H1.MongoTopologyClosedError=H1.MongoTailableCursorError=H1.MongoSystemError=H1.MongoStalePrimaryError=H1.MongoServerSelectionError=H1.MongoServerError=H1.MongoServerClosedError=void 0;H1.MongoClientAuthProviders=H1.MongoCryptKMSRequestNetworkTimeoutError=H1.MongoCryptInvalidArgumentError=H1.MongoCryptError=H1.MongoCryptCreateEncryptedCollectionError=H1.MongoCryptCreateDataKeyError=H1.MongoCryptAzureKMSRequestError=H1.SrvPollingEvent=H1.WaitingForSuitableServerEvent=H1.ServerSelectionSucceededEvent=H1.ServerSelectionStartedEvent=H1.ServerSelectionFailedEvent=H1.ServerSelectionEvent=H1.TopologyOpeningEvent=H1.TopologyDescriptionChangedEvent=H1.TopologyClosedEvent=H1.ServerOpeningEvent=H1.ServerHeartbeatSucceededEvent=H1.ServerHeartbeatStartedEvent=H1.ServerHeartbeatFailedEvent=H1.ServerDescriptionChangedEvent=H1.ServerClosedEvent=H1.ConnectionReadyEvent=H1.ConnectionPoolReadyEvent=H1.ConnectionPoolMonitoringEvent=H1.ConnectionPoolCreatedEvent=H1.ConnectionPoolClosedEvent=H1.ConnectionPoolClearedEvent=H1.ConnectionCreatedEvent=H1.ConnectionClosedEvent=H1.ConnectionCheckOutStartedEvent=H1.ConnectionCheckOutFailedEvent=H1.ConnectionCheckedOutEvent=H1.ConnectionCheckedInEvent=H1.CommandSucceededEvent=void 0;var DF0=Wb();Object.defineProperty(H1,"Admin",{enumerable:!0,get:function(){return DF0.Admin}});var GF0=Zb();Object.defineProperty(H1,"OrderedBulkOperation",{enumerable:!0,get:function(){return GF0.OrderedBulkOperation}});var zF0=Db();Object.defineProperty(H1,"UnorderedBulkOperation",{enumerable:!0,get:function(){return zF0.UnorderedBulkOperation}});var HF0=uG();Object.defineProperty(H1,"ChangeStream",{enumerable:!0,get:function(){return HF0.ChangeStream}});var UF0=vG();Object.defineProperty(H1,"Collection",{enumerable:!0,get:function(){return UF0.Collection}});var QF0=q8();Object.defineProperty(H1,"AbstractCursor",{enumerable:!0,get:function(){return QF0.AbstractCursor}});var KF0=kK();Object.defineProperty(H1,"AggregationCursor",{enumerable:!0,get:function(){return KF0.AggregationCursor}});var BF0=yb();Object.defineProperty(H1,"FindCursor",{enumerable:!0,get:function(){return BF0.FindCursor}});var wF0=Wx();Object.defineProperty(H1,"ListCollectionsCursor",{enumerable:!0,get:function(){return wF0.ListCollectionsCursor}});var qF0=pb();Object.defineProperty(H1,"ListIndexesCursor",{enumerable:!0,get:function(){return qF0.ListIndexesCursor}});var LF0=PN();Object.defineProperty(H1,"Db",{enumerable:!0,get:function(){return LF0.Db}});var EF0=uD1();Object.defineProperty(H1,"GridFSBucket",{enumerable:!0,get:function(){return EF0.GridFSBucket}});var VF0=hf();Object.defineProperty(H1,"GridFSBucketReadStream",{enumerable:!0,get:function(){return VF0.GridFSBucketReadStream}});var NF0=df();Object.defineProperty(H1,"GridFSBucketWriteStream",{enumerable:!0,get:function(){return NF0.GridFSBucketWriteStream}});var CF0=eW();Object.defineProperty(H1,"MongoClient",{enumerable:!0,get:function(){return CF0.MongoClient}});var MF0=E7();Object.defineProperty(H1,"CancellationToken",{enumerable:!0,get:function(){return MF0.CancellationToken}});var PF0=SK();Object.defineProperty(H1,"ClientSession",{enumerable:!0,get:function(){return PF0.ClientSession}});var RF0=w0();Object.defineProperty(H1,"BSON",{enumerable:!0,get:function(){return RF0.BSON}});var $3=w0();Object.defineProperty(H1,"Binary",{enumerable:!0,get:function(){return $3.Binary}});Object.defineProperty(H1,"BSONRegExp",{enumerable:!0,get:function(){return $3.BSONRegExp}});Object.defineProperty(H1,"BSONSymbol",{enumerable:!0,get:function(){return $3.BSONSymbol}});Object.defineProperty(H1,"BSONType",{enumerable:!0,get:function(){return $3.BSONType}});Object.defineProperty(H1,"Code",{enumerable:!0,get:function(){return $3.Code}});Object.defineProperty(H1,"DBRef",{enumerable:!0,get:function(){return $3.DBRef}});Object.defineProperty(H1,"Decimal128",{enumerable:!0,get:function(){return $3.Decimal128}});Object.defineProperty(H1,"Double",{enumerable:!0,get:function(){return $3.Double}});Object.defineProperty(H1,"Int32",{enumerable:!0,get:function(){return $3.Int32}});Object.defineProperty(H1,"Long",{enumerable:!0,get:function(){return $3.Long}});Object.defineProperty(H1,"MaxKey",{enumerable:!0,get:function(){return $3.MaxKey}});Object.defineProperty(H1,"MinKey",{enumerable:!0,get:function(){return $3.MinKey}});Object.defineProperty(H1,"ObjectId",{enumerable:!0,get:function(){return $3.ObjectId}});Object.defineProperty(H1,"Timestamp",{enumerable:!0,get:function(){return $3.Timestamp}});Object.defineProperty(H1,"UUID",{enumerable:!0,get:function(){return $3.UUID}});var IF0=SG();Object.defineProperty(H1,"MongoBulkWriteError",{enumerable:!0,get:function(){return IF0.MongoBulkWriteError}});var TF0=YC();Object.defineProperty(H1,"ClientEncryption",{enumerable:!0,get:function(){return TF0.ClientEncryption}});var jF0=Ax();Object.defineProperty(H1,"ChangeStreamCursor",{enumerable:!0,get:function(){return jF0.ChangeStreamCursor}});var OF0=LN();Object.defineProperty(H1,"ExplainableCursor",{enumerable:!0,get:function(){return OF0.ExplainableCursor}});var u0=_1();Object.defineProperty(H1,"MongoAPIError",{enumerable:!0,get:function(){return u0.MongoAPIError}});Object.defineProperty(H1,"MongoAWSError",{enumerable:!0,get:function(){return u0.MongoAWSError}});Object.defineProperty(H1,"MongoAzureError",{enumerable:!0,get:function(){return u0.MongoAzureError}});Object.defineProperty(H1,"MongoBatchReExecutionError",{enumerable:!0,get:function(){return u0.MongoBatchReExecutionError}});Object.defineProperty(H1,"MongoChangeStreamError",{enumerable:!0,get:function(){return u0.MongoChangeStreamError}});Object.defineProperty(H1,"MongoClientBulkWriteCursorError",{enumerable:!0,get:function(){return u0.MongoClientBulkWriteCursorError}});Object.defineProperty(H1,"MongoClientBulkWriteError",{enumerable:!0,get:function(){return u0.MongoClientBulkWriteError}});Object.defineProperty(H1,"MongoClientBulkWriteExecutionError",{enumerable:!0,get:function(){return u0.MongoClientBulkWriteExecutionError}});Object.defineProperty(H1,"MongoClientClosedError",{enumerable:!0,get:function(){return u0.MongoClientClosedError}});Object.defineProperty(H1,"MongoCompatibilityError",{enumerable:!0,get:function(){return u0.MongoCompatibilityError}});Object.defineProperty(H1,"MongoCursorExhaustedError",{enumerable:!0,get:function(){return u0.MongoCursorExhaustedError}});Object.defineProperty(H1,"MongoCursorInUseError",{enumerable:!0,get:function(){return u0.MongoCursorInUseError}});Object.defineProperty(H1,"MongoDecompressionError",{enumerable:!0,get:function(){return u0.MongoDecompressionError}});Object.defineProperty(H1,"MongoDriverError",{enumerable:!0,get:function(){return u0.MongoDriverError}});Object.defineProperty(H1,"MongoError",{enumerable:!0,get:function(){return u0.MongoError}});Object.defineProperty(H1,"MongoExpiredSessionError",{enumerable:!0,get:function(){return u0.MongoExpiredSessionError}});Object.defineProperty(H1,"MongoGCPError",{enumerable:!0,get:function(){return u0.MongoGCPError}});Object.defineProperty(H1,"MongoGridFSChunkError",{enumerable:!0,get:function(){return u0.MongoGridFSChunkError}});Object.defineProperty(H1,"MongoGridFSStreamError",{enumerable:!0,get:function(){return u0.MongoGridFSStreamError}});Object.defineProperty(H1,"MongoInvalidArgumentError",{enumerable:!0,get:function(){return u0.MongoInvalidArgumentError}});Object.defineProperty(H1,"MongoKerberosError",{enumerable:!0,get:function(){return u0.MongoKerberosError}});Object.defineProperty(H1,"MongoMissingCredentialsError",{enumerable:!0,get:function(){return u0.MongoMissingCredentialsError}});Object.defineProperty(H1,"MongoMissingDependencyError",{enumerable:!0,get:function(){return u0.MongoMissingDependencyError}});Object.defineProperty(H1,"MongoNetworkError",{enumerable:!0,get:function(){return u0.MongoNetworkError}});Object.defineProperty(H1,"MongoNetworkTimeoutError",{enumerable:!0,get:function(){return u0.MongoNetworkTimeoutError}});Object.defineProperty(H1,"MongoNotConnectedError",{enumerable:!0,get:function(){return u0.MongoNotConnectedError}});Object.defineProperty(H1,"MongoOIDCError",{enumerable:!0,get:function(){return u0.MongoOIDCError}});Object.defineProperty(H1,"MongoOperationTimeoutError",{enumerable:!0,get:function(){return u0.MongoOperationTimeoutError}});Object.defineProperty(H1,"MongoParseError",{enumerable:!0,get:function(){return u0.MongoParseError}});Object.defineProperty(H1,"MongoRuntimeError",{enumerable:!0,get:function(){return u0.MongoRuntimeError}});Object.defineProperty(H1,"MongoServerClosedError",{enumerable:!0,get:function(){return u0.MongoServerClosedError}});Object.defineProperty(H1,"MongoServerError",{enumerable:!0,get:function(){return u0.MongoServerError}});Object.defineProperty(H1,"MongoServerSelectionError",{enumerable:!0,get:function(){return u0.MongoServerSelectionError}});Object.defineProperty(H1,"MongoStalePrimaryError",{enumerable:!0,get:function(){return u0.MongoStalePrimaryError}});Object.defineProperty(H1,"MongoSystemError",{enumerable:!0,get:function(){return u0.MongoSystemError}});Object.defineProperty(H1,"MongoTailableCursorError",{enumerable:!0,get:function(){return u0.MongoTailableCursorError}});Object.defineProperty(H1,"MongoTopologyClosedError",{enumerable:!0,get:function(){return u0.MongoTopologyClosedError}});Object.defineProperty(H1,"MongoTransactionError",{enumerable:!0,get:function(){return u0.MongoTransactionError}});Object.defineProperty(H1,"MongoUnexpectedServerResponseError",{enumerable:!0,get:function(){return u0.MongoUnexpectedServerResponseError}});Object.defineProperty(H1,"MongoWriteConcernError",{enumerable:!0,get:function(){return u0.MongoWriteConcernError}});var SF0=SG();Object.defineProperty(H1,"BatchType",{enumerable:!0,get:function(){return SF0.BatchType}});var _F0=Lg();Object.defineProperty(H1,"AutoEncryptionLoggerLevel",{enumerable:!0,get:function(){return _F0.AutoEncryptionLoggerLevel}});var kF0=hN();Object.defineProperty(H1,"GSSAPICanonicalizationValue",{enumerable:!0,get:function(){return kF0.GSSAPICanonicalizationValue}});var bF0=fF();Object.defineProperty(H1,"AuthMechanism",{enumerable:!0,get:function(){return bF0.AuthMechanism}});var xF0=XB();Object.defineProperty(H1,"Compressor",{enumerable:!0,get:function(){return xF0.Compressor}});var hD1=q8();Object.defineProperty(H1,"CURSOR_FLAGS",{enumerable:!0,get:function(){return hD1.CURSOR_FLAGS}});Object.defineProperty(H1,"CursorTimeoutMode",{enumerable:!0,get:function(){return hD1.CursorTimeoutMode}});var gF0=_1();Object.defineProperty(H1,"MongoErrorLabel",{enumerable:!0,get:function(){return gF0.MongoErrorLabel}});var fF0=LK();Object.defineProperty(H1,"ExplainVerbosity",{enumerable:!0,get:function(){return fF0.ExplainVerbosity}});var vF0=eW();Object.defineProperty(H1,"ServerApiVersion",{enumerable:!0,get:function(){return vF0.ServerApiVersion}});var mD1=SX();Object.defineProperty(H1,"MongoLoggableComponent",{enumerable:!0,get:function(){return mD1.MongoLoggableComponent}});Object.defineProperty(H1,"SeverityLevel",{enumerable:!0,get:function(){return mD1.SeverityLevel}});var yF0=rb();Object.defineProperty(H1,"ReturnDocument",{enumerable:!0,get:function(){return yF0.ReturnDocument}});var uF0=Gx();Object.defineProperty(H1,"ProfilingLevel",{enumerable:!0,get:function(){return uF0.ProfilingLevel}});var hF0=Z$();Object.defineProperty(H1,"ReadConcernLevel",{enumerable:!0,get:function(){return hF0.ReadConcernLevel}});var mF0=e4();Object.defineProperty(H1,"ReadPreferenceMode",{enumerable:!0,get:function(){return mF0.ReadPreferenceMode}});var dD1=B7();Object.defineProperty(H1,"ServerType",{enumerable:!0,get:function(){return dD1.ServerType}});Object.defineProperty(H1,"TopologyType",{enumerable:!0,get:function(){return dD1.TopologyType}});var dF0=Z$();Object.defineProperty(H1,"ReadConcern",{enumerable:!0,get:function(){return dF0.ReadConcern}});var cF0=e4();Object.defineProperty(H1,"ReadPreference",{enumerable:!0,get:function(){return cF0.ReadPreference}});var lF0=i8();Object.defineProperty(H1,"WriteConcern",{enumerable:!0,get:function(){return lF0.WriteConcern}});var lf=Pg();Object.defineProperty(H1,"CommandFailedEvent",{enumerable:!0,get:function(){return lf.CommandFailedEvent}});Object.defineProperty(H1,"CommandStartedEvent",{enumerable:!0,get:function(){return lf.CommandStartedEvent}});Object.defineProperty(H1,"CommandSucceededEvent",{enumerable:!0,get:function(){return lf.CommandSucceededEvent}});var C5=fg();Object.defineProperty(H1,"ConnectionCheckedInEvent",{enumerable:!0,get:function(){return C5.ConnectionCheckedInEvent}});Object.defineProperty(H1,"ConnectionCheckedOutEvent",{enumerable:!0,get:function(){return C5.ConnectionCheckedOutEvent}});Object.defineProperty(H1,"ConnectionCheckOutFailedEvent",{enumerable:!0,get:function(){return C5.ConnectionCheckOutFailedEvent}});Object.defineProperty(H1,"ConnectionCheckOutStartedEvent",{enumerable:!0,get:function(){return C5.ConnectionCheckOutStartedEvent}});Object.defineProperty(H1,"ConnectionClosedEvent",{enumerable:!0,get:function(){return C5.ConnectionClosedEvent}});Object.defineProperty(H1,"ConnectionCreatedEvent",{enumerable:!0,get:function(){return C5.ConnectionCreatedEvent}});Object.defineProperty(H1,"ConnectionPoolClearedEvent",{enumerable:!0,get:function(){return C5.ConnectionPoolClearedEvent}});Object.defineProperty(H1,"ConnectionPoolClosedEvent",{enumerable:!0,get:function(){return C5.ConnectionPoolClosedEvent}});Object.defineProperty(H1,"ConnectionPoolCreatedEvent",{enumerable:!0,get:function(){return C5.ConnectionPoolCreatedEvent}});Object.defineProperty(H1,"ConnectionPoolMonitoringEvent",{enumerable:!0,get:function(){return C5.ConnectionPoolMonitoringEvent}});Object.defineProperty(H1,"ConnectionPoolReadyEvent",{enumerable:!0,get:function(){return C5.ConnectionPoolReadyEvent}});Object.defineProperty(H1,"ConnectionReadyEvent",{enumerable:!0,get:function(){return C5.ConnectionReadyEvent}});var FJ=wC();Object.defineProperty(H1,"ServerClosedEvent",{enumerable:!0,get:function(){return FJ.ServerClosedEvent}});Object.defineProperty(H1,"ServerDescriptionChangedEvent",{enumerable:!0,get:function(){return FJ.ServerDescriptionChangedEvent}});Object.defineProperty(H1,"ServerHeartbeatFailedEvent",{enumerable:!0,get:function(){return FJ.ServerHeartbeatFailedEvent}});Object.defineProperty(H1,"ServerHeartbeatStartedEvent",{enumerable:!0,get:function(){return FJ.ServerHeartbeatStartedEvent}});Object.defineProperty(H1,"ServerHeartbeatSucceededEvent",{enumerable:!0,get:function(){return FJ.ServerHeartbeatSucceededEvent}});Object.defineProperty(H1,"ServerOpeningEvent",{enumerable:!0,get:function(){return FJ.ServerOpeningEvent}});Object.defineProperty(H1,"TopologyClosedEvent",{enumerable:!0,get:function(){return FJ.TopologyClosedEvent}});Object.defineProperty(H1,"TopologyDescriptionChangedEvent",{enumerable:!0,get:function(){return FJ.TopologyDescriptionChangedEvent}});Object.defineProperty(H1,"TopologyOpeningEvent",{enumerable:!0,get:function(){return FJ.TopologyOpeningEvent}});var _B=Of();Object.defineProperty(H1,"ServerSelectionEvent",{enumerable:!0,get:function(){return _B.ServerSelectionEvent}});Object.defineProperty(H1,"ServerSelectionFailedEvent",{enumerable:!0,get:function(){return _B.ServerSelectionFailedEvent}});Object.defineProperty(H1,"ServerSelectionStartedEvent",{enumerable:!0,get:function(){return _B.ServerSelectionStartedEvent}});Object.defineProperty(H1,"ServerSelectionSucceededEvent",{enumerable:!0,get:function(){return _B.ServerSelectionSucceededEvent}});Object.defineProperty(H1,"WaitingForSuitableServerEvent",{enumerable:!0,get:function(){return _B.WaitingForSuitableServerEvent}});var pF0=bf();Object.defineProperty(H1,"SrvPollingEvent",{enumerable:!0,get:function(){return pF0.SrvPollingEvent}});var Vz=Yz();Object.defineProperty(H1,"MongoCryptAzureKMSRequestError",{enumerable:!0,get:function(){return Vz.MongoCryptAzureKMSRequestError}});Object.defineProperty(H1,"MongoCryptCreateDataKeyError",{enumerable:!0,get:function(){return Vz.MongoCryptCreateDataKeyError}});Object.defineProperty(H1,"MongoCryptCreateEncryptedCollectionError",{enumerable:!0,get:function(){return Vz.MongoCryptCreateEncryptedCollectionError}});Object.defineProperty(H1,"MongoCryptError",{enumerable:!0,get:function(){return Vz.MongoCryptError}});Object.defineProperty(H1,"MongoCryptInvalidArgumentError",{enumerable:!0,get:function(){return Vz.MongoCryptInvalidArgumentError}});Object.defineProperty(H1,"MongoCryptKMSRequestNetworkTimeoutError",{enumerable:!0,get:function(){return Vz.MongoCryptKMSRequestNetworkTimeoutError}});var iF0=Ef();Object.defineProperty(H1,"MongoClientAuthProviders",{enumerable:!0,get:function(){return iF0.MongoClientAuthProviders}})});var s1=O((tF0)=>{tF0.arrayAtomicsBackupSymbol=Symbol("mongoose#Array#atomicsBackup");tF0.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics");tF0.arrayParentSymbol=Symbol("mongoose#Array#_parent");tF0.arrayPathSymbol=Symbol("mongoose#Array#_path");tF0.arraySchemaSymbol=Symbol("mongoose#Array#_schema");tF0.documentArrayParent=Symbol("mongoose#documentArrayParent");tF0.documentIsSelected=Symbol("mongoose#Document#isSelected");tF0.documentIsModified=Symbol("mongoose#Document#isModified");tF0.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths");tF0.documentSchemaSymbol=Symbol("mongoose#Document#schema");tF0.getSymbol=Symbol("mongoose#Document#get");tF0.modelSymbol=Symbol("mongoose#Model");tF0.objectIdSymbol=Symbol("mongoose#ObjectId");tF0.populateModelSymbol=Symbol("mongoose#PopulateOptions#Model");tF0.schemaTypeSymbol=Symbol("mongoose#schemaType");tF0.sessionNewDocuments=Symbol("mongoose#ClientSession#newDocuments");tF0.scopeSymbol=Symbol("mongoose#Document#scope");tF0.validatorErrorSymbol=Symbol("mongoose#validatorError")});var sX=O((es0,cD1)=>{var kB=w0().ObjectId,BA0=s1().objectIdSymbol;Object.defineProperty(kB.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});/*!
 * Convenience `valueOf()` to allow comparing ObjectIds using double equals re: gh-7299
 */if(!Object.hasOwn(kB.prototype,"valueOf"))kB.prototype.valueOf=function(){return this.toString()};kB.prototype[BA0]=!0;cD1.exports=kB});var F3=O(($o0,lD1)=>{lD1.exports=function(F){if(F==null)return;if(typeof F.constructor!=="function")return;return F.constructor.name}});var V$=O((wA0)=>{/*!
 * ignore
 */wA0.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1,versionKey:!0,flattenObjectIds:!1}});var vC=O((Ao0,pD1)=>{pD1.exports=w0().Decimal128});var HZ=O((Jo0,iD1)=>{iD1.exports=new Set(["__proto__","constructor","prototype"])});var yC=O((LA0)=>{LA0.isMongooseArray=function($){return Array.isArray($)&&$.isMongooseArray}});var bB=O((Yo0,nD1)=>{var VA0=yC().isMongooseArray;nD1.exports=function($){return $!=null&&(VA0($)||$.$__!=null||$.isMongooseBuffer||$.$isMongooseMap)}});var pf=O((Wo0,rD1)=>{var NA0=/^function\s*([^\s(]+)/;rD1.exports=function($){return $.name||($.toString().trim().match(NA0)||[])[1]}});var t9=O((Zo0,aD1)=>{function CA0($,F){return $!=null&&$._bsontype===F}aD1.exports=CA0});var UZ=O((Do0,tD1)=>{tD1.exports=function($){return Buffer.isBuffer($)||Object.prototype.toString.call($)==="[object Object]"}});var Nz=O((Go0,sD1)=>{sD1.exports=function(F){if(F==null||typeof F!=="object")return!1;let A=Object.getPrototypeOf(F);return!A||A.constructor.name==="Object"}});var Cz=O((MA0)=>{var oD1=Symbol("mongoose#trustedSymbol");MA0.trustedSymbol=oD1;MA0.trusted=function(F){if(F==null||typeof F!=="object")return F;return F[oD1]=!0,F}});var W4=O((Ho0,eD1)=>{var IA0=vC(),TA0=sX(),jA0=HZ(),OA0=bB(),SA0=pf(),nf=t9(),_A0=yC().isMongooseArray,kA0=UZ(),bA0=Nz(),xA0=s1(),rf=Cz().trustedSymbol,gA0=w0();function uC($,F,A){if($==null)return $;if(nf($,"Double"))return new gA0.Double($.value);if(typeof $==="number"||typeof $==="string"||typeof $==="boolean"||typeof $==="bigint")return $;if(Array.isArray($))return fA0($,F);if(OA0($)){if(F){if(F.retainDocuments&&$.$__!=null){let Y=$.$clone();if($.__index!=null)Y.__index=$.__index;if($.__parentArray!=null)Y.__parentArray=F.parentArray??$.__parentArray;return Y.$__setParent(F.parentDoc??$.$__parent),Y}if(F.retainDocuments&&$.$isMongooseMap){let Y=F.parentDoc??$.$__parent,Z=new $.constructor({},$.$__path,Y,$.$__schemaType);for(let[D,G]of $)Z.$__set(D,uC(G,F));return Z}}if(bA0($)&&$.$__!=null&&$._doc!=null)return $._doc;let X;if(F?.json&&typeof $.toJSON==="function")X=$.toJSON(F);else X=$.toObject(F);return X}let J=$.constructor;if(J)switch(SA0(J)){case"Object":return af($,F,A);case"Date":return new J(+$);case"RegExp":return vA0($);default:break}if(nf($,"ObjectId")){if(F?.flattenObjectIds)return $.toJSON();return new TA0($.id)}if(nf($,"Decimal128")){if(F?.flattenDecimals)return $.toJSON();return IA0.fromString($.toString())}if(!J&&kA0($))return af($,F,A);if(typeof $==="object"&&$[xA0.schemaTypeSymbol])return $.clone();if(F?.bson&&typeof $.toBSON==="function")return $;if(typeof $.valueOf==="function")return $.valueOf();return af($,F,A)}eD1.exports=uC;/*!
 * ignore
 */function af($,F,A){let J=F?.minimize,X=F?.omitUndefined,Y=F?._seen,W={},Z;if(Y&&Y.has($))return Y.get($);else if(Y)Y.set($,W);if(rf in $&&F?.copyTrustedSymbol!==!1)W[rf]=$[rf];let D=Object.keys($),G=D.length;for(let z=0;z<G;++z){let H=D[z];if(jA0.has(H))continue;let U=uC($[H],F,!1);if((J===!1||X)&&typeof U>"u")delete W[H];else if(J!==!0||typeof U<"u")Z||(Z=!0),W[H]=U}return J&&!A?Z&&W:W}function fA0($,F){let A=0,J=$.length,X=null;if(F?.retainDocuments)if($.isMongooseDocumentArray)X=new($.$schemaType()).schema.base.Types.DocumentArray([],$.$path(),$.$parent(),$.$schemaType());else if($.isMongooseArray)X=new($.$parent()).schema.base.Types.Array([],$.$path(),$.$parent(),$.$schemaType());else X=Array(J);else X=Array(J);if($=_A0($)?$.__array:$,X.isMongooseDocumentArray)F={...F,parentArray:X};for(A=0;A<J;++A)X[A]=uC($[A],F,!0);return X}function vA0($){let F=new RegExp($.source,$.flags);if(F.lastIndex!==$.lastIndex)F.lastIndex=$.lastIndex;return F}});var AG1=O((Uo0,FG1)=>{/*!
 * Module dependencies.
 */var hC=ok(),tf=v0(),sf=iA().Collection,yA0=sX(),$G1=F3(),uA0=V$().internalToObjectOptions,hA0=Z1("stream"),of=Z1("util"),mA0=Object.freeze({...uA0,copyTrustedSymbol:!1});function N$($,F,A){this.collection=null,this.Promise=A.Promise||Promise,this.modelName=A.modelName,delete A.modelName,this._closed=!1,hC.apply(this,arguments)}/*!
 * Inherit from abstract Collection.
 */Object.setPrototypeOf(N$.prototype,hC.prototype);N$.prototype.onOpen=function(){return this.collection=this.conn.db.collection(this.name),hC.prototype.onOpen.call(this),this.collection};N$.prototype.onClose=function($){hC.prototype.onClose.call(this,$)};N$.prototype._getCollection=function(){if(this.collection)return this.collection;if(this.conn.db!=null)return this.collection=this.conn.db.collection(this.name),this.collection;return null};function dA0($){N$.prototype[$]=function(){let F=this._getCollection(),A=Array.from(arguments),J=this,X=J?.conn?.base?.options?.debug,Y=J?.conn?.options?.debug,W=Y==null?X:Y,Z=new yA0;if(this.conn.$wasForceClosed){let z=new tf("Connection was force closed");if(A.length>0&&typeof A[A.length-1]==="function"){A[A.length-1](z);return}else throw z}let D=null,G=null;if(this._shouldBufferCommands()&&this.buffer){this.conn.emit("buffer",{_id:Z,modelName:J.modelName,collectionName:J.name,method:$,args:A});let z=this._getBufferTimeoutMS();return G=new Promise((H,U)=>{this.addQueue(H),D=setTimeout(()=>{if(this.removeQueue(H)){let B="Operation `"+this.name+"."+$+"()` buffering timed out after "+z+"ms",q=new tf(B);this.conn.emit("buffer-end",{_id:Z,modelName:J.modelName,collectionName:J.name,method:$,error:q}),U(q)}},z)}),G.then(()=>{if(D)clearTimeout(D);return this[$].apply(this,A)})}if(W)if(typeof W==="function"){let z=null;if(typeof A[A.length-1]=="function")z=A.slice(0,A.length-1);else z=A;W.apply(J,[J.name,$].concat(z))}else if(W instanceof hA0.Writable)this.$printToStream(J.name,$,A,W);else{let z=W.color==null?!0:W.color,H=W.shell==null?!1:W.shell;this.$print(J.name,$,A,z,H)}this.conn.emit("operation-start",{_id:Z,modelName:J.modelName,collectionName:this.name,method:$,params:A});try{if(F==null){let H="Cannot call `"+this.name+"."+$+"()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.";throw new tf(H)}let z=F[$].apply(F,A);if(typeof z?.then==="function")return z.then((H)=>{if(D!=null)clearTimeout(D);return this.conn.emit("operation-end",{_id:Z,modelName:J.modelName,collectionName:this.name,method:$,result:H}),H},(H)=>{if(D!=null)clearTimeout(D);throw this.conn.emit("operation-end",{_id:Z,modelName:J.modelName,collectionName:this.name,method:$,error:H}),H});if(this.conn.emit("operation-end",{_id:Z,modelName:J.modelName,collectionName:this.name,method:$,result:z}),D!=null)clearTimeout(D);return z}catch(z){if(D!=null)clearTimeout(D);throw this.conn.emit("operation-end",{_id:Z,modelName:J.modelName,collectionName:this.name,method:$,error:z}),z}}}for(let $ of Object.getOwnPropertyNames(sf.prototype)){if(Object.getOwnPropertyDescriptor(sf.prototype,$).get!==void 0)continue;if(typeof sf.prototype[$]!=="function")continue;dA0($)}N$.prototype.$print=function($,F,A,J,X){let Y=J?"\x1B[0;36mMongoose:\x1B[0m ":"Mongoose: ",W=[$,F].join("."),Z=[];for(let G=A.length-1;G>=0;--G)if(this.$format(A[G])||Z.length)Z.unshift(this.$format(A[G],J,X));let D="("+Z.join(", ")+")";console.info(Y+W+D)};N$.prototype.$printToStream=function($,F,A,J){let X=[$,F].join("."),Y=[];for(let Z=A.length-1;Z>=0;--Z)if(this.$format(A[Z])||Y.length)Y.unshift(this.$format(A[Z]));let W="("+Y.join(", ")+")";J.write(X+W,"utf8")};N$.prototype.$format=function($,F,A){let J=typeof $;if(J==="function"||J==="undefined")return"";return ef($,!1,F,A)};function Mz($){let F={inspect:function(){return $}};if(of.inspect.custom)F[of.inspect.custom]=F.inspect;return F}function cA0($){return ef($,!0)}function lA0($,F){$[F]=Mz('ObjectId("'+$[F].toHexString()+'")')}function pA0($,F,A){if(A)$[F]=Mz('ISODate("'+$[F].toUTCString()+'")');else $[F]=Mz('new Date("'+$[F].toUTCString()+'")')}function ef($,F,A,J){if(typeof $?.toBSON==="function")$=$.toBSON();if($==null)return $;let X=W4(),Y=F?$:X($,mA0),W=$G1(Y);if(W==="Binary")Y="BinData("+Y.sub_type+', "'+Y.toString("base64")+'")';else if(W==="ObjectId")Y=Mz('ObjectId("'+Y.toHexString()+'")');else if(W==="Date")Y=Mz('new Date("'+Y.toUTCString()+'")');else if(W==="Object"){let Z=Object.keys(Y),D=Z.length,G;for(let z=0;z<D;++z)if(G=Z[z],Y[G]){let H;if(typeof Y[G].toBSON==="function")try{Y[G]=Y[G].toBSON()}catch(Q){H=Q}let U=$G1(Y[G]);if(U==="Binary")Y[G]="BinData("+Y[G].sub_type+', "'+Y[G].buffer.toString("base64")+'")';else if(U==="Object")Y[G]=ef(Y[G],!0);else if(U==="ObjectId")lA0(Y,G);else if(U==="Date")pA0(Y,G,J);else if(U==="ClientSession")Y[G]=Mz('ClientSession("'+(Y[G]?.id?.id?.buffer||"").toString("hex")+'")');else if(Array.isArray(Y[G]))Y[G]=Y[G].map(cA0);else if(H!=null)throw H}}if(F)return Y;return of.inspect(Y,!1,10,A).replace(/\n/g,"").replace(/\s{2,}/g," ")}N$.prototype.getIndexes=N$.prototype.indexInformation;/*!
 * Module exports.
 */FG1.exports=N$});var $v=O((Qo0,YG1)=>{/*!
 * Module dependencies.
 */var iA0=Z1("events").EventEmitter,xB=v0();/*!
 * ignore
 */var JG1=["close","change","end","error","resumeTokenChanged"];/*!
 * ignore
 */class XG1 extends iA0{constructor($,F,A){super();if(this.driverChangeStream=null,this.closed=!1,this.bindedEvents=!1,this.pipeline=F,this.options=A,this.errored=!1,A?.hydrate&&!A.model)throw Error("Cannot create change stream with `hydrate: true` unless calling `Model.watch()`");let J=null;if(this.$driverChangeStreamPromise=new Promise((X,Y)=>{try{$((W,Z)=>{if(W!=null)return this.errored=!0,this.emit("error",W),Y(W);this.driverChangeStream=Z,this.emit("ready"),X()})}catch(W){J=W,this.errored=!0,this.emit("error",W),Y(W)}}),J!=null)throw J}_bindEvents(){if(this.bindedEvents)return;if(this.bindedEvents=!0,this.driverChangeStream==null){this.$driverChangeStreamPromise.then(()=>{this.driverChangeStream.on("close",()=>{this.closed=!0}),JG1.forEach(($)=>{this.driverChangeStream.on($,(F)=>{if(F?.fullDocument!=null&&this.options?.hydrate)F.fullDocument=this.options.model.hydrate(F.fullDocument);this.emit($,F)})})},()=>{});return}this.driverChangeStream.on("close",()=>{this.closed=!0}),JG1.forEach(($)=>{this.driverChangeStream.on($,(F)=>{if(F?.fullDocument!=null&&this.options?.hydrate)F.fullDocument=this.options.model.hydrate(F.fullDocument);this.emit($,F)})})}hasNext($){if(this.errored)throw new xB("Cannot call hasNext() on errored ChangeStream");return this.driverChangeStream.hasNext($)}next($){if(this.errored)throw new xB("Cannot call next() on errored ChangeStream");if(this.options?.hydrate){if($!=null){let A=$;$=(J,X)=>{if(J!=null)return A(J);if(X.fullDocument!=null)X.fullDocument=this.options.model.hydrate(X.fullDocument);return A(null,X)}}let F=this.driverChangeStream.next($);if(typeof F?.then==="function")F=F.then((A)=>{if(A.fullDocument!=null)A.fullDocument=this.options.model.hydrate(A.fullDocument);return A});return F}return this.driverChangeStream.next($)}addListener($,F){if(this.errored)throw new xB("Cannot call addListener() on errored ChangeStream");return this._bindEvents(),super.addListener($,F)}on($,F){if(this.errored)throw new xB("Cannot call on() on errored ChangeStream");return this._bindEvents(),super.on($,F)}once($,F){if(this.errored)throw new xB("Cannot call once() on errored ChangeStream");return this._bindEvents(),super.once($,F)}_queue($){this.once("ready",()=>$())}close(){if(this.closed=!0,this.driverChangeStream)return this.driverChangeStream.close();else return this.$driverChangeStreamPromise.then(()=>this.driverChangeStream.close(),()=>{})}}/*!
 * ignore
 */YG1.exports=XG1});var QZ=O((Ko0,ZG1)=>{function F6(){this._pres=new Map,this._posts=new Map}F6.skipWrappedFunction=function(){if(!(this instanceof F6.skipWrappedFunction))return new F6.skipWrappedFunction(...arguments);this.args=[...arguments]};F6.overwriteResult=function(){if(!(this instanceof F6.overwriteResult))return new F6.overwriteResult(...arguments);this.args=[...arguments]};F6.overwriteArguments=function(){if(!(this instanceof F6.overwriteArguments))return new F6.overwriteArguments(...arguments);this.args=[...arguments]};F6.prototype.execPre=async function(F,A,J){let X=this._pres.get(F)||[],Y=X.length,W=J,Z=null;if(!Y)return W;for(let D of X){let G=[],z=[null].concat(W);for(let H=1;H<z.length;++H){if(H===z.length-1&&typeof z[H]==="function")continue;G.push(z[H])}try{let H=D.fn.apply(A,G);if(Fv(H)){let U=await H;if(U instanceof F6.overwriteArguments)W=U.args}else if(H instanceof F6.overwriteArguments)W=H.args}catch(H){if(H instanceof F6.skipWrappedFunction){Z=H;continue}if(H instanceof F6.overwriteArguments){W=H.args;continue}throw H}}if(Z)throw Z;return W};F6.prototype.execPreSync=function($,F,A){let J=this._pres.get($)||[],X=J.length,Y=A||[];for(let W=0;W<X;++W){let Z=J[W].fn.apply(F,Y);if(Z instanceof F6.overwriteArguments)Y=Z.args}return Y};F6.prototype.execPost=async function(F,A,J,X){let Y=this._posts.get(F)||[],W=Y.length,Z=null;if(X&&X.error)Z=X.error;if(!W){if(Z!=null)throw Z;return J}for(let D of Y){let G=D.fn,z=0,H=[],U=J.length;for(let L=0;L<U;++L)if(!J[L]||!J[L]._kareemIgnore)z+=1,H.push(J[L]);if(X?.numCallbackParams!=null){z=X.numCallbackParams;for(let L=H.length;L<z;++L)H.push(null)}let Q,B,q=new Promise((L,E)=>{Q=L,B=E});if(H.push(function(E){if(E)B(E);else Q()}),Z)if(WG1(D,z))try{let L=G.apply(A,[Z].concat(H));if(Fv(L))await L;else if(G.length===z+2)await q}catch(L){if(L instanceof F6.overwriteResult){J=L.args;continue}Z=L}else continue;else if(WG1(D,z))continue;else{let L=null;try{if(L=G.apply(A,H),Fv(L))L=await L;else if(G.length===z+1)L=await q}catch(E){if(E instanceof F6.overwriteResult){J=E.args;continue}Z=E;continue}if(L instanceof F6.overwriteResult){J=L.args;continue}}}if(Z!=null)throw Z;return J};F6.prototype.execPostSync=function($,F,A){let J=this._posts.get($)||[],X=J.length;for(let Y=0;Y<X;++Y){let W=J[Y].fn.apply(F,A||[]);if(W instanceof F6.overwriteResult)A=W.args}return A};F6.prototype.createWrapperSync=function($,F){let A=this;return function(){let X=A.execPreSync($,this,Array.from(arguments)),Y=F.apply(this,X);return A.execPostSync($,this,[Y])[0]}};F6.prototype.wrap=async function(F,A,J,X,Y){let W,Z=!1,D=X;try{D=await this.execPre(F,J,X)}catch(G){if(G instanceof F6.skipWrappedFunction)W=G.args,Z=!0;else await this.execPost(F,J,X,{...Y,error:G})}if(!Z)W=await A.apply(J,D);return W=await this.execPost(F,J,[W],Y),W[0]};F6.prototype.filter=function($){let F=this.clone(),A=Array.from(F._pres.keys());for(let X of A){let Y=this._pres.get(X).map((W)=>Object.assign({},W,{name:X})).filter($);if(Y.length===0){F._pres.delete(X);continue}F._pres.set(X,Y)}let J=Array.from(F._posts.keys());for(let X of J){let Y=this._posts.get(X).map((W)=>Object.assign({},W,{name:X})).filter($);if(Y.length===0){F._posts.delete(X);continue}F._posts.set(X,Y)}return F};F6.prototype.hasHooks=function($){return this._pres.has($)||this._posts.has($)};F6.prototype.createWrapper=function($,F,A,J){let X=this;if(!this.hasHooks($))return F;return function(){let W=A||this;return X.wrap($,F,W,Array.from(arguments),J)}};F6.prototype.pre=function($,F,A,J,X){if(typeof F==="function")A=F,F={};else if(F==null)F={};let Y=this._pres.get($)||[];if(this._pres.set($,Y),typeof A!=="function")throw Error('pre() requires a function, got "'+typeof A+'"');if(X)Y.unshift(Object.assign({},F,{fn:A}));else Y.push(Object.assign({},F,{fn:A}));return this};F6.prototype.post=function($,F,A,J){let X=this._posts.get($)||[];if(typeof F==="function")J=!!A,A=F,F={};if(typeof A!=="function")throw Error('post() requires a function, got "'+typeof A+'"');if(J)X.unshift(Object.assign({},F,{fn:A}));else X.push(Object.assign({},F,{fn:A}));return this._posts.set($,X),this};F6.prototype.postError=function(F,A,J,X){if(typeof A==="function")X=!!J,J=A,A={};return this.post(F,{...A,errorHandler:!0},J,X)};F6.prototype.clone=function(){let $=new F6;for(let F of this._pres.keys()){let A=this._pres.get(F).slice();$._pres.set(F,A)}for(let F of this._posts.keys())$._posts.set(F,this._posts.get(F).slice());return $};F6.prototype.merge=function($,F){F=arguments.length===1?!0:F;let A=F?this.clone():this;for(let J of $._pres.keys()){let X=A._pres.get(J)||[],Y=$._pres.get(J).filter((Z)=>X.map((D)=>D.fn).indexOf(Z.fn)===-1),W=X.concat(Y);A._pres.set(J,W)}for(let J of $._posts.keys()){let X=A._posts.get(J)||[],Y=$._posts.get(J).filter((W)=>X.indexOf(W)===-1);A._posts.set(J,X.concat(Y))}return A};function Fv($){return typeof $==="object"&&$!==null&&typeof $.then==="function"}function WG1($,F){if($.errorHandler)return!0;return $.fn.length===F+2}ZG1.exports=F6});var zG1=O((DG1,GG1)=>{var V8=GG1.exports=DG1={};V8.DocumentNotFoundError=null;V8.general={};V8.general.default="Validator failed for path `{PATH}` with value `{VALUE}`";V8.general.required="Path `{PATH}` is required.";V8.Number={};V8.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).";V8.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).";V8.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";V8.Date={};V8.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).";V8.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).";V8.String={};V8.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";V8.String.match="Path `{PATH}` is invalid ({VALUE}).";V8.String.minlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is shorter than the minimum allowed length ({MINLENGTH}).";V8.String.maxlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is longer than the maximum allowed length ({MAXLENGTH})."});var N8=O((Bo0,QG1)=>{/*!
 * Module dependencies.
 */var nA0=v0(),rA0=Z1("util");class Xv extends nA0{constructor($,F,A,J,X){if(arguments.length>0){let Y=HG1(F),W=UG1(X),Z=Av(null,$,F,A,W,Y,J);super(Z);this.init($,F,A,J,X)}else super(Av())}toJSON(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}init($,F,A,J,X){/*!
   * ignore
   */this.stringValue=Jv(F),this.messageFormat=UG1(X),this.kind=$,this.value=F,this.path=A,this.reason=J,this.valueType=HG1(F)}copy($){this.messageFormat=$.messageFormat,this.stringValue=$.stringValue,this.kind=$.kind,this.value=$.value,this.path=$.path,this.reason=$.reason,this.message=$.message,this.valueType=$.valueType}setModel($){/*!
   * ignore
   */this.message=Av($,this.kind,this.value,this.path,this.messageFormat,this.valueType)}}Object.defineProperty(Xv.prototype,"name",{value:"CastError"});function Jv($){let F=rA0.inspect($);if(F=F.replace(/^'|'$/g,'"'),!F.startsWith('"'))F='"'+F+'"';return F}function HG1($){if($==null)return""+$;let F=typeof $;if(F!=="object")return F;if(typeof $.constructor!=="function")return F;return $.constructor.name}function UG1($){let F=$?._castErrorMessage||null;if(typeof F==="string"||typeof F==="function")return F}/*!
 * ignore
 */function Av($,F,A,J,X,Y,W){if(typeof X==="string"){let Z=Jv(A),D=X.replace("{KIND}",F).replace("{VALUE}",Z).replace("{PATH}",J);if($!=null)D=D.replace("{MODEL}",$.modelName);return D}else if(typeof X==="function")return X(A,J,$,F);else{let Z=Jv(A),D=Y?" (type "+Y+")":"",G="Cast to "+F+" failed for value "+Z+D+' at path "'+J+'"';if($!=null)G+=' for model "'+$.modelName+'"';if(W!=null&&typeof W.constructor==="function"&&W.constructor.name!=="AssertionError"&&W.constructor.name!=="Error")G+=' because of "'+W.constructor.name+'"';return G}}/*!
 * exports
 */QG1.exports=Xv});var mC=O((wo0,BG1)=>{/*!
 * Module dependencies.
 */var KG1=v0(),aA0=Z1("util");class Yv extends KG1{constructor($,F,A,J){let X,Y=KG1.messages;if(Y.DocumentNotFoundError!=null)X=typeof Y.DocumentNotFoundError==="function"?Y.DocumentNotFoundError($,F):Y.DocumentNotFoundError;else X='No document found for query "'+aA0.inspect($)+'" on model "'+F+'"';super(X);this.result=J,this.numAffected=A,this.filter=$,this.query=$}}Object.defineProperty(Yv.prototype,"name",{value:"DocumentNotFoundError"});/*!
 * exports
 */BG1.exports=Yv});var Wv=O((qo0,wG1)=>{/*!
 * ignore
 */wG1.exports=function(F){let A=Object.keys(F.errors||{}),J=A.length,X=[],Y;for(let W=0;W<J;++W){if(Y=A[W],F===F.errors[Y])continue;X.push(Y+": "+F.errors[Y].message)}return X.join(", ")}});var BZ=O((Lo0,EG1)=>{/*!
 * Module requirements
 */var tA0=v0(),sA0=F3(),qG1=Z1("util"),LG1=Wv();class KZ extends tA0{constructor($){let F;if(sA0($)==="model")F=$.constructor.modelName+" validation failed";else F="Validation failed";super(F);if(this.errors={},this._message=F,$)$.$errors=this.errors}toString(){return this.name+": "+LG1(this)}addError($,F){if(F instanceof KZ){let{errors:A}=F;for(let J of Object.keys(A))this.addError(`${$}.${J}`,A[J]);return}this.errors[$]=F,this.message=this._message+": "+LG1(this)}}if(qG1.inspect.custom)KZ.prototype[qG1.inspect.custom]=KZ.prototype.inspect;Object.defineProperty(KZ.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(KZ.prototype,"name",{value:"ValidationError"});/*!
 * Module exports
 */EG1.exports=KZ});var Zv=O((Eo0,CG1)=>{/*!
 * Module dependencies.
 */var VG1=v0();class gB extends VG1{constructor($,F){let A=$.message;if(!A)A=VG1.messages.general.default;let J=NG1(A,$,F);super(J);$=Object.assign({},$,{message:J}),this.properties=$,this.kind=$.type,this.path=$.path,this.value=$.value,this.reason=$.reason}toString(){return this.message}toJSON(){return Object.assign({name:this.name,message:this.message},this)}}Object.defineProperty(gB.prototype,"name",{value:"ValidatorError"});Object.defineProperty(gB.prototype,"properties",{enumerable:!1,writable:!0,value:null});gB.prototype.formatMessage=NG1;function NG1($,F,A){if(typeof $==="function")return $(F,A);let J=Object.keys(F);for(let X of J){if(X==="message")continue;$=$.replace("{"+X.toUpperCase()+"}",F[X])}return $}/*!
 * exports
 */CG1.exports=gB});var Gv=O((Vo0,MG1)=>{/*!
 * Module dependencies.
 */var oA0=v0();class Dv extends oA0{constructor($,F,A){let J=A.join(", ");super('No matching document found for id "'+$._doc._id+'" version '+F+' modifiedPaths "'+J+'"');this.version=F,this.modifiedPaths=A}}Object.defineProperty(Dv.prototype,"name",{value:"VersionError"});/*!
 * exports
 */MG1.exports=Dv});var Hv=O((No0,PG1)=>{/*!
 * Module dependencies.
 */var eA0=v0();class zv extends eA0{constructor($){super("Can't save() the same doc multiple times in parallel. Document: "+$._doc._id)}}Object.defineProperty(zv.prototype,"name",{value:"ParallelSaveError"});/*!
 * exports
 */PG1.exports=zv});var Qv=O((Co0,RG1)=>{/*!
 * Module dependencies.
 */var $J0=v0();class Uv extends $J0{constructor($){super("Cannot overwrite `"+$+"` model once compiled.")}}Object.defineProperty(Uv.prototype,"name",{value:"OverwriteModelError"});/*!
 * exports
 */RG1.exports=Uv});var TG1=O((Mo0,IG1)=>{/*!
 * Module dependencies.
 */var FJ0=v0();class Kv extends FJ0{constructor($){let F=`Schema hasn't been registered for model "`+$+`".
Use mongoose.model(name, schema)`;super(F)}}Object.defineProperty(Kv.prototype,"name",{value:"MissingSchemaError"});/*!
 * exports
 */IG1.exports=Kv});var wv=O((Po0,jG1)=>{/*!
 * Module dependencies.
 */var AJ0=v0();class Bv extends AJ0{constructor($,F,A){let J=A?.matchedCount??0,X=A?.insertedCount??0,Y=F.map((Z)=>Z._id).join(", ");if(Y.length>100)Y=Y.slice(0,100)+"...";let W=F.length-J-X;super(`${$}.bulkSave() was not able to update ${W} of the given documents due to incorrect version or optimistic concurrency, document ids: ${Y}`);this.modelName=$,this.documents=F,this.bulkWriteResult=A,this.numDocumentsNotUpdated=W}}Object.defineProperty(Bv.prototype,"name",{value:"MongooseBulkSaveIncompleteError"});/*!
 * exports
 */jG1.exports=Bv});var SG1=O((Ro0,OG1)=>{var JJ0=F3();OG1.exports=function(F){if(JJ0(F)!=="TopologyDescription")return!1;let A=Array.from(F.servers.values());return A.length>0&&A.every((J)=>J.type==="Unknown")}});var kG1=O((Io0,_G1)=>{var XJ0=F3();_G1.exports=function(F){if(XJ0(F)!=="TopologyDescription")return!1;if(F.servers.size===0)return!1;for(let A of F.servers.values())if(A.host.endsWith(".mongodb.net")===!1||A.port!==27017)return!1;return!0}});var xG1=O((To0,bG1)=>{var YJ0=F3(),WJ0="Client network socket disconnected before secure TLS connection was established";bG1.exports=function(F){if(YJ0(F)!=="TopologyDescription")return!1;let A=Array.from(F.servers.values());return A.length>0&&A.every((J)=>J.error&&J.error.message.indexOf(WJ0)!==-1)}});var Lv=O((jo0,gG1)=>{/*!
 * Module dependencies.
 */var ZJ0=v0(),DJ0=SG1(),GJ0=kG1(),zJ0=xG1();/*!
 * ignore
 */var HJ0="Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/",UJ0="Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html";class qv extends ZJ0{assimilateError($){let F=$.reason;if(GJ0(F)&&DJ0(F)&&$.message.indexOf("bad auth")===-1&&$.message.indexOf("Authentication failed")===-1)this.message=HJ0;else if(zJ0(F))this.message=UJ0;else this.message=$.message;for(let J in $)if(J!=="name")this[J]=$[J];return this.cause=F,this}}Object.defineProperty(qv.prototype,"name",{value:"MongooseServerSelectionError"});gG1.exports=qv});var Vv=O((Oo0,fG1)=>{/*!
 * Module dependencies.
 */var QJ0=v0();class Ev extends QJ0{constructor($){let F="For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+$.join(`
  `)+`
Use Model.updateOne() to update these arrays instead. See https://mongoosejs.com/docs/faq.html#divergent-array-error for more information.`;super(F)}}Object.defineProperty(Ev.prototype,"name",{value:"DivergentArrayError"});/*!
 * exports
 */fG1.exports=Ev});var oX=O((So0,vG1)=>{/*!
 * Module dependencies.
 */var KJ0=v0();class Nv extends KJ0{constructor($,F,A){F=F||"Field `"+$+"` is not in schema and strict mode is set to throw.";super(F);this.isImmutableError=!!A,this.path=$}}Object.defineProperty(Nv.prototype,"name",{value:"StrictModeError"});vG1.exports=Nv});var Mv=O((_o0,yG1)=>{/*!
 * Module dependencies.
 */var BJ0=v0();class Cv extends BJ0{constructor($,F){F=F||"Cannot populate path `"+$+"` because it is not in your schema. Set the `strictPopulate` option to false to override.";super(F);this.path=$}}Object.defineProperty(Cv.prototype,"name",{value:"StrictPopulateError"});yG1.exports=Cv});var T7=O((uG1,hG1)=>{var s9=v0();/*!
 * Module exports.
 */hG1.exports=uG1=s9;s9.messages=zG1();s9.Messages=s9.messages;s9.CastError=N8();s9.DocumentNotFoundError=mC();s9.ValidationError=BZ();s9.ValidatorError=Zv();s9.VersionError=Gv();s9.ParallelSaveError=Hv();s9.OverwriteModelError=Qv();s9.MissingSchemaError=TG1();s9.MongooseBulkSaveIncompleteError=wv();s9.MongooseServerSelectionError=Lv();s9.DivergentArrayError=Vv();s9.StrictModeError=oX();s9.StrictPopulateError=Mv()});var j7=O((ko0,mG1)=>{mG1.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})});var _3=O((bo0,dG1)=>{var wJ0=W4();class C8{constructor($){if($==null)return this;Object.assign(this,wJ0($))}}var S3=j7();Object.defineProperty(C8.prototype,"type",S3);Object.defineProperty(C8.prototype,"validate",S3);Object.defineProperty(C8.prototype,"cast",S3);Object.defineProperty(C8.prototype,"required",S3);Object.defineProperty(C8.prototype,"default",S3);Object.defineProperty(C8.prototype,"ref",S3);Object.defineProperty(C8.prototype,"refPath",S3);Object.defineProperty(C8.prototype,"select",S3);Object.defineProperty(C8.prototype,"index",S3);Object.defineProperty(C8.prototype,"unique",S3);Object.defineProperty(C8.prototype,"immutable",S3);Object.defineProperty(C8.prototype,"sparse",S3);Object.defineProperty(C8.prototype,"text",S3);Object.defineProperty(C8.prototype,"transform",S3);dG1.exports=C8});var dC=O((xo0,Pz)=>{var qJ0=N8();Pz.exports=function(F,A){if(Pz.exports.convertToTrue.has(F))return!0;if(Pz.exports.convertToFalse.has(F))return!1;if(F==null)return F;throw new qJ0("boolean",F,A)};Pz.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]);Pz.exports.convertToFalse=new Set([!1,"false",0,"0","no"])});var cC=O((go0,cG1)=>{var LJ0=dC();/*!
 * ignore
 */cG1.exports=function($){let F=this?.path??null;return LJ0($,F)}});var Pv=O((fo0,lG1)=>{/*!
 * ignore
 */lG1.exports=function($){if(Array.isArray($)){if(!$.every((F)=>typeof F==="number"||typeof F==="string"))throw Error("$type array values must be strings or numbers");return $}if(typeof $!=="number"&&typeof $!=="string")throw Error("$type parameter must be number, string, or array of numbers and strings");return $}});var iG1=O((vo0,pG1)=>{var EJ0=oX();/*!
 * ignore
 */pG1.exports=function($){if($.$immutable)$.$immutableSetter=VJ0($.path,$.options.immutable),$.set($.$immutableSetter);else if($.$immutableSetter)$.setters=$.setters.filter((F)=>F!==$.$immutableSetter),delete $.$immutableSetter};function VJ0($,F){return function(J,X,Y,W){if(this==null||this.$__==null)return J;if(this.isNew)return J;if(W?.overwriteImmutable)return J;if(!(typeof F==="function"?F.call(this,this):F))return J;let D=this.$__.priorDoc!=null?this.$__.priorDoc.$__getValue($):this.$__getValue($);if(this.$__.strictMode==="throw"&&J!==D)throw new EJ0($,"Path `"+$+"` is immutable and strict mode is set to throw.",!0);return D}}});var rG1=O((yo0,nG1)=>{nG1.exports=function(F){return typeof F==="function"&&F.constructor&&F.constructor.name==="AsyncFunction"}});var tG1=O((uo0,aG1)=>{aG1.exports=function(F){let A=Object.keys(F),J=!0;for(let X=0,Y=A.length;X<Y;++X)if(typeof F[A[X]]==="object"&&F[A[X]]!==null){J=!1;break}return J}});var oG1=O((ho0,sG1)=>{sG1.exports=function(F){let A=[],J="",X="DEFAULT";for(let Y=0;Y<F.length;++Y){if(X==="IN_SQUARE_BRACKETS"&&!/\d/.test(F[Y])&&F[Y]!=="]")X="DEFAULT",J=A[A.length-1]+"["+J,A.splice(A.length-1,1);if(F[Y]==="["){if(X!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")A.push(J),J="";X="IN_SQUARE_BRACKETS"}else if(F[Y]==="]")if(X==="IN_SQUARE_BRACKETS")X="IMMEDIATELY_AFTER_SQUARE_BRACKETS",A.push(J),J="";else X="DEFAULT",J+=F[Y];else if(F[Y]==="."){if(X!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")A.push(J),J="";X="DEFAULT"}else J+=F[Y]}if(X!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")A.push(J);return A}});var Jz1=O((NJ0)=>{var fB=oG1(),$z1=["__proto__","constructor","prototype"];NJ0.get=function($,F,A,J){var X;if(typeof A=="function")if(A.length<2)J=A,A=void 0;else X=A,A=void 0;J||(J=Az1);var Y=typeof $=="string"?fB($):$;if(!Array.isArray(Y))throw TypeError("Invalid `path`. Must be either string or array");var W=F,Z;for(var D=0;D<Y.length;++D){if(Z=Y[D],typeof Y[D]!=="string"&&typeof Y[D]!=="number")throw TypeError("Each segment of path to `get()` must be a string or number, got "+typeof Y[D]);if(Array.isArray(W)&&!/^\d+$/.test(Z)){var G=Y.slice(D);return[].concat(W).map(function(H){return H?NJ0.get(G,H,A||X,J):J(void 0)})}if(X)W=X(W,Z);else{var z=A&&W[A]?W[A]:W;W=z instanceof Map?z.get(Z):z[Z]}if(!W)return J(W)}return J(W)};NJ0.has=function($,F){var A=typeof $==="string"?fB($):$;if(!Array.isArray(A))throw TypeError("Invalid `path`. Must be either string or array");var J=A.length,X=F;for(var Y=0;Y<J;++Y){if(typeof A[Y]!=="string"&&typeof A[Y]!=="number")throw TypeError("Each segment of path to `has()` must be a string or number, got "+typeof A[Y]);if(X==null||typeof X!=="object"||!(A[Y]in X))return!1;X=X[A[Y]]}return!0};NJ0.unset=function($,F){var A=typeof $==="string"?fB($):$;if(!Array.isArray(A))throw TypeError("Invalid `path`. Must be either string or array");var J=A.length,X=F;for(var Y=0;Y<J;++Y){if(X==null||typeof X!=="object"||!(A[Y]in X))return!1;if(typeof A[Y]!=="string"&&typeof A[Y]!=="number")throw TypeError("Each segment of path to `unset()` must be a string or number, got "+typeof A[Y]);if($z1.indexOf(A[Y])!==-1)return!1;if(Y===J-1)return delete X[A[Y]],!0;X=X instanceof Map?X.get(A[Y]):X[A[Y]]}return!0};NJ0.set=function($,F,A,J,X,Y){var W;if(typeof J=="function")if(J.length<2)X=J,J=void 0;else W=J,J=void 0;X||(X=Az1);var Z=typeof $=="string"?fB($):$;if(!Array.isArray(Z))throw TypeError("Invalid `path`. Must be either string or array");if(A==null)return;for(var D=0;D<Z.length;++D){if(typeof Z[D]!=="string"&&typeof Z[D]!=="number")throw TypeError("Each segment of path to `set()` must be a string or number, got "+typeof Z[D]);if($z1.indexOf(Z[D])!==-1)return}var G=Y||/\$/.test($)&&Y!==!1,z=A,H;for(var D=0,U=Z.length-1;D<U;++D){if(H=Z[D],H=="$")if(D==U-1)break;else continue;if(Array.isArray(z)&&!/^\d+$/.test(H)){var Q=Z.slice(D);if(!G&&Array.isArray(F))for(var B=0;B<z.length&&B<F.length;++B)NJ0.set(Q,F[B],z[B],J||W,X,G);else for(var B=0;B<z.length;++B)NJ0.set(Q,F,z[B],J||W,X,G);return}if(W)z=W(z,H);else{var q=J&&z[J]?z[J]:z;z=q instanceof Map?q.get(H):q[H]}if(!z)return}if(H=Z[U],J&&z[J])z=z[J];if(Array.isArray(z)&&!/^\d+$/.test(H))if(!G&&Array.isArray(F))Fz1(z,F,H,W,J,X);else for(var B=0;B<z.length;++B){var L=z[B];if(L)if(W)W(L,H,X(F));else{if(L[J])L=L[J];L[H]=X(F)}}else if(W)W(z,H,X(F));else if(z instanceof Map)z.set(H,X(F));else z[H]=X(F)};/*!
 * Split a string path into components delimited by '.' or
 * '[\d+]'
 *
 * #### Example:
 *     stringToParts('foo[0].bar.1'); // ['foo', '0', 'bar', '1']
 */NJ0.stringToParts=fB;/*!
 * Recursively set nested arrays
 */function Fz1($,F,A,J,X,Y){for(var W,Z=0;Z<$.length&&Z<F.length;++Z)if(W=$[Z],Array.isArray(W)&&Array.isArray(F[Z]))Fz1(W,F[Z],A,J,X,Y);else if(W)if(J)J(W,A,Y(F[Z]));else{if(W[X])W=W[X];W[A]=Y(F[Z])}}/*!
 * Returns the value passed to it.
 */function Az1($){return $}});var O7=O((Xz1,Yz1)=>{Yz1.exports=Xz1=Jz1()});var Iv=O((do0,Zz1)=>{var RJ0=W4();class Wz1{constructor($){if(this._docs={},this._childDocs=[],$==null)return;if($=RJ0($),Object.assign(this,$),typeof $.subPopulate==="object")this.populate=$.subPopulate;if($.perDocumentLimit!=null&&$.limit!=null)throw Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+$.path+"`.")}}Zz1.exports=Wz1});var Dz1=O((IJ0)=>{IJ0.isMongooseDocumentArray=function($){return Array.isArray($)&&$.isMongooseDocumentArray}});var lC=O((lo0,Gz1)=>{Gz1.exports=function(F,A,J){let X=Object.keys(A.tree),Y={};for(let W of X){if(J&&(F.paths[W]||F.nested[W]||F.singleNestedPaths[W]))continue;Y[W]=A.tree[W]}F.options._isMerging=!0,F.add(Y,null),delete F.options._isMerging,F.callQueue=F.callQueue.concat(A.callQueue),F.method(A.methods),F.static(A.statics);for(let[W,Z]of Object.entries(A._userProvidedOptions))if(!(W in F._userProvidedOptions))F.set(W,Z);for(let W in A.query)F.query[W]=A.query[W];for(let W in A.virtuals)F.virtuals[W]=A.virtuals[W].clone();F._indexes=F._indexes.concat(A._indexes||[]),F.s.hooks.merge(A.s.hooks,!1)}});var Uz1=O((zz1,Hz1)=>{/*!
 * Module dependencies.
 */var po0=Z0(),M5=Hz1.exports=zz1=function(){};M5.ctor=function(){let $=[...arguments],F=function(){M5.apply(this,arguments),this.paths={},this.states={}};return F.prototype=new M5,F.prototype.constructor=F,F.prototype.stateNames=$,$.forEach(function(A){F.prototype[A]=function(J){this._changeState(J,A)}}),F};M5.prototype._changeState=function(F,A){let J=this.paths[F];if(J===A)return;let X=this.states[J];if(X)delete X[F];this.paths[F]=A,this.states[A]=this.states[A]||{},this.states[A][F]=!0};/*!
 * ignore
 */M5.prototype.clear=function(F){if(this.states[F]==null)return;let A=Object.keys(this.states[F]),J=A.length,X;while(J--)X=A[J],delete this.states[F][X],delete this.paths[X]};/*!
 * ignore
 */M5.prototype.clearPath=function(F){let A=this.paths[F];if(!A)return;delete this.paths[F],delete this.states[A][F]};M5.prototype.getStatePaths=function(F){if(this.states[F]!=null)return this.states[F];return{}};M5.prototype.some=function(){let F=this,A=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(A,function(J){if(F.states[J]==null)return!1;return Object.keys(F.states[J]).length})};M5.prototype._iter=function(F){return function(){let A=[...arguments],J=A.pop();if(!A.length)A=this.stateNames;let X=this;return A.reduce(function(W,Z){if(X.states[Z]==null)return W;return W.concat(Object.keys(X.states[Z]))},[])[F](function(W,Z,D){return J(W,Z,D)})}};M5.prototype.forEach=function(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)};M5.prototype.map=function(){return this.map=this._iter("map"),this.map.apply(this,arguments)};M5.prototype.clone=function(){let F=new this.constructor;F.paths={...this.paths};for(let A of this.stateNames){if(!(A in this.states))continue;F.states[A]=this.states[A]==null?this.states[A]:{...this.states[A]}}return F}});var Bz1=O((Qz1,Kz1)=>{/*!
 * Dependencies
 */var jJ0=Uz1(),OJ0=jJ0.ctor("require","modify","init","default","ignore");Kz1.exports=Qz1=q4;function q4(){this.activePaths=new OJ0}q4.prototype.strictMode=!0;q4.prototype.fullPath=void 0;q4.prototype.selected=void 0;q4.prototype.shardval=void 0;q4.prototype.saveError=void 0;q4.prototype.validationError=void 0;q4.prototype.adhocPaths=void 0;q4.prototype.removing=void 0;q4.prototype.inserting=void 0;q4.prototype.saving=void 0;q4.prototype.version=void 0;q4.prototype._id=void 0;q4.prototype.ownerDocument=void 0;q4.prototype.populate=void 0;q4.prototype.populated=void 0;q4.prototype.primitiveAtomics=void 0;q4.prototype.wasPopulated=!1;q4.prototype.scope=void 0;q4.prototype.session=null;q4.prototype.pathsToScopes=null;q4.prototype.cachedRequired=null});var pC=O((io0,Lz1)=>{/*!
 * Module dependencies.
 */var Tv=w0().Binary,SJ0=w0().UUID,wz1=Z0();function A3($,F,A){let J=$;if($==null)J=0;let X,Y,W;if(Array.isArray(F))Y=F[0],W=F[1];else X=F;let Z;if(typeof J==="number"||J instanceof Number)Z=Buffer.alloc(J);else Z=Buffer.from(J,X,A);return wz1.decorate(Z,A3.mixin),Z.isMongooseBuffer=!0,Z[A3.pathSymbol]=Y,Z[qz1]=W,Z._subtype=0,Z}var _J0=Symbol.for("mongoose#Buffer#_path"),qz1=Symbol.for("mongoose#Buffer#_parent");A3.pathSymbol=_J0;/*!
 * Inherit from Buffer.
 */A3.mixin={_subtype:void 0,_markModified:function(){let $=this[qz1];if($)$.markModified(this[A3.pathSymbol]);return this},write:function(){let $=Buffer.prototype.write.apply(this,arguments);if($>0)this._markModified();return $},copy:function($){let F=Buffer.prototype.copy.apply(this,arguments);if($?.isMongooseBuffer)$._markModified();return F}};/*!
 * Compile other Buffer methods marking this buffer as modified.
 */wz1.each(["writeUInt8","writeUInt16","writeUInt32","writeInt8","writeInt16","writeInt32","writeFloat","writeDouble","fill","utf8Write","binaryWrite","asciiWrite","set","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE"],function($){if(!Buffer.prototype[$])return;A3.mixin[$]=function(){let F=Buffer.prototype[$].apply(this,arguments);return this._markModified(),F}});A3.mixin.toObject=function($){let F=typeof $==="number"?$:this._subtype||0;return new Tv(Buffer.from(this),F)};A3.mixin.$toObject=A3.mixin.toObject;A3.mixin.toBSON=function(){return new Tv(this,this._subtype||0)};A3.mixin.toUUID=function(){if(this._subtype!==4)throw Error("Cannot convert a Buffer with subtype "+this._subtype+" to a UUID");return new SJ0(this)};A3.mixin.equals=function($){if(!Buffer.isBuffer($))return!1;if(this.length!==$.length)return!1;for(let F=0;F<this.length;++F)if(this[F]!==$[F])return!1;return!0};A3.mixin.subtype=function($){if(typeof $!=="number")throw TypeError("Invalid subtype. Expected a number");if(this._subtype!==$)this._markModified();this._subtype=$};/*!
 * Module exports.
 */A3.Binary=Tv;Lz1.exports=A3});var wZ=O((kJ0)=>{kJ0.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed");kJ0.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")});var Rz=O((ro0,Vz1)=>{/*!
 * Module dependencies.
 */var iC=L4(),gJ0=wZ(),fJ0=UZ(),Ez1=Z0();function P5($,F,A,J){if(F?.default){let X=F.default;if(Array.isArray(X)&&X.length===0)F.default=Array;else if(!F.shared&&fJ0(X)&&Ez1.hasOwnKeys(X)===!1)F.default=function(){return{}}}iC.call(this,$,F,"Mixed",J),this[gJ0.schemaMixedSymbol]=!0}P5.schemaName="Mixed";P5.defaultOptions={};/*!
 * Inherits from SchemaType.
 */P5.prototype=Object.create(iC.prototype);P5.prototype.constructor=P5;P5.get=iC.get;P5.set=iC.set;P5.setters=[];P5.prototype.cast=function($){if($ instanceof Error)return Ez1.errorToPOJO($);return $};P5.prototype.castForQuery=function($,F){return F};P5.prototype.toJSONSchema=function(F){return{}};/*!
 * Module exports.
 */Vz1.exports=P5});var Cz1=O((ao0,Nz1)=>{Nz1.exports=class{constructor(F,A,J){this.subdocSnapshot=F,this.activePaths=A,this.version=J}}});var nC=O((to0,Mz1)=>{/*!
 * Module dependencies.
 */var vJ0=v0();class jv extends vJ0{constructor($,F){let A=Array.isArray(F)?"array":"primitive value";super("Tried to set nested object field `"+$+`\` to ${A} \``+F+"`");this.path=$}}Object.defineProperty(jv.prototype,"name",{value:"ObjectExpectedError"});Mz1.exports=jv});var rC=O((so0,Pz1)=>{/*!
 * Module dependencies.
 */var yJ0=v0();class Ov extends yJ0{constructor($,F,A){super('Parameter "'+F+'" to '+A+'() must be an object, got "'+($==null?$:$.toString())+'" (type '+typeof $+")")}}Object.defineProperty(Ov.prototype,"name",{value:"ObjectParameterError"});Pz1.exports=Ov});var Iz1=O((oo0,Rz1)=>{/*!
 * Module dependencies.
 */var uJ0=v0();class Sv extends uJ0{constructor($){super("Can't validate() the same doc multiple times in parallel. Document: "+$._doc._id)}}Object.defineProperty(Sv.prototype,"name",{value:"ParallelValidateError"});/*!
 * exports
 */Rz1.exports=Sv});var _v=O((eo0,Tz1)=>{Tz1.exports=function(F){let A={},J=Object.keys(F);for(let X of J){if(X.indexOf(".")===-1){A[X]=1;continue}let Y=X.split("."),W=Y[0];for(let Z=0;Z<Y.length;++Z)if(A[W]=1,Z+1<Y.length)W=W+"."+Y[Z+1]}return A}});var Oz1=O(($e0,jz1)=>{jz1.exports=function(F){if(F==null||typeof F!=="object")return!1;return F.$slice==null&&F.$elemMatch==null&&F.$meta==null&&F.$==null}});var aC=O((Fe0,Sz1)=>{var hJ0=Oz1();Sz1.exports=function(F,A,J,X,Y,W,Z){let D=Object.keys(F.$__schema.paths),G=D.length,z=Z?.skipParentChangeTracking;for(let H=0;H<G;++H){let U,Q="",B=D[H];if(B==="_id"&&F.$__.skipId)continue;let q=F.$__schema.paths[B],L=q.splitPath(),E=L.length;if(L[E-1]==="$*")continue;let V=!1,R=F._doc;for(let N=0;N<E;++N){if(R==null)break;let S=L[N];if(Q+=(!Q.length?"":".")+S,J===!0){if(Q in A)break}else if(J===!1&&A&&!V){let C=q.$isSingleNested||q.$isMongooseDocumentArray;if(Q in A&&!hJ0(A[Q])||N===E-1&&C&&X!=null&&X[Q])V=!0;else if(X!=null&&!X[Q])break}if(N===E-1){if(R[S]!==void 0)break;if(Y!=null){if(typeof q.defaultValue==="function"){if(!q.defaultValue.$runBeforeSetters&&Y)break;if(q.defaultValue.$runBeforeSetters&&!Y)break}else if(!Y)continue}if(W&&W[Q])break;if(A&&J!==null){if(J===!0){if(B in A)continue;try{U=q.getDefault(F,!1)}catch(C){F.invalidate(B,C);break}if(typeof U<"u")R[S]=U,kv(F,B,z)}else if(V){try{U=q.getDefault(F,!1)}catch(C){F.invalidate(B,C);break}if(typeof U<"u")R[S]=U,kv(F,B,z)}}else{try{U=q.getDefault(F,!1)}catch(C){F.invalidate(B,C);break}if(typeof U<"u")R[S]=U,kv(F,B,z)}}else R=R[S]}}};/*!
 * ignore
 */function kv($,F,A){if($.$__.activePaths.default(F),!A&&$.$isSubdocument&&$.$isSingleNested&&$.$parent()!=null)$.$parent().$__.activePaths.default($.$__pathRelativeToParent(F))}});var tC=O((Ae0,kz1)=>{/*!
 * ignore
 */kz1.exports=function(F,A,J){J=J||{};let X=J.skipDocArrays,Y=0;if(!F)return Y;for(let W of Object.keys(F.$__.activePaths.getStatePaths("modify"))){if(X){if(F.$__schema.path(W)?.$isMongooseDocumentArray)continue}if(W.startsWith(A+".")){if(F.$__.activePaths.clearPath(W),++Y,F.$isSubdocument)_z1(F,W)}}return Y};function _z1($,F,A=new Set){if(A.has($))throw Error("Infinite subdocument loop: subdoc with _id "+$._id+" is a parent of itself");let J=$.$parent(),X=$.$__pathRelativeToParent(void 0,!1)+"."+F;if(J.$__.activePaths.clearPath(X),J.$isSubdocument)_z1(J,X,A)}});var oC=O((rJ0)=>{var mJ0=W4(),dJ0=s1().documentSchemaSymbol,cJ0=V$().internalToObjectOptions,xz1=Z0(),Iz,lJ0=s1().getSymbol,sC=s1().scopeSymbol,bz1=xz1.isPOJO;/*!
 * exports
 */rJ0.compile=gz1;rJ0.defineKey=fz1;var pJ0=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),iJ0=Object.freeze({noDottedPath:!0});function gz1($,F,A,J){Iz=Iz||pF();let X=J.typeKey;for(let Y of Object.keys($)){let W=$[Y],D=bz1(W)&&xz1.hasOwnKeys(W)&&(!W[X]||X==="type"&&bz1(W.type)&&W.type.type)?W:null;fz1({prop:Y,subprops:D,prototype:F,prefix:A,options:J})}}function fz1({prop:$,subprops:F,prototype:A,prefix:J,options:X}){Iz=Iz||pF();let Y=(J?J+".":"")+$;J=J||"";let W=J?Object.freeze({}):iJ0;if(F)Object.defineProperty(A,$,{enumerable:!0,configurable:!0,get:function(){if(!this.$__)return;let Z=this;if(!this.$__.getters)this.$__.getters={};if(!this.$__.getters[Y]){let D=Object.create(Iz.prototype,nJ0(this));if(!J)D.$__[sC]=this;D.$__.nestedPath=Y,Object.defineProperty(D,"schema",{enumerable:!1,configurable:!0,writable:!1,value:A.schema}),Object.defineProperty(D,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:A.schema}),Object.defineProperty(D,dJ0,{enumerable:!1,configurable:!0,writable:!1,value:A.schema}),Object.defineProperty(D,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return mJ0(Z.get(Y,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty(D,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Z.get(Y,null,{virtuals:this?.schema?.options?.toObject?.virtuals||null})}}),Object.defineProperty(D,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Z.get(Y,null,{virtuals:this?.schema?.options?.toJSON?.virtuals||null})}}),Object.defineProperty(D,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty(D,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Object.keys(this.get(Y,null,pJ0)||{}).length===0}}),Object.defineProperty(D,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),gz1(F,D,Y,X),this.$__.getters[Y]=D}return this.$__.getters[Y]},set:function(Z){if(Z?.$__isNested)Z=Z.$__get();else if(Z instanceof Iz&&!Z.$__isNested)Z=Z.$toObject(cJ0);(this.$__[sC]||this).$set(Y,Z)}});else Object.defineProperty(A,$,{enumerable:!0,configurable:!0,get:function(){return this[lJ0].call(this.$__[sC]||this,Y,null,W)},set:function(Z){this.$set.call(this.$__[sC]||this,Y,Z)}})}function nJ0($){let F={};return Object.getOwnPropertyNames($).forEach(function(A){if(["isNew","$__","$errors","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf(A)===-1)return;F[A]=Object.getOwnPropertyDescriptor($,A),F[A].enumerable=!1}),F}});var yz1=O((Xe0,vz1)=>{vz1.exports=function(F){if(F==null)return null;return Object.keys(F)[0]}});var eC=O(($X0)=>{/*!
 * Module dependencies.
 */var sJ0=w0().Binary,uz1=t9(),hz1=bB(),oJ0=T7(),eJ0=Z1("util");$X0.flatten=mz1;$X0.modifiedPaths=dz1;/*!
 * ignore
 */function mz1($,F,A,J){let X;if($&&hz1($)&&!Buffer.isBuffer($))X=Object.keys($.toObject({transform:!1,virtuals:!1})||{});else X=Object.keys($||{});let Y=X.length,W={};F=F?F+".":"";for(let Z=0;Z<Y;++Z){let D=X[Z],G=$[D];W[F+D]=G;let z=J?.path?.(F+D),H=J?.nested?.[F+D];if(z?.instance==="Mixed")continue;if(cz1(G)){if(A?.skipArrays&&Array.isArray(G))continue;let U=mz1(G,F+D,A,J);for(let Q in U)W[Q]=U[Q];if(Array.isArray(G))W[F+D]=G}if(H){let U=Object.keys(J.paths);for(let Q of U)if(Q.startsWith(F+D+".")&&!Object.hasOwn(W,Q))W[Q]=void 0}}return W}/*!
 * ignore
 */function dz1($,F,A,J=null){if($==null||typeof $!=="object")return;if(J==null)J={raw:{update:$,path:F},trace:new WeakSet};if(J.trace.has($))throw new oJ0(`a circular reference in the update value, updateValue:
${eJ0.inspect(J.raw.update,{showHidden:!1,depth:1})}
updatePath: '${J.raw.path}'`);J.trace.add($);let X=Object.keys($||{}),Y=X.length;A=A||{},F=F?F+".":"";for(let W=0;W<Y;++W){let Z=X[W],D=$[Z],G=F+Z;if(A[G]=!0,!Buffer.isBuffer(D)&&hz1(D))D=D.toObject({transform:!1,virtuals:!1});if(cz1(D))dz1(D,F+Z,A,J)}return J.trace.delete($),A}/*!
 * ignore
 */function cz1($){return $&&typeof $==="object"&&!($ instanceof Date)&&!uz1($,"ObjectId")&&(!Array.isArray($)||$.length!==0)&&!($ instanceof Buffer)&&!uz1($,"Decimal128")&&!($ instanceof sJ0)}});var E4=O((We0,lz1)=>{lz1.exports=function(F,A,J){let X,Y=!1;if(typeof A==="string"){if(A.indexOf(".")===-1){let D=bv(F,A);if(D==null)return J;return D}X=A.split(".")}else if(Y=!0,X=A,X.length===1){let D=bv(F,X[0]);if(D==null)return J;return D}let W=A,Z=F;for(let D of X){if(Z==null)return J;if(!Y&&Z[W]!=null)return Z[W];if(Z=bv(Z,D),!Y)W=W.substr(D.length+1)}return Z==null?J:Z};function bv($,F){if($==null)return $;if($ instanceof Map)return $.get(F);return $[F]}});var xv=O((Ze0,iz1)=>{var pz1=t9();iz1.exports=function(F,A){if(typeof F==="string"&&typeof A==="string")return F===A;if(typeof F==="number"&&typeof A==="number")return F===A;if(pz1(F,"ObjectId")&&pz1(A,"ObjectId"))return F.toString()===A.toString();return!1}});var $M=O((De0,nz1)=>{var JX0=xv();nz1.exports=function(F,A){if(F?.discriminators==null)return null;for(let J of Object.keys(F.discriminators)){let X=F.discriminators[J];if(X.discriminatorMapping==null)continue;if(JX0(X.discriminatorMapping.value,A))return X}return null}});var az1=O((Ge0,rz1)=>{var XX0=E4(),YX0=$M();rz1.exports=function $(F,A,J){J=J||{};let X=J.typeOnly,Y=Array.isArray(A)?A:A.indexOf(".")===-1?[A]:A.split("."),W=null,Z="adhocOrUndefined",D=YX0(F.schema,F.get(F.schema.options.discriminatorKey))||F.schema;for(let G=0;G<Y.length;++G){let z=Y.slice(0,G+1).join(".");if(W=D.path(z),W==null){Z="adhocOrUndefined";continue}if(W.instance==="Mixed")return X?"real":W;if(Z=D.pathType(z),(W.$isSingleNested||W.$isMongooseDocumentArrayElement)&&W.schema.discriminators!=null){let H=W.schema.discriminators,U=F.get(z+"."+XX0(W,"schema.options.discriminatorKey"));if(U==null||H[U]==null)continue;let Q=Y.slice(G+1).join(".");return $(F.get(z),Q,J)}}return X?Z:W}});var sz1=O((ze0,tz1)=>{var WX0=E4();tz1.exports=function(F,A,J){let X=J!=null?Object.keys(WX0(F.tree,J,{})):Object.keys(F.tree),Y=new Set(Object.keys(A)),W;if(Y.size>1){W=new Set;for(let Z of X)if(Y.has(Z))W.add(Z);for(let Z of Y)if(!W.has(Z))W.add(Z);W=Array.from(W)}else W=Array.from(Y);return W}});var ez1=O((He0,oz1)=>{oz1.exports=function(F,A){if(A.length===1)return;let J=A[0],X=void 0;for(let Y=0;Y<A.length-1;++Y){let W=F.path(J);if(W?.schema)X=W.schema.options.strict,F=W.schema,J=W.$isMongooseDocumentArray&&!isNaN(A[Y+1])?"":A[Y+1];else J+=J.length?"."+A[Y+1]:A[Y+1]}return X}});var FM=O((Ue0,$H1)=>{var ZX0=Z0(),DX0=new Set(["__index","__parentArray","_doc"]);$H1.exports=function(F,A){if(ZX0.isPOJO(F)&&F.$__!=null&&F._doc!=null){if(A){let J={};for(let X of Object.keys(F)){if(typeof X==="symbol")continue;if(X[0]==="$")continue;if(DX0.has(X))continue;J[X]=F[X]}return{...F._doc,...J}}return F._doc}return F}});var Tz=O((Qe0,FH1)=>{/*!
 * ignore
 */FH1.exports=function(F){if(F==null)return!0;if(typeof F==="object")return!("$meta"in F)&&!("$slice"in F);return!0}});var jz=O((Ke0,AH1)=>{var GX0=Tz(),zX0=Nz();/*!
 * ignore
 */AH1.exports=function $(F){if(F==null)return null;let A=Object.keys(F),J=null;if(A.length===1&&A[0]==="_id")J=!F._id;else for(let X=0;X<A.length;++X){let Y=A[X];if(Y!=="_id"&&GX0(F[Y])){if(J=zX0(F[Y])?$(F[Y])??J:!F[Y],J!=null)break}}return J}});var gv=O((Be0,JH1)=>{var HX0=Tz();JH1.exports=function(F,A){if(F==null)return!1;if(A==="_id")return F._id===0;let J=Object.keys(F),X=null;for(let Y of J)if(HX0(F[Y])){X=F[A]===1?"inclusive":"exclusive";break}if(X==="inclusive")return F[A]!==1;if(X==="exclusive")return F[A]===0;return!1}});var fv=O((we0,XH1)=>{var UX0=Z0();XH1.exports=function(F,A){if(F._doc._id==null||A==null||A.length===0)return;let J=String(F._doc._id);for(let X of A){if(X.isVirtual)continue;let W=X.path.split(".");for(let Z=0;Z<W.length-1;++Z){let D=W.slice(0,Z+1).join("."),G=W.slice(Z+1).join("."),z=F.get(D);if(z==null)continue;if(UX0.isMongooseDocumentArray(z)){for(let H=0;H<z.length;++H)if(z[H])z[H].populated(G,X._docs[J]==null?void 0:X._docs[J][H],X);break}}}}});var vv=O((qe0,WH1)=>{var{isPOJO:QX0}=Z0();WH1.exports=YH1;function YH1($){let F=Object.keys($),A=F.length,J,X,Y;while(A--){if(X=F[A],Y=$[X],QX0(Y))$[X]=YH1(Y);if($[X]===void 0){delete $[X];continue}J=!0}return J?$:void 0}});var yv=O((Le0,ZH1)=>{var KX0=/\./g;ZH1.exports=function(F){if(F.indexOf(".")===-1)return[F];let A=F.split(KX0),J=A.length,X=Array(J),Y="";for(let W=0;W<J;++W)Y+=Y.length!==0?"."+A[W]:A[W],X[W]=Y;return X}});var GH1=O((Ee0,DH1)=>{DH1.exports=function(F,A,J,X,Y){let W=Object.keys(F).reduce((D,G)=>D||G.startsWith(A+"."),!1),Z=A+"."+J.options.discriminatorKey;if(!W&&Y.length===1&&Y[0]===Z)X.splice(X.indexOf(Z),1)}});var R5=O((Ve0,zH1)=>{var BX0=xv();zH1.exports=function(F,A){if(F==null)return null;for(let J of Object.keys(F)){let X=F[J];if(X.schema&&X.schema.discriminatorMapping&&BX0(X.schema.discriminatorMapping.value,A))return X}return null}});var AM=O((Ne0,HH1)=>{/*!
 * ignore
 */HH1.exports=function(F,A){let J=A.split("."),X="",Y,W,Z;for(let D=0;D<J.length;++D)if(X+=X.length?".":""+J[D],F[X]){W=Object.keys(F),Z=W.length;for(Y=0;Y<Z;++Y)if(W[D].indexOf(X+".")===0&&W[D].indexOf(A)!==0)continue;return!0}return!1}});var vB=O((CX0)=>{/*!
 * Module dependencies
 */var UH1=Iv(),wX0=GH1(),QH1=E4(),qX0=R5(),LX0=Tz(),EX0=W4(),VX0=AM();CX0.preparePopulationOptionsMQ=function(F,A){let J=F._mongooseOptions.populate,X=Object.keys(J).reduce((Z,D)=>Z.concat([J[D]]),[]);if(A.lean!=null)X.filter((Z)=>Z?.options?.lean==null).forEach(NX0(A.lean));let Y=F?.options?.session||null;if(Y!=null)X.forEach((Z)=>{if(Z.options==null){Z.options={session:Y};return}if(!("session"in Z.options))Z.options.session=Y});let W=F._fieldsForExec();for(let Z=0;Z<X.length;++Z)if(X[Z]instanceof UH1)X[Z]=new UH1({...X[Z],_queryProjection:W,_localModel:F.model});else X[Z]._queryProjection=W,X[Z]._localModel=F.model;return X};CX0.createModel=function(F,A,J,X,Y){F.hooks.execPreSync("createModel",A);let W=F.schema?F.schema.discriminatorMapping:null,Z=W?.isRoot?W.key:null,D=A[Z];if(Z&&D&&F.discriminators){let z=F.discriminators[D]||qX0(F.discriminators,D);if(z){let H=EX0(X);return CX0.applyPaths(H,z.schema),new z(void 0,H,{skipId:!0})}}let G={skipId:!0,isNew:!1,willInit:!0};if(Y!=null&&"defaults"in Y)G.defaults=Y.defaults;return new F(void 0,J,G)};/*!
 * ignore
 */CX0.createModelAndInit=function(F,A,J,X,Y,W,Z){let D=W?{populated:W}:void 0,G=CX0.createModel(F,A,J,X,Y);try{G.$init(A,D,Z)}catch(z){Z(z,G)}};/*!
 * ignore
 */CX0.applyPaths=function(F,A,J){let X,Y,W=new Set;if(F){Y=Object.keys(F);let U=[];for(let Q=0;Q<Y.length;++Q){let B=Y[Q];if(Y[Q][0]!=="-")continue;if(delete F[B],B==="-_id")F._id=0;else U.push(B.slice(1))}Y=Object.keys(F);for(let Q=0;Q<Y.length;++Q){if(Y[Q][0]==="+")continue;let B=F[Y[Q]];if(!LX0(B))continue;if(Y[Q]==="_id"&&Y.length>1)continue;if(Y[Q]===A.options.discriminatorKey&&Y.length>1&&B!=null&&!B)continue;X=!B;break}for(let Q of U){let B=A.path(Q);if(!B?.selected||X!==!1)F[Q]=0,X=!0;else if(B?.selected&&X===!1)W.add(Q)}}let Z=[],D=[],G=[];switch(z(A),X){case!0:for(let U of D)F[U]=0;break;case!1:if(A?.paths._id?.options?.select===!1)F._id=0;for(let U of Z){if(W.has(U))continue;if(VX0(F,U))continue;F[U]=F[U]||1}break;case void 0:if(F==null)break;for(let U of Object.keys(F||{}))if(U.startsWith("+"))delete F[U];for(let U of D){if(F[U]!=null)continue;F[U]=0}break}function z(U,Q){if(Q||(Q=""),G.indexOf(U)!==-1)return[];G.push(U);let B=[];return U.eachPath(function(q,L){if(Q)q=Q+"."+q;if(L.$isSchemaMap||q.endsWith(".$*")){let V="+"+q,R=F&&V in F;if(L.options?.select===!1&&!R)D.push(q);return}let E=H(q,L);if(E==null&&!Array.isArray(L)&&L.$isMongooseArray&&!L.$isMongooseDocumentArray)E=H(q,L.embeddedSchemaType);if(E!=null)B.push(E);if(L.schema){let V=z(L.schema,q);if(X===!1)wX0(F,q,L.schema,Z,V)}}),G.pop(),B}function H(U,Q){if(F==null)return;if(typeof Q.selected!=="boolean")return;if(Q.selected===!1&&F[U]){if(J)F[U]=0;return}if(!X&&Q.selected&&U===A.options.discriminatorKey&&F[U]!=null&&!F[U]){delete F[U];return}if(X===!1&&Q.selected&&F[U]!=null&&!F[U]){delete F[U];return}let B="+"+U;if(F&&B in F){if(delete F[B],X===!1&&Y.length>1&&!~Y.indexOf(U)&&!J)F[U]=1;else if(X==null&&J&&Q.selected===!1)F[U]=0;return}let L=U.split("."),E="";for(let V=0;V<L.length;++V)if(E+=E.length?"."+L[V]:L[V],D.indexOf(E)!==-1)return;if(!X&&(Q?.options?.$skipDiscriminatorCheck||!1)){let V="";for(let R=0;R<L.length;++R){V+=(V.length===0?"":".")+L[R];let N=QH1(F,V,!1)||QH1(F,V+".$",!1);if(N&&typeof N!=="object")return}}return(Q.selected?Z:D).push(U),U}};function NX0($){return function(F){if(F.options||(F.options={}),Array.isArray($?.virtuals))$=Object.assign({},$),$.virtuals=$.virtuals.filter((A)=>typeof A==="string"&&A.startsWith(F.path+".")).map((A)=>A.slice(F.path.length+1));F.options.lean=$}}});var uv=O((Me0,BH1)=>{function IX0($){return!!$&&(typeof $==="object"||typeof $==="function")&&typeof $.then==="function"}BH1.exports=IX0});var qH1=O((Pe0,wH1)=>{wH1.exports=function(F,A,J){let X=A[0],Y=J,W=F;for(let Z=0;Z<A.length-1;++Z){let D=Y.path(X);if(D?.schema){let G=W.get(X);if(Y=D.schema,X=A[Z+1],Array.isArray(G)&&!isNaN(X))G=G[X],X="";if(G==null)break;W=G}else X+=X.length?"."+A[Z+1]:A[Z+1]}return W}});var JM=O((Re0,VH1)=>{var AJ=pF(),TX0=V$().internalToObjectOptions,LH1=Z1("util"),EH1=Z0();VH1.exports=J2;function J2($,F,A,J){if(A!=null){let Y={isNew:A.isNew};if("defaults"in A.$__)Y.defaults=A.$__.defaults;J=Object.assign(Y,J)}if(J?.path!=null)this.$basePath=J.path;if(J?.pathRelativeToParent!=null)this.$pathRelativeToParent=J.pathRelativeToParent;let X=J;if(J?.path!=null)X=Object.assign({},J),delete X.path;AJ.call(this,$,F,X),delete this.$__.priorDoc}J2.prototype=Object.create(AJ.prototype);Object.defineProperty(J2.prototype,"$isSubdocument",{configurable:!1,writable:!1,value:!0});Object.defineProperty(J2.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!0});/*!
 * ignore
 */J2.prototype.toBSON=function(){return this.toObject(TX0)};J2.prototype.save=async function(F){if(F=F||{},!F.suppressWarning)EH1.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app.");return await this.$__save()};J2.prototype.$__fullPath=function($){if(!this.$__.fullPath)this.ownerDocument();return $?this.$__.fullPath+"."+$:this.$__.fullPath};J2.prototype.$__pathRelativeToParent=function($){if(this.$pathRelativeToParent!=null)return $==null?this.$pathRelativeToParent:this.$pathRelativeToParent+"."+$;if($==null)return this.$basePath;if(!this.$basePath)return $;return[this.$basePath,$].join(".")};J2.prototype.$__save=async function(){try{await this._execDocumentPreHooks("save")}catch(F){await this._execDocumentPostHooks("save",F);return}await this._execDocumentPostHooks("save")};/*!
 * ignore
 */J2.prototype.$isValid=function($){let F=this.$parent(),A=this.$__pathRelativeToParent($);if(F!=null&&A!=null)return F.$isValid(A);return AJ.prototype.$isValid.call(this,$)};/*!
 * ignore
 */J2.prototype.markModified=function($){AJ.prototype.markModified.call(this,$);let F=this.$parent();if(F==null)return;let A=this.$__pathRelativeToParent($);if(A==null)return;let J=this.$__pathRelativeToParent().replace(/\.$/,"");if(F.isDirectModified(J)||this.isNew)return;this.$__parent.markModified(A,this)};/*!
 * ignore
 */J2.prototype.isModified=function($,F,A){let J=this.$parent();if(J!=null){if(Array.isArray($)||typeof $==="string")$=Array.isArray($)?$:$.split(" "),$=$.map((X)=>this.$__pathRelativeToParent(X)).filter((X)=>X!=null);else if(!$)$=this.$__pathRelativeToParent();return J.$isModified($,F,A)}return AJ.prototype.isModified.call(this,$,F,A)};J2.prototype.$markValid=function($){AJ.prototype.$markValid.call(this,$);let F=this.$parent(),A=this.$__pathRelativeToParent($);if(F!=null&&A!=null)F.$markValid(A)};/*!
 * ignore
 */J2.prototype.invalidate=function($,F,A){AJ.prototype.invalidate.call(this,$,F,A);let J=this.$parent(),X=this.$__pathRelativeToParent($);if(J!=null&&X!=null)J.invalidate(X,F,A);else if(F.kind==="cast"||F.name==="CastError"||X==null)throw F;return this.ownerDocument().$__.validationError};/*!
 * ignore
 */J2.prototype.$ignore=function($){AJ.prototype.$ignore.call(this,$);let F=this.$parent(),A=this.$__pathRelativeToParent($);if(F!=null&&A!=null)F.$ignore(A)};J2.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let $=this,F=[],A=new Set([$]);while(!0){if(typeof $.$__pathRelativeToParent!=="function")break;F.unshift($.$__pathRelativeToParent(void 0,!0));let J=$.$parent();if(J==null)break;if($=J,A.has($))throw Error("Infinite subdocument loop: subdoc with _id "+$._id+" is a parent of itself");A.add($)}return this.$__.fullPath=F.join("."),this.$__.ownerDocument=$,this.$__.ownerDocument};/*!
 * ignore
 */J2.prototype.$__fullPathWithIndexes=function(){let $=this,F=[],A=new Set([$]);while(!0){if(typeof $.$__pathRelativeToParent!=="function")break;F.unshift($.$__pathRelativeToParent(void 0,!1));let J=$.$parent();if(J==null)break;if($=J,A.has($))throw Error("Infinite subdocument loop: subdoc with _id "+$._id+" is a parent of itself");A.add($)}return F.join(".")};J2.prototype.parent=function(){return this.$__parent};J2.prototype.$parent=J2.prototype.parent;/*!
 * Sets this sub-documents parent document.
 *
 * @api private
 */J2.prototype.$__setParent=function(F){this.$__parent=F};J2.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)};J2.prototype.deleteOne=function(F){if(jX0(this),!F?.noop){this.$__removeFromParent();let A=this.ownerDocument();A.$__.removedSubdocs=A.$__.removedSubdocs||[],A.$__.removedSubdocs.push(this)}};/*!
 * ignore
 */J2.prototype.populate=function(){throw Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')};J2.prototype.inspect=function(){return this.toObject()};if(LH1.inspect.custom)J2.prototype[LH1.inspect.custom]=J2.prototype.inspect;J2.prototype.$toObject=function(F,A){let J=AJ.prototype.$toObject.call(this,F,A);if(EH1.hasOwnKeys(J)===!1&&F?._calledWithOptions!=null){if((F._calledWithOptions?.minimize??this?.$__schemaTypeOptions?.minimize??F.minimize)&&!this.constructor.$__required)return}return J};function jX0($){let F=$.ownerDocument();function A(){F.$removeListener("save",A),F.$removeListener("deleteOne",A),$.emit("deleteOne",$),$.constructor.emit("deleteOne",$)}F.$on("save",A),F.$on("deleteOne",A)}});var Sz=O((Ie0,MH1)=>{/*!
 * Module dependencies.
 */var NH1=Z1("events").EventEmitter,CH1=JM(),OX0=Z0(),Oz=s1().documentArrayParent;function J3($,F,A,J,X){if(OX0.isMongooseDocumentArray(F))this.__parentArray=F,this[Oz]=F.$parent();else this.__parentArray=void 0,this[Oz]=void 0;this.$setIndex(X),this.$__parent=this[Oz];let Y;if(typeof A==="object"&&A!=null)Y={isNew:!0,...A},A=void 0;else Y={isNew:!0};CH1.call(this,$,J,this[Oz],Y)}/*!
 * Inherit from Subdocument
 */J3.prototype=Object.create(CH1.prototype);J3.prototype.constructor=J3;Object.defineProperty(J3.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!1});Object.defineProperty(J3.prototype,"$isDocumentArrayElement",{configurable:!1,writable:!1,value:!0});for(let $ in NH1.prototype)J3[$]=NH1.prototype[$];/*!
 * ignore
 */J3.prototype.$setIndex=function($){if(this.__index=$,this.$__?.validationError!=null){let F=Object.keys(this.$__.validationError.errors);for(let A of F)this.invalidate(A,this.$__.validationError.errors[A])}};/*!
 * ignore
 */J3.prototype.populate=function(){throw Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')};/*!
 * ignore
 */J3.prototype.$__removeFromParent=function(){let $=this._doc._id;if(!$)throw Error("For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id");this.__parentArray.pull({_id:$})};J3.prototype.$__fullPath=function($,F){if(this.__index==null)return null;if(!this.$__.fullPath)this.ownerDocument();if(F)return $?this.$__.fullPath+"."+$:this.$__.fullPath;return $?this.$__.fullPath+"."+this.__index+"."+$:this.$__.fullPath+"."+this.__index};J3.prototype.$__pathRelativeToParent=function($,F){if(this.__index==null||!this.__parentArray?.$path)return null;if(F)return $==null?this.__parentArray.$path():this.__parentArray.$path()+"."+$;if($==null)return this.__parentArray.$path()+"."+this.__index;return this.__parentArray.$path()+"."+this.__index+"."+$};J3.prototype.$parent=function(){return this[Oz]};/*!
 * Sets this sub-documents parent document.
 *
 * @api private
 */J3.prototype.$__setParent=function(F){this[Oz]=F};J3.prototype.parentArray=function(){return this.__parentArray};/*!
 * Module exports.
 */MH1.exports=J3});var WM=O((Te0,_H1)=>{var dv=pF(),hv=Sz(),SX0=v0(),PH1=tC(),_X0=W4(),RH1=V$().internalToObjectOptions,jH1=O7(),N9=Z0(),mv=t9(),kX0=s1().arrayAtomicsBackupSymbol,C$=s1().arrayAtomicsSymbol,eX=s1().arrayParentSymbol,$Y=s1().arrayPathSymbol,JJ=s1().arraySchemaSymbol,OH1=s1().populateModelSymbol,bX0=Symbol("mongoose#Array#sliced"),IH1=Array.prototype.push;/*!
 * ignore
 */var YM={$__getAtomics(){let $=[],F=Object.keys(this[C$]||{}),A=F.length,J=Object.assign({},RH1,{_isNested:!0});if(A===0)return $[0]=["$set",this.toObject(J)],$;while(A--){let X=F[A],Y=this[C$][X];if(N9.isMongooseObject(Y))Y=Y.toObject(J);else if(Array.isArray(Y))Y=this.toObject.call(Y,J);else if(Array.isArray(Y?.$each))Y.$each=this.toObject.call(Y.$each,J);else if(typeof Y?.valueOf==="function")Y=Y.valueOf();if(X==="$addToSet")Y={$each:Y};$.push([X,Y])}return $},getAtomics(){return this.$__getAtomics()},clearAtomics(){this[kX0]=this[C$],this[C$]={}},$atomics(){/*!
   * ignore
   */return this[C$]},$parent(){/*!
   * ignore
   */return this[eX]},$path(){/*!
   * ignore
   */return this[$Y]},$schemaType(){/*!
   * ignore
   */return this[JJ]},$shift(){this._registerAtomic("$pop",-1),this._markModified();let $=this.__array;if($._shifted)return;return $._shifted=!0,[].shift.call($)},$pop(){if(this._registerAtomic("$pop",1),this._markModified(),this._popped)return;return this._popped=!0,[].pop.call(this)},$schema(){/*!
   * ignore
   */return this[JJ]},_cast($){let F=!1,A,J=this[eX];if(J)F=J.$populated(this[$Y],!0);if(F&&$!=null){if(A=F.options[OH1],A==null)throw new SX0("No populated model found for path `"+this[$Y]+"`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.");if(Buffer.isBuffer($)||mv($,"ObjectId")||!N9.isObject($))$={_id:$};if($.schema?.discriminatorMapping?.key===void 0)$=new A($);return this[JJ].embeddedSchemaType.applySetters($,J,!0)}return this[JJ].embeddedSchemaType.applySetters($,J,!1)},_mapCast($,F){return this._cast($,this.length+F)},_markModified($){let F=this[eX],A;if(F){if(A=this[$Y],arguments.length)A=A+"."+$;if(A!=null&&A.endsWith(".$"))return this;F.markModified(A,arguments.length!==0?$:F)}return this},_registerAtomic($,F){if(this[bX0])return;if($==="$set")return this[C$]={$set:F},PH1(this[eX],this[$Y]),this._markModified(),this;let A=this[C$];if($==="$pop"&&!("$pop"in A)){let X=this;this[eX].once("save",function(){X._popped=X._shifted=null})}if(A.$set||N9.hasOwnKeys(A)&&!($ in A))return this[C$]={$set:this},this;let J;if($==="$pullAll"||$==="$addToSet")A[$]||(A[$]=[]),A[$]=A[$].concat(F);else if($==="$pullDocs"){let X=A.$pull||(A.$pull={});if(F[0]instanceof hv)J=X.$or||(X.$or=[]),Array.prototype.push.apply(J,F.map((Y)=>{return Y.toObject({transform:(W,Z)=>{if(Y==null||Y.$__==null)return Z;return Object.keys(Y.$__.activePaths.getStatePaths("default")).forEach((D)=>{jH1.unset(D,Z),SH1(Z,D)}),Z},virtuals:!1})}));else J=X._id||(X._id={$in:[]}),J.$in=J.$in.concat(F)}else if($==="$push")if(A.$push=A.$push||{$each:[]},F!=null&&N9.hasUserDefinedProperty(F,"$each"))A.$push=F;else if(F.length===1)A.$push.$each.push(F[0]);else if(F.length<1e4)A.$push.$each.push(...F);else for(let X of F)A.$push.$each.push(X);else A[$]=F;return this},addToSet(){XM(this,arguments),TH1(this,arguments);let $=[].map.call(arguments,this._mapCast,this),F=[],A="";if($[0]instanceof hv)A="doc";else if($[0]instanceof Date)A="date";else if(mv($[0],"ObjectId"))A="ObjectId";let J=N9.isMongooseArray($)?$.__array:$,X=N9.isMongooseArray(this)?this.__array:this;return J.forEach(function(Y){let W,Z=+Y;switch(A){case"doc":W=this.some(function(D){return D.equals(Y)});break;case"date":W=this.some(function(D){return+D===Z});break;case"ObjectId":W=this.find((D)=>D.toString()===Y.toString());break;default:W=~this.indexOf(Y);break}if(!W)this._markModified(),X.push(Y),this._registerAtomic("$addToSet",Y),[].push.call(F,Y)},this),F},hasAtomics(){if(!N9.isPOJO(this[C$]))return 0;return Object.keys(this[C$]).length},includes($,F){return this.indexOf($,F)!==-1},indexOf($,F){if(mv($,"ObjectId"))$=$.toString();F=F==null?0:F;let A=this.length;for(let J=F;J<A;++J)if($==this[J])return J;return-1},inspect(){return JSON.stringify(this)},nonAtomicPush(){let $=[].map.call(arguments,this._mapCast,this);this._markModified();let F=[].push.apply(this,$);return this._registerAtomic("$set",this),F},pop(){this._markModified();let $=[].pop.call(this);return this._registerAtomic("$set",this),$},pull(){let $=[].map.call(arguments,(X,Y)=>this._cast(X,Y,{defaults:!1}),this),F=this;if(N9.isMongooseArray(F))F=F.__array;let A=F.length,J;this._markModified();while(A--)if(J=F[A],J instanceof dv){if($.some(function(Y){return J.equals(Y)}))F.splice(A,1)}else if(~this.indexOf.call($,J))F.splice(A,1);if($[0]instanceof hv)this._registerAtomic("$pullDocs",$.map(function(X){let Y=X.$__getValue("_id");if(Y===void 0||X.$isDefault("_id"))return X;return Y}));else this._registerAtomic("$pullAll",$);if(PH1(this[eX],this[$Y])>0)this._registerAtomic("$set",this);return this},push(){let $=arguments,F=$,A=$[0]!=null&&N9.hasUserDefinedProperty($[0],"$each"),J=N9.isMongooseArray(this)?this.__array:this;if(A)F=$[0],$=$[0].$each;if(this[JJ]==null)return IH1.apply(this,$);XM(this,$),TH1(this,$),$=[].map.call($,this._mapCast,this);let X,Y=this[C$];if(this._markModified(),A)if(F.$each=$,(Y.$push&&Y.$push.$each&&Y.$push.$each.length||0)!==0&&Y.$push.$position!=F.$position){if(F.$position!=null)[].splice.apply(J,[F.$position,0].concat($)),X=J.length;else X=[].push.apply(J,$);this._registerAtomic("$set",this)}else if(F.$position!=null)[].splice.apply(J,[F.$position,0].concat($)),X=this.length;else X=[].push.apply(J,$);else F=$,X=IH1.apply(J,$);return this._registerAtomic("$push",F),X},remove(){return this.pull.apply(this,arguments)},set($,F,A){let J=this.__array;if(A)return J[$]=F,this;let X=YM._cast.call(this,F,$);return YM._markModified.call(this,$),J[$]=X,this},shift(){let $=N9.isMongooseArray(this)?this.__array:this;this._markModified();let F=[].shift.call($);return this._registerAtomic("$set",this),F},sort(){let $=N9.isMongooseArray(this)?this.__array:this,F=[].sort.apply($,arguments);return this._registerAtomic("$set",this),F},splice(){let $,F=N9.isMongooseArray(this)?this.__array:this;if(this._markModified(),XM(this,Array.prototype.slice.call(arguments,2)),arguments.length){let A;if(this[JJ]==null)A=arguments;else{A=[];for(let J=0;J<arguments.length;++J)A[J]=J<2?arguments[J]:this._cast(arguments[J],arguments[0]+(J-2))}$=[].splice.apply(F,A),this._registerAtomic("$set",this)}return $},toBSON(){/*!
   * ignore
   */return this.toObject(RH1)},toObject($){let F=N9.isMongooseArray(this)?this.__array:this;if($?.depopulate)return $=_X0($),$._isNested=!0,[].concat(F).map(function(A){return A instanceof dv?A.toObject($):A});return[].concat(F)},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift(){XM(this,arguments);let $;if(this[JJ]==null)$=arguments;else $=[].map.call(arguments,this._cast,this);let F=N9.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(F,$),this._registerAtomic("$set",this),this.length}};/*!
 * ignore
 */function xX0($,F){if(!F)return!1;for(let A of $){if(A==null)return!1;let J=A.constructor;if(!(A instanceof dv)||J.modelName!==F&&J.baseModelName!==F)return!1}return!0}/*!
 * Minimize _just_ empty objects along the path chain specified
 * by `parts`, ignoring all other paths. Useful in cases where
 * you want to minimize after unsetting a path.
 *
 * #### Example:
 *
 *     const obj = { foo: { bar: { baz: {} } }, a: {} };
 *     _minimizePath(obj, 'foo.bar.baz');
 *     obj; // { a: {} }
 */function SH1($,F,A){if(typeof F==="string"){if(F.indexOf(".")===-1)return;F=jH1.stringToParts(F)}if(A=A||0,A>=F.length)return;if($==null||typeof $!=="object")return;if(SH1($[F[0]],F,A+1),$[F[0]]!=null&&typeof $[F[0]]==="object"&&N9.hasOwnKeys($[F[0]])===!1)delete $[F[0]]}/*!
 * ignore
 */function XM($,F){let A=$==null?null:$[JJ]?.embeddedSchemaType?.options?.ref||null;if($.length===0&&F.length!==0){if(xX0(F,A))$[eX].$populated($[$Y],[],{[OH1]:F[0].constructor})}}/*!
 * If `docs` isn't all instances of the right model, depopulate `arr`
 */function TH1($,F){let A=$==null?null:$[JJ]?.embeddedSchemaType?.options?.ref||null,J=$[eX],X=$[$Y];if(!A||!J.populated(X))return;for(let Y of F){if(Y==null)continue;if(typeof Y!=="object"||Y instanceof String||Y instanceof Number||Y instanceof Buffer||N9.isMongooseType(Y)){J.depopulate(X);break}}}var gX0=["filter","flat","flatMap","map","slice"];for(let $ of gX0){if(Array.prototype[$]==null)continue;YM[$]=function(){let F=N9.isMongooseArray(this)?this.__array:this,A=[].concat(F);return A[$].apply(A,arguments)}}_H1.exports=YM});var lv=O((fH1,vH1)=>{/*!
 * Module dependencies.
 */var cv=WM(),ZM=s1().arrayAtomicsSymbol,fX0=s1().arrayAtomicsBackupSymbol,kH1=s1().arrayParentSymbol,vX0=s1().arrayPathSymbol,bH1=s1().arraySchemaSymbol,xH1=Array.prototype.push,gH1=/^\d+$/;function yX0($,F,A,J){let X;if(Array.isArray($)){let Z=$.length;if(Z===0)X=[];else if(Z===1)X=[,],X[0]=$[0];else if(Z<1e4)X=[],xH1.apply(X,$);else{X=[];for(let D=0;D<Z;++D)xH1.call(X,$[D])}}else X=[];let Y={[ZM]:{},[fX0]:void 0,[vX0]:F,[bH1]:J,[kH1]:void 0,isMongooseArray:!0,isMongooseArrayProxy:!0,__array:X};if($&&$[ZM]!=null)Y[ZM]=$[ZM];if(A?.$__)Y[kH1]=A,Y[bH1]=J||A.schema.path(F);let W=new Proxy(X,{get:function(Z,D){if(Object.hasOwn(Y,D))return Y[D];if(Object.hasOwn(cv,D))return cv[D];if(J?.virtuals&&Object.hasOwn(J.virtuals,D))return J.virtuals[D].applyGetters(void 0,Z);if(typeof D==="string"&&gH1.test(D)&&J?.embeddedSchemaType!=null)return J.embeddedSchemaType.applyGetters(X[D],A);return X[D]},set:function(Z,D,G){if(typeof D==="string"&&gH1.test(D))cv.set.call(W,D,G,!1);else if(Object.hasOwn(Y,D))Y[D]=G;else if(J?.virtuals&&Object.hasOwn(J.virtuals,D))J.virtuals[D].applySetters(G,Z);else X[D]=G;return!0}});return W}/*!
 * Module exports.
 */vH1.exports=fH1=yX0});var mH1=O((je0,hH1)=>{var DM=WM(),uX0=pF(),yH1=R5(),hX0=V$().internalToObjectOptions,qZ=Z0(),mX0=t9(),zM=s1().arrayParentSymbol,pv=s1().arrayPathSymbol,yB=s1().arraySchemaSymbol,uH1=s1().documentArrayParent,dX0=Array.prototype.toString,iv={toBSON(){/*!
   * ignore
   */return this.toObject(hX0)},toString(){return dX0.call(this.__array.map(($)=>{if($?.$__!=null)return $.toString();return $}))},getArrayParent(){/*!
   * ignore
   */return this[zM]},$schemaType(){/*!
   * ignore
   */return this[yB]},_cast($,F,A){if(this[yB]==null)return $;let J=this[yB].Constructor;if((J.$isMongooseDocumentArray?qZ.isMongooseDocumentArray($):$ instanceof J)||$?.constructor?.baseCasterConstructor===J){if(!($[uH1]&&$.__parentArray))$[uH1]=this[zM],$.__parentArray=this;return $.$setIndex(F),$}if($==null)return null;if(Buffer.isBuffer($)||mX0($,"ObjectId")||!qZ.isObject($))$={_id:$};if($&&J.discriminators&&J.schema&&J.schema.options&&J.schema.options.discriminatorKey)if(typeof $[J.schema.options.discriminatorKey]==="string"&&J.discriminators[$[J.schema.options.discriminatorKey]])J=J.discriminators[$[J.schema.options.discriminatorKey]];else{let W=yH1(J.discriminators,$[J.schema.options.discriminatorKey]);if(W)J=W}if(J.$isMongooseDocumentArray)return J.cast($,this,void 0,void 0,F);let Y=new J($,this,A,void 0,F);return Y.isNew=!0,Y},id($){if($==null)return null;let F=this[yB],A=null;if(F?.schema)A=F.schema.path("_id");else if(F?.casterConstructor?.schema)A=F.casterConstructor.schema.path("_id");let J=null;if(A)try{J=A.cast($)}catch{}let X;for(let Y of this){if(!Y)continue;if(X=Y.get("_id"),X==null)continue;else if(X instanceof uX0){if(X=X.get("_id"),J!=null&&qZ.deepEqual(J,X))return Y;else if(J==null&&($==X||qZ.deepEqual($,X)))return Y}else if(J!=null&&qZ.deepEqual(J,X))return Y;else if(J==null&&(X==$||qZ.deepEqual($,X)))return Y}return null},toObject($){return[].concat(this.map(function(F){if(F==null)return null;if(typeof F.toObject!=="function")return F;return F.toObject($)}))},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},push(){let $=DM.push.apply(this,arguments);return GM(this),$},pull(){let $=DM.pull.apply(this,arguments);return GM(this),$},shift(){let $=DM.shift.apply(this,arguments);return GM(this),$},splice(){let $=DM.splice.apply(this,arguments);return GM(this),$},inspect(){return this.toObject()},create($){let F=this[yB].Constructor;if($&&F.discriminators&&F.schema&&F.schema.options&&F.schema.options.discriminatorKey)if(typeof $[F.schema.options.discriminatorKey]==="string"&&F.discriminators[$[F.schema.options.discriminatorKey]])F=F.discriminators[$[F.schema.options.discriminatorKey]];else{let A=yH1(F.discriminators,$[F.schema.options.discriminatorKey]);if(A)F=A}return new F($,this)},notify($){/*!
   * ignore
   */let F=this;return function A(J,X){X=X||F;let Y=X.length;while(Y--){if(X[Y]==null)continue;switch($){case"save":J=F[Y];break;default:break}if(qZ.isMongooseArray(X[Y]))A(J,X[Y]);else if(X[Y])X[Y].emit($,J)}}},set($,F,A){let J=this.__array;if(A)return J[$]=F,this;let X=iv._cast.call(this,F,$);return iv._markModified.call(this,$),J[$]=X,this},_markModified($,F){let A=this[zM],J;if(A){if(J=this[pv],arguments.length)if(F!=null){let X=$.__index;J=J+"."+X+"."+F}else J=J+"."+$;if(J!=null&&J.endsWith(".$"))return this;A.markModified(J,arguments.length!==0?$:A)}return this}};hH1.exports=iv;function GM($){let F=$[zM];if(!F||F.$__.populated==null)return;let A=Object.keys(F.$__.populated).filter((J)=>J.startsWith($[pv]+"."));for(let J of A){let X=J.slice(($[pv]+".").length);if(!Array.isArray(F.$__.populated[J].value))continue;F.$__.populated[J].value=$.map((Y)=>Y.$populated(X))}}});var EZ=O((Oe0,cH1)=>{/*!
 * Module dependencies.
 */var dH1=WM(),nv=mH1(),rv=s1().arrayAtomicsSymbol,cX0=s1().arrayAtomicsBackupSymbol,av=s1().arrayParentSymbol,tv=s1().arrayPathSymbol,LZ=s1().arraySchemaSymbol,lX0=Array.prototype.push,pX0=/^\d+$/;function iX0($,F,A,J){let X=[],Y={[rv]:{},[cX0]:void 0,[tv]:F,[LZ]:void 0,[av]:void 0};if(Array.isArray($)){if($[tv]===F&&$[av]===A)Y[rv]=Object.assign({},$[rv]);$.forEach((Z)=>{lX0.call(X,Z)})}if(Y[tv]=F,Y.__array=X,A?.$__){Y[av]=A,Y[LZ]=A.$__schema.path(F);while(Y[LZ]!=null&&Y[LZ].$isMongooseArray&&!Y[LZ].$isMongooseDocumentArray)Y[LZ]=Y[LZ].embeddedSchemaType}let W=new Proxy(X,{get:function(Z,D){if(D==="isMongooseArray"||D==="isMongooseArrayProxy"||D==="isMongooseDocumentArray"||D==="isMongooseDocumentArrayProxy")return!0;if(Object.hasOwn(Y,D))return Y[D];if(Object.hasOwn(nv,D))return nv[D];if(J?.virtuals&&Object.hasOwn(J.virtuals,D))return J.virtuals[D].applyGetters(void 0,Z);if(Object.hasOwn(dH1,D))return dH1[D];return X[D]},set:function(Z,D,G){if(typeof D==="string"&&pX0.test(D))nv.set.call(W,D,G,!1);else if(Object.hasOwn(Y,D))Y[D]=G;else if(J?.virtuals&&Object.hasOwn(J.virtuals,D))J.virtuals[D].applySetters(G,Z);else X[D]=G;return!0}});return W}/*!
 * Module exports.
 */cH1.exports=iX0});var pF=O((ZU1,DU1)=>{/*!
 * Module dependencies.
 */var nX0=Vv(),ov=Z1("events").EventEmitter,rX0=Bz1(),aX0=pC(),k3=T7(),lH1=Rz(),tX0=Cz1(),sH1=nC(),Ay=rC(),sX0=Iz1(),oX0=VZ(),ev=oX(),BM=BZ(),oH1=Zv(),eH1=_v(),$y=aC(),HM=tC(),M$=W4(),eX0=oC().compile,$Y0=oC().defineKey,FY0=yz1(),AY0=eC().flatten,sv=az1(),pH1=sz1(),JY0=ez1(),XY0=FM(),iH1=t9(),$U1=Tz(),YY0=jz(),nH1=gv(),Fy=Z1("util").inspect,FU1=V$().internalToObjectOptions,WY0=fv(),ZY0=vv(),DY0=O7(),Jy=yv(),GY0=vB(),H0=Z0(),zY0=uv(),QM=H0.deepEqual,HY0=H0.isMongooseObject,hB=s1().arrayAtomicsBackupSymbol,b3=s1().arrayAtomicsSymbol,UY0=s1().documentArrayParent,QY0=s1().documentIsModified,AU1=s1().documentModifiedPaths,KY0=s1().documentSchemaSymbol,BY0=s1().getSymbol,wY0=s1().modelSymbol,rH1=s1().populateModelSymbol,qY0=s1().scopeSymbol,LY0=wZ().schemaMixedSymbol,EY0=qH1(),UM=s1().sessionNewDocuments,KM,aH1,uB,JU1=H0.specialProperties;function q1($,F,A){if(typeof A==="boolean")throw Error("The skipId parameter has been removed. Use { skipId: true } in the options parameter instead.");A=Object.assign({},A);let J=A.skipId;if(this.$__=new rX0,this.$__schema==null){let G=H0.isObject(F)&&!F.instanceOfSchema?new oX0(F):F;this.$__setSchema(G),F=A,J=A.skipId}if(A.isNew!=null&&A.isNew!==!0)this.$isNew=A.isNew;if(A.priorDoc!=null)this.$__.priorDoc=A.priorDoc;if(J)this.$__.skipId=J;if($!=null&&typeof $!=="object")throw new Ay($,"obj","Document");let X=!0;if(A.defaults!==void 0)this.$__.defaults=A.defaults,X=A.defaults;let Y=this.$__schema;if(typeof F==="boolean"||F==="throw"){if(F!==!0)this.$__.strictMode=F;F=void 0}else if(Y.options.strict!==!0)this.$__.strictMode=Y.options.strict;let W=Y.requiredPaths(!0);for(let G of W)this.$__.activePaths.require(G);let Z=null;if(H0.isPOJO(F)&&H0.hasOwnKeys(F))Z=YY0(F),this.$__.selected=F,this.$__.exclude=Z;let D=Z===!1&&F?eH1(F):null;if(this._doc==null){if(this.$__buildDoc($,F,J,Z,D,!1),X)$y(this,F,Z,D,!0,null,{skipParentChangeTracking:!0})}if($){if(this.$__original_set)this.$__original_set($,void 0,!0,A);else this.$set($,void 0,!0,A);if($ instanceof q1)this.$isNew=$.$isNew}if(A.willInit&&X){if(A.skipDefaults)this.$__.skipDefaults=A.skipDefaults}else if(X)$y(this,F,Z,D,!1,A.skipDefaults);if(!this.$__.strictMode&&$){let G=this;Object.keys(this._doc).forEach(function(H){if(!(H in Y.tree)&&!(H in Y.methods)&&!(H in Y.virtuals)&&!H.startsWith("$"))$Y0({prop:H,subprops:null,prototype:G})})}jY0(this)}q1.prototype.$isMongooseDocumentPrototype=!0;Object.defineProperty(q1.prototype,"isNew",{get:function(){return this.$isNew},set:function($){this.$isNew=$}});Object.defineProperty(q1.prototype,"errors",{get:function(){return this.$errors},set:function($){this.$errors=$}});/*!
 * ignore
 */q1.prototype.$isNew=!0;/*!
 * Document exposes the NodeJS event emitter API, so you can use
 * `on`, `once`, etc.
 */H0.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],function($){q1.prototype[$]=function(){if(!this.$__.emitter){if($==="emit")return;this.$__.emitter=new ov,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[$].apply(this.$__.emitter,arguments)},q1.prototype[`$${$}`]=q1.prototype[$]});q1.prototype.constructor=q1;for(let $ in ov.prototype)q1[$]=ov.prototype[$];q1.prototype.$__schema;q1.prototype.schema;Object.defineProperty(q1.prototype,"$locals",{configurable:!1,enumerable:!1,get:function(){if(this.$__.locals==null)this.$__.locals={};return this.$__.locals},set:function($){this.$__.locals=$}});q1.prototype.isNew;Object.defineProperty(q1.prototype,"$where",{configurable:!1,enumerable:!1,writable:!0});q1.prototype.id;q1.prototype.$errors;Object.defineProperty(q1.prototype,"$op",{get:function(){return this.$__.op||null},set:function($){this.$__.op=$}});/*!
 * ignore
 */function VY0($,F,A){if($==null)return;let J=Object.keys(A.$__schema.paths),X=J.length,Y=F.indexOf(".")===-1?[F]:F.split(".");for(let W=0;W<X;++W){let Z="",D=J[W];if(!D.startsWith(F+"."))continue;let G=A.$__schema.paths[D],z=G.splitPath().slice(Y.length),H=z.length;if(G.defaultValue===void 0)continue;let U=$;for(let Q=0;Q<H;++Q){if(U==null)break;let B=z[Q];if(Q===H-1){if(U[B]!==void 0)break;try{let q=G.getDefault(A,!1);if(q!==void 0)U[B]=q}catch(q){A.invalidate(F+"."+Z,q);break}break}Z+=(!Z.length?"":".")+B,U[B]=U[B]||{},U=U[B]}}}q1.prototype.$__buildDoc=function($,F,A,J,X){let Y={},W=Object.keys(this.$__schema.paths).filter((G)=>!G.includes("$*")),Z=W.length,D=0;for(;D<Z;++D){let G=W[D];if(G==="_id"){if(A)continue;if($&&"_id"in $)continue}let z=this.$__schema.paths[G].splitPath(),H=z.length,U=H-1,Q="",B=Y,q=!1;for(let L=0;L<H;++L){let E=z[L];if(!Q.length)Q=E;else Q+="."+E;if(J===!0){if(Q in F)break}else if(J===!1&&F&&!q){if(Q in F)q=!0;else if(!X[Q])break}if(L<U)B=B[E]||(B[E]={})}}this._doc=Y};/*!
 * Converts to POJO when you use the document for querying
 */q1.prototype.toBSON=function(){return this.toObject(FU1)};q1.prototype.init=function($,F,A){if(typeof F==="function")A=F,F=null;if($==null)throw new Ay($,"doc","init");if(this.$__init($,F),A)A(null,this);return this};q1.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)};q1.prototype.$__init=function($,F){if($==null)throw new Ay($,"doc","init");if(this.$isNew=!1,F=F||{},$._id!=null&&F.populated&&F.populated.length){let J=String($._id);for(let X of F.populated){if(X.isVirtual)this.$populated(X.path,H0.getValue(X.path,$),X);else this.$populated(X.path,X._docs[J],X);if(X._childDocs==null)continue;for(let Y of X._childDocs){if(Y?.$__==null)continue;Y.$__.parent=this}X._childDocs=[]}}XU1(this,$,this._doc,F),WY0(this,F.populated),this.$emit("init",this),this.constructor.emit("init",this);let A=this.$__.exclude===!1&&this.$__.selected?eH1(this.$__.selected):null;return $y(this,this.$__.selected,this.$__.exclude,A,!1,this.$__.skipDefaults),this};function XU1($,F,A,J,X){if(X=X||"",typeof F!=="object"||Array.isArray(F))throw new sH1($.$basePath,F);if(F.$__!=null)F=F._doc;let Y=Object.keys(F),W=Y.length,Z,D,G,z=$.$__.strictMode,H=$.$__schema;for(let U=0;U<W;++U){if(G=Y[U],JU1.has(G))continue;if(D=X?X+G:G,Z=H.path(D),H.$isRootDiscriminator&&!$.$__isSelected(D))continue;let Q=F[G];if(!Z&&H0.isPOJO(Q)){if(!A[G]){if(A[G]={},!z&&!(G in H.tree)&&!(G in H.methods)&&!(G in H.virtuals))$[G]=A[G];else if(J?.virtuals&&G in H.virtuals)$[G]=A[G]}XU1($,Q,A[G],J,D+".")}else if(!Z){if(A[G]=Q,!z&&!X)$[G]=Q;else if(J?.virtuals&&G in H.virtuals)$[G]=Q}else{if(Object.hasOwn(A,G)&&Q!==void 0&&!J.hydratedPopulatedDocs)delete A[G];if(Q===null)A[G]=Z._castNullish(null);else if(Q!==void 0){let B=Q.$__==null?null:Q.$__.wasPopulated;if(Z&&!B&&!J.hydratedPopulatedDocs)try{if(J?.setters)A[G]=Z.applySetters(Q,$,!1,null,J);else A[G]=Z.cast(Q,$,!0,void 0,J)}catch(q){$.invalidate(q.path,new oH1({path:q.path,message:q.message,type:"cast",value:q.value,reason:q}))}else if(Z&&J.hydratedPopulatedDocs){if(A[G]=Z.cast(Q,$,!0,void 0,{hydratedPopulatedDocs:!0}),A[G]?.$__?.wasPopulated)$.$populated(D,A[G].$__.wasPopulated.value,A[G].$__.wasPopulated.options);else if(Array.isArray(A[G])&&A[G].length&&A[G][0]?.$__?.wasPopulated)$.$populated(D,A[G].map((q)=>q?.$__?.wasPopulated?.value).filter((q)=>q!=null),A[G][0].$__.wasPopulated.options)}else A[G]=Q}if(!$.$isModified(D))$.$__.activePaths.init(D)}}}q1.prototype.updateOne=function(F,A){let J=this.constructor.updateOne(),X=this;return J.pre(async function(){let W=await X._execDocumentPreHooks("updateOne",X,F,A);if(W[0]!==X||W[1]!==F||W[2]!==A)throw Error("Document updateOne pre hooks cannot overwrite arguments");if(J.updateOne({_id:X._doc._id},F,A),X.$where!=null)this.where(X.$where);if(X.$session()!=null){if(!("session"in J.options))J.options.session=X.$session()}return W}),J.post(function(){return X._execDocumentPostHooks("updateOne")}),J};q1.prototype.replaceOne=function(){let F=[...arguments];return F.unshift({_id:this._doc._id}),this.constructor.replaceOne.apply(this.constructor,F)};q1.prototype.$session=function(F){if(arguments.length===0){if(this.$__.session?.hasEnded)return this.$__.session=null,null;return this.$__.session}if(F?.hasEnded)throw new k3("Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.");if(F==null&&this.$__.session==null)return;if(this.$__.session=F,!this.$isSubdocument){let A=this.$getAllSubdocs();for(let J of A)J.$session(F)}return F};q1.prototype.$timestamps=function(F){if(arguments.length===0){if(this.$__.timestamps!=null)return this.$__.timestamps;if(this.$__schema)return this.$__schema.options.timestamps;return}let A=this.$timestamps();if(F!==A)this.$__.timestamps=F;return this};q1.prototype.overwrite=function(F){let A=new Set(Object.keys(this._doc));for(let X of Object.keys(F))A.add(X);let J=this.$__schema.options;for(let X of A){if(X==="_id")continue;if(J.versionKey&&X===J.versionKey)continue;if(J.discriminatorKey&&X===J.discriminatorKey)continue;this.$set(X,F[X])}return this};q1.prototype.$set=function(F,A,J,X){if(H0.isPOJO(J))X=J,J=void 0;let Y=X?.merge,W=J&&J!==!0,Z=J===!0,D,G,z=0,H,U,Q,B=X&&"strict"in X,q=B?X.strict:this.$__.strictMode;if(W)D=this.$__.adhocPaths||(this.$__.adhocPaths={}),D[F]=this.$__schema.interpretAsType(F,J,this.$__schema.options);if(F==null)[F,A]=[A,F];else if(typeof F!=="string"){if(F instanceof q1)if(F.$__isNested)F=F.toObject();else F=F.$__schema===this.$__schema?Xy(F,{...F._doc}):F._doc;if(F==null)[F,A]=[A,F];Q=A?A+".":"",G=pH1(this.$__schema,F);let I=G.length,T=X?._skipMinimizeTopLevel||!1;if(I===0&&T){if(delete X._skipMinimizeTopLevel,A)this.$set(A,{});return this}X=Object.assign({},X,{_skipMinimizeTopLevel:!1});for(let g=0;g<I;++g){U=G[g];let f=Q?Q+U:U;H=this.$__schema.pathType(f);let d=F[U];if(J===!0&&!Q&&d!=null&&H==="nested"&&this._doc[U]!=null)delete this._doc[U];if(H0.isNonBuiltinObject(d)&&H==="nested"){this.$set(f,d,Z,X),VY0(this.$get(f),f,this);continue}else if(q){if(Z&&d===void 0&&this.$get(f)!==void 0)continue;if(H==="adhocOrUndefined")H=sv(this,f,{typeOnly:!0});if(H==="real"||H==="virtual")this.$set(f,d,Z,X);else if(H==="nested"&&d instanceof q1)this.$set(f,d.toObject({transform:!1}),Z,X);else if(q==="throw")if(H==="nested")throw new sH1(U,d);else throw new ev(U);else if(H==="nested"&&d==null)this.$set(f,d,Z,X)}else this.$set(f,d,Z,X)}let j={},b=Object.keys(this.$__schema.tree);for(let g=0,f=b.length;g<f;++g)(U=b[g])&&Object.hasOwn(this._doc,U)&&(j[U]=void 0);return this._doc=Object.assign(j,this._doc),this}let L=this.$__schema.pathType(F),E=null;if(L==="adhocOrUndefined")E=F.indexOf(".")===-1?[F]:F.split("."),L=sv(this,E,{typeOnly:!0});if(L==="adhocOrUndefined"&&!B){if(E==null)E=F.indexOf(".")===-1?[F]:F.split(".");let I=JY0(this.$__schema,E);if(I!==void 0)q=I}A=XY0(A,!0);let V=(()=>{if(this.$__.priorDoc!=null)return this.$__.priorDoc.$__getValue(F);if(Z)return;return this.$__getValue(F)})();if(L==="nested"&&A){if(typeof A==="object"&&A!=null){if(A.$__!=null)A=A.toObject(FU1);if(A==null)return this.invalidate(F,new k3.CastError("Object",A,F)),this;let I=this.$isModified(F),T=this.$__.savedState!=null&&Object.hasOwn(this.$__.savedState,F);if(this.$__.savedState!=null&&!this.$isNew&&!Object.hasOwn(this.$__.savedState,F)){let b=this.$__getValue(F);this.$__.savedState[F]=b;let g=Object.keys(b||{});for(let f of g)this.$__.savedState[F+"."+f]=b[f]}if(!Y)this.$__setValue(F,null),HM(this,F);else return this.$set(A,F,Z,X);let j=pH1(this.$__schema,A,F);this.$__setValue(F,{});for(let b of j)this.$set(F+"."+b,A[b],Z,{...X,_skipMarkModified:!0});if(V!=null&&(!I||T)&&H0.deepEqual(T?this.$__.savedState[F]:V,A))this.unmarkModified(F);else this.markModified(F);return this}return this.invalidate(F,new k3.CastError("Object",A,F)),this}let R;if(E==null)E=F.indexOf(".")===-1?[F]:F.split(".");if(typeof this.$__schema.aliases[E[0]]==="string")E[0]=this.$__schema.aliases[E[0]];if(L==="adhocOrUndefined"&&q){let I;for(z=0;z<E.length;++z){let T=E.slice(0,z+1).join(".");if(z+1<E.length&&this.$__schema.pathType(T)==="virtual")return DY0.set(F,A,this),this;if(R=this.$__schema.path(T),R==null)continue;if(R instanceof lH1){I=!0;break}else if(R.$isSchemaMap&&R.$__schemaType instanceof lH1&&z<E.length-1){I=!0,R=R.$__schemaType;break}}if(R==null)R=sv(this,F);if(!I&&!R){if(q==="throw")throw new ev(F);return this}}else if(L==="virtual")return R=this.$__schema.virtualpath(F),R.applySetters(A,this),this;else R=this.$__path(F);let N=this._doc,S="";for(z=0;z<E.length-1;++z)if(N=N instanceof Map?N.get(E[z]):N[E[z]],S+=(S.length!==0?".":"")+E[z],!N){if(this.$set(S,{}),!this.$__isSelected(S))this.unmarkModified(S);N=this.$__getValue(S)}let C;if(E.length<=1)C=F;else{let I=E.length;for(z=0;z<I;++z){let T=E.slice(0,z+1).join(".");if(this.$get(T,null,{getters:!1})===null){C=T;break}}if(!C)C=F}if(!R){if(this.$__set(C,F,X,Z,E,R,A,V),L==="nested"&&A==null)HM(this,F);return this}if(R.$isSingleNested||R.$isMongooseArray)IY0(this,F);if(A!=null&&Y&&R.$isSingleNested){if(A instanceof q1)A=A.toObject({virtuals:!1,transform:!1});let I=Object.keys(A);for(let T of I)this.$set(F+"."+T,A[T],Z,X);return this}let M=!0;try{let I=(()=>{if(R.options==null)return!1;if(!(A instanceof q1))return!1;let g=A.constructor,f=typeof R.options.ref==="function"&&!R.options.ref[wY0]?R.options.ref.call(this,this):R.options.ref,d=f?.modelName||f;if(d!=null&&(d===g.modelName||d===g.baseModelName))return!0;let s=R.options.refPath;if(s==null)return!1;let n=A.get(s);return n===g.modelName||n===g.baseModelName})(),T=!1;if(I&&A instanceof q1&&(!A.$__.wasPopulated||H0.deepEqual(A.$__.wasPopulated.value,A._doc._id))){let g=R?.$isSingleNested?R.cast(A,this):A._doc._id;this.$populated(F,g,{[rH1]:A.constructor}),A.$__.wasPopulated={value:g},T=!0}let j,b=this.$__schema.options.typeKey;if(R.options&&Array.isArray(R.options[b])&&R.options[b].length&&R.options[b][0]&&R.options[b][0].ref&&NY0(A,R.options[b][0].ref)){j={[rH1]:A[0].constructor},this.$populated(F,A.map(function(g){return g._doc._id}),j);for(let g of A)g.$__.wasPopulated={value:g._doc._id};T=!0}if(!I||!R.$isSingleNested||!A.$__){let g=this;if(this.$__schema.singleNestedPaths[F]!=null&&E.length>1)g=EY0(this,E,this.schema);if(X?.overwriteImmutable)A=R.applySetters(A,g,!1,V,{path:F,overwriteImmutable:!0});else A=R.applySetters(A,g,!1,V,{path:F})}if(Array.isArray(A)&&!Array.isArray(R)&&R.$isMongooseDocumentArray&&A.length!==0&&A[0]?.$__?.populated!=null){let g=Object.keys(A[0].$__.populated);for(let f of g)this.$populated(F+"."+f,A.map((d)=>d.$populated(f)),A[0].$__.populated[f].options);T=!0}if(!T&&this.$__.populated){if(Array.isArray(A)&&this.$__.populated[F]){for(let g=0;g<A.length;++g)if(A[g]instanceof q1)A.set(g,A[g]._doc._id,!0)}delete this.$__.populated[F]}if(A!=null&&R.$isSingleNested)TY0(A,R,V);this.$markValid(F)}catch(I){if(I instanceof k3.StrictModeError&&I.isImmutableError)this.invalidate(F,I);else if(I instanceof k3.CastError){if(this.invalidate(I.path,I),I.$originalErrorPath)this.invalidate(F,new k3.CastError(R.instance,A,F,I.$originalErrorPath))}else this.invalidate(F,new k3.CastError(R.instance,A,F,I));M=!1}if(M){let I=null,T=null;if(!Z){let g=this.$isSubdocument?this.ownerDocument():this;I=g.$__.savedState,T=this.$isSubdocument?this.$__.fullPath+"."+F:F,g.$__saveInitialState(T)}this.$__set(C,F,X,Z,E,R,A,V);let j=!!this.$__.session?.transaction,b=this.$__.session&&this.$__.session[UM]&&this.$__.session[UM].has(this)&&this.$__.session[UM].get(this).modifiedPaths&&!this.$__.session[UM].get(this).modifiedPaths.has(T);if(I!=null&&Object.hasOwn(I,T)&&(!j||b)&&H0.deepEqual(A,I[T]))this.unmarkModified(F)}if(R.$isSingleNested&&(this.isDirectModified(F)||A==null))HM(this,F);else if(R.$isSchemaMap&&A==null)HM(this,F);return this};/*!
 * ignore
 */function NY0($,F){if(!Array.isArray($))return!1;if($.length===0)return!1;for(let A of $){if(!(A instanceof q1))return!1;if(A.constructor.modelName==null)return!1;if(A.constructor.modelName!=F&&A.constructor.baseModelName!=F)return!1}return!0}q1.prototype.set=q1.prototype.$set;q1.prototype.$__shouldModify=function($,F,A,J,X,Y,W,Z){if(A?._skipMarkModified)return!1;if(this.$isNew)return!0;if(F in this.$__.activePaths.getStatePaths("modify"))return!0;if(W===void 0&&!this.$__isSelected(F))return!0;if(W===void 0&&F in this.$__.activePaths.getStatePaths("default"))return!1;if(this.$populated(F)&&W instanceof q1&&QM(W._doc._id,Z))return!1;if(!QM(W,Z!==void 0?Z:H0.getValue(F,this)))return!0;if(!J&&W!==null&&W!==void 0&&F in this.$__.activePaths.getStatePaths("default")&&QM(W,Y.getDefault(this,J)))return!0;return!1};q1.prototype.$__set=function($,F,A,J,X,Y,W,Z){uB=uB||Sz();let D=this.$__shouldModify($,F,A,J,X,Y,W,Z);if(D){if(this.$__.primitiveAtomics?.[F]){if(delete this.$__.primitiveAtomics[F],H0.hasOwnKeys(this.$__.primitiveAtomics)===!1)delete this.$__.primitiveAtomics}if(this.markModified($),aH1||(aH1=lv()),W&&H0.isMongooseArray(W)){if(W._registerAtomic("$set",W),H0.isMongooseDocumentArray(W))W.forEach(function(Q){Q&&Q.__parentArray&&(Q.__parentArray=W)})}}else if(Array.isArray(W)&&Array.isArray(Z)&&H0.isMongooseArray(W)&&H0.isMongooseArray(Z)){if(W[b3]=Z[b3],W[hB]=Z[hB],H0.isMongooseDocumentArray(W))W.forEach((Q)=>{if(Q!=null)Q.$isNew=!1})}let G=this._doc,z=0,H=X.length,U="";for(;z<H;z++){let B=z+1===H;if(U+=U?"."+X[z]:X[z],JU1.has(X[z]))continue;if(B)if(G instanceof Map)G.set(X[z],W);else if(G.$isSingleNested){if(!(X[z]in G))G[X[z]]=W,G._doc[X[z]]=W;else G._doc[X[z]]=W;if(D)G.markModified(X[z])}else G[X[z]]=W;else{let q=G instanceof Map,L=q?G.get(X[z]):G[X[z]];if(H0.isPOJO(L))G=L;else if(L&&L instanceof uB)G=L;else if(L&&!Array.isArray(L)&&L.$isSingleNested)G=L;else if(L&&Array.isArray(L))G=L;else if(L==null){if(L={},q)G.set(X[z],L);else G[X[z]]=L;G=L}else G=L}}};q1.prototype.$__getValue=function($){if(typeof $!=="string"&&!Array.isArray($))throw TypeError(`Invalid \`path\`. Must be either string or array. Got "${$}" (type ${typeof $})`);return H0.getValue($,this._doc)};q1.prototype.$inc=function(F,A){if(A==null)A=1;if(Array.isArray(F))return F.forEach((D)=>this.$inc(D,A)),this;let J=this.$__path(F);if(J==null){if(this.$__.strictMode==="throw")throw new ev(F);else if(this.$__.strictMode===!0)return this}else if(J.instance!=="Number")return this.invalidate(F,new k3.CastError(J.instance,A,F)),this;let X=this.$__getValue(F)||0,Y=!1,W=null,Z=A;try{A=J.cast(A),W=J.applySetters(X+A,this),Z=W-X,Y=!0}catch(D){this.invalidate(F,new k3.CastError("number",A,F,D))}if(Y){if(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[F]==null)this.$__.primitiveAtomics[F]={$inc:Z};else this.$__.primitiveAtomics[F].$inc+=Z;this.markModified(F),this.$__setValue(F,W)}return this};q1.prototype.$__setValue=function($,F){return H0.setValue($,F,this._doc),this};q1.prototype.get=function($,F,A){let J;if(A==null)A={};if(F)J=this.$__schema.interpretAsType($,F,this.$__schema.options);let X=A.noDottedPath,Y=X?this.$__schema.paths[$]:this.$__path($);if(Y==null){if(Y=this.$__schema.virtualpath($),Y!=null)return Y.applyGetters(void 0,this)}if(X){let G=this._doc[$];if(J)G=J.cast(G);if(Y!=null&&A.getters!==!1)return Y.applyGetters(G,this);return G}if(Y?.instance==="Mixed"){let G=this.$__schema.virtualpath($);if(G!=null)Y=G}let W=$.indexOf(".")!==-1,Z=this._doc,D=W?$.split("."):[$];if(typeof this.$__schema.aliases[D[0]]==="string")D[0]=this.$__schema.aliases[D[0]];for(let G=0,z=D.length;G<z;G++){if(Z?._doc)Z=Z._doc;if(Z==null)Z=void 0;else if(Z instanceof Map)Z=Z.get(D[G],{getters:!1});else if(G===z-1)Z=H0.getValue(D[G],Z);else Z=Z[D[G]]}if(J)Z=J.cast(Z);if(Y!=null&&A.getters!==!1)Z=Y.applyGetters(Z,this);else if(this.$__schema.nested[$]&&A.virtuals)return Xy(this,M$(Z)||{},{path:$});return Z};/*!
 * ignore
 */q1.prototype[BY0]=q1.prototype.get;q1.prototype.$get=q1.prototype.get;q1.prototype.$__path=function($){let F=this.$__.adhocPaths,A=F&&Object.hasOwn(F,$)?F[$]:null;if(A)return A;return this.$__schema.path($)};q1.prototype.markModified=function($,F){if(this.$__saveInitialState($),this.$__.activePaths.modify($),F!=null&&!this.$isSubdocument)this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[$]=F};/*!
 * ignore
 */q1.prototype.$__saveInitialState=function(F){let A=this.$__.savedState,J=F;if(A!=null){let X=J.indexOf("."),Y=X===-1?J:J.slice(0,X);if(!Object.hasOwn(A,Y))A[Y]=M$(this.$__getValue(Y))}};q1.prototype.unmarkModified=function($){if(this.$__.activePaths.init($),this.$__.pathsToScopes!=null)delete this.$__.pathsToScopes[$]};q1.prototype.$ignore=function($){this.$__.activePaths.ignore($)};q1.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths("modify"))};q1.prototype.$isEmpty=function($){let F={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length!==0){let A=this.$get($);if(A==null)return!0;if(typeof A!=="object")return!1;if(H0.isPOJO(A))return YU1(A);return Object.keys(A.toObject(F)).length===0}return Object.keys(this.toObject(F)).length===0};/*!
 * ignore
 */function YU1($){if($==null)return!0;if(typeof $!=="object"||Array.isArray($))return!1;for(let F of Object.keys($))if(!YU1($[F]))return!1;return!0}q1.prototype.modifiedPaths=function($){$=$||{};let F=Object.keys(this.$__.activePaths.getStatePaths("modify")),A=new Set,J=0,X=0,Y=F.length;for(J=0;J<Y;++J){let W=F[J],Z=Jy(W),D=Z.length;for(X=0;X<D;++X)A.add(Z[X]);if(!$.includeChildren)continue;let G=0,z=this.$get(W);if(typeof z==="object"&&z!==null){if(z._doc)z=z._doc;let H=z.length;if(Array.isArray(z))for(G=0;G<H;++G){let U=W+"."+G;if(!A.has(U)){if(A.add(U),z[G]!=null&&z[G].$__){let Q=z[G].modifiedPaths(),B=0,q=Q.length;for(B=0;B<q;++B)A.add(U+"."+Q[B])}}}else{let U=Object.keys(z),Q=0,B=U.length;for(Q=0;Q<B;++Q)A.add(W+"."+U[Q])}}}return Array.from(A)};q1.prototype[AU1]=q1.prototype.modifiedPaths;q1.prototype.isModified=function($,F,A){if($){let J=F?.ignoreAtomics,X=this.$__.activePaths.states.modify;if(X==null)return!1;if(typeof $==="string")$=$.indexOf(" ")===-1?[$]:$.split(" ");for(let D of $)if(X[D]!=null)return!0;let Y=A||this[AU1](),W=$.some(function(D){return!!~Y.indexOf(D)}),Z=Object.keys(X);if(J)Z=Z.filter((D)=>{let G=this.$__getValue(D);if(G?.[b3]!=null&&G[b3].$set===void 0)return!1;return!0});return W||$.some(function(D){return Z.some(function(G){return G===D||D.startsWith(G+".")})})}return this.$__.activePaths.some("modify")};q1.prototype.$isModified=q1.prototype.isModified;q1.prototype[QY0]=q1.prototype.isModified;q1.prototype.$isDefault=function($){if($==null)return this.$__.activePaths.some("default");if(typeof $==="string"&&$.indexOf(" ")===-1)return Object.hasOwn(this.$__.activePaths.getStatePaths("default"),$);let F=$;if(!Array.isArray(F))F=F.split(" ");return F.some((A)=>Object.hasOwn(this.$__.activePaths.getStatePaths("default"),A))};q1.prototype.$isDeleted=function($){if(arguments.length===0)return!!this.$__.isDeleted;return this.$__.isDeleted=!!$,this};q1.prototype.isDirectModified=function($){if($==null)return this.$__.activePaths.some("modify");if(typeof $==="string"&&$.indexOf(" ")===-1){let A=Object.hasOwn(this.$__.activePaths.getStatePaths("modify"),$);if(A||$.indexOf(".")===-1)return A;let J=$.split(".");for(let X=0;X<J.length-1;++X){let Y=J.slice(0,X+1).join("."),W=this.$get(Y);if(W?.$__!=null&&W.isDirectModified(J.slice(X+1).join(".")))return!0}return!1}let F=$;if(typeof F==="string")F=F.split(" ");return F.some((A)=>this.isDirectModified(A))};q1.prototype.isInit=function($){if($==null)return this.$__.activePaths.some("init");if(typeof $==="string"&&$.indexOf(" ")===-1)return Object.hasOwn(this.$__.activePaths.getStatePaths("init"),$);let F=$;if(!Array.isArray(F))F=F.split(" ");return F.some((A)=>Object.hasOwn(this.$__.activePaths.getStatePaths("init"),A))};q1.prototype.isSelected=function(F){if(this.$__.selected==null)return!0;if(!F)return!1;if(F==="_id")return this.$__.selected._id!==0;if(F.indexOf(" ")!==-1)F=F.split(" ");if(Array.isArray(F))return F.some((Y)=>this.$__isSelected(Y));let A=Object.keys(this.$__.selected),J=null;if(A.length===1&&A[0]==="_id")return this.$__.selected._id===0;for(let Y of A){if(Y==="_id")continue;if(!$U1(this.$__.selected[Y]))continue;J=!!this.$__.selected[Y];break}if(J===null)return!0;if(F in this.$__.selected)return J;let X=F+".";for(let Y of A){if(Y==="_id")continue;if(Y.startsWith(X))return J||Y!==X;if(X.startsWith(Y+"."))return J}return!J};q1.prototype.$__isSelected=q1.prototype.isSelected;q1.prototype.isDirectSelected=function(F){if(this.$__.selected==null)return!0;if(F==="_id")return this.$__.selected._id!==0;if(F.indexOf(" ")!==-1)F=F.split(" ");if(Array.isArray(F))return F.some((X)=>this.isDirectSelected(X));let A=Object.keys(this.$__.selected),J=null;if(A.length===1&&A[0]==="_id")return this.$__.selected._id===0;for(let X of A){if(X==="_id")continue;if(!$U1(this.$__.selected[X]))continue;J=!!this.$__.selected[X];break}if(J===null)return!0;if(Object.hasOwn(this.$__.selected,F))return J;return!J};q1.prototype.validate=async function(F,A){if(typeof F==="function"||typeof A==="function"||typeof arguments[2]==="function")throw new k3("Document.prototype.validate() no longer accepts a callback");if(this.$op="validate",arguments.length===1){if(typeof arguments[0]==="object"&&!Array.isArray(arguments[0]))A=arguments[0],F=null}if(A&&typeof A.pathsToSkip==="string"){let X=A.pathsToSkip.indexOf(" ")===-1;A.pathsToSkip=X?[A.pathsToSkip]:A.pathsToSkip.split(" ")}let J=A?._skipParallelValidateCheck;if(this.$isSubdocument!=null);else if(this.$__.validating&&!J)throw new sX0(this);else if(!J)this.$__.validating=!0;try{await this.$__validate(F,A)}finally{this.$op=null,this.$__.validating=null}};q1.prototype.$validate=q1.prototype.validate;/*!
 * ignore
 */function CY0($){let F=Object.keys($.$__.activePaths.getStatePaths("require")),A=0,J=F.length;for(A=0;A<J;++A){let X=F[A],Y=$.$__schema.path(X);if(typeof Y?.originalRequiredValue==="function"){$.$__.cachedRequired=$.$__.cachedRequired||{};try{$.$__.cachedRequired[X]=Y.originalRequiredValue.call($,$)}catch(W){$.invalidate(X,W)}}}}/*!
 * ignore
 */function WU1($,F,A,J){let X={};CY0($);let Y=new Set(Object.keys($.$__.activePaths.getStatePaths("require")).filter(function(D){if(!$.$__isSelected(D)&&!$.$isModified(D))return!1;if(D.endsWith(".$*"))return!1;if($.$__.cachedRequired!=null&&D in $.$__.cachedRequired)return $.$__.cachedRequired[D];return!0}));Object.keys($.$__.activePaths.getStatePaths("init")).forEach(W),Object.keys($.$__.activePaths.getStatePaths("modify")).forEach(W),Object.keys($.$__.activePaths.getStatePaths("default")).forEach(W);function W(D){if(D.endsWith(".$*"))return;Y.add(D)}if(!J){let D=[];for(let z of Object.keys($.$__schema.paths)){let H=$.$__schema.path(z);if(H.$isSingleNested){let U=$.$get(z);if(U)D.push(U)}else if(H.$isMongooseDocumentArray){let U=$.$get(z);if(U?.length){for(let Q of U)if(Q)D.push(Q)}}}let G=$.modifiedPaths();for(let z of D)if(z.$basePath){let H=z.$__pathRelativeToParent();for(let Q of z.modifiedPaths())Y.delete(H+"."+Q);let U=z.$parent();if(U==null)throw Error("Cannot validate subdocument that does not have a parent");if($.$isModified(H,null,G)&&!Object.hasOwn(U.$__.activePaths.getStatePaths("modify"),H)&&!U.$isDefault(H)){if(Y.add(H),$.$__.pathsToScopes==null)$.$__.pathsToScopes={};if($.$__.pathsToScopes[H]=z.$isDocumentArrayElement?z.__parentArray:z.$parent(),X[H]={skipSchemaValidators:!0},z.$isDocumentArrayElement&&z.__index!=null)X[H].index=z.__index}}}for(let D of Y){let G=$.$__schema.path(D);if(!G)continue;if(G.$isMongooseDocumentArray){for(let z of Y)if(z==null||z.startsWith(G.path+"."))Y.delete(z)}if(!G.schema&&!G.embeddedSchemaType&&G.validators.length===0&&!G.$parentSchemaDocArray)Y.delete(D);else if(G.$isMongooseArray&&!G.$isMongooseDocumentArray&&!G.embeddedSchemaType.$isMongooseArray&&G.validators.length===0&&G.embeddedSchemaType.validators.length===0)Y.delete(D)}if(Array.isArray(F))Y=PY0(Y,F);else if(Array.isArray(A))Y=RY0(Y,A);MY0($,Y);let Z={skipArrays:!0};for(let D of Y)if($.$__schema.nested[D]){let G=$.$__getValue(D);if(HY0(G))G=G.toObject({transform:!1});let z=AY0(G,D,Z,$.$__schema),H=$.$__schema.singleNestedPaths;for(let U of Object.keys(z))if(!Object.hasOwn(H,U))W(U)}for(let D of Y){let G=$.$__schema.path(D);if(!G)continue;if(G.$parentSchemaDocArray&&typeof G.$parentSchemaDocArray.path==="string")Y.add(G.$parentSchemaDocArray.path);if(!G.$isSchemaMap)continue;let z=$.$__getValue(D);if(z==null)continue;for(let H of z.keys())Y.add(D+"."+H)}return Y=Array.from(Y),[Y,X]}function MY0($,F){for(let A of F){let J=$.$__schema.path(A);if(!J)continue;if(!J.$isMongooseArray||!Array.isArray(J)&&J.$isMongooseDocumentArray&&!J?.schemaOptions?.required)continue;if(J.$isMongooseArray&&!J.$isMongooseDocumentArray&&!J.embeddedSchemaType.$isMongooseArray&&J.embeddedSchemaType.validators.length===0)continue;let X=$.$__getValue(A);wM(X,F,A)}}function wM($,F,A){if($!=null){let J=$.length;for(let X=0;X<J;++X)if(Array.isArray($[X]))wM($[X],F,A+"."+X);else F.add(A+"."+X)}}/*!
 * ignore
 */q1.prototype._execDocumentPreHooks=async function(F,...A){return this.$__middleware.execPre(F,this,[...A])};/*!
 * ignore
 */q1.prototype._execDocumentPostHooks=async function(F,A){return this.$__middleware.execPost(F,this,[this],{error:A})};/*!
 * ignore
 */q1.prototype.$__validate=async function(F,A){try{[A]=await this._execDocumentPreHooks("validate",A)}catch(L){await this._execDocumentPostHooks("validate",L);return}if(this.$__.saveOptions&&this.$__.saveOptions.pathsToSave&&!F)F=[...this.$__.saveOptions.pathsToSave];let J=A&&typeof A==="object"&&"validateModifiedOnly"in A,X=A?.pathsToSkip||null,Y;if(J)Y=!!A.validateModifiedOnly;else Y=this.$__schema.options.validateModifiedOnly;let W=A?.validateAllPaths;if(W){if(X)throw TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(F)throw TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`");if(J&&Y)throw TypeError("Cannot set both `validateAllPaths` and `validateModifiedOnly`")}let Z=this,D=()=>{let L=this.$__.validationError;if(this.$__.validationError=null,this.$__.validating=null,Y&&L!=null){let E=Object.keys(L.errors);for(let V of E)if(!this.$isModified(V))delete L.errors[V];if(H0.hasOwnKeys(L.errors)===!1)L=void 0}if(this.$__.cachedRequired={},this.$emit("validate",Z),this.constructor.emit("validate",Z),L){for(let E in L.errors)if(!this[UY0]&&L.errors[E]instanceof k3.CastError)this.invalidate(E,L.errors[E]);return L}},G,z;if(W){G=new Set(Object.keys(this.$__schema.paths));for(let L of G){if(!this.$__schema.path(L)?.$isMongooseArray)continue;let V=this.$__getValue(L);if(!V)continue;wM(V,G,L)}G=[...G],z={}}else{let L=WU1(this,F,X,A?._nestedValidate);G=Y?L[0].filter((E)=>this.$isModified(E)):L[0],z=L[1]}if(typeof F==="string")F=F.split(" ");if(G.length===0){let L=D();await this._execDocumentPostHooks("validate",L);return}let H={},U=this.$__.saveOptions?.pathsToSave,Q=[];if(Array.isArray(U)){U=new Set(U);for(let L of G){if(!U.has(L))continue;Q.push(q(L))}}else for(let L of G)Q.push(q(L));await Promise.all(Q);let B=D();await this._execDocumentPostHooks("validate",B);async function q(L){if(L==null||H[L])return;H[L]=!0;let E=Z.$__schema.path(L);if(!E)return;if(!Z.$isValid(L))return;if(E[LY0]!=null&&L!==E.path)return;let V=Z.$__getValue(L),R;if(R=Z.$populated(L))V=R;else if(V?.$__?.wasPopulated)V=V._doc._id;let N=Z.$__.pathsToScopes!=null&&L in Z.$__.pathsToScopes?Z.$__.pathsToScopes[L]:Z,S={...z[L],path:L,validateAllPaths:W,_nestedValidate:!0};try{await E.doValidate(V,N,S)}catch(C){if((E.$isSingleNested||E.$isArraySubdocument||E.$isMongooseDocumentArray)&&C instanceof BM)return;Z.invalidate(L,C,void 0,!0)}}};/*!
 * ignore
 */function PY0($,F){let A=new Set(F),J=new Map([]);for(let Y of F){if(Y.indexOf(".")===-1)continue;let W=Y.split("."),Z=W[0];for(let D=1;D<W.length;++D)J.set(Z,Y),Z=Z+"."+W[D]}let X=new Set;for(let Y of $)if(A.has(Y))X.add(Y);else if(J.has(Y))X.add(J.get(Y));return X}/*!
 * ignore
 */function RY0($,F){return F=new Set(F),$=Array.from($).filter((A)=>!F.has(A)),new Set($)}q1.prototype.validateSync=function($,F){let A=this;if(arguments.length===1&&typeof arguments[0]==="object"&&!Array.isArray(arguments[0]))F=arguments[0],$=null;let J=F&&typeof F==="object"&&"validateModifiedOnly"in F,X;if(J)X=!!F.validateModifiedOnly;else X=this.$__schema.options.validateModifiedOnly;let Y=F?.pathsToSkip,W=F?.validateAllPaths;if(W){if(Y)throw TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if($)throw TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`")}if(typeof $==="string")$=$.indexOf(" ")===-1?[$]:$.split(" ");else if(typeof Y==="string"&&Y.indexOf(" ")!==-1)Y=Y.split(" ");let Z,D;if(W){Z=new Set(Object.keys(this.$__schema.paths));for(let H of Z){if(!this.$__schema.path(H)?.$isMongooseArray)continue;let Q=this.$__getValue(H);if(!Q)continue;wM(Q,Z,H)}Z=[...Z],D={}}else{let H=WU1(this,$,Y);Z=X?H[0].filter((U)=>this.$isModified(U)):H[0],D=H[1]}let G={};for(let H=0,U=Z.length;H<U;++H){let Q=Z[H];if(G[Q])continue;G[Q]=!0;let B=A.$__schema.path(Q);if(!B)continue;if(!A.$isValid(Q))continue;let q=A.$__getValue(Q),L=B.doValidateSync(q,A,{skipSchemaValidators:D[Q],path:Q,validateModifiedOnly:X,validateAllPaths:W});if(L){if((B.$isSingleNested||B.$isArraySubdocument||B.$isMongooseDocumentArray)&&L instanceof BM)continue;A.invalidate(Q,L,void 0,!0)}}let z=A.$__.validationError;if(A.$__.validationError=void 0,A.$emit("validate",A),A.constructor.emit("validate",A),z){for(let H in z.errors)if(z.errors[H]instanceof k3.CastError)A.invalidate(H,z.errors[H])}return z};q1.prototype.invalidate=function($,F,A,J){if(!this.$__.validationError)this.$__.validationError=new BM(this);if(this.$__.validationError.errors[$])return;if(!F||typeof F==="string")F=new oH1({path:$,message:F,type:J||"user defined",value:A});if(this.$__.validationError===F)return this.$__.validationError;return this.$__.validationError.addError($,F),this.$__.validationError};q1.prototype.$markValid=function($){if(!this.$__.validationError?.errors[$])return;if(delete this.$__.validationError.errors[$],H0.hasOwnKeys(this.$__.validationError.errors)===!1)this.$__.validationError=null};/*!
 * ignore
 */function IY0($,F){if(!$.$__.validationError)return;let A=Object.keys($.$__.validationError.errors);for(let J of A)if(J.startsWith(F+"."))delete $.$__.validationError.errors[J];if(H0.hasOwnKeys($.$__.validationError.errors)===!1)$.$__.validationError=null}/*!
 * ignore
 */function TY0($,F,A){let J=F.schema;if(J==null)return;for(let X of Object.keys(J.paths)){let Y=J.paths[X];if(Y.$immutableSetter==null)continue;let W=A==null?void 0:A.$__getValue(X);Y.$immutableSetter.call($,W)}}q1.prototype.$isValid=function($){if(this.$__.validationError==null||H0.hasOwnKeys(this.$__.validationError.errors)===!1)return!0;if($==null)return!1;if($.indexOf(" ")!==-1)$=$.split(" ");if(Array.isArray($))return $.some((F)=>this.$__.validationError.errors[F]==null);return this.$__.validationError.errors[$]==null};q1.prototype.$__reset=function(){let F=this,A=!this.$isSubdocument?this.$getAllSubdocs({useCache:!0}):null;if(A?.length>0)for(let J of A)J.$__reset();return this.$__dirty().forEach(function(J){let X=J.value;if(X&&typeof X.clearAtomics==="function")X.clearAtomics();else if(X&&X[b3])X[hB]=X[b3],X[b3]={}}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths("modify")),default:Object.assign({},this.$__.activePaths.getStatePaths("default"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.$errors=void 0,F=this,this.$__schema.requiredPaths().forEach(function(J){F.$__.activePaths.require(J)}),this};/*!
 * ignore
 */q1.prototype.$__undoReset=function(){if(this.$__.backup?.activePaths==null)return;this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;for(let F of this.$__dirty()){let A=F.value;if(A?.[b3]&&A[hB])A[b3]=A[hB]}if(!this.$isSubdocument)for(let F of this.$getAllSubdocs())F.$__undoReset()};q1.prototype.$__dirty=function(){let $=this,F=this.$__.activePaths.map("modify",function(X){return{path:X,value:$.$__getValue(X),schema:$.$__path(X)}});F=F.concat(this.$__.activePaths.map("default",function(X){if(X==="_id"||$.$__getValue(X)==null)return;return{path:X,value:$.$__getValue(X),schema:$.$__path(X)}}));let A=new Map(F.filter((X)=>X!=null).map((X)=>[X.path,X.value])),J=[];return F.forEach(function(X){if(!X)return;let Y=null,W=Jy(X.path);for(let Z=0;Z<W.length-1;Z++)if(A.has(W[Z])){Y=A.get(W[Z]);break}if(Y==null)J.push(X);else if(Y!=null&&Y[b3]!=null&&Y.hasAtomics())Y[b3]={},Y[b3].$set=Y}),J};q1.prototype.$__setSchema=function($){eX0($.tree,this,void 0,$.options);for(let F of Object.keys($.virtuals))$.virtuals[F]._applyDefaultGetters();if($.path("schema")==null)this.schema=$;this.$__schema=$,this.$__middleware=$._getDocumentMiddleware(),this[KY0]=$};q1.prototype.$__getArrayPathsToValidate=function(){return KM||(KM=EZ()),this.$__.activePaths.map("init","modify",function($){return this.$__getValue($)}.bind(this)).filter(function($){return $&&Array.isArray($)&&H0.isMongooseDocumentArray($)&&$.length}).reduce(function($,F){return $.concat(F)},[]).filter(function($){return $})};q1.prototype.$getAllSubdocs=function($){if($?.useCache&&this.$__.saveOptions?.__subdocs)return this.$__.saveOptions.__subdocs;KM||(KM=EZ()),uB=uB||Sz();let F=[];function A(J){let X=[];for(let{model:Y}of J.$__schema.childSchemas){let W=J.$__getValue(Y.path);if(W==null)continue;if(W.$__)X.push(W);if(Array.isArray(W)){for(let Z of W)if(Z?.$__)X.push(Z)}if(W instanceof Map){for(let Z of W.values())if(Z?.$__)X.push(Z)}}for(let Y of X)A(Y);F.push(...X)}if(A(this),this.$__.saveOptions)this.$__.saveOptions.__subdocs=F;return F};/*!
 * Runs queued functions
 */function jY0($){let F=$.$__schema&&$.$__schema.callQueue;if(!F.length)return;for(let A of F)if(A[0]!=="pre"&&A[0]!=="post"&&A[0]!=="on")$[A[0]].apply($,A[1])}/*!
 * ignore
 */q1.prototype.$__handleReject=function(F){if(this.$listeners("error").length)this.$emit("error",F);else if(this.constructor.listeners?.("error").length)this.constructor.emit("error",F)};q1.prototype.$toObject=function($,F){let A=this.$__schema._defaultToObjectOptions(F),J=this.$__hasOnlyPrimitiveValues();$=H0.isPOJO($)?{...$}:{},$._calledWithOptions=$._calledWithOptions||{...$};let X;if($._calledWithOptions.minimize!=null)X=$.minimize;else if(this.$__schemaTypeOptions?.minimize!=null)X=this.$__schemaTypeOptions.minimize;else if(A?.minimize!=null)X=A.minimize;else X=this.$__schema.options.minimize;if($.minimize=X,!J)$._seen=$._seen||new Map;let Y=$._calledWithOptions.depopulate??A?.depopulate??$.depopulate??!1;if(Y&&$._isNested&&this.$__.wasPopulated)return M$(this.$__.wasPopulated.value||this._doc._id,$);if(Y)$.depopulate=!0;if(A!=null){for(let Q of Object.keys(A))if($[Q]==null)$[Q]=A[Q]}$._isNested=!0,$.json=F,$.minimize=X;let W=$._parentOptions;$._parentOptions=this.$isSubdocument?$:null;let Z=$._calledWithOptions.schemaFieldsOnly??$.schemaFieldsOnly??A.schemaFieldsOnly??!1,D;if(J&&!$.flattenObjectIds)D=this.$__toObjectShallow(Z);else if(Z){D={};for(let Q of Object.keys(this.$__schema.paths)){let B=this.$__getValue(Q);if(B===void 0)continue;let q=Q,L=D;if(Q.indexOf(".")!==-1){let E=Q.split(".");q=E[E.length-1];for(let V=0;V<E.length-1;++V)L[E[V]]=L[E[V]]??{},L=L[E[V]]}if(B===null){L[q]=null;continue}L[q]=M$(B,$)}}else D=M$(this._doc,$)||{};let G=$._calledWithOptions.getters??$.getters??A.getters??!1;if(G){if(OY0(this,D),$.minimize)D=ZY0(D)||{}}let z=$._calledWithOptions.virtuals??A.virtuals??W?.virtuals??void 0;if(z||G&&z!==!1)Xy(this,D,$,$);if($.versionKey===!1&&this.$__schema.options.versionKey)delete D[this.$__schema.options.versionKey];let H=$._calledWithOptions.transform??!0,U=void 0;if(H===!0)U=A.transform;else if(typeof H==="function")U=H;if(H)SY0(this,D);if($.useProjection)_Y0(this,D);if(typeof U==="function"){let Q=U(this,D,$);if(typeof Q<"u")D=Q}return D};/*!
 * Internal shallow clone alternative to `$toObject()`: much faster, no options processing
 */q1.prototype.$__toObjectShallow=function(F){let A={};if(this._doc!=null){let J=F?Object.keys(this.$__schema.paths):Object.keys(this._doc);for(let X of J){let Y=this._doc[X];if(Y instanceof Date)A[X]=new Date(Y);else if(Y!==void 0)A[X]=Y}}return A};q1.prototype.toObject=function($){return this.$toObject($)};/*!
 * Applies virtuals properties to `json`.
 */function Xy($,F,A,J){let X=$.$__schema,Y=X.virtuals,W=Object.keys(Y),Z=W.length,D=Z,G,z,H=$._doc,U,Q=typeof J?.aliases==="boolean"?J.aliases:!0;A=A||{};let B=null;if(Array.isArray(A.virtuals))B=new Set(A.virtuals);else if(A.virtuals?.pathsToSkip){B=new Set(W);for(let q=0;q<A.virtuals.pathsToSkip.length;q++)if(B.has(A.virtuals.pathsToSkip[q]))B.delete(A.virtuals.pathsToSkip[q])}if(!H)return F;for(Z=0;Z<D;++Z){if(G=W[Z],B!=null&&!B.has(G))continue;if(!Q&&Object.hasOwn(X.aliases,G))continue;if(z=G,A.path!=null){if(!G.startsWith(A.path+"."))continue;z=G.substring(A.path.length+1)}if(z.indexOf(".")===-1&&z===G){if(U=Y[G].applyGetters(void 0,$),U===void 0)continue;U=M$(U,A),F[z]=U;continue}let q=z.split(".");if(U=M$($.get(G),A),U===void 0)continue;let L=q.length;H=F;for(let E=0;E<L-1;++E)H[q[E]]=H[q[E]]||{},H=H[q[E]];H[q[L-1]]=U}return F}function OY0($,F){let A=$.$__schema,J=Object.keys(A.paths),X=J.length,Y,W=$._doc,Z;if(!W)return F;while(X--){Y=J[X];let D=Y.split("."),G=D.length,z=G-1,H=F,U;if(W=$._doc,!$.$__isSelected(Y))continue;for(let Q=0;Q<G;++Q){if(U=D[Q],Z=W[U],H!=null&&typeof H!=="object")break;else if(Q===z){if(H[U]=A.paths[Y].applyGetters(H[U],$),Array.isArray(H[U])&&A.paths[Y].embeddedSchemaType)for(let B=0;B<H[U].length;++B)H[U][B]=A.paths[Y].embeddedSchemaType.applyGetters(H[U][B],$)}else if(Z==null){if(U in W)H[U]=Z;break}else H=H[U]||(H[U]={});W=Z}}return F}function SY0($,F){let A=$.$__schema,J=Object.keys(A.paths||{});if(!$._doc)return F;for(let Y of J){let W=A.paths[Y],Z=W.options.transform??W.constructor?.defaultOptions?.transform,D=W.embeddedSchemaType?.options?.transform??W.embeddedSchemaType?.constructor?.defaultOptions?.transform;if(typeof Z==="function"){let G=$.$get(Y);if(G===void 0)continue;let z=Z.call($,G);tH1(Y,z),H0.setValue(Y,z,F)}else if(typeof D==="function"){let G=$.$get(Y);if(G===void 0)continue;let z=[].concat(G);for(let H=0;H<z.length;++H){let U=D.call($,z[H]);z[H]=U,tH1(Y,U)}F[Y]=z}}return F}function tH1($,F){if(zY0(F))throw Error("`transform` function must be synchronous, but the transform on path `"+$+"` returned a promise.")}/*!
 * ignore
 */function _Y0($,F){let A=$.$__schema,J=Object.keys(A.paths||{});if(!$._doc)return F;let Y=$.$__.selected;if(Y===void 0)Y={},GY0.applyPaths(Y,A);if(Y==null||H0.hasOwnKeys(Y)===!1)return F;for(let W of J)if(Y[W]!=null&&!Y[W])delete F[W];return F}q1.prototype.toJSON=function($){return this.$toObject($,!0)};/*!
 * ignore
 */q1.prototype.ownerDocument=function(){return this};q1.prototype.parent=function(){if(this.$isSubdocument||this.$__.wasPopulated)return this.$__.parent;return this};q1.prototype.$parent=q1.prototype.parent;q1.prototype.$__setParent=function(F){this.$__.parent=F};q1.prototype.inspect=function($){let F=H0.isPOJO($),A;if(F)A=$,A.minimize=!1;let J=arguments.length>0?this.toObject(A):this.toObject();if(J==null)return"MongooseDocument { "+J+" }";return J};if(Fy.custom)q1.prototype[Fy.custom]=q1.prototype.inspect;q1.prototype.toString=function(){let $=this.inspect();if(typeof $==="string")return $;return Fy($)};q1.prototype.equals=function($){if(!$)return!1;let F=this.$__getValue("_id"),A=$.$__!=null?$.$__getValue("_id"):$;if(!F&&!A)return QM(this,$);return F&&F.equals?F.equals(A):F===A};q1.prototype.populate=async function(){let F={},A=[...arguments];if(typeof A[A.length-1]==="function")throw new k3("Document.prototype.populate() no longer accepts a callback");if(A.length!==0){let Y=H0.populate.apply(null,A);for(let W of Y)F[W.path]=W}let J=H0.object.vals(F),X=this.constructor;if(this.$__isNested){X=this.$__[qY0].constructor;let Y=this.$__.nestedPath;J.forEach(function(W){W.path=Y+"."+W.path})}if(this.$session()!=null){let Y=this.$session();J.forEach((W)=>{if(W.options==null){W.options={session:Y};return}if(!("session"in W.options))W.options.session=Y})}return J.forEach((Y)=>{Y._localModel=X}),X.populate(this,J)};q1.prototype.$getPopulatedDocs=function(){let F=[];if(this.$__.populated!=null)F=F.concat(Object.keys(this.$__.populated));let A=[];for(let J of F){let X=this.$get(J);if(Array.isArray(X))A=A.concat(X);else if(X instanceof q1)A.push(X)}return A};q1.prototype.populated=function($,F,A){if(F==null||F===!0){if(!this.$__.populated)return;if(typeof $!=="string")return;let X=$.endsWith(".$*")?$.replace(/\.\$\*$/,""):$,Y=this.$__.populated[X];if(Y)return F===!0?Y:Y.value;return}this.$__.populated||(this.$__.populated={}),this.$__.populated[$]={value:F,options:A};let J=$.split(".");for(let X=0;X<J.length-1;++X){let Y=J.slice(0,X+1).join("."),W=this.$get(Y);if(W?.$__!=null&&this.$populated(Y)){let Z=J.slice(X+1).join(".");W.$populated(Z,F,A);break}}return F};q1.prototype.$populated=q1.prototype.populated;q1.prototype.$assertPopulated=function(F,A){if(Array.isArray(F))return F.forEach((J)=>this.$assertPopulated(J,A)),this;if(arguments.length>1)this.$set(A);if(!this.$populated(F))throw new k3(`Expected path "${F}" to be populated`);return this};q1.prototype.depopulate=function($){if(typeof $==="string")$=$.indexOf(" ")===-1?[$]:$.split(" ");let F,A=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],J=this.$__?.populated||{};if(arguments.length===0){for(let Y of A)delete this.$$populatedVirtuals[Y],delete this._doc[Y],delete J[Y];let X=Object.keys(J);for(let Y of X){if(F=this.$populated(Y),!F)continue;if(delete J[Y],Array.isArray(F)){let W=H0.getValue(Y,this._doc);if(W.isMongooseArray){let Z=W.__array;for(let D=0;D<Z.length;++D){let G=Z[D];if(G==null)continue;Z[D]=G instanceof q1?G._doc._id:G._id}}else H0.setValue(Y,F,this._doc)}else H0.setValue(Y,F,this._doc)}return this}for(let X of $)if(F=this.$populated(X),delete J[X],A.indexOf(X)!==-1)delete this.$$populatedVirtuals[X],delete this._doc[X];else if(F)if(Array.isArray(F)){let Y=H0.getValue(X,this._doc);if(Y.isMongooseArray){let W=Y.__array;for(let Z=0;Z<W.length;++Z){let D=W[Z];if(D==null)continue;W[Z]=D instanceof q1?D._doc._id:D._id}}else H0.setValue(X,F,this._doc)}else H0.setValue(X,F,this._doc);return this};q1.prototype.$__fullPath=function($){return $||""};q1.prototype.getChanges=function(){let $=this.$__delta();return $?$[1]:{}};q1.prototype.$__delta=function(){let F=this.$__dirty(),A=this.$__schema.options.optimisticConcurrency;if(A)if(Array.isArray(A)){let D=new Set(A);if(this.modifiedPaths().some((z)=>D.has(z)))this.$__.version=F.length?3:1}else if(Array.isArray(A?.exclude)){let D=new Set(A.exclude);if(this.modifiedPaths().some((z)=>!D.has(z)))this.$__.version=F.length?3:1}else this.$__.version=F.length?3:1;if(!F.length&&this.$__.version!==3)return;let J={},X={},Y=F.length,W=[],Z=0;if(J._id=this._doc._id,J?._id?.$__!=null)J._id=J._id.toObject({transform:!1,depopulate:!0});for(;Z<Y;++Z){let D=F[Z],G=D.value,z=kY0(this,D.path,G);if(z){W.push(z);continue}if(!this.$populated(D.path,!0)&&this.$__.selected){let U=D.path.split("."),Q=U[0];if(this.$__.selected[Q]&&this.$__.selected[Q].$elemMatch)if(U.length>1&&U[1]==0&&typeof J[Q]>"u")J[Q]=this.$__.selected[Q],U[1]="$",D.path=U.join(".");else{W.push(D.path);continue}}if(this.$isDefault(D.path)&&this.$__.selected){if(D.path.indexOf(".")===-1&&nH1(this.$__.selected,D.path))continue;if(Jy(D.path).find((Q)=>nH1(this.$__.isSelected,Q)))continue}if(W.length)continue;if(G===void 0)XJ(this,J,X,D,1,"$unset");else if(G===null)XJ(this,J,X,D,null);else if(typeof G.getAtomics==="function")bY0(this,J,X,D,G);else if(G[aX0.pathSymbol]&&Buffer.isBuffer(G))G=G.toObject(),XJ(this,J,X,D,G);else if(this.$__.primitiveAtomics?.[D.path]!=null){let U=this.$__.primitiveAtomics[D.path],Q=FY0(U);XJ(this,J,X,D,U[Q],Q)}else G=M$(G,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}),XJ(this,J,X,D,G)}if(W.length)throw new nX0(W);if(this.$__.version)this.$__version(J,X);if(H0.hasOwnKeys(X)===!1)return[J,null];return[J,X]};function kY0($,F,A){let J=$.$populated(F,!0);if(!J&&$.$__.selected){let Y=F.split(".")[0];if($.$__.selected[Y+".$"])return Y}if(!(J&&H0.isMongooseArray(A)))return;if(J.options.match||J.options.options&&Object.hasOwn(J.options.options,"limit")||J.options.options?.skip||J.options.select&&(J.options.select._id===0||/\s?-_id\s?/.test(J.options.select))){let Y=A[b3];if(H0.hasOwnKeys(Y)===!1||Y.$set||Y.$pop)return F}}function XJ($,F,A,J,X,Y){if(Y||(Y="$set"),!A[Y])A[Y]={};if(A[Y][J.path]=X,$.$__schema.options.versionKey===!1)return;if(xY0($,J.path))return;if((3&$.$__.version)===3)return;if($.$__schema.options.optimisticConcurrency===!0||Array.isArray($.$__schema.options.optimisticConcurrency)||Array.isArray($.$__schema.options.optimisticConcurrency?.exclude))return;switch(Y){case"$set":case"$unset":case"$pop":case"$pull":case"$pullAll":case"$push":case"$addToSet":case"$inc":break;default:return}if(Y==="$push"||Y==="$addToSet"||Y==="$pullAll"||Y==="$pull")if(/\.\d+\.|\.\d+$/.test(J.path))$.$__.version=3;else $.$__.version|=2;else if(/^\$p/.test(Y))$.$__.version=3;else if(Array.isArray(X))$.$__.version=3;else if(/\.\d+\.|\.\d+$/.test(J.path))$.$__.version|=1}function bY0($,F,A,J,X){if(A.$set?.[J.path])return;if(typeof X.getAtomics==="function"){X.getAtomics().forEach(function(H){let U=H[0],Q=H[1];XJ($,F,A,J,Q,U)});return}if(typeof X.$__getAtomics==="function"){X.$__getAtomics().forEach(function(H){let U=H[0],Q=H[1];XJ($,F,A,J,Q,U)});return}let Y=X[b3],W=Object.keys(Y),Z=W.length,D,G;if(Z===0){if(H0.isMongooseObject(X))X=X.toObject({depopulate:1,_isNested:!0});else if(X.valueOf)X=X.valueOf();return XJ($,F,A,J,X)}function z(H){return H0.isMongooseObject(H)?H.toObject({depopulate:1,_isNested:!0}):H}while(Z--){if(G=W[Z],D=Y[G],H0.isMongooseObject(D))D=D.toObject({depopulate:!0,transform:!1,_isNested:!0});else if(Array.isArray(D))D=D.map(z);else if(D.valueOf)D=D.valueOf();if(G==="$addToSet")D={$each:D};XJ($,F,A,J,D,G)}}function xY0($,F){let A=$.$__schema.options.skipVersioning;if(!A)return!1;return F=F.replace(/\.\d+\./,"."),A[F]}q1.prototype.$clone=function(){let F=new this.constructor;if(F.$isNew=this.$isNew,this._doc)F._doc=M$(this._doc,{retainDocuments:!0,parentDoc:F});if(this.$__){let J=new this.$__.constructor;for(let X of Object.getOwnPropertyNames(this.$__)){if(X==="activePaths")continue;J[X]=M$(this.$__[X])}Object.assign(J.activePaths,M$({...this.$__.activePaths})),F.$__=J}return F};q1.prototype.$createModifiedPathsSnapshot=function(){let F=new WeakMap;if(!this.$isSubdocument){let A=this.$getAllSubdocs();for(let J of A)F.set(J,J.$__.activePaths.clone())}return new tX0(F,this.$__.activePaths.clone(),this.$__.version)};q1.prototype.$restoreModifiedPathsSnapshot=function(F){if(this.$__.activePaths=F.activePaths.clone(),this.$__.version=F.version,!this.$isSubdocument){let A=this.$getAllSubdocs();for(let J of A)if(F.subdocSnapshot.has(J))J.$__.activePaths=F.subdocSnapshot.get(J)}return this};q1.prototype.$clearModifiedPaths=function(){if(this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("init"),this.$__.version=0,!this.$isSubdocument){let F=this.$getAllSubdocs();for(let A of F)A.$clearModifiedPaths()}return this};/*!
 * Check if the given document only has primitive values
 */q1.prototype.$__hasOnlyPrimitiveValues=function(){return!this.$__.populated&&!this.$__.wasPopulated&&(this._doc==null||Object.values(this._doc).every((F)=>{return F==null||typeof F!=="object"||H0.isNativeObject(F)&&!Array.isArray(F)||iH1(F,"ObjectId")||iH1(F,"Decimal128")}))};/*!
 * Increment this document's version if necessary.
 */q1.prototype._applyVersionIncrement=function(){if(!this.$__.version)return;let F=(2&this.$__.version)===2;if(this.$__.version=void 0,F){let A=this.$__schema.options.versionKey,J=this.$__getValue(A)||0;this.$__setValue(A,J+1)}};/*!
 * Increment this document's version if necessary.
 */q1.prototype._applyVersionIncrement=function(){if(!this.$__.version)return;let F=(2&this.$__.version)===2;if(this.$__.version=void 0,F){let A=this.$__schema.options.versionKey,J=this.$__getValue(A)||0;this.$__setValue(A,J+1)}};/*!
 * Module exports.
 */q1.VERSION_WHERE=1;q1.VERSION_INC=2;q1.VERSION_ALL=3;q1.ValidationError=BM;DU1.exports=ZU1=q1});var Z0=O((iY0)=>{/*!
 * Module dependencies.
 */var gY0=w0().UUID,fY0=wx(),KU1=O7(),vY0=sX(),BU1=Iv(),Wy=W4(),yY0=TX(),uY0=UZ(),wU1=yC(),qU1=Dz1(),FY=t9(),hY0=Nz(),mY0=pf(),mB=bB(),dY0=lC(),dB=HZ(),{trustedSymbol:kz}=Cz(),Yy;iY0.specialProperties=dB;iY0.isMongooseArray=wU1.isMongooseArray;iY0.isMongooseDocumentArray=qU1.isMongooseDocumentArray;iY0.registerMongooseArray=wU1.registerMongooseArray;iY0.registerMongooseDocumentArray=qU1.registerMongooseDocumentArray;var Zy=/\s/,Dy=/\s+/;iY0.toCollectionName=function($,F){if($==="system.profile")return $;if($==="system.indexes")return $;if(typeof F==="function"){if(typeof $!=="string")throw TypeError("Collection name must be a string");if($.length===0)throw TypeError("Collection name cannot be empty");return F($)}return $};iY0.deepEqual=function $(F,A){if(F===A)return!0;if(typeof F!=="object"||typeof A!=="object")return F===A;if(F instanceof Date&&A instanceof Date)return F.getTime()===A.getTime();if(FY(F,"ObjectId")&&FY(A,"ObjectId")||FY(F,"Decimal128")&&FY(A,"Decimal128"))return F.toString()===A.toString();if(F instanceof RegExp&&A instanceof RegExp)return F.source===A.source&&F.ignoreCase===A.ignoreCase&&F.multiline===A.multiline&&F.global===A.global&&F.dotAll===A.dotAll&&F.unicode===A.unicode&&F.sticky===A.sticky&&F.hasIndices===A.hasIndices;if(F==null||A==null)return!1;if(F.prototype!==A.prototype)return!1;if(F instanceof Map||A instanceof Map){if(!(F instanceof Map)||!(A instanceof Map))return!1;return $(Array.from(F.keys()),Array.from(A.keys()))&&$(Array.from(F.values()),Array.from(A.values()))}if(F instanceof Number&&A instanceof Number)return F.valueOf()===A.valueOf();if(Buffer.isBuffer(F))return iY0.buffer.areEqual(F,A);if(Array.isArray(F)||Array.isArray(A)){if(!Array.isArray(F)||!Array.isArray(A))return!1;let W=F.length;if(W!==A.length)return!1;for(let Z=0;Z<W;++Z)if(!$(F[Z],A[Z]))return!1;return!0}if(F.$__!=null)F=F._doc;else if(mB(F))F=F.toObject();if(A.$__!=null)A=A._doc;else if(mB(A))A=A.toObject();let J=Object.keys(F),X=Object.keys(A),Y=J.length;if(Y!==X.length)return!1;for(let W=Y-1;W>=0;W--)if(J[W]!==X[W])return!1;for(let W of J)if(!$(F[W],A[W]))return!1;return!0};iY0.last=function($){if($==null)return;if($.length>0)return $[$.length-1];return};/*!
 * ignore
 */iY0.cloneArrays=function(F){if(!Array.isArray(F))return F;return F.map((A)=>iY0.cloneArrays(A))};/*!
 * ignore
 */iY0.omit=function(F,A){if(A==null)return Object.assign({},F);if(!Array.isArray(A))A=[A];let J=Object.assign({},F);for(let X of A)delete J[X];return J};iY0.clonePOJOsAndArrays=function(F){if(F==null)return F;if(F.$__!=null)return F;if(hY0(F)){F={...F};for(let A of Object.keys(F))F[A]=iY0.clonePOJOsAndArrays(F[A]);return F}if(Array.isArray(F)){F=[...F];for(let A=0;A<F.length;++A)F[A]=iY0.clonePOJOsAndArrays(F[A]);return F}return F};iY0.merge=function $(F,A,J,X){if(J=J||{},A==null)return F;let Y=Object.keys(A),W=0,Z=Y.length,D;if(A[kz])F[kz]=A[kz];X=X||"";let G=J.omitNested||{};while(W<Z){if(D=Y[W++],J.omit&&J.omit[D])continue;if(G[X])continue;if(dB.has(D))continue;if(F[D]==null)F[D]=iY0.clonePOJOsAndArrays(A[D]);else if(iY0.isObject(A[D])){if(!iY0.isObject(F[D]))F[D]={};if(A[D]!=null){if(J.isDiscriminatorSchemaMerge&&(A[D].$isSingleNested&&F[D].$isMongooseDocumentArray)||A[D].$isMongooseDocumentArray&&F[D].$isSingleNested)continue;else if(A[D].instanceOfSchema){if(F[D].instanceOfSchema)dY0(F[D],A[D].clone(),J.isDiscriminatorSchemaMerge);else F[D]=A[D].clone();continue}else if(FY(A[D],"ObjectId")){F[D]=new vY0(A[D]);continue}}$(F[D],A[D],J,X?X+"."+D:D)}else if(J.overwrite)F[D]=A[D]}return F};iY0.toObject=function $(F){Yy||(Yy=pF());let A;if(F==null)return F;if(F instanceof Yy)return F.toObject();if(Array.isArray(F)){A=[];for(let J of F)A.push($(J));return A}if(iY0.isPOJO(F)){if(A={},F[kz])A[kz]=F[kz];for(let J of Object.keys(F)){if(dB.has(J))continue;A[J]=$(F[J])}return A}return F};iY0.isObject=uY0;iY0.isPOJO=Nz();iY0.isNonBuiltinObject=function(F){return typeof F==="object"&&!iY0.isNativeObject(F)&&!iY0.isMongooseType(F)&&!(F instanceof gY0)&&F!=null};iY0.isNativeObject=function($){return Array.isArray($)||$ instanceof Date||$ instanceof Boolean||$ instanceof Number||$ instanceof String};iY0.isEmptyObject=function(F){if(F==null||typeof F!=="object")return!1;return iY0.hasOwnKeys(F)===!1};iY0.hasOwnKeys=function(F){for(let A in F)if(Object.prototype.hasOwnProperty.call(F,A))return!0;return!1};iY0.hasKey=function(F,A){let J=Object.keys(F);for(let X of J){if(X===A)return!0;if(iY0.isPOJO(F[X])&&iY0.hasKey(F[X],A))return!0}return!1};iY0.tick=function(F){if(typeof F!=="function")return;return function(){try{F.apply(this,arguments)}catch(A){yY0(function(){throw A})}}};iY0.isMongooseType=function($){return FY($,"ObjectId")||FY($,"Decimal128")||$ instanceof Buffer};iY0.isMongooseObject=mB;iY0.expires=function(F){if(!(F&&F.constructor.name==="Object"))return;if(!("expires"in F))return;F.expireAfterSeconds=typeof F.expires!=="string"?F.expires:Math.round(fY0(F.expires)/1000),delete F.expires};iY0.populate=function(F,A,J,X,Y,W,Z,D){let G=null;if(arguments.length===1){if(F instanceof BU1)return F._docs={},F._childDocs=[],[F];if(Array.isArray(F))return z(F).map((U)=>iY0.populate(U)[0]);if(iY0.isObject(F))G=Object.assign({},F);else G={path:F}}else if(typeof J==="object")G={path:F,select:A,match:J,options:X};else G={path:F,select:A,model:J,match:X,options:Y,populate:W,justOne:Z,count:D};if(typeof G.path!=="string"&&!(Array.isArray(G.path)&&G.path.every((H)=>typeof H==="string")))throw TypeError("utils.populate: invalid path. Expected string or array of strings. Got typeof `"+typeof F+"`");return cY0(G);function z(H){let U=[];return H.forEach(function(Q){if(Zy.test(Q.path))Q.path.split(Dy).forEach(function(q){let L=Object.assign({},Q);L.path=q,U.push(L)});else U.push(Q)}),U}};function cY0($){if(Array.isArray($.populate)){let J=[];$.populate.forEach(function(X){if(Zy.test(X.path)){let Y=Object.assign({},X);Y.path.split(Dy).forEach(function(Z){Y.path=Z,J.push(iY0.populate(Y)[0])})}else J.push(iY0.populate(X)[0])}),$.populate=iY0.populate(J)}else if($.populate!=null&&typeof $.populate==="object")$.populate=iY0.populate($.populate);let F=[],A=Zy.test($.path)?$.path.split(Dy):Array.isArray($.path)?$.path:[$.path];if($.options!=null)$.options=Wy($.options);for(let J of A)F.push(new BU1(Object.assign({},$,{path:J})));return F}iY0.getValue=function($,F,A){return KU1.get($,F,pY0,A)};/*!
 * ignore
 */var lY0=Object.freeze({getters:!1});function pY0($,F){if(F==="$*"&&$ instanceof Map)return $;let A=$?._doc||$;if(A?.isMongooseArrayProxy)A=A.__array;return A instanceof Map?A.get(F,lY0):A[F]}iY0.setValue=function($,F,A,J,X){KU1.set($,F,A,"_doc",J,X)};iY0.object={};iY0.object.vals=function(F){if(F==null)return[];let A=Object.keys(F),J=A.length,X=[];while(J--)X.push(F[A[J]]);return X};iY0.isNullOrUndefined=function($){return $==null};/*!
 * ignore
 */iY0.array={};iY0.array.flatten=function $(F,A,J){return J||(J=[]),F.forEach(function(X){if(Array.isArray(X))$(X,A,J);else if(!A||A(X))J.push(X)}),J};/*!
 * ignore
 */iY0.hasUserDefinedProperty=function($,F){if($==null)return!1;if(Array.isArray(F)){for(let A of F)if(iY0.hasUserDefinedProperty($,A))return!0;return!1}if(Object.hasOwn($,F))return!0;if(typeof $==="object"&&F in $){let A=$[F];return A!==Object.prototype[F]&&A!==Array.prototype[F]}return!1};/*!
 * ignore
 */var GU1=Math.pow(2,32)-1;iY0.isArrayIndex=function($){if(typeof $==="number")return $>=0&&$<=GU1;if(typeof $==="string"){if(!/^\d+$/.test($))return!1;return $=+$,$>=0&&$<=GU1}return!1};iY0.array.unique=function($){let F=new Set,A=new Set,J=[];for(let X of $)if(typeof X==="number"||typeof X==="string"||X==null){if(F.has(X))continue;J.push(X),F.add(X)}else if(FY(X,"ObjectId")){if(A.has(X.toString()))continue;J.push(X),A.add(X.toString())}else J.push(X);return J};iY0.buffer={};iY0.buffer.areEqual=function($,F){if(!Buffer.isBuffer($))return!1;if(!Buffer.isBuffer(F))return!1;return $.equals(F)};iY0.getFunctionName=mY0;iY0.decorate=function($,F){for(let A in F){if(dB.has(A))continue;$[A]=F[A]}};iY0.mergeClone=function($,F){if(mB(F))F=F.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});let A=Object.keys(F),J=A.length,X=0,Y;while(X<J){if(Y=A[X++],dB.has(Y))continue;if(typeof $[Y]>"u")$[Y]=Wy(F[Y],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{let W=F[Y];if(W?.valueOf&&!(W instanceof Date))W=W.valueOf();if(iY0.isObject(W)){let Z=W;if(mB(W)&&!W.isMongooseBuffer)Z=Z.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});if(W.isMongooseBuffer)Z=Buffer.from(Z);iY0.mergeClone($[Y],Z)}else $[Y]=Wy(W,{flattenDecimals:!1})}}};iY0.each=function($,F){for(let A of $)F(A)};iY0.renameObjKey=function($,F,A){return Object.keys($).reduce((X,Y)=>{if(Y===F)X[A]=$[F];else X[Y]=$[Y];return X},{})};/*!
 * ignore
 */iY0.getOption=function($){let F=Array.prototype.slice.call(arguments,1);for(let A of F){if(A==null)continue;if(A[$]!=null)return A[$]}return null};/*!
 * ignore
 */iY0.noop=function(){};iY0.errorToPOJO=function(F){if(!(F instanceof Error))throw Error("`error` must be `instanceof Error`.");let J={};for(let X of Object.getOwnPropertyNames(F))J[X]=F[X];return J};/*!
 * ignore
 */iY0.warn=function(F){return process.emitWarning(F,{code:"MONGOOSE"})};iY0.injectTimestampsOption=function(F,A){if(A==null)return;F.timestamps=A}});var L4=O((VM,IU1)=>{/*!
 * Module dependencies.
 */var lB=T7(),RU1=_3(),RW0=cC(),IW0=Pv(),EM=W4(),zy=iG1(),TW0=rG1(),Hy=tG1(),jW0=s1().schemaTypeSymbol,NZ=Z0(),cB=s1().validatorErrorSymbol,OW0=s1().documentIsModified,NU1=s1().populateModelSymbol,Uy=lB.CastError,bz=lB.ValidatorError,SW0={_skipMarkModified:!0};function M0($,F,A,J){this[jW0]=!0,this.path=$,this.instance=A,this.schemaName=this.constructor.schemaName,this.validators=[],this.getters=Object.hasOwn(this.constructor,"getters")?this.constructor.getters.slice():[],this.setters=Object.hasOwn(this.constructor,"setters")?this.constructor.setters.slice():[],this.splitPath(),F=F||{};let X=this.constructor.defaultOptions||{},Y=Object.keys(X);for(let D of Y)if(D==="validate")this.validate(X.validate);else if(Object.hasOwn(X,D)&&!Object.hasOwn(F,D))F[D]=X[D];if(F.select==null)delete F.select;let W=this.OptionsConstructor||RU1;if(this.options=new W(F),this.parentSchema=J,this._index=null,NZ.hasUserDefinedProperty(this.options,"immutable"))this.$immutable=this.options.immutable,zy(this);let Z=Object.keys(this.options);for(let D of Z){if(D==="cast"){if(Array.isArray(this.options[D]))this.castFunction.apply(this,this.options[D]);else this.castFunction(this.options[D]);continue}if(NZ.hasUserDefinedProperty(this.options,D)&&typeof this[D]==="function"){if(D==="index"&&this._index){if(F.index===!1){let H=this._index;if(typeof H==="object"&&H!=null){if(H.unique)throw Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(H.sparse)throw Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}let G=F[D];if(D==="default"){this.default(G);continue}let z=Array.isArray(G)?G:[G];this[D].apply(this,z)}}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})}M0.prototype.OptionsConstructor=RU1;M0.prototype.path;M0.prototype.toJSON=function(){let F={...this};return delete F.parentSchema,F};M0.prototype.validators;M0.prototype.isRequired;M0.prototype.splitPath=function(){if(this._presplitPath!=null)return this._presplitPath;if(this.path==null)return;return this._presplitPath=this.path.indexOf(".")===-1?[this.path]:this.path.split("."),this._presplitPath};M0.cast=function(F){if(arguments.length===0)return this._cast;if(F===!1)F=(A)=>A;return this._cast=F,this._cast};M0.prototype.castFunction=function(F,A){if(arguments.length===0)return this._castFunction;if(F===!1)F=this.constructor._defaultCaster||((J)=>J);if(typeof F==="string")return this._castErrorMessage=F,this._castFunction;if(F!=null)this._castFunction=F;if(A!=null)this._castErrorMessage=A;return this._castFunction};M0.prototype.cast=function(){throw Error("Base SchemaType class does not implement a `cast()` function")};M0.set=function(F,A){if(!Object.hasOwn(this,"defaultOptions"))this.defaultOptions=Object.assign({},this.defaultOptions);this.defaultOptions[F]=A};M0.get=function($){this.getters=Object.hasOwn(this,"getters")?this.getters:[],this.getters.push($)};M0.prototype.default=function($){if(arguments.length===1){if($===void 0){this.defaultValue=void 0;return}if($?.instanceOfSchema)throw new lB("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=$,this.defaultValue}else if(arguments.length>1)this.defaultValue=[...arguments];return this.defaultValue};M0.prototype.index=function($){return this._index=$,NZ.expires(this._index),this};M0.prototype.unique=function(F,A){if(this._index===!1){if(!F)return;throw Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}if(!Object.hasOwn(this.options,"index")&&F===!1)return this;if(this._index==null||this._index===!0)this._index={};else if(typeof this._index==="string")this._index={type:this._index};if(this._index.unique=!!F,typeof A==="string")this._duplicateKeyErrorMessage=A;return this};M0.prototype.text=function($){if(this._index===!1){if(!$)return this;throw Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}if(!Object.hasOwn(this.options,"index")&&$===!1)return this;if(this._index===null||this._index===void 0||typeof this._index==="boolean")this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.text=$,this};M0.prototype.sparse=function($){if(this._index===!1){if(!$)return this;throw Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}if(!Object.hasOwn(this.options,"index")&&$===!1)return this;if(this._index==null||typeof this._index==="boolean")this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.sparse=$,this};M0.prototype.immutable=function($){return this.$immutable=$,zy(this),this};M0.prototype.transform=function($){return this.options.transform=$,this};M0.prototype.set=function($){if(typeof $!=="function")throw TypeError("A setter must be a function.");return this.setters.push($),this};M0.prototype.get=function($){if(typeof $!=="function")throw TypeError("A getter must be a function.");return this.getters.push($),this};M0.prototype.validateAll=function($){for(let F=0;F<$.length;F++)this.validate($[F]);return this};M0.prototype.validate=function($,F,A){if(typeof $==="function"||$&&NZ.getFunctionName($.constructor)==="RegExp"){let W;if(typeof F==="function")W={validator:$,message:F},W.type=A||"user defined";else if(F instanceof Object&&!A){if(W=Hy(F)?Object.assign({},F):EM(F),!W.message)W.message=W.msg;W.validator=$,W.type=W.type||"user defined"}else{if(F==null)F=lB.messages.general.default;if(!A)A="user defined";W={message:F,type:A,validator:$}}return this.validators.push(W),this}let J,X,Y;for(J=0,X=arguments.length;J<X;J++){if(Y=arguments[J],!NZ.isPOJO(Y)){let W="Invalid validator. Received ("+typeof Y+") "+Y+". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()";throw Error(W)}this.validate(Y.validator,Y)}return this};M0.prototype.required=function($,F){let A={};if(arguments.length>0&&$==null)return this.validators=this.validators.filter(function(Y){return Y.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(typeof $==="object")A=$,F=A.message||F,$=$.isRequired;if($===!1)return this.validators=this.validators.filter(function(Y){return Y.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;let J=this;if(this.isRequired=!0,this.requiredValidator=function(Y){let W=this?.$__?.cachedRequired;if(W!=null&&!this.$__isSelected(J.path)&&!this[OW0](J.path))return!0;if(W!=null&&J.path in W){let Z=W[J.path]?J.checkRequired(Y,this):!0;return delete W[J.path],Z}else if(typeof $==="function")return $.apply(this)?J.checkRequired(Y,this):!0;return J.checkRequired(Y,this)},this.originalRequiredValue=$,typeof $==="string")F=$,$=void 0;let X=F||lB.messages.general.required;return this.validators.unshift(Object.assign({},A,{validator:this.requiredValidator,message:X,type:"required"})),this};M0.prototype.ref=function($){return this.options.ref=$,this};M0.prototype.getDefault=function($,F,A){let J;if(this.defaultValue==null)return this.defaultValue;if(typeof this.defaultValue==="function")if(this.defaultValue===Date.now||this.defaultValue===Array||this.defaultValue.name.toLowerCase()==="objectid")J=this.defaultValue.call($);else J=this.defaultValue.call($,$);else J=this.defaultValue;if(J!=null){if(typeof J==="object"&&!this.options?.shared)J=EM(J);if(A?.skipCast)return this._applySetters(J,$);let X=this.applySetters(J,$,F,void 0,SW0);if(X&&!Array.isArray(X)&&X.$isSingleNested)X.$__parent=$;return X}return J};M0.prototype._applySetters=function($,F,A,J,X){let Y=$;if(A)return Y;let W=this.setters;for(let Z=W.length-1;Z>=0;Z--)Y=W[Z].call(F,Y,J,this,X);return Y};/*!
 * ignore
 */M0.prototype._castNullish=function(F){return F};M0.prototype.applySetters=function($,F,A,J,X){let Y=this._applySetters($,F,A,J,X);if(Y==null)return this._castNullish(Y);return Y=this.cast(Y,F,A,J,X),Y};M0.prototype.applyGetters=function($,F){let A=$,J=this.getters,X=J.length;if(X===0)return A;for(let Y=0;Y<X;++Y)A=J[Y].call(F,A,this);return A};M0.prototype.select=function(F){return this.selected=!!F,this};M0.prototype.doValidate=async function(F,A,J){let X=!1,Y=this.path,W=this.validators.filter((D)=>typeof D==="object"&&D!==null);if(!W.length)return;let Z=[];for(let D=0,G=W.length;D<G;++D){let z=W[D],H=z.validator,U,Q=Hy(z)?Object.assign({},z):EM(z);if(Q.path=J?.path||Y,Q.fullPath=this.$fullPath,Q.value=F,typeof F==="string"){if(Q.length=F.length,Q.value.length>30)Q.value=Q.value.slice(0,30)+"..."}if(F===void 0&&H!==this.requiredValidator)continue;if(H instanceof RegExp){if(U=H.test(F),U===!1)throw X=new(Q.ErrorConstructor||bz)(Q,A),X[cB]=!0,X;continue}else if(typeof H!=="function")continue;try{if(Q.propsParameter)U=H.call(A,F,Q);else U=H.call(A,F)}catch(B){if(U=!1,Q.reason=B,B.message)Q.message=B.message}if(typeof U?.then==="function")Z.push(U.then(function(B){if(B===!1)throw X=new(Q.ErrorConstructor||bz)(Q,A),X[cB]=!0,X},function(B){throw Q.reason=B,Q.message=B.message,U=!1,X=new(Q.ErrorConstructor||bz)(Q,A),X[cB]=!0,X}));else if(U!==void 0&&!U)throw X=new(Q.ErrorConstructor||bz)(Q,A),X[cB]=!0,X}await Promise.all(Z)};function CU1($,F){if($!==void 0&&!$){let J=new(F.ErrorConstructor||bz)(F);return J[cB]=!0,J}}M0.prototype.doValidateSync=function($,F,A){let J=this.path;if(!this.validators.length)return null;let Y=this.validators;if($===void 0)if(this.validators.length!==0&&this.validators[0].type==="required")Y=[this.validators[0]];else return null;let W=null,Z=0,D=Y.length;for(Z=0;Z<D;++Z){let G=Y[Z];if(G===null||typeof G!=="object")continue;let z=G.validator,H=Hy(G)?Object.assign({},G):EM(G);if(H.path=A?.path||J,H.fullPath=this.$fullPath,H.value=$,typeof $==="string"){if(H.length=$.length,H.value.length>30)H.value=H.value.slice(0,30)+"..."}let U=!1;if(TW0(z))continue;if(z instanceof RegExp){W=CU1(z.test($),H);continue}if(typeof z!=="function")continue;try{if(H.propsParameter)U=z.call(F,$,H);else U=z.call(F,$)}catch(Q){U=!1,H.reason=Q}if(typeof U?.then==="function")continue;if(W=CU1(U,H),W)break}return W};M0._isRef=function($,F,A,J){let X=J&&($.options?.ref||$.options?.refPath);if(!X&&A?.$__!=null){let Y=A.$__fullPath($.path,!0),W=A.ownerDocument();X=Y!=null&&W.$populated(Y)||A.$populated($.path)}if(X){if(F==null)return!0;if(!Buffer.isBuffer(F)&&F._bsontype!=="Binary"&&NZ.isObject(F))return!0;return J}return!1};/*!
 * ignore
 */M0.prototype._castRef=function(F,A,J,X){if(F==null)return F;if(F.$__!=null)return F.$__.wasPopulated=F.$__.wasPopulated||{value:F._doc._id},F;if(Buffer.isBuffer(F)||!NZ.isObject(F)){if(J)return F;throw new Uy(this.instance,F,this.path,null,this)}let Y=A.$__fullPath(this.path,!0),Z=A.ownerDocument().$populated(Y,!0),D=F;if(!A.$__.populated||!A.$__.populated[Y]||!A.$__.populated[Y].options||!A.$__.populated[Y].options.options||!A.$__.populated[Y].options.options.lean){let G=Z?Z.options[NU1]:A.constructor.db.model(this.options.ref);D=G.hydrate(F,null,X),D.$__.wasPopulated={value:D._doc._id,options:{[NU1]:G}}}return D};/*!
 * ignore
 */function MU1($,F){return this.castForQuery(null,$,F)}/*!
 * ignore
 */function _W0($,F){let A=this;if(!Array.isArray($))return[this.castForQuery(null,$,F)];return $.map(function(J){return A.castForQuery(null,J,F)})}function PU1($,F){let A=this;if(!Array.isArray($))return[this.castForQuery(null,$,F)];return $.map(function(J){if(Array.isArray(J)&&J.length===0)return J;return A.castForQuery(null,J,F)})}M0.prototype.$conditionalHandlers={$all:_W0,$eq:MU1,$in:PU1,$ne:MU1,$nin:PU1,$exists:RW0,$type:IW0};M0.prototype.castForQuery=function($,F,A){let J;if($!=null){if(J=this.$conditionalHandlers[$],!J)throw Error("Can't use "+$);return J.call(this,F,A)}try{return this.applySetters(F,A)}catch(X){if(X instanceof Uy&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};M0.checkRequired=function($){if(arguments.length!==0)this._checkRequired=$;return this._checkRequired};M0.prototype.checkRequired=function($){return $!=null};M0.prototype.clone=function(){let $=Object.assign({},this.options),F=new this.constructor(this.path,$,this.instance,this.parentSchema);if(F.validators=this.validators.slice(),this.requiredValidator!==void 0)F.requiredValidator=this.requiredValidator;if(this.defaultValue!==void 0)F.defaultValue=this.defaultValue;if(this.$immutable!==void 0&&this.options.immutable===void 0)F.$immutable=this.$immutable,zy(F);if(this._index!==void 0)F._index=this._index;if(this.selected!==void 0)F.selected=this.selected;if(this.isRequired!==void 0)F.isRequired=this.isRequired;if(this.originalRequiredValue!==void 0)F.originalRequiredValue=this.originalRequiredValue;return F.getters=this.getters.slice(),F.setters=this.setters.slice(),F};M0.prototype.getEmbeddedSchemaType=function(){return this.embeddedSchemaType};/*!
 * If _duplicateKeyErrorMessage is a string, replace unique index errors "E11000 duplicate key error" with this string.
 *
 * @api private
 */M0.prototype._duplicateKeyErrorMessage=null;M0.prototype.toJSONSchema=function(F){throw Error(`Converting unsupported SchemaType to JSON Schema: ${this.instance} at path "${this.path}"`)};M0.prototype.autoEncryptionType=function(){return null};/*!
 * Module exports.
 */IU1.exports=VM=M0;VM.CastError=Uy;VM.ValidatorError=bz});var Qy=O((_e0,TU1)=>{var P$=j7();class S7{constructor($){if(Object.assign(this,$),$?.options!=null)this.options=Object.assign({},$.options)}}Object.defineProperty(S7.prototype,"ref",P$);Object.defineProperty(S7.prototype,"refPath",P$);Object.defineProperty(S7.prototype,"localField",P$);Object.defineProperty(S7.prototype,"foreignField",P$);Object.defineProperty(S7.prototype,"justOne",P$);Object.defineProperty(S7.prototype,"count",P$);Object.defineProperty(S7.prototype,"match",P$);Object.defineProperty(S7.prototype,"options",P$);Object.defineProperty(S7.prototype,"skip",P$);Object.defineProperty(S7.prototype,"limit",P$);Object.defineProperty(S7.prototype,"perDocumentLimit",P$);TU1.exports=S7});var NM=O((ke0,jU1)=>{jU1.exports=function(F,A,J){if(F==null)return F;if(F._doc!=null)F=F._doc;if(arguments.length>=3){if(typeof F!=="object")return;if(J===void 0)return;if(F instanceof Map)F.set(A,J);else F[A]=J;return J}if(A==="$*")return F instanceof Map?Array.from(F.values()):Object.keys(F).map((X)=>F[X]);if(F instanceof Map)return F.get(A);return F[A]}});var Ky=O((be0,kU1)=>{var kW0=v0(),bW0=gv(),OU1=NM(),SU1=O7(),xW0=Z1("util"),gW0=Z0(),_U1=/(\.\d+$|\.\d+\.)/g;kU1.exports=function(F,A,J,X,Y){if(F==null)return[];if(typeof F==="string"&&Y!=null&&bW0(Y,F))throw new kW0("refPath `"+F+"` must not be excluded in projection, got "+xW0.inspect(Y));if(_U1.test(J)){let D=J.split(_U1);if(D[D.length-1]==="")throw Error("Can't populate individual element in an array");let G="",z=F;for(let Q=0;Q<D.length;Q+=2){let B=D[Q];if(z.startsWith(B+"."))G+=z.substring(0,B.length)+D[Q+1],z=z.substring(B.length+1);else if(Q===D.length-1){G+=z,z="";break}else throw Error("Could not normalize ref path, chunk "+B+" not in populated path")}let H=SU1.get(G,A,OU1),U=Array.isArray(H)?H:[H];return U=gW0.array.flatten(U),U}let W=SU1.get(F,A,OU1),Z;if(X!=null&&Object.hasOwn(X.virtuals,F))Z=[X.virtuals[F].applyGetters(void 0,A)];else Z=Array.isArray(W)?W:[W];return Z}});var CM=O((xe0,bU1)=>{var fW0=Ky(),vW0=Z0(),yW0=s1().modelSymbol;function YJ($,F){this.path=F,this.getters=[],this.setters=[],this.options=Object.assign({},$)}YJ.prototype._applyDefaultGetters=function(){if(this.getters.length>0||this.setters.length>0)return;let F="$"+this.path;this.getters.push(function(){return this.$locals[F]}),this.setters.push(function(A){this.$locals[F]=A})};/*!
 * ignore
 */YJ.prototype.clone=function(){let $=new YJ(this.options,this.path);return $.getters=[].concat(this.getters),$.setters=[].concat(this.setters),$};YJ.prototype.get=function($){return this.getters.push($),this};YJ.prototype.set=function($){return this.setters.push($),this};YJ.prototype.applyGetters=function($,F){if(vW0.hasUserDefinedProperty(this.options,["ref","refPath"])&&F.$$populatedVirtuals&&Object.hasOwn(F.$$populatedVirtuals,this.path))$=F.$$populatedVirtuals[this.path];let A=$;for(let J of this.getters)A=J.call(F,A,this,F);return A};YJ.prototype.applySetters=function($,F){let A=$;for(let J of this.setters)A=J.call(F,A,this,F);return A};YJ.prototype._getModelNamesForPopulate=function(F){if(this.options.refPath)return fW0(this.options.refPath,F,this.path);let A=null;if(typeof this.options.ref==="function"&&!this.options.ref[yW0])A=this.options.ref.call(F,F);else A=this.options.ref;if(A!=null&&!Array.isArray(A))return[A];return A};/*!
 * exports
 */bU1.exports=YJ});var By=O((ge0,xU1)=>{xU1.exports=function(F){let A={_id:{auto:!0}};A._id[F.options.typeKey]="ObjectId",F.add(A)}});var wy=O((fe0,gU1)=>{gU1.exports=function(F,A){let J=F.discriminatorMapping?.value;if(J&&!("sparse"in A)){let X=F.options.discriminatorKey;A.partialFilterExpression=A.partialFilterExpression||{},A.partialFilterExpression[X]=J}return A}});var vU1=O((ve0,fU1)=>{var qy=E4(),uW0=UZ(),hW0=wy();fU1.exports=function(F){let A=[],J=new WeakMap,X=F.constructor.indexTypes,Y=new Map;return W(F),A;function W(D,G,z){if(J.has(D))return;J.set(D,!0),G=G||"";let H=Object.keys(D.paths);for(let U of H){let Q=D.paths[U];if(z!=null&&z.paths[U])continue;if(Q._duplicateKeyErrorMessage!=null)D._duplicateKeyErrorMessagesByPath=D._duplicateKeyErrorMessagesByPath||{},D._duplicateKeyErrorMessagesByPath[U]=Q._duplicateKeyErrorMessage;if(Q.$isMongooseDocumentArray||Q.$isSingleNested){if(qy(Q,"options.excludeIndexes")!==!0&&qy(Q,"schemaOptions.excludeIndexes")!==!0&&qy(Q,"schema.options.excludeIndexes")!==!0)W(Q.schema,G+U+".");if(Q.schema.discriminators!=null){let q=Q.schema.discriminators,L=Object.keys(q);for(let E of L)W(q[E],G+U+".",Q.schema)}if(Q.$isMongooseDocumentArray)continue}let B=Q._index||Q.embeddedSchemaType&&Q.embeddedSchemaType._index;if(B!==!1&&B!=null){let q={},L=uW0(B),E=L?{...B}:{},V=typeof B==="string"?B:L?B.type:!1;if(V&&X.indexOf(V)!==-1)q[G+U]=V;else if(E.text)q[G+U]="text",delete E.text;else{let N=!1;if(B==="descending"||B==="desc")N=!0;else if(B==="ascending"||B==="asc")N=!1;else N=Number(B)===-1;q[G+U]=N?-1:1}if(delete E.type,D.options.autoIndex!=null)E._autoIndex=D.options.autoIndex;let R=E?.name;if(typeof R==="string")if(Y.has(R))Object.assign(Y.get(R),q);else A.push([q,E]),Y.set(R,q);else A.push([q,E]),Y.set(R,q)}}if(J.delete(D),G)Z(D,G);else D._indexes.forEach(function(U){let Q=U[1];hW0(D,Q)}),A=A.concat(D._indexes)}function Z(D,G){let z=D._indexes,H=z.length;for(let U=0;U<H;++U){let Q=z[U][0],B=z[U][1],q=Object.keys(Q),L=q.length,E={};for(let R=0;R<L;++R){let N=q[R];E[G+N]=Q[N]}let V=Object.assign({},B);if(B?.partialFilterExpression!=null){V.partialFilterExpression={};let R=B.partialFilterExpression;for(let N of Object.keys(R))V.partialFilterExpression[G+N]=R[N]}A.push([E,V])}}}});var Ly=O((ye0,yU1)=>{yU1.exports=function(F){switch(F){case"p":F="primary";break;case"pp":F="primaryPreferred";break;case"s":F="secondary";break;case"sp":F="secondaryPreferred";break;case"n":F="nearest";break}return F}});var hU1=O((ue0,uU1)=>{/*!
 * ignore
 */uU1.exports=function(F){if(!(!F.paths.id&&F.paths._id&&F.options.id))return F;if(F.aliases?.id)return F;return F.virtual("id").get(mW0),F};function mW0(){if(this._id!=null)return this._id.toString();return null}});var dU1=O((he0,mU1)=>{mU1.exports=function(F,A){let J=Object.keys(F),X=Object.keys(A);if(J.length!==X.length)return!1;for(let Y=0;Y<J.length;Y++){let W=J[Y];if(W!==X[Y]||F[W]!==A[W])return!1}return!0}});var lU1=O((me0,cU1)=>{cU1.exports=function(F,A,J,X){if(X.justOne||X.count){if(F[A]=Array.isArray(J)?J[0]:J,typeof F[A]!=="object")F[A]=X.count?J:null}else F[A]=Array.isArray(J)?J:J==null?[]:[J],F[A]=F[A].filter(function(Y){return Y&&typeof Y==="object"});return F[A]}});var pB=O((de0,pU1)=>{pU1.exports=function(F){return F.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}});var MM=O((ce0,iU1)=>{iU1.exports=dW0;/*!
 * ignore
 */function dW0($,F){if($==null)return null;if(typeof $==="boolean")return F;if(typeof $[F]==="boolean")return $[F]?F:null;if(!(F in $))return F;return $[F]}});var Vy=O((le0,nU1)=>{var cW0=pB(),WJ=MM();nU1.exports=CZ;/*!
 * ignore
 */function CZ($,F,A){if(F==null)return;if(Object.keys(F).some((Z)=>Z[0]==="$")){if(F.$push)W(F.$push);if(F.$addToSet)W(F.$addToSet);if(F.$set!=null){let Z=Object.keys(F.$set);for(let D of Z)Ey(A,D,F.$set,$)}if(F.$setOnInsert!=null){let Z=Object.keys(F.$setOnInsert);for(let D of Z)Ey(A,D,F.$setOnInsert,$)}}let Y=Object.keys(F).filter((Z)=>Z[0]!=="$");for(let Z of Y)Ey(A,Z,F,$);function W(Z){for(let D of Object.keys(Z)){let G=A.path(D.replace(/\.\$\./i,".").replace(/.\$$/,""));if(Z[D]&&G&&G.$isMongooseDocumentArray&&G.schema.options.timestamps){let z=G.schema.options.timestamps,H=WJ(z,"createdAt"),U=WJ(z,"updatedAt");if(Z[D].$each)Z[D].$each.forEach(function(Q){if(U!=null)Q[U]=$;if(H!=null)Q[H]=$;CZ($,Q,G.schema)});else{if(U!=null)Z[D][U]=$;if(H!=null)Z[D][H]=$;CZ($,Z[D],G.schema)}}}}}function lW0($,F,A){let J=F.schema.options.timestamps,X=$.length;if(!J){for(let Z=0;Z<X;++Z)CZ(A,$[Z],F.schema);return}let Y=WJ(J,"createdAt"),W=WJ(J,"updatedAt");for(let Z=0;Z<X;++Z){if(W!=null)$[Z][W]=A;if(Y!=null)$[Z][Y]=A;CZ(A,$[Z],F.schema)}}function pW0($,F,A){let J=F.schema.options.timestamps;if(!J){CZ(A,$,F.schema);return}let X=WJ(J,"createdAt"),Y=WJ(J,"updatedAt");if(Y!=null)$[Y]=A;if(X!=null)$[X]=A;CZ(A,$,F.schema)}function Ey($,F,A,J){let X=cW0(F),Y=$.path(X);if(!Y)return;let W=[],Z=X.split(".");for(let D=Z.length-1;D>0;--D){let G=$.path(Z.slice(0,D).join("."));if(G!=null&&(G.$isMongooseDocumentArray||G.$isSingleNested))W.push({parentPath:F.split(".").slice(0,D).join("."),parentSchemaType:G})}if(Array.isArray(A[F])&&Y.$isMongooseDocumentArray)lW0(A[F],Y,J);else if(A[F]&&Y.$isSingleNested)pW0(A[F],Y,J);else if(W.length>0)for(let D of W){let{parentPath:G,parentSchemaType:z}=D,H=z.schema.options.timestamps,U=WJ(H,"updatedAt");if(!H||U==null)continue;if(z.$isSingleNested)A[G+"."+U]=J;else if(z.$isMongooseDocumentArray){let Q=F.substring(G.length+1);if(/^\d+$/.test(Q)){A[G+"."+Q][U]=J;continue}let B=Q.indexOf(".");Q=B!==-1?Q.substring(0,B):Q,A[G+"."+Q+"."+U]=J}}else if(Y.schema!=null&&Y.schema!=$&&A[F]){let D=Y.schema.options.timestamps,G=WJ(D,"createdAt"),z=WJ(D,"updatedAt");if(!D)return;if(z!=null)A[F][z]=J;if(G!=null)A[F][G]=J}}});var Ny=O((pe0,aU1)=>{/*!
 * ignore
 */var rU1=E4(),iW0=Z0();aU1.exports=nW0;/*!
 * ignore
 */function nW0($,F,A,J,X,Y){let W=J,Z=W,D=rU1(X,"timestamps",!0);if(!D||W==null)return J;let G=D?.createdAt===!1,z=D?.updatedAt===!1;if(Y){if(J?.$set)J=J.$set,W.$set={},Z=W.$set;if(!z&&A&&!J[A])Z[A]=$;if(!G&&F&&!J[F])Z[F]=$;return W}if(J=J||{},Array.isArray(W)){if(A==null)return W;return W.push({$set:{[A]:$}}),W}if(W.$set=W.$set||{},!z&&A&&!J.$currentDate?.[A]){let H=!1;if(A.indexOf(".")!==-1){let U=A.split(".");for(let Q=1;Q<U.length;++Q){let B=U.slice(-Q).join("."),q=U.slice(0,-Q).join(".");if(J[q]!=null){J[q][B]=$,H=!0;break}else if(J.$set?.[q]){J.$set[q][B]=$,H=!0;break}}}if(!H)W.$set[A]=$;if(Object.hasOwn(W,A))delete W[A]}if(!G&&F){let H=rU1(X,"overwriteImmutable",!1),U=J[F]!=null||J.$set?.[F]!=null;if(H&&U){if(J[F]!=null)W.$set[F]=J[F],delete J[F]}else{if(J[F])delete J[F];if(J.$set?.[F])delete J.$set[F];let Q=!1;if(F.indexOf(".")!==-1){let B=F.split(".");for(let q=1;q<B.length;++q){let L=B.slice(-q).join("."),E=B.slice(0,-q).join(".");if(J[E]!=null){J[E][L]=$,Q=!0;break}else if(J.$set?.[E]){J.$set[E][L]=$,Q=!0;break}}}if(!Q)W.$setOnInsert=W.$setOnInsert||{},W.$setOnInsert[F]=$}}if(iW0.hasOwnKeys(W.$set)===!1)delete W.$set;return W}});var sU1=O((ie0,tU1)=>{tU1.exports=function(F,A,J,X,Y){let W=A?.updatedAt===!1,Z=A?.createdAt===!1,D=J!=null?J():F.ownerDocument().constructor.base.now();if(!Z&&(F.isNew||F.$isSubdocument)&&X&&!F.$__getValue(X)&&F.$__isSelected(X))F.$set(X,D,void 0,{overwriteImmutable:!0});if(!W&&Y&&(F.isNew||F.$isModified())){let G=D;if(F.isNew&&X!=null)G=F.$__getValue(X);F.$set(Y,G)}}});var $Q1=O((ne0,eU1)=>{var rW0=Vy(),aW0=Ny(),tW0=E4(),PM=MM(),sW0=sU1(),oW0=wZ(),oU1=new Set(["replaceOne","findOneAndReplace"]);eU1.exports=function(F,A){let J=F.childSchemas.find(X);function X(H){return!!H.schema.options.timestamps}if(!A&&!J)return;let Y=PM(A,"createdAt"),W=PM(A,"updatedAt"),Z=A!=null&&Object.hasOwn(A,"currentTime")?A.currentTime:null,D={};if(F.$timestamps={createdAt:Y,updatedAt:W},Y&&!F.paths[Y]){let U=F.base?.get("timestamps.createdAt.immutable")??null??!0;D[Y]={[F.options.typeKey||"type"]:Date,immutable:U}}if(W&&!F.paths[W])D[W]=Date;F.add(D),F.pre("save",function(){let U=tW0(this,"$__.saveOptions.timestamps");if(U===!1)return;sW0(this,U,Z,Y,W)}),F.methods.initializeTimestamps=function(H){if(H===!1)return this;let U=Z!=null?Z():this.constructor.base.now(),Q=H!=null?PM(H,"createdAt"):Y,B=H!=null?PM(H,"updatedAt"):W;if(Q&&!this.get(Q))this.$set(Y,U);if(B&&!this.get(B))this.$set(W,U);if(this.$isSubdocument)return this;let q=this.$getAllSubdocs();for(let L of q)if(L.initializeTimestamps)L.initializeTimestamps(H);return this},z[oW0.builtInMiddleware]=!0;let G={query:!0,model:!1};F.pre("findOneAndReplace",G,z),F.pre("findOneAndUpdate",G,z),F.pre("replaceOne",G,z),F.pre("update",G,z),F.pre("updateOne",G,z),F.pre("updateMany",G,z);function z(){let H=Z!=null?Z():this.model.base.now();if(oU1.has(this.op)&&this.getUpdate()==null)this.setUpdate({});aW0(H,Y,W,this.getUpdate(),this._mongooseOptions,oU1.has(this.op)),rW0(H,this.getUpdate(),this.model.schema)}}});var AQ1=O((re0,FQ1)=>{var eW0=v0(),$Z0=Z1("util");FQ1.exports=FZ0;function FZ0($,F){if(typeof $==="string")return;if(typeof $==="function")return;throw new eW0('Invalid ref at path "'+F+'". Got '+$Z0.inspect($,{depth:0}))}});var iB=O((WZ0)=>{/*!
 * ignore
 */var JQ1=Object.freeze(["countDocuments","distinct","estimatedDocumentCount","find","findOne","findOneAndReplace","findOneAndUpdate","replaceOne","updateMany","updateOne","deleteMany","deleteOne","findOneAndDelete"]);WZ0.queryOperations=JQ1;/*!
 * ignore
 */var AZ0=JQ1.concat(["validate"]);WZ0.queryMiddlewareFunctions=AZ0;/*!
 * ignore
 */var JZ0=["aggregate"];WZ0.aggregateMiddlewareFunctions=JZ0;/*!
 * ignore
 */var XZ0=["bulkWrite","createCollection","insertMany"];WZ0.modelMiddlewareFunctions=XZ0;/*!
 * ignore
 */var YZ0=["validate","save","remove","updateOne","deleteOne","init"];WZ0.documentMiddlewareFunctions=YZ0});var YQ1=O((te0,XQ1)=>{XQ1.exports=w0().Double});var RM=O((se0,zQ1)=>{var UZ0=v0(),WQ1=W4(),QZ0=Z0().deepEqual,KZ0=F3(),BZ0=FM(),ZQ1=Z1("util"),wZ0=HZ(),Cy=t9(),qZ0=tC(),DQ1=s1().populateModelSymbol;/*!
 * ignore
 */class iF extends Map{constructor($,F,A,J,X){if(KZ0($)==="Object")$=Object.keys($).reduce((Y,W)=>Y.concat([[W,$[W]]]),[]);super($);if(this.$__parent=A?.$__!=null?A:null,this.$__parent?.$isSingleNested&&this.$__parent.$basePath)this.$__path=this.$__parent.$basePath+"."+F,this.$__pathRelativeToParent=F;else if(X?.path)this.$__path=X.path,this.$__pathRelativeToParent=null;else this.$__path=F,this.$__pathRelativeToParent=null;this.$__schemaType=J,this.$__runDeferred()}$init($,F){if(GQ1($),super.set($,F),F?.$isSingleNested)if(F.$basePath=this.$__path+"."+$,this.$__pathRelativeToParent!=null)F.$pathRelativeToParent=this.$__pathRelativeToParent+"."+$;else F.$pathRelativeToParent=this.$__path+"."+$}$__set($,F){super.set($,F)}get($,F){if(Cy($,"ObjectId"))$=$.toString();if(F=F||{},F.getters===!1)return super.get($);return this.$__schemaType.applyGetters(super.get($),this.$__parent)}set($,F){if(Cy($,"ObjectId"))$=$.toString();if(GQ1($),F=BZ0(F),this.$__schemaType==null){this.$__deferred=this.$__deferred||[],this.$__deferred.push({key:$,value:F});return}let A,J=this.$__parent,X=J?.$__?.populated?J.$populated(W.call(this),!0)||J.$populated(this.$__path,!0):null,Y=this.get($);if(X!=null){if(this.$__schemaType.$isSingleNested)throw new UZ0(`Cannot manually populate single nested subdoc underneath Map at path "${this.$__path}". Try using an array instead of a Map.`);if(Array.isArray(F)&&this.$__schemaType.$isMongooseArray)F=F.map((Z)=>{if(Z.$__==null)Z=new X.options[DQ1](Z);return Z.$__.wasPopulated={value:Z._doc._id},Z});else if(F!=null){if(F.$__==null)F=new X.options[DQ1](F);F.$__.wasPopulated={value:F._doc._id}}}else try{let Z=null;if(this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested||this.$__schemaType.$isMongooseArray||this.$__schemaType.$isSchemaMap){if(Z={path:W.call(this)},this.$__schemaType.$isSingleNested)Z.pathRelativeToParent=this.$__pathRelativeToParent!=null?this.$__pathRelativeToParent+"."+$:this.$__path+"."+$}F=this.$__schemaType.applySetters(F,this.$__parent,!1,this.get($),Z)}catch(Z){if(this.$__parent?.$__!=null){this.$__parent.invalidate(W.call(this),Z);return}throw Z}if(super.set($,F),F?.$isSingleNested)if(this.$__pathRelativeToParent!=null)F.$pathRelativeToParent=this.$__pathRelativeToParent+"."+$;else F.$pathRelativeToParent=this.$__path+"."+$;if(J?.$__!=null&&!QZ0(F,Y)){let Z;if(this.$__pathRelativeToParent!=null)Z=this.$__pathRelativeToParent+"."+$;else Z=W.call(this);if(J.markModified(Z),this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested)qZ0(J,Z)}function W(){if(A)return A;return A=this.$__path+"."+$,A}}clear(){super.clear();let $=this.$__parent;if($!=null)$.markModified(this.$__path)}delete($){if(Cy($,"ObjectId"))$=$.toString();return this.set($,void 0),super.delete($)}toBSON(){return new Map(this)}toObject($){if($?.flattenMaps){let F={},A=this.keys();for(let J of A)F[J]=WQ1(this.get(J),$);return F}return new Map(this)}$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)}toJSON($){if(typeof $?.flattenMaps==="boolean"?$.flattenMaps:!0){let F={},A=this.keys();for(let J of A)F[J]=WQ1(this.get(J),$);return F}return new Map(this)}inspect(){return new Map(this)}$__runDeferred(){if(!this.$__deferred)return;for(let $ of this.$__deferred)this.set($.key,$.value);this.$__deferred=null}}if(ZQ1.inspect.custom)Object.defineProperty(iF.prototype,ZQ1.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:iF.prototype.inspect});Object.defineProperty(iF.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(iF.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(iF.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(iF.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(iF.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0});Object.defineProperty(iF.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0});function GQ1($){let F=typeof $;if(F!=="string")throw TypeError(`Mongoose maps only support string keys, got ${F}`);if($.startsWith("$"))throw Error(`Mongoose maps do not support keys that start with "$", got "${$}"`);if($.includes("."))throw Error(`Mongoose maps do not support keys that contain ".", got "${$}"`);if(wZ0.has($))throw Error(`Mongoose maps do not support reserved key name "${$}"`)}zQ1.exports=iF});var UQ1=O((oe0,HQ1)=>{HQ1.exports=w0().UUID});var xz=O((LZ0)=>{/*!
 * Module exports.
 */LZ0.Array=lv();LZ0.Buffer=pC();LZ0.Document=LZ0.Embedded=Sz();LZ0.DocumentArray=EZ();LZ0.Double=YQ1();LZ0.Decimal128=vC();LZ0.ObjectId=sX();LZ0.Map=RM();LZ0.Subdocument=JM();LZ0.UUID=UQ1()});var KQ1=O((F16,QQ1)=>{var OZ0=_3();class nB extends OZ0{}var My=j7();Object.defineProperty(nB.prototype,"enum",My);Object.defineProperty(nB.prototype,"of",My);Object.defineProperty(nB.prototype,"castNonArrays",My);/*!
 * ignore
 */QQ1.exports=nB});var wQ1=O((A16,BQ1)=>{BQ1.exports=Py;function Py($){if(!Array.isArray($))return{min:0,max:0,containsNonArrayItem:!0};if($.length===0)return{min:1,max:1,containsNonArrayItem:!1};if($.length===1&&!Array.isArray($[0]))return{min:1,max:1,containsNonArrayItem:!1};let F=Py($[0]);for(let A=1;A<$.length;++A){let J=Py($[A]);if(J.min<F.min)F.min=J.min;if(J.max>F.max)F.max=J.max;F.containsNonArrayItem=F.containsNonArrayItem||J.containsNonArrayItem}return F.min=F.min+1,F.max=F.max+1,F}});var rB=O((J16,LQ1)=>{var qQ1=Z1("assert");LQ1.exports=function(F){if(F==null)return F;if(F==="")return null;if(typeof F==="string"||typeof F==="boolean")F=Number(F);if(qQ1.ok(!isNaN(F)),F instanceof Number)return F.valueOf();if(typeof F==="number")return F;if(!Array.isArray(F)&&typeof F.valueOf==="function")return Number(F.valueOf());if(F.toString&&!Array.isArray(F)&&F.toString()==Number(F))return Number(F);qQ1.ok(!1)}});var Ry=O((X16,EQ1)=>{EQ1.exports=function(F){if(F==null||typeof F!=="object")return F;if(Array.isArray(F)){for(let A=F.length-1;A>=0;--A)if(F[A]===void 0)F.splice(A,1)}for(let A of Object.keys(F))if(F[A]===void 0)delete F[A];return F}});var CQ1=O((Y16,NQ1)=>{var gz=N8(),VQ1=oX(),IM=rB(),SZ0=Ry(),_Z0=new Set(["$and","$or"]),kZ0=new Set(["$cmp","$eq","$lt","$lte","$gt","$gte"]),bZ0=new Set(["$multiply","$divide","$log","$mod","$trunc","$avg","$max","$min","$stdDevPop","$stdDevSamp","$sum"]),xZ0=new Set(["$abs","$exp","$ceil","$floor","$ln","$log10","$sqrt","$sin","$cos","$tan","$asin","$acos","$atan","$atan2","$asinh","$acosh","$atanh","$sinh","$cosh","$tanh","$degreesToRadians","$radiansToDegrees"]),gZ0=new Set(["$arrayElemAt","$first","$last"]),fZ0=new Set(["$year","$month","$week","$dayOfMonth","$dayOfYear","$hour","$minute","$second","$isoDayOfWeek","$isoWeekYear","$isoWeek","$millisecond"]),vZ0=new Set(["$not"]);NQ1.exports=function(F,A,J){if(typeof F==="boolean")return F;if(typeof F!=="object"||F===null)throw Error("`$expr` must be an object or boolean literal");return I5(F,A,J)};function I5($,F,A){if(aB($)||$===null)return $;if($.$cond!=null)if(Array.isArray($.$cond))$.$cond=$.$cond.map((X)=>I5(X,F,A));else $.$cond.if=I5($.$cond.if,F,A),$.$cond.then=I5($.$cond.then,F,A),$.$cond.else=I5($.$cond.else,F,A);else if($.$ifNull!=null)$.$ifNull.map((X)=>I5(X,F,A));else if($.$switch!=null){if(Array.isArray($.$switch.branches))$.$switch.branches=$.$switch.branches.map((X)=>I5(X,F,A));if("default"in $.$switch)$.$switch.default=I5($.$switch.default,F,A)}let J=Object.keys($);for(let X of J)if(_Z0.has(X))$[X]=$[X].map((Y)=>I5(Y,F,A));else if(kZ0.has(X))$[X]=hZ0($[X],F,A);else if(bZ0.has(X))$[X]=uZ0($[X],F,A);else if(xZ0.has(X))$[X]=Iy($[X],F,A);else if(vZ0.has(X))$[X]=I5($[X],F,A);if($.$in)$.$in=yZ0($.$in,F,A);if($.$size)$.$size=Iy($.$size,F,A);if($.$round){let X=$.$round;if(!Array.isArray(X)||X.length<1||X.length>2)throw new gz("Array",X,"$round");$.$round=X.map((Y)=>Iy(Y,F,A))}return SZ0($),$}function Iy($){if(!TM($))return $;try{return IM($)}catch{throw new gz("Number",$)}}function yZ0($,F,A){let J=$[1];if(!aB(J))return $;let X=$[0],Y=F.path(J.slice(1));if(Y===null){if(A===!1)return $;else if(A==="throw")throw new VQ1("$in");return}if(!Y.$isMongooseArray)throw Error("Path must be an array for $in");return[Y.embeddedSchemaType.cast(X),J]}function uZ0($){if(!Array.isArray($)){if(!TM($))return $;try{return IM($)}catch{throw new gz("Number",$)}}return $.map((F)=>{if(!TM(F))return F;try{return IM(F)}catch{throw new gz("Number",F)}})}function hZ0($,F,A){if(!Array.isArray($)||$.length!==2)throw Error("Comparison operator must be an array of length 2");$[0]=I5($[0],F,A);let J=$[0];if(TM($[1])){let X=null,Y=null,W=null;if(aB(J))X=J.slice(1),Y=F.path(X);else if(typeof J==="object"&&J!=null){for(let D of Object.keys(J))if(fZ0.has(D)&&aB(J[D]))X=J[D].slice(1)+"."+D,W=IM;else if(gZ0.has(D)&&aB(J[D])){if(X=J[D].slice(1)+"."+D,Y=F.path(J[D].slice(1)),Y!=null){if(Y.$isMongooseArray)Y=Y.embeddedSchemaType}}}let Z=typeof $[1]==="object"&&$[1]!=null&&$[1].$literal!=null;if(Y!=null)if(Z)$[1]={$literal:Y.cast($[1].$literal)};else $[1]=Y.cast($[1]);else if(W!=null)if(Z)try{$[1]={$literal:W($[1].$literal)}}catch{throw new gz(W.name.replace(/^cast/,""),$[1],X+".$literal")}else try{$[1]=W($[1])}catch{throw new gz(W.name.replace(/^cast/,""),$[1],X)}else if(X!=null&&A===!0)return;else if(X!=null&&A==="throw")throw new VQ1(X)}else $[1]=I5($[1]);return $}function aB($){return typeof $==="string"&&$[0]==="$"}function TM($){if(typeof $==="string"&&$[0]==="$")return!1;if(typeof $==="object"&&$!==null&&Object.keys($).find((F)=>F[0]==="$"))return $.$literal!=null;return!0}});var jM=O((W16,MQ1)=>{var mZ0=N8();MQ1.exports=function(F,A){if(F==null)return F;if(typeof F?._id==="string")return F._id;if(F.toString&&F.toString!==Object.prototype.toString&&!Array.isArray(F))return F.toString();throw new mZ0("string",F,A)}});var TQ1=O((Z16,IQ1)=>{var dZ0=N8(),PQ1=dC(),RQ1=jM();IQ1.exports=function(F,A){if(F==null||typeof F!=="object")throw new dZ0("$text",F,A);if(F.$search!=null)F.$search=RQ1(F.$search,A+".$search");if(F.$language!=null)F.$language=RQ1(F.$language,A+".$language");if(F.$caseSensitive!=null)F.$caseSensitive=PQ1(F.$caseSensitive,A+".$caseSensitive");if(F.$diacriticSensitive!=null)F.$diacriticSensitive=PQ1(F.$diacriticSensitive,A+".$diacriticSensitive");return F}});var tB=O((D16,jQ1)=>{var cZ0=new Set(["$ref","$id","$db"]);jQ1.exports=function(F){return F[0]==="$"&&!cZ0.has(F)}});var MZ=O((G16,kQ1)=>{/*!
 * Module dependencies.
 */var OQ1=N8(),Ty=oX(),lZ0=sB(),pZ0=CQ1(),iZ0=jM(),nZ0=TQ1(),rZ0=E4(),SQ1=$M(),_Q1=tB(),aZ0=Z1("util"),Sy=UZ(),jy=bB(),Oy=Z0(),tZ0=["Polygon","MultiPolygon"];kQ1.exports=function $(F,A,J,X){if(Array.isArray(A))throw Error("Query filter must be an object, got an array ",aZ0.inspect(A));if(A==null)return A;if(F?.discriminators!=null&&A[F.options.discriminatorKey]!=null)F=SQ1(F,A[F.options.discriminatorKey])||F;let Y=Object.keys(A),W=Y.length,Z,D,G,z,H,U,Q;J=J||{};while(W--)if(H=Y[W],Q=A[H],H==="$or"||H==="$nor"||H==="$and"){if(!Array.isArray(Q))throw new OQ1("Array",Q,H);for(let B=Q.length-1;B>=0;B--){if(Q[B]==null||typeof Q[B]!=="object")throw new OQ1("Object",Q[B],H+"."+B);let q=Object.keys(Q[B]).length,L=Q[B][F.options.discriminatorKey];if(L==null)Q[B]=$(F,Q[B],J,X);else{let E=SQ1(X.schema,L);Q[B]=$(E?E:F,Q[B],J,X)}if(Oy.hasOwnKeys(Q[B])===!1&&q!==0)Q.splice(B,1)}if(Q.length===0)delete A[H]}else if(H==="$where"){if(U=typeof Q,U!=="string"&&U!=="function")throw Error("Must have a string or function for $where");if(U==="function")A[H]=Q.toString();continue}else if(H==="$expr"){Q=pZ0(Q,F);continue}else if(H==="$elemMatch")Q=$(F,Q,J,X);else if(H==="$text")Q=nZ0(Q,H);else if(H==="$comment"&&!Object.hasOwn(F.paths,"$comment"))Q=iZ0(Q,H),A[H]=Q;else{if(!F)continue;if(G=F.path(H),!G){let B=H.split("."),q=B.length;while(q--){let L=B.slice(0,q).join("."),E=B.slice(q).join("."),V=F.path(L),R=V?.schema?.options?.discriminatorKey;if(V?.schema?.discriminators!=null&&R!=null&&E!==R){let N=rZ0(A,L+"."+R),S=V.schema.discriminators;if(typeof N==="string"&&S[N]!=null)G=S[N].path(E);else if(N!=null&&Object.keys(N).length===1&&Array.isArray(N.$in)&&N.$in.length===1&&typeof N.$in[0]==="string"&&S[N.$in[0]]!=null)G=S[N.$in[0]].path(E)}}}if(!G){let B=H.split("."),q=B.length,L,E,V;while(q--)if(L=B.slice(0,q).join("."),G=F.path(L),G)break;if(G){if(G.schema){V={},E=B.slice(q).join("."),V[E]=Q;let S=$(G.schema,V,J,X)[E];if(S===void 0)delete A[H];else A[H]=S}else A[H]=Q;continue}if(Sy(Q)){let S="";if(Q.$near)S="$near";else if(Q.$nearSphere)S="$nearSphere";else if(Q.$within)S="$within";else if(Q.$geoIntersects)S="$geoIntersects";else if(Q.$geoWithin)S="$geoWithin";if(S){let C=new lZ0.Number("__QueryCasting__",null,null,F),M=Q[S];if(Q.$maxDistance!=null)Q.$maxDistance=C.castForQuery(null,Q.$maxDistance,X);if(Q.$minDistance!=null)Q.$minDistance=C.castForQuery(null,Q.$minDistance,X);if(S==="$within"){let I=M.$center||M.$centerSphere||M.$box||M.$polygon;if(!I)throw Error("Bad $within parameter: "+JSON.stringify(Q));M=I}else if(S==="$near"&&typeof M.type==="string"&&Array.isArray(M.coordinates))M=M.coordinates;else if((S==="$near"||S==="$nearSphere"||S==="$geoIntersects")&&M.$geometry&&typeof M.$geometry.type==="string"&&Array.isArray(M.$geometry.coordinates)){if(M.$maxDistance!=null)M.$maxDistance=C.castForQuery(null,M.$maxDistance,X);if(M.$minDistance!=null)M.$minDistance=C.castForQuery(null,M.$minDistance,X);if(jy(M.$geometry))M.$geometry=M.$geometry.toObject({transform:!1,virtuals:!1});M=M.$geometry.coordinates}else if(S==="$geoWithin"){if(M.$geometry){if(jy(M.$geometry))M.$geometry=M.$geometry.toObject({virtuals:!1});let I=M.$geometry.type;if(tZ0.indexOf(I)===-1)throw Error('Invalid geoJSON type for $geoWithin "'+I+'", must be "Polygon" or "MultiPolygon"');M=M.$geometry.coordinates}else if(M=M.$box||M.$polygon||M.$center||M.$centerSphere,jy(M))M=M.toObject({virtuals:!1})}_y(M,C,X);continue}}if(F.nested[H])continue;let R="strict"in J?J.strict:F.options.strict,N=sZ0(J,F._userProvidedOptions,F.options,X);if(J.upsert&&R){if(R==="throw")throw new Ty(H);throw new Ty(H,'Path "'+H+'" is not in schema, strict mode is `true`, and upsert is `true`.')}if(N==="throw")throw new Ty(H,'Path "'+H+`" is not in schema and strictQuery is 'throw'.`);else if(N)delete A[H]}else if(Q==null)continue;else if(Oy.isPOJO(Q))if(D=Object.keys(Q).some(_Q1),!D)A[H]=G.castForQuery(null,Q,X);else{let B=Object.keys(Q),q,L=B.length;while(L--)if(q=B[L],z=Q[q],q==="$elemMatch"){if(z&&G?.schema!=null)$(G.schema,z,J,X);else if(z&&G?.$isMongooseArray)if(Oy.isPOJO(z)&&z.$not!=null)$(F,z,J,X);else Q[q]=G.castForQuery(q,z,X)}else if(q==="$not"){if(z&&G){if(Z=Object.keys(z),Z.length&&_Q1(Z[0]))for(let E in z)z[E]=G.castForQuery(E,z[E],X);else Q[q]=G.castForQuery(q,z,X);continue}}else Q[q]=G.castForQuery(q,z,X)}else if(Array.isArray(Q)&&["Buffer","Array"].indexOf(G.instance)===-1&&!J.sanitizeFilter){let B=[],q=Q;for(let L of q)B.push(G.castForQuery(null,L,X));A[H]={$in:B}}else A[H]=G.castForQuery(null,Q,X)}return A};function _y($,F,A){if(Array.isArray($))$.forEach(function(J,X){if(Array.isArray(J)||Sy(J))return _y(J,F,A);$[X]=F.castForQuery(null,J,A)});else{let J=Object.keys($),X=J.length;while(X--){let Y=J[X],W=$[Y];if(Array.isArray(W)||Sy(W))_y(W,F,A),$[Y]=W;else $[Y]=F.castForQuery({val:W,context:A})}}}function sZ0($,F,A,J){if("strictQuery"in $)return $.strictQuery;if("strictQuery"in F)return F.strictQuery;let X=J?.mongooseCollection?.conn?.base?.options;if(X){if("strictQuery"in X)return X.strictQuery}return A.strictQuery}});var xQ1=O((z16,bQ1)=>{var oZ0=_3();class fz extends oZ0{}var OM=j7();Object.defineProperty(fz.prototype,"min",OM);Object.defineProperty(fz.prototype,"max",OM);Object.defineProperty(fz.prototype,"enum",OM);Object.defineProperty(fz.prototype,"populate",OM);/*!
 * ignore
 */bQ1.exports=fz});var M8=O((H16,gQ1)=>{gQ1.exports=function(F,A,J,X){if(J){if(X)return{bsonType:A};return{bsonType:[A,"null"]}}else{if(X)return{type:F};return{type:[F,"null"]}}}});var oB=O((U16,vQ1)=>{/*!
 * Module requirements.
 */var eZ0=N8();/*!
 * ignore
 */function $D0($){let F=this;if(Array.isArray($))return $.map(function(A){return fQ1(F.path,A)});else if(Buffer.isBuffer($))return $;return fQ1(F.path,$)}/*!
 * ignore
 */function fQ1($,F){let A=Number(F);if(isNaN(A))throw new eZ0("number",F,$);return A}vQ1.exports=$D0});var xy=O((Q16,yQ1)=>{/*!
 * Module requirements.
 */var kM=T7(),FD0=xQ1(),ZJ=L4(),AD0=rB(),JD0=M8(),SM=oB(),ky=Z0(),by=ZJ.CastError;function b2($,F,A,J){this.enumValues=[],ZJ.call(this,$,F,"Number",J)}b2.get=ZJ.get;b2.set=ZJ.set;b2.setters=[];/*!
 * ignore
 */b2._cast=AD0;b2.cast=function(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */b2._defaultCaster=($)=>{if(typeof $!=="number")throw Error();return $};b2.schemaName="Number";b2.defaultOptions={};/*!
 * Inherits from SchemaType.
 */b2.prototype=Object.create(ZJ.prototype);b2.prototype.constructor=b2;b2.prototype.OptionsConstructor=FD0;/*!
 * ignore
 */b2._checkRequired=($)=>typeof $==="number"||$ instanceof Number;b2.checkRequired=ZJ.checkRequired;b2.prototype.checkRequired=function(F,A){if(typeof F==="object"&&ZJ._isRef(this,F,A,!0))return F!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():b2.checkRequired())(F)};b2.prototype.min=function($,F){if(this.minValidator)this.validators=this.validators.filter(function(A){return A.validator!==this.minValidator},this);if($!=null){let A=F||kM.messages.Number.min;A=A.replace(/{MIN}/,$),this.validators.push({validator:this.minValidator=function(J){return J==null||J>=$},message:A,type:"min",min:$})}return this};b2.prototype.max=function($,F){if(this.maxValidator)this.validators=this.validators.filter(function(A){return A.validator!==this.maxValidator},this);if($!=null){let A=F||kM.messages.Number.max;A=A.replace(/{MAX}/,$),this.validators.push({validator:this.maxValidator=function(J){return J==null||J<=$},message:A,type:"max",max:$})}return this};b2.prototype.enum=function($,F){if(this.enumValidator)this.validators=this.validators.filter(function(J){return J.validator!==this.enumValidator},this),this.enumValidator=!1;if($===void 0||$===!1)return this;if(!Array.isArray($)){if(ky.isPOJO($)&&$.values!=null)F=$.message,$=$.values;else if(typeof $==="number")$=Array.prototype.slice.call(arguments),F=null;if(ky.isPOJO($)){let X=Object.keys($).sort(),Y=Object.values($).sort();if(X.length===Y.length&&X.every((W,Z)=>W===String(Y[Z]))&&Y.filter((W)=>typeof W==="number").length===Math.floor(Y.length/2))$=Y.filter((W)=>typeof W==="number");else $=Object.values($)}F=F||kM.messages.Number.enum}F=F==null?kM.messages.Number.enum:F;for(let J of $)if(J!==void 0)this.enumValues.push(this.cast(J));let A=this.enumValues;return this.enumValidator=(J)=>J==null||A.indexOf(J)!==-1,this.validators.push({validator:this.enumValidator,message:F,type:"enum",enumValues:A}),this};b2.prototype.cast=function($,F,A,J,X){if(typeof $!=="number"&&ZJ._isRef(this,$,F,A)){if($==null||ky.isNonBuiltinObject($))return this._castRef($,F,A,X)}let Y=$?._id!==void 0?$._id:$,W;if(typeof this._castFunction==="function")W=this._castFunction;else if(typeof this.constructor.cast==="function")W=this.constructor.cast();else W=b2.cast();try{return W(Y)}catch(Z){throw new by("Number",Y,this.path,Z,this)}};/*!
 * ignore
 */function _M($){return this.cast($)}function XD0($){let F=this;if(!Array.isArray($))return[this.cast($)];return $.map(function(A){return F.cast(A)})}var YD0={...ZJ.prototype.$conditionalHandlers,$bitsAllClear:SM,$bitsAnyClear:SM,$bitsAllSet:SM,$bitsAnySet:SM,$gt:_M,$gte:_M,$lt:_M,$lte:_M,$mod:XD0};Object.defineProperty(b2.prototype,"$conditionalHandlers",{enumerable:!1,value:YD0});b2.prototype.castForQuery=function($,F,A){let J;if($!=null){if(J=this.$conditionalHandlers[$],!J)throw new by("number",F,this.path,null,this);return J.call(this,F,A)}try{F=this.applySetters(F,A)}catch(X){if(X instanceof by&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}return F};b2.prototype.toJSONSchema=function(F){let A=this.options.required&&typeof this.options.required!=="function"||this.path==="_id";return JD0("number","number",F?.useBsonType,A)};/*!
 * Module exports.
 */yQ1.exports=b2});var eB=O((ZD0)=>{/*!
 * Module requirements.
 */var WD0=xy();/*!
 * ignore
 */ZD0.castToNumber=uQ1;ZD0.castArraysOfNumbers=hQ1;/*!
 * ignore
 */function uQ1($){return WD0.cast()($)}function hQ1($,F){$.forEach(function(A,J){if(Array.isArray(A))hQ1(A,F);else $[J]=uQ1.call(F,A)})}});var vy=O((QD0)=>{/*!
 * Module requirements.
 */var mQ1=eB().castArraysOfNumbers,$w=eB().castToNumber;/*!
 * ignore
 */QD0.cast$geoIntersects=UD0;QD0.cast$near=zD0;QD0.cast$within=HD0;function zD0($){let F=bM();if(Array.isArray($))return mQ1($,this),$;if(fy(this,$),$?.$geometry)return gy($,this);if(!Array.isArray($))throw TypeError("$near must be either an array or an object with a $geometry property");return F.prototype.castForQuery.call(this,null,$)}function gy($,F){switch($.$geometry.type){case"Polygon":case"LineString":case"Point":mQ1($.$geometry.coordinates,F);break;default:break}return fy(F,$),$}function HD0($){if(fy(this,$),$.$box||$.$polygon){let F=$.$box?"$box":"$polygon";$[F].forEach((A)=>{if(!Array.isArray(A)){let J="Invalid $within $box argument. Expected an array, received "+A;throw TypeError(J)}A.forEach((J,X)=>{A[X]=$w.call(this,J)})})}else if($.$center||$.$centerSphere){let F=$.$center?"$center":"$centerSphere";$[F].forEach((A,J)=>{if(Array.isArray(A))A.forEach((X,Y)=>{A[Y]=$w.call(this,X)});else $[F][J]=$w.call(this,A)})}else if($.$geometry)gy($,this);return $}function UD0($){if(!$.$geometry)return;return gy($,this),$}function fy($,F){if(F.$maxDistance)F.$maxDistance=$w.call($,F.$maxDistance);if(F.$minDistance)F.$minDistance=$w.call($,F.$minDistance)}});var bM=O((w16,lQ1)=>{/*!
 * Module dependencies.
 */var qD0=cC(),LD0=Pv(),cQ1=v0(),ED0=KQ1(),_7=L4(),xM=_7.CastError,gM=Rz(),VD0=Qy(),dQ1=CM(),ND0=wQ1(),uy=MZ(),CD0=W4(),MD0=F3(),PD0=tB(),fM=Z1("util"),AY=Z0(),RD0=eB().castToNumber,ID0=M8(),hy=vy(),TD0=R5(),Fw,yy,jD0=Object.freeze({});function A6($,F,A,J,X){yy||(yy=xz().Embedded);let Y="type";if(J?.typeKey)Y=J.typeKey;if(this.schemaOptions=J,F){let D={};if(AY.isPOJO(F))if(F[Y])D=CD0(F),delete D[Y],F=F[Y];else F=gM;if(A?.ref!=null&&D.ref==null)D.ref=A.ref;if(F===Object)F=gM;let G=typeof F==="string"?F:AY.getFunctionName(F),z=sB(),H=Object.hasOwn(z,G)?z[G]:F;if(typeof H==="function")if(H===A6)this.embeddedSchemaType=new H($,D,J,null,X);else this.embeddedSchemaType=new H($,D,J,X);else if(H instanceof _7){if(this.embeddedSchemaType=H,!(this.embeddedSchemaType instanceof yy))this.embeddedSchemaType.path=$}}this.$isMongooseArray=!0,_7.call(this,$,A,"Array",X);let W,Z;if(this.defaultValue!=null)W=this.defaultValue,Z=typeof W==="function";if(!("defaultValue"in this)||this.defaultValue!=null){let D=function(){return Z?W.call(this):W!=null?[].concat(W):[]};D.$runBeforeSetters=!Z,this.default(D)}}A6.schemaName="Array";A6.options={castNonArrays:!0};/*!
 * ignore
 */A6.defaultOptions={};A6.set=_7.set;A6.setters=[];A6.get=_7.get;/*!
 * Inherits from SchemaType.
 */A6.prototype=Object.create(_7.prototype);A6.prototype.constructor=A6;A6.prototype.OptionsConstructor=ED0;/*!
 * ignore
 */A6._checkRequired=_7.prototype.checkRequired;A6.checkRequired=_7.checkRequired;/*!
 * Virtuals defined on this array itself.
 */A6.prototype.virtuals=null;A6.prototype.checkRequired=function(F,A){if(typeof F==="object"&&_7._isRef(this,F,A,!0))return!!F;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():A6.checkRequired())(F)};A6.prototype.enum=function(){let $=this;while(!0){let A=$?.embeddedSchemaType?.instance;if(A==="Array"){$=$.embeddedSchemaType;continue}if(A!=="String"&&A!=="Number")throw Error("`enum` can only be set on an array of strings or numbers , not "+A);break}let F=arguments;if(!Array.isArray(arguments)&&AY.isObject(arguments))F=AY.object.vals(F);return $.embeddedSchemaType.enum.apply($.embeddedSchemaType,F),this};A6.prototype.applyGetters=function($,F){if(F?.$__!=null&&F.$populated(this.path))return $;return _7.prototype.applyGetters.call(this,$,F)};A6.prototype._applySetters=function($,F,A,J){if(this.embeddedSchemaType.$isMongooseArray&&A6.options.castNonArrays){let X=0,Y=this;while(Y!=null&&Y.$isMongooseArray&&!Y.$isMongooseDocumentArray)++X,Y=Y.embeddedSchemaType;if($!=null&&$.length!==0){let W=ND0($);if(W.min===W.max&&W.max<X&&W.containsNonArrayItem)for(let Z=W.max;Z<X;++Z)$=[$]}}return _7.prototype._applySetters.call(this,$,F,A,J)};A6.prototype.cast=function($,F,A,J,X){Fw||(Fw=xz().Array);let Y,W;if(Array.isArray($)){if(!$.length&&F){let Q=F.schema.indexedPaths(),B=this.path;for(Y=0,W=Q.length;Y<W;++Y){let L=Q[Y][0][B];if(L==="2dsphere"||L==="2d")return}let q=this.path.endsWith(".coordinates")?this.path.substring(0,this.path.lastIndexOf(".")):null;if(q!=null){for(Y=0,W=Q.length;Y<W;++Y)if(Q[Y][0][q]==="2dsphere")return}}X=X||jD0;let G=AY.isMongooseArray($)?$.__array:$,z=X.path||this.path;if(X.arrayPathIndex!=null)z+="."+X.arrayPathIndex;if($=Fw(G,z,F,this),G=$.__array,A&&F?.$__!=null&&F.$populated(this.path))return $;let H=this.embeddedSchemaType,U=H.$isMongooseArray;if(H&&this.embeddedSchemaType.constructor!==gM)try{let Q=G.length;for(Y=0;Y<Q;Y++){let B={};if(U){if(X.arrayPath!=null)B.arrayPathIndex=Y;else if(H._arrayParentPath!=null)B.arrayPathIndex=Y}if(X.hydratedPopulatedDocs)B.hydratedPopulatedDocs=X.hydratedPopulatedDocs;if(X.virtuals)B.virtuals=X.virtuals;G[Y]=H.applySetters(G[Y],F,A,void 0,B)}}catch(Q){throw new xM("["+Q.kind+"]",fM.inspect($),this.path+"."+Y,Q,this)}return $}let Z=this.options.castNonArrays??A6.options.castNonArrays;if(A||Z){if(F&&A)F.markModified(this.path);return this.cast([$],F,A)}throw new xM("Array",fM.inspect($),this.path,null,this)};/*!
 * ignore
 */A6.prototype._castForPopulate=function(F,A){if(Fw||(Fw=xz().Array),Array.isArray(F)){let J,X=F.__array?F.__array:F,Y=X.length;if(this.embeddedSchemaType&&this.embeddedSchemaType.constructor!==gM)try{for(J=0;J<Y;J++){let W={};if(this.embeddedSchemaType.$isMongooseArray&&this.embeddedSchemaType._arrayParentPath!=null)W.arrayPathIndex=J;X[J]=this.embeddedSchemaType.cast(X[J],A,!1,void 0,W)}}catch(W){throw new xM("["+W.kind+"]",fM.inspect(F),this.path+"."+J,W,this)}return F}throw new xM("Array",fM.inspect(F),this.path,null,this)};A6.prototype.$toObject=A6.prototype.toObject;/*!
 * ignore
 */A6.prototype.discriminator=function(...$){let F=this;while(F.$isMongooseArray&&!F.$isMongooseDocumentArray)F=F.embeddedSchemaType;if(!F.$isMongooseDocumentArray)throw new cQ1("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return F.discriminator(...$)};/*!
 * ignore
 */A6.prototype.clone=function(){let $=Object.assign({},this.options),F=new this.constructor(this.path,this.embeddedSchemaType,$,this.schemaOptions,this.parentSchema);if(F.validators=this.validators.slice(),this.requiredValidator!==void 0)F.requiredValidator=this.requiredValidator;return F};A6.prototype._castForQuery=function($,F){let A=this.embeddedSchemaType,J=A?.schema?.options?.discriminatorKey,X=A?.discriminators;if($&&X&&typeof J==="string")if(X[$[J]])A=X[$[J]];else{let Y=TD0(X,$[J]);if(Y)A=Y}if(Array.isArray($))this.setters.reverse().forEach((Y)=>{$=Y.call(this,$,this)}),$=$.map(function(Y){if(AY.isObject(Y)&&Y.$elemMatch)return Y;return A.castForQuery(null,Y,F)});else $=A.castForQuery(null,$,F);return $};A6.prototype.castForQuery=function($,F,A){let J;if($!=null){if(J=this.$conditionalHandlers[$],!J)throw Error("Can't use "+$+" with Array.");return J.call(this,F,A)}else return this._castForQuery(F,A)};A6.prototype.virtual=function(F,A){if(F instanceof dQ1||MD0(F)==="VirtualType")return this.virtual(F.path,F.options);if(A=new VD0(A),AY.hasUserDefinedProperty(A,["ref","refPath"]))throw new cQ1("Cannot set populate virtual as a property of an array");let J=new dQ1(A,F);if(this.virtuals===null)this.virtuals={};return this.virtuals[F]=J,J};function OD0($,F){if(!Array.isArray($))$=[$];return $=$.map((A)=>{if(!AY.isObject(A))return A;if(A.$elemMatch!=null)return{$elemMatch:uy(this.embeddedSchemaType.schema,A.$elemMatch,null,this?.$$context)};let J={};return J[this.path]=A,uy(this.embeddedSchemaType.schema,J,null,this?.$$context)[this.path]},this),this.castForQuery(null,$,F)}function SD0($,F){let A=Object.keys($),J=A.length;for(let X=0;X<J;++X){let Y=A[X],W=$[Y];if(PD0(Y)&&W!=null)$[Y]=this.castForQuery(Y,W,F)}return $}var P2=A6.prototype.$conditionalHandlers={};P2.$all=OD0;P2.$options=String;P2.$elemMatch=SD0;P2.$geoIntersects=hy.cast$geoIntersects;P2.$or=my("$or");P2.$and=my("$and");P2.$nor=my("$nor");function my($){return function(A,J){if(!Array.isArray(A))throw TypeError("conditional "+$+" requires an array");let X=[];for(let Y of A)X.push(uy(this.embeddedSchemaType.schema??J.schema,Y,null,this?.$$context));return X}}P2.$near=P2.$nearSphere=hy.cast$near;P2.$within=P2.$geoWithin=hy.cast$within;P2.$size=P2.$minDistance=P2.$maxDistance=RD0;P2.$exists=qD0;P2.$type=LD0;P2.$eq=P2.$gt=P2.$gte=P2.$lt=P2.$lte=P2.$not=P2.$regex=P2.$ne=A6.prototype._castForQuery;P2.$nin=_7.prototype.$conditionalHandlers.$nin;P2.$in=_7.prototype.$conditionalHandlers.$in;A6.prototype.toJSONSchema=function(F){let A=this.getEmbeddedSchemaType(),J=this.options.required&&typeof this.options.required!=="function";return{...ID0("array","array",F?.useBsonType,J),items:A.toJSONSchema(F)}};A6.prototype.autoEncryptionType=function(){return"array"};/*!
 * Module exports.
 */lQ1.exports=A6});var nQ1=O((q16,iQ1)=>{var{Long:_D0}=w0(),dy=9223372036854775807n,cy=-9223372036854775808n,pQ1=`Mongoose only supports BigInts between ${cy} and ${dy} because MongoDB does not support arbitrary precision integers`;iQ1.exports=function(F){if(F==null)return F;if(F==="")return null;if(typeof F==="bigint"){if(F>dy||F<cy)throw Error(pQ1);return F}if(F instanceof _D0)return F.toBigInt();if(typeof F==="string"||typeof F==="number"){if(F=BigInt(F),F>dy||F<cy)throw Error(pQ1);return F}throw Error(`Cannot convert value to BigInt: "${F}"`)}});var tQ1=O((L16,aQ1)=>{/*!
 * Module dependencies.
 */var rQ1=N8(),vz=L4(),kD0=nQ1(),bD0=M8();function V4($,F,A,J){vz.call(this,$,F,"BigInt",J)}V4.schemaName="BigInt";V4.defaultOptions={};/*!
 * Inherits from SchemaType.
 */V4.prototype=Object.create(vz.prototype);V4.prototype.constructor=V4;/*!
 * ignore
 */V4._cast=kD0;V4.set=vz.set;V4.setters=[];V4.get=vz.get;V4.cast=function(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */V4._checkRequired=($)=>$!=null;V4.checkRequired=vz.checkRequired;V4.prototype.checkRequired=function($){return this.constructor._checkRequired($)};V4.prototype.cast=function($){let F;if(typeof this._castFunction==="function")F=this._castFunction;else if(typeof this.constructor.cast==="function")F=this.constructor.cast();else F=V4.cast();try{return F($)}catch(A){throw new rQ1("BigInt",$,this.path,A,this)}};/*!
 * ignore
 */var xD0={...vz.prototype.$conditionalHandlers,$gt:vM,$gte:vM,$lt:vM,$lte:vM};Object.defineProperty(V4.prototype,"$conditionalHandlers",{enumerable:!1,value:xD0});/*!
 * ignore
 */function vM($,F){return this.castForQuery(null,$,F)}V4.prototype.castForQuery=function($,F,A){let J;if($!=null){if(J=this.$conditionalHandlers[$],J)return J.call(this,F);return this.applySetters(F,A)}try{return this.applySetters(F,A)}catch(X){if(X instanceof rQ1&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};V4.prototype._castNullish=function(F){if(typeof F>"u")return F;if((typeof this.constructor.cast==="function"?this.constructor.cast():V4.cast())==null)return F;return F};V4.prototype.toJSONSchema=function(F){let A=this.options.required&&typeof this.options.required!=="function";return bD0("string","long",F?.useBsonType,A)};V4.prototype.autoEncryptionType=function(){return"long"};/*!
 * Module exports.
 */aQ1.exports=V4});var eQ1=O((E16,oQ1)=>{/*!
 * Module dependencies.
 */var sQ1=N8(),yz=L4(),Aw=dC(),gD0=M8();function x2($,F,A,J){yz.call(this,$,F,"Boolean",J)}x2.schemaName="Boolean";x2.defaultOptions={};/*!
 * Inherits from SchemaType.
 */x2.prototype=Object.create(yz.prototype);x2.prototype.constructor=x2;/*!
 * ignore
 */x2._cast=Aw;x2.set=yz.set;x2.setters=[];x2.get=yz.get;x2.cast=function(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */x2._defaultCaster=($)=>{if($!=null&&typeof $!=="boolean")throw Error();return $};/*!
 * ignore
 */x2._checkRequired=($)=>$===!0||$===!1;x2.checkRequired=yz.checkRequired;x2.prototype.checkRequired=function($){return this.constructor._checkRequired($)};Object.defineProperty(x2,"convertToTrue",{get:()=>Aw.convertToTrue,set:($)=>{Aw.convertToTrue=$}});Object.defineProperty(x2,"convertToFalse",{get:()=>Aw.convertToFalse,set:($)=>{Aw.convertToFalse=$}});x2.prototype.cast=function($){let F;if(typeof this._castFunction==="function")F=this._castFunction;else if(typeof this.constructor.cast==="function")F=this.constructor.cast();else F=x2.cast();try{return F($)}catch(A){throw new sQ1("Boolean",$,this.path,A,this)}};var fD0={...yz.prototype.$conditionalHandlers};Object.defineProperty(x2.prototype,"$conditionalHandlers",{enumerable:!1,value:fD0});x2.prototype.castForQuery=function($,F,A){let J;if($!=null){if(J=this.$conditionalHandlers[$],J)return J.call(this,F);return this.applySetters(F,A)}try{return this.applySetters(F,A)}catch(X){if(X instanceof sQ1&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};x2.prototype._castNullish=function(F){if(typeof F>"u")return F;let A=typeof this.constructor.cast==="function"?this.constructor.cast():x2.cast();if(A==null)return F;if(A.convertToFalse instanceof Set&&A.convertToFalse.has(F))return!1;if(A.convertToTrue instanceof Set&&A.convertToTrue.has(F))return!0;return F};x2.prototype.toJSONSchema=function(F){let A=this.options.required&&typeof this.options.required!=="function";return gD0("boolean","bool",F?.useBsonType,A)};x2.prototype.autoEncryptionType=function(){return"bool"};/*!
 * Module exports.
 */oQ1.exports=x2});var FK1=O((V16,$K1)=>{var vD0=_3();class ly extends vD0{}var yD0=j7();Object.defineProperty(ly.prototype,"subtype",yD0);/*!
 * ignore
 */$K1.exports=ly});var XK1=O((N16,JK1)=>{/*!
 * Module dependencies.
 */var uz=pC(),uD0=FK1(),DJ=L4(),hD0=M8(),yM=oB(),AK1=Z0(),py=uz.Binary,hM=DJ.CastError;function X9($,F,A,J){DJ.call(this,$,F,"Buffer",J)}X9.schemaName="Buffer";X9.defaultOptions={};/*!
 * Inherits from SchemaType.
 */X9.prototype=Object.create(DJ.prototype);X9.prototype.constructor=X9;X9.prototype.OptionsConstructor=uD0;/*!
 * ignore
 */X9._checkRequired=($)=>!!$?.length;X9.set=DJ.set;X9.setters=[];X9.get=DJ.get;X9.checkRequired=DJ.checkRequired;X9.prototype.checkRequired=function($,F){if(DJ._isRef(this,$,F,!0))return!!$;return this.constructor._checkRequired($)};X9.prototype.cast=function($,F,A,J,X){let Y;if(DJ._isRef(this,$,F,A)){if($?.isMongooseBuffer)return $;if(Buffer.isBuffer($)){if(!$?.isMongooseBuffer){if($=new uz($,[this.path,F]),this.options.subtype!=null)$._subtype=this.options.subtype}return $}if($ instanceof py){if(Y=new uz($.value(!0),[this.path,F]),typeof $.sub_type!=="number")throw new hM("Buffer",$,this.path,null,this);return Y._subtype=$.sub_type,Y}if($==null||AK1.isNonBuiltinObject($))return this._castRef($,F,A,X)}if($?._id)$=$._id;if($?.isMongooseBuffer)return $;if(Buffer.isBuffer($)){if(!$?.isMongooseBuffer){if($=new uz($,[this.path,F]),this.options.subtype!=null)$._subtype=this.options.subtype}return $}if($ instanceof py){if(Y=new uz($.value(!0),[this.path,F]),typeof $.sub_type!=="number")throw new hM("Buffer",$,this.path,null,this);return Y._subtype=$.sub_type,Y}if($===null)return $;let W=typeof $;if(W==="string"||W==="number"||Array.isArray($)||W==="object"&&$.type==="Buffer"&&Array.isArray($.data)){if(W==="number")$=[$];if(Y=new uz($,[this.path,F]),this.options.subtype!=null)Y._subtype=this.options.subtype;return Y}if(AK1.isPOJO($)&&($.$binary instanceof py||typeof $.$binary==="string")){let Z=this.cast(Buffer.from($.$binary,"base64"));if($.$type!=null)return Z._subtype=$.$type,Z}throw new hM("Buffer",$,this.path,null,this)};X9.prototype.subtype=function($){return this.options.subtype=$,this};/*!
 * ignore
 */function uM($,F){return this.castForQuery(null,$,F)}var mD0={...DJ.prototype.$conditionalHandlers,$bitsAllClear:yM,$bitsAnyClear:yM,$bitsAllSet:yM,$bitsAnySet:yM,$gt:uM,$gte:uM,$lt:uM,$lte:uM};Object.defineProperty(X9.prototype,"$conditionalHandlers",{enumerable:!1,value:mD0});X9.prototype.castForQuery=function($,F,A){let J;if($!=null){if(J=this.$conditionalHandlers[$],!J)throw Error("Can't use "+$+" with Buffer.");return J.call(this,F)}let X;try{X=this.applySetters(F,A)}catch(Y){if(Y instanceof hM&&Y.path===this.path&&this.$fullPath!=null)Y.path=this.$fullPath;throw Y}return X?X.toObject({transform:!1,virtuals:!1}):X};X9.prototype.toJSONSchema=function(F){let A=this.options.required&&typeof this.options.required!=="function";return hD0("string","binData",F?.useBsonType,A)};X9.prototype.autoEncryptionType=function(){return"binData"};/*!
 * Module exports.
 */JK1.exports=X9});var WK1=O((C16,YK1)=>{var dD0=_3();class Jw extends dD0{}var iy=j7();Object.defineProperty(Jw.prototype,"min",iy);Object.defineProperty(Jw.prototype,"max",iy);Object.defineProperty(Jw.prototype,"expires",iy);/*!
 * ignore
 */YK1.exports=Jw});var DK1=O((M16,ZK1)=>{var ny=Z1("assert");ZK1.exports=function(F){if(F==null||F==="")return null;if(F instanceof Date)return ny.ok(!isNaN(F.valueOf())),F;let A;if(ny.ok(typeof F!=="boolean"),F instanceof Number||typeof F==="number")A=new Date(F);else if(typeof F==="string"&&!isNaN(Number(F))&&(Number(F)>=275761||Number(F)<-271820))A=new Date(Number(F));else if(typeof F.valueOf==="function")A=new Date(F.valueOf());else A=new Date(F);if(!isNaN(A.valueOf()))return A;ny.ok(!1)}});var UK1=O((P16,HK1)=>{/*!
 * Module requirements.
 */var GK1=T7(),cD0=WK1(),JY=L4(),lD0=DK1(),pD0=M8(),iD0=F3(),nD0=Z0(),zK1=JY.CastError;function R2($,F,A,J){JY.call(this,$,F,"Date",J)}R2.schemaName="Date";R2.defaultOptions={};/*!
 * Inherits from SchemaType.
 */R2.prototype=Object.create(JY.prototype);R2.prototype.constructor=R2;R2.prototype.OptionsConstructor=cD0;/*!
 * ignore
 */R2._cast=lD0;R2.set=JY.set;R2.setters=[];R2.get=JY.get;R2.cast=function(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */R2._defaultCaster=($)=>{if($!=null&&!($ instanceof Date))throw Error();return $};R2.prototype.expires=function($){if(iD0(this._index)!=="Object")this._index={};return this._index.expires=$,nD0.expires(this._index),this};/*!
 * ignore
 */R2._checkRequired=($)=>$ instanceof Date;R2.checkRequired=JY.checkRequired;R2.prototype.checkRequired=function($,F){if(typeof $==="object"&&JY._isRef(this,$,F,!0))return $!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():R2.checkRequired())($)};R2.prototype.min=function($,F){if(this.minValidator)this.validators=this.validators.filter(function(A){return A.validator!==this.minValidator},this);if($){let A=F||GK1.messages.Date.min;if(typeof A==="string")A=A.replace(/{MIN}/,$===Date.now?"Date.now()":$.toString());let J=this;this.validators.push({validator:this.minValidator=function(X){let Y=$;if(typeof $==="function"&&$!==Date.now)Y=Y.call(this);let W=Y===Date.now?Y():J.cast(Y);return X===null||X.valueOf()>=W.valueOf()},message:A,type:"min",min:$})}return this};R2.prototype.max=function($,F){if(this.maxValidator)this.validators=this.validators.filter(function(A){return A.validator!==this.maxValidator},this);if($){let A=F||GK1.messages.Date.max;if(typeof A==="string")A=A.replace(/{MAX}/,$===Date.now?"Date.now()":$.toString());let J=this;this.validators.push({validator:this.maxValidator=function(X){let Y=$;if(typeof Y==="function"&&Y!==Date.now)Y=Y.call(this);let W=Y===Date.now?Y():J.cast(Y);return X===null||X.valueOf()<=W.valueOf()},message:A,type:"max",max:$})}return this};R2.prototype.cast=function($){let F;if(typeof this._castFunction==="function")F=this._castFunction;else if(typeof this.constructor.cast==="function")F=this.constructor.cast();else F=R2.cast();try{return F($)}catch(A){throw new zK1("date",$,this.path,A,this)}};function mM($){return this.cast($)}var rD0={...JY.prototype.$conditionalHandlers,$gt:mM,$gte:mM,$lt:mM,$lte:mM};Object.defineProperty(R2.prototype,"$conditionalHandlers",{enumerable:!1,value:rD0});R2.prototype.castForQuery=function($,F,A){if($==null)try{return this.applySetters(F,A)}catch(X){if(X instanceof zK1&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}let J=this.$conditionalHandlers[$];if(!J)throw Error("Can't use "+$+" with Date.");return J.call(this,F)};R2.prototype.toJSONSchema=function(F){let A=this.options.required&&typeof this.options.required!=="function";return pD0("string","date",F?.useBsonType,A)};R2.prototype.autoEncryptionType=function(){return"date"};/*!
 * Module exports.
 */HK1.exports=R2});var KK1=O((R16,QK1)=>{var PZ=vC(),aD0=Z1("assert");QK1.exports=function(F){if(F==null)return F;if(typeof F==="object"&&typeof F.$numberDecimal==="string")return PZ.fromString(F.$numberDecimal);if(F instanceof PZ)return F;if(typeof F==="string")return PZ.fromString(F);if(typeof Buffer==="function"&&Buffer.isBuffer(F))return new PZ(F);if(typeof Uint8Array==="function"&&F instanceof Uint8Array)return new PZ(F);if(typeof F==="number")return PZ.fromString(String(F));if(typeof F.valueOf==="function"&&typeof F.valueOf()==="string")return PZ.fromString(F.valueOf());aD0.ok(!1)}});var wK1=O((I16,BK1)=>{/*!
 * Module dependencies.
 */var GJ=L4(),tD0=GJ.CastError,sD0=KK1(),oD0=M8(),ry=t9();function b4($,F,A,J){GJ.call(this,$,F,"Decimal128",J)}b4.schemaName="Decimal128";b4.defaultOptions={};/*!
 * Inherits from SchemaType.
 */b4.prototype=Object.create(GJ.prototype);b4.prototype.constructor=b4;/*!
 * ignore
 */b4._cast=sD0;b4.set=GJ.set;b4.setters=[];b4.get=GJ.get;b4.cast=function(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */b4._defaultCaster=($)=>{if($!=null&&!ry($,"Decimal128"))throw Error();return $};/*!
 * ignore
 */b4._checkRequired=($)=>ry($,"Decimal128");b4.checkRequired=GJ.checkRequired;b4.prototype.checkRequired=function(F,A){if(GJ._isRef(this,F,A,!0))return!!F;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():b4.checkRequired())(F)};b4.prototype.cast=function($,F,A,J,X){if(GJ._isRef(this,$,F,A)){if(ry($,"Decimal128"))return $;return this._castRef($,F,A,X)}let Y;if(typeof this._castFunction==="function")Y=this._castFunction;else if(typeof this.constructor.cast==="function")Y=this.constructor.cast();else Y=b4.cast();try{return Y($)}catch(W){throw new tD0("Decimal128",$,this.path,W,this)}};/*!
 * ignore
 */function dM($){return this.cast($)}var eD0={...GJ.prototype.$conditionalHandlers,$gt:dM,$gte:dM,$lt:dM,$lte:dM};Object.defineProperty(b4.prototype,"$conditionalHandlers",{enumerable:!1,value:eD0});b4.prototype.toJSONSchema=function(F){let A=this.options.required&&typeof this.options.required!=="function";return oD0("string","decimal",F?.useBsonType,A)};b4.prototype.autoEncryptionType=function(){return"decimal"};/*!
 * Module exports.
 */BK1.exports=b4});var EK1=O((T16,LK1)=>{var $G0=_3();class cM extends $G0{}var qK1=j7();Object.defineProperty(cM.prototype,"_id",qK1);Object.defineProperty(cM.prototype,"minimize",qK1);LK1.exports=cM});var NK1=O((j16,VK1)=>{/*!
 * ignore
 */VK1.exports=function(F){F.s.hooks.pre("save",!1,async function(){if(this.$isSubdocument)return;let X=this.$getAllSubdocs({useCache:!0});if(!X.length)return;let Y=this.$__.saveOptions;if(await Promise.all(X.map((W)=>W._execDocumentPreHooks("save",Y))),this.$__.saveOptions)this.$__.saveOptions.__subdocs=null},null,!0),F.s.hooks.pre("save",async function(){let X=this.$__.removedSubdocs;if(!X?.length)return;let Y=[];for(let W of X)Y.push(W._execDocumentPreHooks("deleteOne"));await Promise.all(Y)}),F.s.hooks.post("save",async function(){let X=this.$__.removedSubdocs;if(!X?.length)return;let Y=[];for(let W of X)Y.push(W._execDocumentPostHooks("deleteOne"));this.$__.removedSubdocs=null,await Promise.all(Y)}),F.s.hooks.post("save",async function(){if(this.$isSubdocument)return;let X=this.$getAllSubdocs({useCache:!0});if(!X.length)return;let Y=[];for(let W of X)Y.push(W._execDocumentPostHooks("save"));await Promise.all(Y)},null,!0)}});var MK1=O((O16,sy)=>{var FG0=s1().objectIdSymbol,CK1=Z0();/*!
 * ignore
 */sy.exports=function(F){F.post("init",function(){return ty.call(this),this}),F.pre("save",function(){ay.call(this)}),F.pre("deleteOne",{document:!0,query:!1},function(){ay.call(this)}),F.pre("updateOne",{document:!0,query:!1},function(){ay.call(this)}),F.post("save",function(){ty.call(this)})};/*!
 * ignore
 */function ay(){let $,F;if(this.$__.shardval){$=Object.keys(this.$__.shardval),F=$.length,this.$where=this.$where||{};for(let A=0;A<F;++A)this.$where[$[A]]=this.$__.shardval[$[A]]}}/*!
 * ignore
 */sy.exports.storeShard=ty;/*!
 * ignore
 */function ty(){let $=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(!CK1.isPOJO($))return;let F=this.$__.shardval={},A=Object.keys($),J=A.length,X;for(let Y=0;Y<J;++Y)if(X=this.$__getValue(A[Y]),X==null)F[A[Y]]=X;else if(CK1.isMongooseObject(X))F[A[Y]]=X.toObject({depopulate:!0,_isNested:!0});else if(X instanceof Date||X[FG0])F[A[Y]]=X;else if(typeof X.valueOf==="function")F[A[Y]]=X.valueOf();else F[A[Y]]=X}});var IK1=O((S16,RK1)=>{var hz=s1().arrayAtomicsSymbol,oy=s1().sessionNewDocuments,ey=Z0();RK1.exports=function(F){F.pre("save",function(){let J=this.$session();if(J==null)return;if(J.transaction==null||J[oy]==null)return;if(!J[oy].has(this)){let X={};if(this.isNew)X.isNew=!0;if(this.$__schema.options.versionKey)X.versionKey=this.get(this.$__schema.options.versionKey);X.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths("modify"))),X.atomics=AG0(this),J[oy].set(this,X)}})};function AG0($,F){let A=new Map;F=F||new Map;let J=Object.keys($.$__.activePaths.init).concat(Object.keys($.$__.activePaths.modify));for(let Y of J){let W=$.$__getValue(Y);if(Array.isArray(W)&&ey.isMongooseDocumentArray(W)&&W.length&&W[hz]!=null&&ey.hasOwnKeys(W[hz])){let Z=F.get(Y)||{};A.set(Y,PK1(Z,W[hz]))}}let X=$.$__dirty();for(let Y of X){let{path:W,value:Z}=Y;if(Z?.[hz]!=null&&ey.hasOwnKeys(Z[hz])){let D=F.get(W)||{};A.set(W,PK1(D,Z[hz]))}}return A}function PK1($,F){if($=$||{},F.$pullAll!=null)$.$pullAll=($.$pullAll||[]).concat(F.$pullAll);if(F.$push!=null)$.$push=$.$push||{},$.$push.$each=($.$push.$each||[]).concat(F.$push.$each);if(F.$addToSet!=null)$.$addToSet=($.$addToSet||[]).concat(F.$addToSet);if(F.$set!=null)$.$set=Array.isArray(F.$set)?[...F.$set]:Object.assign({},F.$set);return $}});var jK1=O((_16,TK1)=>{/*!
 * ignore
 */TK1.exports=function(F){F.pre("save",!1,async function(X){if(this.$isSubdocument)return;let Y=X&&typeof X==="object"&&"validateBeforeSave"in X,W;if(Y)W=!!X.validateBeforeSave;else W=this.$__schema.options.validateBeforeSave;if(W){let D=X&&typeof X==="object"&&"validateModifiedOnly"in X?{validateModifiedOnly:X.validateModifiedOnly}:null;await this.$validate(D).then(()=>{this.$op="save"})}},null,!0)}});var $u=O((JG0)=>{JG0.saveSubdocs=NK1();JG0.sharding=MK1();JG0.trackTransaction=IK1();JG0.validateBeforeSave=jK1()});var _K1=O((b16,SK1)=>{var OK1=$u();SK1.exports=function(F){for(let A of Object.values(OK1))A(F,{deduplicate:!0});F.plugins=Object.values(OK1).map((A)=>({fn:A,opts:{deduplicate:!0}})).concat(F.plugins)}});var xK1=O((x16,bK1)=>{var DG0=lC(),GG0=HZ(),zG0=t9(),HG0=sX(),UG0=L4(),kK1=UZ();bK1.exports=function $(F,A,J,X){let Y=Object.keys(A),W=0,Z=Y.length,D;if(J=J||"",X=X||new WeakSet,X.has(A))return;X.add(A);while(W<Z){if(D=Y[W++],!J){if(D==="discriminators"||D==="base"||D==="_applyDiscriminators"||D==="_userProvidedOptions"||D==="options"||D==="tree")continue}if(J==="tree"&&A?.instanceOfSchema)continue;if(GG0.has(D))continue;if(F[D]==null)F[D]=A[D];else if(kK1(A[D])){if(!kK1(F[D]))F[D]={};if(A[D]!=null){if(A[D].$isSingleNested&&F[D].$isMongooseDocumentArray||A[D].$isMongooseDocumentArray&&F[D].$isSingleNested||A[D].$isMongooseDocumentArrayElement&&F[D].$isMongooseDocumentArrayElement)continue;else if(A[D].instanceOfSchema){if(F[D].instanceOfSchema)DG0(F[D],A[D].clone(),!0);else F[D]=A[D].clone();continue}else if(zG0(A[D],"ObjectId")){F[D]=new HG0(A[D]);continue}else if(A[D]instanceof UG0){if(F[D]==null)F[D]=A[D].clone();if(!A[D].$isMongooseDocumentArray&&!A[D].$isSingleNested)continue}}$(F[D],A[D],J?J+"."+D:D,X)}}if(A?.instanceOfSchema)F.tree=Object.assign({},A.tree,F.tree)}});var lM=O((g16,vK1)=>{var gK1=Rz(),QG0=_K1(),KG0=W4(),BG0=oC().defineKey,wG0=E4(),Fu=Z0(),qG0=xK1(),fK1={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0,statics:!0};function LG0($,F){if($.encryptionType()==null&&F.encryptionType()==null)return;let A=X(J($),J(F));for(let Y of A){if($._hasEncryptedField(Y)&&F._hasEncryptedField(Y))throw Error(`encrypted fields cannot be declared on both the base schema and the child schema in a discriminator. path=${Y}`);if($._hasEncryptedField(Y)||F._hasEncryptedField(Y))throw Error(`encrypted fields cannot have the same path as a non-encrypted field for discriminators. path=${Y}`)}function J(Y){return[...Object.keys(Y.paths),...Object.keys(Y.singleNestedPaths)]}function*X(Y,W){let Z=new Set(Y);for(let D of W)if(Z.has(D))yield D}}/*!
 * ignore
 */vK1.exports=function(F,A,J,X,Y,W,Z){if(!J?.instanceOfSchema)throw Error("You must pass a valid discriminator Schema");if(W=W==null?!0:W,F.schema.discriminatorMapping&&!F.schema.discriminatorMapping.isRoot)throw Error('Discriminator "'+A+'" can only be a discriminator of the root model');if(Y){let U=wG0(F.base,"options.applyPluginsToDiscriminators",!1)||!W;F.base._applyPlugins(J,{skipTopLevel:!U})}else if(!W)QG0(J);let D=F.schema.options.discriminatorKey,G=F.schema.path(D);if(G!=null){if(!Fu.hasUserDefinedProperty(G.options,"select"))G.options.select=!0;G.options.$skipDiscriminatorCheck=!0}else{let U={};U[D]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},U[D][F.schema.options.typeKey]=String,F.schema.add(U),BG0({prop:D,prototype:F.prototype,options:F.schema.options})}if(J.path(D)&&J.path(D).options.$skipDiscriminatorCheck!==!0)throw Error('Discriminator "'+A+'" cannot have field with name "'+D+'"');let z=A;if(typeof X==="string"&&X.length||X!=null)z=X;LG0(F.schema,J);function H(U,Q){if(U._baseSchema=Q,Q.paths._id&&Q.paths._id.options&&!Q.paths._id.options.auto)U.remove("_id");let B=Object.keys(Q.paths),q=[];for(let M of B){if(U.nested[M]){q.push(M);continue}if(M.indexOf(".")===-1)continue;let I=M.split(".").slice(0,-1),T="";for(let j of I)if(T+=(T.length?".":"")+j,U.paths[T]instanceof gK1||U.singleNestedPaths[T]instanceof gK1)q.push(M)}U.obj={...U.obj},qG0(U,Q),U._gatherChildSchemas();for(let M of q)delete U.paths[M];U.childSchemas.forEach((M)=>{M.model.prototype.$__setSchema(M.schema)});let L={};if(L[D]={default:z,select:!0,set:function(M){if(M===z||Array.isArray(z)&&Fu.deepEqual(M,z))return z;throw Error(`Can't set discriminator key "`+D+'"')},$skipDiscriminatorCheck:!0},L[D][U.options.typeKey]=G?G.options[U.options.typeKey]:String,U.add(L),U.discriminatorMapping={key:D,value:z,isRoot:!1},Q.options.collection)U.options.collection=Q.options.collection;let E=U.options.toJSON,V=U.options.toObject,R=U.options._id,N=U.options.id,S=Object.keys(U.options);U.options.discriminatorKey=Q.options.discriminatorKey;let C=U._userProvidedOptions;for(let M of S)if(!fK1[M]){if(M in C&&!Fu.deepEqual(U.options[M],Q.options[M]))throw Error("Can't customize discriminator option "+M+" (can only modify "+Object.keys(fK1).join(", ")+")")}U.options=KG0(Q.options);for(let M of Object.keys(C))U.options[M]=C[M];if(E)U.options.toJSON=E;if(V)U.options.toObject=V;if(typeof R<"u")U.options._id=R;if(U.options.id=N,W)U.s.hooks=F.schema.s.hooks.merge(U.s.hooks);if(Y)U.plugins=Array.prototype.slice.call(Q.plugins);U.callQueue=Q.callQueue.concat(U.callQueue),delete U._requiredpaths}if(H(J,F.schema),!F.discriminators)F.discriminators={};if(!F.schema.discriminatorMapping)F.schema.discriminatorMapping={key:D,value:null,isRoot:!0};if(!F.schema.discriminators)F.schema.discriminators={};if(F.schema.discriminators[A]=J,F.discriminators[A]&&!J.options.overwriteModels&&!Z)throw Error('Discriminator with name "'+A+'" already exists');return J}});var pM=O((f16,yK1)=>{var EG0=R5();yK1.exports=function(F,A,J){let X=F.schema.options.discriminatorKey,Y=A?.[X];if(Y==null)Y=J;if(F.discriminators&&Y!=null)if(F.discriminators[Y])F=F.discriminators[Y];else{let W=EG0(F.discriminators,Y);if(W)F=W}return F}});var Au=O((v16,uK1)=>{var VG0=By();uK1.exports=function(F,A){if(A?._id==null)return F;if(F=F.clone(),!A._id)F.remove("_id"),F.options._id=!1;else if(!F.paths._id)VG0(F),F.options._id=!0;return F}});var Xu=O((y16,hK1)=>{/*!
 * Module dependencies.
 */var NG0=v0();class Ju extends NG0{constructor($,F){let A=`Cannot create use schema for property "${$}" because the schema has the ${F} option enabled.`;super(A)}}Object.defineProperty(Ju.prototype,"name",{value:"InvalidSchemaOptionError"});/*!
 * exports
 */hK1.exports=Ju});var Du=O((u16,pK1)=>{/*!
 * Module dependencies.
 */var mK1=N8(),Yu=Z1("events").EventEmitter,CG0=nC(),MG0=EK1(),RZ=L4(),PG0=aC(),RG0=cC(),dK1=eB().castToNumber,IG0=M8(),TG0=lM(),Wu=vy(),Zu=pM(),jG0=Au(),OG0=V$().internalToObjectOptions,SG0=jz(),cK1=Z0(),_G0=Xu(),iM;pK1.exports=Y9;function Y9($,F,A,J){if($.options.timeseries)throw new _G0(F,"timeseries");let X=Y9.defaultOptions?._id;if(X!=null)A=A||{},A._id=X;$=jG0($,A),this.Constructor=lK1($,null,A),this.Constructor.path=F,this.Constructor.prototype.$basePath=F,this.schema=$,this.$isSingleNested=!0,this.base=$.base,RZ.call(this,F,A,"Embedded",J)}/*!
 * ignore
 */Y9.prototype=Object.create(RZ.prototype);Y9.prototype.constructor=Y9;Y9.prototype.OptionsConstructor=MG0;/*!
 * ignore
 */function lK1($,F,A){iM||(iM=JM());let J=function(W,Z,D){if(this.$__parent=D,iM.apply(this,arguments),D==null)return;this.$session(D.$session())};$._preCompile();let X=F?.prototype??iM.prototype;J.prototype=Object.create(X),J.prototype.$__setSchema($),J.prototype.constructor=J,J.prototype.$__schemaTypeOptions=A,J.$__required=A?.required,J.base=$.base,J.schema=$,J.$isSingleNested=!0,J.events=new Yu,J.prototype.toBSON=function(){return this.toObject(OG0)};for(let Y in $.methods)J.prototype[Y]=$.methods[Y];for(let Y in $.statics)J[Y]=$.statics[Y];for(let Y in Yu.prototype)J[Y]=Yu.prototype[Y];return J}/*!
 * ignore
 */var nF={...RZ.prototype.$conditionalHandlers};nF.$geoWithin=function(F,A){return{$geometry:this.castForQuery(null,F.$geometry,A)}};/*!
 * ignore
 */nF.$near=nF.$nearSphere=Wu.cast$near;nF.$within=nF.$geoWithin=Wu.cast$within;nF.$geoIntersects=Wu.cast$geoIntersects;nF.$minDistance=dK1;nF.$maxDistance=dK1;nF.$exists=RG0;Object.defineProperty(Y9.prototype,"$conditionalHandlers",{enumerable:!1,value:nF});Y9.prototype.cast=function($,F,A,J,X){if($?.$isSingleNested&&$.parent===F)return $;if(!A&&$!=null&&(typeof $!=="object"||Array.isArray($)))throw new CG0(this.path,$);let Y=this.schema.path(this.schema.options.discriminatorKey),W=Y==null?null:Y.getDefault(F),Z=Zu(this.Constructor,$,W),D,G=F?.$__?.selected,z=this.path,H=G==null?null:Object.keys(G).reduce((U,Q)=>{if(Q.startsWith(z+"."))U=U||{},U[Q.substring(z.length+1)]=G[Q];return U},null);if(A){if(D=new Z(void 0,H,F,{defaults:!1}),delete D.$__.defaults,X.path!=null)X={...X},delete X.path;D.$init($,X);let U=SG0(H);PG0(D,H,U)}else{if(X=Object.assign({},X,{priorDoc:J}),cK1.hasOwnKeys($)===!1)return new Z({},H,F,X);return new Z($,H,F,X)}return D};Y9.prototype.castForQuery=function($,F,A,J){let X;if($!=null){if(X=this.$conditionalHandlers[$],!X)throw Error("Can't use "+$);return X.call(this,F)}if(F==null)return F;let Y=Zu(this.Constructor,F);if(F instanceof Y)return F;if(this.options.runSetters)F=this._applySetters(F,A);let W=J?.strict??void 0;try{F=new Y(F,W)}catch(Z){if(!(Z instanceof mK1))throw new mK1("Embedded",F,this.path,Z,this);throw Z}return F};Y9.prototype.doValidate=async function(F,A,J){let X=Zu(this.Constructor,F);if(F&&!(F instanceof X))F=new X(F,null,A?.$__!=null?A:null);if(J?.skipSchemaValidators){if(!F)return;return F.validate()}if(await RZ.prototype.doValidate.call(this,F,A,J),F!=null)await F.validate()};Y9.prototype.doValidateSync=function($,F,A){if(!A?.skipSchemaValidators){let J=RZ.prototype.doValidateSync.call(this,$,F);if(J)return J}if(!$)return;return $.validateSync()};Y9.prototype.discriminator=function($,F,A){A=A||{};let J=cK1.isPOJO(A)?A.value:A,X=typeof A.clone==="boolean"?A.clone:!0;if(F.instanceOfSchema&&X)F=F.clone();return F=TG0(this.Constructor,$,F,J,null,null,A.overwriteExisting),this.Constructor.discriminators[$]=lK1(F,this.Constructor),this.Constructor.discriminators[$]};/*!
 * ignore
 */Y9.defaultOptions={};Y9.set=RZ.set;Y9.setters=[];Y9.get=RZ.get;/*!
 * ignore
 */Y9.prototype.toJSON=function(){return{path:this.path,options:this.options}};/*!
 * ignore
 */Y9.prototype.clone=function(){let $=new this.constructor(this.schema,this.path,{...this.options,_skipApplyDiscriminators:!0},this.parentSchema);if($.validators=this.validators.slice(),this.requiredValidator!==void 0)$.requiredValidator=this.requiredValidator;return $.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),$._appliedDiscriminators=this._appliedDiscriminators,$};Y9.prototype.toJSONSchema=function(F){let A=this.options.required&&typeof this.options.required!=="function";return{...this.schema.toJSONSchema(F),...IG0("object","object",F?.useBsonType,A)}}});var Gu=O((h16,iK1)=>{/*!
 * Module dependencies.
 */var kG0=v0(),Xw=L4(),bG0=Du(),xG0=pM();function R$($,F,A,J){if(this.$parentSchemaType=A?.$parentSchemaType,!this.$parentSchemaType)throw new kG0("Cannot create DocumentArrayElement schematype without a parent");delete A.$parentSchemaType,Xw.call(this,$,A,"DocumentArrayElement",J),this.$isMongooseDocumentArrayElement=!0,this.Constructor=A?.Constructor,this.schema=F}R$.schemaName="DocumentArrayElement";R$.defaultOptions={};R$.set=Xw.set;R$.get=Xw.get;/*!
 * Inherits from SchemaType.
 */R$.prototype=Object.create(Xw.prototype);R$.prototype.constructor=R$;R$.prototype.cast=function(...$){return this.$parentSchemaType.cast(...$)[0]};R$.prototype.doValidate=async function(F,A,J){let X=xG0(this.Constructor,F);if(F&&!(F instanceof X))F=new X(F,A,null,null,J?.index??null);return bG0.prototype.doValidate.call(this,F,A,J)};R$.prototype.clone=function(){this.options.$parentSchemaType=this.$parentSchemaType;let $=Xw.prototype.clone.apply(this,arguments);return delete this.options.$parentSchemaType,$.Constructor=this.Constructor,$.schema=this.schema,$};/*!
 * Module exports.
 */iK1.exports=R$});var aK1=O((m16,rK1)=>{var gG0=_3();class nM extends gG0{}var nK1=j7();Object.defineProperty(nM.prototype,"excludeIndexes",nK1);Object.defineProperty(nM.prototype,"_id",nK1);/*!
 * ignore
 */rK1.exports=nM});var XB1=O((d16,JB1)=>{/*!
 * Module dependencies.
 */var tK1=N8(),fG0=Gu(),zu=Z1("events").EventEmitter,Uu=bM(),vG0=aK1(),Yw=L4(),sK1=MZ(),oK1=M8(),yG0=lM(),eK1=Au(),uG0=FM(),hG0=tB(),mz=Z0(),rM=pM(),mG0=Xu(),$B1=s1().arrayAtomicsSymbol,Hu=s1().arrayPathSymbol,dG0=s1().documentArrayParent,zJ,IZ;function Z4($,F,A,J,X){if(F.options?.timeseries)throw new mG0($,"timeseries");let Y=Z4.defaultOptions?._id;if(Y!=null)J=J||{},J._id=Y;if(J?._id!=null)F=eK1(F,J);else if(A?._id!=null)F=eK1(F,A);let W=AB1(F,A);W.prototype.$basePath=$,W.path=$;let Z=this,D=new fG0($+".$",F,{...J||{},$parentSchemaType:Z,Constructor:W});Uu.call(this,$,D,A,null,X),this.schema=F,this.schemaOptions=J||{},this.$isMongooseDocumentArray=!0,this.Constructor=W,W.base=F.base;let G=this.defaultValue;if(!("defaultValue"in this)||G!=null)this.default(function(){let z=G.call(this);if(z!=null&&!Array.isArray(z))z=[z];return z})}Z4.schemaName="DocumentArray";Z4.options={castNonArrays:!0};/*!
 * Inherits from SchemaArray.
 */Z4.prototype=Object.create(Uu.prototype);Z4.prototype.constructor=Z4;Z4.prototype.OptionsConstructor=vG0;Object.defineProperty(Z4.prototype,"$conditionalHandlers",{enumerable:!1,value:{...Uu.prototype.$conditionalHandlers}});/*!
 * ignore
 */function AB1($,F,A){IZ||(IZ=Sz());function J(){if(IZ.apply(this,arguments),this.__parentArray==null||this.__parentArray.getArrayParent()==null)return;this.$session(this.__parentArray.getArrayParent().$session())}$._preCompile();let X=A?.prototype??IZ.prototype;J.prototype=Object.create(X),J.prototype.$__setSchema($),J.schema=$,J.prototype.constructor=J,J.$isArraySubdocument=!0,J.events=new zu,J.base=$.base;for(let Y in $.methods)J.prototype[Y]=$.methods[Y];for(let Y in $.statics)J[Y]=$.statics[Y];for(let Y in zu.prototype)J[Y]=zu.prototype[Y];return J.options=F,J}Z4.prototype.discriminator=function($,F,A){if(typeof $==="function")$=mz.getFunctionName($);A=A||{};let J=mz.isPOJO(A)?A.value:A,X=typeof A.clone==="boolean"?A.clone:!0;if(F.instanceOfSchema&&X)F=F.clone();F=yG0(this.Constructor,$,F,J,null,null,A?.overwriteExisting);let Y=AB1(F,null,this.Constructor);return Y.baseCasterConstructor=this.Constructor,Object.defineProperty(Y,"name",{value:$}),this.Constructor.discriminators[$]=Y,this.Constructor.discriminators[$]};Z4.prototype.doValidate=async function(F,A,J){if(zJ||(zJ=EZ()),await Yw.prototype.doValidate.call(this,F,A),J?.updateValidator)return;if(!mz.isMongooseDocumentArray(F))F=new zJ(F,this.path,A);let X=[];for(let Y=0;Y<F.length;++Y){let W=F[Y];if(W==null)continue;if(!(W instanceof IZ)){let Z=rM(this.Constructor,F[Y]);W=F[Y]=new Z(W,F,void 0,void 0,Y)}if(J?.validateModifiedOnly&&!W.$isModified())continue;X.push(W.$__validate(null,J))}await Promise.all(X)};Z4.prototype.doValidateSync=function($,F,A){let J=Yw.prototype.doValidateSync.call(this,$,F);if(J!=null)return J;let X=$?.length,Y=null;if(!X)return;for(let W=0,Z=X;W<Z;++W){let D=$[W];if(!D)continue;if(!(D instanceof IZ)){let z=rM(this.Constructor,$[W]);D=$[W]=new z(D,$,void 0,void 0,W)}if(A?.validateModifiedOnly&&!D.$isModified())continue;let G=D.validateSync(A);if(G&&Y==null)Y=G}return Y};/*!
 * ignore
 */Z4.prototype.getDefault=function($,F,A){let J=typeof this.defaultValue==="function"?this.defaultValue.call($):this.defaultValue;if(J==null)return J;if(A?.skipCast)return J;if(zJ||(zJ=EZ()),!Array.isArray(J))J=[J];J=new zJ(J,this.path,$);for(let X=0;X<J.length;++X){let W=new(rM(this.Constructor,J[X]))({},J,void 0,void 0,X);W.$init(J[X]),W.isNew=!0,Object.assign(W.$__.activePaths.default,W.$__.activePaths.init),W.$__.activePaths.init={},J[X]=W}return J};var cG0=Object.freeze({transform:!1,virtuals:!1}),FB1=Object.freeze({skipId:!1,willInit:!0});Z4.prototype.cast=function($,F,A,J,X){if(zJ||(zJ=EZ()),$?.[Hu]!=null&&$===J)return $;let Y,W;X=X||{};let Z=X.path||this.path;if(!Array.isArray($)){if(!A&&!Z4.options.castNonArrays)throw new tK1("DocumentArray",$,this.path,null,this);if(!!F&&A)F.markModified(Z);return this.cast([$],F,A,J,X)}if(!X.skipDocumentArrayCast||mz.isMongooseDocumentArray($))$=new zJ($,Z,F,this);if(J!=null)$[$B1]=J[$B1]||{};if(X.arrayPathIndex!=null)$[Hu]=Z+"."+X.arrayPathIndex;let D=mz.isMongooseDocumentArray($)?$.__array:$,G=D.length;for(let z=0;z<G;++z){if(!D[z])continue;let H=rM(this.Constructor,D[z]),U=uG0(D[z],!0);if(D[z]!==U)D[z]=U;if(D[z]instanceof IZ){if(D[z][dG0]!==F)if(A){let Q=new H(null,$,FB1,Y,z);D[z]=Q.$init(D[z])}else{let Q=new H(D[z],$,void 0,void 0,z);D[z]=Q}if(D[z].__index==null)D[z].$setIndex(z)}else if(D[z]!=null)if(A){if(F)Y||(Y=lG0(this,F.$__.selected,A));else Y=!0;W=new H(null,$,FB1,Y,z),D[z]=W.$init(D[z],X)}else{if(typeof J?.id==="function")W=J.id(D[z]._id);if(J&&W&&mz.deepEqual(W.toObject(cG0),D[z]))W.set(D[z]),D[z]=W;else try{W=new H(D[z],$,void 0,void 0,z),D[z]=W}catch(Q){throw new tK1("embedded",D[z],$[Hu],Q,this)}}}return $};/*!
 * ignore
 */Z4.prototype.clone=function(){let $=Object.assign({},this.options),F=new this.constructor(this.path,this.schema,$,this.schemaOptions,this.parentSchema);if(F.validators=this.validators.slice(),this.requiredValidator!==void 0)F.requiredValidator=this.requiredValidator;return F.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),F._appliedDiscriminators=this._appliedDiscriminators,F};/*!
 * ignore
 */Z4.prototype.applyGetters=function($,F){return Yw.prototype.applyGetters.call(this,$,F)};function lG0($,F,A){if(!(A&&F))return;let J=$.path+".",X=Object.keys(F),Y=X.length,W={},Z,D,G;while(Y--)if(D=X[Y],D.startsWith(J)){if(G=D.substring(J.length),G==="$")continue;if(G.startsWith("$."))G=G.substring(2);Z||(Z=!0),W[G]=F[D]}return Z&&W||void 0}/*!
 * ignore
 */Z4.defaultOptions={};Z4.set=Yw.set;Z4.setters=[];Z4.get=Yw.get;/*!
 * Handle casting $elemMatch operators
 */Z4.prototype.$conditionalHandlers.$elemMatch=pG0;function pG0($,F){let A=Object.keys($),J=A.length;for(let Z=0;Z<J;++Z){let D=A[Z],G=$[D];if(hG0(D)&&G!=null)$[D]=this.castForQuery(D,G,F)}let X=this?.Constructor?.schema?.options?.discriminatorKey,Y=this?.Constructor?.schema?.discriminators||{};if(X!=null&&$[X]!=null&&Y[$[X]]!=null)return sK1(Y[$[X]],$,null,this?.$$context);let W=this.Constructor.schema??F.schema;return sK1(W,$,null,this?.$$context)}Z4.prototype.toJSONSchema=function(F){let A=oK1("object","object",F?.useBsonType,!1),J=this.options.required&&typeof this.options.required!=="function";return{...oK1("array","array",F?.useBsonType,J),items:{...A,...this.schema.toJSONSchema(F)}}};/*!
 * Module exports.
 */JB1.exports=Z4});var ZB1=O((c16,WB1)=>{var YB1=Z1("assert"),Qu=w0(),iG0=t9();WB1.exports=function(F){if(F==null||F==="")return null;let A;if(iG0(F,"Long"))A=F.toNumber();else if(typeof F==="string")try{return A=Qu.Double.fromString(F),A}catch{YB1.ok(!1)}else if(typeof F==="object"){let J=F.valueOf()??F.toString();if(typeof J==="string")try{return A=Qu.Double.fromString(J),A}catch{YB1.ok(!1)}else A=Number(J)}else A=Number(F);return new Qu.Double(A)}});var GB1=O((l16,DB1)=>{/*!
 * Module dependencies.
 */var nG0=N8(),dz=L4(),rG0=ZB1(),aG0=M8();function r4($,F,A,J){dz.call(this,$,F,"Double",J)}r4.schemaName="Double";r4.defaultOptions={};/*!
 * Inherits from SchemaType.
 */r4.prototype=Object.create(dz.prototype);r4.prototype.constructor=r4;/*!
 * ignore
 */r4._cast=rG0;r4.set=dz.set;r4.setters=[];r4.get=dz.get;/*!
 * ignore
 */r4._defaultCaster=($)=>{if($!=null){if($._bsontype!=="Double")throw Error()}return $};r4.cast=function(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */r4._checkRequired=($)=>$!=null;r4.checkRequired=dz.checkRequired;r4.prototype.checkRequired=function($){return this.constructor._checkRequired($)};r4.prototype.cast=function($){let F;if(typeof this._castFunction==="function")F=this._castFunction;else if(typeof this.constructor.cast==="function")F=this.constructor.cast();else F=r4.cast();try{return F($)}catch(A){throw new nG0("Double",$,this.path,A,this)}};/*!
 * ignore
 */function aM($){return this.cast($)}var tG0={...dz.prototype.$conditionalHandlers,$gt:aM,$gte:aM,$lt:aM,$lte:aM};Object.defineProperty(r4.prototype,"$conditionalHandlers",{enumerable:!1,value:tG0});r4.prototype.toJSONSchema=function(F){let A=this.options.required&&typeof this.options.required!=="function";return aG0("number","double",F?.useBsonType,A)};r4.prototype.autoEncryptionType=function(){return"double"};/*!
 * Module exports.
 */DB1.exports=r4});var HB1=O((p16,zB1)=>{var sG0=t9(),oG0=Z1("assert");zB1.exports=function(F){if(F==null)return F;if(F==="")return null;let A=sG0(F,"Long")?F.toNumber():Number(F),J=2147483647,X=-2147483648;if(A===(A|0)&&A>=X&&A<=J)return A;oG0.ok(!1)}});var KB1=O((i16,QB1)=>{/*!
 * Module dependencies.
 */var UB1=N8(),cz=L4(),eG0=HB1(),$z0=M8(),tM=oB();function x4($,F,A,J){cz.call(this,$,F,"Int32",J)}x4.schemaName="Int32";x4.defaultOptions={};/*!
 * Inherits from SchemaType.
 */x4.prototype=Object.create(cz.prototype);x4.prototype.constructor=x4;/*!
 * ignore
 */x4._cast=eG0;x4.set=cz.set;x4.setters=[];x4.get=cz.get;/*!
 * ignore
 */x4._defaultCaster=($)=>{if($!=null){if(typeof $!=="number"||$!==($|0)||$<-2147483648||$>2147483647)throw Error()}return $};x4.cast=function(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */x4._checkRequired=($)=>$!=null;x4.checkRequired=cz.checkRequired;x4.prototype.checkRequired=function($){return this.constructor._checkRequired($)};x4.prototype.cast=function($){let F;if(typeof this._castFunction==="function")F=this._castFunction;else if(typeof this.constructor.cast==="function")F=this.constructor.cast();else F=x4.cast();try{return F($)}catch(A){throw new UB1("Int32",$,this.path,A,this)}};/*!
 * ignore
 */var Fz0={...cz.prototype.$conditionalHandlers,$gt:sM,$gte:sM,$lt:sM,$lte:sM,$bitsAllClear:tM,$bitsAnyClear:tM,$bitsAllSet:tM,$bitsAnySet:tM};Object.defineProperty(x4.prototype,"$conditionalHandlers",{enumerable:!1,value:Fz0});/*!
 * ignore
 */function sM($,F){return this.castForQuery(null,$,F)}x4.prototype.castForQuery=function($,F,A){let J;if($!=null){if(J=this.$conditionalHandlers[$],J)return J.call(this,F);return this.applySetters(F,A)}try{return this.applySetters(F,A)}catch(X){if(X instanceof UB1&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};x4.prototype.toJSONSchema=function(F){let A=this.options.required&&typeof this.options.required!=="function";return $z0("number","int",F?.useBsonType,A)};x4.prototype.autoEncryptionType=function(){return"int"};/*!
 * Module exports.
 */QB1.exports=x4});var wB1=O((n16,BB1)=>{var Az0=_3();class Ku extends Az0{}var Jz0=j7();Object.defineProperty(Ku.prototype,"of",Jz0);BB1.exports=Ku});var EB1=O((r16,LB1)=>{/*!
 * ignore
 */var Bu=RM(),Xz0=wB1(),qB1=L4(),Yz0=M8(),Wz0=v0(),Zz0=VZ(),lz=Z0();class pz extends qB1{constructor($,F,A,J){super($,F,"Map",J);this.$isSchemaMap=!0,this._createNestedSchemaType(J,$,F,A)}set($,F){return qB1.set($,F)}cast($,F,A,J,X){if($ instanceof Bu)return $;let Y=this.path;if(A){let W=new Bu({},Y,F,this.$__schemaType,X),Z=W.$__pathRelativeToParent!=null?W.$__pathRelativeToParent:W.$__path;if($ instanceof global.Map)for(let D of $.keys()){let G=$.get(D);if(G==null)G=W.$__schemaType._castNullish(G);else G=W.$__schemaType.cast(G,F,!0,null,{...X,path:Z+"."+D});W.$init(D,G)}else for(let D of Object.keys($)){let G=$[D];if(G==null)G=W.$__schemaType._castNullish(G);else G=W.$__schemaType.cast(G,F,!0,null,{...X,path:Z+"."+D});W.$init(D,G)}return W}return new Bu($,Y,F,this.$__schemaType,X)}clone(){let $=super.clone();if(this.$__schemaType!=null)$.$__schemaType=this.$__schemaType.clone();return $}getEmbeddedSchemaType(){return this.$__schemaType}toJSONSchema($){let F=$?.useBsonType,A=this.getEmbeddedSchemaType(),J=this.options.required&&typeof this.options.required!=="function",X=Yz0("object","object",F,J);return X.additionalProperties=A.toJSONSchema($),X}autoEncryptionType(){return"object"}}pz.schemaName="Map";pz.prototype.OptionsConstructor=Xz0;pz.defaultOptions={};/*!
 * ignore
 */pz.prototype._createNestedSchemaType=function(F,A,J,X){let Y=A+".$*",W={type:{}};if(lz.hasUserDefinedProperty(J,"of")){if(lz.isPOJO(J.of)&&lz.hasOwnKeys(J.of)&&!lz.hasUserDefinedProperty(J.of,F.options.typeKey))W={[F.options.typeKey]:new Zz0(J.of)};else if(lz.isPOJO(J.of))W=Object.assign({},J.of);else W={[F.options.typeKey]:J.of};if(W[F.options.typeKey]&&W[F.options.typeKey].instanceOfSchema)W[F.options.typeKey].eachPath((G,z)=>{if(z.options.select===!0||z.options.select===!1)throw new Wz0('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'+A+"."+G+'"')});if(lz.hasUserDefinedProperty(J,"ref"))W.ref=J.ref}this.$__schemaType=F.interpretAsType(Y,W,X)};LB1.exports=pz});var CB1=O((a16,NB1)=>{var Dz0=_3();class oM extends Dz0{}var VB1=j7();Object.defineProperty(oM.prototype,"auto",VB1);Object.defineProperty(oM.prototype,"populate",VB1);/*!
 * ignore
 */NB1.exports=oM});var RB1=O((t16,PB1)=>{var MB1=t9(),wu=sX();PB1.exports=function(F){if(F==null)return F;if(MB1(F,"ObjectId"))return F;if(F._id){if(MB1(F._id,"ObjectId"))return F._id;if(F._id.toString instanceof Function)return new wu(F._id.toString())}if(F.toString instanceof Function)return new wu(F.toString());return new wu(F)}});var OB1=O((s16,jB1)=>{/*!
 * Module dependencies.
 */var Gz0=CB1(),HJ=L4(),zz0=RB1(),Hz0=M8(),Uz0=F3(),Lu=sX(),Eu=t9(),IB1=Z0(),Qz0=HJ.CastError,qu;function D4($,F,A,J){let X=typeof $==="string"&&$.length===24&&/^[a-f0-9]+$/i.test($),Y=F?.suppressWarning;if((X||typeof $>"u")&&!Y)IB1.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.Types.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema.");HJ.call(this,$,F,"ObjectId",J)}D4.schemaName="ObjectId";D4.defaultOptions={};/*!
 * Inherits from SchemaType.
 */D4.prototype=Object.create(HJ.prototype);D4.prototype.constructor=D4;D4.prototype.OptionsConstructor=Gz0;D4.get=HJ.get;D4.set=HJ.set;D4.setters=[];D4.prototype.auto=function($){if($)this.default(TB1),this.set(Bz0);return this};/*!
 * ignore
 */D4._checkRequired=($)=>Eu($,"ObjectId");/*!
 * ignore
 */D4._cast=zz0;D4.cast=function(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */D4._defaultCaster=($)=>{if(!Eu($,"ObjectId"))throw Error($+" is not an instance of ObjectId");return $};D4.checkRequired=HJ.checkRequired;D4.prototype.checkRequired=function(F,A){if(HJ._isRef(this,F,A,!0))return!!F;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():D4.checkRequired())(F)};D4.prototype.cast=function($,F,A,J,X){if(!Eu($,"ObjectId")&&HJ._isRef(this,$,F,A)){if((Uz0($)||"").toLowerCase()==="objectid")return new Lu($.toHexString());if($==null||IB1.isNonBuiltinObject($))return this._castRef($,F,A,X)}let Y;if(typeof this._castFunction==="function")Y=this._castFunction;else if(typeof this.constructor.cast==="function")Y=this.constructor.cast();else Y=D4.cast();try{return Y($)}catch(W){throw new Qz0("ObjectId",$,this.path,W,this)}};/*!
 * ignore
 */function eM($){return this.cast($)}var Kz0={...HJ.prototype.$conditionalHandlers,$gt:eM,$gte:eM,$lt:eM,$lte:eM};Object.defineProperty(D4.prototype,"$conditionalHandlers",{enumerable:!1,value:Kz0});/*!
 * ignore
 */function TB1(){return new Lu}TB1.$runBeforeSetters=!0;function Bz0($){if(qu||(qu=pF()),this instanceof qu){if($===void 0)return new Lu}return $}D4.prototype.toJSONSchema=function(F){let A=this.options.required&&typeof this.options.required!=="function"||this.path==="_id";return Hz0("string","objectId",F?.useBsonType,A)};D4.prototype.autoEncryptionType=function(){return"objectId"};/*!
 * Module exports.
 */jB1.exports=D4});var _B1=O((o16,SB1)=>{var wz0=_3();class T5 extends wz0{}var rF=j7();Object.defineProperty(T5.prototype,"enum",rF);Object.defineProperty(T5.prototype,"match",rF);Object.defineProperty(T5.prototype,"lowercase",rF);Object.defineProperty(T5.prototype,"trim",rF);Object.defineProperty(T5.prototype,"uppercase",rF);Object.defineProperty(T5.prototype,"minLength",rF);Object.defineProperty(T5.prototype,"minlength",rF);Object.defineProperty(T5.prototype,"maxLength",rF);Object.defineProperty(T5.prototype,"maxlength",rF);Object.defineProperty(T5.prototype,"populate",rF);/*!
 * ignore
 */SB1.exports=T5});var Vu=O((e16,gB1)=>{/*!
 * Module dependencies.
 */var UJ=L4(),Zw=T7(),qz0=_B1(),Lz0=jM(),Ez0=M8(),kB1=Z0(),Vz0=t9(),xB1=UJ.CastError;function H6($,F,A,J){this.enumValues=[],this.regExp=null,UJ.call(this,$,F,"String",J)}H6.schemaName="String";H6.defaultOptions={};/*!
 * Inherits from SchemaType.
 */H6.prototype=Object.create(UJ.prototype);H6.prototype.constructor=H6;Object.defineProperty(H6.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:qz0});/*!
 * ignore
 */H6._cast=Lz0;H6.cast=function(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */H6._defaultCaster=($)=>{if($!=null&&typeof $!=="string")throw Error();return $};H6.get=UJ.get;H6.set=UJ.set;H6.setters=[];/*!
 * ignore
 */H6._checkRequired=($)=>($ instanceof String||typeof $==="string")&&$.length;H6.checkRequired=UJ.checkRequired;H6.prototype.enum=function(){if(this.enumValidator)this.validators=this.validators.filter(function(J){return J.validator!==this.enumValidator},this),this.enumValidator=!1;if(arguments[0]===void 0||arguments[0]===!1)return this;let $,F;if(kB1.isObject(arguments[0]))if(Array.isArray(arguments[0].values))$=arguments[0].values,F=arguments[0].message;else $=kB1.object.vals(arguments[0]),F=Zw.messages.String.enum;else $=arguments,F=Zw.messages.String.enum;for(let J of $)if(J!==void 0)this.enumValues.push(this.cast(J));let A=this.enumValues;return this.enumValidator=function(J){return J==null||~A.indexOf(J)},this.validators.push({validator:this.enumValidator,message:F,type:"enum",enumValues:A}),this};H6.prototype.lowercase=function($){if(arguments.length>0&&!$)return this;return this.set((F)=>{if(typeof F!=="string")F=this.cast(F);if(F)return F.toLowerCase();return F})};H6.prototype.uppercase=function($){if(arguments.length>0&&!$)return this;return this.set((F)=>{if(typeof F!=="string")F=this.cast(F);if(F)return F.toUpperCase();return F})};H6.prototype.trim=function($){if(arguments.length>0&&!$)return this;return this.set((F)=>{if(typeof F!=="string")F=this.cast(F);if(F)return F.trim();return F})};H6.prototype.minlength=function($,F){if(this.minlengthValidator)this.validators=this.validators.filter(function(A){return A.validator!==this.minlengthValidator},this);if($!=null){let A=F||Zw.messages.String.minlength;A=A.replace(/{MINLENGTH}/,$),this.validators.push({validator:this.minlengthValidator=function(J){return J===null||J.length>=$},message:A,type:"minlength",minlength:$})}return this};H6.prototype.minLength=H6.prototype.minlength;H6.prototype.maxlength=function($,F){if(this.maxlengthValidator)this.validators=this.validators.filter(function(A){return A.validator!==this.maxlengthValidator},this);if($!=null){let A=F||Zw.messages.String.maxlength;A=A.replace(/{MAXLENGTH}/,$),this.validators.push({validator:this.maxlengthValidator=function(J){return J===null||J.length<=$},message:A,type:"maxlength",maxlength:$})}return this};H6.prototype.maxLength=H6.prototype.maxlength;H6.prototype.match=function(F,A){let J=A||Zw.messages.String.match,X=function(Y){if(!F)return!1;return F.lastIndex=0,Y!=null&&Y!==""?F.test(Y):!0};return this.validators.push({validator:X,message:J,type:"regexp",regexp:F}),this};H6.prototype.checkRequired=function(F,A){if(typeof F==="object"&&UJ._isRef(this,F,A,!0))return F!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():H6.checkRequired())(F)};H6.prototype.cast=function($,F,A,J,X){if(typeof $!=="string"&&UJ._isRef(this,$,F,A))return this._castRef($,F,A,X);let Y;if(typeof this._castFunction==="function")Y=this._castFunction;else if(typeof this.constructor.cast==="function")Y=this.constructor.cast();else Y=H6.cast();try{return Y($)}catch{throw new xB1("string",$,this.path,null,this)}};/*!
 * ignore
 */function Ww($,F){return this.castForQuery(null,$,F)}/*!
 * ignore
 */function Nz0($,F){let A=this;if(!Array.isArray($))return[this.castForQuery(null,$,F)];return $.map(function(J){return A.castForQuery(null,J,F)})}/*!
 * ignore
 */function bB1($){if($==null)return this._castNullish($);return this.cast($,this)}var Cz0={...UJ.prototype.$conditionalHandlers,$all:Nz0,$gt:Ww,$gte:Ww,$lt:Ww,$lte:Ww,$options:bB1,$regex:function(F){if(Object.prototype.toString.call(F)==="[object RegExp]")return F;return bB1.call(this,F)},$not:Ww};Object.defineProperty(H6.prototype,"$conditionalHandlers",{enumerable:!1,value:Cz0});H6.prototype.castForQuery=function($,F,A){let J;if($!=null){if(J=this.$conditionalHandlers[$],!J)throw Error("Can't use "+$+" with String.");return J.call(this,F,A)}if(Object.prototype.toString.call(F)==="[object RegExp]"||Vz0(F,"BSONRegExp"))return F;try{return this.applySetters(F,A)}catch(X){if(X instanceof xB1&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};H6.prototype.toJSONSchema=function(F){let A=this.options.required&&typeof this.options.required!=="function";return Ez0("string","string",F?.useBsonType,A)};H6.prototype.autoEncryptionType=function(){return"string"};/*!
 * Module exports.
 */gB1.exports=H6});var fB1=O(($06,Mu)=>{var Nu=w0().UUID,Cu=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i;Mu.exports=function(F){if(F==null)return F;if(F instanceof Nu)return F;if(typeof F==="string")if(Cu.test(F))return new Nu(F);else throw Error(`"${F}" is not a valid UUID string`);if(F.toString&&F.toString!==Object.prototype.toString){if(Cu.test(F.toString()))return new Nu(F.toString())}throw Error(`"${F}" cannot be casted to a UUID`)};Mu.exports.UUID_FORMAT=Cu});var hB1=O((F06,uB1)=>{/*!
 * Module dependencies.
 */var XY=L4(),vB1=XY.CastError,yB1=fB1(),Mz0=M8(),Pz0=Z0(),$P=oB(),Rz0=yB1.UUID_FORMAT;function Iz0($){let F;if(typeof $!=="string"&&$!=null)return F=$.toString("hex"),F.substring(0,8)+"-"+F.substring(8,12)+"-"+F.substring(12,16)+"-"+F.substring(16,20)+"-"+F.substring(20,32);return $}function g4($,F,A,J){XY.call(this,$,F,"UUID",J)}g4.schemaName="UUID";g4.defaultOptions={};/*!
 * Inherits from SchemaType.
 */g4.prototype=Object.create(XY.prototype);g4.prototype.constructor=g4;/*!
 * ignore
 */g4._cast=yB1;g4.get=XY.get;g4.set=XY.set;g4.setters=[];g4.cast=function(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */g4._checkRequired=($)=>$!=null;g4.checkRequired=XY.checkRequired;g4.prototype.checkRequired=function(F){if(Buffer.isBuffer(F))F=Iz0(F);return F!=null&&Rz0.test(F)};g4.prototype.cast=function($,F,A,J,X){if(Pz0.isNonBuiltinObject($)&&XY._isRef(this,$,F,A))return this._castRef($,F,A,X);let Y;if(typeof this._castFunction==="function")Y=this._castFunction;else if(typeof this.constructor.cast==="function")Y=this.constructor.cast();else Y=g4.cast();try{return Y($)}catch(W){throw new vB1(g4.schemaName,$,this.path,W,this)}};/*!
 * ignore
 */function Tz0($){return this.cast($)}/*!
 * ignore
 */function Pu($){return $.map((F)=>{return this.cast(F)})}var jz0={...XY.prototype.$conditionalHandlers,$bitsAllClear:$P,$bitsAnyClear:$P,$bitsAllSet:$P,$bitsAnySet:$P,$all:Pu,$in:Pu,$ne:Tz0,$nin:Pu};Object.defineProperty(g4.prototype,"$conditionalHandlers",{enumerable:!1,value:jz0});g4.prototype.castForQuery=function($,F,A){let J;if($!=null){if(J=this.$conditionalHandlers[$],!J)throw Error("Can't use "+$+" with UUID.");return J.call(this,F,A)}try{return this.applySetters(F,A)}catch(X){if(X instanceof vB1&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};g4.prototype.toJSONSchema=function(F){let A=this.options.required&&typeof this.options.required!=="function";return Mz0("string","binData",F?.useBsonType,A)};g4.prototype.autoEncryptionType=function(){return"binData"};/*!
 * Module exports.
 */uB1.exports=g4});var dB1=O((A06,mB1)=>{var Oz0=_3();class Ru extends Oz0{}var Sz0=j7();Object.defineProperty(Ru.prototype,"of",Sz0);mB1.exports=Ru});var lB1=O((J06,cB1)=>{/*!
 * ignore
 */var _z0=dB1(),kz0=L4(),iz=Symbol("firstValue");/*!
 * ignore
 */class Dw extends kz0{constructor($,F,A,J){super($,F,"Union",J);if(!Array.isArray(F?.of)||F.of.length===0)throw Error("Union schema type requires an array of types");this.schemaTypes=F.of.map((X)=>J.interpretAsType($,X,A))}cast($,F,A,J,X){let Y=iz,W;for(let Z=0;Z<this.schemaTypes.length;++Z)try{let D=this.schemaTypes[Z].cast($,F,A,J,X);if(D===$)return D;if(Y===iz)Y=D}catch(D){W=D}if(Y!==iz)return Y;throw W}applySetters($,F,A,J,X){let Y=iz,W;for(let Z=0;Z<this.schemaTypes.length;++Z)try{let D=this.schemaTypes[Z]._applySetters($,F,A,J,X);if(D==null)D=this.schemaTypes[Z]._castNullish(D);else D=this.schemaTypes[Z].cast(D,F,A,J,X);if(D===$)return D;if(Y===iz)Y=D}catch(D){W=D}if(Y!==iz)return Y;throw W}clone(){let $=super.clone();return $.schemaTypes=this.schemaTypes.map((F)=>F.clone()),$}}Dw.schemaName="Union";Dw.defaultOptions={};Dw.prototype.OptionsConstructor=_z0;cB1.exports=Dw});var sB=O((bz0)=>{/*!
 * Module exports.
 */bz0.Array=bM();bz0.BigInt=tQ1();bz0.Boolean=eQ1();bz0.Buffer=XK1();bz0.Date=UK1();bz0.Decimal128=bz0.Decimal=wK1();bz0.DocumentArray=XB1();bz0.DocumentArrayElement=Gu();bz0.Double=GB1();bz0.Int32=KB1();bz0.Map=EB1();bz0.Mixed=Rz();bz0.Number=xy();bz0.ObjectId=OB1();bz0.String=Vu();bz0.Subdocument=Du();bz0.UUID=hB1();bz0.Union=lB1();bz0.Oid=bz0.ObjectId;bz0.Object=bz0.Mixed;bz0.Bool=bz0.Boolean;bz0.ObjectID=bz0.ObjectId});var VZ=O((Su,Xw1)=>{/*!
 * Module dependencies.
 */var ez0=Z1("events").EventEmitter,$H0=QZ(),YY=v0(),nB1=L4(),rB1=_3(),FH0=Qy(),Ou=CM(),aB1=By(),e9=W4(),tB1=E4(),AH0=F3(),JH0=vU1(),JP=Ly(),XH0=hU1(),sB1=dU1(),YH0=lC(),FP=O7(),WH0=lU1(),ZH0=$Q1(),DH0=wZ(),I2=Z0(),GH0=AQ1(),zH0=/\.\d+(\.|$)/,WY,HH0=iB().queryMiddlewareFunctions,UH0=iB().documentMiddlewareFunctions,oB1=HH0.concat(UH0).reduce(($,F)=>$.add(F),new Set),Tu=I2.isPOJO,eB1=0,QH0=/^\d+$/;function b1($,F){if(!(this instanceof b1))return new b1($,F);if(this.obj=$,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this._searchIndexes=[],this.methods=F?.methods||{},this.methodOptions={},this.statics=F?.statics||{},this.tree={},this.query=F?.query||{},this.childSchemas=[],this.plugins=[],this.$id=++eB1,this.mapPaths=[],this.encryptedFields={},this.s={hooks:new $H0},this.options=this.defaultOptions(F),Array.isArray($))for(let X of $)this.add(X);else if($)this.add($);if(F?.virtuals){let X=F.virtuals,Y=Object.keys(X);for(let W of Y){let Z=X[W].options?X[W].options:void 0,D=this.virtual(W,Z);if(X[W].get)D.get(X[W].get);if(X[W].set)D.set(X[W].set)}}let A=$?._id&&I2.isObject($._id);if(!this.paths._id&&this.options._id&&!A)aB1(this);this.setupTimestamp(this.options.timestamps)}function $w1($,F){for(let A of Object.keys(F)){let J=null;if(F[A]!=null)J=F[A];else{let Y=tB1($.paths[A],"options");if(Y==null)continue;J=Y.alias}if(!J)continue;let X=$.paths[A].path;if(Array.isArray(J)){for(let Y of J){if(typeof Y!=="string")throw Error("Invalid value for alias option on "+X+", got "+Y);$.aliases[Y]=X,$.virtual(Y).get(function(W){return function(){if(typeof this.get==="function")return this.get(W);return this[W]}}(X)).set(function(W){return function(Z){return this.$set(W,Z)}}(X))}continue}if(typeof J!=="string")throw Error("Invalid value for alias option on "+X+", got "+J);$.aliases[J]=X,$.virtual(J).get(function(Y){return function(){if(typeof this.get==="function")return this.get(Y);return this[Y]}}(X)).set(function(Y){return function(W){return this.$set(Y,W)}}(X))}}/*!
 * Inherit from EventEmitter.
 */b1.prototype=Object.create(ez0.prototype);b1.prototype.constructor=b1;b1.prototype.instanceOfSchema=!0;/*!
 * ignore
 */Object.defineProperty(b1.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0});Object.defineProperty(b1.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(b1.prototype,"virtuals",{configurable:!1,enumerable:!0,writable:!0});b1.prototype.obj;b1.prototype.paths;b1.prototype.tree;b1.create=function(F,A){return new b1(F,A)};b1.prototype.clone=function(){let $=this._clone();return $.on("init",(F)=>this.emit("init",F)),$};/*!
 * ignore
 */b1.prototype._clone=function(F){F=F||(this.base==null?b1:this.base.Schema);let A=new F({},this._userProvidedOptions);A.base=this.base,A.obj=this.obj,A.options=e9(this.options),A.callQueue=this.callQueue.map(function(J){return J}),A.methods=e9(this.methods),A.methodOptions=e9(this.methodOptions),A.statics=e9(this.statics),A.query=e9(this.query),A.plugins=Array.prototype.slice.call(this.plugins),A._indexes=e9(this._indexes),A._searchIndexes=e9(this._searchIndexes),A.s.hooks=this.s.hooks.clone(),A.tree=e9(this.tree),A.paths=Object.fromEntries(Object.entries(this.paths).map(([J,X])=>[J,X.clone()])),A.nested=e9(this.nested),A.subpaths=e9(this.subpaths);for(let J of Object.values(A.paths))if(J.$isSingleNested){let X=J.path;for(let Y of Object.keys(J.schema.paths))A.singleNestedPaths[X+"."+Y]=J.schema.paths[Y];for(let Y of Object.keys(J.schema.singleNestedPaths))A.singleNestedPaths[X+"."+Y]=J.schema.singleNestedPaths[Y];for(let Y of Object.keys(J.schema.subpaths))A.singleNestedPaths[X+"."+Y]=J.schema.subpaths[Y];for(let Y of Object.keys(J.schema.nested))A.singleNestedPaths[X+"."+Y]="nested"}if(A._gatherChildSchemas(),A.virtuals=e9(this.virtuals),A.$globalPluginsApplied=this.$globalPluginsApplied,A.$isRootDiscriminator=this.$isRootDiscriminator,A.$implicitlyCreated=this.$implicitlyCreated,A.$id=++eB1,A.$originalSchemaId=this.$id,A.mapPaths=[].concat(this.mapPaths),this.discriminatorMapping!=null)A.discriminatorMapping=Object.assign({},this.discriminatorMapping);if(this.discriminators!=null)A.discriminators=Object.assign({},this.discriminators);if(this._applyDiscriminators!=null)A._applyDiscriminators=new Map(this._applyDiscriminators);return A.aliases=Object.assign({},this.aliases),A.encryptedFields=e9(this.encryptedFields),A};b1.prototype.pick=function($,F){let A=new b1({},F||this.options);if(!Array.isArray($))throw new YY('Schema#pick() only accepts an array argument, got "'+typeof $+'"');for(let J of $)if(this._hasEncryptedField(J)){let X=this.encryptedFields[J],Y=this.path(J);A.add({[J]:{encrypt:X,[this.options.typeKey]:Y}})}else if(this.nested[J])A.add({[J]:tB1(this.tree,J)});else{let X=this.path(J);if(X==null)throw new YY("Path `"+J+"` is not in the schema");A.add({[J]:X})}if(!this._hasEncryptedFields())A.options.encryptionType=null;return A};b1.prototype.omit=function($,F){let A=new b1(this,F||this.options);if(!Array.isArray($))throw new YY('Schema#omit() only accepts an array argument, got "'+typeof $+'"');A.remove($);for(let J in A.singleNestedPaths)if($.includes(J))delete A.singleNestedPaths[J];return A};b1.prototype.defaultOptions=function($){this._userProvidedOptions=$==null?{}:e9($);let F=this.base?.options||{},A="strict"in F?F.strict:!0,J="strictQuery"in F?F.strictQuery:!1,X="id"in F?F.id:!0;if($={strict:A,strictQuery:J,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:"__t",shardKey:null,read:null,validateBeforeSave:!0,validateModifiedOnly:!1,_id:!0,id:X,typeKey:"type",...$},$.versionKey&&typeof $.versionKey!=="string")throw new YY("`versionKey` must be falsy or string, got `"+typeof $.versionKey+"`");if(typeof $.read==="string")$.read=JP($.read);else if(Array.isArray($.read)&&typeof $.read[0]==="string")$.read={mode:JP($.read[0]),tags:$.read[1]};if($.optimisticConcurrency&&!$.versionKey)throw new YY("Must set `versionKey` if using `optimisticConcurrency`");return $};b1.prototype.discriminator=function($,F,A){return this._applyDiscriminators=this._applyDiscriminators||new Map,this._applyDiscriminators.set($,{schema:F,options:A}),this};/*!
 * Get the document middleware for this schema, filtering out any hooks that are specific to queries.
 */b1.prototype._getDocumentMiddleware=function(){return this.s.hooks.filter((F)=>{if(F.name==="updateOne"||F.name==="deleteOne")return!!F.document;if(F.name==="remove"||F.name==="init")return F.document==null||!!F.document;if(F.query!=null||F.document!=null)return F.document!==!1;return!0}).filter((F)=>{if(this.methods[F.name])return!F.fn[DH0.builtInMiddleware];return!0})};/*!
 * Get this schema's default toObject/toJSON options, including Mongoose global
 * options.
 */b1.prototype._defaultToObjectOptions=function($){let F=$?"toJSON":"toObject";if(this._defaultToObjectOptionsMap&&this._defaultToObjectOptionsMap[F])return this._defaultToObjectOptionsMap[F];let A=this.base?.options?.[F]||{},J=this.options[F]||{},X=Object.assign({},A,J);return this._defaultToObjectOptionsMap=this._defaultToObjectOptionsMap||{},this._defaultToObjectOptionsMap[F]=X,X};b1.prototype.encryptionType=function($){if(arguments.length===0)return this.options.encryptionType;if(!(typeof $==="string"||$===null))throw Error("invalid `encryptionType`: ${encryptionType}");this.options.encryptionType=$};b1.prototype.add=function(F,A){if(F instanceof b1||F?.instanceOfSchema)return YH0(this,F),this;if(F._id===!1&&A==null)this.options._id=!1;if(A=A||"",A==="__proto__."||A==="constructor."||A==="prototype.")return this;let J=Object.keys(F),X=this.options.typeKey;for(let W of J){if(I2.specialProperties.has(W))continue;let Z=A+W,D=F[W];if(D==null)throw TypeError("Invalid value for schema path `"+Z+'`, got value "'+D+'"');if(W==="_id"&&D===!1)continue;let G=!1;if(typeof D==="string"){let z=this.base?.Schema.Types??b1.Types,H=D.charAt(0).toUpperCase()+D.substring(1);G=z[H]!=null}if(W!=="_id"&&(typeof D!=="object"&&typeof D!=="function"&&!G||D==null))throw TypeError(`Invalid schema configuration: \`${D}\` is not a valid type at path \`${W}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if(D instanceof Ou||(D.constructor?.name??null)==="VirtualType"){this.virtual(D);continue}if(Array.isArray(D)&&D.length===1&&D[0]==null)throw TypeError("Invalid value for schema Array path `"+Z+'`, got value "'+D[0]+'"');if(!(Tu(D)||D instanceof rB1)){if(A)this.nested[A.substring(0,A.length-1)]=!0;if(this.path(A+W,D),!D[0]?.instanceOfSchema&&I2.isPOJO(D[0]?.discriminators)){let z=this.path(A+W);for(let H in D[0].discriminators)z.discriminator(H,D[0].discriminators[H])}}else if(I2.hasOwnKeys(D)===!1){if(A)this.nested[A.substring(0,A.length-1)]=!0;this.path(Z,D)}else if(!D[X]||X==="type"&&Tu(D.type)&&D.type.type)this.nested[Z]=!0,this.add(D,Z+".");else{let z=D[X];if(Tu(z)&&I2.hasOwnKeys(z)){if(A)this.nested[A.substring(0,A.length-1)]=!0;let H={};if(this._userProvidedOptions.typeKey)H.typeKey=this._userProvidedOptions.typeKey;if(this._userProvidedOptions.strict!=null)H.strict=this._userProvidedOptions.strict;if(this._userProvidedOptions.toObject!=null)H.toObject=I2.omit(this._userProvidedOptions.toObject,["transform"]);if(this._userProvidedOptions.toJSON!=null)H.toJSON=I2.omit(this._userProvidedOptions.toJSON,["transform"]);let U=new b1(z,H);U.$implicitlyCreated=!0;let Q=Object.assign({},D,{[X]:U});this.path(A+W,Q)}else{if(A)this.nested[A.substring(0,A.length-1)]=!0;if(this.path(A+W,D),!D?.instanceOfSchema&&I2.isPOJO(D?.discriminators)){let H=this.path(A+W);for(let U in D.discriminators)H.discriminator(U,D.discriminators[U])}}}if(D.instanceOfSchema&&D.encryptionType()!=null){if(this.encryptionType()!=D.encryptionType())throw Error("encryptionType of a nested schema must match the encryption type of the parent schema.");for(let[z,H]of Object.entries(D.encryptedFields)){let U=Z+"."+z;this._addEncryptedField(U,H)}}else if(typeof D==="object"&&"encrypt"in D){let{encrypt:z}=D;if(this.encryptionType()==null)throw Error("encryptionType must be provided");this._addEncryptedField(Z,z)}else this._removeEncryptedField(Z)}let Y=Object.fromEntries(Object.entries(F).map(([W])=>[A+W,null]));return $w1(this,Y),this};b1.prototype._addEncryptedField=function(F,A){if(this.path(F).autoEncryptionType()==null)throw Error(`Invalid BSON type for FLE field: '${F}'`);this.encryptedFields[F]=e9(A)};b1.prototype._removeEncryptedField=function(F){delete this.encryptedFields[F]};b1.prototype._hasEncryptedFields=function(){return I2.hasOwnKeys(this.encryptedFields)};b1.prototype._hasEncryptedField=function(F){return F in this.encryptedFields};b1.prototype._buildEncryptedFields=function(){return{fields:Object.entries(this.encryptedFields).map(([F,A])=>{let J=this.path(F).autoEncryptionType();return{path:F,bsonType:J,...A}})}};b1.prototype._buildSchemaMap=function(){function $(J,X,Y){let W=0,Z=J[W];for(;W<J.length-1;++W,Z=J[W])X[Z]=X[Z]==null?{bsonType:"object",properties:{}}:X[Z],X=X[Z].properties;X[Z]=Y}let F=(J,[X,Y])=>{let W=this.path(X).autoEncryptionType(),Z=X.split("."),D={encrypt:{...Y,bsonType:W}};return $(Z,J,D),J};return{bsonType:"object",properties:Object.entries(this.encryptedFields).reduce(F,{})}};b1.prototype.alias=function($,F){return $w1(this,{[$]:F}),this};b1.prototype.removeIndex=function(F){if(arguments.length>1)throw Error("removeIndex() takes only 1 argument");if(typeof F!=="object"&&typeof F!=="string")throw Error("removeIndex() may only take either an object or a string as an argument");if(typeof F==="object"){for(let A=this._indexes.length-1;A>=0;--A)if(sB1(this._indexes[A][0],F))this._indexes.splice(A,1)}else for(let A=this._indexes.length-1;A>=0;--A)if(this._indexes[A][1]!=null&&this._indexes[A][1].name===F)this._indexes.splice(A,1);return this};b1.prototype.clearIndexes=function(){return this._indexes.length=0,this};b1.prototype.searchIndex=function(F){return this._searchIndexes.push(F),this};b1.reserved=Object.create(null);b1.prototype.reserved=b1.reserved;var o9=b1.reserved;o9.prototype=o9.emit=o9.listeners=o9.removeListener=o9.collection=o9.errors=o9.get=o9.init=o9.isModified=o9.isNew=o9.populated=o9.remove=o9.save=o9.toObject=o9.validate=1;o9.collection=1;b1.prototype.path=function($,F){if(F===void 0){if(this.paths[$]!=null)return this.paths[$];let D=Fw1($),G=KH0(this,$,D);if(G!=null)return G;let z=Aw1(this,$);if(z!=null)return z;if(G=this.hasMixedParent(D),G!=null)return G;return zH0.test($)?BH0(this,$,D):void 0}let A=$.split(".")[0];if(o9[A]&&!this.options.suppressReservedKeysWarning){let D=`\`${A}\` is a reserved schema pathname and may break some functionality. You are allowed to use it, but use at your own risk. To disable this warning pass \`suppressReservedKeysWarning\` as a schema option.`;I2.warn(D)}if(typeof F==="object"&&I2.hasUserDefinedProperty(F,"ref"))GH0(F.ref,$);let J=$.split(/\./),X=J.pop(),Y=this.tree,W="";for(let D of J){if(I2.specialProperties.has(D))throw Error("Cannot set special property `"+D+"` on a schema");if(W=W+=(W.length>0?".":"")+D,!Y[D])this.nested[W]=!0,Y[D]={};if(typeof Y[D]!=="object"){let G="Cannot set nested path `"+$+"`. Parent path `"+W+"` already set to type "+Y[D].name+".";throw Error(G)}Y=Y[D]}Y[X]=e9(F),this.paths[$]=this.interpretAsType($,F,this.options);let Z=this.paths[$];if(this.childSchemas=this.childSchemas.filter((D)=>D.path!==$),Z.$isSchemaMap){let D=$+".$*";if(this.paths[D]=Z.$__schemaType,this.mapPaths.push(this.paths[D]),Z.$__schemaType.$isSingleNested)this.childSchemas.push({schema:Z.$__schemaType.schema,model:Z.$__schemaType.Constructor,path:$})}if(Z.$isSingleNested){for(let D of Object.keys(Z.schema.paths))this.singleNestedPaths[$+"."+D]=Z.schema.paths[D];for(let D of Object.keys(Z.schema.singleNestedPaths))this.singleNestedPaths[$+"."+D]=Z.schema.singleNestedPaths[D];for(let D of Object.keys(Z.schema.subpaths))this.singleNestedPaths[$+"."+D]=Z.schema.subpaths[D];for(let D of Object.keys(Z.schema.nested))this.singleNestedPaths[$+"."+D]="nested";Object.defineProperty(Z.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),Z.Constructor.base=this.base,this.childSchemas.push({schema:Z.schema,model:Z.Constructor,path:$})}else if(Z.$isMongooseDocumentArray)Object.defineProperty(Z.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),Z.Constructor.base=this.base,this.childSchemas.push({schema:Z.schema,model:Z.Constructor,path:$});if(Z.$isMongooseArray&&!Z.$isMongooseDocumentArray){let D=$,G=Z,z=[];while(G.$isMongooseArray)D=D+".$",G.embeddedSchemaType._arrayPath=D,G.embeddedSchemaType._arrayParentPath=$,G=G.embeddedSchemaType,this.subpaths[D]=G;for(let H of z)this.subpaths[H.path]=H}if(Z.$isMongooseDocumentArray){for(let D of Object.keys(Z.schema.paths)){let G=Z.schema.paths[D];if(this.subpaths[$+"."+D]=G,typeof G==="object"&&G!=null&&G.$parentSchemaDocArray==null)G.$parentSchemaDocArray=Z}for(let D of Object.keys(Z.schema.subpaths)){let G=Z.schema.subpaths[D];if(this.subpaths[$+"."+D]=G,typeof G==="object"&&G!=null&&G.$parentSchemaDocArray==null)G.$parentSchemaDocArray=Z}for(let D of Object.keys(Z.schema.singleNestedPaths)){let G=Z.schema.singleNestedPaths[D];if(this.subpaths[$+"."+D]=G,typeof G==="object"&&G!=null&&G.$parentSchemaDocArray==null)G.$parentSchemaDocArray=Z}}return this};/*!
 * ignore
 */b1.prototype._gatherChildSchemas=function(){let F=[];for(let A of Object.keys(this.paths)){if(typeof A!=="string")continue;let J=this.paths[A];if(J.$isMongooseDocumentArray||J.$isSingleNested)F.push({schema:J.schema,model:J.Constructor,path:A});else if(J.$isSchemaMap&&J.$__schemaType.$isSingleNested)F.push({schema:J.$__schemaType.schema,model:J.$__schemaType.Constructor,path:A})}return this.childSchemas=F,F};/*!
 * ignore
 */function KH0($,F,A){if(Object.hasOwn($.paths,F))return $.paths[F];if(Object.hasOwn($.subpaths,A)){let J=$.subpaths[A];if(J==="nested")return;return J}if(Object.hasOwn($.singleNestedPaths,A)&&typeof $.singleNestedPaths[A]==="object"){let J=$.singleNestedPaths[A];if(J==="nested")return;return J}return null}/*!
 * ignore
 */function Fw1($){if(!/\.\d+/.test($))return $;return $.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$")}/*!
 * ignore
 */function Aw1($,F){if($.mapPaths.length===0)return null;for(let A of $.mapPaths){let J=A.path.replace(/\.\$\*/g,"");if(F===J||F.startsWith(J+".")&&F.slice(J.length+1).indexOf(".")===-1)return A;else if(A.schema&&F.startsWith(J+".")){let X=F.slice(J.length+1);return X=X.slice(X.indexOf(".")+1),A.schema.paths[X]}else if(A.$isSchemaMap&&F.startsWith(J+".")){let X=F.slice(J.length+1);X=X.slice(X.indexOf(".")+1);let Y=A.$__schemaType._presplitPath;if(X.indexOf(".")===-1&&Y[Y.length-1]==="$*")return A.$__schemaType;else if(X.indexOf(".")!==-1&&A.$__schemaType.schema&&Y[Y.length-1]==="$*")return A.$__schemaType.schema.path(X.slice(X.indexOf(".")+1))}}return null}Object.defineProperty(b1.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null});b1.prototype.interpretAsType=function($,F,A){if(F instanceof nB1){if(F.path===$)return F;let D=F.clone();return D.path=$,D}let J=this.base?.Schema.Types??b1.Types,X=this.base?.Types??xz();if(!I2.isPOJO(F)&&!(F instanceof rB1)){if(I2.getFunctionName(F.constructor)!=="Object"){let G=F;F={},F[A.typeKey]=G}}let Y=F[A.typeKey]&&(F[A.typeKey]instanceof Function||A.typeKey!=="type"||!F.type.type)?F[A.typeKey]:{};if(Y instanceof nB1){if(Y.path===$)return Y;let D=Y.clone();return D.path=$,D}let W;if(I2.isPOJO(Y)||Y==="mixed")return new J.Mixed($,F,null,this);if(Array.isArray(Y)||Y===Array||Y==="array"||Y===J.Array){let D=Y===Array||Y==="array"?F.cast||F.of:Y[0];if(D?.instanceOfSchema){if(!(D instanceof b1))if(this.options._isMerging)D=new b1(D);else throw TypeError("Schema for array path `"+$+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${$}: new Schema(...)`);return new J.DocumentArray($,D,F,null,this)}if(D&&D[A.typeKey]&&D[A.typeKey].instanceOfSchema){if(!(D[A.typeKey]instanceof b1))if(this.options._isMerging)D[A.typeKey]=new b1(D[A.typeKey]);else throw TypeError("Schema for array path `"+$+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${$}: new Schema(...)`);return new J.DocumentArray($,D[A.typeKey],F,D,this)}if(typeof D<"u"){if(Array.isArray(D)||D.type===Array||D.type=="Array"){if(D?.type=="Array")D.type=Array;return new J.Array($,this.interpretAsType($,D,A),F,null,this)}}let G=D!=null&&D[A.typeKey]&&(A.typeKey!=="type"||!D.type.type)?D[A.typeKey]:D;if(typeof D==="string")D=J[D.charAt(0).toUpperCase()+D.substring(1)];else if(I2.isPOJO(G))if(I2.hasOwnKeys(G)){let z={minimize:A.minimize};if(A.typeKey)z.typeKey=A.typeKey;if(Object.hasOwn(A,"strict"))z.strict=A.strict;if(Object.hasOwn(A,"strictQuery"))z.strictQuery=A.strictQuery;if(Object.hasOwn(A,"toObject"))z.toObject=I2.omit(A.toObject,["transform"]);if(Object.hasOwn(A,"toJSON"))z.toJSON=I2.omit(A.toJSON,["transform"]);if(Object.hasOwn(this._userProvidedOptions,"_id"))z._id=this._userProvidedOptions._id;else if(b1.Types.DocumentArray.defaultOptions._id!=null)z._id=b1.Types.DocumentArray.defaultOptions._id;let H=new b1(G,z);return H.$implicitlyCreated=!0,new J.DocumentArray($,H,F,null,this)}else return new J.Array($,J.Mixed,F,null,this);if(D){if(Y=D[A.typeKey]&&(A.typeKey!=="type"||!D.type.type)?D[A.typeKey]:D,Array.isArray(Y))return new J.Array($,this.interpretAsType($,Y,A),F,null,this);if(W=typeof Y==="string"?Y:Y.schemaName||I2.getFunctionName(Y),W==="ClockDate")W="Date";if(W===void 0)throw TypeError(`Invalid schema configuration: Could not determine the embedded type for array \`${$}\`. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(!Object.hasOwn(J,W))throw TypeError(`Invalid schema configuration: \`${W}\` is not a valid type within the array \`${$}\`.See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if(W==="Union"&&typeof D==="object")D.parentSchema=this}return new J.Array($,D||J.Mixed,F,A,this)}if(Y?.instanceOfSchema)return new J.Subdocument(Y,$,F,this);if(Buffer.isBuffer(Y))W="Buffer";else if(typeof Y==="function"||typeof Y==="object")W=Y.schemaName||I2.getFunctionName(Y);else if(Y===X.ObjectId)W="ObjectId";else if(Y===X.Decimal128)W="Decimal128";else W=Y==null?""+Y:Y.toString();if(W)W=W.charAt(0).toUpperCase()+W.substring(1);if(W==="ObjectID")W="ObjectId";if(W==="ClockDate")W="Date";if(W===void 0)throw TypeError(`Invalid schema configuration: \`${$}\` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(J[W]==null)throw TypeError(`Invalid schema configuration: \`${W}\` is not a valid type at path \`${$}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);return new J[W]($,F,A,this)};b1.prototype.eachPath=function($){let F=Object.keys(this.paths),A=F.length;for(let J=0;J<A;++J)$(F[J],this.paths[F[J]]);return this};b1.prototype.requiredPaths=function(F){if(this._requiredpaths&&!F)return this._requiredpaths;let A=Object.keys(this.paths),J=A.length,X=[];while(J--){let Y=A[J];if(this.paths[Y].isRequired)X.push(Y)}return this._requiredpaths=X,this._requiredpaths};b1.prototype.indexedPaths=function(){if(this._indexedpaths)return this._indexedpaths;return this._indexedpaths=this.indexes(),this._indexedpaths};b1.prototype.pathType=function($){if(Object.hasOwn(this.paths,$))return"real";if(Object.hasOwn(this.virtuals,$))return"virtual";if(Object.hasOwn(this.nested,$))return"nested";let F=Fw1($);if(Object.hasOwn(this.subpaths,F)||Object.hasOwn(this.subpaths,$))return"real";let A=Object.hasOwn(this.singleNestedPaths,F)||Object.hasOwn(this.singleNestedPaths,$);if(A)return A==="nested"?"nested":"real";if(Aw1(this,$)!=null)return"real";if(/\.\d+\.|\.\d+$/.test($))return Jw1(this,$,F);return"adhocOrUndefined"};b1.prototype.hasMixedParent=function($){let F=$.split(/\./g);$="";for(let A=0;A<F.length;++A)if($=A>0?$+"."+F[A]:F[A],Object.hasOwn(this.paths,$)&&this.paths[$]instanceof WY.Mixed)return this.paths[$];return null};b1.prototype.setupTimestamp=function($){return ZH0(this,$)};function Jw1($,F,A){let J=F.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if(J.length<2)return Object.hasOwn($.paths,J[0])?$.paths[J[0]]:"adhocOrUndefined";let X=$.path(J[0]),Y=!1;if(!X)return"adhocOrUndefined";let W=J.length-1;for(let Z=1;Z<J.length;++Z){Y=!1;let D=J[Z];if(Z===W&&X&&!/\D/.test(D)){if(X.$isMongooseDocumentArray)X=X.embeddedSchemaType;else if(X instanceof WY.Array)X=X.embeddedSchemaType;else X=void 0;break}if(!/\D/.test(D)){if(X instanceof WY.Array&&Z!==W)X=X.embeddedSchemaType;continue}if(!X?.schema){X=void 0;break}Y=X.schema.pathType(D)==="nested",X=X.schema.path(D)}if($.subpaths[A]=X,X)return"real";if(Y)return"nested";return"adhocOrUndefined"}/*!
 * ignore
 */function BH0($,F,A){return Jw1($,F,A),$.subpaths[A]}b1.prototype.queue=function($,F){return this.callQueue.push([$,F]),this};b1.prototype.pre=function($){if($ instanceof RegExp){let F=Array.prototype.slice.call(arguments,1);for(let A of oB1)if($.test(A))this.pre.apply(this,[A].concat(F));return this}if(Array.isArray($)){let F=Array.prototype.slice.call(arguments,1);for(let A of $)this.pre.apply(this,[A].concat(F));return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this};b1.prototype.post=function($){if($ instanceof RegExp){let F=Array.prototype.slice.call(arguments,1);for(let A of oB1)if($.test(A))this.post.apply(this,[A].concat(F));return this}if(Array.isArray($)){let F=Array.prototype.slice.call(arguments,1);for(let A of $)this.post.apply(this,[A].concat(F));return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this};b1.prototype.plugin=function($,F){if(typeof $!=="function")throw Error('First param to `schema.plugin()` must be a function, got "'+typeof $+'"');if(F?.deduplicate){for(let A of this.plugins)if(A.fn===$)return this}return this.plugins.push({fn:$,opts:F}),$(this,F),this};b1.prototype.method=function($,F,A){if(typeof $!=="string")for(let J in $)this.methods[J]=$[J],this.methodOptions[J]=e9(A);else this.methods[$]=F,this.methodOptions[$]=e9(A);return this};b1.prototype.static=function($,F){if(typeof $!=="string")for(let A in $)this.statics[A]=$[A];else this.statics[$]=F;return this};b1.prototype.index=function($,F){if($||($={}),F||(F={}),F.expires)I2.expires(F);for(let A in $)if(this.aliases[A])$=I2.renameObjKey($,A,this.aliases[A]);for(let A of Object.keys($))if($[A]==="ascending"||$[A]==="asc")$[A]=1;else if($[A]==="descending"||$[A]==="desc")$[A]=-1;for(let A of this.indexes())if(F.name==null&&A[1].name==null&&sB1(A[0],$))I2.warn(`Duplicate schema index on ${JSON.stringify($)} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.`);return this._indexes.push([$,F]),this};b1.prototype.set=function($,F,A){if(arguments.length===1)return this.options[$];switch($){case"read":if(typeof F==="string")this.options[$]={mode:JP(F),tags:A};else if(Array.isArray(F)&&typeof F[0]==="string")this.options[$]={mode:JP(F[0]),tags:F[1]};else this.options[$]=F;this._userProvidedOptions[$]=this.options[$];break;case"timestamps":this.setupTimestamp(F),this.options[$]=F,this._userProvidedOptions[$]=this.options[$];break;case"_id":if(this.options[$]=F,this._userProvidedOptions[$]=this.options[$],F&&!this.paths._id)aB1(this);else if(!F&&this.paths._id!=null&&this.paths._id.auto)this.remove("_id");break;default:this.options[$]=F,this._userProvidedOptions[$]=this.options[$];break}if($==="strict")Gw(this,{strict:F});if($==="strictQuery")Gw(this,{strictQuery:F});if($==="toObject")F={...F},delete F.transform,Gw(this,{toObject:F});if($==="toJSON")F={...F},delete F.transform,Gw(this,{toJSON:F});return this};/*!
 * Recursively set options on implicitly created schemas
 */function Gw($,F){for(let{schema:A}of $.childSchemas){if(!A.$implicitlyCreated)continue;Object.assign(A.options,F),Gw(A,F)}}b1.prototype.get=function($){return this.options[$]};var wH0="2d 2dsphere hashed text".split(" ");Object.defineProperty(b1,"indexTypes",{get:function(){return wH0},set:function(){throw Error("Cannot overwrite Schema.indexTypes")}});b1.prototype.indexes=function(){return JH0(this)};b1.prototype.virtual=function($,F){if($ instanceof Ou||AH0($)==="VirtualType")return this.virtual($.path,$.options);if(F=new FH0(F),I2.hasUserDefinedProperty(F,["ref","refPath"])){if(F.localField==null)throw Error("Reference virtuals require `localField` option");if(F.foreignField==null)throw Error("Reference virtuals require `foreignField` option");let X=this.virtual($);if(X.options=F,this.pre("init",function(D,G){if(FP.has($,D)){let z=FP.get($,D);if(!this.$$populatedVirtuals)this.$$populatedVirtuals={};if(F.justOne||F.count)this.$$populatedVirtuals[$]=Array.isArray(z)?z[0]:z;else this.$$populatedVirtuals[$]=Array.isArray(z)?z:z==null?[]:[z];if(G?.hydratedPopulatedDocs&&!F.count){let H=X._getModelNamesForPopulate(this),U=this.$$populatedVirtuals[$];if(!Array.isArray(U)&&!U.$__&&H?.length===1){let Q=this.db.model(H[0]);this.$$populatedVirtuals[$]=Q.hydrate(U)}else if(Array.isArray(U)&&H?.length===1){let Q=this.db.model(H[0]);for(let q=0;q<U.length;++q)if(!U[q].$__)U[q]=Q.hydrate(U[q],null,{hydratedPopulatedDocs:!0});let B=F.foreignField;this.$populated($,U.map((q)=>q==null?q:q.get(typeof B==="function"?B.call(q,q):B)),{populateModelSymbol:Q})}}FP.unset($,D)}}),X.set(function(Z){if(!this.$$populatedVirtuals)this.$$populatedVirtuals={};return WH0(this.$$populatedVirtuals,$,Z,F)}),typeof F.get==="function")X.get(F.get);let Y=$.split("."),W=Y[0];for(let Z=0;Z<Y.length-1;++Z){if(this.paths[W]==null)continue;if(this.paths[W].$isMongooseDocumentArray||this.paths[W].$isSingleNested){let D=Y.slice(Z+1).join(".");this.paths[W].schema.virtual(D,F);break}else if(this.paths[W].$isSchemaMap){let D=Y.slice(Z+2).join(".");this.paths[W].$__schemaType.schema.virtual(D,F);break}W+="."+Y[Z+1]}return X}let A=this.virtuals,J=$.split(".");if(this.pathType($)==="real")throw Error('Virtual path "'+$+'" conflicts with a real path in the schema');if(A[$]=J.reduce(function(X,Y,W){return X[Y]||(X[Y]=W===J.length-1?new Ou(F,$):{}),X[Y]},this.tree),F?.applyToArray&&J.length>1){let X=this.path(J.slice(0,-1).join("."));if(X?.$isMongooseArray)return X.virtual(J[J.length-1],F);else throw new YY(`Path "${X}" is not an array`)}return A[$]};b1.prototype.virtualpath=function($){return Object.hasOwn(this.virtuals,$)?this.virtuals[$]:null};b1.prototype.remove=function($){if(typeof $==="string")$=[$];if(Array.isArray($))$.forEach(function(F){if(this.path(F)==null&&!this.nested[F])return;if(this.nested[F]){let A=Object.keys(this.paths).concat(Object.keys(this.nested));for(let J of A)if(J.startsWith(F+"."))delete this.paths[J],delete this.nested[J],ju(this,J);delete this.nested[F],ju(this,F);return}delete this.paths[F],ju(this,F),this._removeEncryptedField(F)},this);return this};/*!
 * ignore
 */function ju($,F){let A=F.split("."),J=A.pop(),X=$.tree;for(let Y of A)X=X[Y];delete X[J]}b1.prototype.removeVirtual=function($){if(typeof $==="string")$=[$];if(Array.isArray($)){for(let F of $)if(this.virtuals[F]==null)throw new YY(`Attempting to remove virtual "${F}" that does not exist.`);for(let F of $)if(delete this.paths[F],delete this.virtuals[F],F.indexOf(".")!==-1)FP.unset(F,this.tree);else delete this.tree[F]}return this};b1.prototype.loadClass=function($,F){if($===Object.prototype||$===Function.prototype||Object.hasOwn($.prototype,"$isMongooseModelPrototype")||Object.hasOwn($.prototype,"$isMongooseDocumentPrototype"))return this;if(this.loadClass(Object.getPrototypeOf($),F),!F)Object.getOwnPropertyNames($).forEach(function(A){if(A.match(/^(length|name|prototype|constructor|__proto__)$/))return;let J=Object.getOwnPropertyDescriptor($,A);if(Object.hasOwn(J,"value"))this.static(A,J.value)},this);return Object.getOwnPropertyNames($.prototype).forEach(function(A){if(A.match(/^(constructor)$/))return;let J=Object.getOwnPropertyDescriptor($.prototype,A);if(!F){if(typeof J.value==="function")this.method(A,J.value)}if(typeof J.get==="function"){if(this.virtuals[A])this.virtuals[A].getters=[];this.virtual(A).get(J.get)}if(typeof J.set==="function"){if(this.virtuals[A])this.virtuals[A].setters=[];this.virtual(A).set(J.set)}},this),this};/*!
 * ignore
 */b1.prototype._getSchema=function($){let F=this,A=F.path($),J=[];if(A)return A.$fullPath=$,A;function X(W,Z){let D=W.length+1,G,z;while(D--)if(z=W.slice(0,D).join("."),G=Z.path(z),G){if(J.push(z),G.embeddedSchemaType||G.Constructor){if(G.embeddedSchemaType instanceof WY.Mixed)return G.embeddedSchemaType.$fullPath=J.join("."),G.embeddedSchemaType;if(D!==W.length){if(D+1===W.length&&G.embeddedSchemaType&&(W[D]==="$"||AP(W[D])))return G.embeddedSchemaType;if(G.schema){let H;if(W[D]==="$"||AP(W[D])){if(D+1===W.length)return G.embeddedSchemaType;if(H=X(W.slice(D+1),G.schema),H)H.$parentSchemaDocArray=H.$parentSchemaDocArray||(G.schema.$isSingleNested?null:G);return H}if(H=X(W.slice(D),G.schema),H)H.$parentSchemaDocArray=H.$parentSchemaDocArray||(G.schema.$isSingleNested?null:G);return H}}}else if(G.$isSchemaMap){if(D>=W.length)return G;if(D+1>=W.length)return G.$__schemaType;if(G.$__schemaType instanceof WY.Mixed)return G.$__schemaType;if(G.$__schemaType.schema!=null)return X(W.slice(D+1),G.$__schemaType.schema)}return G.$fullPath=J.join("."),G}}let Y=$.split(".");for(let W=0;W<Y.length;++W){if(Y[W]==="$"||AP(Y[W]))Y[W]="0";if(QH0.test(Y[W]))Y[W]="$"}return X(Y,F)};/*!
 * ignore
 */b1.prototype._getPathType=function($){let F=this;if(F.path($))return"real";function J(X,Y){let W=X.length+1,Z,D;while(W--)if(D=X.slice(0,W).join("."),Z=Y.path(D),Z){if(Z.embeddedSchemaType||Z.Constructor){if(Z.embeddedSchemaType instanceof WY.Mixed)return{schema:Z,pathType:"mixed"};if(W!==X.length&&Z.schema){if(X[W]==="$"||AP(X[W])){if(W===X.length-1)return{schema:Z,pathType:"nested"};return J(X.slice(W+1),Z.schema)}return J(X.slice(W),Z.schema)}return{schema:Z,pathType:Z.$isSingleNested?"nested":"array"}}return{schema:Z,pathType:"real"}}else if(W===X.length&&Y.nested[D])return{schema:Y,pathType:"nested"};return{schema:Z||Y,pathType:"undefined"}}return J($.split("."),F)};b1.prototype._transformDuplicateKeyError=function(F){if(!this._duplicateKeyErrorMessagesByPath)return F;if(F.code!==11000&&F.code!==11001)return F;if(F.keyPattern!=null){let A=F.keyPattern,J=Object.keys(A);if(J.length!==1)return F;let X=J[0];if(!Object.hasOwn(this._duplicateKeyErrorMessagesByPath,X))return F;return new YY(this._duplicateKeyErrorMessagesByPath[X],{cause:F})}return F};/*!
 * ignore
 */function AP($){return $.startsWith("$[")&&$.endsWith("]")}b1.prototype._preCompile=function(){this.plugin(XH0,{deduplicate:!0})};b1.prototype.toJSONSchema=function(F){let A=F?.useBsonType??!1,J=A?{required:[],properties:{}}:{type:"object",required:[],properties:{}};for(let X of Object.keys(this.paths)){let Y=this.paths[X];if(Y._presplitPath.indexOf("$*")!==-1)continue;let W=Y._presplitPath.length>1,Z=J;if(W)for(let z=0;z<Y._presplitPath.length-1;++z){let H=Y._presplitPath[z];if(Z.properties[H]==null)Z.properties[H]=A?{bsonType:["object","null"],properties:{}}:{type:["object","null"],properties:{}};Z=Z.properties[H]}let D=Y._presplitPath[Y._presplitPath.length-1],G=!1;if(X==="_id"){if(!Z.required)Z.required=[];Z.required.push("_id"),G=!0}else if(Y.options.required&&typeof Y.options.required!=="function"){if(!Z.required)Z.required=[];Z.required.push(D),G=!0}if(Z.properties[D]=Y.toJSONSchema(F),Y.options.enum)Z.properties[D].enum=G?Y.options.enum:[...Y.options.enum,null]}if(J.required.length===0)delete J.required;return J};/*!
 * Module exports.
 */Xw1.exports=Su=b1;b1.Types=WY=sB();/*!
 * ignore
 */Su.ObjectId=WY.ObjectId});var ku=O((W06,Yw1)=>{/*!
 * Module dependencies.
 */var qH0=T7();class _u extends qH0{constructor($,F,A,J){let X=$.map((Y)=>Y.message).join(", ");if(X.length>200)X=X.slice(0,200)+"...";super(`${J} failed with ${$.length} Mongoose validation errors: ${X}`);this.validationErrors=$,this.results=F,this.rawResult=A,this.operation=J}}Object.defineProperty(_u.prototype,"name",{value:"MongooseBulkWriteError"});/*!
 * exports
 */Yw1.exports=_u});var Zw1=O((Z06,Ww1)=>{/*!
 * Module dependencies.
 */var LH0=v0();class bu extends LH0{constructor($,F){super($);this.errors=F}}Object.defineProperty(bu.prototype,"name",{value:"SyncIndexesError"});Ww1.exports=bu});var xu=O((D06,Dw1)=>{Dw1.exports=function $(F,A,J,X){if(F[X])return;if(F[X]=!0,!J?.skipTopLevel){let D=null;for(let G of A){let z=G[1]==null?null:G[1].tags;if(!Array.isArray(z)){F.plugin(G[0],G[1]);continue}if(D=D||new Set(F.options.pluginTags||[]),!z.find((H)=>D.has(H)))continue;F.plugin(G[0],G[1])}}if(J=Object.assign({},J),delete J.skipTopLevel,J.applyPluginsToChildSchemas!==!1)for(let D of Object.keys(F.paths)){let G=F.paths[D];if(G.schema!=null)$(G.schema,A,J,X),G.Constructor.prototype.$__setSchema(G.schema)}let Y=F.discriminators;if(Y==null)return;let W=J.applyPluginsToDiscriminators,Z=Object.keys(Y);for(let D of Z){let G=Y[D];$(G,A,{skipTopLevel:!W},X)}}});var XP=O((EH0,gu)=>{/*!
 * ignore
 */var Gw1=null;EH0.get=function(){return Gw1};EH0.set=function($){Gw1=$}});var fu=O((G06,zw1)=>{function CH0(){return{ok:1,nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[],writeErrors:[],insertedIds:[],writeConcernErrors:[]}}zw1.exports=CH0});var Uw1=O((z06,Hw1)=>{var MH0=v0();class vu extends MH0{constructor($,F){super($);this.errors=F}}Object.defineProperty(vu.prototype,"name",{value:"CreateCollectionsError"});Hw1.exports=vu});var Bw1=O((H06,Kw1)=>{var Qw1=eC().modifiedPaths;Kw1.exports=function(F){let A=Object.keys(F),J={},X={};for(let Y of A){if(Y.startsWith("$")){Qw1(F[Y],"",J);continue}X[Y]=F[Y]}return Qw1(X,"",J),J}});var yu=O((U06,ww1)=>{var PH0=Bw1();ww1.exports=function(F){if(F==null)return{};let A=PH0(F);return Object.keys(A).reduce((J,X)=>{let Y=X.match(/\$\[[^\]]+\]/g);if(Y==null)return J;for(let W of Y){let Z=X.indexOf(W);if(Z!==X.lastIndexOf(W))throw Error(`Path '${X}' contains the same array filter multiple times`);J[W.substring(2,W.length-1)]=X.substring(0,Z-1).replace(/\$\[[^\]]+\]/g,"0")}return J},{})}});var Ew1=O((Q06,Lw1)=>{var RH0=pB(),qw1=E4(),IH0=R5(),TH0=yu();Lw1.exports=function(F,A,J,X,Y){let W=X.indexOf(".")===-1?[X]:X.split("."),Z=null,D="adhocOrUndefined";J=J||{},A=A||{};let G=Array.isArray(Y?.arrayFilters)?Y.arrayFilters:[],z=TH0(A),H=0;for(let U=0;U<W.length;++U){let Q=W.slice(H,U+1).join("."),B=RH0(Q);if(Z=F.path(B),Z==null)continue;if(D=F.pathType(B),(Z.$isSingleNested||Z.$isMongooseDocumentArrayElement)&&Z.schema.discriminators!=null){let q=qw1(Z,"schema.options.discriminatorKey"),L=B+"."+q,E=L.replace(/\.\d+\./,"."),V=null;if(L in J)V=J[L];if(E in J)V=J[E];let R=B.replace(/\.\d+$/,"");if(Z.$isMongooseDocumentArrayElement&&qw1(J[R],"$elemMatch."+q)!=null)V=J[R].$elemMatch[q];let N=Q+"."+q;if(N in A)V=A[N];if(L in A)V=A[L];for(let I of Object.keys(z)){let T=z[I]+"."+q,j=I+"."+q;if(T===E){let b=G.find((g)=>Object.hasOwn(g,j));if(b!=null)V=b[j]}}if(V==null)continue;let C=IH0(Z.Constructor.discriminators,V)?.schema;if(C==null)continue;let M=W.slice(U+1).join(".");if(Z=C.path(M),F=C,H=U+1,Z!=null){D=C._getPathType(M);break}}}return{type:D,schematype:Z}}});var Nw1=O((K06,Vw1)=>{var jH0=oX();Vw1.exports=function(F,A,J,X,Y,W,Z){if(!F?.options?.immutable)return!1;let D=F.options.immutable;if(typeof D==="function")D=D.call(Z,Z);if(!D)return!1;if(W?.overwriteImmutable)return!1;if(A===!1)return!1;if(A==="throw")throw new jH0(null,`Field ${Y} is immutable and strict = 'throw'`);return delete J[X],!0}});var Pw1=O((B06,Mw1)=>{var OH0=E4();Mw1.exports=function(F,A,J){if(A==null)return;let X=Object.keys(A);for(let Y of X){let W=Y.startsWith("$");if(Y==="$set"){let Z=Object.keys(A[Y]);for(let D of Z)Cw1(F,A[Y],D,A,J)}else if(!W)Cw1(F,A,Y,A,J)}};function Cw1($,F,A,J,X){let Y=$.path(A);if(Y==null)return;let W=OH0(Y,"options.immutable",null);if(W==null)return;if(typeof W==="function")W=W.call(X,X);if(!W)return;J.$setOnInsert=J.$setOnInsert||{},J.$setOnInsert[A]=F[A],delete F[A]}});var hu=O((w06,Rw1)=>{var uu=HZ();Rw1.exports=function(F,A,J){if(A.indexOf(".")===-1){if(uu.has(A))return;F[A]=J;return}let X=A.split("."),Y=X.pop(),W=F;for(let Z of X){if(uu.has(Z))continue;if(W[Z]==null)W[Z]={};W=W[Z]}if(!uu.has(Y))W[Y]=J}});var iu=O((q06,bw1)=>{var YP=N8(),rz=v0(),Iw1=Vu(),Tw1=oX(),SH0=BZ(),cu=rB(),_H0=MZ(),kH0=F3(),mu=R5(),du=Ew1(),jw1=Nw1(),bH0=Pw1(),_w1=wZ().schemaMixedSymbol,xH0=hu(),QJ=Z0(),{internalToObjectOptions:gH0}=V$(),lu=new Set(["$currentDate","$inc","$min","$max","$mul","$rename","$set","$setOnInsert","$unset","$addToSet","$pop","$pull","$push","$pullAll","$bit"]);bw1.exports=function(F,A,J,X,Y){if(A==null)return;if(J=J||{},Array.isArray(A)){let H=A.length;for(let U=0;U<H;++U){let Q=Object.keys(A[U]);for(let B of Q)A[U][B]=fH0(B,A[U][B])}return A}if(F!=null&&Y!=null&&QJ.hasUserDefinedProperty(Y,F.options.discriminatorKey)&&typeof Y[F.options.discriminatorKey]!=="object"&&F.discriminators!=null){let H=Y[F.options.discriminatorKey],U=mu(X.model.discriminators,H);F=F.discriminators[H]||U?.schema||F}else if(F!=null&&J.overwriteDiscriminatorKey&&QJ.hasUserDefinedProperty(A,F.options.discriminatorKey)&&F.discriminators!=null){let H=A[F.options.discriminatorKey],U=mu(X.model.discriminators,H);F=F.discriminators[H]||U?.schema||F}else if(F!=null&&J.overwriteDiscriminatorKey&&A.$set!=null&&QJ.hasUserDefinedProperty(A.$set,F.options.discriminatorKey)&&F.discriminators!=null){let H=A.$set[F.options.discriminatorKey],U=mu(X.model.discriminators,H);F=F.discriminators[H]||U?.schema||F}if(J.upsert)bH0(F,A,X);let W=Object.keys(A),Z=W.length,D={},G,z=!1;Y=Y||{};while(Z--){let H=W[Z];if(!lu.has(H)){if(!D.$set)if(A.$set)D.$set=A.$set;else D.$set={};if(D.$set[H]=A[H],W.splice(Z,1),!~W.indexOf("$set"))W.push("$set")}else if(H==="$set"){if(!D.$set)D[H]=A[H]}else D[H]=A[H]}Z=W.length;while(Z--){let H=W[Z];if(G=D[H],z=z||H.startsWith("$"),G?.$__)G=G.toObject(gH0),D[H]=G;if(G&&typeof G==="object"&&!Buffer.isBuffer(G)&&lu.has(H))kw1(F,G,H,J,X,Y);else{let U="Invalid atomic update value for "+H+". Expected an object, received "+typeof G;throw Error(U)}if(H.startsWith("$")&&QJ.isEmptyObject(G))delete D[H]}if(QJ.hasOwnKeys(D)===!1&&J.upsert&&QJ.hasOwnKeys(Y))return{$setOnInsert:{...Y}};return D};/*!
 * ignore
 */function fH0($,F){if($==="$unset"){if(typeof F!=="string"&&(!Array.isArray(F)||F.find((A)=>typeof A!=="string")))throw new rz("Invalid $unset in pipeline, must be  a string or an array of strings");return F}if($==="$project"){if(F==null||typeof F!=="object")throw new rz("Invalid $project in pipeline, must be an object");return F}if($==="$addFields"||$==="$set"){if(F==null||typeof F!=="object")throw new rz("Invalid "+$+" in pipeline, must be an object");return F}else if($==="$replaceRoot"||$==="$replaceWith"){if(F==null||typeof F!=="object")throw new rz("Invalid "+$+" in pipeline, must be an object");return F}throw new rz('Invalid update pipeline operator: "'+$+'"')}function kw1($,F,A,J,X,Y,W){let Z=J.strict;W=W?W+".":"";let D=Object.keys(F),G=D.length,z=!1,H,U,Q,B=null,q=Z??$.options.strict;while(G--){if(U=D[G],Q=F[U],A==="$pull"){if(H=$._getSchema(W+U),H==null){let E=du($,F,Y,W+U,J);if(E.schematype!=null)H=E.schematype}if(H?.schema!=null){F[U]=_H0(H.schema,F[U],J,X),z=!0;continue}}let L=W?W+U:U;if($.discriminatorMapping!=null&&L===$.options.discriminatorKey&&$.discriminatorMapping.value!==F[U]&&!J.overwriteDiscriminatorKey){if(q==="throw"){let E=Error(`Can't modify discriminator key "`+L+'" on discriminator model');B=TZ(E,X,L,B);continue}else if(q){delete F[U];continue}}if(kH0(Q)==="Object"){if(H=$._getSchema(W+U),H==null){let E=du($,F,Y,W+U,J);if(E.schematype!=null)H=E.schematype}if(A!=="$setOnInsert"&&jw1(H,Z,F,U,W+U,J,X))continue;if(H&&(H.embeddedSchemaType||H.Constructor)&&A in pu)if("$each"in Q){z=!0;try{F[U]={$each:nz(H,Q.$each,A,U,X,W+U)}}catch(E){B=TZ(E,X,U,B)}if(Q.$slice!=null)F[U].$slice=Q.$slice|0;if(Q.$sort)F[U].$sort=Q.$sort;if(Q.$position!=null)F[U].$position=cu(Q.$position)}else{if(H?.$isSingleNested){let E=Z==null?H.schema.options.strict:Z;try{F[U]=H.castForQuery(null,Q,X,{strict:E})}catch(V){B=TZ(V,X,U,B)}}else try{F[U]=nz(H,Q,A,U,X,W+U)}catch(E){B=TZ(E,X,U,B)}if(F[U]===void 0){delete F[U];continue}z=!0}else if(A==="$currentDate"||A in pu&&H){try{F[U]=nz(H,Q,A,U,X,W+U)}catch(E){B=TZ(E,X,U,B)}if(F[U]===void 0){delete F[U];continue}z=!0}else if(A==="$rename"){let E=new Iw1(`${W}${U}.$rename`);try{F[U]=nz(E,Q,A,U,X,W+U)}catch(V){B=TZ(V,X,U,B)}if(F[U]===void 0){delete F[U];continue}z=!0}else{let E=W+U,V=$._getPathType(E),R=Z;if(V?.schema&&R==null)R=V.schema.options.strict;if(V.pathType==="undefined"){if(R==="throw")throw new Tw1(E);else if(R){delete F[U];continue}}z|=kw1($,Q,A,J,X,Y,W+U)||QJ.isObject(Q)&&QJ.hasOwnKeys(Q)===!1}}else{let E=U==="$each"||U==="$or"||U==="$and"||U==="$in";if(E&&!W)throw new rz('Invalid update: Unexpected modifier "'+U+'" as a key in operator. Did you mean something like { $addToSet: { fieldName: { $each: [...] } } }? Modifiers such as "$each", "$or", "$and", "$in" must appear under a valid field path.');let V=E?W:W+U;if(H=$._getSchema(V),A!=="$setOnInsert"&&jw1(H,Z,F,U,W+U,J,X))continue;let R=$._getPathType(V);if(H==null){let C=du($,F,Y,V,J);if(C.schematype!=null)H=C.schematype,R=C.type}let N=Z;if(R?.schema&&Z==null)N=R.schema.options.strict;if(N&&!H&&!/real|nested/.test(R.pathType))if(N==="throw"&&$.virtuals[V]==null)throw new Tw1(W+U);else delete F[U];else{if(A==="$rename"){if(F[U]==null)throw new YP("String",F[U],`${W}${U}.$rename`);let C=new Iw1(`${W}${U}.$rename`,null,null,$);F[U]=C.castForQuery(null,F[U],X);continue}try{if(W.length===0||U.indexOf(".")===-1)F[U]=nz(H,Q,A,U,X,W+U);else if(N!==!1||H!=null)xH0(F,U,nz(H,Q,A,U,X,W+U)),delete F[U]}catch(C){B=TZ(C,X,U,B)}if(Array.isArray(F[U])&&(A==="$addToSet"||A==="$push")&&U!=="$each"){if(H&&H.embeddedSchemaType&&!H.embeddedSchemaType.$isMongooseArray&&!H.embeddedSchemaType[_w1])F[U]={$each:F[U]}}if(F[U]===void 0){delete F[U];continue}z=!0}}}if(B!=null)throw B;return z}/*!
 * ignore
 */function TZ($,F,A,J){if(typeof F!=="object"||!F.options.multipleCastError)throw $;return J=J||new SH0,J.addError(A,$),J}var Ow1={$pop:1,$inc:1},vH0={$unset:1},pu={$push:1,$addToSet:1,$set:1,$setOnInsert:1};/*!
 * ignore
 */var Sw1={$set:1,$setOnInsert:1};function nz($,F,A,J,X,Y){if(!$){if(A in Ow1)try{return cu(F)}catch{throw new YP("number",F,Y)}return F}if($.$isMongooseArray&&A in pu&&(QJ.isObject(F)||Array.isArray(F))&&!Sw1[A]){let Z=0,D=$;while(D.$isMongooseArray)++Z,D=D.embeddedSchemaType;let G=0,z=F;while(Array.isArray(z))++G,z=z[0];let H=Z-G;while(G<Z)F=[F],++G;let U=$.applySetters(Array.isArray(F)?F:[F],X);for(let Q=0;Q<H;++Q)U=U[0];return U}if(A in vH0)return F;if(A in Ow1){if(F==null)throw new YP("number",F,$.path);if(A==="$inc")return $.castForQuery(null,F,X);try{return cu(F)}catch{throw new YP("number",F,$.path)}}if(A==="$currentDate"){if(typeof F==="object")return{$type:F.$type};return Boolean(F)}if(lu.has(J))return $.castForQuery(J,F,X);if(Sw1[A]){let Z=F!=null&&$.$isMongooseArray&&$.$fullPath!=null&&!$.$fullPath.match(/\d+$/),D=$[_w1]!=null;if(Z||D)return $.applySetters(F,X);return $.castForQuery(null,F,X)}return $.castForQuery(null,F,X)}});var nu=O((L06,xw1)=>{xw1.exports=function(F,A,J){if(!J||!A?.upsert)return;if(A.overwrite){if(!zw(F,J))F[J]=0}else if(!zw(F,J)&&!zw(F?.$set,J)&&!zw(F?.$inc,J)&&!zw(F?.$setOnInsert,J)){if(!F.$setOnInsert)F.$setOnInsert={};F.$setOnInsert[J]=0}};function zw($,F){if($==null||typeof $!=="object")return!1;return Object.hasOwn($,F)}});var ru=O((E06,fw1)=>{var yH0=E4();fw1.exports=function($,F,A,J){J=J||{};let X=J.setDefaultsOnInsert??F.base.options.setDefaultsOnInsert;if(!J.upsert||X===!1)return A;let Y=Object.keys(A||{}),W={},Z={},D=Y.length,G=!1;for(let U=0;U<D;++U)if(Y[U].charAt(0)==="$"){G=!0;break}let z=Object.keys($),H=z.length;for(let U=0;U<H;++U){let Q=z[U],B=$[Q];if(B&&typeof B==="object"){let q=Object.keys(B),L=q.length,E=!1;for(let V=0;V<L;++V)if(q[V].charAt(0)==="$"){E=!0;break}if(E)continue}W[Q]=!0}if(J?.overwrite&&!G)return A;return F.eachPath(function(U,Q){if(Q.path==="_id"&&Q.options.auto)return;let B=Q.getDefault(null,!0);if(typeof B>"u")return;let q=Q.splitPath();if(q.includes("$*"))return;if(uH0(A,W,U,q,G))return;if(A=A||{},A.$setOnInsert=A.$setOnInsert||{},yH0(A,U)==null)A.$setOnInsert[U]=B;Z[U]=B}),A};function uH0($,F,A,J,X){if(F[A])return!0;let Y=J[0];for(let W=1;W<J.length;++W){if(F[Y])return!0;Y+="."+J[W]}if(X){for(let W in $)if(W.charAt(0)==="$"){if(gw1($[W],A,J))return!0}}else if(gw1($,A,J))return!0;return!1}function gw1($,F,A){if($==null||typeof $!=="object")return!1;if(Object.hasOwn($,F))return!0;let J=A[0];for(let Y=1;Y<A.length;++Y){if(Object.hasOwn($,J))return!0;J+="."+A[Y]}let X=F+".";for(let Y in $)if(Y.startsWith(X))return!0;return!1}});var au=O((V06,f4)=>{var hH0=v0(),mH0=R5(),vw1=Vy(),yw1=Ny(),Hw=MZ(),uw1=iu(),dH0=W4(),hw1=nu(),{inspect:cH0}=Z1("util"),mw1=ru();f4.exports=function(F,A,J){let X=F.base.now();if(A.insertOne)return(Y)=>f4.exports.castInsertOne(F,A.insertOne,J).then(()=>Y(null),(W)=>Y(W));else if(A.updateOne)return(Y)=>{try{f4.exports.castUpdateOne(F,A.updateOne,J,X),Y(null)}catch(W){Y(W)}};else if(A.updateMany)return(Y)=>{try{f4.exports.castUpdateMany(F,A.updateMany,J,X),Y(null)}catch(W){Y(W)}};else if(A.replaceOne)return(Y)=>{f4.exports.castReplaceOne(F,A.replaceOne,J).then(()=>Y(null),(W)=>Y(W))};else if(A.deleteOne)return(Y)=>{try{f4.exports.castDeleteOne(F,A.deleteOne),Y(null)}catch(W){Y(W)}};else if(A.deleteMany)return(Y)=>{try{f4.exports.castDeleteMany(F,A.deleteMany),Y(null)}catch(W){Y(W)}};else return(Y)=>{let W=new hH0(`Invalid op passed to \`bulkWrite()\`: ${cH0(A)}`);Y(W,null)}};f4.exports.castInsertOne=async function(F,A,J){let X=az(F,A.document),Y=new X(A.document);if(X.schema.options.timestamps&&WP(A,J))Y.initializeTimestamps();if(J.session!=null)Y.$session(J.session);let W=X?.schema?.options?.versionKey;if(W&&Y[W]==null)Y[W]=0;if(A.document=Y,J.skipValidation||A.skipValidation)return A;return await A.document.$validate(),A};f4.exports.castUpdateOne=function(F,A,J,X){if(!A.filter)throw Error("Must provide a filter object.");if(!A.update)throw Error("Must provide an update object.");let Y=az(F,A.filter),W=Y.schema,Z=J.strict??Y.schema.options.strict,D=dH0(A.update);Uw(W,A.filter);let G=WP(A,J);if(Y.schema.$timestamps!=null&&G){let U=Y.schema.$timestamps.createdAt,Q=Y.schema.$timestamps.updatedAt;yw1(X,U,Q,D,{timestamps:A.timestamps,overwriteImmutable:A.overwriteImmutable})}if(G)vw1(X,D,Y.schema);let z=F.base.options.setDefaultsOnInsert;if((A.setDefaultsOnInsert??z)!==!1)mw1(A.filter,Y.schema,D,{setDefaultsOnInsert:!0,upsert:A.upsert});return hw1(D,A,Y.schema.options.versionKey),A.filter=Hw(Y.schema,A.filter,{strict:Z,upsert:A.upsert}),A.update=uw1(Y.schema,D,{strict:Z,upsert:A.upsert,arrayFilters:A.arrayFilters,overwriteDiscriminatorKey:A.overwriteDiscriminatorKey,overwriteImmutable:A.overwriteImmutable},Y,A.filter),A};f4.exports.castUpdateMany=function(F,A,J,X){if(!A.filter)throw Error("Must provide a filter object.");if(!A.update)throw Error("Must provide an update object.");let Y=az(F,A.filter),W=Y.schema,Z=J.strict??Y.schema.options.strict,D=F.base.options.setDefaultsOnInsert;if((A.setDefaultsOnInsert??D)!==!1)mw1(A.filter,Y.schema,A.update,{setDefaultsOnInsert:!0,upsert:A.upsert});let z=WP(A,J);if(Y.schema.$timestamps!=null&&z){let H=Y.schema.$timestamps.createdAt,U=Y.schema.$timestamps.updatedAt;yw1(X,H,U,A.update,{timestamps:A.timestamps,overwriteImmutable:A.overwriteImmutable})}if(z)vw1(X,A.update,Y.schema);Uw(W,A.filter),hw1(A.update,A,Y.schema.options.versionKey),A.filter=Hw(Y.schema,A.filter,{strict:Z,upsert:A.upsert}),A.update=uw1(Y.schema,A.update,{strict:Z,upsert:A.upsert,arrayFilters:A.arrayFilters,overwriteDiscriminatorKey:A.overwriteDiscriminatorKey,overwriteImmutable:A.overwriteImmutable},Y,A.filter)};f4.exports.castReplaceOne=async function(F,A,J){let X=az(F,A.filter),Y=X.schema,W=J.strict??X.schema.options.strict;Uw(Y,A.filter),A.filter=Hw(X.schema,A.filter,{strict:W,upsert:A.upsert});let Z=new X(A.replacement,W,{skipId:!0});if(X.schema.options.timestamps&&WP(A,J))Z.initializeTimestamps();if(J.session!=null)Z.$session(J.session);let D=X?.schema?.options?.versionKey;if(D&&Z[D]==null)Z[D]=0;if(A.replacement=Z,J.skipValidation||A.skipValidation){A.replacement=A.replacement.toBSON();return}await A.replacement.$validate(),A.replacement=A.replacement.toBSON()};f4.exports.castDeleteOne=function(F,A){let J=az(F,A.filter),X=J.schema;Uw(X,A.filter),A.filter=Hw(J.schema,A.filter)};f4.exports.castDeleteMany=function(F,A){let J=az(F,A.filter),X=J.schema;Uw(X,A.filter),A.filter=Hw(J.schema,A.filter)};f4.exports.cast={insertOne:f4.exports.castInsertOne,updateOne:f4.exports.castUpdateOne,updateMany:f4.exports.castUpdateMany,replaceOne:f4.exports.castReplaceOne,deleteOne:f4.exports.castDeleteOne,deleteMany:f4.exports.castDeleteMany};function Uw($,F){if($==null)return;if($.discriminatorMapping&&!$.discriminatorMapping.isRoot)F[$.discriminatorMapping.key]=$.discriminatorMapping.value}function az($,F){let A=$.schema.options.discriminatorKey;if(F!=null&&Object.hasOwn(F,A))$=mH0($.discriminators,F[A])||$;return $}function WP($,F){let A=$.timestamps,J=F.timestamps;if(A!=null)return A;else if(J!=null)return J;return!0}});var tu=O((N06,dw1)=>{dw1.exports=function(F,A,J){return F.mongoose=F.mongoose||{},F.mongoose.validationErrors=A,F.mongoose.results=J,F}});var $h=O((C06,iw1)=>{/*!
 * Module dependencies.
 */var lH0=$v(),ou=Z1("events").EventEmitter,pH0=VZ(),v4=jK(),cw1=ku(),N4=T7(),iH0=Lv(),nH0=Zw1(),rH0=xu(),aH0=W4(),tH0=XP(),sH0=E4(),oH0=fu(),lw1=TX(),eu=Z0(),eH0=Uw1(),ZP=au(),{modelSymbol:DP}=s1(),$U0=uv(),su=tu(),FU0=s1().arrayAtomicsSymbol,Qw=s1().sessionNewDocuments,AU0=globalThis.Date,JU0=["MONGODB-X509"];function X0($){if(this.base=$,this.collections={},this.models={},this.config={},this.replica=!1,this.options=null,this.otherDbs=[],this.relatedDbs={},this.states=v4,this._readyState=v4.disconnected,this._closeCalled=!1,this._hasOpened=!1,this.plugins=[],typeof $>"u"||!$.connections.length)this.id=0;else this.id=$.nextConnectionId;this._queue=[]}/*!
 * Inherit from EventEmitter
 */Object.setPrototypeOf(X0.prototype,ou.prototype);Object.defineProperty(X0.prototype,"readyState",{get:function(){if(this._readyState===v4.connected&&this._lastHeartbeatAt!=null&&this.client?.topology?.s?.description?.type!=="LoadBalanced"&&typeof this.client?.topology?.s?.description?.heartbeatFrequencyMS==="number"&&AU0.now()-this._lastHeartbeatAt>=this.client.topology.s.description.heartbeatFrequencyMS*2)return v4.disconnected;return this._readyState},set:function($){if(!($ in v4))throw Error("Invalid connection state: "+$);if(this._readyState!==$){this._readyState=$;for(let F of this.otherDbs)F.readyState=$;if(v4.connected===$)this._hasOpened=!0;this.emit(v4[$])}}});X0.prototype.get=function(F){if(Object.hasOwn(this.config,F))return this.config[F];return sH0(this.options,F)};X0.prototype.set=function(F,A){if(Object.hasOwn(this.config,F))return this.config[F]=A,A;return this.options=this.options||{},this.options[F]=A,A};X0.prototype.collections;X0.prototype.name;X0.prototype.models;X0.prototype.id;Object.defineProperty(X0.prototype,"plugins",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(X0.prototype,"host",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(X0.prototype,"port",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(X0.prototype,"user",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(X0.prototype,"pass",{configurable:!0,enumerable:!0,writable:!0});X0.prototype.db;X0.prototype.client;X0.prototype.config;X0.prototype.createCollection=async function(F,A){if(typeof A==="function"||arguments.length>=3&&typeof arguments[2]==="function")throw new N4("Connection.prototype.createCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.createCollection(F,A)};X0.prototype.bulkWrite=async function(F,A){await this._waitForConnect(),A=A||{};let J=A.ordered==null?!0:A.ordered,X=this.base.transactionAsyncLocalStorage?.getStore();if((!A||!Object.hasOwn(A,"session"))&&X?.session!=null)A={...A,session:X.session};let Y=this.base.now(),W=null;if(J){let Z=[];for(let D of F){if(typeof D.model!=="string"&&!D.model?.[DP])throw new N4("Must specify model in Connection.prototype.bulkWrite() operations");let G=D.model[DP]?D.model:this.model(D.model);if(D.name==null)throw new N4("Must specify operation name in Connection.prototype.bulkWrite()");if(!Object.hasOwn(ZP.cast,D.name))throw new N4(`Unrecognized bulkWrite() operation name ${D.name}`);await ZP.cast[D.name](G,D,A,Y),Z.push({...D,namespace:G.namespace()})}W=await this.client.bulkWrite(Z,A)}else{let Z=[],D=[],G=[],z=[],H=[];for(let Q=0;Q<F.length;++Q){let B=F[Q];if(typeof B.model!=="string"&&!B.model?.[DP]){let E=new N4("Must specify model in Connection.prototype.bulkWrite() operations");G.push({index:Q,error:E}),H[Q]=E;continue}let q;try{q=B.model[DP]?B.model:this.model(B.model)}catch(E){G.push({index:Q,error:E});continue}if(B.name==null){let E=new N4("Must specify operation name in Connection.prototype.bulkWrite()");G.push({index:Q,error:E}),H[Q]=E;continue}if(!Object.hasOwn(ZP.cast,B.name)){let E=new N4(`Unrecognized bulkWrite() operation name ${B.name}`);G.push({index:Q,error:E}),H[Q]=E;continue}let L=null;try{L=ZP.cast[B.name](q,B,A,Y)}catch(E){G.push({index:Q,error:E}),H[Q]=E;continue}if($U0(L))z.push(L.then(()=>{Z.push({...B,namespace:q.namespace()}),D.push(Q)},(E)=>{G.push({index:Q,error:E}),H[Q]=E}));else Z.push({...B,namespace:q.namespace()}),D.push(Q)}if(z.length>0)await Promise.all(z);if(G=G.sort((Q,B)=>Q.index-B.index).map((Q)=>Q.error),Z.length===0){if(A.throwOnValidationError&&G.length)throw new cw1(G,H,B,"bulkWrite");let B=new(this.base.driver.get()).BulkWriteResult(oH0(),!1);return su(B,G,H)}let U;[W,U]=await this.client.bulkWrite(Z,A).then((Q)=>[Q,null]).catch((Q)=>[null,Q]);for(let Q=0;Q<D.length;++Q)H[D[Q]]=null;if(U){if(G.length>0)su(U,G,H),U.mongoose=U.mongoose||{},U.mongoose.validationErrors=G}if(G.length>0)if(A.throwOnValidationError)throw new cw1(G,H,W,"bulkWrite");else su(W,G,H)}return W};X0.prototype.createCollections=async function(F={}){let A={},J={},{continueOnError:X}=F;delete F.continueOnError;for(let Y of Object.values(this.models))try{A[Y.modelName]=await Y.createCollection({})}catch(W){if(!X){J[Y.modelName]=W;break}else A[Y.modelName]=W}if(!X&&eu.hasOwnKeys(J)){let Y=Object.entries(J).map(([Z,D])=>`${Z}: ${D.message}`).join(", ");throw new eH0(Y,J)}return A};X0.prototype.withSession=async function(F){if(arguments.length===0)throw Error("Please provide an executor function");return await this.client.withSession(F)};X0.prototype.startSession=async function(F){if(arguments.length>=2&&typeof arguments[1]==="function")throw new N4("Connection.prototype.startSession() no longer accepts a callback");return await this._waitForConnect(),this.client.startSession(F)};X0.prototype.transaction=function(F,A){return this.startSession().then((J)=>{return J[Qw]=new Map,J.withTransaction(()=>XU0(F,J,this.base),A).then((X)=>{return delete J[Qw],X}).catch((X)=>{throw delete J[Qw],X}).finally(()=>{J.endSession().catch(()=>{})})})};/*!
 * Reset document state in between transaction retries re: gh-13698
 */async function XU0($,F,A){try{return A.transactionAsyncLocalStorage==null?await $(F):await new Promise((X)=>{A.transactionAsyncLocalStorage.run({session:F},()=>X($(F)))})}catch(J){throw YU0(F),J}}/*!
 * If transaction was aborted, we need to reset newly inserted documents' `isNew`.
 */function YU0($){for(let F of $[Qw].keys()){let A=$[Qw].get(F);if(Object.hasOwn(A,"isNew"))F.$isNew=A.isNew;if(Object.hasOwn(A,"versionKey"))F.set(F.schema.options.versionKey,A.versionKey);if(A.modifiedPaths.length>0&&F.$__.activePaths.states.modify==null)F.$__.activePaths.states.modify={};for(let J of A.modifiedPaths){let X=F.$__.activePaths.paths[J];if(X!=null)delete F.$__.activePaths[X][J];F.$__.activePaths.paths[J]="modify",F.$__.activePaths.states.modify[J]=!0}for(let J of A.atomics.keys()){let X=F.$__getValue(J);if(X==null)continue;X[FU0]=A.atomics.get(J)}}}X0.prototype.dropCollection=async function(F){if(arguments.length>=2&&typeof arguments[1]==="function")throw new N4("Connection.prototype.dropCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.dropCollection(F)};X0.prototype._waitForConnect=async function(F){if((this.readyState===v4.connecting||this.readyState===v4.disconnected)&&this._shouldBufferCommands()){let A=this._getBufferTimeoutMS(),J=null,X=!1,Y={},W=new Promise((Z)=>{Y.fn=Z,this._queue.push(Y)});if(F)await W;else await Promise.race([W,new Promise((Z)=>{J=setTimeout(()=>{X=!0,Z()},A)})]);if(X){let Z=this._queue.indexOf(Y);if(Z!==-1)this._queue.splice(Z,1);let D="Connection operation buffering timed out after "+A+"ms";throw new N4(D)}else if(J!=null)clearTimeout(J)}};/*!
 * Get the default buffer timeout for this connection
 */X0.prototype._getBufferTimeoutMS=function(){if(this.config.bufferTimeoutMS!=null)return this.config.bufferTimeoutMS;if(this.base?.get("bufferTimeoutMS")!=null)return this.base.get("bufferTimeoutMS");return 1e4};X0.prototype.listCollections=async function(){return await this._waitForConnect(),await this.db.listCollections().toArray()};X0.prototype.listDatabases=async function(){throw new N4("listDatabases() not implemented by driver")};X0.prototype.dropDatabase=async function(){if(arguments.length>=1&&typeof arguments[0]==="function")throw new N4("Connection.prototype.dropDatabase() no longer accepts a callback");await this._waitForConnect();for(let F of Object.values(this.models))delete F.$init;return this.db.dropDatabase()};/*!
 * ignore
 */X0.prototype._shouldBufferCommands=function(){if(this.config.bufferCommands!=null)return this.config.bufferCommands;if(this.base.get("bufferCommands")!=null)return this.base.get("bufferCommands");return!0};X0.prototype.error=function(F,A){if(A)return A(F),null;if(this.listeners("error").length>0)this.emit("error",F);return Promise.reject(F)};X0.prototype.onOpen=function(){this.readyState=v4.connected;for(let $ of this._queue)$.fn.apply($.ctx,$.args);this._queue=[];for(let $ in this.collections)if(Object.hasOwn(this.collections,$))this.collections[$].onOpen();this.emit("open")};X0.prototype.openUri=async function(F,A){if(this.readyState===v4.connecting||this.readyState===v4.connected){if(this._connectionString===F)return this}this._closeCalled=!1;let J=!1;if(A&&"_fireAndForget"in A)J=A._fireAndForget,delete A._fireAndForget;try{WU0.apply(arguments)}catch(X){if(J)throw X;throw this.$initialConnection=Promise.reject(X),X}this.$initialConnection=this.createClient(F,A).then(()=>this).catch((X)=>{if(this.readyState=v4.disconnected,this.listeners("error").length>0)lw1(()=>this.emit("error",X));throw X});for(let X of Object.values(this.models))X.init().catch(function(){});if(J)return this;try{await this.$initialConnection}catch(X){throw pw1(X)}return this};X0.prototype.on=function(F,A){if(F==="error"&&this.$initialConnection)this.$initialConnection.catch(()=>{});return ou.prototype.on.call(this,F,A)};X0.prototype.once=function(F,A){if(F==="error"&&this.$initialConnection)this.$initialConnection.catch(()=>{});return ou.prototype.once.call(this,F,A)};/*!
 * ignore
 */function WU0($,F,A){if(typeof F==="function"&&A==null)throw new N4("Connection.prototype.openUri() no longer accepts a callback");else if(typeof A==="function")throw new N4("Connection.prototype.openUri() no longer accepts a callback")}/*!
 * ignore
 */function pw1($){if($?.name==="MongoServerSelectionError"){let F=$;$=new iH0,$.assimilateError(F)}return $}X0.prototype.destroy=async function(F){if(typeof F==="function"||arguments.length===2&&typeof arguments[1]==="function")throw new N4("Connection.prototype.destroy() no longer accepts a callback");if(F!=null&&typeof F==="object")this.$wasForceClosed=!!F.force;else this.$wasForceClosed=!!F;return this._close(F,!0)};X0.prototype.close=async function(F){if(typeof F==="function"||arguments.length===2&&typeof arguments[1]==="function")throw new N4("Connection.prototype.close() no longer accepts a callback");if(F!=null&&typeof F==="object")this.$wasForceClosed=!!F.force;else this.$wasForceClosed=!!F;if(this._lastHeartbeatAt!=null)this._lastHeartbeatAt=null;for(let A of Object.values(this.models))delete A.$init;return this._close(F,!1)};X0.prototype._close=async function(F,A){let J=this,X=this._closeCalled;if(this._closeCalled=!0,this._destroyCalled=A,this.client!=null)this.client._closeCalled=!0,this.client._destroyCalled=A;let Y=this;switch(this.readyState){case v4.disconnected:if(A){let W=this.base.connections.indexOf(Y);if(W!==-1)this.base.connections.splice(W,1)}if(!X)await this.doClose(F),this.onClose(F);break;case v4.connected:if(this.readyState=v4.disconnecting,await this.doClose(F),A){let W=J.base.connections.indexOf(Y);if(W!==-1)this.base.connections.splice(W,1)}this.onClose(F);break;case v4.connecting:return new Promise((W,Z)=>{let D=()=>{if(this.removeListener("open",D),this.removeListener("error",D),A)this.destroy(F).then(W,Z);else this.close(F).then(W,Z)};this.once("open",D),this.once("error",D)});case v4.disconnecting:return new Promise((W)=>{this.once("close",()=>{if(A&&this.base.connections.indexOf(Y)!==-1)this.base.connections.splice(this.base.connections.indexOf(Y),1);W()})})}return this};X0.prototype.doClose=function(){throw Error("Connection#doClose unimplemented by driver")};X0.prototype.onClose=function(F){this.readyState=v4.disconnected;for(let J in this.collections)if(Object.hasOwn(this.collections,J))this.collections[J].onClose(F);this.emit("close",F);let A=typeof F==="object"&&F!==null?F.force:F;for(let J of this.otherDbs)this._destroyCalled?J.destroy({force:A,skipCloseClient:!0}):J.close({force:A,skipCloseClient:!0})};X0.prototype.collection=function($,F){let A={autoIndex:this.config.autoIndex??this.base.options.autoIndex,autoCreate:this.config.autoCreate??this.base.options.autoCreate,autoSearchIndex:this.config.autoSearchIndex??this.base.options.autoSearchIndex};F=Object.assign({},A,F?aH0(F):{}),F.$wasForceClosed=this.$wasForceClosed;let J=this.base?.__driver?.Collection||tH0.get().Collection;if(!($ in this.collections))this.collections[$]=new J($,this,F);return this.collections[$]};X0.prototype.plugin=function($,F){return this.plugins.push([$,F]),this};X0.prototype.model=function(F,A,J,X){if(!(this instanceof X0))throw new N4("`connection.model()` should not be run with `new`. If you are doing `new db.model(foo)(bar)`, use `db.model(foo)(bar)` instead");let Y;if(typeof F==="function")Y=F,F=Y.name;if(typeof A==="string")J=A,A=!1;if(eu.isObject(A)){if(!A.instanceOfSchema)A=new pH0(A);else if(!(A instanceof this.base.Schema))A=A._clone(this.base.Schema)}if(A&&!A.instanceOfSchema)throw Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");let W={cache:!1,overwriteModels:this.base.options.overwriteModels},Z=Object.assign(W,X,{connection:this});if(this.models[F]&&!J&&Z.overwriteModels!==!0){if(A?.instanceOfSchema&&A!==this.models[F].schema)throw new N4.OverwriteModelError(F);return this.models[F]}let D;if(A?.instanceOfSchema){if(rH0(A,this.plugins,null,"$connectionPluginsApplied"),D=this.base._model(Y||F,A,J,Z),!this.models[F])this.models[F]=D;return D.init().catch(function(){}),D}if(this.models[F]&&J)return D=this.models[F],A=D.prototype.schema,D.__subclass(this,A,J);if(arguments.length===1){if(D=this.models[F],!D)throw new N4.MissingSchemaError(F);return D}if(!D)throw new N4.MissingSchemaError(F);if(this===D.prototype.db&&(!J||J===D.collection.name)){if(!this.models[F])this.models[F]=D;return D}return this.models[F]=D.__subclass(this,A,J),this.models[F]};X0.prototype.deleteModel=function(F){if(typeof F==="string"){let A=this.model(F);if(A==null)return this;let J=A.collection.name;delete this.models[F],delete this.collections[J],this.emit("deleteModel",A)}else if(F instanceof RegExp){let A=F,J=this.modelNames();for(let X of J)if(A.test(X))this.deleteModel(X)}else throw Error('First parameter to `deleteModel()` must be a string or regexp, got "'+F+'"');return this};X0.prototype.watch=function(F,A){return new lH0((Y)=>{lw1(()=>{if(this.readyState===v4.connecting)this.once("open",function(){let W=this.db.watch(F,A);Y(null,W)});else{let W=this.db.watch(F,A);Y(null,W)}})},F,A)};X0.prototype.asPromise=async function(){try{return await this.$initialConnection,this}catch(F){throw pw1(F)}};X0.prototype.modelNames=function(){return Object.keys(this.models)};X0.prototype.shouldAuthenticate=function(){return this.user!=null&&(this.pass!=null||this.authMechanismDoesNotRequirePassword())};X0.prototype.authMechanismDoesNotRequirePassword=function(){if(this.options?.auth)return JU0.indexOf(this.options.auth.authMechanism)>=0;return!0};X0.prototype.optionsProvideAuthenticationData=function(F){return F&&F.user&&(F.pass||this.authMechanismDoesNotRequirePassword())};X0.prototype.getClient=function(){return this.client};X0.prototype.setClient=function(){throw new N4("Connection#setClient not implemented by driver")};/*!
 * Called internally by `openUri()` to create a MongoClient instance.
 */X0.prototype.createClient=function(){throw new N4("Connection#createClient not implemented by driver")};X0.prototype.syncIndexes=async function(F={}){let A={},J={},{continueOnError:X}=F;delete F.continueOnError;for(let Y of Object.values(this.models))try{A[Y.modelName]=await Y.syncIndexes(F)}catch(W){if(!X){J[Y.modelName]=W;break}else A[Y.modelName]=W}if(!X&&eu.hasOwnKeys(J)){let Y=Object.entries(J).map(([Z,D])=>`${Z}: ${D.message}`).join(", ");throw new nH0(Y,J)}return A};/*!
 * Module exports.
 */X0.STATES=v4;iw1.exports=X0});var Fh=O((M06,ZU0)=>{ZU0.exports={name:"mongoose",description:"Mongoose MongoDB ODM",version:"9.1.4",author:"Guillermo Rauch <guillermo@learnboost.com>",keywords:["mongodb","document","model","schema","database","odm","data","datastore","query","nosql","orm","db"],type:"commonjs",license:"MIT",dependencies:{kareem:"3.0.0",mongodb:"~7.0",mpath:"0.9.0",mquery:"6.0.0",ms:"2.1.3",sift:"17.1.3"},devDependencies:{"@ark/attest":"0.56.0","@mongodb-js/mongodb-downloader":"^1.0.0",acquit:"1.4.0","acquit-ignore":"0.2.1","acquit-require":"0.1.1",ajv:"8.17.1","broken-link-checker":"^0.7.8",cheerio:"1.1.2",dox:"1.0.0",eslint:"9.39.2","eslint-plugin-markdown":"^5.1.0","eslint-plugin-mocha-no-only":"1.2.0",express:"^4.19.2","fs-extra":"~11.3.0","highlight.js":"11.11.1","lodash.isequal":"4.5.0","lodash.isequalwith":"4.4.0","markdownlint-cli2":"^0.20.0",marked:"15.x",mkdirp:"^3.0.1",mocha:"11.7.5",moment:"2.30.1","mongodb-memory-server":"11.0.1","mongodb-runner":"^6.0.0","mongodb-client-encryption":"~7.0",ncp:"^2.0.0",nyc:"15.1.0",pug:"3.0.3",sinon:"21.0.1",tsd:"0.33.0",typescript:"5.9.3","typescript-eslint":"^8.31.1",uuid:"11.1.0"},directories:{lib:"./lib/mongoose"},scripts:{"docs:clean":"npm run docs:clean:stable","docs:clean:stable":"rimraf index.html && rimraf -rf ./docs/*.html  && rimraf -rf ./docs/api && rimraf -rf ./docs/tutorials/*.html && rimraf -rf ./docs/typescript/*.html && rimraf -rf ./docs/*.html && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:5x":"rimraf index.html && rimraf -rf ./docs/5.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:6x":"rimraf index.html && rimraf -rf ./docs/6.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:copy:tmp":"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/","docs:copy:tmp:5x":"rimraf ./docs/5.x && ncp ./tmp ./docs/5.x","docs:copy:tmp:6x":"rimraf ./docs/6.x && ncp ./tmp ./docs/6.x","docs:generate":"node ./scripts/website.js","docs:generate:sponsorData":"node ./scripts/loadSponsorData.js","docs:test":"npm run docs:generate","docs:view":"node ./scripts/static.js","docs:prepare:publish:stable":"git checkout gh-pages && git merge master && npm run docs:generate","docs:prepare:publish:5x":"git checkout 5.x && git merge 5.x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && git checkout gh-pages && npm run docs:copy:tmp:5x","docs:prepare:publish:6x":"git checkout 6.x && git merge 6.x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && mv ./docs/6.x ./tmp && git checkout gh-pages && npm run docs:copy:tmp:6x","docs:prepare:publish:7x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/7.x && mv ./tmp ./docs/7.x","docs:prepare:publish:8x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/8.x && mv ./tmp ./docs/8.x","docs:check-links":"blc http://127.0.0.1:8089 -ro",lint:"eslint .","lint-js":"eslint . --ext .js --ext .cjs","lint-ts":"eslint . --ext .ts","lint-md":'markdownlint-cli2 "**/*.md" "#node_modules" "#benchmarks"',release:"git pull && git push origin master --tags && npm publish","release-5x":"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x","release-6x":"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag 6x",mongo:"node ./tools/repl.js","publish-7x":"npm publish --tag 7x","create-separate-require-instance":"rm -rf ./node_modules/mongoose-separate-require-instance && node ./scripts/create-tarball && tar -xzf mongoose.tgz -C ./node_modules && mv ./node_modules/package ./node_modules/mongoose-separate-require-instance",test:"mocha --exit ./test/*.test.js","test:ci":"npm run test -- --reporter min","test-deno":"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.mjs","test-deno:ci":"npm run test-deno -- --reporter min","test-rs":"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js","test-rs:ci":"npm run test-rs -- --reporter min","test-tsd":"node ./test/types/check-types-filename && tsd --full","setup-test-encryption":"node scripts/setup-encryption-tests.js","test-encryption":"mocha --exit ./test/encryption/*.test.js","test-encryption:ci":"npm run test-encryption -- --reporter min",tdd:"mocha --watch --inspect --recursive ./test/*.test.js --watch-files lib/**/*.js test/**/*.js","test-coverage":"nyc --reporter=html --reporter=text npm test","test-coverage:ci":"nyc --reporter=html --reporter=text npm run test:ci","ts-benchmark":"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check","ts-benchmark:local":"node ./scripts/create-tarball && cd ./benchmarks/typescript/simple && rm -rf ./node_modules && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check","attest-benchmark":"node ./benchmarks/typescript/infer.bench.mts"},main:"./index.js",types:"./types/index.d.ts",engines:{node:">=20.19.0"},bugs:{url:"https://github.com/Automattic/mongoose/issues/new"},repository:{type:"git",url:"git://github.com/Automattic/mongoose.git"},homepage:"https://mongoosejs.com",config:{mongodbMemoryServer:{disablePostinstall:!0}},funding:{type:"opencollective",url:"https://opencollective.com/mongoose"},tsd:{directory:"test/types",compilerOptions:{esModuleInterop:!1,strict:!0,allowSyntheticDefaultImports:!0,strictPropertyInitialization:!1,noImplicitAny:!1,strictNullChecks:!0,module:"commonjs",target:"ES2022"}}}});var rw1=O((P06,nw1)=>{var DU0=W4(),GU0=T7();function zU0($,F){let A=F?F:{},J=A.readPreference?A.readPreference:KU0($),X=DU0(A);return J&&J!=="primary"&&J!=="primaryPreferred"?HU0(J,X):X}function HU0($,F){if(UU0(F)&&QU0($))wU0();else return BU0(F)}function UU0($){let F=$.config?.autoIndex,{autoCreate:A,autoIndex:J}=$;return!!(F||A||J)}function QU0($){return $==="secondary"||$==="secondaryPreferred"}function KU0($){let A=/(?:&|\?)readPreference=(\w+)(?:&|$)/.exec($);return A?A[1]:null}function BU0($){return $.config={autoIndex:!1},$.autoCreate=!1,$.autoIndex=!1,$}function wU0(){throw new GU0('MongoDB prohibits index creation on connections that read from non-primary replicas.  Connections that set "readPreference" to "secondary" or "secondaryPreferred" may not opt-in to the following connection options: autoCreate, autoIndex')}nw1.exports=zU0});var aw1=O((qU0)=>{qU0.setTimeout=setTimeout});var ew1=O((I06,ow1)=>{/*!
 * Module dependencies.
 */var tw1=$h(),jZ=T7(),x3=jK(),sw1=iA(),EU0=Fh(),VU0=rw1(),NU0=aw1().setTimeout,Kw=Z0(),CU0=VZ();function I$(){tw1.apply(this,arguments),this._listening=!1,this._lastHeartbeatAt=null}I$.STATES=x3;/*!
 * Inherits from Connection.
 */Object.setPrototypeOf(I$.prototype,tw1.prototype);I$.prototype.useDb=function($,F){if(F=F||{},F.useCache&&this.relatedDbs[$])return this.relatedDbs[$];let A=new this.constructor;A.name=$,A.base=this.base,A.collections={},A.models={},A.replica=this.replica,A.config=Object.assign({},this.config,A.config),A.name=this.name,A.options=this.options,A._readyState=this._readyState,A._closeCalled=this._closeCalled,A._hasOpened=this._hasOpened,A._listening=!1,A._parent=this,A.host=this.host,A.port=this.port,A.user=this.user,A.pass=this.pass;let J=this;if(A.client=J.client,this.db&&this._readyState===x3.connected)X();else this._queue.push({fn:X});function X(){A.client=J.client,A.db=J.client.db($),A._lastHeartbeatAt=J._lastHeartbeatAt,A.onOpen()}if(A.name=$,this.otherDbs.push(A),A.otherDbs.push(this),F?.useCache)this.relatedDbs[A.name]=A,A.relatedDbs=this.relatedDbs;return A};I$.prototype.aggregate=function(F,A){return new this.base.Aggregate(null,this).append(F).option(A??{})};I$.prototype.removeDb=function(F){let A=this.otherDbs.filter((J)=>J.name===F);if(!A.length)throw new jZ(`No connections to database "${F}" found`);for(let J of A)J._closeCalled=!0,J._destroyCalled=!0,J._readyState=x3.disconnected,J.$wasForceClosed=!0;delete this.relatedDbs[F],this.otherDbs=this.otherDbs.filter((J)=>J.name!==F)};I$.prototype.doClose=async function(F){if(this.client==null)return this;let A=!1;if(F!=null&&typeof F==="object")A=F.skipCloseClient,F=F.force;if(A)return this;return await this.client.close(F),await new Promise((J)=>NU0(J,1)),this};I$.prototype.listDatabases=async function(){return await this._waitForConnect(),await this.db.admin().listDatabases()};/*!
 * ignore
 */I$.prototype.createClient=async function(F,A){if(typeof F!=="string")throw new jZ(`The \`uri\` parameter to \`openUri()\` must be a string, got "${typeof F}". Make sure the first parameter to \`mongoose.connect()\` or \`mongoose.createConnection()\` is a string.`);if(this._destroyCalled)throw new jZ("Connection has been closed and destroyed, and cannot be used for re-opening the connection. Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.");if(this.readyState===x3.connecting||this.readyState===x3.connected){if(this._connectionString!==F)throw new jZ("Can't call `openUri()` on an active connection with different connection strings. Make sure you aren't calling `mongoose.connect()` multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connections")}if(A=VU0(F,A),A){let Z=A.config?.autoIndex??A.autoIndex;if(Z!=null)this.config.autoIndex=Z!==!1,delete A.config,delete A.autoIndex;if("autoCreate"in A)this.config.autoCreate=!!A.autoCreate,delete A.autoCreate;if("sanitizeFilter"in A)this.config.sanitizeFilter=A.sanitizeFilter,delete A.sanitizeFilter;if("autoSearchIndex"in A)this.config.autoSearchIndex=A.autoSearchIndex,delete A.autoSearchIndex;if("bufferTimeoutMS"in A)this.config.bufferTimeoutMS=A.bufferTimeoutMS,delete A.bufferTimeoutMS;if(A.user||A.pass)A.auth=A.auth||{},A.auth.username=A.user,A.auth.password=A.pass,this.user=A.user,this.pass=A.pass;if(delete A.user,delete A.pass,A.bufferCommands!=null)this.config.bufferCommands=A.bufferCommands,delete A.bufferCommands}else A={};this._connectionOptions=A;let J=A.dbName;if(J!=null)this.$dbName=J;if(delete A.dbName,!Kw.hasUserDefinedProperty(A,"driverInfo"))A.driverInfo={name:"Mongoose",version:EU0.version};let{schemaMap:X,encryptedFieldsMap:Y}=this._buildEncryptionSchemas();if((Kw.hasOwnKeys(X)||Kw.hasOwnKeys(Y))&&!A.autoEncryption)throw Error("Must provide `autoEncryption` when connecting with encrypted schemas.");if(Kw.hasOwnKeys(X))A.autoEncryption.schemaMap=X;if(Kw.hasOwnKeys(Y))A.autoEncryption.encryptedFieldsMap=Y;this.readyState=x3.connecting,this._connectionString=F;let W;try{W=new sw1.MongoClient(F,A)}catch(Z){throw this.readyState=x3.disconnected,Z}this.client=W,W.setMaxListeners(0),await W.connect(),Ah(this,W,A,J);for(let Z of this.otherDbs)Ah(Z,W,{},Z.name);return this};I$.prototype._buildEncryptionSchemas=function(){let $={},F={},A=Object.values(this.models).filter((Y)=>Y.schema._hasEncryptedFields());for(let Y of A){let{schema:W,collection:{collectionName:Z}}=Y,D=`${this.$dbName}.${Z}`,G=W.encryptionType()==="csfle"?F:$;if(G[D]??=new CU0({},{encryptionType:W.encryptionType()}),W.discriminatorMapping&&!W.discriminatorMapping.isRoot){let H=W._baseSchema;W.eachPath((U)=>{if(H.path(U))return;if(!G[D]._hasEncryptedField(U))return;throw Error(`Cannot have duplicate keys in discriminators with encryption. key=${U}`)})}G[D].add(W)}let J=Object.fromEntries(Object.entries(F).map(([Y,W])=>[Y,W._buildSchemaMap()])),X=Object.fromEntries(Object.entries($).map(([Y,W])=>[Y,W._buildEncryptedFields()]));return{schemaMap:J,encryptedFieldsMap:X}};/*!
 * ignore
 */I$.prototype.setClient=function(F){if(!(F instanceof sw1.MongoClient))throw new jZ("Must call `setClient()` with an instance of MongoClient");if(this.readyState!==x3.disconnected)throw new jZ("Cannot call `setClient()` on a connection that is already connected.");if(F.topology==null)throw new jZ("Cannot call `setClient()` with a MongoClient that you have not called `connect()` on yet.");this._connectionString=F.s.url,Ah(this,F,{},F.s.options.dbName);for(let A of Object.values(this.models))A.init().catch(function(){});return this};/*!
 * ignore
 */function Ah($,F,A,J){let X=J!=null?F.db(J):F.db();$.db=X,$.client=F,$.host=F?.s?.options?.hosts?.[0]?.host,$.port=F?.s?.options?.hosts?.[0]?.port,$.name=J!=null?J:X.databaseName,$._closeCalled=F._closeCalled;let Y=()=>{if($.readyState!==x3.connected)$.readyState=x3.connected,$.emit("reconnect"),$.emit("reconnected"),$.onOpen()},W=F?.topology?.description?.type||"";if(W==="Single")F.on("serverDescriptionChanged",(Z)=>{if(Z.newDescription.type==="Unknown")$.readyState=x3.disconnected;else Y()});else if(W.startsWith("ReplicaSet"))F.on("topologyDescriptionChanged",(Z)=>{let D=Z.newDescription;if($.readyState===x3.connected&&D.type!=="ReplicaSetWithPrimary")$.readyState=x3.disconnected;else if($.readyState===x3.disconnected&&D.type==="ReplicaSetWithPrimary")Y()});if($._lastHeartbeatAt=null,F.on("serverHeartbeatSucceeded",()=>{$._lastHeartbeatAt=Date.now();for(let Z of $.otherDbs)Z._lastHeartbeatAt=$._lastHeartbeatAt}),A.monitorCommands)F.on("commandStarted",(Z)=>$.emit("commandStarted",Z)),F.on("commandFailed",(Z)=>$.emit("commandFailed",Z)),F.on("commandSucceeded",(Z)=>$.emit("commandSucceeded",Z));$.onOpen();for(let Z in $.collections)if(Object.hasOwn($.collections,Z))$.collections[Z].onOpen()}/*!
 * Module exports.
 */ow1.exports=I$});var $q1=O((MU0)=>{/*!
 * Module exports.
 */MU0.BulkWriteResult=F81();MU0.Collection=AG1();MU0.Connection=ew1();MU0.ClientEncryption=iA().ClientEncryption});var Aq1=O((j06,Fq1)=>{/*!
 * Valid mongoose options
 */var jU0=Object.freeze(["allowDiskUse","applyPluginsToChildSchemas","applyPluginsToDiscriminators","autoCreate","autoIndex","autoSearchIndex","bufferCommands","bufferTimeoutMS","cloneSchemas","createInitialConnection","debug","forceRepopulate","id","maxTimeMS","objectIdGetter","overwriteModels","returnOriginal","runValidators","sanitizeFilter","sanitizeProjection","selectPopulatedPaths","setDefaultsOnInsert","strict","strictPopulate","strictQuery","timestamps.createdAt.immutable","toJSON","toObject","transactionAsyncLocalStorage","translateAliases","updatePipeline"]);Fq1.exports=jU0});var Xq1=O((O06,Jq1)=>{/*!
 * Module dependencies.
 */var OU0=v0();class Jh extends OU0{constructor($){let F=$.map((A)=>A.message).join(", ");if(F.length>50)F=F.slice(0,50)+"...";super(`eachAsync() finished with ${$.length} errors: ${F}`);this.errors=$}}Object.defineProperty(Jh.prototype,"name",{value:"EachAsyncMultiError"});/*!
 * exports
 */Jq1.exports=Jh});var Yh=O((S06,Wq1)=>{/*!
 * Module dependencies.
 */var SU0=Xq1(),Xh=TX();Wq1.exports=async function(F,A,J){let X=J.parallel||1,Y=J.batchSize,W=J.signal,Z=J.continueOnError,D=[],G=_U0(),z=!1;return new Promise((Q,B)=>{if(W!=null){if(W.aborted)return Q(null);W.addEventListener("abort",()=>{return z=!0,Q(null)},{once:!0})}if(Y!=null){if(typeof Y!=="number")throw TypeError("batchSize must be a number");else if(!Number.isInteger(Y))throw TypeError("batchSize must be an integer");else if(Y<1)throw TypeError("batchSize must be at least 1")}H((q,L)=>{if(q!=null)return B(q);Q(L)})});function H(Q){let B=0,q=0,L=null;for(let V=0;V<X;++V)G(E());function E(){let V=[],R=!1;return N;function N(S){if(R||z)return S();else if(L)return S();F(function(C,M){if(L!=null)return S();if(C!=null)if(C.name==="MongoCursorExhaustedError")M=null;else if(Z)D.push(C);else return L=C,Q(C),S();if(M==null){if(R=!0,B<=0){let j=Z?Yq1(D):L;Q(j)}else if(Y&&V.length)U(V,q++,T);return S()}if(++B,Xh(()=>S()),Y)V.push(M);if(Y&&V.length!==Y){Xh(()=>G(N));return}let I=Y?V:M;function T(j){if(Y)B-=V.length,V=[];else--B;if(j!=null)if(Z)D.push(j);else return L=j,Q(j);if((R||z)&&B<=0){let b=Z?Yq1(D):L;return Q(b)}Xh(()=>G(N))}U(I,q++,T)})}}}function U(Q,B,q){let L;try{L=A(Q,B)}catch(E){return q(E)}if(typeof L?.then==="function")L.then(function(){q(null)},function(E){q(E||Error("`eachAsync()` promise rejected without error"))});else q(null)}};function _U0(){let $=[],F=null,A=0;return function(Y){if(F===null&&$.length===0)return F=A++,Y(J);$.push(Y)};function J(){if($.length!==0)F=A++,$.shift()(J);else F=null}}function Yq1($){if($.length===0)return null;return new SU0($)}});var Kq1=O((_06,Qq1)=>{/*!
 * Module dependencies.
 */var Bw=v0(),Gq1=Z1("stream").Readable,kU0=Yh(),zq1=vB(),bU0=QZ(),Wh=TX(),{once:xU0}=Z1("events"),Hq1=Z1("util");function g3($){Gq1.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.skipped=!1,this.query=$,this._closed=!1;let F=$.model;this._mongooseOptions={},this._transforms=[],this.model=F,this.options={};let A=(J)=>{if(J!=null){if(J instanceof bU0.skipWrappedFunction){let X=J.args[0];if(X!=null&&(!Array.isArray(X)||X.length)){let Y=new Bw('Cannot `skipMiddlewareFunction()` with a value when using `.find().cursor()`, value must be nullish or empty array, got "'+Hq1.inspect(X)+'".');this._markError(Y),this.listeners("error").length>0&&this.emit("error",Y);return}this.skipped=!0,this.emit("cursor",null);return}this._markError(J),this.listeners("error").length>0&&this.emit("error",J);return}if(Object.assign(this.options,$._optionsForExec()),this._transforms=this._transforms.concat($._transforms.slice()),this.options.transform)this._transforms.push(this.options.transform);if(this.options.batchSize)this.options._populateBatchSize=Math.min(this.options.batchSize,5000);if($._mongooseOptions._asyncIterator)this._mongooseOptions._asyncIterator=!0;if(F.collection._shouldBufferCommands()&&F.collection.buffer)F.collection.queue.push([()=>Zq1($,this)]);else Zq1($,this)};F.hooks.execPre("find",$).then(()=>A(null),(J)=>A(J))}Hq1.inherits(g3,Gq1);/*!
 * ignore
 */function Zq1($,F){try{let A=$.model.collection.find($._conditions,F.options);F.cursor=A,F.emit("cursor",A)}catch(A){F._markError(A),F.listeners("error").length>0&&F.emit("error",F._error)}}g3.prototype._read=function(){HP(this,($,F)=>{if($)return this.emit("error",$);if(!F){this.push(null),this.cursor.close(function(A){if(A)return this.emit("error",A)});return}this.push(F)})};g3.prototype.getDriverCursor=async function(){if(this.cursor)return this.cursor;return await xU0(this,"cursor"),this.cursor};Object.defineProperty(g3.prototype,"map",{value:function($){return this._transforms.push($),this},enumerable:!0,configurable:!0,writable:!0});g3.prototype._markError=function($){return this._error=$,this};g3.prototype.close=async function(){if(typeof arguments[0]==="function")throw new Bw("QueryCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close(),this._closed=!0,this.emit("close")}catch(F){throw this.listeners("error").length>0&&this.emit("error",F),F}};g3.prototype._destroy=function(F,A){let J=null;if(!this.cursor)J=new Promise((X)=>{this.once("cursor",X)});else J=Promise.resolve();return J.then(()=>{this.cursor.close()}).then(()=>{this._closed=!0,A()}).catch((X)=>{A(X)}),this};g3.prototype.rewind=function(){return Uq1(this,()=>{this.cursor.rewind()}),this};g3.prototype.next=async function(){if(typeof arguments[0]==="function")throw new Bw("QueryCursor.prototype.next() no longer accepts a callback");if(this._closed)throw new Bw("Cannot call `next()` on a closed cursor");return new Promise((F,A)=>{HP(this,function(J,X){if(J)return A(J);F(X)})})};g3.prototype.eachAsync=function($,F){if(typeof arguments[2]==="function")throw new Bw("QueryCursor.prototype.eachAsync() no longer accepts a callback");if(typeof F==="function")F={};return F=F||{},kU0((A)=>HP(this,A),$,F)};g3.prototype.options;g3.prototype.addCursorFlag=function($,F){return Uq1(this,()=>{this.cursor.addCursorFlag($,F)}),this};if(Symbol.asyncIterator!=null)g3.prototype[Symbol.asyncIterator]=function(){return this._mongooseOptions._asyncIterator=!0,this};function HP($,F){let A=F;if(A=function(J,X){if(J)return F(J);if(X===null)if($._mongooseOptions._asyncIterator)return F(null,{done:!0});else return F(null,null);if($._transforms.length&&X!==null)X=$._transforms.reduce(function(Y,W){return W.call($,Y)},X);if($._mongooseOptions._asyncIterator)return F(null,{value:X,done:!1});return F(null,X)},$._error)return Wh(function(){A($._error)});if($.skipped)return Wh(()=>A(null,null));if($.cursor){if($.query._mongooseOptions.populate&&!$._pop)$._pop=zq1.preparePopulationOptionsMQ($.query,$.query._mongooseOptions),$._pop.__noPromise=!0;if($.query._mongooseOptions.populate&&$.options._populateBatchSize>1)if($._batchDocs&&$._batchDocs.length)return GP($,$._batchDocs.shift(),$._pop,A);else if($._batchExhausted)return A(null,null);else{$._batchDocs=[],$.cursor.next().then((J)=>{zP.call({ctx:$,callback:A},null,J)},(J)=>{zP.call({ctx:$,callback:A},J)});return}else return $.cursor.next().then((J)=>{if(!J){A(null,null);return}if(!$.query._mongooseOptions.populate)return GP($,J,null,A);GP($,J,$._pop,(X,Y)=>{if(X!=null)return A(X);$.query.model.populate(Y,$._pop).then((W)=>A(null,W),(W)=>A(W))})},(J)=>{A(J)})}else $.once("error",F),$.once("cursor",function(J){if($.removeListener("error",F),J==null){if($.skipped)return F(null,null);return}HP($,F)})}/*!
 * ignore
 */function zP($,F){if($)return this.callback($);if(!F)return this.ctx._batchExhausted=!0,Dq1.call(this);if(this.ctx._batchDocs.push(F),this.ctx._batchDocs.length<this.ctx.options._populateBatchSize)Wh(()=>this.ctx.cursor.next().then((A)=>{zP.call(this,null,A)},(A)=>{zP.call(this,A)}));else Dq1.call(this)}/*!
 * ignore
 */function Dq1(){if(!this.ctx._batchDocs.length)return this.callback(null,null);this.ctx.query.model.populate(this.ctx._batchDocs,this.ctx._pop).then(()=>{GP(this.ctx,this.ctx._batchDocs.shift(),this.ctx._pop,this.callback)},($)=>{this.callback($)})}/*!
 * ignore
 */function GP($,F,A,J){if($.query._mongooseOptions.lean)return $.model.hooks.execPost("find",$.query,[[F]]).then(()=>J(null,F),(D)=>J(D));let{model:X,_fields:Y,_userProvidedFields:W,options:Z}=$.query;zq1.createModelAndInit(X,F,Y,W,Z,A,(D,G)=>{if(D!=null)return J(D);if(Z.session!=null)G.$session(Z.session);$.model.hooks.execPost("find",$.query,[[G]]).then(()=>J(null,G),(z)=>J(z))})}/*!
 * ignore
 */function Uq1($,F){if($.cursor)return F();$.once("cursor",function(A){if(A==null)return;F()})}Qq1.exports=g3});var Dh=O((k06,wq1)=>{var Zh=Z0();function gU0($,F,A){Bq1($,F,A,"maxTimeMS")}function fU0($,F,A){Bq1($,F,A,"allowDiskUse")}wq1.exports={applyGlobalMaxTimeMS:gU0,applyGlobalDiskUse:fU0};function Bq1($,F,A,J){if(Zh.hasUserDefinedProperty($,J))return;if(Zh.hasUserDefinedProperty(F,J))$[J]=F[J];else if(Zh.hasUserDefinedProperty(A,J))$[J]=A[J]}});var Gh=O((b06,qq1)=>{qq1.exports=function(F,A){if(A.readConcern!==void 0)return;if(A?.session?.transaction)return;let J=F.options?.readConcern?.level;if(J!=null)A.readConcern={level:J}}});var zh=O((x06,Lq1)=>{var vU0=Z0();Lq1.exports=function(F,A){if(A.writeConcern!=null)return;if(A?.session?.transaction)return;let J=F.options.writeConcern??{};if(vU0.hasOwnKeys(J)){if(A.writeConcern={},!("w"in A)&&J.w!=null)A.writeConcern.w=J.w;if(!("j"in A)&&J.j!=null)A.writeConcern.j=J.j;if(!("wtimeout"in A)&&J.wtimeout!=null)A.writeConcern.wtimeout=J.wtimeout}else{if(!("w"in A)&&J.w!=null)A.w=J.w;if(!("j"in A)&&J.j!=null)A.j=J.j;if(!("wtimeout"in A)&&J.wtimeout!=null)A.wtimeout=J.wtimeout}}});var Nq1=O((g06,Vq1)=>{var Eq1=tB();Vq1.exports=function(F,A,J){if(!Object.keys(J).some(Eq1))return A.castForQuery(null,J,F);let Y=Object.keys(J),W=Y.length;while(W--){let Z=Y[W],D=J[Z];if(Z==="$not"){if(D&&A&&!A.embeddedSchemaType&&!A.Constructor){let G=Object.keys(D);if(G.length&&Eq1(G[0]))for(let z of Object.keys(D))D[z]=A.castForQuery(z,D[z],F);else J[Z]=A.castForQuery(Z,D,F);continue}}else J[Z]=A.castForQuery(Z,D,F)}return J}});var Mq1=O((f06,Cq1)=>{var yU0=/^\d+$/;Cq1.exports=function(F,A,J){let X=F.path(A);if(X!=null)return X;let Y=A.split("."),W="",Z=!1;for(let D of Y){if(Z&&yU0.test(D))continue;if(W=W.length===0?D:W+"."+D,X=F.path(W),X?.schema){if(F=X.schema,!Z&&X.$isMongooseDocumentArray)Z=!0;if(J&&J[W])F=F.discriminators[J[W]]??F;W=""}else if(X?.instance==="Mixed")break}return X}});var jq1=O((v06,Tq1)=>{var uU0=Nq1(),Pq1=pB(),Rq1=Mq1(),hU0=yu(),mU0=Z0();Tq1.exports=function(F){let A=F.options.arrayFilters;if(!Array.isArray(A))return;let J=F.getUpdate(),X=F.schema,Y=hU0(J),W=X.options.strict;if(F._mongooseOptions.strict!=null)W=F._mongooseOptions.strict;if(F.model?.base.options.strictQuery!=null)W=F.model.base.options.strictQuery;if(X._userProvidedOptions.strictQuery!=null)W=X._userProvidedOptions.strictQuery;if(F._mongooseOptions.strictQuery!=null)W=F._mongooseOptions.strictQuery;Iq1(A,X,W,Y,F)};function Iq1($,F,A,J,X){let Y={};for(let W of $){if(W==null)throw Error(`Got null array filter in ${$}`);let Z=Object.keys(W).filter((B)=>W[B]!=null);if(Z.length===0)continue;let D=Z[0];if(D==="$and"||D==="$or"){for(let B of Z)Iq1(W[B],F,A,J,X);continue}let G=D.indexOf("."),z=G===-1?D:D.substring(0,G);if(J[z]==null)continue;let H=Pq1(J[z]),U=Rq1(F,H,Y),Q=U!=null?U.schema:null;if(Q?.discriminators!=null&&W[z+"."+Q.options.discriminatorKey])Q=Q.discriminators[W[z+"."+Q.options.discriminatorKey]]||Q,Y[H]=W[z+"."+Q.options.discriminatorKey];for(let B of Z){if(J[B]===null)continue;if(mU0.hasOwnKeys(J)===!1)continue;let q=B.indexOf("."),L=q===-1?null:B.substring(q),E;if(L==null||Q==null)E=U;else L=Pq1(L),E=Rq1(Q,L,Y);if(E==null){if(!A)return;let V=L==null?H+".0":H+".0"+L;throw Error(`Could not find path "${V}" in schema`)}if(typeof W[B]==="object")W[B]=uU0(X,E,W[B]);else W[B]=E.castForQuery(null,W[B])}}}});var UP=O((y06,Oq1)=>{var dU0=Tz(),cU0=Nz();/*!
 * ignore
 */Oq1.exports=function $(F){if(F==null)return!1;let A=Object.keys(F),J=A.length;if(J===0)return!1;for(let X=0;X<J;++X){let Y=A[X];if(Y.startsWith("+"))continue;if(dU0(F[Y])&&!!F[Y])if(cU0(F[Y]))return $(F[Y]);else return!!F[Y]}return!1}});var _q1=O((u06,Sq1)=>{Sq1.exports=function(F,A){return F===A||A.startsWith(F+".")}});var gq1=O((nU0)=>{/*!
 * Module dependencies.
 */var Hh=["__proto__","constructor","prototype"],QP=nU0.clone=function $(F,A){if(F===void 0||F===null)return F;if(Array.isArray(F))return nU0.cloneArray(F,A);if(F.constructor){if(/ObjectI[dD]$/.test(F.constructor.name))return typeof F.clone=="function"?F.clone():new F.constructor(F.id);if(F.constructor.name==="ReadPreference")return new F.constructor(F.mode,$(F.tags,A));if(F._bsontype=="Binary"&&F.buffer&&F.value)return typeof F.clone=="function"?F.clone():new F.constructor(F.value(!0),F.sub_type);if(F.constructor.name==="Date"||F.constructor.name==="Function")return new F.constructor(+F);if(F.constructor.name==="RegExp")return new RegExp(F);if(F.constructor.name==="Buffer")return Buffer.from(F)}if(pU0(F))return nU0.cloneObject(F,A);if(F.valueOf)return F.valueOf()};/*!
 * ignore
 */nU0.cloneObject=function(F,A){let J=A&&A.minimize,X={},Y=Object.keys(F),W=Y.length,Z=!1,D,G="",z=0;for(z=0;z<W;++z){if(G=Y[z],Hh.indexOf(G)!==-1)continue;if(D=QP(F[G],A),!J||typeof D<"u")Z||(Z=!0),X[G]=D}return J?Z&&X:X};nU0.cloneArray=function(F,A){let J=[],X=F.length,Y=0;for(;Y<X;Y++)J.push(QP(F[Y],A));return J};nU0.merge=function $(F,A){let J=Object.keys(A);for(let X of J){if(Hh.indexOf(X)!==-1)continue;if(typeof F[X]>"u")F[X]=A[X];else if(nU0.isObject(A[X]))$(F[X],A[X]);else F[X]=A[X]}};nU0.mergeClone=function $(F,A){let J=Object.keys(A);for(let X of J){if(Hh.indexOf(X)!==-1)continue;if(typeof F[X]>"u")F[X]=QP(A[X]);else if(nU0.isObject(A[X]))$(F[X],A[X]);else F[X]=QP(A[X])}};nU0.readPref=function(F){switch(F){case"p":F="primary";break;case"pp":F="primaryPreferred";break;case"s":F="secondary";break;case"sp":F="secondaryPreferred";break;case"n":F="nearest";break}return F};nU0.readConcern=function(F){if(typeof F==="string"){switch(F){case"l":F="local";break;case"a":F="available";break;case"m":F="majority";break;case"lz":F="linearizable";break;case"s":F="snapshot";break}F={level:F}}return F};var lU0=Object.prototype.toString;nU0.toString=function($){return lU0.call($)};var pU0=nU0.isObject=function($){return nU0.toString($)=="[object Object]"};nU0.keys=Object.keys;nU0.create=typeof Object.create=="function"?Object.create:iU0;function iU0($){if(arguments.length>1)throw Error("Adding properties is not supported");function F(){}return F.prototype=$,new F}nU0.inherits=function($,F){$.prototype=nU0.create(F.prototype),$.prototype.constructor=$};nU0.isArgumentsObject=function($){return Object.prototype.toString.call($)==="[object Arguments]"}});var vq1=O((fq1)=>{var r2=fq1;r2.distinct=function($){if($._fields&&Object.keys($._fields).length>0)return"field selection and slice";let F=Object.keys(r2.distinct),A;return F.every(function(J){if($.options[J])return A=J,!1;return!0}),A};r2.distinct.select=r2.distinct.slice=r2.distinct.sort=r2.distinct.limit=r2.distinct.skip=r2.distinct.batchSize=r2.distinct.hint=r2.distinct.tailable=!0;r2.findOneAndUpdate=r2.findOneAndDelete=function($){let F=Object.keys(r2.findOneAndUpdate),A;return F.every(function(J){if($.options[J])return A=J,!1;return!0}),A};r2.findOneAndUpdate.limit=r2.findOneAndUpdate.skip=r2.findOneAndUpdate.batchSize=r2.findOneAndUpdate.tailable=!0;r2.findOneAndReplace=function($){let F=Object.keys(r2.findOneAndUpdate),A;return F.every(function(J){if($.options[J])return A=J,!1;return!0}),A};r2.countDocuments=function($){if($._fields&&Object.keys($._fields).length>0)return"field selection and slice";let F=Object.keys(r2.countDocuments),A;return F.every(function(J){if($.options[J])return A=J,!1;return!0}),A};r2.countDocuments.slice=r2.countDocuments.batchSize=r2.countDocuments.tailable=!0});var Qh=O((JQ0,yq1)=>{JQ0.isNode=typeof process<"u"&&typeof yq1=="object"&&typeof global=="object"&&typeof Buffer=="function"&&process.argv;JQ0.isMongo=!JQ0.isNode&&typeof printjson=="function"&&typeof ObjectId=="function"&&typeof rs=="function"&&typeof sh=="function";JQ0.isBrowser=!JQ0.isNode&&!JQ0.isMongo&&typeof window<"u";JQ0.type=JQ0.isNode?"node":JQ0.isMongo?"mongo":JQ0.isBrowser?"browser":"unknown"});var ww=O((hq1,mq1)=>{var Kh=["find","findOne","updateMany","updateOne","replaceOne","countDocuments","estimatedDocumentCount","distinct","findOneAndDelete","findOneAndReplace","findOneAndUpdate","aggregate","findCursor","deleteOne","deleteMany"];function Bh(){}for(let $=0,F=Kh.length;$<F;++$){let A=Kh[$];Bh.prototype[A]=YQ0(A)}mq1.exports=hq1=Bh;Bh.methods=Kh;function YQ0($){return function(){throw Error("collection."+$+" not implemented")}}});var pq1=O((cq1,lq1)=>{var WQ0=ww();class dq1 extends WQ0{constructor($){super();this.collection=$,this.collectionName=$.collectionName}async find($,F){return this.collection.find($,F).toArray()}async findOne($,F){return this.collection.findOne($,F)}async countDocuments($,F){return this.collection.countDocuments($,F)}async estimatedDocumentCount($,F){return this.collection.estimatedDocumentCount($,F)}async distinct($,F,A){return this.collection.distinct($,F,A)}async updateMany($,F,A){return this.collection.updateMany($,F,A)}async updateOne($,F,A){return this.collection.updateOne($,F,A)}async replaceOne($,F,A){return this.collection.replaceOne($,F,A)}async deleteOne($,F){return this.collection.deleteOne($,F)}async deleteMany($,F){return this.collection.deleteMany($,F)}async findOneAndDelete($,F){return this.collection.findOneAndDelete($,F)}async findOneAndUpdate($,F,A){return this.collection.findOneAndUpdate($,F,A)}async findOneAndReplace($,F,A){return this.collection.findOneAndReplace($,F,A)}findCursor($,F){return this.collection.find($,F)}}lq1.exports=cq1=dq1});var nq1=O((c06,iq1)=>{var wh=Qh();if(wh.type=="unknown")throw Error("Unknown environment");iq1.exports=wh.isNode?pq1():wh.isMongo?ww():ww()});var Vh=O((tq1,sq1)=>{var ZQ0=Z1("assert"),aq1=Z1("util"),N6=gq1(),KJ=aq1.debuglog("mquery");function V1($,F){if(!(this instanceof V1))return new V1($,F);let A=this.constructor.prototype;if(this.op=A.op||void 0,this.options=Object.assign({},A.options),this._conditions=A._conditions?N6.clone(A._conditions):{},this._fields=A._fields?N6.clone(A._fields):void 0,this._updateDoc=A._updateDoc?N6.clone(A._updateDoc):void 0,this._path=A._path||void 0,this._distinctDoc=A._distinctDoc||void 0,this._collection=A._collection||void 0,this._traceFunction=A._traceFunction||void 0,F)this.setOptions(F);if($)this.find($)}V1.prototype.toConstructor=function(){function F(J,X){if(!(this instanceof F))return new F(J,X);V1.call(this,J,X)}N6.inherits(F,V1);let A=F.prototype;return A.options={},A.setOptions(this.options),A.op=this.op,A._conditions=N6.clone(this._conditions),A._fields=N6.clone(this._fields),A._updateDoc=N6.clone(this._updateDoc),A._path=this._path,A._distinctDoc=this._distinctDoc,A._collection=this._collection,A._traceFunction=this._traceFunction,F};V1.prototype.setOptions=function($){if(!($&&N6.isObject($)))return this;let F=N6.keys($),A;for(let J=0;J<F.length;++J)if(A=F[J],typeof this[A]=="function"){let X=Array.isArray($[A])?$[A]:[$[A]];this[A].apply(this,X)}else this.options[A]=$[A];return this};V1.prototype.collection=function(F){return this._collection=new V1.Collection(F),this};V1.prototype.collation=function($){return this.options.collation=$,this};V1.prototype.$where=function($){return this._conditions.$where=$,this};V1.prototype.where=function(){if(!arguments.length)return this;if(!this.op)this.op="find";let $=typeof arguments[0];if($=="string"){if(this._path=arguments[0],arguments.length===2)this._conditions[this._path]=arguments[1];return this}if($=="object"&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw TypeError("path must be a string or object")};V1.prototype.equals=function(F){this._ensurePath("equals");let A=this._path;return this._conditions[A]=F,this};V1.prototype.eq=function(F){this._ensurePath("eq");let A=this._path;return this._conditions[A]=F,this};V1.prototype.or=function(F){let A=this._conditions.$or||(this._conditions.$or=[]);if(!Array.isArray(F))F=[F];return A.push.apply(A,F),this};V1.prototype.nor=function(F){let A=this._conditions.$nor||(this._conditions.$nor=[]);if(!Array.isArray(F))F=[F];return A.push.apply(A,F),this};V1.prototype.and=function(F){let A=this._conditions.$and||(this._conditions.$and=[]);if(!Array.isArray(F))F=[F];return A.push.apply(A,F),this};/*!
 * gt, gte, lt, lte, ne, in, nin, all, regex, size, maxDistance
 *
 *     Thing.where('type').nin(array)
 */"gt gte lt lte ne in nin all regex size maxDistance minDistance".split(" ").forEach(function($){V1.prototype[$]=function(){let F,A;if(arguments.length===1)this._ensurePath($),A=arguments[0],F=this._path;else A=arguments[1],F=arguments[0];let J=this._conditions[F]===null||typeof this._conditions[F]==="object"?this._conditions[F]:this._conditions[F]={};return J["$"+$]=A,this}});V1.prototype.mod=function(){let $,F;if(arguments.length===1)this._ensurePath("mod"),$=arguments[0],F=this._path;else if(arguments.length===2&&!Array.isArray(arguments[1]))this._ensurePath("mod"),$=[arguments[0],arguments[1]],F=this._path;else if(arguments.length===3)$=[arguments[1],arguments[2]],F=arguments[0];else $=arguments[1],F=arguments[0];let A=this._conditions[F]||(this._conditions[F]={});return A.$mod=$,this};V1.prototype.exists=function(){let $,F;if(arguments.length===0)this._ensurePath("exists"),$=this._path,F=!0;else if(arguments.length===1)if(typeof arguments[0]==="boolean")this._ensurePath("exists"),$=this._path,F=arguments[0];else $=arguments[0],F=!0;else if(arguments.length===2)$=arguments[0],F=arguments[1];let A=this._conditions[$]||(this._conditions[$]={});return A.$exists=F,this};V1.prototype.elemMatch=function(){if(arguments[0]==null)throw TypeError("Invalid argument");let $,F,A;if(typeof arguments[0]==="function")this._ensurePath("elemMatch"),F=this._path,$=arguments[0];else if(N6.isObject(arguments[0]))this._ensurePath("elemMatch"),F=this._path,A=arguments[0];else if(typeof arguments[1]==="function")F=arguments[0],$=arguments[1];else if(arguments[1]&&N6.isObject(arguments[1]))F=arguments[0],A=arguments[1];else throw TypeError("Invalid argument");if($)A=new V1,$(A),A=A._conditions;let J=this._conditions[F]||(this._conditions[F]={});return J.$elemMatch=A,this};V1.prototype.within=function(){if(this._ensurePath("within"),this._geoComparison="$geoWithin",arguments.length===0)return this;if(arguments.length===2)return this.box.apply(this,arguments);else if(2<arguments.length)return this.polygon.apply(this,arguments);let F=arguments[0];if(!F)throw TypeError("Invalid argument");if(F.center)return this.circle(F);if(F.box)return this.box.apply(this,F.box);if(F.polygon)return this.polygon.apply(this,F.polygon);if(F.type&&F.coordinates)return this.geometry(F);throw TypeError("Invalid argument")};V1.prototype.box=function(){let $,F;if(arguments.length===3)$=arguments[0],F=[arguments[1],arguments[2]];else if(arguments.length===2)this._ensurePath("box"),$=this._path,F=[arguments[0],arguments[1]];else throw TypeError("Invalid argument");let A=this._conditions[$]||(this._conditions[$]={});return A[this._geoComparison||"$geoWithin"]={$box:F},this};V1.prototype.polygon=function(){let $,F;if(typeof arguments[0]=="string")$=Array.from(arguments),F=$.shift();else this._ensurePath("polygon"),F=this._path,$=Array.from(arguments);let A=this._conditions[F]||(this._conditions[F]={});return A[this._geoComparison||"$geoWithin"]={$polygon:$},this};V1.prototype.circle=function(){let $,F;if(arguments.length===1)this._ensurePath("circle"),$=this._path,F=arguments[0];else if(arguments.length===2)$=arguments[0],F=arguments[1];else throw TypeError("Invalid argument");if(!(("radius"in F)&&F.center))throw Error("center and radius are required");let A=this._conditions[$]||(this._conditions[$]={}),J=F.spherical?"$centerSphere":"$center",X=this._geoComparison||"$geoWithin";if(A[X]={},A[X][J]=[F.center,F.radius],"unique"in F)A[X].$uniqueDocs=!!F.unique;return this};V1.prototype.near=function(){let F,A;if(this._geoComparison="$near",arguments.length===0)return this;else if(arguments.length===1)this._ensurePath("near"),F=this._path,A=arguments[0];else if(arguments.length===2)F=arguments[0],A=arguments[1];else throw TypeError("Invalid argument");if(!A.center)throw Error("center is required");let J=this._conditions[F]||(this._conditions[F]={}),X=A.spherical?"$nearSphere":"$near";if(Array.isArray(A.center)){J[X]=A.center;let Y="maxDistance"in A?A.maxDistance:null;if(Y!=null)J.$maxDistance=Y;if(A.minDistance!=null)J.$minDistance=A.minDistance}else{if(A.center.type!="Point"||!Array.isArray(A.center.coordinates))throw Error(aq1.format("Invalid GeoJSON specified for %s",X));if(J[X]={$geometry:A.center},"maxDistance"in A)J[X].$maxDistance=A.maxDistance;if("minDistance"in A)J[X].$minDistance=A.minDistance}return this};V1.prototype.intersects=function(){if(this._ensurePath("intersects"),this._geoComparison="$geoIntersects",arguments.length===0)return this;let F=arguments[0];if(F!=null&&F.type&&F.coordinates)return this.geometry(F);throw TypeError("Invalid argument")};V1.prototype.geometry=function(){if(!(this._geoComparison=="$within"||this._geoComparison=="$geoWithin"||this._geoComparison=="$near"||this._geoComparison=="$geoIntersects"))throw Error("geometry() must come after `within()`, `intersects()`, or `near()");let F,A;if(arguments.length===1)this._ensurePath("geometry"),A=this._path,F=arguments[0];else throw TypeError("Invalid argument");if(!(F.type&&Array.isArray(F.coordinates)))throw TypeError("Invalid argument");let J=this._conditions[A]||(this._conditions[A]={});return J[this._geoComparison]={$geometry:F},this};V1.prototype.select=function(){let F=arguments[0];if(!F)return this;if(arguments.length!==1)throw Error("Invalid select: select only takes 1 argument");this._validate("select");let A=this._fields||(this._fields={}),J=typeof F,X,Y;if((J=="string"||N6.isArgumentsObject(F))&&typeof F.length=="number"||Array.isArray(F)){if(J=="string")F=F.split(/\s+/);for(X=0,Y=F.length;X<Y;++X){let W=F[X];if(!W)continue;let Z=W[0]=="-"?0:1;if(Z===0)W=W.substring(1);A[W]=Z}return this}if(N6.isObject(F)){let W=N6.keys(F);for(X=0;X<W.length;++X)A[W[X]]=F[W[X]];return this}throw TypeError("Invalid select() argument. Must be string or object.")};V1.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let $,F;if(arguments.length===1){let J=arguments[0];if(typeof J==="object"&&!Array.isArray(J)){let X=Object.keys(J),Y=X.length;for(let W=0;W<Y;++W)this.slice(X[W],J[X[W]]);return this}this._ensurePath("slice"),$=this._path,F=arguments[0]}else if(arguments.length===2)if(typeof arguments[0]==="number")this._ensurePath("slice"),$=this._path,F=[arguments[0],arguments[1]];else $=arguments[0],F=arguments[1];else if(arguments.length===3)$=arguments[0],F=[arguments[1],arguments[2]];let A=this._fields||(this._fields={});return A[$]={$slice:F},this};V1.prototype.sort=function($){if(!$)return this;let F,A,J;this._validate("sort");let X=typeof $;if(Array.isArray($)){A=$.length;for(F=0;F<$.length;++F){if(!Array.isArray($[F]))throw Error("Invalid sort() argument, must be array of arrays");DQ0(this.options,$[F][0],$[F][1])}return this}if(arguments.length===1&&X=="string"){$=$.split(/\s+/),A=$.length;for(F=0;F<A;++F){if(J=$[F],!J)continue;let Y=J[0]=="-"?-1:1;if(Y===-1)J=J.substring(1);rq1(this.options,J,Y)}return this}if(N6.isObject($)){let Y=N6.keys($);for(F=0;F<Y.length;++F)J=Y[F],rq1(this.options,J,$[J]);return this}if(typeof Map<"u"&&$ instanceof Map)return GQ0(this.options,$),this;throw TypeError("Invalid sort() argument. Must be a string, object, or array.")};/*!
 * @ignore
 */var qh={1:1,"-1":-1,asc:1,ascending:1,desc:-1,descending:-1};function rq1($,F,A){if(Array.isArray($.sort))throw TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let J;if(A&&A.$meta){J=$.sort||($.sort={}),J[F]={$meta:A.$meta};return}J=$.sort||($.sort={});let X=String(A||1).toLowerCase();if(X=qh[X],!X)throw TypeError("Invalid sort value: { "+F+": "+A+" }");J[F]=X}function DQ0($,F,A){if($.sort=$.sort||[],!Array.isArray($.sort))throw TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let J=String(A||1).toLowerCase();if(J=qh[J],!J)throw TypeError("Invalid sort value: [ "+F+", "+A+" ]");$.sort.push([F,J])}function GQ0($,F){if($.sort=$.sort||new Map,!($.sort instanceof Map))throw TypeError("Can't mix sort syntaxes. Use either array or object or map consistently");F.forEach(function(A,J){let X=String(A||1).toLowerCase();if(X=qh[X],!X)throw TypeError("Invalid sort value: < "+J+": "+A+" >");$.sort.set(J,X)})}/*!
 * limit, skip, batchSize, comment
 *
 * Sets these associated options.
 *
 *     query.comment('feed query');
 */["limit","skip","batchSize","comment"].forEach(function($){V1.prototype[$]=function(F){return this._validate($),this.options[$]=F,this}});V1.prototype.maxTime=V1.prototype.maxTimeMS=function($){return this._validate("maxTime"),this.options.maxTimeMS=$,this};V1.prototype.hint=function(){if(arguments.length===0)return this;this._validate("hint");let $=arguments[0];if(N6.isObject($)){let F=this.options.hint||(this.options.hint={});for(let A in $)F[A]=$[A];return this}if(typeof $==="string")return this.options.hint=$,this;throw TypeError("Invalid hint. "+$)};V1.prototype.j=function(F){return this.options.j=F,this};V1.prototype.slaveOk=function($){return this.options.slaveOk=arguments.length?!!$:!0,this};V1.prototype.read=V1.prototype.setReadPreference=function($){if(arguments.length>1&&!V1.prototype.read.deprecationWarningIssued)console.error("Deprecation warning: 'tags' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead."),V1.prototype.read.deprecationWarningIssued=!0;return this.options.readPreference=N6.readPref($),this};V1.prototype.readConcern=V1.prototype.r=function($){return this.options.readConcern=N6.readConcern($),this};V1.prototype.tailable=function(){return this._validate("tailable"),this.options.tailable=arguments.length?!!arguments[0]:!0,this};V1.prototype.writeConcern=V1.prototype.w=function(F){if(typeof F==="object"){if(typeof F.j<"u")this.options.j=F.j;if(typeof F.w<"u")this.options.w=F.w;if(typeof F.wtimeout<"u")this.options.wtimeout=F.wtimeout}else this.options.w=F==="m"?"majority":F;return this};V1.prototype.wtimeout=V1.prototype.wTimeout=function(F){return this.options.wtimeout=F,this};V1.prototype.merge=function($){if(!$)return this;if(!V1.canMerge($))throw TypeError("Invalid argument. Expected instanceof mquery or plain object");if($ instanceof V1){if($._conditions)N6.merge(this._conditions,$._conditions);if($._fields)this._fields||(this._fields={}),N6.merge(this._fields,$._fields);if($.options)this.options||(this.options={}),N6.merge(this.options,$.options);if($._updateDoc)this._updateDoc||(this._updateDoc={}),N6.mergeClone(this._updateDoc,$._updateDoc);if($._distinctDoc)this._distinctDoc=$._distinctDoc;return this}return N6.merge(this._conditions,$),this};V1.prototype.find=function($){if(this.op="find",V1.canMerge($))this.merge($);return this};V1.prototype._find=async function(){let F=this._conditions,A=this._optionsForExec();if(this.$useProjection)A.projection=this._fieldsForExec();else A.fields=this._fieldsForExec();return KJ("find",this._collection.collectionName,F,A),this._collection.find(F,A)};V1.prototype.cursor=function(F){if(this.op){if(this.op!=="find")throw TypeError(".cursor only support .find method")}else this.find(F);let A=this._conditions,J=this._optionsForExec();if(this.$useProjection)J.projection=this._fieldsForExec();else J.fields=this._fieldsForExec();return KJ("findCursor",this._collection.collectionName,A,J),this._collection.findCursor(A,J)};V1.prototype.findOne=function($){if(this.op="findOne",V1.canMerge($))this.merge($);return this};V1.prototype._findOne=async function(){let F=this._conditions,A=this._optionsForExec();if(this.$useProjection)A.projection=this._fieldsForExec();else A.fields=this._fieldsForExec();return KJ("findOne",this._collection.collectionName,F,A),this._collection.findOne(F,A)};V1.prototype.countDocuments=function($){if(this.op="countDocuments",this._validate(),V1.canMerge($))this.merge($);return this};V1.prototype._countDocuments=async function(){let F=this._conditions,A=this._optionsForExec();return KJ("countDocuments",this._collection.collectionName,F,A),this._collection.countDocuments(F,A)};V1.prototype.estimatedDocumentCount=function(){return this.op="estimatedDocumentCount",this._validate(),this};V1.prototype._estimatedDocumentCount=async function(){let F=this._conditions,A=this._optionsForExec();return KJ("estimatedDocumentCount",this._collection.collectionName,F,A),this._collection.estimatedDocumentCount(F,A)};V1.prototype.distinct=function($,F){if(this.op="distinct",this._validate(),!F&&typeof $==="string")F=$,$=void 0;if(typeof F=="string")this._distinctDoc=F;if(V1.canMerge($))this.merge($);return this};V1.prototype._distinct=async function(){if(!this._distinctDoc)throw Error("No value for `distinct` has been declared");let F=this._conditions,A=this._optionsForExec();return this._collection.distinct(this._distinctDoc,F,A)};V1.prototype.updateMany=function(F,A,J){return Lh(this,"updateMany",F,A,J)};V1.prototype._updateMany=async function(){return Eh(this,"updateMany")};V1.prototype.updateOne=function(F,A,J){return Lh(this,"updateOne",F,A,J)};V1.prototype._updateOne=async function(){return Eh(this,"updateOne")};V1.prototype.replaceOne=function(F,A,J){return this.setOptions({overwrite:!0}),Lh(this,"replaceOne",F,A,J)};V1.prototype._replaceOne=async function(){return Eh(this,"replaceOne")};/*!
 * Internal helper for updateMany, updateOne
 */function Lh($,F,A,J,X){if($.op=F,V1.canMerge(A))$.merge(A);if(J)$._mergeUpdate(J);if(N6.isObject(X))$.setOptions(X);return $}async function Eh($,F){let A=$._optionsForExec(),J=$._conditions,X=$._updateForExec();return KJ(F,$._collection.collectionName,J,X,A),$._collection[F](J,X,A)}V1.prototype.deleteOne=function($){if(this.op="deleteOne",V1.canMerge($))this.merge($);return this};V1.prototype._deleteOne=async function(){let $=this._optionsForExec();delete $.justOne;let F=this._conditions;return KJ("deleteOne",this._collection.collectionName,F,$),this._collection.deleteOne(F,$)};V1.prototype.deleteMany=function($){if(this.op="deleteMany",V1.canMerge($))this.merge($);return this};V1.prototype._deleteMany=async function(){let $=this._optionsForExec();delete $.justOne;let F=this._conditions;return this._collection.deleteMany(F,$)};V1.prototype.findOneAndUpdate=function($,F,A){if(this.op="findOneAndUpdate",this._validate(),V1.canMerge($))this.merge($);if(F)this._mergeUpdate(F);return A&&this.setOptions(A),this};V1.prototype._findOneAndUpdate=async function(){let $=this._conditions,F=this._updateForExec(),A=this._optionsForExec();return this._collection.findOneAndUpdate($,F,A)};V1.prototype.findOneAndReplace=function($,F,A){if(this.op="findOneAndReplace",this._validate(),V1.canMerge($))this.merge($);if(F)this._updateDoc=F,this.options=this.options||{},this.options.overwrite=!0;return A&&this.setOptions(A),this};V1.prototype._findOneAndReplace=async function(){let $=this._conditions,F=this._updateForExec(),A=this._optionsForExec();return KJ("findOneAndReplace",this._collection.collectionName,$,F,A),this._collection.findOneAndReplace($,F,A)};V1.prototype.findOneAndDelete=function($,F){if(this.op="findOneAndDelete",this._validate(),V1.canMerge($))this.merge($);return F&&this.setOptions(F),this};V1.prototype._findOneAndDelete=async function(){let $=this._optionsForExec(),F=this._conditions;return KJ("findOneAndDelete",this._collection.collectionName,F,$),this._collection.findOneAndDelete(F,$)};V1.prototype.setTraceFunction=function($){return this._traceFunction=$,this};V1.prototype.exec=async function(F){if(typeof F==="string")this.op=F;ZQ0.ok(this.op,"Missing query type: (find, etc)");let A="_"+this.op;if(typeof this[A]!=="function")throw TypeError(`this[${A}] is not a function`);return this[A]()};V1.prototype.then=async function($,F){return this.exec().then($,F)};V1.prototype.cursor=function(){if(this.op!="find")throw Error("cursor() is only available for find");let $=this._conditions,F=this._optionsForExec();if(this.$useProjection)F.projection=this._fieldsForExec();else F.fields=this._fieldsForExec();return this._collection.findCursor($,F)};V1.prototype.selected=function(){return!!(this._fields&&Object.keys(this._fields).length>0)};V1.prototype.selectedInclusively=function(){if(!this._fields)return!1;let F=Object.keys(this._fields);if(F.length===0)return!1;for(let A=0;A<F.length;++A){let J=F[A];if(this._fields[J]===0)return!1;if(this._fields[J]&&typeof this._fields[J]==="object"&&this._fields[J].$meta)return!1}return!0};V1.prototype.selectedExclusively=function(){if(!this._fields)return!1;let F=Object.keys(this._fields);if(F.length===0)return!1;for(let A=0;A<F.length;++A){let J=F[A];if(this._fields[J]===0)return!0}return!1};V1.prototype._mergeUpdate=function($){if(!this._updateDoc)this._updateDoc={};if($ instanceof V1){if($._updateDoc)N6.mergeClone(this._updateDoc,$._updateDoc)}else N6.mergeClone(this._updateDoc,$)};V1.prototype._optionsForExec=function(){return N6.clone(this.options)};V1.prototype._fieldsForExec=function(){return N6.clone(this._fields)};V1.prototype._updateForExec=function(){let $=this._updateDoc==null?{}:N6.clone(this._updateDoc),F=N6.keys($),A={};for(let J of F){if(this.options.overwrite){A[J]=$[J];continue}if(J[0]!=="$"){if(!A.$set)if($.$set)A.$set=$.$set;else A.$set={};if(A.$set[J]=$[J],!~F.indexOf("$set"))F.push("$set")}else if(J==="$set"){if(!A.$set)A[J]=$[J]}else A[J]=$[J]}return this._compiledUpdate=A,A};V1.prototype._ensurePath=function($){if(!this._path){let F=$+"() must be used after where() when called with these arguments";throw Error(F)}};/*!
 * Permissions
 */V1.permissions=vq1();V1._isPermitted=function($,F){let A=V1.permissions[F];if(!A)return!0;return A[$]!==!0};V1.prototype._validate=function($){let F,A;if($===void 0){if(A=V1.permissions[this.op],typeof A!="function")return!0;F=A(this)}else if(!V1._isPermitted($,this.op))F=$;if(F)throw Error(F+" cannot be used with "+this.op)};V1.canMerge=function($){return $ instanceof V1||N6.isObject($)};V1.setGlobalTraceFunction=function($){V1.traceFunction=$};/*!
 * Exports.
 */V1.utils=N6;V1.env=Qh();V1.Collection=nq1();V1.BaseCollection=ww();sq1.exports=tq1=V1});var Nh=O((l06,oq1)=>{oq1.exports=function(F,A){if(typeof F==="string")F=F.split(/\s+/);if(!Array.isArray(F)&&Object.prototype.toString.call(F)!=="[object Arguments]")return F;let X=F.length,Y={};for(let W=0;W<X;++W){let Z=F[W];if(!Z)continue;let D=Z[0]=="-"?0:1;if(!A&&D===0)Z=Z.substring(1);Y[Z]=D}return Y}});var FL1=O((p06,$L1)=>{$L1.exports=function(F,A){let J=Object.keys(F).map((X)=>Object.keys(F[X])).reduce((X,Y)=>X.concat(Y),[]);return A.filter((X)=>{return eq1(X,J)})};function eq1($,F){let A=Object.keys($)[0];if(A==="$and"||A==="$or"){if(!Array.isArray($[A]))return!1;return $[A].find((Y)=>eq1(Y,F))!=null}let J=A.indexOf("."),X=J===-1?A:A.slice(0,J);return F.find((Y)=>Y.includes("$["+X+"]"))!=null}});var BP=O((i06,AL1)=>{/*!
 * ignore
 */AL1.exports=function(F){if(typeof F!=="object"||F===null)return!1;let A=Object.keys(F),J=A.length;for(let X=0;X<J;++X)if(A[X][0]==="$")return!0;return!1}});var Ch=O((n06,JL1)=>{var zQ0=BP(),{trustedSymbol:HQ0}=Cz();JL1.exports=function $(F){if(F==null||typeof F!=="object")return F;if(Array.isArray(F)){for(let J of F)$(J);return F}let A=Object.keys(F);for(let J of A){let X=F[J];if(X?.[HQ0])continue;if(J==="$and"||J==="$or"){$(X);continue}if(zQ0(X)){let Y=Object.keys(X);if(Y.length===1&&Y[0]==="$eq")continue;F[J]={$eq:F[J]}}}return F}});var YL1=O((r06,XL1)=>{XL1.exports=function(F){if(F==null)return;let A=Object.keys(F);for(let J=0;J<A.length;++J)if(typeof F[A[J]]==="string")F[A[J]]=1}});var DL1=O((a06,ZL1)=>{var UQ0=jz(),QQ0=UP();/*!
 * ignore
 */ZL1.exports=function(F,A,J){if(J==null)return;let X=Object.keys(J);if(A=A||{},QQ0(F))for(let Y of X){if(!WL1(A,Y))F[Y]=1;else if(A[Y]===0)delete F[Y];let W=J[Y]?.refPath;if(typeof W==="string"){if(!WL1(A,W))F[W]=1;else if(A[W]===0)delete F[W]}}else if(UQ0(F))for(let Y of X){if(A[Y]==null)delete F[Y];let W=J[Y]?.refPath;if(typeof W==="string"&&A[W]==null)delete F[W]}};/*!
 * ignore
 */function WL1($,F){let A=F.split("."),J=A.length,X=A[0];for(let Y=1;Y<J;++Y){if($[X]!=null||$[X+".$"]!=null)return!0;X+="."+A[Y]}return $[X]!=null||$[X+".$"]!=null}});var UL1=O((t06,HL1)=>{/*!
 * Module dependencies.
 */var GL1=BZ(),KQ0=pB(),zL1=eC().flatten;HL1.exports=async function(F,A,J,X){let Y=Object.keys(J||{}),W={},Z={},D={},G={},z=Y.length,H=!1,U,Q;for(let S=0;S<z;++S)if(Y[S].startsWith("$")){if(H=!0,Y[S]==="$push"||Y[S]==="$addToSet"){let T=Object.keys(J[Y[S]]);for(let j=0;j<T.length;++j)if(U=J[Y[S]][T[j]],U?.$each)G[T[j]]=(G[T[j]]||[]).concat(U.$each);else G[T[j]]=(G[T[j]]||[]).concat([U]);continue}let C=zL1(J[Y[S]],null,null,A),M=Object.keys(C),I=M.length;for(let T=0;T<I;++T){let j=KQ0(M[T]);if(Q=Y[S],j.includes("$"))continue;if(Q==="$set"||Q==="$setOnInsert"||Q==="$pull"||Q==="$pullAll")Z[j]=C[M[T]],D[j]=Q==="$pull"||Q==="$pullAll";else if(Q==="$unset")Z[j]=void 0;W[j]=!0}}if(!H)Z=zL1(J,null,null,A),W=Object.keys(Z);let B=Object.keys(Z),q=B.length,L=[],E=[],V=[],R=F;for(let S=0;S<q;++S){let C=Z[B[S]],M=A._getSchema(B[S]);if(M==null)continue;if(M.instance==="Mixed"&&M.path!==B[S])continue;if(C&&Array.isArray(C.$in))C.$in.forEach((I,T)=>{L.push(M.doValidate(I,R,{updateValidator:!0}).catch((j)=>{j.path=B[T]+".$in."+T,E.push(j)}))});else{if(D[B[S]]&&M.$isMongooseArray)continue;if(M.$isMongooseDocumentArrayElement&&C?.$__!=null)V.push(B[S]),L.push(M.doValidate(C,R,{updateValidator:!0}).catch((I)=>{if(I.errors)for(let T of Object.keys(I.errors)){let j=I.errors[T];j.path=B[S]+"."+T,E.push(j)}else I.path=B[S],E.push(I)}));else{if(V.find((T)=>B[S].startsWith(T+".")))continue;if(M.$isSingleNested)V.push(B[S]);L.push(M.doValidate(C,R,{updateValidator:!0}).catch((T)=>{if(M.schema!=null&&M.schema.options.storeSubdocValidationError===!1&&T instanceof GL1)return;if(T)T.path=B[S],E.push(T)}))}}}let N=Object.keys(G);for(let S of N){let C=A._getSchema(S);if(C&&C.$isMongooseDocumentArray)L.push(C.doValidate(G[S],X?.context==="query"?F:null).catch((M)=>{M.path=S,E.push(M)}));else{C=A._getSchema(S+".0");for(let M of G[S])L.push(C.doValidate(M,X?.context==="query"?F:null,{updateValidator:!0}).catch((I)=>{I.path=S,E.push(I)}))}}if(await Promise.all(L),E.length){let S=new GL1(null);for(let C of E)S.addError(C.path,C);throw S}}});var EP=O((s06,IL1)=>{/*!
 * Module dependencies.
 */var qw=N8(),BQ0=mC(),Ph=QZ(),a4=v0(),BJ=rC(),QL1=Kq1(),KL1=BZ(),{applyGlobalMaxTimeMS:Lw,applyGlobalDiskUse:Ew}=Dh(),wQ0=Ly(),qQ0=Gh(),LQ0=zh(),EQ0=MZ(),VQ0=jq1(),qP=rB(),NQ0=iu(),f3=W4(),CQ0=R5(),Vw=vB(),MQ0=V$().internalToObjectOptions,PQ0=jz(),RQ0=UP(),IQ0=AM(),BL1=_q1(),qL1=O7(),LP=Vh(),TQ0=Nh(),jQ0=FL1(),OQ0=Ch(),SQ0=YL1(),_Q0=DL1(),LL1=ru(),wP=HZ(),kQ0=UL1(),oz=Z1("util"),J6=Z0(),bQ0=iB().queryMiddlewareFunctions,xQ0=new Set(["allowDiskUse","batchSize","collation","comment","explain","hint","j","lean","limit","maxTimeMS","populate","projection","read","select","skip","slice","sort","tailable","w","writeConcern","wtimeout"]),gQ0=new Map([["countDocuments","_countDocuments"],["distinct","__distinct"],["estimatedDocumentCount","_estimatedDocumentCount"],["find","_find"],["findOne","_findOne"],["findOneAndReplace","_findOneAndReplace"],["findOneAndUpdate","_findOneAndUpdate"],["replaceOne","_replaceOne"],["updateMany","_updateMany"],["updateOne","_updateOne"],["deleteMany","_deleteMany"],["deleteOne","_deleteOne"],["findOneAndDelete","_findOneAndDelete"]]);function E1($,F,A,J){if(!this._mongooseOptions)this._mongooseOptions={};F=F||{},this._transforms=[],this._hooks=new Ph,this._execCount=0;let X=Object.keys(F);for(let W of X)this._mongooseOptions[W]=F[W];if(J)this.mongooseCollection=J;if(A)this.model=A,this.schema=A.schema;if(this.model?._mapreduce)this.lean();if(LP.call(this,null,F),J)this.collection(J);if($)this.find($);this.options=this.options||{},this.$useProjection=!0;let Y=this?.schema?.options?.collation||null;if(Y!=null)this.options.collation=Y}function EL1($){if($==null)return!0;if(typeof $!=="object")return!0;if(J6.hasOwnKeys($)===!1)return!0;for(let F of["$and","$or","$nor"])if(Array.isArray($[F])){if($[F].length===0||$[F].every((A)=>EL1(A)))return!0}return!1}function ez($,F){if(F?.requireFilter&&EL1($))throw Error("Empty or invalid filter not allowed with requireFilter enabled")}/*!
 * inherit mquery
 */E1.prototype=new LP;E1.prototype.constructor=E1;E1.prototype.count=void 0;E1.prototype.findOneAndRemove=void 0;E1.base=LP.prototype;/*!
 * Overwrite mquery's `_distinct`, because Mongoose uses that name
 * to store the field to apply distinct on.
 */Object.defineProperty(E1.prototype,"_distinct",{configurable:!0,writable:!0,enumerable:!0,value:void 0});E1.use$geoWithin=LP.use$geoWithin;E1.prototype.toConstructor=function(){let F=this.model,A=this.mongooseCollection,J=function(W,Z){if(!(this instanceof J))return new J(W,Z);this._mongooseOptions=f3(X._mongooseOptions),E1.call(this,W,Z||null,F,A)};oz.inherits(J,F.Query);let X=J.prototype;X.options={};let Y=Object.assign({},this.options);if(Y.sort!=null)X.sort(Y.sort),delete Y.sort;return X.setOptions(Y),X.op=this.op,X._conditions=f3(this._conditions),X._fields=f3(this._fields),X._update=f3(this._update,{flattenDecimals:!1}),X._path=this._path,X._distinct=this._distinct,X._collection=this._collection,X._mongooseOptions=this._mongooseOptions,J};E1.prototype.clone=function(){let $=this.model,F=this.mongooseCollection,A=new this.model.Query({},{},$,F),J=Object.assign({},this.options);if(J.sort!=null)A.sort(J.sort),delete J.sort;return A.setOptions(J),A.op=this.op,A._conditions=f3(this._conditions),A._fields=f3(this._fields),A._update=f3(this._update,{flattenDecimals:!1}),A._path=this._path,A._distinct=this._distinct,A._collection=this._collection,A._mongooseOptions=this._mongooseOptions,A};E1.prototype.slice=function(...$){if($.length===0)return this;this._validate("slice");let F,A;if($.length===1){let X=$[0];if(typeof X==="object"&&!Array.isArray(X)){let Y=Object.keys(X),W=Y.length;for(let Z=0;Z<W;++Z)this.slice(Y[Z],X[Y[Z]]);return this}this._ensurePath("slice"),F=this._path,A=$[0]}else if($.length===2)if(typeof $[0]==="number")this._ensurePath("slice"),F=this._path,A=[$[0],$[1]];else F=$[0],A=$[1];else if($.length===3)F=$[0],A=[$[1],$[2]];let J={};return J[F]={$slice:A},this.select(J),this};/*!
 * ignore
 */var fQ0=new Set(bQ0);E1.prototype._validateOp=function(){if(this.op!=null&&!fQ0.has(this.op))this.error(Error('Query has invalid `op`: "'+this.op+'"'));if(this.op!=="estimatedDocumentCount"&&this._conditions==null)throw new BJ(this._conditions,"filter",this.op)};E1.prototype.mod=function(){let $,F;if(arguments.length===1)this._ensurePath("mod"),$=arguments[0],F=this._path;else if(arguments.length===2&&!Array.isArray(arguments[1]))this._ensurePath("mod"),$=[arguments[0],arguments[1]],F=this._path;else if(arguments.length===3)$=[arguments[1],arguments[2]],F=arguments[0];else $=arguments[1],F=arguments[0];let A=this._conditions[F]||(this._conditions[F]={});return A.$mod=$,this};E1.prototype.limit=function(F){if(this._validate("limit"),typeof F==="string")try{F=qP(F)}catch{throw new qw("Number",F,"limit")}return this.options.limit=F,this};E1.prototype.skip=function(F){if(this._validate("skip"),typeof F==="string")try{F=qP(F)}catch{throw new qw("Number",F,"skip")}return this.options.skip=F,this};E1.prototype.projection=function($){if(arguments.length===0)return this._fields;return this._fields={},this._userProvidedFields={},this.select($),this._fields};E1.prototype.select=function(){let F=arguments[0];if(!F)return this;if(arguments.length!==1)throw Error("Invalid select: select only takes 1 argument");this._validate("select");let A=this._fields||(this._fields={}),J=this._userProvidedFields||(this._userProvidedFields={}),X=void 0;if(this.model!=null&&J6.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection"))X=this.model.db.options.sanitizeProjection;else if(this.model!=null&&J6.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection"))X=this.model.base.options.sanitizeProjection;else X=this._mongooseOptions.sanitizeProjection;function Y(W){return typeof W==="string"&&X?W=1:W}if(F=TQ0(F,!0),J6.isObject(F)){if(this.selectedInclusively())Object.entries(F).forEach(([W,Z])=>{if(Z){if(A["-"+W]!=null)delete A["-"+W];A[W]=J[W]=Y(Z)}else Object.keys(J).forEach((D)=>{if(BL1(W,D))delete A[D],delete J[D]})});else if(this.selectedExclusively())Object.entries(F).forEach(([W,Z])=>{if(!Z){if(A["+"+W]!=null)delete A["+"+W];A[W]=J[W]=Y(Z)}else Object.keys(J).forEach((D)=>{if(BL1(W,D))delete A[D],delete J[D]})});else{let W=Object.keys(F);for(let Z=0;Z<W.length;++Z){let D=F[W[Z]],G=W[Z];A[G]=Y(D),J[G]=Y(D)}}return this}throw TypeError("Invalid select() argument. Must be string or object.")};E1.prototype.schemaLevelProjections=function(F){return this._mongooseOptions.schemaLevelProjections=F,this};E1.prototype.sanitizeProjection=function(F){return this._mongooseOptions.sanitizeProjection=F,this};E1.prototype.read=function(F,A){if(typeof F==="string")F=wQ0(F),this.options.readPreference={mode:F,tags:A};else this.options.readPreference=F;return this};E1.prototype.toString=function(){if(this.op==="count"||this.op==="countDocuments"||this.op==="find"||this.op==="findOne"||this.op==="deleteMany"||this.op==="deleteOne"||this.op==="findOneAndDelete"||this.op==="remove")return`${this.model.modelName}.${this.op}(${oz.inspect(this._conditions)})`;if(this.op==="distinct")return`${this.model.modelName}.distinct('${this._distinct}', ${oz.inspect(this._conditions)})`;if(this.op==="findOneAndReplace"||this.op==="findOneAndUpdate"||this.op==="replaceOne"||this.op==="update"||this.op==="updateMany"||this.op==="updateOne")return`${this.model.modelName}.${this.op}(${oz.inspect(this._conditions)}, ${oz.inspect(this._update)})`;return`${this.model.modelName}.${this.op}()`};E1.prototype.session=function(F){if(F==null)delete this.options.session;return this.options.session=F,this};E1.prototype.writeConcern=function(F){if(F==null)return delete this.options.writeConcern,this;return this.options.writeConcern=F,this};E1.prototype.w=function(F){if(F==null)delete this.options.w;if(this.options.writeConcern!=null)this.options.writeConcern.w=F;else this.options.w=F;return this};E1.prototype.j=function(F){if(F==null)delete this.options.j;if(this.options.writeConcern!=null)this.options.writeConcern.j=F;else this.options.j=F;return this};E1.prototype.wtimeout=function(F){if(F==null)delete this.options.wtimeout;if(this.options.writeConcern!=null)this.options.writeConcern.wtimeout=F;else this.options.wtimeout=F;return this};E1.prototype.getOptions=function(){return this.options};E1.prototype.setOptions=function($,F){if(F){if(this._mongooseOptions=$&&f3($)||{},this.options=$||{},"populate"in $)this.populate(this._mongooseOptions);return this}if($==null)return this;if(typeof $!=="object")throw Error('Options must be an object, got "'+$+'"');if($=Object.assign({},$),Array.isArray($.populate)){let A=$.populate;delete $.populate;let J=A.length;for(let X=0;X<J;++X)this.populate(A[X])}if("setDefaultsOnInsert"in $)this._mongooseOptions.setDefaultsOnInsert=$.setDefaultsOnInsert,delete $.setDefaultsOnInsert;if("overwriteDiscriminatorKey"in $)this._mongooseOptions.overwriteDiscriminatorKey=$.overwriteDiscriminatorKey,delete $.overwriteDiscriminatorKey;if("overwriteImmutable"in $)this._mongooseOptions.overwriteImmutable=$.overwriteImmutable,delete $.overwriteImmutable;if("updatePipeline"in $)this._mongooseOptions.updatePipeline=$.updatePipeline,delete $.updatePipeline;if("sanitizeProjection"in $){if($.sanitizeProjection&&!this._mongooseOptions.sanitizeProjection)SQ0(this._fields);this._mongooseOptions.sanitizeProjection=$.sanitizeProjection,delete $.sanitizeProjection}if("sanitizeFilter"in $)this._mongooseOptions.sanitizeFilter=$.sanitizeFilter,delete $.sanitizeFilter;if("timestamps"in $)this._mongooseOptions.timestamps=$.timestamps,delete $.timestamps;if("defaults"in $)this._mongooseOptions.defaults=$.defaults;if("translateAliases"in $)this._mongooseOptions.translateAliases=$.translateAliases,delete $.translateAliases;if("schemaLevelProjections"in $)this._mongooseOptions.schemaLevelProjections=$.schemaLevelProjections,delete $.schemaLevelProjections;if($.lean==null&&this.schema&&"lean"in this.schema.options)this._mongooseOptions.lean=this.schema.options.lean;if(typeof $.limit==="string")try{$.limit=qP($.limit)}catch{throw new qw("Number",$.limit,"limit")}if(typeof $.skip==="string")try{$.skip=qP($.skip)}catch{throw new qw("Number",$.skip,"skip")}for(let A of Object.keys($))if(xQ0.has(A)){let J=Array.isArray($[A])?$[A]:[$[A]];this[A].apply(this,J)}else this.options[A]=$[A];return this};E1.prototype.explain=function(F){if(arguments.length===0)this.options.explain=!0;else if(F===!1)delete this.options.explain;else this.options.explain=F;return this};E1.prototype.allowDiskUse=function($){if(arguments.length===0)this.options.allowDiskUse=!0;else if($===!1)delete this.options.allowDiskUse;else this.options.allowDiskUse=$;return this};E1.prototype.maxTimeMS=function($){return this.options.maxTimeMS=$,this};E1.prototype.getFilter=function(){return this._conditions};E1.prototype.getQuery=function(){return this._conditions};E1.prototype.setQuery=function($){this._conditions=$};E1.prototype.getUpdate=function(){return this._update};E1.prototype.setUpdate=function($){this._update=$};E1.prototype._fieldsForExec=function(){if(this._fields==null)return null;if(J6.hasOwnKeys(this._fields)===!1)return null;return f3(this._fields)};E1.prototype._updateForExec=function(){let $=f3(this._update,{transform:!1,depopulate:!0}),F=Object.keys($),A=F.length,J={};while(A--){let X=F[A];if(X[0]!=="$"){if(!J.$set)if($.$set)J.$set=$.$set;else J.$set={};if(J.$set[X]=$[X],F.splice(A,1),!~F.indexOf("$set"))F.push("$set")}else if(X==="$set"){if(!J.$set)J[X]=$[X]}else J[X]=$[X]}return J};E1.prototype._optionsForExec=function($){let F=f3(this.options);if(delete F.populate,$=$||this.model,!$)return F;qQ0($.schema,F),LQ0($.schema,F);let A=this.model?.db?.base.transactionAsyncLocalStorage?.getStore();if(!Object.hasOwn(this.options,"session")&&A?.session!=null)F.session=A.session;let J=$?.schema?.options?.read;if(!("readPreference"in F)&&J)F.readPreference=J;if(F.upsert!==void 0)F.upsert=!!F.upsert;if(F.writeConcern){if(F.j)F.writeConcern.j=F.j,delete F.j;if(F.w)F.writeConcern.w=F.w,delete F.w;if(F.wtimeout)F.writeConcern.wtimeout=F.wtimeout,delete F.wtimeout}if(this._applyPaths(),this._fields!=null){this._fields=this._castFields(this._fields);let X=this._fieldsForExec();if(X!=null)F.projection=X}if(this._mongooseOptions.populate){if(F.readPreference){for(let X of Object.values(this._mongooseOptions.populate))if(X.options?.readPreference===void 0){if(!X.options)X.options={};X.options.readPreference=F.readPreference}}if(F.readConcern){for(let X of Object.values(this._mongooseOptions.populate))if(X.options?.readConcern===void 0){if(!X.options)X.options={};X.options.readConcern=F.readConcern}}}return F};E1.prototype.lean=function($){return this._mongooseOptions.lean=arguments.length?$:!0,this};E1.prototype.set=function($,F){if(typeof $==="object"){let A=Object.keys($);for(let J of A)this.set(J,$[J]);return this}if(this._update=this._update||{},$ in this._update)delete this._update[$];return this._update.$set=this._update.$set||{},this._update.$set[$]=F,this};E1.prototype.get=function(F){let A=this._update;if(A==null)return;let J=A.$set;if(J==null)return A[F];if(J6.hasUserDefinedProperty(A,F))return A[F];if(J6.hasUserDefinedProperty(J,F))return J[F];return};E1.prototype.error=function(F){if(arguments.length===0)return this._error;return this._error=F,this};E1.prototype._unsetCastError=function(){if(this._error==null||!(this._error instanceof qw))return;return this.error(null)};E1.prototype.mongooseOptions=function($){if(arguments.length>0)this._mongooseOptions=$;return this._mongooseOptions};E1.prototype._castConditions=function(){let $=void 0;if(this.model?.db.options?.sanitizeFilter!=null)$=this.model.db.options.sanitizeFilter;else if(this.model?.base.options?.sanitizeFilter!=null)$=this.model.base.options.sanitizeFilter;else $=this._mongooseOptions.sanitizeFilter;if($)OQ0(this._conditions);try{this.cast(this.model),this._unsetCastError()}catch(F){this.error(F)}};/*!
 * ignore
 */function VL1($){try{VQ0($)}catch(F){$.error(F)}}E1.prototype._find=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let F=this._mongooseOptions,A=this._userProvidedFields||{},J=this.model.db.options,X=this.model.base.options;Lw(this.options,J,X),Ew(this.options,J,X);let Y={session:this?.options?.session||null,lean:F.lean||null},W=this._optionsForExec(),Z=this._conditions,D=W.projection,G=await this.mongooseCollection.find(Z,W);if(W.explain)return G.explain();let z=await G.toArray();if(z.length===0)return z;if(!F.populate){let U=this.schema.options.versionKey;if(F.lean?.versionKey===!1&&U)z.forEach((Q)=>{if(U in Q)delete Q[U]});return F.lean?CL1(this.model.schema,z,null,Y):this._completeMany(z,D,A,Y)}let H=Vw.preparePopulationOptionsMQ(this,F);if(F.lean)return this.model.populate(z,H);return z=await this._completeMany(z,D,A,Y),await this.model.populate(z,H),z};E1.prototype.find=function($){if(typeof $==="function"||typeof arguments[1]==="function")throw new a4("Query.prototype.find() no longer accepts a callback");if(this.op="find",wJ($))this.merge($),Nw(this);else if($!=null)this.error(new BJ($,"filter","find"));return this};E1.prototype.merge=function($){if(!$){if($===null)this._conditions=null;return this}this._conditions=this._conditions??{};let F={overwrite:!0};if($ instanceof E1){if($._conditions){if(F.omit={},this._conditions&&this._conditions.$and&&$._conditions.$and)F.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat($._conditions.$and);if(this._conditions&&this._conditions.$or&&$._conditions.$or)F.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat($._conditions.$or);J6.merge(this._conditions,$._conditions,F)}if($._fields)this._fields||(this._fields={}),J6.merge(this._fields,$._fields,F);if($.options)this.options||(this.options={}),J6.merge(this.options,$.options,F);if($._update)this._update||(this._update={}),J6.mergeClone(this._update,$._update);if($._distinct)this._distinct=$._distinct;return J6.merge(this._mongooseOptions,$._mongooseOptions),this}else if(this.model!=null&&$ instanceof this.model.base.Types.ObjectId)return J6.merge(this._conditions,{_id:$},F),this;else if($?.$__)$=$.toObject(MQ0);if(F.omit={},Array.isArray($.$and)){if(F.omit.$and=!0,!this._conditions)this._conditions={};this._conditions.$and=(this._conditions.$and||[]).concat($.$and.map((A)=>J6.isPOJO(A)?J6.merge({},A):A))}if(Array.isArray($.$or)){if(F.omit.$or=!0,!this._conditions)this._conditions={};this._conditions.$or=(this._conditions.$or||[]).concat($.$or.map((A)=>J6.isPOJO(A)?J6.merge({},A):A))}return J6.merge(this._conditions,$,F),this};E1.prototype.collation=function($){if(this.options==null)this.options={};return this.options.collation=$,this};E1.prototype._completeOne=function($,F,A,J){if(!$&&!this.options.includeResultMetadata)return J(null,null);let X=this.model,Y=this._userProvidedFields||{},W=this._mongooseOptions,Z=this.options;if(!Z.lean&&W.lean)Z.lean=W.lean;if(Z.explain)return J(null,$);if(!W.populate){let G=this.schema.options.versionKey;if(W.lean?.versionKey===!1&&G){if(G in $)delete $[G]}return W.lean?Rh(X.schema,$,null,F,Z,J):wL1(X,$,F,Z,A,Y,null,J)}let D=Vw.preparePopulationOptionsMQ(this,this._mongooseOptions);if(W.lean)return X.populate($,D).then((G)=>{Rh(X.schema,G,null,F,Z,J)},(G)=>{J(G)});wL1(X,$,F,Z,A,Y,[],(G,z)=>{if(G!=null)return J(G);X.populate(z,D).then((H)=>{J(null,H)},(H)=>{J(H)})})};E1.prototype._completeMany=async function(F,A,J,X){let Y=this.model;return Promise.all(F.map((W)=>new Promise((Z,D)=>{let G=W;if(W=Vw.createModel(Y,W,A,J),X.session!=null)W.$session(X.session);W.$init(G,X,(z)=>{if(z!=null)return D(z);Z(W)})})))};E1.prototype._findOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();let F=this.model.db.options,A=this.model.base.options;Lw(this.options,F,A),Ew(this.options,F,A);let J=this._optionsForExec(),X=await this.mongooseCollection.findOne(this._conditions,J);return new Promise((Y,W)=>{this._completeOne(X,null,J.projection,(Z,D)=>{if(Z)return W(Z);Y(D)})})};E1.prototype.findOne=function($,F,A){if(typeof $==="function"||typeof F==="function"||typeof A==="function"||typeof arguments[3]==="function")throw new a4("Query.prototype.findOne() no longer accepts a callback");if(this.op="findOne",A)this.setOptions(A);if(F)this.select(F);if(wJ($))this.merge($),Nw(this);else if($!=null)this.error(new BJ($,"filter","findOne"));return this};E1.prototype._countDocuments=async function(){this._applyTranslateAliases();try{this.cast(this.model)}catch(Y){this.error(Y)}if(this.error())throw this.error();let F=this.model.db.options,A=this.model.base.options;Lw(this.options,F,A),Ew(this.options,F,A);let J=this._optionsForExec(),X=this._conditions;return this.mongooseCollection.countDocuments(X,J)};/*!
 * If `translateAliases` option is set, call `Model.translateAliases()`
 * on the following query properties: filter, projection, update, distinct.
 */E1.prototype._applyTranslateAliases=function(){let F=!1;if("translateAliases"in this._mongooseOptions)F=this._mongooseOptions.translateAliases;else if(this.model?.schema?._userProvidedOptions?.translateAliases!=null)F=this.model.schema._userProvidedOptions.translateAliases;else if(this.model?.base?.options?.translateAliases!=null)F=this.model.base.options.translateAliases;if(!F)return;if(this.model?.schema?.aliases&&J6.hasOwnKeys(this.model.schema.aliases)){if(this.model.translateAliases(this._conditions,!0),this.model.translateAliases(this._fields,!0),this.model.translateAliases(this._update,!0),this._distinct!=null&&this.model.schema.aliases[this._distinct]!=null)this._distinct=this.model.schema.aliases[this._distinct]}};E1.prototype._estimatedDocumentCount=async function(){if(this.error())throw this.error();let F=this._optionsForExec();return this.mongooseCollection.estimatedDocumentCount(F)};E1.prototype.estimatedDocumentCount=function($){if(typeof $==="function"||typeof arguments[1]==="function")throw new a4("Query.prototype.estimatedDocumentCount() no longer accepts a callback");if(this.op="estimatedDocumentCount",$!=null)this.setOptions($);return this};E1.prototype.countDocuments=function($,F){if(typeof $==="function"||typeof F==="function"||typeof arguments[2]==="function")throw new a4("Query.prototype.countDocuments() no longer accepts a callback");if(this.op="countDocuments",wJ($))this.merge($);if(F!=null)this.setOptions(F);return this};E1.prototype.__distinct=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();let F=this.model.db.options,A=this.model.base.options;Lw(this.options,F,A),Ew(this.options,F,A);let J=this._optionsForExec();return this.mongooseCollection.distinct(this._distinct,this._conditions,J)};E1.prototype.distinct=function($,F,A){if(typeof $==="function"||typeof F==="function"||typeof A==="function"||typeof arguments[3]==="function")throw new a4("Query.prototype.distinct() no longer accepts a callback");if(this.op="distinct",wJ(F))this.merge(F),Nw(this);else if(F!=null)this.error(new BJ(F,"filter","distinct"));if($!=null)this._distinct=$;if(A!=null)this.setOptions(A);return this};E1.prototype.sort=function($,F){if(arguments.length>2)throw Error("sort() takes at most 2 arguments");if(F!=null&&typeof F!=="object")throw Error("sort() options argument must be an object or nullish");if(this.options.sort==null)this.options.sort={};if(F?.override)this.options.sort={};let A=this.options.sort;if(typeof $==="string"){let J=$.indexOf(" ")===-1?[$]:$.split(" ");for(let X of J){let Y=X[0]=="-"?-1:1;if(Y===-1)X=X.slice(1);if(wP.has(X))continue;A[X]=Y}}else if(Array.isArray($))for(let J of $){if(!Array.isArray(J))throw TypeError("Invalid sort() argument, must be array of arrays");let X=""+J[0];if(wP.has(X))continue;A[X]=Mh(J[1],X)}else if(typeof $==="object"&&$!=null&&!($ instanceof Map))for(let J of Object.keys($)){if(wP.has(J))continue;A[J]=Mh($[J],J)}else if($ instanceof Map)for(let J of $.keys()){if(J=""+J,wP.has(J))continue;A[J]=Mh($.get(J),J)}else if($!=null)throw TypeError("Invalid sort() argument. Must be a string, object, array, or map.");return this};/*!
 * Convert sort values
 */function Mh($,F){if($===1||$==="asc"||$==="ascending")return 1;if($===-1||$==="desc"||$==="descending")return-1;if($?.$meta!=null)return{$meta:$.$meta};throw TypeError("Invalid sort value: { "+F+": "+$+" }")}E1.prototype.deleteOne=function(F,A){if(typeof F==="function"||typeof A==="function"||typeof arguments[2]==="function")throw new a4("Query.prototype.deleteOne() no longer accepts a callback");if(this.op="deleteOne",this.setOptions(A),wJ(F))this.merge(F),Nw(this);else if(F!=null)this.error(new BJ(F,"filter","deleteOne"));return this};E1.prototype._deleteOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),ez(this._conditions,this.options),this.error()!=null)throw this.error();let F=this._optionsForExec();return this.mongooseCollection.deleteOne(this._conditions,F)};E1.prototype.deleteMany=function($,F){if(typeof $==="function"||typeof F==="function"||typeof arguments[2]==="function")throw new a4("Query.prototype.deleteMany() no longer accepts a callback");if(this.setOptions(F),this.op="deleteMany",wJ($))this.merge($),Nw(this);else if($!=null)this.error(new BJ($,"filter","deleteMany"));return this};E1.prototype._deleteMany=async function(){if(this._applyTranslateAliases(),this._castConditions(),ez(this._conditions,this.options),this.error()!=null)throw this.error();let F=this._optionsForExec();return this.mongooseCollection.deleteMany(this._conditions,F)};function wL1($,F,A,J,X,Y,W,Z){if(J.includeResultMetadata&&F==null)return D(null),null;Vw.createModelAndInit($,F,X,Y,J,W,D);function D(G,z){if(G)return Z(G);if(J.includeResultMetadata){if(F&&z){if(J.session!=null)z.$session(J.session);A.value=z}else A.value=null;return Z(null,A)}if(J.session!=null)z.$session(J.session);Z(null,z)}}function Nw($){if(!$?.model?.schema)return;let F=$.model.schema;if(F?.discriminatorMapping&&!F.discriminatorMapping.isRoot)$._conditions[F.discriminatorMapping.key]=F.discriminatorMapping.value}E1.prototype.findOneAndUpdate=function($,F,A){if(typeof $==="function"||typeof F==="function"||typeof A==="function"||typeof arguments[3]==="function")throw new a4("Query.prototype.findOneAndUpdate() no longer accepts a callback");switch(this.op="findOneAndUpdate",this._validate(),arguments.length){case 2:A=void 0;break;case 1:F=$,$=A=void 0;break}if(wJ($))this.merge($);else if($!=null)this.error(new BJ($,"filter","findOneAndUpdate"));if(A=A?f3(A):{},A.projection)this.select(A.projection),delete A.projection;if(A.fields)this.select(A.fields),delete A.fields;let J=this?.model?.base?.options?.returnOriginal;if(A.new==null&&A.returnDocument==null&&A.returnOriginal==null&&J!=null)A.returnOriginal=J;let X=this?.model?.base?.options?.updatePipeline;if(A.updatePipeline==null&&X!=null)A.updatePipeline=X;if(this.setOptions(A),F)this._mergeUpdate(F);return this};E1.prototype._findOneAndUpdate=async function(){if(this._applyTranslateAliases(),this._castConditions(),ez(this._conditions,this.options),VL1(this),this.error())throw this.error();let F=this.model.db.options,A=this.model.base.options;if(Lw(this.options,F,A),Ew(this.options,F,A),"strict"in this.options)this._mongooseOptions.strict=this.options.strict;let J=this._optionsForExec(this.model);NL1(J),this._update=this._castUpdate(this._update);let X=Object.assign({},J,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});if(this._update=LL1(this._conditions,this.model.schema,this._update,X),!this._update||J6.hasOwnKeys(this._update)===!1)if(J.upsert){let D=f3(this._update);delete D._id,this._update={$set:D}}else return this._execCount=0,await this._findOne();else if(this._update instanceof Error)throw this._update;else if(this._update.$set&&J6.hasOwnKeys(this._update.$set)===!1)delete this._update.$set;if(Ih(this,"runValidators",!1))await this.validate(this._update,J,!1);if(this._update.toBSON)this._update=this._update.toBSON();let W=await this.mongooseCollection.findOneAndUpdate(this._conditions,this._update,J);for(let D of this._transforms)W=D(W);let Z=!J.includeResultMetadata?W:W.value;return new Promise((D,G)=>{this._completeOne(Z,W,J.projection,(z,H)=>{if(z)return G(z);D(H)})})};E1.prototype.findOneAndDelete=function($,F){if(typeof $==="function"||typeof F==="function"||typeof arguments[2]==="function")throw new a4("Query.prototype.findOneAndDelete() no longer accepts a callback");if(this.op="findOneAndDelete",this._validate(),wJ($))this.merge($);return F&&this.setOptions(F),this};E1.prototype._findOneAndDelete=async function(){if(this._applyTranslateAliases(),this._castConditions(),ez(this._conditions,this.options),this.error()!=null)throw this.error();let F=this.options.includeResultMetadata,A=this._conditions,J=this._optionsForExec(this.model),X=await this.mongooseCollection.findOneAndDelete(A,J);for(let W of this._transforms)X=W(X);let Y=!F?X:X.value;return new Promise((W,Z)=>{this._completeOne(Y,X,J.projection,(D,G)=>{if(D)return Z(D);W(G)})})};E1.prototype.findOneAndReplace=function($,F,A){if(typeof $==="function"||typeof F==="function"||typeof A==="function"||typeof arguments[4]==="function")throw new a4("Query.prototype.findOneAndReplace() no longer accepts a callback");if(this.op="findOneAndReplace",this._validate(),wJ($))this.merge($);else if($!=null)this.error(new BJ($,"filter","findOneAndReplace"));if(F!=null)this._mergeUpdate(F);A=A||{};let J=this?.model?.base?.options?.returnOriginal;if(A.new==null&&A.returnDocument==null&&A.returnOriginal==null&&J!=null)A.returnOriginal=J;return this.setOptions(A),this};E1.prototype._findOneAndReplace=async function(){if(this._applyTranslateAliases(),this._castConditions(),ez(this._conditions,this.options),this.error()!=null)throw this.error();if("strict"in this.options)this._mongooseOptions.strict=this.options.strict,delete this.options.strict;let F=this._conditions,A=this._optionsForExec();NL1(A);let J=this.options.includeResultMetadata,X={skipId:!0};if("strict"in this._mongooseOptions)X.strict=this._mongooseOptions.strict;let Y=Ih(this,"runValidators",!1);try{let D=new this.model(this._update,null,X);if(Y)await D.validate();else if(D.$__.validationError)throw D.$__.validationError;this._update=D.toBSON()}catch(D){if(D instanceof KL1)throw D;let G=new KL1;throw G.errors[D.path]=D,G}let W=await this.mongooseCollection.findOneAndReplace(F,this._update,A);for(let D of this._transforms)W=D(W);let Z=!J?W:W.value;return new Promise((D,G)=>{this._completeOne(Z,W,A.projection,(z,H)=>{if(z)return G(z);D(H)})})};E1.prototype.findById=function($,F,A){return this.findOne({_id:$},F,A)};E1.prototype.findByIdAndUpdate=function($,F,A){return this.findOneAndUpdate({_id:$},F,A)};E1.prototype.findByIdAndDelete=function($,F){return this.findOneAndDelete({_id:$},F)};function NL1($){if("new"in $)$.returnDocument=$.new?"after":"before",delete $.new;if("returnOriginal"in $)$.returnDocument=$.returnOriginal?"before":"after",delete $.returnOriginal;if(typeof $.returnDocument==="string")$.returnOriginal=$.returnDocument==="before"}function Ih($,F,A){let J=$._optionsForExec($.model);if(F in J)return J[F];if(F in $.model.base.options)return $.model.base.options[F];return A}/*!
 * ignore
 */function Rh($,F,A,J,X,Y){if(X.lean&&typeof X.lean.transform==="function"){X.lean.transform(F);for(let W=0;W<$.childSchemas.length;W++){let Z=A?A+"."+$.childSchemas[W].model.path:$.childSchemas[W].model.path,D=$.childSchemas[W].schema,G=qL1.get(Z,F);if(G==null)continue;if(Array.isArray(G))for(let z=0;z<G.length;z++)X.lean.transform(G[z]);else X.lean.transform(G);Rh(D,G,Z,J,X)}if(Y)return Y(null,F);else return}if(X.includeResultMetadata)return Y(null,J);return Y(null,F)}/*!
 * ignore
 */function CL1($,F,A,J){if(J.lean&&typeof J.lean.transform==="function"){for(let X of F)J.lean.transform(X);for(let X=0;X<$.childSchemas.length;X++){let Y=A?A+"."+$.childSchemas[X].model.path:$.childSchemas[X].model.path,W=$.childSchemas[X].schema,Z=qL1.get(Y,F);if(Z==null)continue;Z=Z.flat();for(let D=0;D<Z.length;D++)J.lean.transform(Z[D]);CL1(W,Z,Y,J)}}return F}E1.prototype._mergeUpdate=function($){if(!this._mongooseOptions.updatePipeline&&Array.isArray($))throw new a4("Cannot pass an array to query updates unless the `updatePipeline` option is set.");if(!this._update)this._update=Array.isArray($)?[]:{};if($==null||typeof $==="object"&&J6.hasOwnKeys($)===!1)return;if($ instanceof E1){if(Array.isArray(this._update))throw new a4(`Cannot mix array and object updates (current: ${tz(this._update)}, incoming: ${tz($._update)})`);if($._update)J6.mergeClone(this._update,$._update)}else if(Array.isArray($)){if(!Array.isArray(this._update))if(this._update==null||J6.isEmptyObject(this._update))this._update=[];else throw new a4(`Cannot mix array and object updates (current: ${tz(this._update)}, incoming: ${tz($)})`);this._update=this._update.concat($)}else{if(Array.isArray(this._update))throw new a4(`Cannot mix array and object updates (current: ${tz(this._update)}, incoming: ${tz($)})`);J6.mergeClone(this._update,$)}};function tz($){let F=oz.inspect($,{depth:2,maxArrayLength:5,breakLength:80,compact:!0});if(F.length>200)return`${F.slice(0,197)}...`;return F}/*!
 * ignore
 */async function Th($){if(this._applyTranslateAliases(),this._castConditions(),ez(this._conditions,this.options),VL1(this),this.error()!=null)throw this.error();let F=this._conditions,A=this._optionsForExec(this.model);this._update=f3(this._update,A);let J=$==="replaceOne";if(J)this._update=new this.model(this._update,null,{skipId:!0});else{if(this._update=this._castUpdate(this._update),this._update==null||J6.hasOwnKeys(this._update)===!1)return{acknowledged:!1};let Y=Object.assign({},A,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});this._update=LL1(this._conditions,this.model.schema,this._update,Y)}if(Array.isArray(A.arrayFilters))A.arrayFilters=jQ0(this._update,A.arrayFilters);if(Ih(this,"runValidators",!1))await this.validate(this._update,A,J);if(this._update.toBSON)this._update=this._update.toBSON();return this.mongooseCollection[$](F,this._update,A)}E1.prototype.validate=async function(F,A,J){if(typeof arguments[3]==="function")throw new a4("Query.prototype.validate() no longer accepts a callback");if(await PL1(this,"validate"),J)await F.$validate();else await kQ0(this,this.model.schema,F,A);await ML1(this,null,null,"validate")};E1.prototype._updateMany=async function(){return Th.call(this,"updateMany")};E1.prototype._updateOne=async function(){return Th.call(this,"updateOne")};E1.prototype._replaceOne=async function(){return Th.call(this,"replaceOne")};E1.prototype.updateMany=function($,F,A,J){if(typeof A==="function")J=A,A=void 0;else if(typeof F==="function")J=F,F=$,$={},A=void 0;else if(typeof $==="function")J=$,$=void 0,F=void 0,A=void 0;else if(typeof $==="object"&&!F&&!A&&!J)F=$,$=void 0,A=void 0,J=void 0;return jh(this,"updateMany",$,F,A,J)};E1.prototype.updateOne=function($,F,A,J){if(typeof A==="function")J=A,A=void 0;else if(typeof F==="function")J=F,F=$,$={},A=void 0;else if(typeof $==="function")J=$,$=void 0,F=void 0,A=void 0;else if(typeof $==="object"&&!F&&!A&&!J)F=$,$=void 0,A=void 0,J=void 0;return jh(this,"updateOne",$,F,A,J)};E1.prototype.replaceOne=function($,F,A,J){if(typeof A==="function")J=A,A=void 0;else if(typeof F==="function")J=F,F=$,$={},A=void 0;else if(typeof $==="function")J=$,$=void 0,F=void 0,A=void 0;else if(typeof $==="object"&&!F&&!A&&!J)F=$,$=void 0,A=void 0,J=void 0;return jh(this,"replaceOne",$,F,A,J)};function jh($,F,A,J,X,Y){if($.op=F,J=J||{},X!=null){if("strict"in X)$._mongooseOptions.strict=X.strict}if(!(A instanceof E1)&&A!=null&&A.toString()!=="[object Object]")$.error(new BJ(A,"filter",F));else $.merge(A);let W=$?.model?.base?.options?.updatePipeline;if(W!=null&&X?.updatePipeline==null)X=X||{},X.updatePipeline=W;if(J6.isObject(X))$.setOptions(X);if($._mergeUpdate(J),Y)return $.exec(Y),$;return $}E1.prototype.transform=function($){return this._transforms.push($),this};E1.prototype.orFail=function($){return this.transform((F)=>{switch(this.op){case"find":if(F.length===0)throw sz($,this);break;case"findOne":if(F==null)throw sz($,this);break;case"replaceOne":case"updateMany":case"updateOne":if(F?.matchedCount===0)throw sz($,this);break;case"findOneAndDelete":case"findOneAndUpdate":case"findOneAndReplace":if(this.options.includeResultMetadata&&F!=null&&F.value==null)throw sz($,this);if(!this.options.includeResultMetadata&&F==null)throw sz($,this);break;case"deleteMany":case"deleteOne":if(F.deletedCount===0)throw sz($,this);break;default:break}return F}),this};function sz($,F){if(typeof $==="function")$=$.call(F);if($==null)$=new BQ0(F.getQuery(),F.model.modelName);return $}E1.prototype.isPathSelectedInclusive=function($){return IQ0(this._fields,$)};E1.prototype.exec=async function(F){if(typeof F==="function"||arguments.length>=2&&typeof arguments[1]==="function")throw new a4("Query.prototype.exec() no longer accepts a callback");if(this._validateOp(),typeof F==="string")this.op=F;if(this.op==null)throw new a4("Query must have `op` before executing");if(this.model==null)throw new a4("Query must have an associated model before executing");let A=gQ0.get(this.op);if(!A)throw new a4('Query has invalid `op`: "'+this.op+'"');if(this.options?.sort&&typeof this.options.sort==="object"&&Object.hasOwn(this.options.sort,""))throw Error('Invalid field "" passed to sort()');if(this._execCount>0){let W=this.toString();if(W.length>60)W=W.slice(0,60)+"...";throw new a4("Query was already executed: "+W)}this._execCount++;let J=null;try{await this._hooks.execPre("exec",this,[])}catch(W){if(W instanceof Ph.skipWrappedFunction)J=W;else throw W}let X,Y=null;try{await PL1(this),X=J?J.args[0]:await this[A]();for(let W of this._transforms)X=W(X)}catch(W){if(W instanceof Ph.skipWrappedFunction)X=W.args[0];else Y=W;Y=this.model.schema._transformDuplicateKeyError(Y)}return X=await ML1(this,X,Y),await this._hooks.execPost("exec",this,[]),X};/*!
 * ignore
 */function ML1($,F,A,J){if($._queryMiddleware==null){if(A!=null)throw A;return F}let X=A?{error:A}:{};return $._queryMiddleware.execPost(J||$.op,$,[F],X).then((Y)=>{return Y[0]})}/*!
 * ignore
 */function PL1($,F){if($._queryMiddleware==null)return;return $._queryMiddleware.execPre(F||$.op,$,[])}E1.prototype.then=function($,F){return this.exec().then($,F)};E1.prototype.catch=function($){return this.exec().then(null,$)};E1.prototype.finally=function($){return this.exec().finally($)};E1.prototype[Symbol.toStringTag]=function(){return`Query { ${this.op} }`};E1.prototype.pre=function($){return this._hooks.pre("exec",$),this};E1.prototype.post=function($){return this._hooks.post("exec",$),this};E1.prototype._castUpdate=function(F){let A=this.schema,J=A.options.discriminatorKey,X=A._baseSchema||A;if(this._mongooseOptions.overwriteDiscriminatorKey&&F[J]!=null&&X.discriminators){let W=Object.values(X.discriminators).find((Z)=>Z.discriminatorMapping.value===F[J]);if(W!=null)A=W}let Y;if("upsert"in this.options)Y=this.options.upsert;return NQ0(A,F,{strict:this._mongooseOptions.strict,upsert:Y,arrayFilters:this.options.arrayFilters,overwriteDiscriminatorKey:this._mongooseOptions.overwriteDiscriminatorKey,overwriteImmutable:this._mongooseOptions.overwriteImmutable},this,this._conditions)};E1.prototype.populate=function(...$){if(!$.some(Boolean))return this;let F=J6.populate.apply(null,$),A=this._mongooseOptions;if(A.lean!=null){let X=A.lean;for(let Y of F)if(Y?.options?.lean==null)Y.options=Y.options||{},Y.options.lean=X}if(!J6.isObject(A.populate))A.populate={};let J=A.populate;for(let X of F){let Y=X.path;if(J[Y]?.populate&&X.populate)X.populate=J[Y].populate.concat(X.populate);J[X.path]=X}return this};E1.prototype.getPopulatedPaths=function(){let F=this._mongooseOptions.populate||{},A=Object.keys(F);for(let J of Object.keys(F)){let X=F[J];if(!Array.isArray(X.populate))continue;RL1(A,X.populate,J+".")}return A};/*!
 * ignore
 */function RL1($,F,A){for(let J of F){if($.push(A+J.path),!Array.isArray(J.populate))continue;RL1($,J.populate,A+J.path+".")}}E1.prototype.cast=function($,F){F||(F=this._conditions),$=$||this.model;let A=$.schema.options.discriminatorKey;if(F!=null&&Object.hasOwn(F,A))$=CQ0($.discriminators,F[A])||$;let J={upsert:this.options?.upsert};if(this.options){if("strict"in this.options)J.strict=this.options.strict;if("strictQuery"in this.options)J.strictQuery=this.options.strictQuery}if("sanitizeFilter"in this._mongooseOptions)J.sanitizeFilter=this._mongooseOptions.sanitizeFilter;try{return EQ0($.schema,F,J,this)}catch(X){if(typeof X.setModel==="function")X.setModel($);throw X}};E1.prototype._castFields=function(F){let A,J,X,Y,W;if(F){X=Object.keys(F),J=[];for(let Z=0;Z<X.length;++Z)if(Y=X[Z],F[Y].$elemMatch)A||(A={}),A[Y]=F[Y],J.push(Y)}if(A){try{W=this.cast(this.model,A)}catch(Z){return Z}for(let Z=0;Z<J.length;++Z)Y=J[Z],F[Y]=W[Y]}return F};E1.prototype._applyPaths=function(){if(!this.model)return;this._fields=this._fields||{};let F=void 0;if(this.model!=null&&J6.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection"))F=this.model.db.options.sanitizeProjection;else if(this.model!=null&&J6.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection"))F=this.model.base.options.sanitizeProjection;else F=this._mongooseOptions.sanitizeProjection;if(this._mongooseOptions.schemaLevelProjections??!0)Vw.applyPaths(this._fields,this.model.schema,F);let J=!0;if("selectPopulatedPaths"in this.model.base.options)J=this.model.base.options.selectPopulatedPaths;if("selectPopulatedPaths"in this.model.schema.options)J=this.model.schema.options.selectPopulatedPaths;if(J)_Q0(this._fields,this._userProvidedFields,this._mongooseOptions.populate)};E1.prototype.cursor=function(F){if(F)this.setOptions(F);try{this.cast(this.model)}catch(A){return new QL1(this)._markError(A)}return new QL1(this)};E1.prototype.tailable=function($,F){if(typeof $?.constructor==="function"&&$.constructor.name==="Object")F=$,$=!0;if($===void 0)$=!0;if(F&&typeof F==="object")for(let A of Object.keys(F))if(A==="awaitData"||A==="awaitdata")this.options.awaitData=!!F[A];else this.options[A]=F[A];return this.options.tailable=arguments.length?!!$:!0,this};E1.prototype.near=function(){let $=[],F=this._mongooseOptions.nearSphere;if(arguments.length===1)if(Array.isArray(arguments[0]))$.push({center:arguments[0],spherical:F});else if(typeof arguments[0]==="string")$.push(arguments[0]);else if(J6.isObject(arguments[0])){if(typeof arguments[0].spherical!=="boolean")arguments[0].spherical=F;$.push(arguments[0])}else throw TypeError("invalid argument");else if(arguments.length===2)if(typeof arguments[0]==="number"&&typeof arguments[1]==="number")$.push({center:[arguments[0],arguments[1]],spherical:F});else if(typeof arguments[0]==="string"&&Array.isArray(arguments[1]))$.push(arguments[0]),$.push({center:arguments[1],spherical:F});else if(typeof arguments[0]==="string"&&J6.isObject(arguments[1])){if($.push(arguments[0]),typeof arguments[1].spherical!=="boolean")arguments[1].spherical=F;$.push(arguments[1])}else throw TypeError("invalid argument");else if(arguments.length===3)if(typeof arguments[0]==="string"&&typeof arguments[1]==="number"&&typeof arguments[2]==="number")$.push(arguments[0]),$.push({center:[arguments[1],arguments[2]],spherical:F});else throw TypeError("invalid argument");else throw TypeError("invalid argument");return E1.base.near.apply(this,$)};E1.prototype.nearSphere=function(){return this._mongooseOptions.nearSphere=!0,this.near.apply(this,arguments),this};E1.prototype[Symbol.asyncIterator]=function(){return this._mongooseOptions._asyncIterator=!0,this.cursor()};E1.prototype.box=function($,F){if(!Array.isArray($)&&J6.isObject($))F=$.ur,$=$.ll;return E1.base.box.call(this,$,F)};E1.prototype.center=E1.base.circle;E1.prototype.centerSphere=function(){if(typeof arguments[0]?.constructor==="function"&&arguments[0].constructor.name==="Object")arguments[0].spherical=!0;if(typeof arguments[1]?.constructor==="function"&&arguments[1].constructor.name==="Object")arguments[1].spherical=!0;E1.base.circle.apply(this,arguments)};E1.prototype.selectedInclusively=function(){return RQ0(this._fields)};E1.prototype.selectedExclusively=function(){return PQ0(this._fields)};E1.prototype.model;function wJ($){return $ instanceof E1||J6.isObject($)||$===null}/*!
 * Export
 */IL1.exports=E1});var _L1=O((o06,SL1)=>{/*!
 * Module dependencies.
 */var Cw=v0(),jL1=Z1("stream").Readable,vQ0=Yh(),yQ0=TX(),uQ0=QZ(),OL1=Z1("util");function v3($){jL1.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.agg=$,this._transforms=[];let{_connection:F,_model:A}=$;if(delete $.options.cursor.useMongooseAggCursor,this._mongooseOptions={},F)this.cursor=F.db.aggregate($._pipeline,$.options||{}),setImmediate(()=>this.emit("cursor",this.cursor));else hQ0(A,this,$)}OL1.inherits(v3,jL1);/*!
 * ignore
 */function hQ0($,F,A){if(!$.collection.buffer)$.hooks.execPre("aggregate",A).then(()=>J(null),(X)=>J(X));else $.collection.emitter.once("queue",function(){$.hooks.execPre("aggregate",A).then(()=>J(null),(X)=>J(X))});function J(X){if(X!=null){mQ0(F,X);return}if(typeof A.options?.cursor?.transform==="function")F._transforms.push(A.options.cursor.transform);F.cursor=$.collection.aggregate(A._pipeline,A.options||{}),F.emit("cursor",F.cursor)}}function mQ0($,F){if(F instanceof uQ0.skipWrappedFunction){let A=F.args[0];if(A!=null&&(!Array.isArray(A)||A.length)){let J=new Cw('Cannot `skipMiddlewareFunction()` with a value when using `.aggregate().cursor()`, value must be nullish or empty array, got "'+OL1.inspect(A)+'".');$._markError(J),$.listeners("error").length>0&&$.emit("error",J);return}$.emit("cursor",null);return}$._markError(F),$.listeners("error").length>0&&$.emit("error",F)}v3.prototype._read=function(){let $=this;VP(this,function(F,A){if(F)return $.emit("error",F);if(!A){$.push(null),$.cursor.close(function(J){if(J)return $.emit("error",J)});return}$.push(A)})};if(Symbol.asyncIterator!=null){let $="Mongoose does not support using async iterators with an existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregation";v3.prototype[Symbol.asyncIterator]=function(){throw new Cw($)}}Object.defineProperty(v3.prototype,"map",{value:function($){return this._transforms.push($),this},enumerable:!0,configurable:!0,writable:!0});v3.prototype._markError=function($){return this._error=$,this};v3.prototype.close=async function(){if(typeof arguments[0]==="function")throw new Cw("AggregationCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close()}catch(F){throw this.listeners("error").length>0&&this.emit("error",F),F}this.emit("close")};v3.prototype._destroy=function(F,A){let J=null;if(!this.cursor)J=new Promise((X)=>{this.once("cursor",X)});else J=Promise.resolve();return J.then(()=>this.cursor.close()).then(()=>{this._closed=!0,A()}).catch((X)=>{A(X)}),this};v3.prototype.next=async function(){if(typeof arguments[0]==="function")throw new Cw("AggregationCursor.prototype.next() no longer accepts a callback");return new Promise((F,A)=>{VP(this,(J,X)=>{if(J!=null)return A(J);F(X)})})};v3.prototype.eachAsync=function($,F){if(typeof arguments[2]==="function")throw new Cw("AggregationCursor.prototype.eachAsync() no longer accepts a callback");let A=this;if(typeof F==="function")F={};return F=F||{},vQ0(function(J){return VP(A,J)},$,F)};if(Symbol.asyncIterator!=null)v3.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()};/*!
 * ignore
 */v3.prototype._transformForAsyncIterator=function(){if(this._transforms.indexOf(TL1)===-1)this.map(TL1);return this};/*!
 * ignore
 */v3.prototype.transformNull=function($){if(arguments.length===0)$=!0;return this._mongooseOptions.transformNull=$,this};/*!
 * ignore
 */function TL1($){return $==null?{done:!0}:{value:$,done:!1}}v3.prototype.addCursorFlag=function($,F){let A=this;return dQ0(this,function(){A.cursor.addCursorFlag($,F)}),this};/*!
 * ignore
 */function dQ0($,F){if($.cursor)return F();$.once("cursor",function(){F()})}function VP($,F){let A=F;if($._transforms.length)A=function(J,X){if(J||X===null&&!$._mongooseOptions.transformNull)return F(J,X);F(J,$._transforms.reduce(function(Y,W){return W(Y)},X))};if($._error)return yQ0(function(){A($._error)});if($.cursor)return $.cursor.next().then((J)=>{if(!J)return A(null,null);A(null,J)},(J)=>A(J));else $.once("error",F),$.once("cursor",function(){VP($,F)})}SL1.exports=v3});var Oh=O((e06,kL1)=>{kL1.exports=function(F,A,J){let X=A?.discriminatorMapping;if(J=J||"",X&&!X.isRoot){let Y=F,W=(J.length>0?J+".":J)+X.key,Z=X.value;if(Y[0]!=null&&Y[0].$match&&(Y[0].$match[W]===void 0||Y[0].$match[W]===Z))Y[0].$match[W]=Z;else if(Y[0]?.$geoNear)Y[0].$geoNear.query=Y[0].$geoNear.query||{},Y[0].$geoNear.query[W]=Z;else if(Y[0]?.$search)if(Y[1]?.$match!=null)Y[1].$match[W]=Y[1].$match[W]||Z;else{let D={};D[W]=Z,Y.splice(1,0,{$match:D})}else{let D={};D[W]=Z,Y.unshift({$match:D})}}}});var xL1=O(($66,bL1)=>{bL1.exports=function $(F){if(!Array.isArray(F))return;for(let A of F){if(A==null)continue;let J=A.$group||A.$bucket||A.$bucketAuto;if(J!=null)for(let Y of Object.keys(J))cQ0(J[Y]);let X=Object.keys(A)[0];if(X&&typeof A[X]==="object"){let Y=A[X];for(let W of Object.keys(Y))if(Y[W]!=null&&Y[W].$function!=null&&typeof Y[W].$function.body==="function")Y[W].$function.body=Y[W].$function.body.toString()}if(A.$facet!=null)for(let Y of Object.keys(A.$facet))$(A.$facet[Y])}};function cQ0($){if($==null||$.$accumulator==null)return;for(let F of["init","accumulate","merge","finalize"])if(typeof $.$accumulator[F]==="function")$.$accumulator[F]=String($.$accumulator[F])}});var _h=O((F66,uL1)=>{/*!
 * Module dependencies
 */var vL1=_L1(),OZ=v0(),yL1=EP(),{applyGlobalMaxTimeMS:lQ0,applyGlobalDiskUse:pQ0}=Dh(),iQ0=W4(),nQ0=F3(),Sh=Oh(),rQ0=xL1(),gL1=Z0(),{modelSymbol:aQ0}=s1(),tQ0=yL1.prototype.read,sQ0=yL1.prototype.readConcern,fL1=new Set(["$$DESCEND","$$PRUNE","$$KEEP"]);function i0($,F){if(this._pipeline=[],F==null||F[aQ0])this._model=F;else this._connection=F;if(this.options={},arguments.length===1&&Array.isArray($))this.append.apply(this,$)}i0.prototype.options;i0.prototype._optionsForExec=function(){let $=this.options||{},F=this.model()?.db?.base.transactionAsyncLocalStorage?.getStore();if(!Object.hasOwn($,"session")&&F?.session!=null)$.session=F.session;return $};i0.prototype.model=function($){if(arguments.length===0)return this._model;if(this._model=$,$.schema!=null){if(this.options.readPreference==null&&$.schema.options.read!=null)this.options.readPreference=$.schema.options.read;if(this.options.collation==null&&$.schema.options.collation!=null)this.options.collation=$.schema.options.collation}return $};i0.prototype.append=function(){let $=arguments.length===1&&Array.isArray(arguments[0])?arguments[0]:[...arguments];if(!$.every(oQ0))throw Error("Arguments must be aggregate pipeline operators");return this._pipeline=this._pipeline.concat($),this};i0.prototype.addFields=function($){if(typeof $!=="object"||$===null||Array.isArray($))throw Error("Invalid addFields() argument. Must be an object");return this.append({$addFields:Object.assign({},$)})};i0.prototype.project=function($){let F={};if(typeof $==="object"&&!Array.isArray($))Object.keys($).forEach(function(A){F[A]=$[A]});else if(arguments.length===1&&typeof $==="string")$.split(/\s+/).forEach(function(A){if(!A)return;let J=A[0]==="-"?0:1;if(J===0)A=A.substring(1);F[A]=J});else throw Error("Invalid project() argument. Must be string or object");return this.append({$project:F})};i0.prototype.near=function($){if($==null)throw new OZ("Aggregate `near()` must be called with non-nullish argument");if($.near==null)throw new OZ("Aggregate `near()` argument must have a `near` property");let F=Array.isArray($.near)?$.near:$.near.coordinates;if(typeof $.near==="object"&&(!Array.isArray(F)||F.length<2||F.find((J)=>typeof J!=="number")))throw new OZ(`Aggregate \`near()\` argument has invalid coordinates, got "${F}"`);let A={};return A.$geoNear=$,this.append(A)};/*!
 * define methods
 */"group match skip limit out densify fill".split(" ").forEach(function($){i0.prototype[$]=function(F){let A={};return A["$"+$]=F,this.append(A)}});i0.prototype.unwind=function(){let $=[...arguments],F=[];for(let A of $)if(A&&typeof A==="object")F.push({$unwind:A});else if(typeof A==="string")F.push({$unwind:A[0]==="$"?A:"$"+A});else throw Error('Invalid arg "'+A+'" to unwind(), must be string or object');return this.append.apply(this,F)};i0.prototype.replaceRoot=function($){let F;if(typeof $==="string")F=$.startsWith("$")?$:"$"+$;else F=$;return this.append({$replaceRoot:{newRoot:F}})};i0.prototype.count=function($){return this.append({$count:$})};i0.prototype.sortByCount=function($){if($&&typeof $==="object")return this.append({$sortByCount:$});else if(typeof $==="string")return this.append({$sortByCount:$[0]==="$"?$:"$"+$});else throw TypeError('Invalid arg "'+$+'" to sortByCount(), must be string or object')};i0.prototype.lookup=function($){return this.append({$lookup:$})};i0.prototype.graphLookup=function($){let F={};if($){if(!gL1.isObject($))throw TypeError("Invalid graphLookup() argument. Must be an object.");gL1.mergeClone(F,$);let A=F.startWith;if(A&&typeof A==="string")F.startWith=F.startWith.startsWith("$")?F.startWith:"$"+F.startWith}return this.append({$graphLookup:F})};i0.prototype.sample=function($){return this.append({$sample:{size:$}})};i0.prototype.sort=function($){let F={};if(nQ0($)==="Object"){let A=["desc","descending",-1];Object.keys($).forEach(function(J){if($[J]instanceof Object&&$[J].$meta){F[J]=$[J];return}F[J]=A.indexOf($[J])===-1?1:-1})}else if(arguments.length===1&&typeof $==="string")$.split(/\s+/).forEach(function(A){if(!A)return;let J=A[0]==="-"?-1:1;if(J===-1)A=A.substring(1);F[A]=J});else throw TypeError("Invalid sort() argument. Must be a string or object.");return this.append({$sort:F})};i0.prototype.unionWith=function($){return this.append({$unionWith:$})};i0.prototype.read=function($,F){return tQ0.call(this,$,F),this};i0.prototype.readConcern=function($){return sQ0.call(this,$),this};i0.prototype.redact=function($,F,A){if(arguments.length===3){if(typeof F==="string"&&!fL1.has(F)||typeof A==="string"&&!fL1.has(A))throw Error("If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEP");$={$cond:{if:$,then:F,else:A}}}else if(arguments.length!==1)throw TypeError("Invalid arguments");return this.append({$redact:$})};i0.prototype.explain=async function(F){if(typeof F==="function"||typeof arguments[1]==="function")throw new OZ("Aggregate.prototype.explain() no longer accepts a callback");let A=this._model;if(!this._pipeline.length)throw Error("Aggregate has empty pipeline");Sh(this._pipeline,this._model.schema);try{await A.hooks.execPre("aggregate",this)}catch(Y){return await A.hooks.execPost("aggregate",this,[null],{error:Y})}let J=A.collection.aggregate(this._pipeline,this.options);if(F==null)F=!0;let X=null;try{X=await J.explain(F)}catch(Y){return await A.hooks.execPost("aggregate",this,[null],{error:Y})}return await A.hooks.execPost("aggregate",this,[X],{error:null}),X};i0.prototype.allowDiskUse=function($){return this.options.allowDiskUse=$,this};i0.prototype.hint=function($){return this.options.hint=$,this};i0.prototype.session=function($){if($==null)delete this.options.session;else this.options.session=$;return this};i0.prototype.option=function($){for(let F in $)this.options[F]=$[F];return this};i0.prototype.cursor=function($){return this._optionsForExec(),this.options.cursor=$||{},new vL1(this)};i0.prototype.collation=function($){return this.options.collation=$,this};i0.prototype.facet=function($){return this.append({$facet:$})};i0.prototype.search=function($){return this.append({$search:$})};i0.prototype.pipeline=function(){return this._pipeline};i0.prototype.exec=async function(){if(!this._model&&!this._connection)throw Error("Aggregate not bound to any Model");if(typeof arguments[0]==="function")throw new OZ("Aggregate.prototype.exec() no longer accepts a callback");if(this._connection){if(!this._pipeline.length)throw new OZ("Aggregate has empty pipeline");return this._optionsForExec(),await(await this._connection.client.db().aggregate(this._pipeline,this.options)).toArray()}let F=this._model,A=this._model.collection;if(lQ0(this.options,F.db.options,F.base.options),pQ0(this.options,F.db.options,F.base.options),this._optionsForExec(),this.options?.cursor)return new vL1(this);Sh(this._pipeline,this._model.schema),rQ0(this._pipeline);try{await F.hooks.execPre("aggregate",this)}catch(Y){return await F.hooks.execPost("aggregate",this,[null],{error:Y})}if(!this._pipeline.length)throw new OZ("Aggregate has empty pipeline");let J=iQ0(this.options||{}),X;try{X=await(await A.aggregate(this._pipeline,J)).toArray()}catch(Y){return await F.hooks.execPost("aggregate",this,[null],{error:Y})}return await F.hooks.execPost("aggregate",this,[X],{error:null}),X};i0.prototype.then=function($,F){return this.exec().then($,F)};i0.prototype.catch=function($){return this.exec().then(null,$)};i0.prototype.finally=function($){return this.exec().finally($)};i0.prototype[Symbol.asyncIterator]=function(){return this.cursor({useMongooseAggCursor:!0}).transformNull()._transformForAsyncIterator()};/*!
 * Helpers
 */function oQ0($){if(typeof $!=="object"||$===null)return!1;let F=Object.keys($);return F.length===1&&F[0][0]==="$"}i0._prepareDiscriminatorPipeline=Sh;/*!
 * Exports
 */uL1.exports=i0});var mL1=O((A66,hL1)=>{var eQ0=W4();class kh{constructor($){if($==null)return;Object.assign(this,eQ0($))}}kh.prototype.__subdocs=null;hL1.exports=kh});var cL1=O((J66,dL1)=>{dL1.exports=function $(F,A){let J=Object.keys(A.paths),X=J.length;for(let Y=0;Y<X;++Y){let W="",Z=J[Y],D=A.paths[Z],G=D.splitPath(),z=G.length,H=F;for(let U=0;U<z;++U){if(H==null)break;let Q=G[U];if(W+=(!W.length?"":".")+Q,U===z-1){if(typeof H[Q]<"u"){if(D.$isSingleNested)$(H[Q],D.schema);else if(D.$isMongooseDocumentArray&&Array.isArray(H[Q]))H[Q].forEach((q)=>$(q,D.schema));break}let B=D.getDefault(F,!1,{skipCast:!0});if(typeof B<"u"){if(H[Q]=B,D.$isSingleNested)$(B,D.schema);else if(D.$isMongooseDocumentArray&&Array.isArray(B))B.forEach((q)=>$(q,D.schema))}}else{if(H[Q]==null)H[Q]={};H=H[Q]}}}}});var xh=O((X66,lL1)=>{lL1.exports=bh;function bh($,F=new WeakSet,A=!1){if(F.has($))return;F.add($);for(let J of Object.keys($.paths)){let X=$.paths[J];if(!X.schema)continue;if(bh(X.schema,F),!X.schema._applyDiscriminators)continue;if(X._appliedDiscriminators&&!A)continue;for(let Y of X.schema._applyDiscriminators.keys()){let{schema:W,options:Z}=X.schema._applyDiscriminators.get(Y);bh(W,F),X.discriminator(Y,W,A?{...Z,overwriteExisting:!0}:Z)}X._appliedDiscriminators=!0}}});var iL1=O((Y66,pL1)=>{/*!
 * ignore
 */pL1.exports=Mw;/*!
 * ignore
 */Mw.middlewareFunctions=["deleteOne","remove","save","updateOne","validate","init"];/*!
 * ignore
 */var $K0=new Set(Mw.middlewareFunctions.flatMap(($)=>[$,`$__${$}`]));function Mw($,F,A){A=A||{};let J={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},X=A.decorateDoc?$:$.prototype;$.$appliedHooks=!0;for(let D of Object.keys(F.paths)){let G=F.paths[D],z=null,H=gh(G);if(H)z=H.childModel,G=H.type;else continue;if(z.$appliedHooks)continue;if(Mw(z,G.schema,{...A,decorateDoc:!1,isChildSchema:!0}),z.discriminators!=null){let U=Object.keys(z.discriminators);for(let Q of U)Mw(z.discriminators[Q],z.discriminators[Q].schema,A)}}let Y=F._getDocumentMiddleware();$._middleware=Y,X.$__init=Y.createWrapperSync("init",X.$__init,null,J);let W=Object.keys(F.methods),Z=Object.assign({},J,{checkForPromise:!0});for(let D of W){if($K0.has(D))continue;if(!Y.hasHooks(D))continue;let G=X[D];X[`$__${D}`]=X[D],X[D]=Y.createWrapper(D,G,null,Z)}}function gh($){if($.$isSingleNested||$.$isMongooseDocumentArray)return{childModel:$.Constructor,type:$};if($.instance==="Array"){let F=$.getEmbeddedSchemaType();if(F)return gh(F)}if($.instance==="Map"){let F=$.getEmbeddedSchemaType();if(F)return gh(F)}return null}});var rL1=O((W66,nL1)=>{var FK0=E4(),AK0=Z0();nL1.exports=function $(F,A){let J=fh();function X(Y,W){Object.defineProperty(F.prototype,Y,{get:function(){let Z={};for(let D in W.methods[Y])Z[D]=W.methods[Y][D].bind(this);return Z},configurable:!0})}for(let Y of Object.keys(A.methods)){let W=A.methods[Y];if(Object.hasOwn(A.tree,Y))throw Error('You have a method and a property in your schema both named "'+Y+'"');if(typeof W==="function"&&J.prototype[Y]===W){delete A.methods[Y];continue}if(A.reserved[Y]&&!FK0(A,`methodOptions.${Y}.suppressWarning`,!1))AK0.warn(`mongoose: the method name "${Y}" is used by mongoose internally, overwriting it may cause bugs. If you're sure you know what you're doing, you can suppress this error by using \`schema.method('${Y}', fn, { suppressWarning: true })\`.`);if(typeof W==="function")F.prototype[Y]=W;else X(Y,A)}F.$appliedMethods=!0;for(let Y of Object.keys(A.paths)){let W=A.paths[Y];if(W.$isSingleNested&&!W.Constructor.$appliedMethods)$(W.Constructor,W.schema);if(W.$isMongooseDocumentArray&&!W.Constructor.$appliedMethods)$(W.Constructor,W.schema)}}});var sL1=O((Z66,tL1)=>{var aL1=_v(),JK0=jz(),XK0=UP(),MP=Z0().isPOJO;tL1.exports=function(F,A,J){if(A==null)return F;if(F==null)return F;let X=null;if(XK0(A))X=!1;else if(JK0(A))X=!0;if(X==null)return F;else if(X)return J=J||aL1(A),NP(F,A,J);else return J=J||aL1(A),CP(F,A,J)};function NP($,F,A,J,X){if($==null||typeof $!=="object")return $;if(Array.isArray($))return $.map((W)=>NP(W,F,A,J,X));let Y={...$};J=X?J||{}:F;for(let W of Object.keys(Y)){let Z=X?X+"."+W:W;if(Object.hasOwn(F,Z)||Object.hasOwn(J,W))if(MP(F[Z])||MP(J[W]))Y[W]=NP(Y[W],F,A,J[W],Z);else delete Y[W];else if(A[Z])Y[W]=NP(Y[W],F,A,J[W],Z)}return Y}function CP($,F,A,J,X){if($==null||typeof $!=="object")return $;if(Array.isArray($))return $.map((W)=>CP(W,F,A,J,X));let Y={...$};J=X?J||{}:F;for(let W of Object.keys(Y)){let Z=X?X+"."+W:W;if(Object.hasOwn(F,Z)||Object.hasOwn(J,W)){if(MP(F[Z])||MP(J[W]))Y[W]=CP(Y[W],F,A,J[W],Z);continue}else if(A[Z])Y[W]=CP(Y[W],F,A,J[W],Z);else delete Y[W]}return Y}});var eL1=O((D66,oL1)=>{oL1.exports=function(F){let A=!1;for(let J of Object.keys(F))if(F[J]==="text")A=!0;return A}});var FE1=O((G66,$E1)=>{var YK0=eL1();$E1.exports=function(F,A,J){if(YK0(F))return;if(Object.hasOwn(J,"collation")&&!Object.hasOwn(A,"collation"))A.collation=J.collation}});var JE1=O((z66,AE1)=>{var{queryMiddlewareFunctions:WK0,aggregateMiddlewareFunctions:ZK0,modelMiddlewareFunctions:DK0,documentMiddlewareFunctions:GK0}=iB(),zK0=Array.from(new Set([...WK0,...ZK0,...DK0,...GK0]));AE1.exports=function(F,A,J){A=A.filter((X)=>{if(zK0.indexOf(X.name)!==-1)return!!X.model;return X.model!==!1});for(let X of Object.keys(J))if(A.hasHooks(X)){let Y=F[X];F[X]=A.createWrapper(X,Y)}}});var YE1=O((H66,XE1)=>{XE1.exports=function(F,A){for(let J in A.statics)F[J]=A.statics[J]}});var zE1=O((U66,GE1)=>{var WE1=MM(),HK0=O7(),UK0=Z0();GE1.exports=ZE1;function ZE1($,F,A){if(F==null)return F;return QK0($,F,A),DE1($,F,A)}function QK0($,F,A){for(let J of $.childSchemas){let X=J.model.path,Y=J.schema;if(!X)continue;let W=HK0.get(X,F);if(W==null||Array.isArray(W)&&W.flat(1/0).length===0)continue;ZE1(Y,W,A)}}function DE1($,F,A){if(F==null||typeof F!=="object")return;if(Array.isArray(F)){for(let Z of F)DE1($,Z,A);return}if($.discriminators&&UK0.hasOwnKeys($.discriminators))for(let Z of Object.keys($.discriminators)){let D=$.discriminators[Z],G=D.discriminatorMapping.key,z=D.discriminatorMapping.value;if(F[G]==z){$=D;break}}let J=WE1($.options.timestamps,"createdAt"),X=WE1($.options.timestamps,"updatedAt"),Y=A?.currentTime,W=null;if(Y!=null)W=Y();else if($.base?.now)W=$.base.now();else W=new Date;if(J&&F[J]==null&&!A?.isUpdate)F[J]=W;if(X)F[X]=W}});var QE1=O((Q66,UE1)=>{var KK0=O7(),BK0=Z0();UE1.exports=HE1;function HE1($,F,A){if(F==null)return F;let J=A,X=null;if(Array.isArray(A)){J=[],X=[];for(let Y of A)if(Y.length===1)X.push(Y[0]);else J.push(Y)}return wK0($,F,J),vh($,F,X)}function wK0($,F,A){let J=!1;for(let X of $.childSchemas){let Y=X.model.path,W=X.schema;if(!Y)continue;let Z=KK0.get(Y,F);if(Z==null||Array.isArray(Z)&&Z.flat(1/0).length===0)continue;let D=null;if(Array.isArray(A)){D=[];for(let G of A)if(G[0]==Y)D.push(G.slice(1));if(D.length===0)continue}HE1(W,Z,D),J=!0}if(A?.length&&!J)vh($,F,A)}function vh($,F,A){if(F==null||typeof F!=="object")return;if(Array.isArray(F)){for(let J of F)vh($,J,A);return}if($.discriminators&&BK0.hasOwnKeys($.discriminators))for(let J of Object.keys($.discriminators)){let X=$.discriminators[J],Y=X.discriminatorMapping.key,W=X.discriminatorMapping.value;if(F[Y]==W){$=X;break}}if(A==null)A=Object.keys($.virtuals);for(let J of A){if($.virtuals[J]==null)continue;let X=$.virtuals[J],Y=Array.isArray(J)?J:J.indexOf(".")===-1?[J]:J.split("."),W=F;for(let G=0;G<Y.length-1;++G)W[Y[G]]=Y[G]in W?W[Y[G]]:{},W=W[Y[G]];let Z=X.applyGetters(W[Y[Y.length-1]],F);if((X.options?.ref||X.options?.refPath)&&Z===void 0)if(X.options.justOne)Z=null;else Z=[];W[Y[Y.length-1]]=Z}}});var PP=O((K66,KE1)=>{KE1.exports=function $(F){if(!(this instanceof $))return new $(F);return this.val=F,this}});var Pw=O((B66,BE1)=>{/*!
 * ignore
 */BE1.exports=new WeakMap});var EE1=O((w66,LE1)=>{var qK0=W4(),wE1=Pw(),LK0=s1().modelSymbol,EK0=Z0();LE1.exports=qE1;var RP=Symbol("mongoose#assignRawDocsToIdStructure#hasArray");function qE1($,F,A,J,X){let Y=[],W=J.isVirtual&&J.justOne&&$.length>1?!1:J.sort&&$.length>1,Z=J.$nullIfNotFound,D,G,z;if(EK0.isMongooseArray($))$=$.__array;let H=0,U=$.length;if(W&&X&&J[RP]===void 0){J[RP]=!1;for(let Q in A)if(Array.isArray(A[Q])){J[RP]=!0;break}}for(H=0;H<U;++H){if(z=$[H],Array.isArray(z)){qE1(z,F,A,J,!0),Y.push(z);continue}if(z===null&&W===!1){Y.push(z);continue}if(G=String(z),D=F[G],J.clone&&D!=null)if(J.lean){let Q=wE1.get(D);D=qK0(D),wE1.set(D,Q)}else D=D.constructor.hydrate(D._doc);if(X)if(D)if(W){let Q=A[G];if(J[RP])Y.push(D);else Y[Q]=D}else Y.push(D);else if(z?.[LK0]!=null)Y.push(z);else Y.push(J.retainNullValues||Z?null:z);else Y[H]=D||null}if($.length=0,Y.length)Y.forEach(function(Q,B){$[B]=Q})}});var yh=O((q66,VE1)=>{VE1.exports=IP;/*!
 * ignore
 */function IP($,F){if($.virtuals[F])return{virtual:$.virtuals[F],path:void 0};let A=F.split("."),J="",X="";for(let Y=0;Y<A.length;++Y){if(J+=(J.length>0?".":"")+A[Y],$.virtuals[J]){if(Y===A.length-1)return{virtual:$.virtuals[J],path:X};continue}if($.nested[J])continue;if($.paths[J]&&$.paths[J].schema){$=$.paths[J].schema;let W=A.slice(Y+1).join(".");if($.virtuals[W]){if(Y===A.length-2)return{virtual:$.virtuals[W],nestedSchemaPath:[X,J].filter((Z)=>!!Z).join(".")};continue}if(Y+1<A.length&&$.discriminators)for(let Z of Object.keys($.discriminators)){let D=IP($.discriminators[Z],W);if(D!=null){let G=[X,J,D.nestedSchemaPath].filter((z)=>!!z).join(".");return{virtual:D.virtual,nestedSchemaPath:G}}}X+=(X.length>0?".":"")+J,J="";continue}else if($.paths[J]?.$isSchemaMap&&$.paths[J].$__schemaType?.schema){$=$.paths[J].$__schemaType.schema,++Y;let W=A.slice(Y+1).join(".");if($.virtuals[W]){if(Y===A.length-2)return{virtual:$.virtuals[W],nestedSchemaPath:[X,J,"$*"].filter((Z)=>!!Z).join(".")};continue}if(Y+1<A.length&&$.discriminators)for(let Z of Object.keys($.discriminators)){let D=IP($.discriminators[Z],W);if(D!=null){let G=[X,J,D.nestedSchemaPath,"$*"].filter((z)=>!!z).join(".");return{virtual:D.virtual,nestedSchemaPath:G}}}X+=(X.length>0?".":"")+"$*"+J,J=""}if($.discriminators)for(let W of Object.keys($.discriminators)){let Z=IP($.discriminators[W],F);if(Z)return Z}return null}}});var CE1=O((TP,NE1)=>{(function($,F){typeof TP==="object"&&typeof NE1<"u"?F(TP):typeof define==="function"&&define.amd?define(["exports"],F):($=typeof globalThis<"u"?globalThis:$||self,F($.sift={}))})(TP,function($){var F=function(p,i){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,J1){r.__proto__=J1}||function(r,J1){for(var k1 in J1)if(Object.prototype.hasOwnProperty.call(J1,k1))r[k1]=J1[k1]},F(p,i)};function A(p,i){if(typeof i!=="function"&&i!==null)throw TypeError("Class extends value "+String(i)+" is not a constructor or null");F(p,i);function r(){this.constructor=p}p.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}typeof SuppressedError==="function"&&SuppressedError;var J=function(p){var i="[object "+p+"]";return function(r){return X(r)===i}},X=function(p){return Object.prototype.toString.call(p)},Y=function(p){if(p instanceof Date)return p.getTime();else if(Z(p))return p.map(Y);else if(p&&typeof p.toJSON==="function")return p.toJSON();return p},W=function(p){return p==null?null:p},Z=J("Array"),D=J("Object"),G=J("Function"),z=function(p,i){return p.hasOwnProperty(i)&&!G(p[i])},H=function(p){return p&&(p.constructor===Object||p.constructor===Array||p.constructor.toString()==="function Object() { [native code] }"||p.constructor.toString()==="function Array() { [native code] }")&&!p.toJSON},U=function(p,i){if(p==null&&p==i)return!0;if(p===i)return!0;if(Object.prototype.toString.call(p)!==Object.prototype.toString.call(i))return!1;if(Z(p)){if(p.length!==i.length)return!1;for(var r=0,J1=p.length;r<J1;r++)if(!U(p[r],i[r]))return!1;return!0}else if(D(p)){if(Object.keys(p).length!==Object.keys(i).length)return!1;for(var k1 in p)if(!U(p[k1],i[k1]))return!1;return!0}return!1},Q=function(p,i,r,J1,k1,J0){var C0=i[J1];if(Z(p)&&isNaN(Number(C0))&&!z(p,C0)){for(var a0=0,U8=p.length;a0<U8;a0++)if(!Q(p[a0],i,r,J1,a0,p))return!1}if(J1===i.length||p==null)return r(p,k1,J0,J1===0,J1===i.length);return Q(p[C0],i,r,J1+1,C0,p)},B=function(){function p(i,r,J1,k1){this.params=i,this.owneryQuery=r,this.options=J1,this.name=k1,this.init()}return p.prototype.init=function(){},p.prototype.reset=function(){this.done=!1,this.keep=!1},p}(),q=function(p){A(i,p);function i(r,J1,k1,J0){var C0=p.call(this,r,J1,k1)||this;return C0.children=J0,C0}return i.prototype.reset=function(){this.keep=!1,this.done=!1;for(var r=0,J1=this.children.length;r<J1;r++)this.children[r].reset()},i.prototype.childrenNext=function(r,J1,k1,J0,C0){var a0=!0,U8=!0;for(var U7=0,SF=this.children.length;U7<SF;U7++){var SW=this.children[U7];if(!SW.done)SW.next(r,J1,k1,J0,C0);if(!SW.keep)U8=!1;if(SW.done){if(!SW.keep)break}else a0=!1}this.done=a0,this.keep=U8},i}(B),L=function(p){A(i,p);function i(r,J1,k1,J0,C0){var a0=p.call(this,r,J1,k1,J0)||this;return a0.name=C0,a0}return i}(q),E=function(p){A(i,p);function i(){var r=p!==null&&p.apply(this,arguments)||this;return r.propop=!0,r}return i.prototype.next=function(r,J1,k1,J0){this.childrenNext(r,J1,k1,J0)},i}(q),V=function(p){A(i,p);function i(r,J1,k1,J0,C0){var a0=p.call(this,J1,k1,J0,C0)||this;return a0.keyPath=r,a0.propop=!0,a0._nextNestedValue=function(U8,U7,SF,SW,Am1){return a0.childrenNext(U8,U7,SF,SW,Am1),!a0.done},a0}return i.prototype.next=function(r,J1,k1){Q(r,this.keyPath,this._nextNestedValue,0,J1,k1)},i}(q),R=function(p,i){if(p instanceof Function)return p;if(p instanceof RegExp)return function(J1){var k1=typeof J1==="string"&&p.test(J1);return p.lastIndex=0,k1};var r=Y(p);return function(J1){return i(r,Y(J1))}},N=function(p){A(i,p);function i(){var r=p!==null&&p.apply(this,arguments)||this;return r.propop=!0,r}return i.prototype.init=function(){this._test=R(this.params,this.options.compare)},i.prototype.next=function(r,J1,k1){if(!Array.isArray(k1)||k1.hasOwnProperty(J1)){if(this._test(r,J1,k1))this.done=!0,this.keep=!0}},i}(B),S=function(p,i,r){return new N(p,i,r)},C=function(p){return function(i,r,J1,k1){return p(i,r,J1,k1)}},M=function(p){return C(function(i,r,J1,k1){var J0=typeof Y(i),C0=p(i);return new N(function(a0){var U8=W(a0);return typeof Y(U8)===J0&&C0(U8)},r,J1,k1)})},I=function(p,i,r,J1){var k1=J1.operations[p];if(!k1)T(p);return k1(i,r,J1,p)},T=function(p){throw Error("Unsupported operation: ".concat(p))},j=function(p,i){for(var r in p)if(i.operations.hasOwnProperty(r)||r.charAt(0)==="$")return!0;return!1},b=function(p,i,r,J1,k1){if(j(i,k1)){var J0=f(i,r,k1),C0=J0[0],a0=J0[1];if(a0.length)throw Error("Property queries must contain only operations, or exact objects.");return new V(p,i,J1,k1,C0)}return new V(p,i,J1,k1,[new N(i,J1,k1)])},g=function(p,i,r){if(i===void 0)i=null;var J1=r===void 0?{}:r,k1=J1.compare,J0=J1.operations,C0={compare:k1||U,operations:Object.assign({},J0||{})},a0=f(p,null,C0),U8=a0[0],U7=a0[1],SF=[];if(U8.length)SF.push(new V([],p,i,C0,U8));if(SF.push.apply(SF,U7),SF.length===1)return SF[0];return new E(p,i,C0,SF)},f=function(p,i,r){var J1=[],k1=[];if(!H(p))return J1.push(new N(p,p,r)),[J1,k1];for(var J0 in p)if(r.operations.hasOwnProperty(J0)){var C0=I(J0,p[J0],p,r);if(C0){if(!C0.propop&&i&&!r.operations[i])throw Error("Malformed query. ".concat(J0," cannot be matched against property."))}if(C0!=null)J1.push(C0)}else if(J0.charAt(0)==="$")T(J0);else k1.push(b(J0.split("."),p[J0],J0,p,r));return[J1,k1]},d=function(p){return function(i,r,J1){return p.reset(),p.next(i,r,J1),p.keep}},s=function(p,i){if(i===void 0)i={};return d(g(p,null,i))},n=function(p){A(i,p);function i(){var r=p!==null&&p.apply(this,arguments)||this;return r.propop=!0,r}return i.prototype.init=function(){this._test=R(this.params,this.options.compare)},i.prototype.reset=function(){p.prototype.reset.call(this),this.keep=!0},i.prototype.next=function(r){if(this._test(r))this.done=!0,this.keep=!1},i}(B),L1=function(p){A(i,p);function i(){var r=p!==null&&p.apply(this,arguments)||this;return r.propop=!0,r}return i.prototype.init=function(){if(!this.params||typeof this.params!=="object")throw Error("Malformed query. $elemMatch must by an object.");this._queryOperation=g(this.params,this.owneryQuery,this.options)},i.prototype.reset=function(){p.prototype.reset.call(this),this._queryOperation.reset()},i.prototype.next=function(r){if(Z(r)){for(var J1=0,k1=r.length;J1<k1;J1++){this._queryOperation.reset();var J0=r[J1];this._queryOperation.next(J0,J1,r,!1),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},i}(B),X1=function(p){A(i,p);function i(){var r=p!==null&&p.apply(this,arguments)||this;return r.propop=!0,r}return i.prototype.init=function(){this._queryOperation=g(this.params,this.owneryQuery,this.options)},i.prototype.reset=function(){p.prototype.reset.call(this),this._queryOperation.reset()},i.prototype.next=function(r,J1,k1,J0){this._queryOperation.next(r,J1,k1,J0),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},i}(B),M1=function(p){A(i,p);function i(){var r=p!==null&&p.apply(this,arguments)||this;return r.propop=!0,r}return i.prototype.init=function(){},i.prototype.next=function(r){if(Z(r)&&r.length===this.params)this.done=!0,this.keep=!0},i}(B),g1=function(p){if(p.length===0)throw Error("$and/$or/$nor must be a nonempty array")},j1=function(p){A(i,p);function i(){var r=p!==null&&p.apply(this,arguments)||this;return r.propop=!1,r}return i.prototype.init=function(){var r=this;g1(this.params),this._ops=this.params.map(function(J1){return g(J1,null,r.options)})},i.prototype.reset=function(){this.done=!1,this.keep=!1;for(var r=0,J1=this._ops.length;r<J1;r++)this._ops[r].reset()},i.prototype.next=function(r,J1,k1){var J0=!1,C0=!1;for(var a0=0,U8=this._ops.length;a0<U8;a0++){var U7=this._ops[a0];if(U7.next(r,J1,k1),U7.keep){J0=!0,C0=U7.keep;break}}this.keep=C0,this.done=J0},i}(B),i1=function(p){A(i,p);function i(){var r=p!==null&&p.apply(this,arguments)||this;return r.propop=!1,r}return i.prototype.next=function(r,J1,k1){p.prototype.next.call(this,r,J1,k1),this.keep=!this.keep},i}(j1),K1=function(p){A(i,p);function i(){var r=p!==null&&p.apply(this,arguments)||this;return r.propop=!0,r}return i.prototype.init=function(){var r=this,J1=Array.isArray(this.params)?this.params:[this.params];this._testers=J1.map(function(k1){if(j(k1,r.options))throw Error("cannot nest $ under ".concat(r.name.toLowerCase()));return R(k1,r.options.compare)})},i.prototype.next=function(r,J1,k1){var J0=!1,C0=!1;for(var a0=0,U8=this._testers.length;a0<U8;a0++){var U7=this._testers[a0];if(U7(r)){J0=!0,C0=!0;break}}this.keep=C0,this.done=J0},i}(B),l0=function(p){A(i,p);function i(r,J1,k1,J0){var C0=p.call(this,r,J1,k1,J0)||this;return C0.propop=!0,C0._in=new K1(r,J1,k1,J0),C0}return i.prototype.next=function(r,J1,k1,J0){if(this._in.next(r,J1,k1),Z(k1)&&!J0){if(this._in.keep)this.keep=!1,this.done=!0;else if(J1==k1.length-1)this.keep=!0,this.done=!0}else this.keep=!this._in.keep,this.done=!0},i.prototype.reset=function(){p.prototype.reset.call(this),this._in.reset()},i}(B),I4=function(p){A(i,p);function i(){var r=p!==null&&p.apply(this,arguments)||this;return r.propop=!0,r}return i.prototype.next=function(r,J1,k1,J0,C0){if(!C0)this.done=!0,this.keep=!this.params;else if(k1.hasOwnProperty(J1)===this.params)this.done=!0,this.keep=!0},i}(B),T4=function(p){A(i,p);function i(r,J1,k1,J0){var C0=p.call(this,r,J1,k1,r.map(function(a0){return g(a0,J1,k1)}),J0)||this;return C0.propop=!1,g1(r),C0}return i.prototype.next=function(r,J1,k1,J0){this.childrenNext(r,J1,k1,J0)},i}(L),b6=function(p){A(i,p);function i(r,J1,k1,J0){var C0=p.call(this,r,J1,k1,r.map(function(a0){return g(a0,J1,k1)}),J0)||this;return C0.propop=!0,C0}return i.prototype.next=function(r,J1,k1,J0){this.childrenNext(r,J1,k1,J0)},i}(L),c2=function(p,i,r){return new N(p,i,r)},h=function(p,i,r,J1){return new n(p,i,r,J1)},c=function(p,i,r,J1){return new j1(p,i,r,J1)},k=function(p,i,r,J1){return new i1(p,i,r,J1)},u=function(p,i,r,J1){return new L1(p,i,r,J1)},_=function(p,i,r,J1){return new l0(p,i,r,J1)},v=function(p,i,r,J1){return new K1(p,i,r,J1)},m=M(function(p){return function(i){return i!=null&&i<p}}),y=M(function(p){return function(i){return i===p||i<=p}}),l=M(function(p){return function(i){return i!=null&&i>p}}),$1=M(function(p){return function(i){return i===p||i>=p}}),o=function(p,i,r){var J1=p[0],k1=p[1];return new N(function(J0){return Y(J0)%J1===k1},i,r)},B1=function(p,i,r,J1){return new I4(p,i,r,J1)},x1=function(p,i,r){return new N(new RegExp(p,i.$options),i,r)},d1=function(p,i,r,J1){return new X1(p,i,r,J1)},N0={number:function(p){return typeof p==="number"},string:function(p){return typeof p==="string"},bool:function(p){return typeof p==="boolean"},array:function(p){return Array.isArray(p)},null:function(p){return p===null},timestamp:function(p){return p instanceof Date}},G6=function(p,i,r){return new N(function(J1){if(typeof p==="string"){if(!N0[p])throw Error("Type alias does not exist");return N0[p](J1)}return J1!=null?J1 instanceof p||J1.constructor===p:!1},i,r)},y6=function(p,i,r,J1){return new T4(p,i,r,J1)},x0=function(p,i,r,J1){return new b6(p,i,r,J1)},x6=function(p,i,r){return new M1(p,i,r,"$size")},o4=function(){return null},OW=function(p,i,r){var J1;if(G(p))J1=p;else if(!process.env.CSP_ENABLED)J1=Function("obj","return "+p);else throw Error('In CSP mode, sift does not support strings in "$where" condition');return new N(function(k1){return J1.bind(k1)(k1)},i,r)},AK=Object.freeze({__proto__:null,$Size:M1,$all:x0,$and:y6,$elemMatch:u,$eq:c2,$exists:B1,$gt:l,$gte:$1,$in:v,$lt:m,$lte:y,$mod:o,$ne:h,$nin:_,$nor:k,$not:d1,$options:o4,$or:c,$regex:x1,$size:x6,$type:G6,$where:OW}),HG=function(p,i,r){var J1=r===void 0?{}:r,k1=J1.compare,J0=J1.operations;return g(p,i,{compare:k1,operations:Object.assign({},AK,J0||{})})},H5=function(p,i){if(i===void 0)i={};var r=HG(p,null,i);return d(r)};$.$Size=M1,$.$all=x0,$.$and=y6,$.$elemMatch=u,$.$eq=c2,$.$exists=B1,$.$gt=l,$.$gte=$1,$.$in=v,$.$lt=m,$.$lte=y,$.$mod=o,$.$ne=h,$.$nin=_,$.$nor=k,$.$not=d1,$.$options=o4,$.$or=c,$.$regex=x1,$.$size=x6,$.$type=G6,$.$where=OW,$.EqualsOperation=N,$.createDefaultQueryOperation=HG,$.createEqualsOperation=S,$.createOperationTester=d,$.createQueryOperation=g,$.createQueryTester=s,$.default=H5,Object.defineProperty($,"__esModule",{value:!0})})});var PE1=O((L66,uh)=>{var ME1=CE1();uh.exports=ME1.default;Object.assign(uh.exports,ME1)});var SE1=O((E66,OE1)=>{var VK0=RM(),NK0=PP(),CK0=EE1(),jP=E4(),MK0=yh(),jE1=Pw(),RE1=NM(),PK0=fv(),hh=O7(),IE1=PE1().default,OP=Z0(),{populateModelSymbol:RK0}=s1();OE1.exports=function(F){let A=Object.assign({},jP(F,"allOptions.options.options"),jP(F,"allOptions.options")),J=Object.assign({},F.options,A,{justOne:F.justOne,isVirtual:F.isVirtual});J.$nullIfNotFound=F.isVirtual;let X=F.populatedModel,Y=[].concat(F.rawIds);F.allIds=[].concat(F.allIds),CK0(F.rawIds,F.rawDocs,F.rawOrder,J);let{docs:W,rawIds:Z,options:D}=F,G=F.count&&F.isVirtual,z,H=0;function U(Q){if(++H,G)return Q;if(Q instanceof NK0)return Q.val;if(Q===void 0)return Q;let B=F.allIds[z];if(F.path.endsWith(".$*"))return Rw(Q,D,J,B);if(F.justOne===!0&&Array.isArray(Q)){let q=[];for(let L of Q){let E=jE1.get(L);if(E==null||E===X)q.push(L)}while(Q.length>q.length)Array.prototype.pop.apply(Q,[]);for(let L=0;L<q.length;++L)Q[L]=q[L];return Rw(Q[0],D,J,B)}else if(F.justOne===!1&&!Array.isArray(Q))return Rw([Q],D,J,B);else if(F.justOne===!0&&!Array.isArray(Q)&&Array.isArray(B))return Rw(Q,D,J,Q==null?Q:B[H-1]);return Rw(Q,D,J,B)}for(z=0;z<W.length;++z){H=0;let Q=F.path.endsWith(".$*")?F.path.slice(0,-3):F.path,B=hh.get(Q,W[z],RE1);if(B==null&&!MK0(F.originalModel.schema,Q))continue;let q;if(G)q=IK0(Z[z]);else if(Array.isArray(F.match))q=Array.isArray(Z[z])?Z[z].filter((S)=>S==null||IE1(F.match[z])(S)):[Z[z]].filter((S)=>S==null||IE1(F.match[z])(S))[0];else q=Z[z];let L=F.originalModel.schema,E=jP(W[z],"$__",null)!=null,V=E?B instanceof Map:OP.isPOJO(B);if(V=V&&jP(L._getSchema(Q),"$isSchemaMap"),!F.isVirtual&&V){let S=B instanceof Map?Array.from(B.keys()):Object.keys(B);q=q.reduce((C,M,I)=>{return C.set(S[I],M),C},new Map)}if(E&&Array.isArray(q)){for(let S of q)if(S?.$__!=null)S.$__.parent=W[z]}else if(E&&q?.$__!=null)q.$__.parent=W[z];if(F.isVirtual&&E){if(W[z].$populated(Q,F.justOne?Y[0]:Y,F.allOptions),Array.isArray(q))q=q.map((S)=>S==null?void 0:S);hh.set(Q,q,W[z],function(C,M,I){if(arguments.length>=3)return C[M]=I,C[M];if(C instanceof Map&&M==="$*")return[...C.values()];return C[M]},U,!1);continue}let R=Q.split("."),N=W[z];for(let S=0;S<R.length-1;++S){if(Array.isArray(N)&&!OP.isArrayIndex(R[S]))break;if(R[S]==="$*")break;if(N[R[S]]==null){let C=R.slice(0,S+1).join("."),M=L._getSchema(C);if(q==null&&M?.$isMongooseArray)break;N[R[S]]={}}if(N=N[R[S]],typeof N!=="object")break}if(W[z].$__){if(F.allOptions.options[RK0]=F.allOptions.model,W[z].$populated(Q,F.unpopulatedValues[z],F.allOptions.options),q?.$__!=null)q.$__.wasPopulated={value:F.unpopulatedValues[z]};if(q instanceof Map&&!q.$isMongooseMap)q=new VK0(q,Q,W[z],W[z].schema.path(Q).$__schemaType)}if(hh.set(Q,q,W[z],RE1,U,!1),W[z].$__)PK0(W[z],[F.allOptions.options])}};function IK0($){if(Array.isArray($)){if($.some((F)=>Array.isArray(F)||F===null))return $.map((F)=>{if(F==null)return 0;if(Array.isArray(F))return F.filter((A)=>A!=null).length;return 1});return $.filter((F)=>F!=null).length}return $==null?0:1}function Rw($,F,A,J){let X=typeof A.transform==="function",Y=X?A.transform:(W)=>W;if(Array.isArray($)){let W=[],Z=$.length;for(let z=0;z<Z;++z){let H=$[z],U=Array.isArray(J)?J[z]:J;if(!mh(H)&&(!A.retainNullValues||H!=null)&&!X)continue;else if(!A.retainNullValues&&H==null)continue;else if(X)H=Y(mh(H)?H:null,U);if(TE1(H,F),W.push(H),F.originalLimit&&W.length>=F.originalLimit)break}let D=W.length;while($.length>D)Array.prototype.pop.apply($,[]);let G=0;if(OP.isMongooseArray($))for(G=0;G<D;++G)$.set(G,W[G],!0);else for(G=0;G<D;++G)$[G]=W[G];return $}if(mh($)||OP.isPOJO($))return TE1($,F),Y($,J);if($ instanceof Map)return $;if(A.justOne===!1)return[];return $==null?Y($,J):Y(null,J)}function TE1($,F){if($!=null&&F.excludeId)if(typeof $.$__setValue==="function")delete $._doc._id;else delete $._id}function mh($){if($==null)return!1;return Array.isArray($)||$.$isMongooseMap||$.$__!=null||jE1.has($)}});var xE1=O((V66,bE1)=>{var TK0=PP(),jK0=yv(),{trusted:SP}=Cz(),_E1=BP();bE1.exports=function(F,A,J,X,Y){let W=OK0(A);if(J.size===1){let Z=Array.from(J)[0],D=X.schema.path(Z);if(Z!=="_id"||!W._id)F=kE1(F,D,Y),W[Z]=SP({$in:F});else if(Z==="_id"&&W._id){let z=_E1(W[Z])?W[Z]:{$eq:W[Z]};W[Z]={...SP({$in:F}),...z}}let G=jK0(Z);for(let z=0;z<G.length-1;++z){let H=G[z];if(W[H]!=null&&W[H].$elemMatch!=null){W[H].$elemMatch[Z.slice(H.length+1)]=SP({$in:F}),delete W[Z];break}}}else{let Z=[];if(Array.isArray(W.$or))W.$and=[{$or:W.$or},{$or:Z}],delete W.$or;else W.$or=Z;for(let D of J)if(D!=="_id"||!W._id){let G=X.schema.path(D);F=kE1(F,G,Y),Z.push({[D]:{$in:F}})}else if(D==="_id"&&W._id){let G=_E1(W[D])?W[D]:{$eq:W[D]};W[D]={...SP({$in:F}),...G}}}return W};function kE1($,F,A){if($=$.filter((J)=>!(J instanceof TK0)),!A)return $;return $.filter((J)=>{try{return F.cast(J),!0}catch{return!1}})}function OK0($){if(Array.isArray($)){if($.length>1)return{$or:[].concat($.map((F)=>Object.assign({},F)))};return Object.assign({},$[0])}return Object.assign({},$)}});var fE1=O((N66,gE1)=>{gE1.exports=function(F,A,J){if(F.length===0)return J();let X=F.length,Y=null;for(let W of F)A(W,function(Z){if(Y!=null)return;if(Z!=null)return Y=Z,J(Y);if(--X<=0)return J()})}});var hE1=O((C66,uE1)=>{/*!
 * ignore
 */var vE1=Rz(),SK0=E4(),_K0=R5(),yE1=Pw(),$H=O7(),kK0=s1().populateModelSymbol;uE1.exports=function $(F,A,J,X){let Y=A.path(X),W=J;if(Y)return Y;let Z=A.discriminatorMapping?.key;if(Z&&F!=null){if(J?.[Z]!=null)A=_K0(F.discriminators,J[Z])?.schema||A;else if(F.discriminators!=null)return Object.keys(F.discriminators).reduce((z,H)=>{let U=F.discriminators[H];return z.concat($(U,U.schema,null,X))},[])}function D(z,H,U,Q){let B=z.length+1,q,L;while(B--){if(L=z.slice(0,B).join("."),q=H.path(L),q==null)continue;if(q.embeddedSchemaType||q.schema){if(q.embeddedSchemaType instanceof vE1)return q.embeddedSchemaType;let R=null;if(q.schema?.discriminators!=null){let N=q.schema.discriminators,S=L+"."+q.schema.options.discriminatorKey,C=U?$H.get(S,U)||[]:[];R=Object.keys(N).reduce(function(M,I){let T=N[I].discriminatorMapping.value;if(J==null||C.indexOf(I)!==-1||C.indexOf(T)!==-1)M.push(N[I]);return M},[])}if(B!==z.length&&q.schema){let N;if(z[B]==="$"){if(B+1===z.length)return q;if(N=D(z.slice(B+1),H,U?$H.get(L,U):null,Q.concat(z.slice(0,B))),N)N.$parentSchemaDocArray=N.$parentSchemaDocArray||(q.schema.$isSingleNested?null:q);return N}if(R!=null&&R.length>0){N=[];for(let S of R){let C=D(z.slice(B),S,U?$H.get(L,U):null,Q.concat(z.slice(0,B)));if(C!=null){if(C.$parentSchemaDocArray=C.$parentSchemaDocArray||(q.schema.$isSingleNested?null:q),C.$parentSchemaDocArray)N.$parentSchemaDocArray=C.$parentSchemaDocArray;N.push(C)}}return N}else{if(N=D(z.slice(B),q.schema,U?$H.get(L,U):null,Q.concat(z.slice(0,B))),N)N.$parentSchemaDocArray=N.$parentSchemaDocArray||(q.schema.$isSingleNested?null:q);return N}}else if(B!==z.length&&q.$isMongooseArray&&q.embeddedSchemaType.$isMongooseArray){let N=q;while(N.$isMongooseArray&&!N.$isMongooseDocumentArray)N=N.embeddedSchemaType;let S=D(z.slice(B),N.schema,null,Q.concat(z.slice(0,B)));if(S!=null)return S;if(N.schema.discriminators){let C=[];for(let M of Object.keys(N.schema.discriminators)){let I=N.schema.discriminators[M]||N.schema,T=D(z.slice(B),I,null,Q.concat(z.slice(0,B)));if(T!=null)C.push(T)}if(C.length>0)return C}}}else if(q.$isSchemaMap&&q.$__schemaType instanceof vE1)return q.$__schemaType;let E=Q.concat([L]).join(".");if(W?.$__&&W.$populated(E,!0)&&B<z.length){let R=W.$populated(E,!0).options[kK0];if(R!=null)return D(z.slice(B),R.schema,U?$H.get(L,U):null,Q.concat(z.slice(0,B)))}let V=SK0(W,L);if(V!=null){let N=(Array.isArray(V)&&V.length>0?yE1.get(V[0]):yE1.get(V))?.schema??null;if(N!=null){let S=D(z.slice(B),N,U?$H.get(L,U):null,Q.concat(z.slice(0,B)));if(S!=null)return S.$parentSchemaDocArray=S.$parentSchemaDocArray||(N.$isSingleNested?null:N),S}}return q}}let G=X.split(".");for(let z=0;z<G.length;++z)if(G[z]==="$")G[z]="0";return D(G,A,J,[])}});var iE1=O((M66,pE1)=>{var nh=T7(),bK0=PP(),xK0=W4(),j5=E4(),gK0=R5(),fK0=F3(),mE1=hE1(),vK0=yh(),Iw=NM(),SZ=O7(),_P=Ky(),C9=Z0(),lh=s1().modelSymbol,dh=s1().populateModelSymbol,ph=wZ().schemaMixedSymbol,yK0=Mv();pE1.exports=function(F,A,J){let X,Y=A.length,W=[],Z=J.model?.modelName||J.model,D,G,z,H,U={},Q=F.schema;if(J._localModel!=null&&J._localModel.schema.nested[J.path])return[];let B=vK0(F.schema,J.path);if((B==null?null:B.virtual)!=null)return uK0(F,A,J,B);let L=mE1(F,Q,null,J.path);if(L=Array.isArray(L)?L:[L].filter((R)=>R!=null),!(J.strictPopulate===!1||J.options?.strictPopulate===!1)&&L.length===0&&J._localModel!=null)return new yK0(J._fullPath||J.path);for(let R=0;R<Y;R++){X=A[R];let N=null;if(X.$__!=null&&X.populated(J.path)){if((J.forceRepopulate??X.constructor.base.options.forceRepopulate)===!1)continue}let S=X?.$__!=null?X.$__schema:Q;if(D=mE1(F,S,X,J.path),D!=null&&D.$isMongooseDocumentArray&&D.options.ref==null&&D.options.refPath==null)continue;if(D?.$parentSchemaDocArray&&j5(J,"options.sort")!=null)return new nh("Cannot populate with `sort` on path "+J.path+" because it is a subproperty of a document array");z=null;let M=!1,I=null,T=null,j=null;if(D?.instance==="Embedded"){if(D.options.ref){let X1={localField:J.path+"._id",foreignField:"_id",justOne:!0},M1=V(X,D,Z,F),g1=SZ.get(J.path,X),j1=SZ.get("_id",g1);ih(F,W,U,M1.modelNames,J,X1,j1,X,T,g1)}continue}if(Array.isArray(D)){let X1=D;for(let M1 of X1){let g1,j1;try{j1=V(X,M1,Z,F),g1=j1.modelNames,M=M||j1.isRefPath,I=I||j1.refPath,N=j1.justOne}catch(i1){return i1}if(M&&!j1.isRefPath)continue;if(!g1)continue;z=z||[],H=H||new Set;for(let i1 of g1)if(H.has(i1)===!1)H.add(i1),z.push(i1)}}else{try{let X1=V(X,D,Z,F);if(z=X1.modelNames,M=X1.isRefPath,I=I||X1.refPath,N=X1.justOne,T=j5(D,"options.populate",null),M)j=z,z=Array.from(new Set(z))}catch(X1){return X1}if(!z)continue}let b={},g=J.path,f="_id";if("justOne"in J&&J.justOne!==void 0)N=J.justOne;else if(D&&!D[ph]){if(J.path.endsWith("."+D.path)||J.path===D.path)N=Array.isArray(D)?D.every((X1)=>!X1.$isMongooseArray):!D.$isMongooseArray}if(!z)continue;b.isVirtual=!1,b.justOne=N,b.localField=g,b.foreignField=f;let d=cE1(X,g,F,J,null,D),s=String(C9.getValue(f,X));J._docs[s]=Array.isArray(d)?d.slice():d;let n=j5(J,"match",null),L1=typeof n==="function";if(L1)n=n.call(X,X);if(ah(n),b.match=n,b.hasMatchFunction=L1,b.isRefPath=M,b.modelNamesInOrder=j,M)z=hK0(X,Q,b,J,I,d)||z;try{ih(F,W,U,z,J,b,d,X,T)}catch(X1){return X1}}return W;function V(R,N,S,C){let M,I=!1,T=null,j=N;if(N?.instance==="Array")N=N.embeddedSchemaType;if(N?.$isSchemaMap)N=N.$__schemaType;let b=N?.options?.ref;if(G=N?.options?.refPath,N!=null&&N[ph]&&!b&&!G&&!S)return{modelNames:null};if(S)M=[S];else if(G!=null){if(typeof G==="function"){let g=J.path.slice(0,J.path.length-N.path.length-1),f=SZ.get(g,R,Iw),d=Array.isArray(f)?C9.array.flatten(f):f?[f]:[];M=new Set;for(let s of d)G=G.call(s,s,J.path),_P(G,R,J.path,Q,J._queryProjection).forEach((n)=>M.add(n));M=Array.from(M)}else M=_P(G,R,J.path,Q,J._queryProjection);I=!0}else{let g,f,d,s,n=C,L1=C.schema.options.discriminatorKey;if(!N&&L1&&(s=C9.getValue(L1,R))){let X1=gK0(C.discriminators,s)||C;if(X1!=null)n=X1;else try{n=rh(C.db,s)}catch(M1){return M1}if(d=n.schema._getSchema(J.path),d?.embeddedSchemaType)d=d.embeddedSchemaType}else d=N;if(j&&j.path.endsWith(".$*"))T=!j.$isMongooseArray&&!j._arrayPath;else if(d!=null)T=!d.$isMongooseArray&&!d._arrayPath;if((g=j5(d,"options.ref"))!=null)if(d!=null&&typeof g==="function"&&J.path.endsWith("."+d.path)){M=new Set;let X1=J.path.slice(0,J.path.length-d.path.length-1),M1=SZ.get(X1,R,Iw),g1=Array.isArray(M1)?C9.array.flatten(M1):M1?[M1]:[];for(let j1 of g1)M.add(ch(g,j1));if(g1.length===0)M=[ch(g,R)];else M=Array.from(M)}else g=ch(g,R),M=[g];else if((d=j5(N,"options.refPath"))!=null)if(I=!0,typeof f==="function"){let X1=J.path.slice(0,J.path.length-d.path.length-1),M1=SZ.get(X1,R,Iw),g1=Array.isArray(M1)?C9.array.flatten(M1):M1?[M1]:[];M=new Set;for(let j1 of g1)f=f.call(j1,j1,J.path),_P(f,R,J.path,Q,J._queryProjection).forEach((i1)=>M.add(i1));M=Array.from(M)}else M=_P(f,R,J.path,Q,J._queryProjection)}if(!M)if(J._localModel==null)M=[C.modelName];else return{modelNames:M,justOne:T,isRefPath:I,refPath:G};if(!Array.isArray(M))M=[M];return{modelNames:M,justOne:T,isRefPath:I,refPath:G}}};/*!
 * ignore
 */function uK0($,F,A,J){let X=[],Y={},W=J.virtual;for(let Z of F){let D=null,G={},z,H=J.nestedSchemaPath?J.nestedSchemaPath+".":"";if(typeof A.localField==="string")z=A.localField;else if(typeof W.options.localField==="function")z=H+W.options.localField.call(Z,Z);else if(Array.isArray(W.options.localField))z=W.options.localField.map((V)=>H+V);else z=H+W.options.localField;if(G.count=W.options.count,W.options.skip!=null&&!Object.hasOwn(A,"skip"))A.skip=W.options.skip;if(W.options.limit!=null&&!Object.hasOwn(A,"limit"))A.limit=W.options.limit;if(W.options.perDocumentLimit!=null&&!Object.hasOwn(A,"perDocumentLimit"))A.perDocumentLimit=W.options.perDocumentLimit;let U=W.options.foreignField;if(!z||!U)return new nh(`Cannot populate virtual \`${A.path}\` on model \`${$.modelName}\`, because options \`localField\` and / or \`foreignField\` are missing`);if(typeof z==="function")z=z.call(Z,Z);if(typeof U==="function")U=U.call(Z,Z);G.isRefPath=!1;let Q=null;if("justOne"in A&&A.justOne!==void 0)Q=A.justOne;if(J.nestedSchemaPath&&typeof W.options.ref==="function"){let V=C9.getValue(J.nestedSchemaPath,Z);D=Array.isArray(V)?V.flatMap((R)=>W._getModelNamesForPopulate(R)):W._getModelNamesForPopulate(V)}else D=W._getModelNamesForPopulate(Z);if(W.options.refPath)Q=!!W.options.justOne,G.isRefPath=!0;else if(W.options.ref)Q=!!W.options.justOne;G.isVirtual=!0,G.virtual=W,G.justOne=Q;let B=j5(G,"virtual.options.match",null)||j5(G,"virtual.options.options.match",null),q=j5(A,"match",null)||B,L=typeof q==="function";if(L)q=q.call(Z,Z,G.virtual);if(Array.isArray(z)&&Array.isArray(U)&&z.length===U.length){q=Object.assign({},q);for(let V=1;V<z.length;++V)q[U[V]]=lE1(SZ.get(z[V],Z,Iw),$.schema),L=!0;z=z[0],U=U[0]}G.localField=z,G.foreignField=U,G.match=q,G.hasMatchFunction=L,ah(q);let E=cE1(Z,z,$,A,W);try{ih($,X,Y,D,A,G,E,Z)}catch(V){return V}}return X}/*!
 * ignore
 */function ih($,F,A,J,X,Y,W,Z,D,G){let z=X.connection??$.db;if(G=G===void 0?W:G,Array.isArray(G))G=C9.cloneArrays(G);if(J==null)return;let H=C9.array.flatten(J),U=H.length;while(U--){let Q=H[U];if(Q==null)continue;let B;if(X.model&&X.model[lh])B=X.model;else if(Q[lh])B=Q,Q=B.modelName;else try{B=rh(z,Q)}catch(V){if(W!==void 0)throw V;B=null}let q=W,L=Y.modelNamesInOrder||J;if(Y.isRefPath&&Array.isArray(W)&&W.length===L.length)q=dE1(W,L,Q);let E=X.perDocumentLimit==null?j5(X,"options.perDocumentLimit",null):X.perDocumentLimit;if(!A[Q]||E!=null){let V={model:B};if(Y.isVirtual&&j5(Y.virtual,"options.options"))V.options=xK0(Y.virtual.options.options);else if(D!=null)V.options=Object.assign({},D);C9.merge(V,X),X[dh]=B,V[dh]=B,A[Q]={model:B,options:V,match:Y.hasMatchFunction?[Y.match]:Y.match,docs:[Z],ids:[q],allIds:[W],unpopulatedValues:[G],localField:new Set([Y.localField]),foreignField:new Set([Y.foreignField]),justOne:Y.justOne,isVirtual:Y.isVirtual,virtual:Y.virtual,count:Y.count,[dh]:B},F.push(A[Q])}else if(A[Q].localField.add(Y.localField),A[Q].foreignField.add(Y.foreignField),A[Q].docs.push(Z),A[Q].ids.push(q),A[Q].allIds.push(W),A[Q].unpopulatedValues.push(G),Y.hasMatchFunction)A[Q].match.push(Y.match)}}function rh($,F){if($.models[F]==null&&$._parent!=null)return rh($._parent,F);return $.model(F)}function dE1($,F,A){if(!Array.isArray(F))return F===A?Array.isArray($)?C9.array.flatten($):[$]:[];if(Array.isArray($)&&Array.isArray(F))return $.flatMap((J,X)=>dE1(J,F[X],A));return[]}/*!
 * ignore
 */function ch($,F){if(typeof $==="function"&&!$[lh])return $.call(F,F);return $}/*!
 * ignore
 */function cE1($,F,A,J,X,Y){let W=A.schema._getPathType(F),Z=W==="real"?A.schema.path(F):W.schema,D=Z?.getters||[];F=Z?.instance==="Embedded"?F+"._id":F;let G=j5(J,"options",{}),z="getters"in G?G.getters:j5(X,"options.getters",!1);if(D.length!==0&&z){let H=$.$__!=null?$:A.hydrate($),U=C9.getValue(F,$);if(Array.isArray(U)){let Q=C9.getValue(F.split(".").slice(0,-1),H);return U.map((B,q)=>Z.applyGetters(B,Q[q]))}else return Z.applyGetters(U,H)}else return lE1(SZ.get(F,$,Iw),Y)}function lE1($,F){if($?.$__!=null)return $._doc._id;if($?._id!=null&&!F?.$isSchemaMap)return $._id;if(Array.isArray($)){let A=$.__array??$;for(let J=0;J<A.length;++J)if(A[J]?.$__!=null)A[J]=A[J]._doc._id;if(C9.isMongooseArray($)&&$.$schema())return $.$schema()._castForPopulate($,$.$parent());return[].concat($)}if(fK0($)==="Object"&&F?.[ph]==null){let A=[];for(let J of Object.keys($))A.push($[J]);return A}if($ instanceof Map)return Array.from($.values());return $}/*!
 * ignore
 */function hK0($,F,A,J,X,Y){if(!A.isRefPath||X==null)return;let W=X.split("."),Z="",D=void 0;for(let G=0;G<W.length;++G){let z=W[G];Z=Z+(Z.length===0?"":".")+z;let H=F.path(Z);if(H!=null&&H.$isMongooseDocumentArray&&H.Constructor.discriminators!=null&&C9.hasOwnKeys(H.Constructor.discriminators)){let U=C9.getValue(Z,$),Q=J.path.substring(Z.length+1),B=H.Constructor.schema.options.discriminatorKey;D=[];for(let q of U){let L=C9.getValue(B,q),V=H.Constructor.discriminators[L]?.schema;if(V==null)continue;let R=V.path(Q);if(R==null||R.options.refPath==null){let S=C9.getValue(A.localField.substring(Z.length+1),q);Y.forEach((C,M)=>{if(C===S)Y[M]=bK0(C)});continue}let N=C9.getValue(W.slice(G+1).join("."),q);D.push(N)}}}return D}function ah($){if($==null)return;if(typeof $!=="object")return;for(let F of Object.keys($)){if(F==="$where")throw new nh("Cannot use $where filter with populate() match");if($[F]!=null&&typeof $[F]==="object")ah($[F])}}});var rE1=O((P66,nE1)=>{var mK0=E4();nE1.exports=function(F){if(Array.isArray(F)){let J=Object.keys(F[0]);return J.length===1&&J[0]==="_id"&&F[0]._id!=="hashed"}if(typeof F!=="object")return!1;let A=mK0(F,"key",{});return Object.keys(A).length===1&&Object.hasOwn(A,"_id")}});var sE1=O((R66,tE1)=>{var kP=E4(),aE1=Z0();tE1.exports=function(F,A,J){if(J.textIndexVersion!=null){delete J.key._fts,delete J.key._ftsx;let Z={...J.weights,...J.key};if(Object.keys(Z).length!==Object.keys(F).length)return!1;for(let D of Object.keys(Z)){if(!(D in F))return!1;let G=Z[D];if(G!==kP(A,"weights."+D)&&!(G===1&&kP(A,"weights."+D)==null))return!1}if(A.default_language!==J.default_language)return J.default_language==="english"&&A.default_language==null;return!0}let X=["unique","partialFilterExpression","sparse","expireAfterSeconds","collation"];for(let Z of X){if(!(Z in A)&&!(Z in J))continue;if(Z==="collation"){if(A[Z]==null||J[Z]==null)return A[Z]==null&&J[Z]==null;let D=Object.keys(A.collation),G=A.collation,z=J.collation;for(let H of D)if(kP(G,H)!==kP(z,H))return!1}else if(!aE1.deepEqual(A[Z],J[Z]))return!1}let Y=Object.keys(F),W=Object.keys(J.key);if(Y.length!==W.length)return!1;for(let Z=0;Z<Y.length;++Z){if(Y[Z]!==W[Z])return!1;if(!aE1.deepEqual(F[Y[Z]],J.key[W[Z]]))return!1}return!0}});var eE1=O((I66,oE1)=>{oE1.exports=function(F,A){if(A.timeseries==null)return!1;let{timeField:J,metaField:X}=A.timeseries;if(typeof J!=="string"||typeof X!=="string")return!1;return Object.keys(F.key).length===2&&F.key[J]===1&&F.key[X]===1}});var JV1=O((T66,AV1)=>{var dK0=BP();function cK0($,F){return FV1({baseModelName:$.baseModelName,discriminatorMapping:$.schema.discriminatorMapping,indexes:F,indexesType:"schema"})}function lK0($,F){return FV1({baseModelName:$.baseModelName,discriminatorMapping:$.schema.discriminatorMapping,indexes:F,indexesType:"db"})}AV1.exports={getRelatedSchemaIndexes:cK0,getRelatedDBIndexes:lK0};function FV1({baseModelName:$,discriminatorMapping:F,indexes:A,indexesType:J}){let X=F?.key,Y=F?.value;if(!X)return A;if(Boolean($))return A.filter((Z)=>{let D=$V1(Z,J);return D&&D[X]===Y});return A.filter((Z)=>{let D=$V1(Z,J);return!D||!D[X]||dK0(D[X])&&!("$eq"in D[X])})}function $V1($,F){if(F==="schema")return $[1]?.partialFilterExpression;return $.partialFilterExpression}});var YV1=O((j66,XV1)=>{XV1.exports=pK0;/*!
 * ignore
 */async function pK0($,F,A){if(A<=0)throw Error("Limit must be positive");if($.length===0)return[];let J=[],X=new Set;for(let Y=0;Y<$.length;Y++){let W=$[Y],Z=F(W,Y);J.push(Z),X.add(Z);let D=()=>X.delete(Z);if(Z.then(D).catch(D),X.size>=A)await Promise.race(X)}return Promise.all(J)}});var ZV1=O((O66,WV1)=>{WV1.exports=function $(F,A,J){if(A==null)return;for(let X=0;X<A.length;++X)if(Array.isArray(A[X]))$(F,A[X],J+"."+X);else F.push(J+"."+X)}});var UV1=O((S66,HV1)=>{var DV1=E4(),GV1=O7(),zV1=Nh();/*!
 * ignore
 */HV1.exports=function(F,A,J){let X=zV1(DV1(A,"select",null),!0)||zV1(DV1(A,"options.select",null),!0);if(X==null)return;for(let Y of F){if(!Object.hasOwn(X,"-"+Y))continue;for(let W of J)if(W.$__!=null)GV1.unset(Y,W._doc);else GV1.unset(Y,W)}}});var fh=O((_V1,kV1)=>{/*!
 * Module dependencies.
 */var iK0=_h(),nK0=$v(),aF=pF(),rK0=mC(),oh=Z1("events").EventEmitter,Ow=QZ(),gP=ku(),P0=T7(),aK0=rC(),tK0=Qv(),bP=EP(),sK0=mL1(),eh=VZ(),xP=BZ(),NV1=Gv(),QV1=Hv(),oK0=aC(),eK0=cL1(),$B0=xh(),FB0=iL1(),CV1=rL1(),AB0=sL1(),JB0=Gh(),MV1=FE1(),XB0=JE1(),PV1=YE1(),YB0=zE1(),RV1=zh(),WB0=QE1(),ZB0=SE1(),DB0=au(),qJ=W4(),GB0=xE1(),IV1=nu(),th=fu(),TV1=$M(),zB0=lM(),HB0=fE1(),Sw=E4(),UB0=F3(),Tw=R5(),QB0=iE1(),KV1=TX(),Fm=V$().internalToObjectOptions,Am=rE1(),jV1=sE1(),KB0=eE1(),{getRelatedDBIndexes:BB0,getRelatedSchemaIndexes:wB0}=JV1(),Jm=wy(),qB0=AM(),LB0=Pw(),EB0=YV1(),VB0=Oh(),OV1=ZV1(),NB0=UV1(),CB0=hu(),BV1=Z1("util"),m6=Z0(),MB0=vv(),PB0=wv(),RB0=nC(),_Z=tu(),kZ=Symbol("mongoose#Model#collection"),bZ=Symbol("mongoose#Model#db"),SV1=s1().modelSymbol,jw=Symbol("mongoose#Model#subclassed"),{VERSION_INC:fP,VERSION_WHERE:wV1,VERSION_ALL:IB0}=aF,TB0=Object.assign({},Fm,{bson:!0});function C1($,F,A){if(F instanceof eh)throw TypeError("2nd argument to `Model` constructor must be a POJO or string, **not** a schema. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");if(typeof $==="string")throw TypeError("First argument to `Model` constructor must be an object, **not** a string. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");aF.call(this,$,F,A)}Object.setPrototypeOf(C1.prototype,aF.prototype);C1.prototype.$isMongooseModelPrototype=!0;C1.prototype.db;C1.useConnection=function(F){if(!F)throw Error("Please provide a connection.");if(this.db)delete this.db.models[this.modelName],delete this.prototype.db,delete this.prototype[bZ],delete this.prototype.collection,delete this.prototype.$collection,delete this.prototype[kZ];this.db=F;let A=F.collection(this.collection.collectionName,F.options);return this.prototype.collection=A,this.prototype.$collection=A,this.prototype[kZ]=A,this.prototype.db=F,this.prototype[bZ]=F,this.collection=A,this.$__collection=A,F.models[this.modelName]=this,this};C1.prototype.collection;C1.prototype.$__collection;C1.prototype.modelName;C1.prototype.$where;C1.prototype.baseModelName;C1.events;C1._middleware;/*!
 * ignore
 */function $m($,F){if($.$where==null)return;for(let A of Object.keys($.$where))F[A]=$.$where[A]}/*!
 * ignore
 */function jB0($,F){let A={};if(RV1($.$__schema,F),typeof F.writeConcern<"u"){if(A.writeConcern={},"w"in F.writeConcern)A.writeConcern.w=F.writeConcern.w;if("j"in F.writeConcern)A.writeConcern.j=F.writeConcern.j;if("wtimeout"in F.writeConcern)A.writeConcern.wtimeout=F.writeConcern.wtimeout}else{if("w"in F)A.w=F.w;if("j"in F)A.j=F.j;if("wtimeout"in F)A.wtimeout=F.wtimeout}if("checkKeys"in F)A.checkKeys=F.checkKeys;let J=$.$session(),X=$[bZ].base.transactionAsyncLocalStorage?.getStore();if(J!=null)A.session=J;else if(!Object.hasOwn(F,"session")&&X?.session!=null)A.session=X.session;return A}/*!
 * ignore
 */C1.prototype.$__save=async function(F){try{await this._execDocumentPreHooks("save",F)}catch(W){await this._execDocumentPostHooks("save",W);return}let A=null,J=null;try{let W=jB0(this,F);if(this.$isNew){let Z=this.toObject(TB0);if((Z||{})._id===void 0)throw new P0("document must have an _id before saving");this.$__version(!0,Z),this.$__reset(),FH(this,!1),this.$__.inserting=!0,A=await this[kZ].insertOne(Z,W).catch((D)=>{throw FH(this,!0),D})}else{this.$__.inserting=!1;let Z=this.$__delta();if(F.pathsToSave)for(let D in Z[1].$set)if(F.pathsToSave.includes(D))continue;else if(F.pathsToSave.some((G)=>D.slice(0,G.length)===G&&D.charAt(G.length)==="."))continue;else delete Z[1].$set[D];if(Z){J=this.$__where(Z[0]),$m(this,J);let D=Z[1];if(this.$__schema.options.minimize)for(let G of Object.values(D)){if(G==null)continue;for(let z of Object.keys(G)){if(G[z]==null||typeof G[z]!=="object")continue;if(!m6.isPOJO(G[z]))continue;if(MB0(G[z]),m6.hasOwnKeys(G[z])===!1)delete G[z],D.$unset=D.$unset||{},D.$unset[z]=1}}this.$__.modifiedPaths=this.modifiedPaths(),this.$__reset(),FH(this,!1),A=await this[kZ].updateOne(J,D,W).catch((G)=>{throw this.$__undoReset(),G})}else{if(J=this.$__where(),$m(this,J),this.$__.version)this.$__version(J,Z);JB0(this.$__schema,W),A=await this.constructor.collection.findOne(J,{...W,projection:{_id:1}}).then((D)=>({matchedCount:!D?0:1}))}}}catch(W){let Z=this.$__schema._transformDuplicateKeyError(W);await this._execDocumentPostHooks("save",Z);return}let X=0;if((F!=null?F.writeConcern!=null?F.writeConcern.w:F.w:0)!==0){if(A!=null)if(Array.isArray(A))X=A.length;else if(A.matchedCount!=null)X=A.matchedCount;else X=A;if(this.$__.version&&!this.$__.inserting){let Z=fP===(fP&this.$__.version);this.$__.version=void 0;let D=this.$__schema.options.versionKey,G=this.$__getValue(D)||0;if(X<=0){this.$__undoReset();let z=this.$__.$versionError||new NV1(this,G,this.$__.modifiedPaths);await this._execDocumentPostHooks("save",z);return}if(Z)this.$__setValue(D,G+1)}if(A!=null&&X<=0){this.$__undoReset();let Z=new rK0(J,this.constructor.modelName,X,A);await this._execDocumentPostHooks("save",Z);return}}this.$__.saving=void 0,this.$__.savedState={},this.$emit("save",this,X),this.constructor.emit("save",this,X),await this._execDocumentPostHooks("save")};/*!
 * ignore
 */function OB0($,F,A){let J=$.$__schema.options.versionKey;if(!J)return null;let X=$.$__getValue(J)||0;return new NV1($,X,F.concat(A))}C1.prototype.save=async function(F){if(typeof F==="function"||typeof arguments[1]==="function")throw new P0("Model.prototype.save() no longer accepts a callback");let A;if(this.$op="save",this.$__.saving)A=new QV1(this);else this.$__.saving=new QV1(this);if(F=new sK0(F),Object.hasOwn(F,"session"))this.$session(F.session);if(this.$__.timestamps!=null)F.timestamps=this.$__.timestamps;if(this.$__.$versionError=OB0(this,this.modifiedPaths(),Object.keys(this.$__.activePaths.getStatePaths("default"))),A)throw this.$__handleReject(A),A;this.$__.saveOptions=F;try{await this.$__save(F)}catch(J){throw this.$__handleReject(J),J}finally{this.$__.saving=null,this.$__.saveOptions=null,this.$__.$versionError=null,this.$op=null}return this};C1.prototype.$save=C1.prototype.save;C1.prototype.$__version=function($,F){let A=this.$__schema.options.versionKey;if($===!0){if(A)CB0(F,A,0),this.$__setValue(A,0);return}if(A===!1)return;if(!this.$__isSelected(A))return;if(wV1===(wV1&this.$__.version)){let J=this.$__getValue(A);if(J!=null)$[A]=J}if(fP===(fP&this.$__.version))if(Sw(F.$set,A,null)!=null)++F.$set[A];else F.$inc=F.$inc||{},F.$inc[A]=1};C1.prototype.increment=function(){return this.$__.version=IB0,this};C1.prototype.$__where=function(F){if(F||(F={}),!F._id)F._id=this._doc._id;if(this._doc._id===void 0)throw new P0("No _id found on document!");return F};C1.prototype.deleteOne=function(F){if(typeof F==="function"||typeof arguments[1]==="function")throw new P0("Model.prototype.deleteOne() no longer accepts a callback");if(!F)F={};if(Object.hasOwn(F,"session"))this.$session(F.session);let A=this,J=this.$__where(),X=A.constructor.deleteOne();if(this.$session()!=null){if(!("session"in X.options))X.options.session=this.$session()}return X.pre(async function(){let W=await A.constructor._middleware.execPre("deleteOne",A,[A,F]);if(W[0]!==A||W[1]!==F)throw Error("Document deleteOne pre hooks cannot overwrite arguments");if(X.deleteOne(J,F),A.$where!=null)this.where(A.$where);return W}),X.pre(function(){return Promise.all(A.$getAllSubdocs().map((W)=>W.constructor._middleware.execPre("deleteOne",W,[W])))}),X.pre(function(){if(A.$__.isDeleted)throw new Ow.skipWrappedFunction}),X.post(function(){return Promise.all(A.$getAllSubdocs().map((W)=>W.constructor._middleware.execPost("deleteOne",W,[W])))}),X.post(function(){return A.constructor._middleware.execPost("deleteOne",A,[A],{})}),X.transform(function(W){if(W?.deletedCount>0)A.$isDeleted(!0);return W}),X};C1.prototype.$model=function(F){if(arguments.length===0)return this.constructor;return this[bZ].model(F)};C1.prototype.model=C1.prototype.$model;C1.exists=function(F,A){if(k0(this,"exists"),typeof arguments[2]==="function")throw new P0("Model.exists() no longer accepts a callback");return this.findOne(F).select({_id:1}).lean().setOptions(A)};C1.discriminator=function($,F,A){let J;if(typeof $==="function"){if(J=$,$=m6.getFunctionName(J),!(J.prototype instanceof C1))throw new P0("The provided class "+$+" must extend Model")}A=A||{};let X=m6.isPOJO(A)?A.value:A,Y=typeof A.clone==="boolean"?A.clone:!0,W=typeof A.mergePlugins==="boolean"?A.mergePlugins:!0,Z=typeof A.overwriteModels==="boolean"?A.overwriteModels:!1;if(k0(this,"discriminator"),m6.isObject(F)&&!F.instanceOfSchema)F=new eh(F);if(F instanceof eh&&Y)F=F.clone();if(F=zB0(this,$,F,X,W,A.mergeHooks,Z),this.db.models[$]&&!F.options.overwriteModels&&!Z)throw new tK0($);F.$isRootDiscriminator=!0,F.$globalPluginsApplied=!0,J=this.db.model(J||$,F,this.$__collection.name),this.discriminators[$]=J;let D=this.discriminators[$];if(Object.setPrototypeOf(D.prototype,this.prototype),Object.defineProperty(D,"baseModelName",{value:this.modelName,configurable:!0,writable:!1}),CV1(D,F),PV1(D,F),this[jw]!=null)for(let G of this[jw])G.discriminators=G.discriminators||{},G.discriminators[$]=J.__subclass(J.db,F,G.collection.name);return D};function k0($,F){if($==null||$===global)throw new P0("`Model."+F+"()` cannot run without a model as `this`. Make sure you are calling `MyModel."+F+"()` where `MyModel` is a Mongoose model.");else if($[SV1]==null)throw new P0("`Model."+F+"()` cannot run without a model as `this`. Make sure you are not calling `new Model."+F+"()`")}/*!
 * Give the constructor the ability to emit events.
 */for(let $ in oh.prototype)C1[$]=oh.prototype[$];C1.init=function(){if(k0(this,"init"),typeof arguments[0]==="function")throw new P0("Model.init() no longer accepts a callback");if(this.schema.emit("init",this),this.$init!=null)return this.$init;let F=this.db,A=async()=>{if(!m6.getOption("autoIndex",this.schema.options,F.config,F.base.options))return;return await this.ensureIndexes({_automatic:!0})},J=async()=>{if(!m6.getOption("autoSearchIndex",this.schema.options,F.config,F.base.options))return;return await this.createSearchIndexes()},X=async()=>{let Z=m6.getOption("autoCreate",this.schema.options,F.config);if(Z==null)await F._waitForConnect(!0),Z=m6.getOption("autoCreate",this.schema.options,F.config,F.base.options);if(!Z)return;return await this.createCollection()};this.$init=X().then(()=>A()).then(()=>J());let Y=this.$init.catch,W=this;return this.$init.catch=function(){return W.$caught=!0,Y.apply(W.$init,arguments)},this.$init};C1.createCollection=async function(F){if(k0(this,"createCollection"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new P0("Model.createCollection() no longer accepts a callback");[F]=await this.hooks.execPre("createCollection",this,[F]).catch((Z)=>{if(Z instanceof Ow.skipWrappedFunction)return[Z];throw Z});let A=this?.schema?.options?.collectionOptions;if(A!=null)F=Object.assign({},A,F);let J=this?.schema?.options?.collation;if(J!=null)F=Object.assign({collation:J},F);let X=this?.schema?.options?.capped;if(X!=null){if(typeof X==="number")F=Object.assign({capped:!0,size:X},F);else if(typeof X==="object")F=Object.assign({capped:!0},X,F)}let Y=this?.schema?.options?.timeseries;if(Y!=null){if(F=Object.assign({timeseries:Y},F),F.expireAfterSeconds!=null);else if(F.expires!=null)m6.expires(F);else if(this.schema.options.expireAfterSeconds!=null)F.expireAfterSeconds=this.schema.options.expireAfterSeconds;else if(this.schema.options.expires!=null)F.expires=this.schema.options.expires,m6.expires(F)}let W=this?.schema?.options?.clusteredIndex;if(W!=null)F=Object.assign({clusteredIndex:{...W,unique:!0}},F);try{if(!(F instanceof Ow.skipWrappedFunction))await this.db.createCollection(this.$__collection.collectionName,F)}catch(Z){if(Z!=null&&(Z.name!=="MongoServerError"||Z.code!==48))await this.hooks.execPost("createCollection",this,[null],{error:Z})}return await this.hooks.execPost("createCollection",this,[this.$__collection]),this.$__collection};C1.syncIndexes=async function(F){if(k0(this,"syncIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new P0("Model.syncIndexes() no longer accepts a callback");if(F?.autoCreate??this.schema.options?.autoCreate??this.db.config.autoCreate??this.db.base?.options?.autoCreate??!0)try{await this.createCollection()}catch(Y){if(Y!=null&&(Y.name!=="MongoServerError"||Y.code!==48))throw Y}let J=await this.diffIndexes({indexOptionsToCreate:!0}),X=await this.cleanIndexes({...F,toDrop:J.toDrop});return await this.createIndexes({...F,toCreate:J.toCreate}),X};C1.createSearchIndex=async function(F){return k0(this,"createSearchIndex"),await this.$__collection.createSearchIndex(F)};C1.updateSearchIndex=async function(F,A){return k0(this,"updateSearchIndex"),await this.$__collection.updateSearchIndex(F,A)};C1.dropSearchIndex=async function(F){return k0(this,"dropSearchIndex"),await this.$__collection.dropSearchIndex(F)};C1.listSearchIndexes=async function(F){return k0(this,"listSearchIndexes"),await(await this.$__collection.listSearchIndexes(F)).toArray()};C1.diffIndexes=async function(F){if(typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new P0("Model.syncIndexes() no longer accepts a callback");let A=this,J=await A.listIndexes().catch((D)=>{if(D.codeName=="NamespaceNotFound")return;throw D});if(J===void 0)J=[];J=BB0(A,J);let X=A.schema,Y=wB0(A,X.indexes()),W=_B0(X,Y,J),Z=SB0(X,Y,J,W,F);return{toDrop:W,toCreate:Z}};function SB0($,F,A,J,X){let Y=[],W=X?.indexOptionsToCreate??!1;for(let[Z,D]of F){let G=!1,z=Jm($,qJ(D));for(let H of A){if(Am(H))continue;if(jV1(Z,z,H)&&!J.includes(H.name)){G=!0;break}}if(!G)if(W)Y.push([Z,D]);else Y.push(Z)}return Y}function _B0($,F,A){let J=[];for(let X of A){let Y=!1;if(Am(X))continue;if(KB0(X,$.options))continue;for(let[W,Z]of F){let D=Jm($,qJ(Z));if(MV1(W,D,$.options),jV1(W,D,X)){Y=!0;break}}if(Y)continue;J.push(X.name)}return J}C1.cleanIndexes=async function(F){if(k0(this,"cleanIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new P0("Model.cleanIndexes() no longer accepts a callback");let A=this;if(Array.isArray(F?.toDrop))return await qV1(F.toDrop,A,F);let J=await A.diffIndexes();return await qV1(J.toDrop,A,F)};async function qV1($,F,A){if($.length===0)return[];let J=F.$__collection;if(A?.hideIndexes)await Promise.all($.map((X)=>{return F.db.db.command({collMod:J.collectionName,index:{name:X,hidden:!0}})}));else await Promise.all($.map((X)=>J.dropIndex(X)));return $}C1.listIndexes=async function(){if(k0(this,"listIndexes"),typeof arguments[0]==="function")throw new P0("Model.listIndexes() no longer accepts a callback");if(this.$__collection.buffer)await new Promise((F)=>{this.$__collection.addQueue(F)});return this.$__collection.listIndexes().toArray()};C1.ensureIndexes=async function(F){if(k0(this,"ensureIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new P0("Model.ensureIndexes() no longer accepts a callback");await new Promise((A,J)=>{kB0(this,F,(X)=>{if(X!=null)return J(X);A()})})};C1.createIndexes=async function(F){if(k0(this,"createIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new P0("Model.createIndexes() no longer accepts a callback");return this.ensureIndexes(F)};/*!
 * ignore
 */function kB0($,F,A){let J=Array.isArray(F?.toCreate)?F.toCreate:$.schema.indexes(),X;F=F||{};let Y=function(H){if(H&&!$.$caught)$.emit("error",H);$.emit("index",H||X),A&&A(H||X)};for(let H of J)if(Am(H))m6.warn('mongoose: Cannot specify a custom index on `_id` for model name "'+$.modelName+'", MongoDB does not allow overwriting the default `_id` index. See https://bit.ly/mongodb-id-index');if(!J.length){KV1(function(){Y()});return}let W=function(H,U,Q,B){$.emit("index-single-done",H,U,Q,B)},Z=function(H,U){$.emit("index-single-start",H,U)},D=$.schema._baseSchema,G=D?D.indexes():[];KV1(function(){if(F._automatic&&!$.collection.collection)$.collection.addQueue(z,[]);else z()});function z(){if(F._automatic){if($.schema.options.autoIndex===!1||$.schema.options.autoIndex==null&&$.db.config.autoIndex===!1)return Y()}let H=J.shift();if(!H)return Y();if(F._automatic&&H[1]._autoIndex===!1)return z();if(G.find((q)=>m6.deepEqual(q,H)))return z();let U=qJ(H[0]),Q=qJ(H[1]);delete Q._autoIndex,Jm($.schema,Q),RV1($.schema,Q),MV1(U,Q,$.schema.options),Z(U,F);let B=null;try{B=$.collection.createIndex(U,Q)}catch(q){if(!X)X=q;if(!$.$caught)$.emit("error",q);W(q,U,Q),z();return}B.then((q)=>{W(null,U,Q,q),z()},(q)=>{if(!X)X=q;if(!$.$caught)$.emit("error",q);W(q,U,Q),z()})}}C1.createSearchIndexes=async function(){k0(this,"createSearchIndexes");let F=[];for(let A of this.schema._searchIndexes)F.push(await this.createSearchIndex(A));return F};C1.schema;C1.db;C1.collection;C1.$__collection;C1.base;C1.discriminators;C1.translateAliases=function(F,A){k0(this,"translateAliases");let J=(X,Y)=>{let W,Z=[],D=X.split("."),G=this.schema;for(let H in D){let U=D[H];if(G?.aliases[U]){if(W=G.aliases[U],A&&W in F)throw new P0(`Provided object has both field "${U}" and its alias "${W}"`);Z.push(W)}else W=U,Z.push(U);if(G?.paths[W])G=G.paths[W].schema;else G=null}let z=Z.join(".");if(F instanceof Map)F.set(z,Y);else F[z]=Y;if(z!==X)if(F instanceof Map)F.delete(X);else delete F[X];return F};if(typeof F==="object"){if(F instanceof Map)for(let X of new Map(F))F=J(X[0],X[1]);else for(let X of Object.keys(F))if(F=J(X,F[X]),X[0]==="$")if(Array.isArray(F[X]))for(let Y in F[X])F[X][Y]=this.translateAliases(F[X][Y]);else this.translateAliases(F[X]);return F}else return F};C1.deleteOne=function(F,A){if(k0(this,"deleteOne"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new P0("Model.prototype.deleteOne() no longer accepts a callback");let J=new this.Query({},{},this,this.$__collection);return J.setOptions(A),J.deleteOne(F)};C1.deleteMany=function(F,A){if(k0(this,"deleteMany"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new P0("Model.deleteMany() no longer accepts a callback");let J=new this.Query({},{},this,this.$__collection);return J.setOptions(A),J.deleteMany(F)};C1.find=function(F,A,J){if(k0(this,"find"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new P0("Model.find() no longer accepts a callback");let X=new this.Query({},{},this,this.$__collection);return X.select(A),X.setOptions(J),X.find(F)};C1.findById=function(F,A,J){if(k0(this,"findById"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new P0("Model.findById() no longer accepts a callback");return this.findOne({_id:F},A,J)};C1.findOne=function(F,A,J){if(k0(this,"findOne"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new P0("Model.findOne() no longer accepts a callback");let X=new this.Query({},{},this,this.$__collection);return X.select(A),X.setOptions(J),X.findOne(F)};C1.estimatedDocumentCount=function(F){return k0(this,"estimatedDocumentCount"),new this.Query({},{},this,this.$__collection).estimatedDocumentCount(F)};C1.countDocuments=function(F,A){if(k0(this,"countDocuments"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new P0("Model.countDocuments() no longer accepts a callback");let J=new this.Query({},{},this,this.$__collection);if(A!=null)J.setOptions(A);return J.countDocuments(F)};C1.distinct=function(F,A,J){if(k0(this,"distinct"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new P0("Model.distinct() no longer accepts a callback");let X=new this.Query({},{},this,this.$__collection);if(J!=null)X.setOptions(J);return X.distinct(F,A)};C1.where=function(F,A){k0(this,"where");let J=new this.Query({},{},this,this.$__collection).find({});return J.where.apply(J,arguments)};C1.$where=function(){k0(this,"$where");let F=new this.Query({},{},this,this.$__collection).find({});return F.$where.apply(F,arguments)};C1.findOneAndUpdate=function($,F,A){if(k0(this,"findOneAndUpdate"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new P0("Model.findOneAndUpdate() no longer accepts a callback");let J;if(A)J=A.fields||A.projection;F=qJ(F,{depopulate:!0,_isNested:!0}),IV1(F,A,this.schema.options.versionKey);let X=new this.Query({},{},this,this.$__collection);return X.select(J),X.findOneAndUpdate($,F,A)};C1.findByIdAndUpdate=function($,F,A){if(k0(this,"findByIdAndUpdate"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new P0("Model.findByIdAndUpdate() no longer accepts a callback");if($ instanceof aF)$=$._doc._id;return this.findOneAndUpdate.call(this,{_id:$},F,A)};C1.findOneAndDelete=function($,F){if(k0(this,"findOneAndDelete"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new P0("Model.findOneAndDelete() no longer accepts a callback");let A;if(F)A=F.select,F.select=void 0;let J=new this.Query({},{},this,this.$__collection);return J.select(A),J.findOneAndDelete($,F)};C1.findByIdAndDelete=function($,F){if(k0(this,"findByIdAndDelete"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new P0("Model.findByIdAndDelete() no longer accepts a callback");return this.findOneAndDelete({_id:$},F)};C1.findOneAndReplace=function($,F,A){if(k0(this,"findOneAndReplace"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new P0("Model.findOneAndReplace() no longer accepts a callback");let J;if(A)J=A.select,A.select=void 0;let X=new this.Query({},{},this,this.$__collection);return X.select(J),X.findOneAndReplace($,F,A)};C1.create=async function(F,A){if(typeof A==="function"||typeof arguments[2]==="function")throw new P0("Model.create() no longer accepts a callback");k0(this,"create");let J,X=this.schema.options.discriminatorKey;if(Array.isArray(F))J=F,A=A!=null&&typeof A==="object"?A:{};else{let Z=arguments[arguments.length-1];if(A={},typeof Z==="function"||typeof A==="function"||typeof arguments[2]==="function")throw new P0("Model.create() no longer accepts a callback");else if(J=[...arguments],J.length>1&&!Z)J.pop();if(J.length===2&&J[0]!=null&&J[1]!=null&&J[0].session==null&&Z&&UB0(Z.session)==="ClientSession"&&!this.schema.path("session"))m6.warn("WARNING: to pass a `session` to `Model.create()` in Mongoose, you **must** pass an array as the first argument. See: https://mongoosejs.com/docs/api/model.html#Model.create()")}if(J.length===0)return Array.isArray(F)?[]:null;let Y=[],W=typeof A.aggregateErrors==="boolean"?!A.aggregateErrors:!0;if(delete A.aggregateErrors,A.session&&!A.ordered&&J.length>1)throw new P0("Cannot call `create()` with a session and multiple documents unless `ordered: true` is set");if(A.ordered){for(let Z=0;Z<J.length;Z++)try{let D=J[Z],G=this.discriminators&&D[X]!=null?this.discriminators[D[X]]||Tw(this.discriminators,D[X]):this;if(G==null)throw new P0(`Discriminator "${D[X]}" not found for model "${this.modelName}"`);let z=D;if(!(z instanceof G))z=new G(z);await z.$save(A),Y.push(z)}catch(D){if(!W)Y.push(D);else throw D}return Y}else if(!W)Y=await Promise.allSettled(J.map(async(Z)=>{let D=this.discriminators&&Z[X]!=null?this.discriminators[Z[X]]||Tw(this.discriminators,Z[X]):this;if(D==null)throw new P0(`Discriminator "${Z[X]}" not found for model "${this.modelName}"`);let G=Z;if(!(G instanceof D))G=new D(G);return await G.$save(A),G})),Y=Y.map((Z)=>Z.status==="fulfilled"?Z.value:Z.reason);else{let Z=null;if(Y=await Promise.all(J.map(async(D)=>{let G=this.discriminators&&D[X]!=null?this.discriminators[D[X]]||Tw(this.discriminators,D[X]):this;if(G==null)throw new P0(`Discriminator "${D[X]}" not found for model "${this.modelName}"`);try{let z=D;if(!(z instanceof G))z=new G(z);return await z.$save(A),z}catch(z){if(!Z)Z=z}})),Z)throw Z}if(!Array.isArray(F)&&J.length===1)return Y[0];return Y};C1.insertOne=async function(F,A){k0(this,"insertOne");let J=this.schema.options.discriminatorKey,X=this.discriminators&&F[J]!=null?this.discriminators[F[J]]||Tw(this.discriminators,F[J]):this;if(X==null)throw new P0(`Discriminator "${F[J]}" not found for model "${this.modelName}"`);if(!(F instanceof X))F=new X(F);return await F.$save(A)};C1.watch=function($,F){k0(this,"watch"),F=F||{};let A=F?.hydrate!==void 0?m6.omit(F,["hydrate"]):{...F};return F.model=this,new nK0((X)=>{if($=$||[],VB0($,this.schema,"fullDocument"),this.$__collection.buffer)this.$__collection.addQueue(()=>{if(this.closed)return;let Y=this.$__collection.watch($,A);X(null,Y)});else{let Y=this.$__collection.watch($,A);X(null,Y)}},$,F)};C1.startSession=function(){return k0(this,"startSession"),this.db.startSession.apply(this.db,arguments)};C1.insertMany=async function(F,A){if(k0(this,"insertMany"),typeof A==="function"||typeof arguments[2]==="function")throw new P0("Model.insertMany() no longer accepts a callback");try{[F]=await this._middleware.execPre("insertMany",this,[F])}catch(N){await this._middleware.execPost("insertMany",this,[F],{error:N})}A=A||{};let J=this,X=A.limit||1000,Y=!!A.rawResult,W=typeof A.ordered==="boolean"?A.ordered:!0,Z=typeof A.throwOnValidationError==="boolean"?A.throwOnValidationError:!1,D=!!A.lean,G=this.db.base.transactionAsyncLocalStorage?.getStore();if((!A||!Object.hasOwn(A,"session"))&&G?.session!=null)A={...A,session:G.session};if(!Array.isArray(F))F=[F];let z=[],H=new Map,U=W?null:Array(F.length);async function Q(N,S){if(D)return N;let C=!1;if(!(N instanceof J)){if(N!=null&&typeof N!=="object")throw new aK0(N,"arr."+S,"insertMany");N=new J(N),C=!0}if(A.session!=null)N.$session(A.session);return N.$validate(C?{_skipParallelValidateCheck:!0}:null).then(()=>N).catch((M)=>{if(W===!1){M.index=S,z.push(M),H.set(M,S),U[S]=M;return}throw M})}let B=await EB0(F,Q,X),q=new Map,L=new Map;for(let N=0;N<B.length;++N)q.set(B[N],N);let E=B.filter(function(N){return N!=null});for(let N=0;N<E.length;++N)L.set(N,q.get(E[N]));if(z.length>0)z.sort((N,S)=>{return H.get(N)-H.get(S)});if(E.length===0){if(Z)throw new gP(z,U,null,"insertMany");if(Y){let N={acknowledged:!0,insertedCount:0,insertedIds:{}};return _Z(N,z,z),N}return[]}let V=D?E:E.map(function(N){if(N.$__schema.options.versionKey)N[N.$__schema.options.versionKey]=0;if(A?.timestamps!==!1&&N.initializeTimestamps&&(!N.$__||N.$__.timestamps!==!1))N.initializeTimestamps(A?.timestamps);if(N.$__hasOnlyPrimitiveValues())return N.$__toObjectShallow();return N.toObject(Fm)}),R;try{R=await this.$__collection.insertMany(V,A)}catch(N){if(N.writeErrors==null&&N.result?.result?.writeErrors!=null)N.writeErrors=N.result.result.writeErrors;let S=N?.writeErrors,C=new Set((N?.writeErrors||[]).map((I)=>I.index));if(N.writeErrors!=null)for(let I=0;I<N.writeErrors.length;++I){let T=L.get(N.writeErrors[I].index);if(N.writeErrors[I]={...N.writeErrors[I],index:T},!W)U[T]=N.writeErrors[I]}if(!W){for(let I=0;I<U.length;++I)if(U[I]===void 0)U[I]=B[I];N.results=U}let M=-1;if(N.insertedDocs=E.filter((I,T)=>{let j=!S||C.has(T);if(W){if(M>-1)return T<M;if(j)M=T}return!j}).map(function(T){if(D)return T;return T.$__reset(),FH(T,!1),T}),Y&&W===!1)_Z(N,z,U);await this._middleware.execPost("insertMany",this,[F],{error:N})}if(!D)for(let N of E)N.$__reset(),FH(N,!1);if(W===!1&&Z&&z.length>0){for(let N=0;N<U.length;++N)if(U[N]===void 0)U[N]=B[N];throw new gP(z,U,R,"insertMany")}if(Y){if(W===!1){for(let N=0;N<U.length;++N)if(U[N]===void 0)U[N]=B[N];_Z(R,z,U)}return R}if(A.populate!=null)return this.populate(E,A.populate).catch((N)=>{if(N!=null)N.insertedDocs=E;throw N});return await this._middleware.execPost("insertMany",this,[E]).then((N)=>N[0])};/*!
 * ignore
 */function FH($,F){$.$isNew=F,$.$emit("isNew",F),$.constructor.emit("isNew",F);let A=$.$getAllSubdocs({useCache:!0});for(let J of A)J.$isNew=F,J.$emit("isNew",F)}C1.bulkWrite=async function(F,A){if(k0(this,"bulkWrite"),typeof A==="function"||typeof arguments[2]==="function")throw new P0("Model.bulkWrite() no longer accepts a callback");A=A||{};try{[F,A]=await this.hooks.execPre("bulkWrite",this,[F,A])}catch(Z){if(Z instanceof Ow.skipWrappedFunction)F=Z;else await this.hooks.execPost("bulkWrite",this,[null],{error:Z})}if(F instanceof Ow.skipWrappedFunction)return F.args[0];let J=A.ordered==null?!0:A.ordered;if(F.length===0){let D=new(this.base.driver.get()).BulkWriteResult(th(),!1);return D.n=0,_Z(D,[],[]),D}let X=A?._skipCastBulkWrite?[]:F.map((Z)=>DB0(this,Z,A)),Y=this.db.base.transactionAsyncLocalStorage?.getStore();if((!A||!Object.hasOwn(A,"session"))&&Y?.session!=null)A={...A,session:Y.session};let W=null;if(J){await new Promise((Z,D)=>{HB0(X,(G,z)=>G(z),(G)=>{if(G)return D(G);Z()})});try{W=await this.$__collection.bulkWrite(F,A)}catch(Z){await this.hooks.execPost("bulkWrite",this,[null],{error:Z})}}else{let Z=[],D=[],G=[];if(X.length>0)Z=await Promise.all(F.map((Q,B)=>{if(B>=X.length)return B;return new Promise((q)=>{X[B]((L)=>{if(L==null)q(B);else D.push({index:B,error:L}),G[B]=L;q()})})})),Z=Z.filter((Q)=>Q!=null);else Z=F.map((Q,B)=>B);D=D.sort((Q,B)=>Q.index-B.index).map((Q)=>Q.error);let z=Z.sort().map((Q)=>F[Q]);if(z.length===0){if(A.throwOnValidationError&&D.length)throw new gP(D,G,W,"bulkWrite");let B=new(this.base.driver.get()).BulkWriteResult(th(),!1);return B.result=th(),_Z(B,D,G),B}let H;[W,H]=await this.$__collection.bulkWrite(z,A).then((Q)=>[Q,null]).catch((Q)=>[null,Q]);let U={};if(H?.writeErrors)for(let Q of H.writeErrors)U[Q.err.index]=Q;for(let Q=0;Q<Z.length;++Q)G[Z[Q]]=U[Q]??null;if(H){if(D.length>0)_Z(H,D,G);await this.hooks.execPost("bulkWrite",this,[null],{error:H})}if(D.length>0)if(A.throwOnValidationError)throw new gP(D,G,W,"bulkWrite");else _Z(W,D,G)}return await this.hooks.execPost("bulkWrite",this,[W]),W};C1.bulkSave=async function(F,A){if(A=A||{},A.timestamps!=null)for(let z of F)z.$__.saveOptions=z.$__.saveOptions||{},z.$__.saveOptions.timestamps=A.timestamps;else for(let z of F)if(z.$__.timestamps!=null)z.$__.saveOptions=z.$__.saveOptions||{},z.$__.saveOptions.timestamps=z.$__.timestamps;await Promise.all(F.map((z)=>bB0(z,A)));let J=this.buildBulkWriteOperations(F,A),X={skipValidation:!0,_skipCastBulkWrite:!0,...A},{bulkWriteResult:Y,bulkWriteError:W}=await this.bulkWrite(J,X).then((z)=>({bulkWriteResult:z,bulkWriteError:null}),(z)=>({bulkWriteResult:null,bulkWriteError:z}));if(W!=null&&W.name!=="MongoBulkWriteError")throw W;let Z=Y?.matchedCount??0,D=Y?.insertedCount??0;if(J.length>0&&Z+D<J.length&&!W)throw new PB0(this.modelName,F,Y);let G=[];for(let z=0;z<F.length;z++){let H=F[z];if(W?.writeErrors.find((Q)=>{return(Q.err.op._id||Q.err.op.q._id).toString()===H._doc._id.toString()})==null)G.push(H)}if(await Promise.all(G.map((z)=>xB0(z))),W!=null)throw W;return Y};async function bB0($,F){let[A]=await $.schema.s.hooks.execPre("save",$,[F]);if(A!==F)throw Error('Cannot overwrite options in pre("save") hook on bulkSave()')}async function xB0($){if($.$isNew)FH($,!1);return $.$__reset(),$._applyVersionIncrement(),$.schema.s.hooks.execPost("save",$,[$])}C1.applyDefaults=function $(F){if(F==null)return F;if(F.$__!=null){oK0(F,F.$__.fields,F.$__.exclude);for(let A of F.$getAllSubdocs())$(A,A.$__.fields,A.$__.exclude);return F}return eK0(F,this.schema),F};C1.applyVirtuals=function(F,A){if(F==null)return F;if(F.$__!=null)return F;return WB0(this.schema,F,A),F};C1.applyTimestamps=function(F,A){if(F==null)return F;if(F.$__!=null)return F;return YB0(this.schema,F,A),F};C1.castObject=function(F,A){A=A||{};let J={},X=this.schema,Y=X.options.discriminatorKey;if(X.discriminators!=null&&F!=null&&F[Y]!=null)X=TV1(X,F[Y])||X;let W=Object.keys(X.paths);for(let D of W){if(!X.path(D)?.$isMongooseArray)continue;let z=Sw(F,D);OV1(W,z,D)}let Z=null;for(let D of W){let G=X.path(D);if(G==null)continue;let z=Sw(F,D,void 0);if(z==null)continue;let H=D.indexOf(".")===-1?[D]:D.split("."),U=J;for(let Q=0;Q<H.length-1;++Q){if(U[H[Q]]==null)U[H[Q]]=isNaN(H[Q+1])?{}:[];U=U[H[Q]]}if(G.$isMongooseDocumentArray){let Q=G.options?.castNonArrays??G.constructor.options.castNonArrays;if(!Array.isArray(z)){if(!Q){if(!A.ignoreCastErrors)Z=Z||new xP,Z.addError(D,new RB0(D,z))}else U[H[H.length-1]]=[C1.castObject.call(G.Constructor,z)];continue}}if(G.$isSingleNested||G.$isMongooseDocumentArrayElement){try{z=C1.castObject.call(G.Constructor,z)}catch(Q){if(!A.ignoreCastErrors)Z=Z||new xP,Z.addError(D,Q);continue}U[H[H.length-1]]=z;continue}try{z=G.cast(z),U[H[H.length-1]]=z}catch(Q){if(!A.ignoreCastErrors)Z=Z||new xP,Z.addError(D,Q);continue}}if(Z!=null)throw Z;return J};C1.buildBulkWriteOperations=function(F,A){if(!Array.isArray(F))throw Error(`bulkSave expects an array of documents to be passed, received \`${F}\` instead`);return X(),F.map((Y,W)=>{if(!A.skipValidation){if(!(Y instanceof aF))throw Error(`documents.${W} was not a mongoose document, documents must be an array of mongoose documents (instanceof mongoose.Document).`);if(A.validateBeforeSave==null||A.validateBeforeSave){let z=Y.validateSync();if(z!=null)throw z}}if(Y.isNew){let z={insertOne:{document:Y}};return m6.injectTimestampsOption(z.insertOne,A.timestamps),z}let D=Y.$__delta();if(D!=null&&!m6.isEmptyObject(D[0])){let z=Y.$__where(D[0]),H=D[1];$m(Y,z);let U=this.schema.options.shardKey;if(U){let B=Object.keys(U),q=B.length;for(let L=0;L<q;++L)z[B[L]]=Y[B[L]]}Y.$__version(z,D);let Q={updateOne:{filter:z,update:H}};return m6.injectTimestampsOption(Q.updateOne,A.timestamps),Q}return null}).filter((Y)=>Y!==null);function X(){if(A=A||{},A.skipValidation==null)A.skipValidation=!1}};C1.hydrate=function($,F,A){if(k0(this,"hydrate"),A?.virtuals&&A?.hydratedPopulatedDocs===!1)throw new P0("Cannot set `hydratedPopulatedDocs` option to false if `virtuals` option is truthy because `virtuals: true` also sets populated virtuals");if(F!=null){if($?.$__!=null)$=$.toObject(Fm);$=AB0($,F)}let J=vB().createModel(this,$,F);return J.$init($,A),J};C1.updateMany=function(F,A,J){if(k0(this,"updateMany"),A==null)throw new P0("updateMany `update` parameter cannot be nullish");return Xm(this,"updateMany",F,A,J)};C1.updateOne=function(F,A,J){return k0(this,"updateOne"),Xm(this,"updateOne",F,A,J)};C1.replaceOne=function(F,A,J){k0(this,"replaceOne");let X=this?.schema?.options?.versionKey||null;if(X&&!A[X])A[X]=0;return Xm(this,"replaceOne",F,A,J)};function Xm($,F,A,J,X){let Y=new $.Query({},{},$,$.collection);if(A instanceof aF)A=A.toObject();else A=qJ(A);X=typeof X==="function"?X:qJ(X);let W=$?.schema?.options?.versionKey||null;return IV1(J,X,W),Y[F](A,J,X)}C1.aggregate=function(F,A){if(k0(this,"aggregate"),typeof A==="function"||typeof arguments[2]==="function")throw new P0("Model.aggregate() no longer accepts a callback");let J=new iK0(F||[]);if(J.model(this),A!=null)J.option(A);return J};C1.validate=async function(F,A,J){if(arguments.length<3||arguments.length===3&&typeof arguments[2]==="function")J=F;if(typeof J==="function"||typeof arguments[3]==="function")throw new P0("Model.validate() no longer accepts a callback");let X=this.schema,Y=X.options.discriminatorKey;if(X.discriminators!=null&&F!=null&&F[Y]!=null)X=TV1(X,F[Y])||X;let W=Object.keys(X.paths);if(A!=null){let G=typeof A==="string"?new Set(A.split(" ")):Array.isArray(A)?new Set(A):new Set(W);W=W.filter((z)=>{if(A.pathsToSkip){if(Array.isArray(A.pathsToSkip)){if(A.pathsToSkip.find((Q)=>Q==z))return!1}else if(typeof A.pathsToSkip=="string"){if(A.pathsToSkip.includes(z))return!1}}let H=z.split("."),U=H[0];for(let Q of H){if(G.has(U))return!0;U+="."+Q}return G.has(z)})}for(let G of W){let z=X.path(G);if(!z?.$isMongooseArray||z.$isMongooseDocumentArray)continue;let H=Sw(F,G);OV1(W,H,G)}let Z=null;W=new Set(W);try{F=this.castObject(F)}catch(G){Z=G;for(let z of Object.keys(Z.errors||{}))W.delete(z)}let D=[];for(let G of W){let z=X.path(G);if(z==null)continue;let H=G.indexOf(".")===-1?[G]:G.split("."),U=F;for(let B=0;B<H.length-1;++B)U=U[H[B]];let Q=Sw(F,G,void 0);D.push(z.doValidate(Q,J,{path:G}).catch((B)=>{Z=Z||new xP,Z.addError(G,B)}))}if(await Promise.all(D),Z!=null)throw Z;return F};C1.populate=async function(F,A){if(k0(this,"populate"),typeof A==="function"||typeof arguments[2]==="function")throw new P0("Model.populate() no longer accepts a callback");if(A=m6.populate(A),A.length===0)return F;if(A.find((J)=>J.ordered))for(let J of A)await LV1(this,F,J);else{let J=[];for(let X of A)J.push(LV1(this,F,X));await Promise.all(J)}return F};/*!
 * Populates `docs` for a single `populateOptions` instance.
 */var gB0=/\s?-_id\s?/,fB0=/\s?-_id\s?/g;async function LV1($,F,A){if(A.strictPopulate==null){if(A._localModel?.schema._userProvidedOptions.strictPopulate!=null)A.strictPopulate=A._localModel.schema._userProvidedOptions.strictPopulate;else if(A._localModel!=null&&$.base.options.strictPopulate!=null)A.strictPopulate=$.base.options.strictPopulate;else if($.base.options.strictPopulate!=null)A.strictPopulate=$.base.options.strictPopulate}if(!Array.isArray(F))F=[F];if(F.length===0||F.every(m6.isNullOrUndefined))return;let J=QB0($,F,A);if(J instanceof P0)throw J;let X=J.length,Y=[];function W(G){return G!==void 0}let Z=!1,D=[];for(let G=0;G<X;++G){let z=J[G],H=z.options.select,U=m6.array.flatten(z.ids,W);U=m6.array.unique(U);let Q={};if(Q.sort=z&&z.options&&z.options.options&&z.options.options.sort||void 0,Q.excludeId=gB0.test(H)||H&&H._id===0,z.options&&z.options.options&&z.options.options.lean&&z.options.options.lean.transform)z.options.options._leanTransform=z.options.options.lean.transform,z.options.options.lean=!0;if(U.length===0||U.every(m6.isNullOrUndefined)){VV1($,[],z,Q);continue}if(Z=!0,typeof A.foreignField==="string")z.foreignField.clear(),z.foreignField.add(A.foreignField);let B=GB0(U,z.match,z.foreignField,z.model,z.options.skipInvalidIds);if(Q.excludeId)if(typeof H==="string")H=H.replace(fB0," ");else if(Array.isArray(H))H=H.filter((q)=>q!=="-_id");else H={...H},delete H._id;if(z.options.options?.limit!=null)Q.originalLimit=z.options.options.limit;else if(z.options.limit!=null)Q.originalLimit=z.options.limit;D.push([z,B,H,Q])}if(!Z){if(J.length!==0)return;if(A.populate!=null){let G=m6.populate(A.populate).map((z)=>Object.assign({},z,{path:A.path+"."+z.path}));return $.populate(F,G)}return}if(A.ordered)for(let G of D)await EV1.apply(null,G).then((z)=>{Y=Y.concat(z)});else{let G=[];for(let z of D)G.push(EV1.apply(null,z).then((H)=>{Y=Y.concat(H)}));await Promise.all(G)}for(let G of D){let z=G[0],H=G[3];for(let U of Y)z.options._childDocs.push(U);VV1($,Y,z,H)}for(let G of D)NB0(G[0].foreignField,G[0].options,Y);for(let G of D){let z=G[0];if(z.options?.options?._leanTransform)for(let H of Y)z.options.options._leanTransform(H)}}/*!
 * ignore
 */function EV1($,F,A){let J=qJ($.options.populate),X={};if($.options.skip!==void 0)X.skip=$.options.skip;if($.options.limit!==void 0)X.limit=$.options.limit;if($.options.perDocumentLimit!==void 0)X.perDocumentLimit=$.options.perDocumentLimit;if(Object.assign(X,$.options.options),$.count)delete X.skip;if(X.perDocumentLimit!=null)X.limit=X.perDocumentLimit,delete X.perDocumentLimit;else if(X.limit!=null)X.limit=X.limit*$.ids.length;let Y=$.model.find(F,A,X);for(let W of $.foreignField)if(W!=="_id"&&Y.selectedInclusively()&&!qB0(Y._fields,W))Y.select(W);if($.count)for(let W of $.foreignField)Y.select(W);if(J){if($.model.baseModelName!=null)if(Array.isArray(J))J.forEach((Z)=>{Z.strictPopulate=!1});else if(typeof J==="string")J={path:J,strictPopulate:!1};else J.strictPopulate=!1;let W=$.options._fullPath||$.options.path;if(Array.isArray(J))for(let Z of J)Z._fullPath=W+"."+Z.path;else if(typeof J==="object")J._fullPath=W+"."+J.path;Y.populate(J)}return Y.exec().then((W)=>{for(let Z of W)LB0.set(Z,$.model);return W})}/*!
 * ignore
 */function VV1($,F,A,J){let{options:X,isVirtual:Y,justOne:W}=A,Z,D=X&&X.options&&X.options.lean||!1,G=F.length,z={},H={},U,Q,B=qJ(A.allIds);for(let q=0;q<G;q++){if(Q=F[q],Q==null)continue;for(let L of A.foreignField){if(Z=m6.getValue(L,Q),Array.isArray(Z)){Z=m6.array.unique(m6.array.flatten(Z));for(let E of Z){if(E instanceof aF)E=E._doc._id;if(U=String(E),H[U])if(Array.isArray(H[U]))H[U].push(Q),z[U].push(q);else H[U]=[H[U],Q],z[U]=[z[U],q];else if(Y&&!W)H[U]=[Q],z[U]=[q];else H[U]=Q,z[U]=q}}else{if(Z instanceof aF)Z=Z._doc._id;if(U=String(Z),H[U]){if(Array.isArray(H[U]))H[U].push(Q),z[U].push(q);else if(Y||H[U].constructor!==Q.constructor||(H[U]instanceof aF?String(H[U]._doc._id):String(H[U]._id))!==(Q instanceof aF?String(Q._doc._id):String(Q._id)))H[U]=[H[U],Q],z[U]=[z[U],q]}else H[U]=Q,z[U]=q}if(!D)Q.$__.wasPopulated=Q.$__.wasPopulated||{value:Z}}}ZB0({originalModel:$,rawIds:A.isVirtual?B:A.allIds,allIds:B,unpopulatedValues:A.unpopulatedValues,foreignField:A.foreignField,rawDocs:H,rawOrder:z,docs:A.docs,path:X.path,options:J,justOne:A.justOne,isVirtual:A.isVirtual,allOptions:A,populatedModel:A.model,lean:D,virtual:A.virtual,count:A.count,match:A.match})}C1.compile=function(F,A,J,X,Y){if(A.options.versionKey!==!1&&!A.paths[A.options.versionKey]){let H={};H[A.options.versionKey]=Number,A.add(H)}let Z;if(typeof F==="function"&&F.prototype instanceof C1)Z=F,F=Z.name,A.loadClass(Z,!1),Z.prototype.$isMongooseModelPrototype=!0;else Z=function H(U,Q,B){if(H.hooks.execPreSync("createModel",U),!(this instanceof H))return new H(U,Q,B);let q=H.schema.options.discriminatorKey;if(H.discriminators==null||U==null||U[q]==null){C1.call(this,U,Q,B);return}let L=H.discriminators[U[q]]||Tw(H.discriminators,U[q]);if(L!=null)return new L(U,Q,B);C1.call(this,U,Q,B)};if(Z.hooks=A.s.hooks.clone(),Z.base=Y,Z.modelName=F,!(Z.prototype instanceof C1))Object.setPrototypeOf(Z,C1),Object.setPrototypeOf(Z.prototype,C1.prototype);Z.model=function(U){return this.db.model(U)},Z.db=X,Z.prototype.db=X,Z.prototype[bZ]=X,Z.discriminators=Z.prototype.discriminators=void 0,Z[SV1]=!0,Z.events=new oh,A._preCompile();let G={schemaUserProvidedOptions:A._userProvidedOptions||{},capped:A.options.capped,Promise:Z.base.Promise,modelName:F};if(A.options.autoCreate!==void 0)G.autoCreate=A.options.autoCreate;let z=X.collection(J,G);return Z.prototype.collection=z,Z.prototype.$collection=z,Z.prototype[kZ]=z,Z.prototype.$__setSchema(A),CV1(Z,A),PV1(Z,A),FB0(Z,A),XB0(Z,A.s.hooks,A.statics),Z.schema=Z.prototype.$__schema,Z.collection=z,Z.$__collection=z,Z.Query=function(){bP.apply(this,arguments)},Object.setPrototypeOf(Z.Query.prototype,bP.prototype),Z.Query.base=bP.base,Z.Query.prototype.constructor=bP,Z._applyQueryMiddleware(),vB0(Z,A.query),Z};C1.clientEncryption=function(){let F=this.base.driver.get().ClientEncryption;if(!F)throw Error("The mongodb driver must be used to obtain a ClientEncryption object.");let A=this.collection?.conn?.client;if(!A)return null;let J=A.options.autoEncryption;if(!J)return null;let{keyVaultNamespace:X,keyVaultClient:Y,kmsProviders:W,credentialProviders:Z,proxyOptions:D,tlsOptions:G}=J;return new F(Y??A,{keyVaultNamespace:X,kmsProviders:W,credentialProviders:Z,proxyOptions:D,tlsOptions:G})};C1.$__updateConnection=function(F){this.db=F,this.prototype.db=F,this.prototype[bZ]=F;let A=F.collection(this.collection.collectionName,this.collection.opts);this.prototype.collection=A,this.prototype.$collection=A,this.prototype[kZ]=A,this.collection=A,this.$__collection=A};function vB0($,F){for(let A in F)$.Query.prototype[A]=F[A]}C1.__subclass=function(F,A,J){let X=this,Y=function z(H,U,Q){if(!(this instanceof z))return new z(H,U,Q);X.call(this,H,U,Q)};if(Object.setPrototypeOf(Y,X),Object.setPrototypeOf(Y.prototype,X.prototype),Y.db=F,Y.prototype.db=F,Y.prototype[bZ]=F,X[jw]=X[jw]||[],X[jw].push(Y),X.discriminators!=null){Y.discriminators={};for(let z of Object.keys(X.discriminators))Y.discriminators[z]=X.discriminators[z].__subclass(X.db,X.discriminators[z].schema,J)}let W=A&&typeof A!=="string"?A:X.prototype.$__schema,Z=W.options||{},D=W._userProvidedOptions||{};if(!J)J=X.prototype.$__schema.get("collection")||m6.toCollectionName(X.modelName,this.base.pluralize());let G={schemaUserProvidedOptions:D,capped:W&&Z.capped};return Y.prototype.collection=F.collection(J,G),Y.prototype.$collection=Y.prototype.collection,Y.prototype[kZ]=Y.prototype.collection,Y.collection=Y.prototype.collection,Y.$__collection=Y.collection,Y.init().catch(()=>{}),Y};C1.recompileSchema=function(){if(this.prototype.$__setSchema(this.schema),this.schema._applyDiscriminators!=null)for(let F of this.schema._applyDiscriminators.keys())this.discriminator(F,this.schema._applyDiscriminators.get(F));delete this.schema._defaultToObjectOptionsMap,$B0(this.schema,new WeakSet,!0)};C1.inspect=function(){return`Model { ${this.modelName} }`};C1.namespace=function(){return this.db.name+"."+this.collection.collectionName};if(BV1.inspect.custom)C1[BV1.inspect.custom]=C1.inspect;/*!
 * Applies query middleware from this model's schema to this model's
 * Query constructor.
 */C1._applyQueryMiddleware=function(){let F=this.Query,A=this.schema.s.hooks.filter((J)=>{let X=yB0(J);if(J.name==="validate")return!!X.query;if(J.name==="deleteOne"||J.name==="updateOne")return!!X.query||m6.hasOwnKeys(X)===!1;if(J.query!=null||J.document!=null)return!!J.query;return!0});F.prototype._queryMiddleware=A};function yB0($){let F={};if(Object.hasOwn($,"query"))F.query=$.query;if(Object.hasOwn($,"document"))F.document=$.document;return F}/*!
 * Module exports.
 */kV1.exports=_V1=C1});var xV1=O((_w,bV1)=>{bV1.exports=mB0;_w.pluralization=[[/human$/gi,"humans"],[/(m|wom)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|cact|foc|fung|nucle)us$/gi,"$1i"],[/(alias|status|virus)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(kn|w|l)ife$/gi,"$1ives"],[/(quiz)$/gi,"$1zes"],[/^goose$/i,"geese"],[/s$/gi,"s"],[/([^a-z])$/,"$1"],[/$/gi,"s"]];var uB0=_w.pluralization;_w.uncountables=["advice","energy","excretion","digestion","cooperation","health","justice","labour","machinery","equipment","information","pollution","sewage","paper","money","species","series","rain","rice","fish","sheep","moose","deer","news","expertise","status","media"];var hB0=_w.uncountables;function mB0($){let F;if($=$.toLowerCase(),!~hB0.indexOf($)){if(F=uB0.filter(function(A){return $.match(A[0])}),F[0])return $.replace(F[0][0],F[0][1])}return $}});var hV1=O((_66,uV1)=>{/*!
 * Module requirements
 */var vV1=v0(),gV1=Z1("util"),fV1=Wv();class ZY extends vV1{constructor(){super("");this.errors={}}toString(){return fV1(this)}inspect(){return Object.assign(Error(this.message),this)}addError($,F){if(F instanceof ZY){let{errors:A}=F;for(let J of Object.keys(A))this.addError(J,A[J]);return}this.errors[$]=F,this.message=fV1(this)}}if(gV1.inspect.custom)ZY.prototype[gV1.inspect.custom]=ZY.prototype.inspect;Object.defineProperty(ZY.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(ZY.prototype,"name",{value:"SetOptionError"});class yV1 extends vV1{constructor($){super(`"${$}" is not a valid option to set`)}}ZY.SetOptionInnerError=yV1;/*!
 * Module exports
 */uV1.exports=ZY});var dV1=O(()=>{var mV1=Z0();if(typeof jest<"u"&&!process.env.SUPPRESS_JEST_WARNINGS){if(typeof window<"u")mV1.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's default jsdom test environment. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.");if(typeof setTimeout.clock?.Date==="function")mV1.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's mock timers enabled. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.")}});var sV1=O((aV1,tV1)=>{/*!
 * Module dependencies.
 */var dB0=pF(),cB0=Z1("events").EventEmitter,Ym=QZ(),LJ=VZ(),lB0=L4(),kw=sB(),pB0=CM(),yP=jK(),cV1=Aq1(),iB0=xz(),nB0=EP(),lV1=fh(),rB0=xu(),aB0=$u(),pV1=XP(),tB0=xV1(),uP=Z0(),sB0=Fh(),oB0=MZ(),eB0=_h(),$w0=Cz().trusted,Fw0=Ch(),Aw0=t9(),AH=v0(),vP=hV1(),Jw0=xh(),iV1=Symbol.for("mongoose:default"),nV1=Symbol("mongoose:defaultConnection");dV1();var Xw0=/^[0-9A-Fa-f]{24}$/,{AsyncLocalStorage:rV1}=Z1("async_hooks");function y1($){if(this.connections=[],this.nextConnectionId=0,this.models={},this.events=new cB0,this.__driver=pV1.get(),this.options=Object.assign({pluralization:!0,autoIndex:!0,autoCreate:!0,autoSearchIndex:!1},$),(uP.getOption("createInitialConnection",this.options)??!0)&&this.__driver!=null)Wm(this);if(this.options.pluralization)this._pluralize=tB0;if(!$?.[iV1]){let A=this;this.Schema=function(){return this.base=A,LJ.apply(this,arguments)},this.Schema.prototype=Object.create(LJ.prototype),Object.assign(this.Schema,LJ),this.Schema.base=this,this.Schema.Types=Object.assign({},LJ.Types)}else for(let A of["Schema","model"])this[A]=y1.prototype[A];if(this.Schema.prototype.base=this,$?.transactionAsyncLocalStorage)this.transactionAsyncLocalStorage=new rV1;Object.defineProperty(this,"plugins",{configurable:!1,enumerable:!0,writable:!1,value:Object.values(aB0).map((A)=>[A,{deduplicate:!0}])})}y1.prototype.cast=oB0;y1.prototype.STATES=yP;y1.prototype.ConnectionStates=yP;y1.prototype.driver=pV1;y1.prototype.setDriver=function(F){let A=this instanceof y1?this:P8;if(A.__driver===F)return A;if(A.connections&&A.connections.find((W)=>W.readyState!==yP.disconnected))throw new AH("Cannot modify Mongoose driver if a connection is already open. Call `mongoose.disconnect()` before modifying the driver");if(A.__driver=F,Array.isArray(F.plugins)){for(let W of F.plugins)if(typeof W==="function")A.plugin(W)}if(F.SchemaTypes!=null)Object.assign(P8.Schema.Types,F.SchemaTypes);let X=F.Connection,Y=A.connections[0];if(A.connections=[new X(A)],A.connections[0].models=A.models,Y==null)return A;for(let W of Object.values(A.models)){if(W.db!==Y)continue;W.$__updateConnection(A.connections[0])}return A};y1.prototype.set=function(F,A){let J=this instanceof y1?this:P8;if(arguments.length===1&&typeof F!=="object"){if(cV1.indexOf(F)===-1){let W=new vP;throw W.addError(F,new vP.SetOptionInnerError(F)),W}return J.options[F]}let X={};if(arguments.length===2)X={[F]:A};if(arguments.length===1&&typeof F==="object")X=F;let Y=void 0;for(let[W,Z]of Object.entries(X)){if(cV1.indexOf(W)===-1){if(!Y)Y=new vP;Y.addError(W,new vP.SetOptionInnerError(W));continue}if(J.options[W]=Z,W==="objectIdGetter")if(Z)Object.defineProperty(J.Types.ObjectId.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});else delete J.Types.ObjectId.prototype._id;else if(W==="transactionAsyncLocalStorage"){if(Z&&!J.transactionAsyncLocalStorage)J.transactionAsyncLocalStorage=new rV1;else if(!Z&&J.transactionAsyncLocalStorage)delete J.transactionAsyncLocalStorage}else if(W==="createInitialConnection"){if(Z&&!J.connection)Wm(J);else if(Z===!1&&J.connection?.[nV1]){if(J.connection.readyState===yP.disconnected&&uP.hasOwnKeys(J.connection.models)===!1)J.connections.shift()}}}if(Y)throw Y;return J};y1.prototype.get=y1.prototype.set;y1.prototype.createConnection=function(F,A){let J=this instanceof y1?this:P8,Y=new J.__driver.Connection(J);if(J.connections.push(Y),J.nextConnectionId++,J.events.emit("createConnection",Y),arguments.length>0)Y.openUri(F,{...A,_fireAndForget:!0});return Y};y1.prototype.connect=async function(F,A){if(typeof A==="function"||arguments.length>=3&&typeof arguments[2]==="function")throw new AH("Mongoose.prototype.connect() no longer accepts a callback");let J=this instanceof y1?this:P8;if(J.connection==null)Wm(J);return J.connection.openUri(F,A).then(()=>J)};y1.prototype.disconnect=async function(){if(arguments.length>=1&&typeof arguments[0]==="function")throw new AH("Mongoose.prototype.disconnect() no longer accepts a callback");let F=this instanceof y1?this:P8;if(F.connections.length<=0)return;await Promise.all(F.connections.map((J)=>J.close()))};y1.prototype.startSession=function(){let F=this instanceof y1?this:P8;return F.connection.startSession.apply(F.connection,arguments)};y1.prototype.pluralize=function(F){let A=this instanceof y1?this:P8;if(arguments.length>0)A._pluralize=F;return A._pluralize};y1.prototype.model=function(F,A,J,X){let Y=this instanceof y1?this:P8;if(typeof A==="string")J=A,A=!1;if(arguments.length===1){let G=Y.models[F];if(!G)throw new Y.Error.MissingSchemaError(F);return G}if(uP.isObject(A)&&!(A instanceof LJ))A=new LJ(A);if(A&&!(A instanceof LJ))throw new Y.Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");X=X||{};let W=A;if(A){if(Y.get("cloneSchemas"))A=A.clone();Y._applyPlugins(A)}let Z=Object.hasOwn(Y.options,"overwriteModels")?Y.options.overwriteModels:X.overwriteModels;if(Object.hasOwn(Y.models,F)&&X.cache!==!1&&Z!==!0){if(W?.instanceOfSchema&&W!==Y.models[F].schema)throw new Y.Error.OverwriteModelError(F);if(J&&J!==Y.models[F].collection.name){let G=Y.models[F];return A=G.prototype.schema,G.__subclass(Y.connection,A,J)}return Y.models[F]}if(A==null)throw new Y.Error.MissingSchemaError(F);let D=Y._model(F,A,J,X);return Y.connection.models[F]=D,Y.models[F]=D,D};/*!
 * ignore
 */y1.prototype._model=function(F,A,J,X){let Y=this instanceof y1?this:P8,W;if(typeof F==="function"){if(W=F,F=W.name,!(W.prototype instanceof lV1))throw new Y.Error("The provided class "+F+" must extend Model")}if(A){if(Y.get("cloneSchemas"))A=A.clone();Y._applyPlugins(A)}if(A==null||!("pluralization"in A.options))A.options.pluralization=Y.options.pluralization;if(!J)J=A.get("collection")||uP.toCollectionName(F,Y.pluralize());Jw0(A);let Z=X.connection||Y.connection;if(W=Y.Model.compile(W||F,A,J,Z,Y),W.init().catch(function(){}),Z.emit("model",W),A._applyDiscriminators!=null)for(let D of A._applyDiscriminators.keys()){let{schema:G,options:z}=A._applyDiscriminators.get(D);W.discriminator(D,G,z)}return W};y1.prototype.deleteModel=function(F){let A=this instanceof y1?this:P8;return A.connection.deleteModel(F),delete A.models[F],A};y1.prototype.modelNames=function(){let F=this instanceof y1?this:P8;return Object.keys(F.models)};y1.prototype._applyPlugins=function(F,A){let J=this instanceof y1?this:P8;A=A||{},A.applyPluginsToDiscriminators=J.options?.applyPluginsToDiscriminators||!1,A.applyPluginsToChildSchemas=typeof J.options?.applyPluginsToChildSchemas==="boolean"?J.options.applyPluginsToChildSchemas:!0,rB0(F,J.plugins,A,"$globalPluginsApplied")};y1.prototype.plugin=function(F,A){let J=this instanceof y1?this:P8;return J.plugins.push([F,A]),J};y1.prototype.__defineGetter__("connection",function(){return this.connections[0]});y1.prototype.__defineSetter__("connection",function($){if($ instanceof this.__driver.Connection)this.connections[0]=$,this.models=$.models});y1.prototype.connections;y1.prototype.nextConnectionId;y1.prototype.Aggregate=eB0;y1.prototype.BaseCollection=ok();Object.defineProperty(y1.prototype,"Collection",{get:function(){return this.__driver.Collection},set:function($){this.__driver.Collection=$}});Object.defineProperty(y1.prototype,"Connection",{get:function(){return this.__driver.Connection},set:function($){if($===this.__driver.Connection)return;this.__driver.Connection=$}});y1.prototype.BaseConnection=$h();y1.prototype.version=sB0.version;y1.prototype.Mongoose=y1;y1.prototype.Schema=LJ;y1.prototype.SchemaType=lB0;y1.prototype.SchemaTypes=LJ.Types;y1.prototype.VirtualType=pB0;y1.prototype.Types=iB0;y1.prototype.Query=nB0;y1.prototype.Model=lV1;y1.prototype.Document=dB0;y1.prototype.ObjectId=kw.ObjectId;y1.prototype.isValidObjectId=function(F){return(this instanceof y1?this:P8).Types.ObjectId.isValid(F)};y1.prototype.isObjectIdOrHexString=function(F){return Aw0(F,"ObjectId")||typeof F==="string"&&Xw0.test(F)};y1.prototype.syncIndexes=function(F){return(this instanceof y1?this:P8).connection.syncIndexes(F)};y1.prototype.Decimal128=kw.Decimal128;y1.prototype.Mixed=kw.Mixed;y1.prototype.Date=kw.Date;y1.prototype.Number=kw.Number;y1.prototype.Error=AH;y1.prototype.MongooseError=AH;y1.prototype.now=function(){return new Date};y1.prototype.CastError=AH.CastError;y1.prototype.SchemaTypeOptions=_3();y1.prototype.mquery=Vh();y1.prototype.sanitizeFilter=Fw0;y1.prototype.trusted=$w0;y1.prototype.skipMiddlewareFunction=Ym.skipWrappedFunction;y1.prototype.overwriteMiddlewareResult=Ym.overwriteResult;y1.prototype.overwriteMiddlewareArguments=Ym.overwriteArguments;y1.prototype.omitUndefined=Ry();/*!
 * Create a new default connection (`mongoose.connection`) for a Mongoose instance.
 * No-op if there is already a default connection.
 */function Wm($){if($.connection)return;let F=$.createConnection();F[nV1]=!0,F.models=$.models}var P8=tV1.exports=aV1=new y1({[iV1]:!0})});var $N1=O((x66,eV1)=>{/*!
 * Module dependencies.
 */var oV1=$q1();XP().set(oV1);var Zm=sV1();Zm.setDriver(oV1);Zm.Mongoose.prototype.mongo=iA();eV1.exports=Zm});var DY=O((g66,K0)=>{var B0=$N1();K0.exports=B0;K0.exports.default=B0;K0.exports.mongoose=B0;K0.exports.cast=B0.cast;K0.exports.STATES=B0.STATES;K0.exports.setDriver=B0.setDriver;K0.exports.set=B0.set;K0.exports.get=B0.get;K0.exports.createConnection=B0.createConnection;K0.exports.connect=B0.connect;K0.exports.disconnect=B0.disconnect;K0.exports.startSession=B0.startSession;K0.exports.pluralize=B0.pluralize;K0.exports.model=B0.model;K0.exports.deleteModel=B0.deleteModel;K0.exports.modelNames=B0.modelNames;K0.exports.plugin=B0.plugin;K0.exports.connections=B0.connections;K0.exports.version=B0.version;K0.exports.Aggregate=B0.Aggregate;K0.exports.Mongoose=B0.Mongoose;K0.exports.Schema=B0.Schema;K0.exports.SchemaType=B0.SchemaType;K0.exports.SchemaTypes=B0.SchemaTypes;K0.exports.VirtualType=B0.VirtualType;K0.exports.Types=B0.Types;K0.exports.Query=B0.Query;K0.exports.Model=B0.Model;K0.exports.Document=B0.Document;K0.exports.ObjectId=B0.ObjectId;K0.exports.isValidObjectId=B0.isValidObjectId;K0.exports.isObjectIdOrHexString=B0.isObjectIdOrHexString;K0.exports.syncIndexes=B0.syncIndexes;K0.exports.Decimal128=B0.Decimal128;K0.exports.Mixed=B0.Mixed;K0.exports.Date=B0.Date;K0.exports.Number=B0.Number;K0.exports.Error=B0.Error;K0.exports.MongooseError=B0.MongooseError;K0.exports.now=B0.now;K0.exports.CastError=B0.CastError;K0.exports.SchemaTypeOptions=B0.SchemaTypeOptions;K0.exports.mongo=B0.mongo;K0.exports.mquery=B0.mquery;K0.exports.sanitizeFilter=B0.sanitizeFilter;K0.exports.trusted=B0.trusted;K0.exports.skipMiddlewareFunction=B0.skipMiddlewareFunction;K0.exports.overwriteMiddlewareResult=B0.overwriteMiddlewareResult});function WN1($){switch($){case"a-z":return"abcdefghijklmnopqrstuvwxyz";case"A-Z":return"ABCDEFGHIJKLMNOPQRSTUVWXYZ";case"0-9":return"0123456789";case"-_":return"-_";default:throw Error(`Unsupported alphabet: ${$}`)}}function XH(...$){let F=$.map(WN1).join("");if(F.length===0)throw Error("No valid characters provided for random string generation.");let A=F.length;return(J,...X)=>{if(J<=0)throw Error("Length must be a positive integer.");let Y=F,W=A;if(X.length>0)Y=X.map(WN1).join(""),W=Y.length;let Z=Math.floor(256/W)*W,D=new Uint8Array(J*2),G=D.length,z="",H=G,U;while(z.length<J){if(H>=G)crypto.getRandomValues(D),H=0;if(U=D[H++],U<Z)z+=Y[U%W]}return z}}var hP=()=>{};function nm($){return $}var rm=()=>{};function ow($,F,A){let J=!1;return function(...X){if(!J)(A?.warn??console.warn)(`[Deprecation] ${F}`),J=!0;return $.apply(this,X)}}var KC1=()=>{};var S5=($)=>{return XH("a-z","A-Z","0-9")($||32)};var am=x(()=>{hP()});function F1($,F,A){function J(Z,D){if(!Z._zod)Object.defineProperty(Z,"_zod",{value:{def:D,constr:W,traits:new Set},enumerable:!1});if(Z._zod.traits.has($))return;Z._zod.traits.add($),F(Z,D);let G=W.prototype,z=Object.keys(G);for(let H=0;H<z.length;H++){let U=z[H];if(!(U in Z))Z[U]=G[U].bind(Z)}}let X=A?.Parent??Object;class Y extends X{}Object.defineProperty(Y,"name",{value:$});function W(Z){var D;let G=A?.Parent?new Y:this;J(G,Z),(D=G._zod).deferred??(D.deferred=[]);for(let z of G._zod.deferred)z();return G}return Object.defineProperty(W,"init",{value:J}),Object.defineProperty(W,Symbol.hasInstance,{value:(Z)=>{if(A?.Parent&&Z instanceof A.Parent)return!0;return Z?._zod?.traits?.has($)}}),Object.defineProperty(W,"name",{value:$}),W}function M4($){if($)Object.assign(ew,$);return ew}var HR,UR,AA,pZ,ew;var qH=x(()=>{HR=Object.freeze({status:"aborted"});UR=Symbol("zod_brand");AA=class AA extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}};pZ=class pZ extends Error{constructor($){super(`Encountered unidirectional transform during encode: ${$}`);this.name="ZodEncodeError"}};ew={}});var I1={};l2(I1,{unwrapMessage:()=>$q,uint8ArrayToHex:()=>Pq0,uint8ArrayToBase64url:()=>Cq0,uint8ArrayToBase64:()=>qC1,stringifyPrimitive:()=>P1,slugify:()=>om,shallowClone:()=>$d,safeExtend:()=>wq0,required:()=>Eq0,randomString:()=>Gq0,propertyKeyTypes:()=>Jq,promiseAllObject:()=>Dq0,primitiveTypes:()=>Fd,prefixIssues:()=>b7,pick:()=>Qq0,partial:()=>Lq0,parsedType:()=>R1,optionalKeys:()=>Ad,omit:()=>Kq0,objectClone:()=>Yq0,numKeys:()=>zq0,nullish:()=>qY,normalizeParams:()=>O1,mergeDefs:()=>PJ,merge:()=>qq0,jsonStringifyReplacer:()=>LH,joinValues:()=>G1,issue:()=>VH,isPlainObject:()=>EY,isObject:()=>iZ,hexToUint8Array:()=>Mq0,getSizableOrigin:()=>Xq,getParsedType:()=>Hq0,getLengthableOrigin:()=>Yq,getEnumValues:()=>Fq,getElementAtPath:()=>Zq0,floatSafeRemainder:()=>sm,finalizeIssue:()=>u3,extend:()=>Bq0,escapeRegex:()=>_5,esc:()=>QR,defineLazy:()=>h0,createTransparentProxy:()=>Uq0,cloneDef:()=>Wq0,clone:()=>j8,cleanRegex:()=>Aq,cleanEnum:()=>Vq0,captureStackTrace:()=>KR,cached:()=>EH,base64urlToUint8Array:()=>Nq0,base64ToUint8Array:()=>wC1,assignProp:()=>LY,assertNotEqual:()=>Fq0,assertNever:()=>Jq0,assertIs:()=>Aq0,assertEqual:()=>$q0,assert:()=>Xq0,allowsEval:()=>em,aborted:()=>VY,NUMBER_FORMAT_RANGES:()=>Jd,Class:()=>LC1,BIGINT_FORMAT_RANGES:()=>Xd});function $q0($){return $}function Fq0($){return $}function Aq0($){}function Jq0($){throw Error("Unexpected value in exhaustive check")}function Xq0($){}function Fq($){let F=Object.values($).filter((J)=>typeof J==="number");return Object.entries($).filter(([J,X])=>F.indexOf(+J)===-1).map(([J,X])=>X)}function G1($,F="|"){return $.map((A)=>P1(A)).join(F)}function LH($,F){if(typeof F==="bigint")return F.toString();return F}function EH($){return{get value(){{let A=$();return Object.defineProperty(this,"value",{value:A}),A}throw Error("cached value already set")}}}function qY($){return $===null||$===void 0}function Aq($){let F=$.startsWith("^")?1:0,A=$.endsWith("$")?$.length-1:$.length;return $.slice(F,A)}function sm($,F){let A=($.toString().split(".")[1]||"").length,J=F.toString(),X=(J.split(".")[1]||"").length;if(X===0&&/\d?e-\d?/.test(J)){let D=J.match(/\d?e-(\d?)/);if(D?.[1])X=Number.parseInt(D[1])}let Y=A>X?A:X,W=Number.parseInt($.toFixed(Y).replace(".","")),Z=Number.parseInt(F.toFixed(Y).replace(".",""));return W%Z/10**Y}function h0($,F,A){let J=void 0;Object.defineProperty($,F,{get(){if(J===BC1)return;if(J===void 0)J=BC1,J=A();return J},set(X){Object.defineProperty($,F,{value:X})},configurable:!0})}function Yq0($){return Object.create(Object.getPrototypeOf($),Object.getOwnPropertyDescriptors($))}function LY($,F,A){Object.defineProperty($,F,{value:A,writable:!0,enumerable:!0,configurable:!0})}function PJ(...$){let F={};for(let A of $){let J=Object.getOwnPropertyDescriptors(A);Object.assign(F,J)}return Object.defineProperties({},F)}function Wq0($){return PJ($._zod.def)}function Zq0($,F){if(!F)return $;return F.reduce((A,J)=>A?.[J],$)}function Dq0($){let F=Object.keys($),A=F.map((J)=>$[J]);return Promise.all(A).then((J)=>{let X={};for(let Y=0;Y<F.length;Y++)X[F[Y]]=J[Y];return X})}function Gq0($=10){let A="";for(let J=0;J<$;J++)A+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return A}function QR($){return JSON.stringify($)}function om($){return $.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}function iZ($){return typeof $==="object"&&$!==null&&!Array.isArray($)}function EY($){if(iZ($)===!1)return!1;let F=$.constructor;if(F===void 0)return!0;if(typeof F!=="function")return!0;let A=F.prototype;if(iZ(A)===!1)return!1;if(Object.prototype.hasOwnProperty.call(A,"isPrototypeOf")===!1)return!1;return!0}function $d($){if(EY($))return{...$};if(Array.isArray($))return[...$];return $}function zq0($){let F=0;for(let A in $)if(Object.prototype.hasOwnProperty.call($,A))F++;return F}function _5($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function j8($,F,A){let J=new $._zod.constr(F??$._zod.def);if(!F||A?.parent)J._zod.parent=$;return J}function O1($){let F=$;if(!F)return{};if(typeof F==="string")return{error:()=>F};if(F?.message!==void 0){if(F?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");F.error=F.message}if(delete F.message,typeof F.error==="string")return{...F,error:()=>F.error};return F}function Uq0($){let F;return new Proxy({},{get(A,J,X){return F??(F=$()),Reflect.get(F,J,X)},set(A,J,X,Y){return F??(F=$()),Reflect.set(F,J,X,Y)},has(A,J){return F??(F=$()),Reflect.has(F,J)},deleteProperty(A,J){return F??(F=$()),Reflect.deleteProperty(F,J)},ownKeys(A){return F??(F=$()),Reflect.ownKeys(F)},getOwnPropertyDescriptor(A,J){return F??(F=$()),Reflect.getOwnPropertyDescriptor(F,J)},defineProperty(A,J,X){return F??(F=$()),Reflect.defineProperty(F,J,X)}})}function P1($){if(typeof $==="bigint")return $.toString()+"n";if(typeof $==="string")return`"${$}"`;return`${$}`}function Ad($){return Object.keys($).filter((F)=>{return $[F]._zod.optin==="optional"&&$[F]._zod.optout==="optional"})}function Qq0($,F){let A=$._zod.def,J=A.checks;if(J&&J.length>0)throw Error(".pick() cannot be used on object schemas containing refinements");let Y=PJ($._zod.def,{get shape(){let W={};for(let Z in F){if(!(Z in A.shape))throw Error(`Unrecognized key: "${Z}"`);if(!F[Z])continue;W[Z]=A.shape[Z]}return LY(this,"shape",W),W},checks:[]});return j8($,Y)}function Kq0($,F){let A=$._zod.def,J=A.checks;if(J&&J.length>0)throw Error(".omit() cannot be used on object schemas containing refinements");let Y=PJ($._zod.def,{get shape(){let W={...$._zod.def.shape};for(let Z in F){if(!(Z in A.shape))throw Error(`Unrecognized key: "${Z}"`);if(!F[Z])continue;delete W[Z]}return LY(this,"shape",W),W},checks:[]});return j8($,Y)}function Bq0($,F){if(!EY(F))throw Error("Invalid input to extend: expected a plain object");let A=$._zod.def.checks;if(A&&A.length>0){let Y=$._zod.def.shape;for(let W in F)if(Object.getOwnPropertyDescriptor(Y,W)!==void 0)throw Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}let X=PJ($._zod.def,{get shape(){let Y={...$._zod.def.shape,...F};return LY(this,"shape",Y),Y}});return j8($,X)}function wq0($,F){if(!EY(F))throw Error("Invalid input to safeExtend: expected a plain object");let A=PJ($._zod.def,{get shape(){let J={...$._zod.def.shape,...F};return LY(this,"shape",J),J}});return j8($,A)}function qq0($,F){let A=PJ($._zod.def,{get shape(){let J={...$._zod.def.shape,...F._zod.def.shape};return LY(this,"shape",J),J},get catchall(){return F._zod.def.catchall},checks:[]});return j8($,A)}function Lq0($,F,A){let X=F._zod.def.checks;if(X&&X.length>0)throw Error(".partial() cannot be used on object schemas containing refinements");let W=PJ(F._zod.def,{get shape(){let Z=F._zod.def.shape,D={...Z};if(A)for(let G in A){if(!(G in Z))throw Error(`Unrecognized key: "${G}"`);if(!A[G])continue;D[G]=$?new $({type:"optional",innerType:Z[G]}):Z[G]}else for(let G in Z)D[G]=$?new $({type:"optional",innerType:Z[G]}):Z[G];return LY(this,"shape",D),D},checks:[]});return j8(F,W)}function Eq0($,F,A){let J=PJ(F._zod.def,{get shape(){let X=F._zod.def.shape,Y={...X};if(A)for(let W in A){if(!(W in Y))throw Error(`Unrecognized key: "${W}"`);if(!A[W])continue;Y[W]=new $({type:"nonoptional",innerType:X[W]})}else for(let W in X)Y[W]=new $({type:"nonoptional",innerType:X[W]});return LY(this,"shape",Y),Y}});return j8(F,J)}function VY($,F=0){if($.aborted===!0)return!0;for(let A=F;A<$.issues.length;A++)if($.issues[A]?.continue!==!0)return!0;return!1}function b7($,F){return F.map((A)=>{var J;return(J=A).path??(J.path=[]),A.path.unshift($),A})}function $q($){return typeof $==="string"?$:$?.message}function u3($,F,A){let J={...$,path:$.path??[]};if(!$.message){let X=$q($.inst?._zod.def?.error?.($))??$q(F?.error?.($))??$q(A.customError?.($))??$q(A.localeError?.($))??"Invalid input";J.message=X}if(delete J.inst,delete J.continue,!F?.reportInput)delete J.input;return J}function Xq($){if($ instanceof Set)return"set";if($ instanceof Map)return"map";if($ instanceof File)return"file";return"unknown"}function Yq($){if(Array.isArray($))return"array";if(typeof $==="string")return"string";return"unknown"}function R1($){let F=typeof $;switch(F){case"number":return Number.isNaN($)?"nan":"number";case"object":{if($===null)return"null";if(Array.isArray($))return"array";let A=$;if(A&&Object.getPrototypeOf(A)!==Object.prototype&&"constructor"in A&&A.constructor)return A.constructor.name}}return F}function VH(...$){let[F,A,J]=$;if(typeof F==="string")return{message:F,code:"custom",input:A,inst:J};return{...F}}function Vq0($){return Object.entries($).filter(([F,A])=>{return Number.isNaN(Number.parseInt(F,10))}).map((F)=>F[1])}function wC1($){let F=atob($),A=new Uint8Array(F.length);for(let J=0;J<F.length;J++)A[J]=F.charCodeAt(J);return A}function qC1($){let F="";for(let A=0;A<$.length;A++)F+=String.fromCharCode($[A]);return btoa(F)}function Nq0($){let F=$.replace(/-/g,"+").replace(/_/g,"/"),A="=".repeat((4-F.length%4)%4);return wC1(F+A)}function Cq0($){return qC1($).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Mq0($){let F=$.replace(/^0x/,"");if(F.length%2!==0)throw Error("Invalid hex string length");let A=new Uint8Array(F.length/2);for(let J=0;J<F.length;J+=2)A[J/2]=Number.parseInt(F.slice(J,J+2),16);return A}function Pq0($){return Array.from($).map((F)=>F.toString(16).padStart(2,"0")).join("")}class LC1{constructor(...$){}}var BC1,KR,em,Hq0=($)=>{let F=typeof $;switch(F){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN($)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray($))return"array";if($===null)return"null";if($.then&&typeof $.then==="function"&&$.catch&&typeof $.catch==="function")return"promise";if(typeof Map<"u"&&$ instanceof Map)return"map";if(typeof Set<"u"&&$ instanceof Set)return"set";if(typeof Date<"u"&&$ instanceof Date)return"date";if(typeof File<"u"&&$ instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${F}`)}},Jq,Fd,Jd,Xd;var e1=x(()=>{BC1=Symbol("evaluating");KR="captureStackTrace"in Error?Error.captureStackTrace:(...$)=>{};em=EH(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch($){return!1}});Jq=new Set(["string","number","symbol"]),Fd=new Set(["string","number","bigint","boolean","symbol","undefined"]);Jd={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Xd={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]}});function NH($,F=(A)=>A.message){let A={},J=[];for(let X of $.issues)if(X.path.length>0)A[X.path[0]]=A[X.path[0]]||[],A[X.path[0]].push(F(X));else J.push(F(X));return{formErrors:J,fieldErrors:A}}function CH($,F=(A)=>A.message){let A={_errors:[]},J=(X)=>{for(let Y of X.issues)if(Y.code==="invalid_union"&&Y.errors.length)Y.errors.map((W)=>J({issues:W}));else if(Y.code==="invalid_key")J({issues:Y.issues});else if(Y.code==="invalid_element")J({issues:Y.issues});else if(Y.path.length===0)A._errors.push(F(Y));else{let W=A,Z=0;while(Z<Y.path.length){let D=Y.path[Z];if(Z!==Y.path.length-1)W[D]=W[D]||{_errors:[]};else W[D]=W[D]||{_errors:[]},W[D]._errors.push(F(Y));W=W[D],Z++}}};return J($),A}function BR($,F=(A)=>A.message){let A={errors:[]},J=(X,Y=[])=>{var W,Z;for(let D of X.issues)if(D.code==="invalid_union"&&D.errors.length)D.errors.map((G)=>J({issues:G},D.path));else if(D.code==="invalid_key")J({issues:D.issues},D.path);else if(D.code==="invalid_element")J({issues:D.issues},D.path);else{let G=[...Y,...D.path];if(G.length===0){A.errors.push(F(D));continue}let z=A,H=0;while(H<G.length){let U=G[H],Q=H===G.length-1;if(typeof U==="string")z.properties??(z.properties={}),(W=z.properties)[U]??(W[U]={errors:[]}),z=z.properties[U];else z.items??(z.items=[]),(Z=z.items)[U]??(Z[U]={errors:[]}),z=z.items[U];if(Q)z.errors.push(F(D));H++}}};return J($),A}function VC1($){let F=[],A=$.map((J)=>typeof J==="object"?J.key:J);for(let J of A)if(typeof J==="number")F.push(`[${J}]`);else if(typeof J==="symbol")F.push(`[${JSON.stringify(String(J))}]`);else if(/[^\w$]/.test(J))F.push(`[${JSON.stringify(J)}]`);else{if(F.length)F.push(".");F.push(J)}return F.join("")}function wR($){let F=[],A=[...$.issues].sort((J,X)=>(J.path??[]).length-(X.path??[]).length);for(let J of A)if(F.push(`\u2716 ${J.message}`),J.path?.length)F.push(`  \u2192 at ${VC1(J.path)}`);return F.join(`
`)}var EC1=($,F)=>{$.name="$ZodError",Object.defineProperty($,"_zod",{value:$._zod,enumerable:!1}),Object.defineProperty($,"issues",{value:F,enumerable:!1}),$.message=JSON.stringify(F,LH,2),Object.defineProperty($,"toString",{value:()=>$.message,enumerable:!1})},Wq,h3;var Yd=x(()=>{qH();e1();Wq=F1("$ZodError",EC1),h3=F1("$ZodError",EC1,{Parent:Error})});var MH=($)=>(F,A,J,X)=>{let Y=J?Object.assign(J,{async:!1}):{async:!1},W=F._zod.run({value:A,issues:[]},Y);if(W instanceof Promise)throw new AA;if(W.issues.length){let Z=new(X?.Err??$)(W.issues.map((D)=>u3(D,Y,M4())));throw KR(Z,X?.callee),Z}return W.value},qR,PH=($)=>async(F,A,J,X)=>{let Y=J?Object.assign(J,{async:!0}):{async:!0},W=F._zod.run({value:A,issues:[]},Y);if(W instanceof Promise)W=await W;if(W.issues.length){let Z=new(X?.Err??$)(W.issues.map((D)=>u3(D,Y,M4())));throw KR(Z,X?.callee),Z}return W.value},LR,RH=($)=>(F,A,J)=>{let X=J?{...J,async:!1}:{async:!1},Y=F._zod.run({value:A,issues:[]},X);if(Y instanceof Promise)throw new AA;return Y.issues.length?{success:!1,error:new($??Wq)(Y.issues.map((W)=>u3(W,X,M4())))}:{success:!0,data:Y.value}},Wd,IH=($)=>async(F,A,J)=>{let X=J?Object.assign(J,{async:!0}):{async:!0},Y=F._zod.run({value:A,issues:[]},X);if(Y instanceof Promise)Y=await Y;return Y.issues.length?{success:!1,error:new $(Y.issues.map((W)=>u3(W,X,M4())))}:{success:!0,data:Y.value}},Zd,ER=($)=>(F,A,J)=>{let X=J?Object.assign(J,{direction:"backward"}):{direction:"backward"};return MH($)(F,A,X)},Iq0,VR=($)=>(F,A,J)=>{return MH($)(F,A,J)},Tq0,NR=($)=>async(F,A,J)=>{let X=J?Object.assign(J,{direction:"backward"}):{direction:"backward"};return PH($)(F,A,X)},jq0,CR=($)=>async(F,A,J)=>{return PH($)(F,A,J)},Oq0,MR=($)=>(F,A,J)=>{let X=J?Object.assign(J,{direction:"backward"}):{direction:"backward"};return RH($)(F,A,X)},Sq0,PR=($)=>(F,A,J)=>{return RH($)(F,A,J)},_q0,RR=($)=>async(F,A,J)=>{let X=J?Object.assign(J,{direction:"backward"}):{direction:"backward"};return IH($)(F,A,X)},kq0,IR=($)=>async(F,A,J)=>{return IH($)(F,A,J)},bq0;var Dd=x(()=>{qH();Yd();e1();qR=MH(h3),LR=PH(h3),Wd=RH(h3),Zd=IH(h3),Iq0=ER(h3),Tq0=VR(h3),jq0=NR(h3),Oq0=CR(h3),Sq0=MR(h3),_q0=PR(h3),kq0=RR(h3),bq0=IR(h3)});var x7={};l2(x7,{xid:()=>Ud,uuid7:()=>vq0,uuid6:()=>fq0,uuid4:()=>gq0,uuid:()=>nZ,uppercase:()=>fd,unicodeEmail:()=>NC1,undefined:()=>xd,ulid:()=>Hd,time:()=>Td,string:()=>Od,sha512_hex:()=>XL0,sha512_base64url:()=>WL0,sha512_base64:()=>YL0,sha384_hex:()=>FL0,sha384_base64url:()=>JL0,sha384_base64:()=>AL0,sha256_hex:()=>oq0,sha256_base64url:()=>$L0,sha256_base64:()=>eq0,sha1_hex:()=>aq0,sha1_base64url:()=>sq0,sha1_base64:()=>tq0,rfc5322Email:()=>uq0,number:()=>Zq,null:()=>bd,nanoid:()=>Kd,md5_hex:()=>iq0,md5_base64url:()=>rq0,md5_base64:()=>nq0,mac:()=>Nd,lowercase:()=>gd,ksuid:()=>Qd,ipv6:()=>Vd,ipv4:()=>Ed,integer:()=>_d,idnEmail:()=>hq0,html5Email:()=>yq0,hostname:()=>cq0,hex:()=>pq0,guid:()=>wd,extendedDuration:()=>xq0,emoji:()=>Ld,email:()=>qd,e164:()=>Rd,duration:()=>Bd,domain:()=>lq0,datetime:()=>jd,date:()=>Id,cuid2:()=>zd,cuid:()=>Gd,cidrv6:()=>Md,cidrv4:()=>Cd,browserEmail:()=>mq0,boolean:()=>kd,bigint:()=>Sd,base64url:()=>TR,base64:()=>Pd});function Ld(){return new RegExp(dq0,"u")}function MC1($){return typeof $.precision==="number"?$.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":$.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${$.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function Td($){return new RegExp(`^${MC1($)}$`)}function jd($){let F=MC1({precision:$.precision}),A=["Z"];if($.local)A.push("");if($.offset)A.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let J=`${F}(?:${A.join("|")})`;return new RegExp(`^${CC1}T(?:${J})$`)}function Dq($,F){return new RegExp(`^[A-Za-z0-9+/]{${$}}${F}$`)}function Gq($){return new RegExp(`^[A-Za-z0-9_-]{${$}}$`)}var Gd,zd,Hd,Ud,Qd,Kd,Bd,xq0,wd,nZ=($)=>{if(!$)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${$}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)},gq0,fq0,vq0,qd,yq0,uq0,NC1,hq0,mq0,dq0="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Ed,Vd,Nd=($)=>{let F=_5($??":");return new RegExp(`^(?:[0-9A-F]{2}${F}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${F}){5}[0-9a-f]{2}$`)},Cd,Md,Pd,TR,cq0,lq0,Rd,CC1="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Id,Od=($)=>{let F=$?`[\\s\\S]{${$?.minimum??0},${$?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${F}$`)},Sd,_d,Zq,kd,bd,xd,gd,fd,pq0,iq0,nq0,rq0,aq0,tq0,sq0,oq0,eq0,$L0,FL0,AL0,JL0,XL0,YL0,WL0;var jR=x(()=>{e1();Gd=/^[cC][^\s-]{8,}$/,zd=/^[0-9a-z]+$/,Hd=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Ud=/^[0-9a-vA-V]{20}$/,Qd=/^[A-Za-z0-9]{27}$/,Kd=/^[a-zA-Z0-9_-]{21}$/,Bd=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,xq0=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,wd=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,gq0=nZ(4),fq0=nZ(6),vq0=nZ(7),qd=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,yq0=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,uq0=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,NC1=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,hq0=NC1,mq0=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;Ed=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Vd=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Cd=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Md=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Pd=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,TR=/^[A-Za-z0-9_-]*$/,cq0=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,lq0=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,Rd=/^\+[1-9]\d{6,14}$/,Id=new RegExp(`^${CC1}$`);Sd=/^-?\d+n?$/,_d=/^-?\d+$/,Zq=/^-?\d+(?:\.\d+)?$/,kd=/^(?:true|false)$/i,bd=/^null$/i,xd=/^undefined$/i,gd=/^[^A-Z]*$/,fd=/^[^a-z]*$/,pq0=/^[0-9a-fA-F]*$/;iq0=/^[0-9a-fA-F]{32}$/,nq0=Dq(22,"=="),rq0=Gq(22),aq0=/^[0-9a-fA-F]{40}$/,tq0=Dq(27,"="),sq0=Gq(27),oq0=/^[0-9a-fA-F]{64}$/,eq0=Dq(43,"="),$L0=Gq(43),FL0=/^[0-9a-fA-F]{96}$/,AL0=Dq(64,""),JL0=Gq(64),XL0=/^[0-9a-fA-F]{128}$/,YL0=Dq(86,"=="),WL0=Gq(86)});function PC1($,F,A){if($.issues.length)F.issues.push(...b7(A,$.issues))}var B2,RC1,OR,SR,vd,yd,ud,hd,md,dd,cd,ld,pd,TH,id,nd,rd,ad,td,sd,od,ed,$c;var _R=x(()=>{qH();jR();e1();B2=F1("$ZodCheck",($,F)=>{var A;$._zod??($._zod={}),$._zod.def=F,(A=$._zod).onattach??(A.onattach=[])}),RC1={number:"number",bigint:"bigint",object:"date"},OR=F1("$ZodCheckLessThan",($,F)=>{B2.init($,F);let A=RC1[typeof F.value];$._zod.onattach.push((J)=>{let X=J._zod.bag,Y=(F.inclusive?X.maximum:X.exclusiveMaximum)??Number.POSITIVE_INFINITY;if(F.value<Y)if(F.inclusive)X.maximum=F.value;else X.exclusiveMaximum=F.value}),$._zod.check=(J)=>{if(F.inclusive?J.value<=F.value:J.value<F.value)return;J.issues.push({origin:A,code:"too_big",maximum:typeof F.value==="object"?F.value.getTime():F.value,input:J.value,inclusive:F.inclusive,inst:$,continue:!F.abort})}}),SR=F1("$ZodCheckGreaterThan",($,F)=>{B2.init($,F);let A=RC1[typeof F.value];$._zod.onattach.push((J)=>{let X=J._zod.bag,Y=(F.inclusive?X.minimum:X.exclusiveMinimum)??Number.NEGATIVE_INFINITY;if(F.value>Y)if(F.inclusive)X.minimum=F.value;else X.exclusiveMinimum=F.value}),$._zod.check=(J)=>{if(F.inclusive?J.value>=F.value:J.value>F.value)return;J.issues.push({origin:A,code:"too_small",minimum:typeof F.value==="object"?F.value.getTime():F.value,input:J.value,inclusive:F.inclusive,inst:$,continue:!F.abort})}}),vd=F1("$ZodCheckMultipleOf",($,F)=>{B2.init($,F),$._zod.onattach.push((A)=>{var J;(J=A._zod.bag).multipleOf??(J.multipleOf=F.value)}),$._zod.check=(A)=>{if(typeof A.value!==typeof F.value)throw Error("Cannot mix number and bigint in multiple_of check.");if(typeof A.value==="bigint"?A.value%F.value===BigInt(0):sm(A.value,F.value)===0)return;A.issues.push({origin:typeof A.value,code:"not_multiple_of",divisor:F.value,input:A.value,inst:$,continue:!F.abort})}}),yd=F1("$ZodCheckNumberFormat",($,F)=>{B2.init($,F),F.format=F.format||"float64";let A=F.format?.includes("int"),J=A?"int":"number",[X,Y]=Jd[F.format];$._zod.onattach.push((W)=>{let Z=W._zod.bag;if(Z.format=F.format,Z.minimum=X,Z.maximum=Y,A)Z.pattern=_d}),$._zod.check=(W)=>{let Z=W.value;if(A){if(!Number.isInteger(Z)){W.issues.push({expected:J,format:F.format,code:"invalid_type",continue:!1,input:Z,inst:$});return}if(!Number.isSafeInteger(Z)){if(Z>0)W.issues.push({input:Z,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:$,origin:J,inclusive:!0,continue:!F.abort});else W.issues.push({input:Z,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:$,origin:J,inclusive:!0,continue:!F.abort});return}}if(Z<X)W.issues.push({origin:"number",input:Z,code:"too_small",minimum:X,inclusive:!0,inst:$,continue:!F.abort});if(Z>Y)W.issues.push({origin:"number",input:Z,code:"too_big",maximum:Y,inclusive:!0,inst:$,continue:!F.abort})}}),ud=F1("$ZodCheckBigIntFormat",($,F)=>{B2.init($,F);let[A,J]=Xd[F.format];$._zod.onattach.push((X)=>{let Y=X._zod.bag;Y.format=F.format,Y.minimum=A,Y.maximum=J}),$._zod.check=(X)=>{let Y=X.value;if(Y<A)X.issues.push({origin:"bigint",input:Y,code:"too_small",minimum:A,inclusive:!0,inst:$,continue:!F.abort});if(Y>J)X.issues.push({origin:"bigint",input:Y,code:"too_big",maximum:J,inclusive:!0,inst:$,continue:!F.abort})}}),hd=F1("$ZodCheckMaxSize",($,F)=>{var A;B2.init($,F),(A=$._zod.def).when??(A.when=(J)=>{let X=J.value;return!qY(X)&&X.size!==void 0}),$._zod.onattach.push((J)=>{let X=J._zod.bag.maximum??Number.POSITIVE_INFINITY;if(F.maximum<X)J._zod.bag.maximum=F.maximum}),$._zod.check=(J)=>{let X=J.value;if(X.size<=F.maximum)return;J.issues.push({origin:Xq(X),code:"too_big",maximum:F.maximum,inclusive:!0,input:X,inst:$,continue:!F.abort})}}),md=F1("$ZodCheckMinSize",($,F)=>{var A;B2.init($,F),(A=$._zod.def).when??(A.when=(J)=>{let X=J.value;return!qY(X)&&X.size!==void 0}),$._zod.onattach.push((J)=>{let X=J._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(F.minimum>X)J._zod.bag.minimum=F.minimum}),$._zod.check=(J)=>{let X=J.value;if(X.size>=F.minimum)return;J.issues.push({origin:Xq(X),code:"too_small",minimum:F.minimum,inclusive:!0,input:X,inst:$,continue:!F.abort})}}),dd=F1("$ZodCheckSizeEquals",($,F)=>{var A;B2.init($,F),(A=$._zod.def).when??(A.when=(J)=>{let X=J.value;return!qY(X)&&X.size!==void 0}),$._zod.onattach.push((J)=>{let X=J._zod.bag;X.minimum=F.size,X.maximum=F.size,X.size=F.size}),$._zod.check=(J)=>{let X=J.value,Y=X.size;if(Y===F.size)return;let W=Y>F.size;J.issues.push({origin:Xq(X),...W?{code:"too_big",maximum:F.size}:{code:"too_small",minimum:F.size},inclusive:!0,exact:!0,input:J.value,inst:$,continue:!F.abort})}}),cd=F1("$ZodCheckMaxLength",($,F)=>{var A;B2.init($,F),(A=$._zod.def).when??(A.when=(J)=>{let X=J.value;return!qY(X)&&X.length!==void 0}),$._zod.onattach.push((J)=>{let X=J._zod.bag.maximum??Number.POSITIVE_INFINITY;if(F.maximum<X)J._zod.bag.maximum=F.maximum}),$._zod.check=(J)=>{let X=J.value;if(X.length<=F.maximum)return;let W=Yq(X);J.issues.push({origin:W,code:"too_big",maximum:F.maximum,inclusive:!0,input:X,inst:$,continue:!F.abort})}}),ld=F1("$ZodCheckMinLength",($,F)=>{var A;B2.init($,F),(A=$._zod.def).when??(A.when=(J)=>{let X=J.value;return!qY(X)&&X.length!==void 0}),$._zod.onattach.push((J)=>{let X=J._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(F.minimum>X)J._zod.bag.minimum=F.minimum}),$._zod.check=(J)=>{let X=J.value;if(X.length>=F.minimum)return;let W=Yq(X);J.issues.push({origin:W,code:"too_small",minimum:F.minimum,inclusive:!0,input:X,inst:$,continue:!F.abort})}}),pd=F1("$ZodCheckLengthEquals",($,F)=>{var A;B2.init($,F),(A=$._zod.def).when??(A.when=(J)=>{let X=J.value;return!qY(X)&&X.length!==void 0}),$._zod.onattach.push((J)=>{let X=J._zod.bag;X.minimum=F.length,X.maximum=F.length,X.length=F.length}),$._zod.check=(J)=>{let X=J.value,Y=X.length;if(Y===F.length)return;let W=Yq(X),Z=Y>F.length;J.issues.push({origin:W,...Z?{code:"too_big",maximum:F.length}:{code:"too_small",minimum:F.length},inclusive:!0,exact:!0,input:J.value,inst:$,continue:!F.abort})}}),TH=F1("$ZodCheckStringFormat",($,F)=>{var A,J;if(B2.init($,F),$._zod.onattach.push((X)=>{let Y=X._zod.bag;if(Y.format=F.format,F.pattern)Y.patterns??(Y.patterns=new Set),Y.patterns.add(F.pattern)}),F.pattern)(A=$._zod).check??(A.check=(X)=>{if(F.pattern.lastIndex=0,F.pattern.test(X.value))return;X.issues.push({origin:"string",code:"invalid_format",format:F.format,input:X.value,...F.pattern?{pattern:F.pattern.toString()}:{},inst:$,continue:!F.abort})});else(J=$._zod).check??(J.check=()=>{})}),id=F1("$ZodCheckRegex",($,F)=>{TH.init($,F),$._zod.check=(A)=>{if(F.pattern.lastIndex=0,F.pattern.test(A.value))return;A.issues.push({origin:"string",code:"invalid_format",format:"regex",input:A.value,pattern:F.pattern.toString(),inst:$,continue:!F.abort})}}),nd=F1("$ZodCheckLowerCase",($,F)=>{F.pattern??(F.pattern=gd),TH.init($,F)}),rd=F1("$ZodCheckUpperCase",($,F)=>{F.pattern??(F.pattern=fd),TH.init($,F)}),ad=F1("$ZodCheckIncludes",($,F)=>{B2.init($,F);let A=_5(F.includes),J=new RegExp(typeof F.position==="number"?`^.{${F.position}}${A}`:A);F.pattern=J,$._zod.onattach.push((X)=>{let Y=X._zod.bag;Y.patterns??(Y.patterns=new Set),Y.patterns.add(J)}),$._zod.check=(X)=>{if(X.value.includes(F.includes,F.position))return;X.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:F.includes,input:X.value,inst:$,continue:!F.abort})}}),td=F1("$ZodCheckStartsWith",($,F)=>{B2.init($,F);let A=new RegExp(`^${_5(F.prefix)}.*`);F.pattern??(F.pattern=A),$._zod.onattach.push((J)=>{let X=J._zod.bag;X.patterns??(X.patterns=new Set),X.patterns.add(A)}),$._zod.check=(J)=>{if(J.value.startsWith(F.prefix))return;J.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:F.prefix,input:J.value,inst:$,continue:!F.abort})}}),sd=F1("$ZodCheckEndsWith",($,F)=>{B2.init($,F);let A=new RegExp(`.*${_5(F.suffix)}$`);F.pattern??(F.pattern=A),$._zod.onattach.push((J)=>{let X=J._zod.bag;X.patterns??(X.patterns=new Set),X.patterns.add(A)}),$._zod.check=(J)=>{if(J.value.endsWith(F.suffix))return;J.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:F.suffix,input:J.value,inst:$,continue:!F.abort})}});od=F1("$ZodCheckProperty",($,F)=>{B2.init($,F),$._zod.check=(A)=>{let J=F.schema._zod.run({value:A.value[F.property],issues:[]},{});if(J instanceof Promise)return J.then((X)=>PC1(X,A,F.property));PC1(J,A,F.property);return}}),ed=F1("$ZodCheckMimeType",($,F)=>{B2.init($,F);let A=new Set(F.mime);$._zod.onattach.push((J)=>{J._zod.bag.mime=F.mime}),$._zod.check=(J)=>{if(A.has(J.value.type))return;J.issues.push({code:"invalid_value",values:F.mime,input:J.value.type,inst:$,continue:!F.abort})}}),$c=F1("$ZodCheckOverwrite",($,F)=>{B2.init($,F),$._zod.check=(A)=>{A.value=F.tx(A.value)}})});class kR{constructor($=[]){if(this.content=[],this.indent=0,this)this.args=$}indented($){this.indent+=1,$(this),this.indent-=1}write($){if(typeof $==="function"){$(this,{execution:"sync"}),$(this,{execution:"async"});return}let A=$.split(`
`).filter((Y)=>Y),J=Math.min(...A.map((Y)=>Y.length-Y.trimStart().length)),X=A.map((Y)=>Y.slice(J)).map((Y)=>" ".repeat(this.indent*2)+Y);for(let Y of X)this.content.push(Y)}compile(){let $=Function,F=this?.args,J=[...(this?.content??[""]).map((X)=>`  ${X}`)];return new $(...F,J.join(`
`))}}var Fc;var Ac=x(()=>{Fc={major:4,minor:3,patch:5}});function Pc($){if($==="")return!0;if($.length%4!==0)return!1;try{return atob($),!0}catch{return!1}}function yC1($){if(!TR.test($))return!1;let F=$.replace(/[-_]/g,(J)=>J==="-"?"+":"/"),A=F.padEnd(Math.ceil(F.length/4)*4,"=");return Pc(A)}function uC1($,F=null){try{let A=$.split(".");if(A.length!==3)return!1;let[J]=A;if(!J)return!1;let X=JSON.parse(atob(J));if("typ"in X&&X?.typ!=="JWT")return!1;if(!X.alg)return!1;if(F&&(!("alg"in X)||X.alg!==F))return!1;return!0}catch{return!1}}function TC1($,F,A){if($.issues.length)F.issues.push(...b7(A,$.issues));F.value[A]=$.value}function vR($,F,A,J,X){if($.issues.length){if(X&&!(A in J))return;F.issues.push(...b7(A,$.issues))}if($.value===void 0){if(A in J)F.value[A]=void 0}else F.value[A]=$.value}function hC1($){let F=Object.keys($.shape);for(let J of F)if(!$.shape?.[J]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${J}": expected a Zod schema`);let A=Ad($.shape);return{...$,keys:F,keySet:new Set(F),numKeys:F.length,optionalKeys:new Set(A)}}function mC1($,F,A,J,X,Y){let W=[],Z=X.keySet,D=X.catchall._zod,G=D.def.type,z=D.optout==="optional";for(let H in F){if(Z.has(H))continue;if(G==="never"){W.push(H);continue}let U=D.run({value:F[H],issues:[]},J);if(U instanceof Promise)$.push(U.then((Q)=>vR(Q,A,H,F,z)));else vR(U,A,H,F,z)}if(W.length)A.issues.push({code:"unrecognized_keys",keys:W,input:F,inst:Y});if(!$.length)return A;return Promise.all($).then(()=>{return A})}function jC1($,F,A,J){for(let Y of $)if(Y.issues.length===0)return F.value=Y.value,F;let X=$.filter((Y)=>!VY(Y));if(X.length===1)return F.value=X[0].value,X[0];return F.issues.push({code:"invalid_union",input:F.value,inst:A,errors:$.map((Y)=>Y.issues.map((W)=>u3(W,J,M4())))}),F}function OC1($,F,A,J){let X=$.filter((Y)=>Y.issues.length===0);if(X.length===1)return F.value=X[0].value,F;if(X.length===0)F.issues.push({code:"invalid_union",input:F.value,inst:A,errors:$.map((Y)=>Y.issues.map((W)=>u3(W,J,M4())))});else F.issues.push({code:"invalid_union",input:F.value,inst:A,errors:[],inclusive:!1});return F}function Jc($,F){if($===F)return{valid:!0,data:$};if($ instanceof Date&&F instanceof Date&&+$===+F)return{valid:!0,data:$};if(EY($)&&EY(F)){let A=Object.keys(F),J=Object.keys($).filter((Y)=>A.indexOf(Y)!==-1),X={...$,...F};for(let Y of J){let W=Jc($[Y],F[Y]);if(!W.valid)return{valid:!1,mergeErrorPath:[Y,...W.mergeErrorPath]};X[Y]=W.data}return{valid:!0,data:X}}if(Array.isArray($)&&Array.isArray(F)){if($.length!==F.length)return{valid:!1,mergeErrorPath:[]};let A=[];for(let J=0;J<$.length;J++){let X=$[J],Y=F[J],W=Jc(X,Y);if(!W.valid)return{valid:!1,mergeErrorPath:[J,...W.mergeErrorPath]};A.push(W.data)}return{valid:!0,data:A}}return{valid:!1,mergeErrorPath:[]}}function SC1($,F,A){let J=new Map,X;for(let Z of F.issues)if(Z.code==="unrecognized_keys"){X??(X=Z);for(let D of Z.keys){if(!J.has(D))J.set(D,{});J.get(D).l=!0}}else $.issues.push(Z);for(let Z of A.issues)if(Z.code==="unrecognized_keys")for(let D of Z.keys){if(!J.has(D))J.set(D,{});J.get(D).r=!0}else $.issues.push(Z);let Y=[...J].filter(([,Z])=>Z.l&&Z.r).map(([Z])=>Z);if(Y.length&&X)$.issues.push({...X,keys:Y});if(VY($))return $;let W=Jc(F.value,A.value);if(!W.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(W.mergeErrorPath)}`);return $.value=W.data,$}function bR($,F,A){if($.issues.length)F.issues.push(...b7(A,$.issues));F.value[A]=$.value}function _C1($,F,A,J,X,Y,W){if($.issues.length)if(Jq.has(typeof J))A.issues.push(...b7(J,$.issues));else A.issues.push({code:"invalid_key",origin:"map",input:X,inst:Y,issues:$.issues.map((Z)=>u3(Z,W,M4()))});if(F.issues.length)if(Jq.has(typeof J))A.issues.push(...b7(J,F.issues));else A.issues.push({origin:"map",code:"invalid_element",input:X,inst:Y,key:J,issues:F.issues.map((Z)=>u3(Z,W,M4()))});A.value.set($.value,F.value)}function kC1($,F){if($.issues.length)F.issues.push(...$.issues);F.value.add($.value)}function bC1($,F){if($.issues.length&&F===void 0)return{issues:[],value:void 0};return $}function xC1($,F){if($.value===void 0)$.value=F.defaultValue;return $}function gC1($,F){if(!$.issues.length&&$.value===void 0)$.issues.push({code:"invalid_type",expected:"nonoptional",input:$.value,inst:F});return $}function xR($,F,A){if($.issues.length)return $.aborted=!0,$;return F._zod.run({value:$.value,issues:$.issues},A)}function gR($,F,A){if($.issues.length)return $.aborted=!0,$;if((A.direction||"forward")==="forward"){let X=F.transform($.value,$);if(X instanceof Promise)return X.then((Y)=>fR($,Y,F.out,A));return fR($,X,F.out,A)}else{let X=F.reverseTransform($.value,$);if(X instanceof Promise)return X.then((Y)=>fR($,Y,F.in,A));return fR($,X,F.in,A)}}function fR($,F,A,J){if($.issues.length)return $.aborted=!0,$;return A._zod.run({value:F,issues:$.issues},J)}function fC1($){return $.value=Object.freeze($.value),$}function vC1($,F,A,J){if(!$){let X={code:"custom",input:A,inst:J,path:[...J._zod.def.path??[]],continue:!J._zod.def.abort};if(J._zod.def.params)X.params=J._zod.def.params;F.issues.push(VH(X))}}var L0,rZ,X2,Xc,Yc,Wc,Zc,Dc,Gc,zc,Hc,Uc,Qc,Kc,Bc,wc,qc,Lc,Ec,Vc,Nc,Cc,Mc,Rc,Ic,Tc,jc,Oc,yR,Sc,zq,uR,_c,kc,bc,xc,gc,fc,vc,yc,uc,hc,dC1,mc,Hq,dc,cc,lc,hR,pc,ic,nc,rc,ac,tc,sc,mR,oc,ec,$l,Fl,Al,Jl,Xl,Yl,Wl,Uq,Zl,Dl,Gl,zl,Hl,Ul;var Ql=x(()=>{_R();qH();Dd();jR();e1();Ac();e1();L0=F1("$ZodType",($,F)=>{var A;$??($={}),$._zod.def=F,$._zod.bag=$._zod.bag||{},$._zod.version=Fc;let J=[...$._zod.def.checks??[]];if($._zod.traits.has("$ZodCheck"))J.unshift($);for(let X of J)for(let Y of X._zod.onattach)Y($);if(J.length===0)(A=$._zod).deferred??(A.deferred=[]),$._zod.deferred?.push(()=>{$._zod.run=$._zod.parse});else{let X=(W,Z,D)=>{let G=VY(W),z;for(let H of Z){if(H._zod.def.when){if(!H._zod.def.when(W))continue}else if(G)continue;let U=W.issues.length,Q=H._zod.check(W);if(Q instanceof Promise&&D?.async===!1)throw new AA;if(z||Q instanceof Promise)z=(z??Promise.resolve()).then(async()=>{if(await Q,W.issues.length===U)return;if(!G)G=VY(W,U)});else{if(W.issues.length===U)continue;if(!G)G=VY(W,U)}}if(z)return z.then(()=>{return W});return W},Y=(W,Z,D)=>{if(VY(W))return W.aborted=!0,W;let G=X(Z,J,D);if(G instanceof Promise){if(D.async===!1)throw new AA;return G.then((z)=>$._zod.parse(z,D))}return $._zod.parse(G,D)};$._zod.run=(W,Z)=>{if(Z.skipChecks)return $._zod.parse(W,Z);if(Z.direction==="backward"){let G=$._zod.parse({value:W.value,issues:[]},{...Z,skipChecks:!0});if(G instanceof Promise)return G.then((z)=>{return Y(z,W,Z)});return Y(G,W,Z)}let D=$._zod.parse(W,Z);if(D instanceof Promise){if(Z.async===!1)throw new AA;return D.then((G)=>X(G,J,Z))}return X(D,J,Z)}}h0($,"~standard",()=>({validate:(X)=>{try{let Y=Wd($,X);return Y.success?{value:Y.data}:{issues:Y.error?.issues}}catch(Y){return Zd($,X).then((W)=>W.success?{value:W.data}:{issues:W.error?.issues})}},vendor:"zod",version:1}))}),rZ=F1("$ZodString",($,F)=>{L0.init($,F),$._zod.pattern=[...$?._zod.bag?.patterns??[]].pop()??Od($._zod.bag),$._zod.parse=(A,J)=>{if(F.coerce)try{A.value=String(A.value)}catch(X){}if(typeof A.value==="string")return A;return A.issues.push({expected:"string",code:"invalid_type",input:A.value,inst:$}),A}}),X2=F1("$ZodStringFormat",($,F)=>{TH.init($,F),rZ.init($,F)}),Xc=F1("$ZodGUID",($,F)=>{F.pattern??(F.pattern=wd),X2.init($,F)}),Yc=F1("$ZodUUID",($,F)=>{if(F.version){let J={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[F.version];if(J===void 0)throw Error(`Invalid UUID version: "${F.version}"`);F.pattern??(F.pattern=nZ(J))}else F.pattern??(F.pattern=nZ());X2.init($,F)}),Wc=F1("$ZodEmail",($,F)=>{F.pattern??(F.pattern=qd),X2.init($,F)}),Zc=F1("$ZodURL",($,F)=>{X2.init($,F),$._zod.check=(A)=>{try{let J=A.value.trim(),X=new URL(J);if(F.hostname){if(F.hostname.lastIndex=0,!F.hostname.test(X.hostname))A.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:F.hostname.source,input:A.value,inst:$,continue:!F.abort})}if(F.protocol){if(F.protocol.lastIndex=0,!F.protocol.test(X.protocol.endsWith(":")?X.protocol.slice(0,-1):X.protocol))A.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:F.protocol.source,input:A.value,inst:$,continue:!F.abort})}if(F.normalize)A.value=X.href;else A.value=J;return}catch(J){A.issues.push({code:"invalid_format",format:"url",input:A.value,inst:$,continue:!F.abort})}}}),Dc=F1("$ZodEmoji",($,F)=>{F.pattern??(F.pattern=Ld()),X2.init($,F)}),Gc=F1("$ZodNanoID",($,F)=>{F.pattern??(F.pattern=Kd),X2.init($,F)}),zc=F1("$ZodCUID",($,F)=>{F.pattern??(F.pattern=Gd),X2.init($,F)}),Hc=F1("$ZodCUID2",($,F)=>{F.pattern??(F.pattern=zd),X2.init($,F)}),Uc=F1("$ZodULID",($,F)=>{F.pattern??(F.pattern=Hd),X2.init($,F)}),Qc=F1("$ZodXID",($,F)=>{F.pattern??(F.pattern=Ud),X2.init($,F)}),Kc=F1("$ZodKSUID",($,F)=>{F.pattern??(F.pattern=Qd),X2.init($,F)}),Bc=F1("$ZodISODateTime",($,F)=>{F.pattern??(F.pattern=jd(F)),X2.init($,F)}),wc=F1("$ZodISODate",($,F)=>{F.pattern??(F.pattern=Id),X2.init($,F)}),qc=F1("$ZodISOTime",($,F)=>{F.pattern??(F.pattern=Td(F)),X2.init($,F)}),Lc=F1("$ZodISODuration",($,F)=>{F.pattern??(F.pattern=Bd),X2.init($,F)}),Ec=F1("$ZodIPv4",($,F)=>{F.pattern??(F.pattern=Ed),X2.init($,F),$._zod.bag.format="ipv4"}),Vc=F1("$ZodIPv6",($,F)=>{F.pattern??(F.pattern=Vd),X2.init($,F),$._zod.bag.format="ipv6",$._zod.check=(A)=>{try{new URL(`http://[${A.value}]`)}catch{A.issues.push({code:"invalid_format",format:"ipv6",input:A.value,inst:$,continue:!F.abort})}}}),Nc=F1("$ZodMAC",($,F)=>{F.pattern??(F.pattern=Nd(F.delimiter)),X2.init($,F),$._zod.bag.format="mac"}),Cc=F1("$ZodCIDRv4",($,F)=>{F.pattern??(F.pattern=Cd),X2.init($,F)}),Mc=F1("$ZodCIDRv6",($,F)=>{F.pattern??(F.pattern=Md),X2.init($,F),$._zod.check=(A)=>{let J=A.value.split("/");try{if(J.length!==2)throw Error();let[X,Y]=J;if(!Y)throw Error();let W=Number(Y);if(`${W}`!==Y)throw Error();if(W<0||W>128)throw Error();new URL(`http://[${X}]`)}catch{A.issues.push({code:"invalid_format",format:"cidrv6",input:A.value,inst:$,continue:!F.abort})}}});Rc=F1("$ZodBase64",($,F)=>{F.pattern??(F.pattern=Pd),X2.init($,F),$._zod.bag.contentEncoding="base64",$._zod.check=(A)=>{if(Pc(A.value))return;A.issues.push({code:"invalid_format",format:"base64",input:A.value,inst:$,continue:!F.abort})}});Ic=F1("$ZodBase64URL",($,F)=>{F.pattern??(F.pattern=TR),X2.init($,F),$._zod.bag.contentEncoding="base64url",$._zod.check=(A)=>{if(yC1(A.value))return;A.issues.push({code:"invalid_format",format:"base64url",input:A.value,inst:$,continue:!F.abort})}}),Tc=F1("$ZodE164",($,F)=>{F.pattern??(F.pattern=Rd),X2.init($,F)});jc=F1("$ZodJWT",($,F)=>{X2.init($,F),$._zod.check=(A)=>{if(uC1(A.value,F.alg))return;A.issues.push({code:"invalid_format",format:"jwt",input:A.value,inst:$,continue:!F.abort})}}),Oc=F1("$ZodCustomStringFormat",($,F)=>{X2.init($,F),$._zod.check=(A)=>{if(F.fn(A.value))return;A.issues.push({code:"invalid_format",format:F.format,input:A.value,inst:$,continue:!F.abort})}}),yR=F1("$ZodNumber",($,F)=>{L0.init($,F),$._zod.pattern=$._zod.bag.pattern??Zq,$._zod.parse=(A,J)=>{if(F.coerce)try{A.value=Number(A.value)}catch(W){}let X=A.value;if(typeof X==="number"&&!Number.isNaN(X)&&Number.isFinite(X))return A;let Y=typeof X==="number"?Number.isNaN(X)?"NaN":!Number.isFinite(X)?"Infinity":void 0:void 0;return A.issues.push({expected:"number",code:"invalid_type",input:X,inst:$,...Y?{received:Y}:{}}),A}}),Sc=F1("$ZodNumberFormat",($,F)=>{yd.init($,F),yR.init($,F)}),zq=F1("$ZodBoolean",($,F)=>{L0.init($,F),$._zod.pattern=kd,$._zod.parse=(A,J)=>{if(F.coerce)try{A.value=Boolean(A.value)}catch(Y){}let X=A.value;if(typeof X==="boolean")return A;return A.issues.push({expected:"boolean",code:"invalid_type",input:X,inst:$}),A}}),uR=F1("$ZodBigInt",($,F)=>{L0.init($,F),$._zod.pattern=Sd,$._zod.parse=(A,J)=>{if(F.coerce)try{A.value=BigInt(A.value)}catch(X){}if(typeof A.value==="bigint")return A;return A.issues.push({expected:"bigint",code:"invalid_type",input:A.value,inst:$}),A}}),_c=F1("$ZodBigIntFormat",($,F)=>{ud.init($,F),uR.init($,F)}),kc=F1("$ZodSymbol",($,F)=>{L0.init($,F),$._zod.parse=(A,J)=>{let X=A.value;if(typeof X==="symbol")return A;return A.issues.push({expected:"symbol",code:"invalid_type",input:X,inst:$}),A}}),bc=F1("$ZodUndefined",($,F)=>{L0.init($,F),$._zod.pattern=xd,$._zod.values=new Set([void 0]),$._zod.optin="optional",$._zod.optout="optional",$._zod.parse=(A,J)=>{let X=A.value;if(typeof X>"u")return A;return A.issues.push({expected:"undefined",code:"invalid_type",input:X,inst:$}),A}}),xc=F1("$ZodNull",($,F)=>{L0.init($,F),$._zod.pattern=bd,$._zod.values=new Set([null]),$._zod.parse=(A,J)=>{let X=A.value;if(X===null)return A;return A.issues.push({expected:"null",code:"invalid_type",input:X,inst:$}),A}}),gc=F1("$ZodAny",($,F)=>{L0.init($,F),$._zod.parse=(A)=>A}),fc=F1("$ZodUnknown",($,F)=>{L0.init($,F),$._zod.parse=(A)=>A}),vc=F1("$ZodNever",($,F)=>{L0.init($,F),$._zod.parse=(A,J)=>{return A.issues.push({expected:"never",code:"invalid_type",input:A.value,inst:$}),A}}),yc=F1("$ZodVoid",($,F)=>{L0.init($,F),$._zod.parse=(A,J)=>{let X=A.value;if(typeof X>"u")return A;return A.issues.push({expected:"void",code:"invalid_type",input:X,inst:$}),A}}),uc=F1("$ZodDate",($,F)=>{L0.init($,F),$._zod.parse=(A,J)=>{if(F.coerce)try{A.value=new Date(A.value)}catch(Z){}let X=A.value,Y=X instanceof Date;if(Y&&!Number.isNaN(X.getTime()))return A;return A.issues.push({expected:"date",code:"invalid_type",input:X,...Y?{received:"Invalid Date"}:{},inst:$}),A}});hc=F1("$ZodArray",($,F)=>{L0.init($,F),$._zod.parse=(A,J)=>{let X=A.value;if(!Array.isArray(X))return A.issues.push({expected:"array",code:"invalid_type",input:X,inst:$}),A;A.value=Array(X.length);let Y=[];for(let W=0;W<X.length;W++){let Z=X[W],D=F.element._zod.run({value:Z,issues:[]},J);if(D instanceof Promise)Y.push(D.then((G)=>TC1(G,A,W)));else TC1(D,A,W)}if(Y.length)return Promise.all(Y).then(()=>A);return A}});dC1=F1("$ZodObject",($,F)=>{if(L0.init($,F),!Object.getOwnPropertyDescriptor(F,"shape")?.get){let Z=F.shape;Object.defineProperty(F,"shape",{get:()=>{let D={...Z};return Object.defineProperty(F,"shape",{value:D}),D}})}let J=EH(()=>hC1(F));h0($._zod,"propValues",()=>{let Z=F.shape,D={};for(let G in Z){let z=Z[G]._zod;if(z.values){D[G]??(D[G]=new Set);for(let H of z.values)D[G].add(H)}}return D});let X=iZ,Y=F.catchall,W;$._zod.parse=(Z,D)=>{W??(W=J.value);let G=Z.value;if(!X(G))return Z.issues.push({expected:"object",code:"invalid_type",input:G,inst:$}),Z;Z.value={};let z=[],H=W.shape;for(let U of W.keys){let Q=H[U],B=Q._zod.optout==="optional",q=Q._zod.run({value:G[U],issues:[]},D);if(q instanceof Promise)z.push(q.then((L)=>vR(L,Z,U,G,B)));else vR(q,Z,U,G,B)}if(!Y)return z.length?Promise.all(z).then(()=>Z):Z;return mC1(z,G,Z,D,J.value,$)}}),mc=F1("$ZodObjectJIT",($,F)=>{dC1.init($,F);let A=$._zod.parse,J=EH(()=>hC1(F)),X=(U)=>{let Q=new kR(["shape","payload","ctx"]),B=J.value,q=(R)=>{let N=QR(R);return`shape[${N}]._zod.run({ value: input[${N}], issues: [] }, ctx)`};Q.write("const input = payload.value;");let L=Object.create(null),E=0;for(let R of B.keys)L[R]=`key_${E++}`;Q.write("const newResult = {};");for(let R of B.keys){let N=L[R],S=QR(R),M=U[R]?._zod?.optout==="optional";if(Q.write(`const ${N} = ${q(R)};`),M)Q.write(`
        if (${N}.issues.length) {
          if (${S} in input) {
            payload.issues = payload.issues.concat(${N}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${S}, ...iss.path] : [${S}]
            })));
          }
        }
        
        if (${N}.value === undefined) {
          if (${S} in input) {
            newResult[${S}] = undefined;
          }
        } else {
          newResult[${S}] = ${N}.value;
        }
        
      `);else Q.write(`
        if (${N}.issues.length) {
          payload.issues = payload.issues.concat(${N}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${S}, ...iss.path] : [${S}]
          })));
        }
        
        if (${N}.value === undefined) {
          if (${S} in input) {
            newResult[${S}] = undefined;
          }
        } else {
          newResult[${S}] = ${N}.value;
        }
        
      `)}Q.write("payload.value = newResult;"),Q.write("return payload;");let V=Q.compile();return(R,N)=>V(U,R,N)},Y,W=iZ,Z=!ew.jitless,G=Z&&em.value,z=F.catchall,H;$._zod.parse=(U,Q)=>{H??(H=J.value);let B=U.value;if(!W(B))return U.issues.push({expected:"object",code:"invalid_type",input:B,inst:$}),U;if(Z&&G&&Q?.async===!1&&Q.jitless!==!0){if(!Y)Y=X(F.shape);if(U=Y(U,Q),!z)return U;return mC1([],B,U,Q,H,$)}return A(U,Q)}});Hq=F1("$ZodUnion",($,F)=>{L0.init($,F),h0($._zod,"optin",()=>F.options.some((X)=>X._zod.optin==="optional")?"optional":void 0),h0($._zod,"optout",()=>F.options.some((X)=>X._zod.optout==="optional")?"optional":void 0),h0($._zod,"values",()=>{if(F.options.every((X)=>X._zod.values))return new Set(F.options.flatMap((X)=>Array.from(X._zod.values)));return}),h0($._zod,"pattern",()=>{if(F.options.every((X)=>X._zod.pattern)){let X=F.options.map((Y)=>Y._zod.pattern);return new RegExp(`^(${X.map((Y)=>Aq(Y.source)).join("|")})$`)}return});let A=F.options.length===1,J=F.options[0]._zod.run;$._zod.parse=(X,Y)=>{if(A)return J(X,Y);let W=!1,Z=[];for(let D of F.options){let G=D._zod.run({value:X.value,issues:[]},Y);if(G instanceof Promise)Z.push(G),W=!0;else{if(G.issues.length===0)return G;Z.push(G)}}if(!W)return jC1(Z,X,$,Y);return Promise.all(Z).then((D)=>{return jC1(D,X,$,Y)})}});dc=F1("$ZodXor",($,F)=>{Hq.init($,F),F.inclusive=!1;let A=F.options.length===1,J=F.options[0]._zod.run;$._zod.parse=(X,Y)=>{if(A)return J(X,Y);let W=!1,Z=[];for(let D of F.options){let G=D._zod.run({value:X.value,issues:[]},Y);if(G instanceof Promise)Z.push(G),W=!0;else Z.push(G)}if(!W)return OC1(Z,X,$,Y);return Promise.all(Z).then((D)=>{return OC1(D,X,$,Y)})}}),cc=F1("$ZodDiscriminatedUnion",($,F)=>{F.inclusive=!1,Hq.init($,F);let A=$._zod.parse;h0($._zod,"propValues",()=>{let X={};for(let Y of F.options){let W=Y._zod.propValues;if(!W||Object.keys(W).length===0)throw Error(`Invalid discriminated union option at index "${F.options.indexOf(Y)}"`);for(let[Z,D]of Object.entries(W)){if(!X[Z])X[Z]=new Set;for(let G of D)X[Z].add(G)}}return X});let J=EH(()=>{let X=F.options,Y=new Map;for(let W of X){let Z=W._zod.propValues?.[F.discriminator];if(!Z||Z.size===0)throw Error(`Invalid discriminated union option at index "${F.options.indexOf(W)}"`);for(let D of Z){if(Y.has(D))throw Error(`Duplicate discriminator value "${String(D)}"`);Y.set(D,W)}}return Y});$._zod.parse=(X,Y)=>{let W=X.value;if(!iZ(W))return X.issues.push({code:"invalid_type",expected:"object",input:W,inst:$}),X;let Z=J.value.get(W?.[F.discriminator]);if(Z)return Z._zod.run(X,Y);if(F.unionFallback)return A(X,Y);return X.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:F.discriminator,input:W,path:[F.discriminator],inst:$}),X}}),lc=F1("$ZodIntersection",($,F)=>{L0.init($,F),$._zod.parse=(A,J)=>{let X=A.value,Y=F.left._zod.run({value:X,issues:[]},J),W=F.right._zod.run({value:X,issues:[]},J);if(Y instanceof Promise||W instanceof Promise)return Promise.all([Y,W]).then(([D,G])=>{return SC1(A,D,G)});return SC1(A,Y,W)}});hR=F1("$ZodTuple",($,F)=>{L0.init($,F);let A=F.items;$._zod.parse=(J,X)=>{let Y=J.value;if(!Array.isArray(Y))return J.issues.push({input:Y,inst:$,expected:"tuple",code:"invalid_type"}),J;J.value=[];let W=[],Z=[...A].reverse().findIndex((z)=>z._zod.optin!=="optional"),D=Z===-1?0:A.length-Z;if(!F.rest){let z=Y.length>A.length,H=Y.length<D-1;if(z||H)return J.issues.push({...z?{code:"too_big",maximum:A.length,inclusive:!0}:{code:"too_small",minimum:A.length},input:Y,inst:$,origin:"array"}),J}let G=-1;for(let z of A){if(G++,G>=Y.length){if(G>=D)continue}let H=z._zod.run({value:Y[G],issues:[]},X);if(H instanceof Promise)W.push(H.then((U)=>bR(U,J,G)));else bR(H,J,G)}if(F.rest){let z=Y.slice(A.length);for(let H of z){G++;let U=F.rest._zod.run({value:H,issues:[]},X);if(U instanceof Promise)W.push(U.then((Q)=>bR(Q,J,G)));else bR(U,J,G)}}if(W.length)return Promise.all(W).then(()=>J);return J}});pc=F1("$ZodRecord",($,F)=>{L0.init($,F),$._zod.parse=(A,J)=>{let X=A.value;if(!EY(X))return A.issues.push({expected:"record",code:"invalid_type",input:X,inst:$}),A;let Y=[],W=F.keyType._zod.values;if(W){A.value={};let Z=new Set;for(let G of W)if(typeof G==="string"||typeof G==="number"||typeof G==="symbol"){Z.add(typeof G==="number"?G.toString():G);let z=F.valueType._zod.run({value:X[G],issues:[]},J);if(z instanceof Promise)Y.push(z.then((H)=>{if(H.issues.length)A.issues.push(...b7(G,H.issues));A.value[G]=H.value}));else{if(z.issues.length)A.issues.push(...b7(G,z.issues));A.value[G]=z.value}}let D;for(let G in X)if(!Z.has(G))D=D??[],D.push(G);if(D&&D.length>0)A.issues.push({code:"unrecognized_keys",input:X,inst:$,keys:D})}else{A.value={};for(let Z of Reflect.ownKeys(X)){if(Z==="__proto__")continue;let D=F.keyType._zod.run({value:Z,issues:[]},J);if(D instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(typeof Z==="string"&&Zq.test(Z)&&D.issues.length&&D.issues.some((H)=>H.code==="invalid_type"&&H.expected==="number")){let H=F.keyType._zod.run({value:Number(Z),issues:[]},J);if(H instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(H.issues.length===0)D=H}if(D.issues.length){if(F.mode==="loose")A.value[Z]=X[Z];else A.issues.push({code:"invalid_key",origin:"record",issues:D.issues.map((H)=>u3(H,J,M4())),input:Z,path:[Z],inst:$});continue}let z=F.valueType._zod.run({value:X[Z],issues:[]},J);if(z instanceof Promise)Y.push(z.then((H)=>{if(H.issues.length)A.issues.push(...b7(Z,H.issues));A.value[D.value]=H.value}));else{if(z.issues.length)A.issues.push(...b7(Z,z.issues));A.value[D.value]=z.value}}}if(Y.length)return Promise.all(Y).then(()=>A);return A}}),ic=F1("$ZodMap",($,F)=>{L0.init($,F),$._zod.parse=(A,J)=>{let X=A.value;if(!(X instanceof Map))return A.issues.push({expected:"map",code:"invalid_type",input:X,inst:$}),A;let Y=[];A.value=new Map;for(let[W,Z]of X){let D=F.keyType._zod.run({value:W,issues:[]},J),G=F.valueType._zod.run({value:Z,issues:[]},J);if(D instanceof Promise||G instanceof Promise)Y.push(Promise.all([D,G]).then(([z,H])=>{_C1(z,H,A,W,X,$,J)}));else _C1(D,G,A,W,X,$,J)}if(Y.length)return Promise.all(Y).then(()=>A);return A}});nc=F1("$ZodSet",($,F)=>{L0.init($,F),$._zod.parse=(A,J)=>{let X=A.value;if(!(X instanceof Set))return A.issues.push({input:X,inst:$,expected:"set",code:"invalid_type"}),A;let Y=[];A.value=new Set;for(let W of X){let Z=F.valueType._zod.run({value:W,issues:[]},J);if(Z instanceof Promise)Y.push(Z.then((D)=>kC1(D,A)));else kC1(Z,A)}if(Y.length)return Promise.all(Y).then(()=>A);return A}});rc=F1("$ZodEnum",($,F)=>{L0.init($,F);let A=Fq(F.entries),J=new Set(A);$._zod.values=J,$._zod.pattern=new RegExp(`^(${A.filter((X)=>Jq.has(typeof X)).map((X)=>typeof X==="string"?_5(X):X.toString()).join("|")})$`),$._zod.parse=(X,Y)=>{let W=X.value;if(J.has(W))return X;return X.issues.push({code:"invalid_value",values:A,input:W,inst:$}),X}}),ac=F1("$ZodLiteral",($,F)=>{if(L0.init($,F),F.values.length===0)throw Error("Cannot create literal schema with no valid values");let A=new Set(F.values);$._zod.values=A,$._zod.pattern=new RegExp(`^(${F.values.map((J)=>typeof J==="string"?_5(J):J?_5(J.toString()):String(J)).join("|")})$`),$._zod.parse=(J,X)=>{let Y=J.value;if(A.has(Y))return J;return J.issues.push({code:"invalid_value",values:F.values,input:Y,inst:$}),J}}),tc=F1("$ZodFile",($,F)=>{L0.init($,F),$._zod.parse=(A,J)=>{let X=A.value;if(X instanceof File)return A;return A.issues.push({expected:"file",code:"invalid_type",input:X,inst:$}),A}}),sc=F1("$ZodTransform",($,F)=>{L0.init($,F),$._zod.parse=(A,J)=>{if(J.direction==="backward")throw new pZ($.constructor.name);let X=F.transform(A.value,A);if(J.async)return(X instanceof Promise?X:Promise.resolve(X)).then((W)=>{return A.value=W,A});if(X instanceof Promise)throw new AA;return A.value=X,A}});mR=F1("$ZodOptional",($,F)=>{L0.init($,F),$._zod.optin="optional",$._zod.optout="optional",h0($._zod,"values",()=>{return F.innerType._zod.values?new Set([...F.innerType._zod.values,void 0]):void 0}),h0($._zod,"pattern",()=>{let A=F.innerType._zod.pattern;return A?new RegExp(`^(${Aq(A.source)})?$`):void 0}),$._zod.parse=(A,J)=>{if(F.innerType._zod.optin==="optional"){let X=F.innerType._zod.run(A,J);if(X instanceof Promise)return X.then((Y)=>bC1(Y,A.value));return bC1(X,A.value)}if(A.value===void 0)return A;return F.innerType._zod.run(A,J)}}),oc=F1("$ZodExactOptional",($,F)=>{mR.init($,F),h0($._zod,"values",()=>F.innerType._zod.values),h0($._zod,"pattern",()=>F.innerType._zod.pattern),$._zod.parse=(A,J)=>{return F.innerType._zod.run(A,J)}}),ec=F1("$ZodNullable",($,F)=>{L0.init($,F),h0($._zod,"optin",()=>F.innerType._zod.optin),h0($._zod,"optout",()=>F.innerType._zod.optout),h0($._zod,"pattern",()=>{let A=F.innerType._zod.pattern;return A?new RegExp(`^(${Aq(A.source)}|null)$`):void 0}),h0($._zod,"values",()=>{return F.innerType._zod.values?new Set([...F.innerType._zod.values,null]):void 0}),$._zod.parse=(A,J)=>{if(A.value===null)return A;return F.innerType._zod.run(A,J)}}),$l=F1("$ZodDefault",($,F)=>{L0.init($,F),$._zod.optin="optional",h0($._zod,"values",()=>F.innerType._zod.values),$._zod.parse=(A,J)=>{if(J.direction==="backward")return F.innerType._zod.run(A,J);if(A.value===void 0)return A.value=F.defaultValue,A;let X=F.innerType._zod.run(A,J);if(X instanceof Promise)return X.then((Y)=>xC1(Y,F));return xC1(X,F)}});Fl=F1("$ZodPrefault",($,F)=>{L0.init($,F),$._zod.optin="optional",h0($._zod,"values",()=>F.innerType._zod.values),$._zod.parse=(A,J)=>{if(J.direction==="backward")return F.innerType._zod.run(A,J);if(A.value===void 0)A.value=F.defaultValue;return F.innerType._zod.run(A,J)}}),Al=F1("$ZodNonOptional",($,F)=>{L0.init($,F),h0($._zod,"values",()=>{let A=F.innerType._zod.values;return A?new Set([...A].filter((J)=>J!==void 0)):void 0}),$._zod.parse=(A,J)=>{let X=F.innerType._zod.run(A,J);if(X instanceof Promise)return X.then((Y)=>gC1(Y,$));return gC1(X,$)}});Jl=F1("$ZodSuccess",($,F)=>{L0.init($,F),$._zod.parse=(A,J)=>{if(J.direction==="backward")throw new pZ("ZodSuccess");let X=F.innerType._zod.run(A,J);if(X instanceof Promise)return X.then((Y)=>{return A.value=Y.issues.length===0,A});return A.value=X.issues.length===0,A}}),Xl=F1("$ZodCatch",($,F)=>{L0.init($,F),h0($._zod,"optin",()=>F.innerType._zod.optin),h0($._zod,"optout",()=>F.innerType._zod.optout),h0($._zod,"values",()=>F.innerType._zod.values),$._zod.parse=(A,J)=>{if(J.direction==="backward")return F.innerType._zod.run(A,J);let X=F.innerType._zod.run(A,J);if(X instanceof Promise)return X.then((Y)=>{if(A.value=Y.value,Y.issues.length)A.value=F.catchValue({...A,error:{issues:Y.issues.map((W)=>u3(W,J,M4()))},input:A.value}),A.issues=[];return A});if(A.value=X.value,X.issues.length)A.value=F.catchValue({...A,error:{issues:X.issues.map((Y)=>u3(Y,J,M4()))},input:A.value}),A.issues=[];return A}}),Yl=F1("$ZodNaN",($,F)=>{L0.init($,F),$._zod.parse=(A,J)=>{if(typeof A.value!=="number"||!Number.isNaN(A.value))return A.issues.push({input:A.value,inst:$,expected:"nan",code:"invalid_type"}),A;return A}}),Wl=F1("$ZodPipe",($,F)=>{L0.init($,F),h0($._zod,"values",()=>F.in._zod.values),h0($._zod,"optin",()=>F.in._zod.optin),h0($._zod,"optout",()=>F.out._zod.optout),h0($._zod,"propValues",()=>F.in._zod.propValues),$._zod.parse=(A,J)=>{if(J.direction==="backward"){let Y=F.out._zod.run(A,J);if(Y instanceof Promise)return Y.then((W)=>xR(W,F.in,J));return xR(Y,F.in,J)}let X=F.in._zod.run(A,J);if(X instanceof Promise)return X.then((Y)=>xR(Y,F.out,J));return xR(X,F.out,J)}});Uq=F1("$ZodCodec",($,F)=>{L0.init($,F),h0($._zod,"values",()=>F.in._zod.values),h0($._zod,"optin",()=>F.in._zod.optin),h0($._zod,"optout",()=>F.out._zod.optout),h0($._zod,"propValues",()=>F.in._zod.propValues),$._zod.parse=(A,J)=>{if((J.direction||"forward")==="forward"){let Y=F.in._zod.run(A,J);if(Y instanceof Promise)return Y.then((W)=>gR(W,F,J));return gR(Y,F,J)}else{let Y=F.out._zod.run(A,J);if(Y instanceof Promise)return Y.then((W)=>gR(W,F,J));return gR(Y,F,J)}}});Zl=F1("$ZodReadonly",($,F)=>{L0.init($,F),h0($._zod,"propValues",()=>F.innerType._zod.propValues),h0($._zod,"values",()=>F.innerType._zod.values),h0($._zod,"optin",()=>F.innerType?._zod?.optin),h0($._zod,"optout",()=>F.innerType?._zod?.optout),$._zod.parse=(A,J)=>{if(J.direction==="backward")return F.innerType._zod.run(A,J);let X=F.innerType._zod.run(A,J);if(X instanceof Promise)return X.then(fC1);return fC1(X)}});Dl=F1("$ZodTemplateLiteral",($,F)=>{L0.init($,F);let A=[];for(let J of F.parts)if(typeof J==="object"&&J!==null){if(!J._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...J._zod.traits].shift()}`);let X=J._zod.pattern instanceof RegExp?J._zod.pattern.source:J._zod.pattern;if(!X)throw Error(`Invalid template literal part: ${J._zod.traits}`);let Y=X.startsWith("^")?1:0,W=X.endsWith("$")?X.length-1:X.length;A.push(X.slice(Y,W))}else if(J===null||Fd.has(typeof J))A.push(_5(`${J}`));else throw Error(`Invalid template literal part: ${J}`);$._zod.pattern=new RegExp(`^${A.join("")}$`),$._zod.parse=(J,X)=>{if(typeof J.value!=="string")return J.issues.push({input:J.value,inst:$,expected:"string",code:"invalid_type"}),J;if($._zod.pattern.lastIndex=0,!$._zod.pattern.test(J.value))return J.issues.push({input:J.value,inst:$,code:"invalid_format",format:F.format??"template_literal",pattern:$._zod.pattern.source}),J;return J}}),Gl=F1("$ZodFunction",($,F)=>{return L0.init($,F),$._def=F,$._zod.def=F,$.implement=(A)=>{if(typeof A!=="function")throw Error("implement() must be called with a function");return function(...J){let X=$._def.input?qR($._def.input,J):J,Y=Reflect.apply(A,this,X);if($._def.output)return qR($._def.output,Y);return Y}},$.implementAsync=(A)=>{if(typeof A!=="function")throw Error("implementAsync() must be called with a function");return async function(...J){let X=$._def.input?await LR($._def.input,J):J,Y=await Reflect.apply(A,this,X);if($._def.output)return await LR($._def.output,Y);return Y}},$._zod.parse=(A,J)=>{if(typeof A.value!=="function")return A.issues.push({code:"invalid_type",expected:"function",input:A.value,inst:$}),A;if($._def.output&&$._def.output._zod.def.type==="promise")A.value=$.implementAsync(A.value);else A.value=$.implement(A.value);return A},$.input=(...A)=>{let J=$.constructor;if(Array.isArray(A[0]))return new J({type:"function",input:new hR({type:"tuple",items:A[0],rest:A[1]}),output:$._def.output});return new J({type:"function",input:A[0],output:$._def.output})},$.output=(A)=>{return new $.constructor({type:"function",input:$._def.input,output:A})},$}),zl=F1("$ZodPromise",($,F)=>{L0.init($,F),$._zod.parse=(A,J)=>{return Promise.resolve(A.value).then((X)=>F.innerType._zod.run({value:X,issues:[]},J))}}),Hl=F1("$ZodLazy",($,F)=>{L0.init($,F),h0($._zod,"innerType",()=>F.getter()),h0($._zod,"pattern",()=>$._zod.innerType?._zod?.pattern),h0($._zod,"propValues",()=>$._zod.innerType?._zod?.propValues),h0($._zod,"optin",()=>$._zod.innerType?._zod?.optin??void 0),h0($._zod,"optout",()=>$._zod.innerType?._zod?.optout??void 0),$._zod.parse=(A,J)=>{return $._zod.innerType._zod.run(A,J)}}),Ul=F1("$ZodCustom",($,F)=>{B2.init($,F),L0.init($,F),$._zod.parse=(A,J)=>{return A},$._zod.check=(A)=>{let J=A.value,X=F.fn(J);if(X instanceof Promise)return X.then((Y)=>vC1(Y,A,J,$));vC1(X,A,J,$);return}})});function Kl(){return{localeError:DL0()}}var DL0=()=>{let $={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function F(X){return $[X]??null}let A={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"},J={nan:"NaN"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 instanceof ${X.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${Z}`;return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${Y}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${Z}`}case"invalid_value":if(X.values.length===1)return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${P1(X.values[0])}`;return`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${X.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${Y} ${X.maximum.toString()} ${W.unit??"\u0639\u0646\u0635\u0631"}`;return`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${X.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${Y} ${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${X.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${Y} ${X.minimum.toString()} ${W.unit}`;return`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${X.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${Y} ${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${X.prefix}"`;if(Y.format==="ends_with")return`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${Y.suffix}"`;if(Y.format==="includes")return`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${Y.includes}"`;if(Y.format==="regex")return`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${Y.pattern}`;return`${A[Y.format]??X.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${X.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${X.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${X.keys.length>1?"\u0629":""}: ${G1(X.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${X.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${X.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}};var cC1=x(()=>{e1()});function Bl(){return{localeError:GL0()}}var GL0=()=>{let $={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function F(X){return $[X]??null}let A={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},J={nan:"NaN"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n instanceof ${X.expected}, daxil olan ${Z}`;return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${Y}, daxil olan ${Z}`}case"invalid_value":if(X.values.length===1)return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${P1(X.values[0])}`;return`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${X.origin??"d\u0259y\u0259r"} ${Y}${X.maximum.toString()} ${W.unit??"element"}`;return`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${X.origin??"d\u0259y\u0259r"} ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${X.origin} ${Y}${X.minimum.toString()} ${W.unit}`;return`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${X.origin} ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Yanl\u0131\u015F m\u0259tn: "${Y.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`;if(Y.format==="ends_with")return`Yanl\u0131\u015F m\u0259tn: "${Y.suffix}" il\u0259 bitm\u0259lidir`;if(Y.format==="includes")return`Yanl\u0131\u015F m\u0259tn: "${Y.includes}" daxil olmal\u0131d\u0131r`;if(Y.format==="regex")return`Yanl\u0131\u015F m\u0259tn: ${Y.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`;return`Yanl\u0131\u015F ${A[Y.format]??X.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${X.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${X.keys.length>1?"lar":""}: ${G1(X.keys,", ")}`;case"invalid_key":return`${X.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${X.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}};var lC1=x(()=>{e1()});function pC1($,F,A,J){let X=Math.abs($),Y=X%10,W=X%100;if(W>=11&&W<=19)return J;if(Y===1)return F;if(Y>=2&&Y<=4)return A;return J}function wl(){return{localeError:zL0()}}var zL0=()=>{let $={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function F(X){return $[X]??null}let A={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"},J={nan:"NaN",number:"\u043B\u0456\u043A",array:"\u043C\u0430\u0441\u0456\u045E"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F instanceof ${X.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${Z}`;return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${Y}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${Z}`}case"invalid_value":if(X.values.length===1)return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${P1(X.values[0])}`;return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W){let Z=Number(X.maximum),D=pC1(Z,W.unit.one,W.unit.few,W.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${X.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${W.verb} ${Y}${X.maximum.toString()} ${D}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${X.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W){let Z=Number(X.minimum),D=pC1(Z,W.unit.one,W.unit.few,W.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${X.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${W.verb} ${Y}${X.minimum.toString()} ${D}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${X.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${Y.prefix}"`;if(Y.format==="ends_with")return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${Y.suffix}"`;if(Y.format==="includes")return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${Y.includes}"`;if(Y.format==="regex")return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${Y.pattern}`;return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${A[Y.format]??X.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${X.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${X.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${G1(X.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${X.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${X.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}};var iC1=x(()=>{e1()});function ql(){return{localeError:HL0()}}var HL0=()=>{let $={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function F(X){return $[X]??null}let A={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"},J={nan:"NaN",number:"\u0447\u0438\u0441\u043B\u043E",array:"\u043C\u0430\u0441\u0438\u0432"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D instanceof ${X.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${Z}`;return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${Y}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${Z}`}case"invalid_value":if(X.values.length===1)return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${P1(X.values[0])}`;return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${X.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${Y}${X.maximum.toString()} ${W.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`;return`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${X.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${X.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${Y}${X.minimum.toString()} ${W.unit}`;return`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${X.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${Y.prefix}"`;if(Y.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${Y.suffix}"`;if(Y.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${Y.includes}"`;if(Y.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${Y.pattern}`;let W="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";if(Y.format==="emoji")W="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E";if(Y.format==="datetime")W="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E";if(Y.format==="date")W="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430";if(Y.format==="time")W="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E";if(Y.format==="duration")W="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430";return`${W} ${A[Y.format]??X.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${X.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${X.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${X.keys.length>1?"\u043E\u0432\u0435":""}: ${G1(X.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${X.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${X.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}};var nC1=x(()=>{e1()});function Ll(){return{localeError:UL0()}}var UL0=()=>{let $={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function F(X){return $[X]??null}let A={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"},J={nan:"NaN"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Tipus inv\xE0lid: s'esperava instanceof ${X.expected}, s'ha rebut ${Z}`;return`Tipus inv\xE0lid: s'esperava ${Y}, s'ha rebut ${Z}`}case"invalid_value":if(X.values.length===1)return`Valor inv\xE0lid: s'esperava ${P1(X.values[0])}`;return`Opci\xF3 inv\xE0lida: s'esperava una de ${G1(X.values," o ")}`;case"too_big":{let Y=X.inclusive?"com a m\xE0xim":"menys de",W=F(X.origin);if(W)return`Massa gran: s'esperava que ${X.origin??"el valor"} contingu\xE9s ${Y} ${X.maximum.toString()} ${W.unit??"elements"}`;return`Massa gran: s'esperava que ${X.origin??"el valor"} fos ${Y} ${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?"com a m\xEDnim":"m\xE9s de",W=F(X.origin);if(W)return`Massa petit: s'esperava que ${X.origin} contingu\xE9s ${Y} ${X.minimum.toString()} ${W.unit}`;return`Massa petit: s'esperava que ${X.origin} fos ${Y} ${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Format inv\xE0lid: ha de comen\xE7ar amb "${Y.prefix}"`;if(Y.format==="ends_with")return`Format inv\xE0lid: ha d'acabar amb "${Y.suffix}"`;if(Y.format==="includes")return`Format inv\xE0lid: ha d'incloure "${Y.includes}"`;if(Y.format==="regex")return`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${Y.pattern}`;return`Format inv\xE0lid per a ${A[Y.format]??X.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${X.divisor}`;case"unrecognized_keys":return`Clau${X.keys.length>1?"s":""} no reconeguda${X.keys.length>1?"s":""}: ${G1(X.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${X.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${X.origin}`;default:return"Entrada inv\xE0lida"}}};var rC1=x(()=>{e1()});function El(){return{localeError:QL0()}}var QL0=()=>{let $={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function F(X){return $[X]??null}let A={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"},J={nan:"NaN",number:"\u010D\xEDslo",string:"\u0159et\u011Bzec",function:"funkce",array:"pole"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no instanceof ${X.expected}, obdr\u017Eeno ${Z}`;return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${Y}, obdr\u017Eeno ${Z}`}case"invalid_value":if(X.values.length===1)return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${P1(X.values[0])}`;return`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${X.origin??"hodnota"} mus\xED m\xEDt ${Y}${X.maximum.toString()} ${W.unit??"prvk\u016F"}`;return`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${X.origin??"hodnota"} mus\xED b\xFDt ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${X.origin??"hodnota"} mus\xED m\xEDt ${Y}${X.minimum.toString()} ${W.unit??"prvk\u016F"}`;return`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${X.origin??"hodnota"} mus\xED b\xFDt ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${Y.prefix}"`;if(Y.format==="ends_with")return`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${Y.suffix}"`;if(Y.format==="includes")return`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${Y.includes}"`;if(Y.format==="regex")return`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${Y.pattern}`;return`Neplatn\xFD form\xE1t ${A[Y.format]??X.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${X.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${G1(X.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${X.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${X.origin}`;default:return"Neplatn\xFD vstup"}}};var aC1=x(()=>{e1()});function Vl(){return{localeError:KL0()}}var KL0=()=>{let $={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}};function F(X){return $[X]??null}let A={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},J={nan:"NaN",string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Ugyldigt input: forventede instanceof ${X.expected}, fik ${Z}`;return`Ugyldigt input: forventede ${Y}, fik ${Z}`}case"invalid_value":if(X.values.length===1)return`Ugyldig v\xE6rdi: forventede ${P1(X.values[0])}`;return`Ugyldigt valg: forventede en af f\xF8lgende ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin),Z=J[X.origin]??X.origin;if(W)return`For stor: forventede ${Z??"value"} ${W.verb} ${Y} ${X.maximum.toString()} ${W.unit??"elementer"}`;return`For stor: forventede ${Z??"value"} havde ${Y} ${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin),Z=J[X.origin]??X.origin;if(W)return`For lille: forventede ${Z} ${W.verb} ${Y} ${X.minimum.toString()} ${W.unit}`;return`For lille: forventede ${Z} havde ${Y} ${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Ugyldig streng: skal starte med "${Y.prefix}"`;if(Y.format==="ends_with")return`Ugyldig streng: skal ende med "${Y.suffix}"`;if(Y.format==="includes")return`Ugyldig streng: skal indeholde "${Y.includes}"`;if(Y.format==="regex")return`Ugyldig streng: skal matche m\xF8nsteret ${Y.pattern}`;return`Ugyldig ${A[Y.format]??X.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${X.divisor}`;case"unrecognized_keys":return`${X.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${G1(X.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${X.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${X.origin}`;default:return"Ugyldigt input"}}};var tC1=x(()=>{e1()});function Nl(){return{localeError:BL0()}}var BL0=()=>{let $={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function F(X){return $[X]??null}let A={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"},J={nan:"NaN",number:"Zahl",array:"Array"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Ung\xFCltige Eingabe: erwartet instanceof ${X.expected}, erhalten ${Z}`;return`Ung\xFCltige Eingabe: erwartet ${Y}, erhalten ${Z}`}case"invalid_value":if(X.values.length===1)return`Ung\xFCltige Eingabe: erwartet ${P1(X.values[0])}`;return`Ung\xFCltige Option: erwartet eine von ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`Zu gro\xDF: erwartet, dass ${X.origin??"Wert"} ${Y}${X.maximum.toString()} ${W.unit??"Elemente"} hat`;return`Zu gro\xDF: erwartet, dass ${X.origin??"Wert"} ${Y}${X.maximum.toString()} ist`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`Zu klein: erwartet, dass ${X.origin} ${Y}${X.minimum.toString()} ${W.unit} hat`;return`Zu klein: erwartet, dass ${X.origin} ${Y}${X.minimum.toString()} ist`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Ung\xFCltiger String: muss mit "${Y.prefix}" beginnen`;if(Y.format==="ends_with")return`Ung\xFCltiger String: muss mit "${Y.suffix}" enden`;if(Y.format==="includes")return`Ung\xFCltiger String: muss "${Y.includes}" enthalten`;if(Y.format==="regex")return`Ung\xFCltiger String: muss dem Muster ${Y.pattern} entsprechen`;return`Ung\xFCltig: ${A[Y.format]??X.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${X.divisor} sein`;case"unrecognized_keys":return`${X.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${G1(X.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${X.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${X.origin}`;default:return"Ung\xFCltige Eingabe"}}};var sC1=x(()=>{e1()});function Qq(){return{localeError:wL0()}}var wL0=()=>{let $={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"},map:{unit:"entries",verb:"to have"}};function F(X){return $[X]??null}let A={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},J={nan:"NaN"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;return`Invalid input: expected ${Y}, received ${Z}`}case"invalid_value":if(X.values.length===1)return`Invalid input: expected ${P1(X.values[0])}`;return`Invalid option: expected one of ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`Too big: expected ${X.origin??"value"} to have ${Y}${X.maximum.toString()} ${W.unit??"elements"}`;return`Too big: expected ${X.origin??"value"} to be ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`Too small: expected ${X.origin} to have ${Y}${X.minimum.toString()} ${W.unit}`;return`Too small: expected ${X.origin} to be ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Invalid string: must start with "${Y.prefix}"`;if(Y.format==="ends_with")return`Invalid string: must end with "${Y.suffix}"`;if(Y.format==="includes")return`Invalid string: must include "${Y.includes}"`;if(Y.format==="regex")return`Invalid string: must match pattern ${Y.pattern}`;return`Invalid ${A[Y.format]??X.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${X.divisor}`;case"unrecognized_keys":return`Unrecognized key${X.keys.length>1?"s":""}: ${G1(X.keys,", ")}`;case"invalid_key":return`Invalid key in ${X.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${X.origin}`;default:return"Invalid input"}}};var Cl=x(()=>{e1()});function Ml(){return{localeError:qL0()}}var qL0=()=>{let $={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function F(X){return $[X]??null}let A={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"},J={nan:"NaN",number:"nombro",array:"tabelo",null:"senvalora"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Nevalida enigo: atendi\u011Dis instanceof ${X.expected}, ricevi\u011Dis ${Z}`;return`Nevalida enigo: atendi\u011Dis ${Y}, ricevi\u011Dis ${Z}`}case"invalid_value":if(X.values.length===1)return`Nevalida enigo: atendi\u011Dis ${P1(X.values[0])}`;return`Nevalida opcio: atendi\u011Dis unu el ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`Tro granda: atendi\u011Dis ke ${X.origin??"valoro"} havu ${Y}${X.maximum.toString()} ${W.unit??"elementojn"}`;return`Tro granda: atendi\u011Dis ke ${X.origin??"valoro"} havu ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`Tro malgranda: atendi\u011Dis ke ${X.origin} havu ${Y}${X.minimum.toString()} ${W.unit}`;return`Tro malgranda: atendi\u011Dis ke ${X.origin} estu ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Nevalida karaktraro: devas komenci\u011Di per "${Y.prefix}"`;if(Y.format==="ends_with")return`Nevalida karaktraro: devas fini\u011Di per "${Y.suffix}"`;if(Y.format==="includes")return`Nevalida karaktraro: devas inkluzivi "${Y.includes}"`;if(Y.format==="regex")return`Nevalida karaktraro: devas kongrui kun la modelo ${Y.pattern}`;return`Nevalida ${A[Y.format]??X.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${X.divisor}`;case"unrecognized_keys":return`Nekonata${X.keys.length>1?"j":""} \u015Dlosilo${X.keys.length>1?"j":""}: ${G1(X.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${X.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${X.origin}`;default:return"Nevalida enigo"}}};var oC1=x(()=>{e1()});function Pl(){return{localeError:LL0()}}var LL0=()=>{let $={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}};function F(X){return $[X]??null}let A={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"},J={nan:"NaN",string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Entrada inv\xE1lida: se esperaba instanceof ${X.expected}, recibido ${Z}`;return`Entrada inv\xE1lida: se esperaba ${Y}, recibido ${Z}`}case"invalid_value":if(X.values.length===1)return`Entrada inv\xE1lida: se esperaba ${P1(X.values[0])}`;return`Opci\xF3n inv\xE1lida: se esperaba una de ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin),Z=J[X.origin]??X.origin;if(W)return`Demasiado grande: se esperaba que ${Z??"valor"} tuviera ${Y}${X.maximum.toString()} ${W.unit??"elementos"}`;return`Demasiado grande: se esperaba que ${Z??"valor"} fuera ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin),Z=J[X.origin]??X.origin;if(W)return`Demasiado peque\xF1o: se esperaba que ${Z} tuviera ${Y}${X.minimum.toString()} ${W.unit}`;return`Demasiado peque\xF1o: se esperaba que ${Z} fuera ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Cadena inv\xE1lida: debe comenzar con "${Y.prefix}"`;if(Y.format==="ends_with")return`Cadena inv\xE1lida: debe terminar en "${Y.suffix}"`;if(Y.format==="includes")return`Cadena inv\xE1lida: debe incluir "${Y.includes}"`;if(Y.format==="regex")return`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${Y.pattern}`;return`Inv\xE1lido ${A[Y.format]??X.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${X.divisor}`;case"unrecognized_keys":return`Llave${X.keys.length>1?"s":""} desconocida${X.keys.length>1?"s":""}: ${G1(X.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${J[X.origin]??X.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${J[X.origin]??X.origin}`;default:return"Entrada inv\xE1lida"}}};var eC1=x(()=>{e1()});function Rl(){return{localeError:EL0()}}var EL0=()=>{let $={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function F(X){return $[X]??null}let A={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"},J={nan:"NaN",number:"\u0639\u062F\u062F",array:"\u0622\u0631\u0627\u06CC\u0647"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A instanceof ${X.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${Z} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${Y} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${Z} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`}case"invalid_value":if(X.values.length===1)return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${P1(X.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`;return`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${G1(X.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${X.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${Y}${X.maximum.toString()} ${W.unit??"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`;return`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${X.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${Y}${X.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${X.origin} \u0628\u0627\u06CC\u062F ${Y}${X.minimum.toString()} ${W.unit} \u0628\u0627\u0634\u062F`;return`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${X.origin} \u0628\u0627\u06CC\u062F ${Y}${X.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${Y.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`;if(Y.format==="ends_with")return`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${Y.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`;if(Y.format==="includes")return`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${Y.includes}" \u0628\u0627\u0634\u062F`;if(Y.format==="regex")return`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${Y.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`;return`${A[Y.format]??X.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${X.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${X.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${G1(X.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${X.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${X.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}};var $M1=x(()=>{e1()});function Il(){return{localeError:VL0()}}var VL0=()=>{let $={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function F(X){return $[X]??null}let A={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"},J={nan:"NaN"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Virheellinen tyyppi: odotettiin instanceof ${X.expected}, oli ${Z}`;return`Virheellinen tyyppi: odotettiin ${Y}, oli ${Z}`}case"invalid_value":if(X.values.length===1)return`Virheellinen sy\xF6te: t\xE4ytyy olla ${P1(X.values[0])}`;return`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`Liian suuri: ${W.subject} t\xE4ytyy olla ${Y}${X.maximum.toString()} ${W.unit}`.trim();return`Liian suuri: arvon t\xE4ytyy olla ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`Liian pieni: ${W.subject} t\xE4ytyy olla ${Y}${X.minimum.toString()} ${W.unit}`.trim();return`Liian pieni: arvon t\xE4ytyy olla ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${Y.prefix}"`;if(Y.format==="ends_with")return`Virheellinen sy\xF6te: t\xE4ytyy loppua "${Y.suffix}"`;if(Y.format==="includes")return`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${Y.includes}"`;if(Y.format==="regex")return`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${Y.pattern}`;return`Virheellinen ${A[Y.format]??X.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${X.divisor} monikerta`;case"unrecognized_keys":return`${X.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${G1(X.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}};var FM1=x(()=>{e1()});function Tl(){return{localeError:NL0()}}var NL0=()=>{let $={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function F(X){return $[X]??null}let A={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"},J={nan:"NaN",number:"nombre",array:"tableau"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Entr\xE9e invalide : instanceof ${X.expected} attendu, ${Z} re\xE7u`;return`Entr\xE9e invalide : ${Y} attendu, ${Z} re\xE7u`}case"invalid_value":if(X.values.length===1)return`Entr\xE9e invalide : ${P1(X.values[0])} attendu`;return`Option invalide : une valeur parmi ${G1(X.values,"|")} attendue`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`Trop grand : ${X.origin??"valeur"} doit ${W.verb} ${Y}${X.maximum.toString()} ${W.unit??"\xE9l\xE9ment(s)"}`;return`Trop grand : ${X.origin??"valeur"} doit \xEAtre ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`Trop petit : ${X.origin} doit ${W.verb} ${Y}${X.minimum.toString()} ${W.unit}`;return`Trop petit : ${X.origin} doit \xEAtre ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Cha\xEEne invalide : doit commencer par "${Y.prefix}"`;if(Y.format==="ends_with")return`Cha\xEEne invalide : doit se terminer par "${Y.suffix}"`;if(Y.format==="includes")return`Cha\xEEne invalide : doit inclure "${Y.includes}"`;if(Y.format==="regex")return`Cha\xEEne invalide : doit correspondre au mod\xE8le ${Y.pattern}`;return`${A[Y.format]??X.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${X.divisor}`;case"unrecognized_keys":return`Cl\xE9${X.keys.length>1?"s":""} non reconnue${X.keys.length>1?"s":""} : ${G1(X.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${X.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${X.origin}`;default:return"Entr\xE9e invalide"}}};var AM1=x(()=>{e1()});function jl(){return{localeError:CL0()}}var CL0=()=>{let $={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function F(X){return $[X]??null}let A={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"},J={nan:"NaN"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Entr\xE9e invalide : attendu instanceof ${X.expected}, re\xE7u ${Z}`;return`Entr\xE9e invalide : attendu ${Y}, re\xE7u ${Z}`}case"invalid_value":if(X.values.length===1)return`Entr\xE9e invalide : attendu ${P1(X.values[0])}`;return`Option invalide : attendu l'une des valeurs suivantes ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"\u2264":"<",W=F(X.origin);if(W)return`Trop grand : attendu que ${X.origin??"la valeur"} ait ${Y}${X.maximum.toString()} ${W.unit}`;return`Trop grand : attendu que ${X.origin??"la valeur"} soit ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?"\u2265":">",W=F(X.origin);if(W)return`Trop petit : attendu que ${X.origin} ait ${Y}${X.minimum.toString()} ${W.unit}`;return`Trop petit : attendu que ${X.origin} soit ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Cha\xEEne invalide : doit commencer par "${Y.prefix}"`;if(Y.format==="ends_with")return`Cha\xEEne invalide : doit se terminer par "${Y.suffix}"`;if(Y.format==="includes")return`Cha\xEEne invalide : doit inclure "${Y.includes}"`;if(Y.format==="regex")return`Cha\xEEne invalide : doit correspondre au motif ${Y.pattern}`;return`${A[Y.format]??X.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${X.divisor}`;case"unrecognized_keys":return`Cl\xE9${X.keys.length>1?"s":""} non reconnue${X.keys.length>1?"s":""} : ${G1(X.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${X.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${X.origin}`;default:return"Entr\xE9e invalide"}}};var JM1=x(()=>{e1()});function Ol(){return{localeError:ML0()}}var ML0=()=>{let $={string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA",gender:"f"},number:{label:"\u05DE\u05E1\u05E4\u05E8",gender:"m"},boolean:{label:"\u05E2\u05E8\u05DA \u05D1\u05D5\u05DC\u05D9\u05D0\u05E0\u05D9",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA",gender:"m"},array:{label:"\u05DE\u05E2\u05E8\u05DA",gender:"m"},object:{label:"\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8",gender:"m"},null:{label:"\u05E2\u05E8\u05DA \u05E8\u05D9\u05E7 (null)",gender:"m"},undefined:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05DE\u05D5\u05D2\u05D3\u05E8 (undefined)",gender:"m"},symbol:{label:"\u05E1\u05D9\u05DE\u05D1\u05D5\u05DC (Symbol)",gender:"m"},function:{label:"\u05E4\u05D5\u05E0\u05E7\u05E6\u05D9\u05D4",gender:"f"},map:{label:"\u05DE\u05E4\u05D4 (Map)",gender:"f"},set:{label:"\u05E7\u05D1\u05D5\u05E6\u05D4 (Set)",gender:"f"},file:{label:"\u05E7\u05D5\u05D1\u05E5",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05D9\u05D3\u05D5\u05E2",gender:"m"},value:{label:"\u05E2\u05E8\u05DA",gender:"m"}},F={string:{unit:"\u05EA\u05D5\u05D5\u05D9\u05DD",shortLabel:"\u05E7\u05E6\u05E8",longLabel:"\u05D0\u05E8\u05D5\u05DA"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},number:{unit:"",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"}},A=(G)=>G?$[G]:void 0,J=(G)=>{let z=A(G);if(z)return z.label;return G??$.unknown.label},X=(G)=>`\u05D4${J(G)}`,Y=(G)=>{return(A(G)?.gender??"m")==="f"?"\u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05D9\u05D5\u05EA":"\u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA"},W=(G)=>{if(!G)return null;return F[G]??null},Z={regex:{label:"\u05E7\u05DC\u05D8",gender:"m"},email:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",gender:"f"},url:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",gender:"f"},emoji:{label:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",gender:"m"},time:{label:"\u05D6\u05DE\u05DF ISO",gender:"m"},duration:{label:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",gender:"m"},ipv4:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",gender:"f"},ipv6:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",gender:"f"},cidrv4:{label:"\u05D8\u05D5\u05D5\u05D7 IPv4",gender:"m"},cidrv6:{label:"\u05D8\u05D5\u05D5\u05D7 IPv6",gender:"m"},base64:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",gender:"f"},base64url:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",gender:"f"},json_string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",gender:"f"},e164:{label:"\u05DE\u05E1\u05E4\u05E8 E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},includes:{label:"\u05E7\u05DC\u05D8",gender:"m"},lowercase:{label:"\u05E7\u05DC\u05D8",gender:"m"},starts_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},uppercase:{label:"\u05E7\u05DC\u05D8",gender:"m"}},D={nan:"NaN"};return(G)=>{switch(G.code){case"invalid_type":{let z=G.expected,H=D[z??""]??J(z),U=R1(G.input),Q=D[U]??$[U]?.label??U;if(/^[A-Z]/.test(G.expected))return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA instanceof ${G.expected}, \u05D4\u05EA\u05E7\u05D1\u05DC ${Q}`;return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${H}, \u05D4\u05EA\u05E7\u05D1\u05DC ${Q}`}case"invalid_value":{if(G.values.length===1)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05E2\u05E8\u05DA \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA ${P1(G.values[0])}`;let z=G.values.map((Q)=>P1(Q));if(G.values.length===2)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${z[0]} \u05D0\u05D5 ${z[1]}`;let H=z[z.length-1];return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${z.slice(0,-1).join(", ")} \u05D0\u05D5 ${H}`}case"too_big":{let z=W(G.origin),H=X(G.origin??"value");if(G.origin==="string")return`${z?.longLabel??"\u05D0\u05E8\u05D5\u05DA"} \u05DE\u05D3\u05D9: ${H} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${G.maximum.toString()} ${z?.unit??""} ${G.inclusive?"\u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA":"\u05DC\u05DB\u05DC \u05D4\u05D9\u05D5\u05EA\u05E8"}`.trim();if(G.origin==="number"){let B=G.inclusive?`\u05E7\u05D8\u05DF \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${G.maximum}`:`\u05E7\u05D8\u05DF \u05DE-${G.maximum}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${H} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${B}`}if(G.origin==="array"||G.origin==="set"){let B=G.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA",q=G.inclusive?`${G.maximum} ${z?.unit??""} \u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA`:`\u05E4\u05D7\u05D5\u05EA \u05DE-${G.maximum} ${z?.unit??""}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${H} ${B} \u05DC\u05D4\u05DB\u05D9\u05DC ${q}`.trim()}let U=G.inclusive?"<=":"<",Q=Y(G.origin??"value");if(z?.unit)return`${z.longLabel} \u05DE\u05D3\u05D9: ${H} ${Q} ${U}${G.maximum.toString()} ${z.unit}`;return`${z?.longLabel??"\u05D2\u05D3\u05D5\u05DC"} \u05DE\u05D3\u05D9: ${H} ${Q} ${U}${G.maximum.toString()}`}case"too_small":{let z=W(G.origin),H=X(G.origin??"value");if(G.origin==="string")return`${z?.shortLabel??"\u05E7\u05E6\u05E8"} \u05DE\u05D3\u05D9: ${H} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${G.minimum.toString()} ${z?.unit??""} ${G.inclusive?"\u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8":"\u05DC\u05E4\u05D7\u05D5\u05EA"}`.trim();if(G.origin==="number"){let B=G.inclusive?`\u05D2\u05D3\u05D5\u05DC \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${G.minimum}`:`\u05D2\u05D3\u05D5\u05DC \u05DE-${G.minimum}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${H} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${B}`}if(G.origin==="array"||G.origin==="set"){let B=G.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA";if(G.minimum===1&&G.inclusive){let L=G.origin==="set"?"\u05DC\u05E4\u05D7\u05D5\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D0\u05D7\u05D3":"\u05DC\u05E4\u05D7\u05D5\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D0\u05D7\u05D3";return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${H} ${B} \u05DC\u05D4\u05DB\u05D9\u05DC ${L}`}let q=G.inclusive?`${G.minimum} ${z?.unit??""} \u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8`:`\u05D9\u05D5\u05EA\u05E8 \u05DE-${G.minimum} ${z?.unit??""}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${H} ${B} \u05DC\u05D4\u05DB\u05D9\u05DC ${q}`.trim()}let U=G.inclusive?">=":">",Q=Y(G.origin??"value");if(z?.unit)return`${z.shortLabel} \u05DE\u05D3\u05D9: ${H} ${Q} ${U}${G.minimum.toString()} ${z.unit}`;return`${z?.shortLabel??"\u05E7\u05D8\u05DF"} \u05DE\u05D3\u05D9: ${H} ${Q} ${U}${G.minimum.toString()}`}case"invalid_format":{let z=G;if(z.format==="starts_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1 "${z.prefix}"`;if(z.format==="ends_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${z.suffix}"`;if(z.format==="includes")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${z.includes}"`;if(z.format==="regex")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${z.pattern}`;let H=Z[z.format],U=H?.label??z.format,B=(H?.gender??"m")==="f"?"\u05EA\u05E7\u05D9\u05E0\u05D4":"\u05EA\u05E7\u05D9\u05DF";return`${U} \u05DC\u05D0 ${B}`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${G.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${G.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${G.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${G1(G.keys,", ")}`;case"invalid_key":return"\u05E9\u05D3\u05D4 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8";case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${X(G.origin??"array")}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}};var XM1=x(()=>{e1()});function Sl(){return{localeError:PL0()}}var PL0=()=>{let $={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function F(X){return $[X]??null}let A={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"},J={nan:"NaN",number:"sz\xE1m",array:"t\xF6mb"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k instanceof ${X.expected}, a kapott \xE9rt\xE9k ${Z}`;return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${Y}, a kapott \xE9rt\xE9k ${Z}`}case"invalid_value":if(X.values.length===1)return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${P1(X.values[0])}`;return`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`T\xFAl nagy: ${X.origin??"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${Y}${X.maximum.toString()} ${W.unit??"elem"}`;return`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${X.origin??"\xE9rt\xE9k"} t\xFAl nagy: ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${X.origin} m\xE9rete t\xFAl kicsi ${Y}${X.minimum.toString()} ${W.unit}`;return`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${X.origin} t\xFAl kicsi ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\xC9rv\xE9nytelen string: "${Y.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`;if(Y.format==="ends_with")return`\xC9rv\xE9nytelen string: "${Y.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`;if(Y.format==="includes")return`\xC9rv\xE9nytelen string: "${Y.includes}" \xE9rt\xE9ket kell tartalmaznia`;if(Y.format==="regex")return`\xC9rv\xE9nytelen string: ${Y.pattern} mint\xE1nak kell megfelelnie`;return`\xC9rv\xE9nytelen ${A[Y.format]??X.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${X.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${X.keys.length>1?"s":""}: ${G1(X.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${X.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${X.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}};var YM1=x(()=>{e1()});function WM1($,F,A){return Math.abs($)===1?F:A}function jH($){if(!$)return"";let F=["\u0561","\u0565","\u0568","\u056B","\u0578","\u0578\u0582","\u0585"],A=$[$.length-1];return $+(F.includes(A)?"\u0576":"\u0568")}function _l(){return{localeError:RL0()}}var RL0=()=>{let $={string:{unit:{one:"\u0576\u0577\u0561\u0576",many:"\u0576\u0577\u0561\u0576\u0576\u0565\u0580"},verb:"\u0578\u0582\u0576\u0565\u0576\u0561\u056C"},file:{unit:{one:"\u0562\u0561\u0575\u0569",many:"\u0562\u0561\u0575\u0569\u0565\u0580"},verb:"\u0578\u0582\u0576\u0565\u0576\u0561\u056C"},array:{unit:{one:"\u057F\u0561\u0580\u0580",many:"\u057F\u0561\u0580\u0580\u0565\u0580"},verb:"\u0578\u0582\u0576\u0565\u0576\u0561\u056C"},set:{unit:{one:"\u057F\u0561\u0580\u0580",many:"\u057F\u0561\u0580\u0580\u0565\u0580"},verb:"\u0578\u0582\u0576\u0565\u0576\u0561\u056C"}};function F(X){return $[X]??null}let A={regex:"\u0574\u0578\u0582\u057F\u0584",email:"\u0567\u056C. \u0570\u0561\u057D\u0581\u0565",url:"URL",emoji:"\u0567\u0574\u0578\u057B\u056B",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0561\u0574\u057D\u0561\u0569\u056B\u057E \u0587 \u056A\u0561\u0574",date:"ISO \u0561\u0574\u057D\u0561\u0569\u056B\u057E",time:"ISO \u056A\u0561\u0574",duration:"ISO \u057F\u0587\u0578\u0572\u0578\u0582\u0569\u0575\u0578\u0582\u0576",ipv4:"IPv4 \u0570\u0561\u057D\u0581\u0565",ipv6:"IPv6 \u0570\u0561\u057D\u0581\u0565",cidrv4:"IPv4 \u0574\u056B\u057B\u0561\u056F\u0561\u0575\u0584",cidrv6:"IPv6 \u0574\u056B\u057B\u0561\u056F\u0561\u0575\u0584",base64:"base64 \u0571\u0587\u0561\u0579\u0561\u0583\u0578\u057E \u057F\u0578\u0572",base64url:"base64url \u0571\u0587\u0561\u0579\u0561\u0583\u0578\u057E \u057F\u0578\u0572",json_string:"JSON \u057F\u0578\u0572",e164:"E.164 \u0570\u0561\u0574\u0561\u0580",jwt:"JWT",template_literal:"\u0574\u0578\u0582\u057F\u0584"},J={nan:"NaN",number:"\u0569\u056B\u057E",array:"\u0566\u0561\u0576\u0563\u057E\u0561\u056E"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567\u0580 instanceof ${X.expected}, \u057D\u057F\u0561\u0581\u057E\u0565\u056C \u0567 ${Z}`;return`\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567\u0580 ${Y}, \u057D\u057F\u0561\u0581\u057E\u0565\u056C \u0567 ${Z}`}case"invalid_value":if(X.values.length===1)return`\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567\u0580 ${P1(X.values[1])}`;return`\u054D\u056D\u0561\u056C \u057F\u0561\u0580\u0562\u0565\u0580\u0561\u056F\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567\u0580 \u0570\u0565\u057F\u0587\u0575\u0561\u056C\u0576\u0565\u0580\u056B\u0581 \u0574\u0565\u056F\u0568\u055D ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W){let Z=Number(X.maximum),D=WM1(Z,W.unit.one,W.unit.many);return`\u0549\u0561\u0583\u0561\u0566\u0561\u0576\u0581 \u0574\u0565\u056E \u0561\u0580\u056A\u0565\u0584\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567, \u0578\u0580 ${jH(X.origin??"\u0561\u0580\u056A\u0565\u0584")} \u056F\u0578\u0582\u0576\u0565\u0576\u0561 ${Y}${X.maximum.toString()} ${D}`}return`\u0549\u0561\u0583\u0561\u0566\u0561\u0576\u0581 \u0574\u0565\u056E \u0561\u0580\u056A\u0565\u0584\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567, \u0578\u0580 ${jH(X.origin??"\u0561\u0580\u056A\u0565\u0584")} \u056C\u056B\u0576\u056B ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W){let Z=Number(X.minimum),D=WM1(Z,W.unit.one,W.unit.many);return`\u0549\u0561\u0583\u0561\u0566\u0561\u0576\u0581 \u0583\u0578\u0584\u0580 \u0561\u0580\u056A\u0565\u0584\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567, \u0578\u0580 ${jH(X.origin)} \u056F\u0578\u0582\u0576\u0565\u0576\u0561 ${Y}${X.minimum.toString()} ${D}`}return`\u0549\u0561\u0583\u0561\u0566\u0561\u0576\u0581 \u0583\u0578\u0584\u0580 \u0561\u0580\u056A\u0565\u0584\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567, \u0578\u0580 ${jH(X.origin)} \u056C\u056B\u0576\u056B ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u054D\u056D\u0561\u056C \u057F\u0578\u0572\u2024 \u057A\u0565\u057F\u0584 \u0567 \u057D\u056F\u057D\u057E\u056B "${Y.prefix}"-\u0578\u057E`;if(Y.format==="ends_with")return`\u054D\u056D\u0561\u056C \u057F\u0578\u0572\u2024 \u057A\u0565\u057F\u0584 \u0567 \u0561\u057E\u0561\u0580\u057F\u057E\u056B "${Y.suffix}"-\u0578\u057E`;if(Y.format==="includes")return`\u054D\u056D\u0561\u056C \u057F\u0578\u0572\u2024 \u057A\u0565\u057F\u0584 \u0567 \u057A\u0561\u0580\u0578\u0582\u0576\u0561\u056F\u056B "${Y.includes}"`;if(Y.format==="regex")return`\u054D\u056D\u0561\u056C \u057F\u0578\u0572\u2024 \u057A\u0565\u057F\u0584 \u0567 \u0570\u0561\u0574\u0561\u057A\u0561\u057F\u0561\u057D\u056D\u0561\u0576\u056B ${Y.pattern} \u0571\u0587\u0561\u0579\u0561\u0583\u056B\u0576`;return`\u054D\u056D\u0561\u056C ${A[Y.format]??X.format}`}case"not_multiple_of":return`\u054D\u056D\u0561\u056C \u0569\u056B\u057E\u2024 \u057A\u0565\u057F\u0584 \u0567 \u0562\u0561\u0566\u0574\u0561\u057A\u0561\u057F\u056B\u056F \u056C\u056B\u0576\u056B ${X.divisor}-\u056B`;case"unrecognized_keys":return`\u0549\u0573\u0561\u0576\u0561\u0579\u057E\u0561\u056E \u0562\u0561\u0576\u0561\u056C\u056B${X.keys.length>1?"\u0576\u0565\u0580":""}. ${G1(X.keys,", ")}`;case"invalid_key":return`\u054D\u056D\u0561\u056C \u0562\u0561\u0576\u0561\u056C\u056B ${jH(X.origin)}-\u0578\u0582\u0574`;case"invalid_union":return"\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574";case"invalid_element":return`\u054D\u056D\u0561\u056C \u0561\u0580\u056A\u0565\u0584 ${jH(X.origin)}-\u0578\u0582\u0574`;default:return"\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574"}}};var ZM1=x(()=>{e1()});function kl(){return{localeError:IL0()}}var IL0=()=>{let $={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function F(X){return $[X]??null}let A={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"},J={nan:"NaN"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Input tidak valid: diharapkan instanceof ${X.expected}, diterima ${Z}`;return`Input tidak valid: diharapkan ${Y}, diterima ${Z}`}case"invalid_value":if(X.values.length===1)return`Input tidak valid: diharapkan ${P1(X.values[0])}`;return`Pilihan tidak valid: diharapkan salah satu dari ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`Terlalu besar: diharapkan ${X.origin??"value"} memiliki ${Y}${X.maximum.toString()} ${W.unit??"elemen"}`;return`Terlalu besar: diharapkan ${X.origin??"value"} menjadi ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`Terlalu kecil: diharapkan ${X.origin} memiliki ${Y}${X.minimum.toString()} ${W.unit}`;return`Terlalu kecil: diharapkan ${X.origin} menjadi ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`String tidak valid: harus dimulai dengan "${Y.prefix}"`;if(Y.format==="ends_with")return`String tidak valid: harus berakhir dengan "${Y.suffix}"`;if(Y.format==="includes")return`String tidak valid: harus menyertakan "${Y.includes}"`;if(Y.format==="regex")return`String tidak valid: harus sesuai pola ${Y.pattern}`;return`${A[Y.format]??X.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${X.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${X.keys.length>1?"s":""}: ${G1(X.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${X.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${X.origin}`;default:return"Input tidak valid"}}};var DM1=x(()=>{e1()});function bl(){return{localeError:TL0()}}var TL0=()=>{let $={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function F(X){return $[X]??null}let A={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"},J={nan:"NaN",number:"n\xFAmer",array:"fylki"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Rangt gildi: \xDE\xFA sl\xF3st inn ${Z} \xFEar sem \xE1 a\xF0 vera instanceof ${X.expected}`;return`Rangt gildi: \xDE\xFA sl\xF3st inn ${Z} \xFEar sem \xE1 a\xF0 vera ${Y}`}case"invalid_value":if(X.values.length===1)return`Rangt gildi: gert r\xE1\xF0 fyrir ${P1(X.values[0])}`;return`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${X.origin??"gildi"} hafi ${Y}${X.maximum.toString()} ${W.unit??"hluti"}`;return`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${X.origin??"gildi"} s\xE9 ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${X.origin} hafi ${Y}${X.minimum.toString()} ${W.unit}`;return`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${X.origin} s\xE9 ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${Y.prefix}"`;if(Y.format==="ends_with")return`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${Y.suffix}"`;if(Y.format==="includes")return`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${Y.includes}"`;if(Y.format==="regex")return`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${Y.pattern}`;return`Rangt ${A[Y.format]??X.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${X.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${X.keys.length>1?"ir lyklar":"ur lykill"}: ${G1(X.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${X.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${X.origin}`;default:return"Rangt gildi"}}};var GM1=x(()=>{e1()});function xl(){return{localeError:jL0()}}var jL0=()=>{let $={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function F(X){return $[X]??null}let A={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"},J={nan:"NaN",number:"numero",array:"vettore"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Input non valido: atteso instanceof ${X.expected}, ricevuto ${Z}`;return`Input non valido: atteso ${Y}, ricevuto ${Z}`}case"invalid_value":if(X.values.length===1)return`Input non valido: atteso ${P1(X.values[0])}`;return`Opzione non valida: atteso uno tra ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`Troppo grande: ${X.origin??"valore"} deve avere ${Y}${X.maximum.toString()} ${W.unit??"elementi"}`;return`Troppo grande: ${X.origin??"valore"} deve essere ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`Troppo piccolo: ${X.origin} deve avere ${Y}${X.minimum.toString()} ${W.unit}`;return`Troppo piccolo: ${X.origin} deve essere ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Stringa non valida: deve iniziare con "${Y.prefix}"`;if(Y.format==="ends_with")return`Stringa non valida: deve terminare con "${Y.suffix}"`;if(Y.format==="includes")return`Stringa non valida: deve includere "${Y.includes}"`;if(Y.format==="regex")return`Stringa non valida: deve corrispondere al pattern ${Y.pattern}`;return`Invalid ${A[Y.format]??X.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${X.divisor}`;case"unrecognized_keys":return`Chiav${X.keys.length>1?"i":"e"} non riconosciut${X.keys.length>1?"e":"a"}: ${G1(X.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${X.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${X.origin}`;default:return"Input non valido"}}};var zM1=x(()=>{e1()});function gl(){return{localeError:OL0()}}var OL0=()=>{let $={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function F(X){return $[X]??null}let A={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"},J={nan:"NaN",number:"\u6570\u5024",array:"\u914D\u5217"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u7121\u52B9\u306A\u5165\u529B: instanceof ${X.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${Z}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;return`\u7121\u52B9\u306A\u5165\u529B: ${Y}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${Z}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`}case"invalid_value":if(X.values.length===1)return`\u7121\u52B9\u306A\u5165\u529B: ${P1(X.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`;return`\u7121\u52B9\u306A\u9078\u629E: ${G1(X.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let Y=X.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",W=F(X.origin);if(W)return`\u5927\u304D\u3059\u304E\u308B\u5024: ${X.origin??"\u5024"}\u306F${X.maximum.toString()}${W.unit??"\u8981\u7D20"}${Y}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;return`\u5927\u304D\u3059\u304E\u308B\u5024: ${X.origin??"\u5024"}\u306F${X.maximum.toString()}${Y}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let Y=X.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",W=F(X.origin);if(W)return`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${X.origin}\u306F${X.minimum.toString()}${W.unit}${Y}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;return`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${X.origin}\u306F${X.minimum.toString()}${Y}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${Y.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;if(Y.format==="ends_with")return`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${Y.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;if(Y.format==="includes")return`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${Y.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;if(Y.format==="regex")return`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${Y.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;return`\u7121\u52B9\u306A${A[Y.format]??X.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${X.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${X.keys.length>1?"\u7FA4":""}: ${G1(X.keys,"\u3001")}`;case"invalid_key":return`${X.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${X.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}};var HM1=x(()=>{e1()});function fl(){return{localeError:SL0()}}var SL0=()=>{let $={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function F(X){return $[X]??null}let A={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"},J={nan:"NaN",number:"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8",string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0",array:"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 instanceof ${X.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${Z}`;return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${Y}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${Z}`}case"invalid_value":if(X.values.length===1)return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${P1(X.values[0])}`;return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${G1(X.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${X.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${W.verb} ${Y}${X.maximum.toString()} ${W.unit}`;return`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${X.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${X.origin} ${W.verb} ${Y}${X.minimum.toString()} ${W.unit}`;return`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${X.origin} \u10D8\u10E7\u10DD\u10E1 ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${Y.prefix}"-\u10D8\u10D7`;if(Y.format==="ends_with")return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${Y.suffix}"-\u10D8\u10D7`;if(Y.format==="includes")return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${Y.includes}"-\u10E1`;if(Y.format==="regex")return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${Y.pattern}`;return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${A[Y.format]??X.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${X.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${X.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${G1(X.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${X.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${X.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}};var UM1=x(()=>{e1()});function Kq(){return{localeError:_L0()}}var _L0=()=>{let $={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function F(X){return $[X]??null}let A={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"},J={nan:"NaN",number:"\u179B\u17C1\u1781",array:"\u17A2\u17B6\u179A\u17C1 (Array)",null:"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A instanceof ${X.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${Z}`;return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${Y} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${Z}`}case"invalid_value":if(X.values.length===1)return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${P1(X.values[0])}`;return`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${X.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${Y} ${X.maximum.toString()} ${W.unit??"\u1792\u17B6\u178F\u17BB"}`;return`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${X.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${Y} ${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${X.origin} ${Y} ${X.minimum.toString()} ${W.unit}`;return`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${X.origin} ${Y} ${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${Y.prefix}"`;if(Y.format==="ends_with")return`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${Y.suffix}"`;if(Y.format==="includes")return`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${Y.includes}"`;if(Y.format==="regex")return`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${Y.pattern}`;return`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${A[Y.format]??X.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${X.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${G1(X.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${X.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${X.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}};var vl=x(()=>{e1()});function yl(){return Kq()}var QM1=x(()=>{vl()});function ul(){return{localeError:kL0()}}var kL0=()=>{let $={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function F(X){return $[X]??null}let A={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"},J={nan:"NaN"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 instanceof ${X.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${Z}\uC785\uB2C8\uB2E4`;return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${Y}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${Z}\uC785\uB2C8\uB2E4`}case"invalid_value":if(X.values.length===1)return`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${P1(X.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`;return`\uC798\uBABB\uB41C \uC635\uC158: ${G1(X.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let Y=X.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",W=Y==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",Z=F(X.origin),D=Z?.unit??"\uC694\uC18C";if(Z)return`${X.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${X.maximum.toString()}${D} ${Y}${W}`;return`${X.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${X.maximum.toString()} ${Y}${W}`}case"too_small":{let Y=X.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",W=Y==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",Z=F(X.origin),D=Z?.unit??"\uC694\uC18C";if(Z)return`${X.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${X.minimum.toString()}${D} ${Y}${W}`;return`${X.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${X.minimum.toString()} ${Y}${W}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${Y.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`;if(Y.format==="ends_with")return`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${Y.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`;if(Y.format==="includes")return`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${Y.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`;if(Y.format==="regex")return`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${Y.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`;return`\uC798\uBABB\uB41C ${A[Y.format]??X.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${X.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${G1(X.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${X.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${X.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}};var KM1=x(()=>{e1()});function BM1($){let F=Math.abs($),A=F%10,J=F%100;if(J>=11&&J<=19||A===0)return"many";if(A===1)return"one";return"few"}function hl(){return{localeError:bL0()}}var Bq=($)=>{return $.charAt(0).toUpperCase()+$.slice(1)},bL0=()=>{let $={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function F(X,Y,W,Z){let D=$[X]??null;if(D===null)return D;return{unit:D.unit[Y],verb:D.verb[Z][W?"inclusive":"notInclusive"]}}let A={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"},J={nan:"NaN",number:"skai\u010Dius",bigint:"sveikasis skai\u010Dius",string:"eilut\u0117",boolean:"login\u0117 reik\u0161m\u0117",undefined:"neapibr\u0117\u017Eta reik\u0161m\u0117",function:"funkcija",symbol:"simbolis",array:"masyvas",object:"objektas",null:"nulin\u0117 reik\u0161m\u0117"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Gautas tipas ${Z}, o tik\u0117tasi - instanceof ${X.expected}`;return`Gautas tipas ${Z}, o tik\u0117tasi - ${Y}`}case"invalid_value":if(X.values.length===1)return`Privalo b\u016Bti ${P1(X.values[0])}`;return`Privalo b\u016Bti vienas i\u0161 ${G1(X.values,"|")} pasirinkim\u0173`;case"too_big":{let Y=J[X.origin]??X.origin,W=F(X.origin,BM1(Number(X.maximum)),X.inclusive??!1,"smaller");if(W?.verb)return`${Bq(Y??X.origin??"reik\u0161m\u0117")} ${W.verb} ${X.maximum.toString()} ${W.unit??"element\u0173"}`;let Z=X.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${Bq(Y??X.origin??"reik\u0161m\u0117")} turi b\u016Bti ${Z} ${X.maximum.toString()} ${W?.unit}`}case"too_small":{let Y=J[X.origin]??X.origin,W=F(X.origin,BM1(Number(X.minimum)),X.inclusive??!1,"bigger");if(W?.verb)return`${Bq(Y??X.origin??"reik\u0161m\u0117")} ${W.verb} ${X.minimum.toString()} ${W.unit??"element\u0173"}`;let Z=X.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${Bq(Y??X.origin??"reik\u0161m\u0117")} turi b\u016Bti ${Z} ${X.minimum.toString()} ${W?.unit}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Eilut\u0117 privalo prasid\u0117ti "${Y.prefix}"`;if(Y.format==="ends_with")return`Eilut\u0117 privalo pasibaigti "${Y.suffix}"`;if(Y.format==="includes")return`Eilut\u0117 privalo \u012Ftraukti "${Y.includes}"`;if(Y.format==="regex")return`Eilut\u0117 privalo atitikti ${Y.pattern}`;return`Neteisingas ${A[Y.format]??X.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${X.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${X.keys.length>1?"i":"as"} rakt${X.keys.length>1?"ai":"as"}: ${G1(X.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let Y=J[X.origin]??X.origin;return`${Bq(Y??X.origin??"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}};var wM1=x(()=>{e1()});function ml(){return{localeError:xL0()}}var xL0=()=>{let $={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function F(X){return $[X]??null}let A={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"},J={nan:"NaN",number:"\u0431\u0440\u043E\u0458",array:"\u043D\u0438\u0437\u0430"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 instanceof ${X.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${Z}`;return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${Y}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${Z}`}case"invalid_value":if(X.values.length===1)return`Invalid input: expected ${P1(X.values[0])}`;return`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${X.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${Y}${X.maximum.toString()} ${W.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`;return`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${X.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${X.origin} \u0434\u0430 \u0438\u043C\u0430 ${Y}${X.minimum.toString()} ${W.unit}`;return`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${X.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${Y.prefix}"`;if(Y.format==="ends_with")return`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${Y.suffix}"`;if(Y.format==="includes")return`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${Y.includes}"`;if(Y.format==="regex")return`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${Y.pattern}`;return`Invalid ${A[Y.format]??X.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${X.divisor}`;case"unrecognized_keys":return`${X.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${G1(X.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${X.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${X.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}};var qM1=x(()=>{e1()});function dl(){return{localeError:gL0()}}var gL0=()=>{let $={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function F(X){return $[X]??null}let A={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"},J={nan:"NaN",number:"nombor"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Input tidak sah: dijangka instanceof ${X.expected}, diterima ${Z}`;return`Input tidak sah: dijangka ${Y}, diterima ${Z}`}case"invalid_value":if(X.values.length===1)return`Input tidak sah: dijangka ${P1(X.values[0])}`;return`Pilihan tidak sah: dijangka salah satu daripada ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`Terlalu besar: dijangka ${X.origin??"nilai"} ${W.verb} ${Y}${X.maximum.toString()} ${W.unit??"elemen"}`;return`Terlalu besar: dijangka ${X.origin??"nilai"} adalah ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`Terlalu kecil: dijangka ${X.origin} ${W.verb} ${Y}${X.minimum.toString()} ${W.unit}`;return`Terlalu kecil: dijangka ${X.origin} adalah ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`String tidak sah: mesti bermula dengan "${Y.prefix}"`;if(Y.format==="ends_with")return`String tidak sah: mesti berakhir dengan "${Y.suffix}"`;if(Y.format==="includes")return`String tidak sah: mesti mengandungi "${Y.includes}"`;if(Y.format==="regex")return`String tidak sah: mesti sepadan dengan corak ${Y.pattern}`;return`${A[Y.format]??X.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${X.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${G1(X.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${X.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${X.origin}`;default:return"Input tidak sah"}}};var LM1=x(()=>{e1()});function cl(){return{localeError:fL0()}}var fL0=()=>{let $={string:{unit:"tekens",verb:"heeft"},file:{unit:"bytes",verb:"heeft"},array:{unit:"elementen",verb:"heeft"},set:{unit:"elementen",verb:"heeft"}};function F(X){return $[X]??null}let A={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"},J={nan:"NaN",number:"getal"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Ongeldige invoer: verwacht instanceof ${X.expected}, ontving ${Z}`;return`Ongeldige invoer: verwacht ${Y}, ontving ${Z}`}case"invalid_value":if(X.values.length===1)return`Ongeldige invoer: verwacht ${P1(X.values[0])}`;return`Ongeldige optie: verwacht \xE9\xE9n van ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin),Z=X.origin==="date"?"laat":X.origin==="string"?"lang":"groot";if(W)return`Te ${Z}: verwacht dat ${X.origin??"waarde"} ${Y}${X.maximum.toString()} ${W.unit??"elementen"} ${W.verb}`;return`Te ${Z}: verwacht dat ${X.origin??"waarde"} ${Y}${X.maximum.toString()} is`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin),Z=X.origin==="date"?"vroeg":X.origin==="string"?"kort":"klein";if(W)return`Te ${Z}: verwacht dat ${X.origin} ${Y}${X.minimum.toString()} ${W.unit} ${W.verb}`;return`Te ${Z}: verwacht dat ${X.origin} ${Y}${X.minimum.toString()} is`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Ongeldige tekst: moet met "${Y.prefix}" beginnen`;if(Y.format==="ends_with")return`Ongeldige tekst: moet op "${Y.suffix}" eindigen`;if(Y.format==="includes")return`Ongeldige tekst: moet "${Y.includes}" bevatten`;if(Y.format==="regex")return`Ongeldige tekst: moet overeenkomen met patroon ${Y.pattern}`;return`Ongeldig: ${A[Y.format]??X.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${X.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${X.keys.length>1?"s":""}: ${G1(X.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${X.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${X.origin}`;default:return"Ongeldige invoer"}}};var EM1=x(()=>{e1()});function ll(){return{localeError:vL0()}}var vL0=()=>{let $={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function F(X){return $[X]??null}let A={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},J={nan:"NaN",number:"tall",array:"liste"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Ugyldig input: forventet instanceof ${X.expected}, fikk ${Z}`;return`Ugyldig input: forventet ${Y}, fikk ${Z}`}case"invalid_value":if(X.values.length===1)return`Ugyldig verdi: forventet ${P1(X.values[0])}`;return`Ugyldig valg: forventet en av ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`For stor(t): forventet ${X.origin??"value"} til \xE5 ha ${Y}${X.maximum.toString()} ${W.unit??"elementer"}`;return`For stor(t): forventet ${X.origin??"value"} til \xE5 ha ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`For lite(n): forventet ${X.origin} til \xE5 ha ${Y}${X.minimum.toString()} ${W.unit}`;return`For lite(n): forventet ${X.origin} til \xE5 ha ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Ugyldig streng: m\xE5 starte med "${Y.prefix}"`;if(Y.format==="ends_with")return`Ugyldig streng: m\xE5 ende med "${Y.suffix}"`;if(Y.format==="includes")return`Ugyldig streng: m\xE5 inneholde "${Y.includes}"`;if(Y.format==="regex")return`Ugyldig streng: m\xE5 matche m\xF8nsteret ${Y.pattern}`;return`Ugyldig ${A[Y.format]??X.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${X.divisor}`;case"unrecognized_keys":return`${X.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${G1(X.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${X.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${X.origin}`;default:return"Ugyldig input"}}};var VM1=x(()=>{e1()});function pl(){return{localeError:yL0()}}var yL0=()=>{let $={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function F(X){return $[X]??null}let A={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"},J={nan:"NaN",number:"numara",array:"saf",null:"gayb"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`F\xE2sit giren: umulan instanceof ${X.expected}, al\u0131nan ${Z}`;return`F\xE2sit giren: umulan ${Y}, al\u0131nan ${Z}`}case"invalid_value":if(X.values.length===1)return`F\xE2sit giren: umulan ${P1(X.values[0])}`;return`F\xE2sit tercih: m\xFBteberler ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`Fazla b\xFCy\xFCk: ${X.origin??"value"}, ${Y}${X.maximum.toString()} ${W.unit??"elements"} sahip olmal\u0131yd\u0131.`;return`Fazla b\xFCy\xFCk: ${X.origin??"value"}, ${Y}${X.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`Fazla k\xFC\xE7\xFCk: ${X.origin}, ${Y}${X.minimum.toString()} ${W.unit} sahip olmal\u0131yd\u0131.`;return`Fazla k\xFC\xE7\xFCk: ${X.origin}, ${Y}${X.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`F\xE2sit metin: "${Y.prefix}" ile ba\u015Flamal\u0131.`;if(Y.format==="ends_with")return`F\xE2sit metin: "${Y.suffix}" ile bitmeli.`;if(Y.format==="includes")return`F\xE2sit metin: "${Y.includes}" ihtiv\xE2 etmeli.`;if(Y.format==="regex")return`F\xE2sit metin: ${Y.pattern} nak\u015F\u0131na uymal\u0131.`;return`F\xE2sit ${A[Y.format]??X.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${X.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${X.keys.length>1?"s":""}: ${G1(X.keys,", ")}`;case"invalid_key":return`${X.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${X.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}};var NM1=x(()=>{e1()});function il(){return{localeError:uL0()}}var uL0=()=>{let $={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function F(X){return $[X]??null}let A={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"},J={nan:"NaN",number:"\u0639\u062F\u062F",array:"\u0627\u0631\u06D0"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F instanceof ${X.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${Z} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${Y} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${Z} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`}case"invalid_value":if(X.values.length===1)return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${P1(X.values[0])} \u0648\u0627\u06CC`;return`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${G1(X.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${X.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${Y}${X.maximum.toString()} ${W.unit??"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`;return`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${X.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${Y}${X.maximum.toString()} \u0648\u064A`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${X.origin} \u0628\u0627\u06CC\u062F ${Y}${X.minimum.toString()} ${W.unit} \u0648\u0644\u0631\u064A`;return`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${X.origin} \u0628\u0627\u06CC\u062F ${Y}${X.minimum.toString()} \u0648\u064A`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${Y.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`;if(Y.format==="ends_with")return`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${Y.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`;if(Y.format==="includes")return`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${Y.includes}" \u0648\u0644\u0631\u064A`;if(Y.format==="regex")return`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${Y.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`;return`${A[Y.format]??X.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${X.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${X.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${G1(X.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${X.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${X.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}};var CM1=x(()=>{e1()});function nl(){return{localeError:hL0()}}var hL0=()=>{let $={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function F(X){return $[X]??null}let A={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"},J={nan:"NaN",number:"liczba",array:"tablica"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano instanceof ${X.expected}, otrzymano ${Z}`;return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${Y}, otrzymano ${Z}`}case"invalid_value":if(X.values.length===1)return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${P1(X.values[0])}`;return`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${X.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${Y}${X.maximum.toString()} ${W.unit??"element\xF3w"}`;return`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${X.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${X.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${Y}${X.minimum.toString()} ${W.unit??"element\xF3w"}`;return`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${X.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${Y.prefix}"`;if(Y.format==="ends_with")return`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${Y.suffix}"`;if(Y.format==="includes")return`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${Y.includes}"`;if(Y.format==="regex")return`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${Y.pattern}`;return`Nieprawid\u0142ow(y/a/e) ${A[Y.format]??X.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${X.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${X.keys.length>1?"s":""}: ${G1(X.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${X.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${X.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}};var MM1=x(()=>{e1()});function rl(){return{localeError:mL0()}}var mL0=()=>{let $={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function F(X){return $[X]??null}let A={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"},J={nan:"NaN",number:"n\xFAmero",null:"nulo"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Tipo inv\xE1lido: esperado instanceof ${X.expected}, recebido ${Z}`;return`Tipo inv\xE1lido: esperado ${Y}, recebido ${Z}`}case"invalid_value":if(X.values.length===1)return`Entrada inv\xE1lida: esperado ${P1(X.values[0])}`;return`Op\xE7\xE3o inv\xE1lida: esperada uma das ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`Muito grande: esperado que ${X.origin??"valor"} tivesse ${Y}${X.maximum.toString()} ${W.unit??"elementos"}`;return`Muito grande: esperado que ${X.origin??"valor"} fosse ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`Muito pequeno: esperado que ${X.origin} tivesse ${Y}${X.minimum.toString()} ${W.unit}`;return`Muito pequeno: esperado que ${X.origin} fosse ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Texto inv\xE1lido: deve come\xE7ar com "${Y.prefix}"`;if(Y.format==="ends_with")return`Texto inv\xE1lido: deve terminar com "${Y.suffix}"`;if(Y.format==="includes")return`Texto inv\xE1lido: deve incluir "${Y.includes}"`;if(Y.format==="regex")return`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${Y.pattern}`;return`${A[Y.format]??X.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${X.divisor}`;case"unrecognized_keys":return`Chave${X.keys.length>1?"s":""} desconhecida${X.keys.length>1?"s":""}: ${G1(X.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${X.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${X.origin}`;default:return"Campo inv\xE1lido"}}};var PM1=x(()=>{e1()});function RM1($,F,A,J){let X=Math.abs($),Y=X%10,W=X%100;if(W>=11&&W<=19)return J;if(Y===1)return F;if(Y>=2&&Y<=4)return A;return J}function al(){return{localeError:dL0()}}var dL0=()=>{let $={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function F(X){return $[X]??null}let A={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"},J={nan:"NaN",number:"\u0447\u0438\u0441\u043B\u043E",array:"\u043C\u0430\u0441\u0441\u0438\u0432"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C instanceof ${X.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${Z}`;return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${Y}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${Z}`}case"invalid_value":if(X.values.length===1)return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${P1(X.values[0])}`;return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W){let Z=Number(X.maximum),D=RM1(Z,W.unit.one,W.unit.few,W.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${X.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${Y}${X.maximum.toString()} ${D}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${X.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W){let Z=Number(X.minimum),D=RM1(Z,W.unit.one,W.unit.few,W.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${X.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${Y}${X.minimum.toString()} ${D}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${X.origin} \u0431\u0443\u0434\u0435\u0442 ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${Y.prefix}"`;if(Y.format==="ends_with")return`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${Y.suffix}"`;if(Y.format==="includes")return`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${Y.includes}"`;if(Y.format==="regex")return`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${Y.pattern}`;return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${A[Y.format]??X.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${X.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${X.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${X.keys.length>1?"\u0438":""}: ${G1(X.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${X.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${X.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}};var IM1=x(()=>{e1()});function tl(){return{localeError:cL0()}}var cL0=()=>{let $={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function F(X){return $[X]??null}let A={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"},J={nan:"NaN",number:"\u0161tevilo",array:"tabela"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Neveljaven vnos: pri\u010Dakovano instanceof ${X.expected}, prejeto ${Z}`;return`Neveljaven vnos: pri\u010Dakovano ${Y}, prejeto ${Z}`}case"invalid_value":if(X.values.length===1)return`Neveljaven vnos: pri\u010Dakovano ${P1(X.values[0])}`;return`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`Preveliko: pri\u010Dakovano, da bo ${X.origin??"vrednost"} imelo ${Y}${X.maximum.toString()} ${W.unit??"elementov"}`;return`Preveliko: pri\u010Dakovano, da bo ${X.origin??"vrednost"} ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`Premajhno: pri\u010Dakovano, da bo ${X.origin} imelo ${Y}${X.minimum.toString()} ${W.unit}`;return`Premajhno: pri\u010Dakovano, da bo ${X.origin} ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Neveljaven niz: mora se za\u010Deti z "${Y.prefix}"`;if(Y.format==="ends_with")return`Neveljaven niz: mora se kon\u010Dati z "${Y.suffix}"`;if(Y.format==="includes")return`Neveljaven niz: mora vsebovati "${Y.includes}"`;if(Y.format==="regex")return`Neveljaven niz: mora ustrezati vzorcu ${Y.pattern}`;return`Neveljaven ${A[Y.format]??X.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${X.divisor}`;case"unrecognized_keys":return`Neprepoznan${X.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${G1(X.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${X.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${X.origin}`;default:return"Neveljaven vnos"}}};var TM1=x(()=>{e1()});function sl(){return{localeError:lL0()}}var lL0=()=>{let $={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function F(X){return $[X]??null}let A={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"},J={nan:"NaN",number:"antal",array:"lista"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Ogiltig inmatning: f\xF6rv\xE4ntat instanceof ${X.expected}, fick ${Z}`;return`Ogiltig inmatning: f\xF6rv\xE4ntat ${Y}, fick ${Z}`}case"invalid_value":if(X.values.length===1)return`Ogiltig inmatning: f\xF6rv\xE4ntat ${P1(X.values[0])}`;return`Ogiltigt val: f\xF6rv\xE4ntade en av ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`F\xF6r stor(t): f\xF6rv\xE4ntade ${X.origin??"v\xE4rdet"} att ha ${Y}${X.maximum.toString()} ${W.unit??"element"}`;return`F\xF6r stor(t): f\xF6rv\xE4ntat ${X.origin??"v\xE4rdet"} att ha ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`F\xF6r lite(t): f\xF6rv\xE4ntade ${X.origin??"v\xE4rdet"} att ha ${Y}${X.minimum.toString()} ${W.unit}`;return`F\xF6r lite(t): f\xF6rv\xE4ntade ${X.origin??"v\xE4rdet"} att ha ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${Y.prefix}"`;if(Y.format==="ends_with")return`Ogiltig str\xE4ng: m\xE5ste sluta med "${Y.suffix}"`;if(Y.format==="includes")return`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${Y.includes}"`;if(Y.format==="regex")return`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${Y.pattern}"`;return`Ogiltig(t) ${A[Y.format]??X.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${X.divisor}`;case"unrecognized_keys":return`${X.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${G1(X.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${X.origin??"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${X.origin??"v\xE4rdet"}`;default:return"Ogiltig input"}}};var jM1=x(()=>{e1()});function ol(){return{localeError:pL0()}}var pL0=()=>{let $={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function F(X){return $[X]??null}let A={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"},J={nan:"NaN",number:"\u0B8E\u0BA3\u0BCD",array:"\u0B85\u0BA3\u0BBF",null:"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 instanceof ${X.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${Z}`;return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${Y}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${Z}`}case"invalid_value":if(X.values.length===1)return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${P1(X.values[0])}`;return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${G1(X.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${X.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${Y}${X.maximum.toString()} ${W.unit??"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;return`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${X.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${Y}${X.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${X.origin} ${Y}${X.minimum.toString()} ${W.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;return`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${X.origin} ${Y}${X.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${Y.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;if(Y.format==="ends_with")return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${Y.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;if(Y.format==="includes")return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${Y.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;if(Y.format==="regex")return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${Y.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${A[Y.format]??X.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${X.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${X.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${G1(X.keys,", ")}`;case"invalid_key":return`${X.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${X.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}};var OM1=x(()=>{e1()});function el(){return{localeError:iL0()}}var iL0=()=>{let $={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function F(X){return $[X]??null}let A={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"},J={nan:"NaN",number:"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02",array:"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)",null:"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 instanceof ${X.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${Z}`;return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${Y} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${Z}`}case"invalid_value":if(X.values.length===1)return`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${P1(X.values[0])}`;return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",W=F(X.origin);if(W)return`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${X.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${Y} ${X.maximum.toString()} ${W.unit??"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`;return`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${X.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${Y} ${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",W=F(X.origin);if(W)return`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${X.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${Y} ${X.minimum.toString()} ${W.unit}`;return`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${X.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${Y} ${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${Y.prefix}"`;if(Y.format==="ends_with")return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${Y.suffix}"`;if(Y.format==="includes")return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${Y.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`;if(Y.format==="regex")return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${Y.pattern}`;return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${A[Y.format]??X.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${X.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${G1(X.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${X.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${X.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}};var SM1=x(()=>{e1()});function $p(){return{localeError:nL0()}}var nL0=()=>{let $={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function F(X){return $[X]??null}let A={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"},J={nan:"NaN"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Ge\xE7ersiz de\u011Fer: beklenen instanceof ${X.expected}, al\u0131nan ${Z}`;return`Ge\xE7ersiz de\u011Fer: beklenen ${Y}, al\u0131nan ${Z}`}case"invalid_value":if(X.values.length===1)return`Ge\xE7ersiz de\u011Fer: beklenen ${P1(X.values[0])}`;return`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`\xC7ok b\xFCy\xFCk: beklenen ${X.origin??"de\u011Fer"} ${Y}${X.maximum.toString()} ${W.unit??"\xF6\u011Fe"}`;return`\xC7ok b\xFCy\xFCk: beklenen ${X.origin??"de\u011Fer"} ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`\xC7ok k\xFC\xE7\xFCk: beklenen ${X.origin} ${Y}${X.minimum.toString()} ${W.unit}`;return`\xC7ok k\xFC\xE7\xFCk: beklenen ${X.origin} ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Ge\xE7ersiz metin: "${Y.prefix}" ile ba\u015Flamal\u0131`;if(Y.format==="ends_with")return`Ge\xE7ersiz metin: "${Y.suffix}" ile bitmeli`;if(Y.format==="includes")return`Ge\xE7ersiz metin: "${Y.includes}" i\xE7ermeli`;if(Y.format==="regex")return`Ge\xE7ersiz metin: ${Y.pattern} desenine uymal\u0131`;return`Ge\xE7ersiz ${A[Y.format]??X.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${X.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${X.keys.length>1?"lar":""}: ${G1(X.keys,", ")}`;case"invalid_key":return`${X.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${X.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}};var _M1=x(()=>{e1()});function wq(){return{localeError:rL0()}}var rL0=()=>{let $={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function F(X){return $[X]??null}let A={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"},J={nan:"NaN",number:"\u0447\u0438\u0441\u043B\u043E",array:"\u043C\u0430\u0441\u0438\u0432"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F instanceof ${X.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${Z}`;return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${Y}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${Z}`}case"invalid_value":if(X.values.length===1)return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${P1(X.values[0])}`;return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${X.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${W.verb} ${Y}${X.maximum.toString()} ${W.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`;return`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${X.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${X.origin} ${W.verb} ${Y}${X.minimum.toString()} ${W.unit}`;return`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${X.origin} \u0431\u0443\u0434\u0435 ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${Y.prefix}"`;if(Y.format==="ends_with")return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${Y.suffix}"`;if(Y.format==="includes")return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${Y.includes}"`;if(Y.format==="regex")return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${Y.pattern}`;return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${A[Y.format]??X.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${X.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${X.keys.length>1?"\u0456":""}: ${G1(X.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${X.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${X.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}};var Fp=x(()=>{e1()});function Ap(){return wq()}var kM1=x(()=>{Fp()});function Jp(){return{localeError:aL0()}}var aL0=()=>{let $={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function F(X){return $[X]??null}let A={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"},J={nan:"NaN",number:"\u0646\u0645\u0628\u0631",array:"\u0622\u0631\u06D2",null:"\u0646\u0644"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: instanceof ${X.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${Z} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${Y} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${Z} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`}case"invalid_value":if(X.values.length===1)return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${P1(X.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;return`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${G1(X.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`\u0628\u06C1\u062A \u0628\u0691\u0627: ${X.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${Y}${X.maximum.toString()} ${W.unit??"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`;return`\u0628\u06C1\u062A \u0628\u0691\u0627: ${X.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${Y}${X.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${X.origin} \u06A9\u06D2 ${Y}${X.minimum.toString()} ${W.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`;return`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${X.origin} \u06A9\u0627 ${Y}${X.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${Y.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;if(Y.format==="ends_with")return`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${Y.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;if(Y.format==="includes")return`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${Y.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;if(Y.format==="regex")return`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${Y.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;return`\u063A\u0644\u0637 ${A[Y.format]??X.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${X.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${X.keys.length>1?"\u0632":""}: ${G1(X.keys,"\u060C ")}`;case"invalid_key":return`${X.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${X.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}};var bM1=x(()=>{e1()});function Xp(){return{localeError:tL0()}}var tL0=()=>{let $={string:{unit:"belgi",verb:"bo\u2018lishi kerak"},file:{unit:"bayt",verb:"bo\u2018lishi kerak"},array:{unit:"element",verb:"bo\u2018lishi kerak"},set:{unit:"element",verb:"bo\u2018lishi kerak"}};function F(X){return $[X]??null}let A={regex:"kirish",email:"elektron pochta manzili",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO sana va vaqti",date:"ISO sana",time:"ISO vaqt",duration:"ISO davomiylik",ipv4:"IPv4 manzil",ipv6:"IPv6 manzil",mac:"MAC manzil",cidrv4:"IPv4 diapazon",cidrv6:"IPv6 diapazon",base64:"base64 kodlangan satr",base64url:"base64url kodlangan satr",json_string:"JSON satr",e164:"E.164 raqam",jwt:"JWT",template_literal:"kirish"},J={nan:"NaN",number:"raqam",array:"massiv"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`Noto\u2018g\u2018ri kirish: kutilgan instanceof ${X.expected}, qabul qilingan ${Z}`;return`Noto\u2018g\u2018ri kirish: kutilgan ${Y}, qabul qilingan ${Z}`}case"invalid_value":if(X.values.length===1)return`Noto\u2018g\u2018ri kirish: kutilgan ${P1(X.values[0])}`;return`Noto\u2018g\u2018ri variant: quyidagilardan biri kutilgan ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`Juda katta: kutilgan ${X.origin??"qiymat"} ${Y}${X.maximum.toString()} ${W.unit} ${W.verb}`;return`Juda katta: kutilgan ${X.origin??"qiymat"} ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`Juda kichik: kutilgan ${X.origin} ${Y}${X.minimum.toString()} ${W.unit} ${W.verb}`;return`Juda kichik: kutilgan ${X.origin} ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Noto\u2018g\u2018ri satr: "${Y.prefix}" bilan boshlanishi kerak`;if(Y.format==="ends_with")return`Noto\u2018g\u2018ri satr: "${Y.suffix}" bilan tugashi kerak`;if(Y.format==="includes")return`Noto\u2018g\u2018ri satr: "${Y.includes}" ni o\u2018z ichiga olishi kerak`;if(Y.format==="regex")return`Noto\u2018g\u2018ri satr: ${Y.pattern} shabloniga mos kelishi kerak`;return`Noto\u2018g\u2018ri ${A[Y.format]??X.format}`}case"not_multiple_of":return`Noto\u2018g\u2018ri raqam: ${X.divisor} ning karralisi bo\u2018lishi kerak`;case"unrecognized_keys":return`Noma\u2019lum kalit${X.keys.length>1?"lar":""}: ${G1(X.keys,", ")}`;case"invalid_key":return`${X.origin} dagi kalit noto\u2018g\u2018ri`;case"invalid_union":return"Noto\u2018g\u2018ri kirish";case"invalid_element":return`${X.origin} da noto\u2018g\u2018ri qiymat`;default:return"Noto\u2018g\u2018ri kirish"}}};var xM1=x(()=>{e1()});function Yp(){return{localeError:sL0()}}var sL0=()=>{let $={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function F(X){return $[X]??null}let A={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"},J={nan:"NaN",number:"s\u1ED1",array:"m\u1EA3ng"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i instanceof ${X.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${Z}`;return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${Y}, nh\u1EADn \u0111\u01B0\u1EE3c ${Z}`}case"invalid_value":if(X.values.length===1)return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${P1(X.values[0])}`;return`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${X.origin??"gi\xE1 tr\u1ECB"} ${W.verb} ${Y}${X.maximum.toString()} ${W.unit??"ph\u1EA7n t\u1EED"}`;return`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${X.origin??"gi\xE1 tr\u1ECB"} ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${X.origin} ${W.verb} ${Y}${X.minimum.toString()} ${W.unit}`;return`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${X.origin} ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${Y.prefix}"`;if(Y.format==="ends_with")return`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${Y.suffix}"`;if(Y.format==="includes")return`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${Y.includes}"`;if(Y.format==="regex")return`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${Y.pattern}`;return`${A[Y.format]??X.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${X.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${G1(X.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${X.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${X.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}};var gM1=x(()=>{e1()});function Wp(){return{localeError:oL0()}}var oL0=()=>{let $={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function F(X){return $[X]??null}let A={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"},J={nan:"NaN",number:"\u6570\u5B57",array:"\u6570\u7EC4",null:"\u7A7A\u503C(null)"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B instanceof ${X.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${Z}`;return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${Y}\uFF0C\u5B9E\u9645\u63A5\u6536 ${Z}`}case"invalid_value":if(X.values.length===1)return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${P1(X.values[0])}`;return`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${X.origin??"\u503C"} ${Y}${X.maximum.toString()} ${W.unit??"\u4E2A\u5143\u7D20"}`;return`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${X.origin??"\u503C"} ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${X.origin} ${Y}${X.minimum.toString()} ${W.unit}`;return`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${X.origin} ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${Y.prefix}" \u5F00\u5934`;if(Y.format==="ends_with")return`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${Y.suffix}" \u7ED3\u5C3E`;if(Y.format==="includes")return`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${Y.includes}"`;if(Y.format==="regex")return`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${Y.pattern}`;return`\u65E0\u6548${A[Y.format]??X.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${X.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${G1(X.keys,", ")}`;case"invalid_key":return`${X.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${X.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}};var fM1=x(()=>{e1()});function Zp(){return{localeError:eL0()}}var eL0=()=>{let $={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function F(X){return $[X]??null}let A={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"},J={nan:"NaN"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA instanceof ${X.expected}\uFF0C\u4F46\u6536\u5230 ${Z}`;return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${Y}\uFF0C\u4F46\u6536\u5230 ${Z}`}case"invalid_value":if(X.values.length===1)return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${P1(X.values[0])}`;return`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${X.origin??"\u503C"} \u61C9\u70BA ${Y}${X.maximum.toString()} ${W.unit??"\u500B\u5143\u7D20"}`;return`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${X.origin??"\u503C"} \u61C9\u70BA ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${X.origin} \u61C9\u70BA ${Y}${X.minimum.toString()} ${W.unit}`;return`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${X.origin} \u61C9\u70BA ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${Y.prefix}" \u958B\u982D`;if(Y.format==="ends_with")return`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${Y.suffix}" \u7D50\u5C3E`;if(Y.format==="includes")return`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${Y.includes}"`;if(Y.format==="regex")return`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${Y.pattern}`;return`\u7121\u6548\u7684 ${A[Y.format]??X.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${X.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${X.keys.length>1?"\u5011":""}\uFF1A${G1(X.keys,"\u3001")}`;case"invalid_key":return`${X.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${X.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}};var vM1=x(()=>{e1()});function Dp(){return{localeError:$E0()}}var $E0=()=>{let $={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function F(X){return $[X]??null}let A={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"},J={nan:"NaN",number:"n\u1ECD\u0301mb\xE0",array:"akop\u1ECD"};return(X)=>{switch(X.code){case"invalid_type":{let Y=J[X.expected]??X.expected,W=R1(X.input),Z=J[W]??W;if(/^[A-Z]/.test(X.expected))return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi instanceof ${X.expected}, \xE0m\u1ECD\u0300 a r\xED ${Z}`;return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${Y}, \xE0m\u1ECD\u0300 a r\xED ${Z}`}case"invalid_value":if(X.values.length===1)return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${P1(X.values[0])}`;return`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${G1(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",W=F(X.origin);if(W)return`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${X.origin??"iye"} ${W.verb} ${Y}${X.maximum} ${W.unit}`;return`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${Y}${X.maximum}`}case"too_small":{let Y=X.inclusive?">=":">",W=F(X.origin);if(W)return`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${X.origin} ${W.verb} ${Y}${X.minimum} ${W.unit}`;return`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${Y}${X.minimum}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${Y.prefix}"`;if(Y.format==="ends_with")return`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${Y.suffix}"`;if(Y.format==="includes")return`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${Y.includes}"`;if(Y.format==="regex")return`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${Y.pattern}`;return`A\u1E63\xEC\u1E63e: ${A[Y.format]??X.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${X.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${G1(X.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${X.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${X.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}};var yM1=x(()=>{e1()});var OH={};l2(OH,{zhTW:()=>Zp,zhCN:()=>Wp,yo:()=>Dp,vi:()=>Yp,uz:()=>Xp,ur:()=>Jp,uk:()=>wq,ua:()=>Ap,tr:()=>$p,th:()=>el,ta:()=>ol,sv:()=>sl,sl:()=>tl,ru:()=>al,pt:()=>rl,ps:()=>il,pl:()=>nl,ota:()=>pl,no:()=>ll,nl:()=>cl,ms:()=>dl,mk:()=>ml,lt:()=>hl,ko:()=>ul,km:()=>Kq,kh:()=>yl,ka:()=>fl,ja:()=>gl,it:()=>xl,is:()=>bl,id:()=>kl,hy:()=>_l,hu:()=>Sl,he:()=>Ol,frCA:()=>jl,fr:()=>Tl,fi:()=>Il,fa:()=>Rl,es:()=>Pl,eo:()=>Ml,en:()=>Qq,de:()=>Nl,da:()=>Vl,cs:()=>El,ca:()=>Ll,bg:()=>ql,be:()=>wl,az:()=>Bl,ar:()=>Kl});var Gp=x(()=>{cC1();lC1();iC1();nC1();rC1();aC1();tC1();sC1();Cl();oC1();eC1();$M1();FM1();AM1();JM1();XM1();YM1();ZM1();DM1();GM1();zM1();HM1();UM1();QM1();vl();KM1();wM1();qM1();LM1();EM1();VM1();NM1();CM1();MM1();PM1();IM1();TM1();jM1();OM1();SM1();_M1();kM1();Fp();bM1();xM1();gM1();fM1();vM1();yM1()});class zp{constructor(){this._map=new WeakMap,this._idmap=new Map}add($,...F){let A=F[0];if(this._map.set($,A),A&&typeof A==="object"&&"id"in A)this._idmap.set(A.id,$);return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove($){let F=this._map.get($);if(F&&typeof F==="object"&&"id"in F)this._idmap.delete(F.id);return this._map.delete($),this}get($){let F=$._zod.parent;if(F){let A={...this.get(F)??{}};delete A.id;let J={...A,...this._map.get($)};return Object.keys(J).length?J:void 0}return this._map.get($)}has($){return this._map.has($)}}function qq(){return new zp}var uM1,dR,cR,I9;var Lq=x(()=>{dR=Symbol("ZodOutput"),cR=Symbol("ZodInput");(uM1=globalThis).__zod_globalRegistry??(uM1.__zod_globalRegistry=qq());I9=globalThis.__zod_globalRegistry});function Hp($,F){return new $({type:"string",...O1(F)})}function Up($,F){return new $({type:"string",coerce:!0,...O1(F)})}function lR($,F){return new $({type:"string",format:"email",check:"string_format",abort:!1,...O1(F)})}function Eq($,F){return new $({type:"string",format:"guid",check:"string_format",abort:!1,...O1(F)})}function pR($,F){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,...O1(F)})}function iR($,F){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...O1(F)})}function nR($,F){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...O1(F)})}function rR($,F){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...O1(F)})}function Vq($,F){return new $({type:"string",format:"url",check:"string_format",abort:!1,...O1(F)})}function aR($,F){return new $({type:"string",format:"emoji",check:"string_format",abort:!1,...O1(F)})}function tR($,F){return new $({type:"string",format:"nanoid",check:"string_format",abort:!1,...O1(F)})}function sR($,F){return new $({type:"string",format:"cuid",check:"string_format",abort:!1,...O1(F)})}function oR($,F){return new $({type:"string",format:"cuid2",check:"string_format",abort:!1,...O1(F)})}function eR($,F){return new $({type:"string",format:"ulid",check:"string_format",abort:!1,...O1(F)})}function $I($,F){return new $({type:"string",format:"xid",check:"string_format",abort:!1,...O1(F)})}function FI($,F){return new $({type:"string",format:"ksuid",check:"string_format",abort:!1,...O1(F)})}function AI($,F){return new $({type:"string",format:"ipv4",check:"string_format",abort:!1,...O1(F)})}function JI($,F){return new $({type:"string",format:"ipv6",check:"string_format",abort:!1,...O1(F)})}function Qp($,F){return new $({type:"string",format:"mac",check:"string_format",abort:!1,...O1(F)})}function XI($,F){return new $({type:"string",format:"cidrv4",check:"string_format",abort:!1,...O1(F)})}function YI($,F){return new $({type:"string",format:"cidrv6",check:"string_format",abort:!1,...O1(F)})}function WI($,F){return new $({type:"string",format:"base64",check:"string_format",abort:!1,...O1(F)})}function ZI($,F){return new $({type:"string",format:"base64url",check:"string_format",abort:!1,...O1(F)})}function DI($,F){return new $({type:"string",format:"e164",check:"string_format",abort:!1,...O1(F)})}function GI($,F){return new $({type:"string",format:"jwt",check:"string_format",abort:!1,...O1(F)})}function Kp($,F){return new $({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...O1(F)})}function Bp($,F){return new $({type:"string",format:"date",check:"string_format",...O1(F)})}function wp($,F){return new $({type:"string",format:"time",check:"string_format",precision:null,...O1(F)})}function qp($,F){return new $({type:"string",format:"duration",check:"string_format",...O1(F)})}function Lp($,F){return new $({type:"number",checks:[],...O1(F)})}function Ep($,F){return new $({type:"number",coerce:!0,checks:[],...O1(F)})}function Vp($,F){return new $({type:"number",check:"number_format",abort:!1,format:"safeint",...O1(F)})}function Np($,F){return new $({type:"number",check:"number_format",abort:!1,format:"float32",...O1(F)})}function Cp($,F){return new $({type:"number",check:"number_format",abort:!1,format:"float64",...O1(F)})}function Mp($,F){return new $({type:"number",check:"number_format",abort:!1,format:"int32",...O1(F)})}function Pp($,F){return new $({type:"number",check:"number_format",abort:!1,format:"uint32",...O1(F)})}function Rp($,F){return new $({type:"boolean",...O1(F)})}function Ip($,F){return new $({type:"boolean",coerce:!0,...O1(F)})}function Tp($,F){return new $({type:"bigint",...O1(F)})}function jp($,F){return new $({type:"bigint",coerce:!0,...O1(F)})}function Op($,F){return new $({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...O1(F)})}function Sp($,F){return new $({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...O1(F)})}function _p($,F){return new $({type:"symbol",...O1(F)})}function kp($,F){return new $({type:"undefined",...O1(F)})}function bp($,F){return new $({type:"null",...O1(F)})}function xp($){return new $({type:"any"})}function gp($){return new $({type:"unknown"})}function fp($,F){return new $({type:"never",...O1(F)})}function vp($,F){return new $({type:"void",...O1(F)})}function yp($,F){return new $({type:"date",...O1(F)})}function up($,F){return new $({type:"date",coerce:!0,...O1(F)})}function hp($,F){return new $({type:"nan",...O1(F)})}function O$($,F){return new OR({check:"less_than",...O1(F),value:$,inclusive:!1})}function m3($,F){return new OR({check:"less_than",...O1(F),value:$,inclusive:!0})}function S$($,F){return new SR({check:"greater_than",...O1(F),value:$,inclusive:!1})}function O8($,F){return new SR({check:"greater_than",...O1(F),value:$,inclusive:!0})}function Nq($){return S$(0,$)}function Cq($){return O$(0,$)}function Mq($){return m3(0,$)}function Pq($){return O8(0,$)}function RJ($,F){return new vd({check:"multiple_of",...O1(F),value:$})}function IJ($,F){return new hd({check:"max_size",...O1(F),maximum:$})}function _$($,F){return new md({check:"min_size",...O1(F),minimum:$})}function NY($,F){return new dd({check:"size_equals",...O1(F),size:$})}function CY($,F){return new cd({check:"max_length",...O1(F),maximum:$})}function JA($,F){return new ld({check:"min_length",...O1(F),minimum:$})}function MY($,F){return new pd({check:"length_equals",...O1(F),length:$})}function aZ($,F){return new id({check:"string_format",format:"regex",...O1(F),pattern:$})}function tZ($){return new nd({check:"string_format",format:"lowercase",...O1($)})}function sZ($){return new rd({check:"string_format",format:"uppercase",...O1($)})}function oZ($,F){return new ad({check:"string_format",format:"includes",...O1(F),includes:$})}function eZ($,F){return new td({check:"string_format",format:"starts_with",...O1(F),prefix:$})}function $D($,F){return new sd({check:"string_format",format:"ends_with",...O1(F),suffix:$})}function Rq($,F,A){return new od({check:"property",property:$,schema:F,...O1(A)})}function FD($,F){return new ed({check:"mime_type",mime:$,...O1(F)})}function k5($){return new $c({check:"overwrite",tx:$})}function AD($){return k5((F)=>F.normalize($))}function JD(){return k5(($)=>$.trim())}function XD(){return k5(($)=>$.toLowerCase())}function YD(){return k5(($)=>$.toUpperCase())}function WD(){return k5(($)=>om($))}function mp($,F,A){return new $({type:"array",element:F,...O1(A)})}function AE0($,F,A){return new $({type:"union",options:F,...O1(A)})}function JE0($,F,A){return new $({type:"union",options:F,inclusive:!1,...O1(A)})}function XE0($,F,A,J){return new $({type:"union",options:A,discriminator:F,...O1(J)})}function YE0($,F,A){return new $({type:"intersection",left:F,right:A})}function WE0($,F,A,J){let X=A instanceof L0;return new $({type:"tuple",items:F,rest:X?A:null,...O1(X?J:A)})}function ZE0($,F,A,J){return new $({type:"record",keyType:F,valueType:A,...O1(J)})}function DE0($,F,A,J){return new $({type:"map",keyType:F,valueType:A,...O1(J)})}function GE0($,F,A){return new $({type:"set",valueType:F,...O1(A)})}function zE0($,F,A){let J=Array.isArray(F)?Object.fromEntries(F.map((X)=>[X,X])):F;return new $({type:"enum",entries:J,...O1(A)})}function HE0($,F,A){return new $({type:"enum",entries:F,...O1(A)})}function UE0($,F,A){return new $({type:"literal",values:Array.isArray(F)?F:[F],...O1(A)})}function dp($,F){return new $({type:"file",...O1(F)})}function QE0($,F){return new $({type:"transform",transform:F})}function KE0($,F){return new $({type:"optional",innerType:F})}function BE0($,F){return new $({type:"nullable",innerType:F})}function wE0($,F,A){return new $({type:"default",innerType:F,get defaultValue(){return typeof A==="function"?A():$d(A)}})}function qE0($,F,A){return new $({type:"nonoptional",innerType:F,...O1(A)})}function LE0($,F){return new $({type:"success",innerType:F})}function EE0($,F,A){return new $({type:"catch",innerType:F,catchValue:typeof A==="function"?A:()=>A})}function VE0($,F,A){return new $({type:"pipe",in:F,out:A})}function NE0($,F){return new $({type:"readonly",innerType:F})}function CE0($,F,A){return new $({type:"template_literal",parts:F,...O1(A)})}function ME0($,F){return new $({type:"lazy",getter:F})}function PE0($,F){return new $({type:"promise",innerType:F})}function cp($,F,A){let J=O1(A);return J.abort??(J.abort=!0),new $({type:"custom",check:"custom",fn:F,...J})}function lp($,F,A){return new $({type:"custom",check:"custom",fn:F,...O1(A)})}function pp($){let F=hM1((A)=>{return A.addIssue=(J)=>{if(typeof J==="string")A.issues.push(VH(J,A.value,F._zod.def));else{let X=J;if(X.fatal)X.continue=!1;X.code??(X.code="custom"),X.input??(X.input=A.value),X.inst??(X.inst=F),X.continue??(X.continue=!F._zod.def.abort),A.issues.push(VH(X))}},$(A.value,A)});return F}function hM1($,F){let A=new B2({check:"custom",...O1(F)});return A._zod.check=$,A}function ip($){let F=new B2({check:"describe"});return F._zod.onattach=[(A)=>{let J=I9.get(A)??{};I9.add(A,{...J,description:$})}],F._zod.check=()=>{},F}function np($){let F=new B2({check:"meta"});return F._zod.onattach=[(A)=>{let J=I9.get(A)??{};I9.add(A,{...J,...$})}],F._zod.check=()=>{},F}function rp($,F){let A=O1(F),J=A.truthy??["true","1","yes","on","y","enabled"],X=A.falsy??["false","0","no","off","n","disabled"];if(A.case!=="sensitive")J=J.map((Q)=>typeof Q==="string"?Q.toLowerCase():Q),X=X.map((Q)=>typeof Q==="string"?Q.toLowerCase():Q);let Y=new Set(J),W=new Set(X),Z=$.Codec??Uq,D=$.Boolean??zq,z=new($.String??rZ)({type:"string",error:A.error}),H=new D({type:"boolean",error:A.error}),U=new Z({type:"pipe",in:z,out:H,transform:(Q,B)=>{let q=Q;if(A.case!=="sensitive")q=q.toLowerCase();if(Y.has(q))return!0;else if(W.has(q))return!1;else return B.issues.push({code:"invalid_value",expected:"stringbool",values:[...Y,...W],input:B.value,inst:U,continue:!1}),{}},reverseTransform:(Q,B)=>{if(Q===!0)return J[0]||"true";else return X[0]||"false"},error:A.error});return U}function SH($,F,A,J={}){let X=O1(J),Y={...O1(J),check:"string_format",type:"string",format:F,fn:typeof A==="function"?A:(Z)=>A.test(Z),...X};if(A instanceof RegExp)Y.pattern=A;return new $(Y)}var zI;var mM1=x(()=>{_R();Lq();Ql();e1();zI={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6}});function PY($){let F=$?.target??"draft-2020-12";if(F==="draft-4")F="draft-04";if(F==="draft-7")F="draft-07";return{processors:$.processors??{},metadataRegistry:$?.metadata??I9,target:F,unrepresentable:$?.unrepresentable??"throw",override:$?.override??(()=>{}),io:$?.io??"output",counter:0,seen:new Map,cycles:$?.cycles??"ref",reused:$?.reused??"inline",external:$?.external??void 0}}function f6($,F,A={path:[],schemaPath:[]}){var J;let X=$._zod.def,Y=F.seen.get($);if(Y){if(Y.count++,A.schemaPath.includes($))Y.cycle=A.path;return Y.schema}let W={schema:{},count:1,cycle:void 0,path:A.path};F.seen.set($,W);let Z=$._zod.toJSONSchema?.();if(Z)W.schema=Z;else{let z={...A,schemaPath:[...A.schemaPath,$],path:A.path};if($._zod.processJSONSchema)$._zod.processJSONSchema(F,W.schema,z);else{let U=W.schema,Q=F.processors[X.type];if(!Q)throw Error(`[toJSONSchema]: Non-representable type encountered: ${X.type}`);Q($,F,U,z)}let H=$._zod.parent;if(H){if(!W.ref)W.ref=H;f6(H,F,z),F.seen.get(H).isParent=!0}}let D=F.metadataRegistry.get($);if(D)Object.assign(W.schema,D);if(F.io==="input"&&Z3($))delete W.schema.examples,delete W.schema.default;if(F.io==="input"&&W.schema._prefault)(J=W.schema).default??(J.default=W.schema._prefault);return delete W.schema._prefault,F.seen.get($).schema}function RY($,F){let A=$.seen.get(F);if(!A)throw Error("Unprocessed schema. This is a bug in Zod.");let J=new Map;for(let W of $.seen.entries()){let Z=$.metadataRegistry.get(W[0])?.id;if(Z){let D=J.get(Z);if(D&&D!==W[0])throw Error(`Duplicate schema id "${Z}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);J.set(Z,W[0])}}let X=(W)=>{let Z=$.target==="draft-2020-12"?"$defs":"definitions";if($.external){let H=$.external.registry.get(W[0])?.id,U=$.external.uri??((B)=>B);if(H)return{ref:U(H)};let Q=W[1].defId??W[1].schema.id??`schema${$.counter++}`;return W[1].defId=Q,{defId:Q,ref:`${U("__shared")}#/${Z}/${Q}`}}if(W[1]===A)return{ref:"#"};let G=`${"#"}/${Z}/`,z=W[1].schema.id??`__schema${$.counter++}`;return{defId:z,ref:G+z}},Y=(W)=>{if(W[1].schema.$ref)return;let Z=W[1],{ref:D,defId:G}=X(W);if(Z.def={...Z.schema},G)Z.defId=G;let z=Z.schema;for(let H in z)delete z[H];z.$ref=D};if($.cycles==="throw")for(let W of $.seen.entries()){let Z=W[1];if(Z.cycle)throw Error(`Cycle detected: #/${Z.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let W of $.seen.entries()){let Z=W[1];if(F===W[0]){Y(W);continue}if($.external){let G=$.external.registry.get(W[0])?.id;if(F!==W[0]&&G){Y(W);continue}}if($.metadataRegistry.get(W[0])?.id){Y(W);continue}if(Z.cycle){Y(W);continue}if(Z.count>1){if($.reused==="ref"){Y(W);continue}}}}function IY($,F){let A=$.seen.get(F);if(!A)throw Error("Unprocessed schema. This is a bug in Zod.");let J=(W)=>{let Z=$.seen.get(W);if(Z.ref===null)return;let D=Z.def??Z.schema,G={...D},z=Z.ref;if(Z.ref=null,z){J(z);let U=$.seen.get(z),Q=U.schema;if(Q.$ref&&($.target==="draft-07"||$.target==="draft-04"||$.target==="openapi-3.0"))D.allOf=D.allOf??[],D.allOf.push(Q);else Object.assign(D,Q);if(Object.assign(D,G),W._zod.parent===z)for(let q in D){if(q==="$ref"||q==="allOf")continue;if(!(q in G))delete D[q]}if(Q.$ref)for(let q in D){if(q==="$ref"||q==="allOf")continue;if(q in U.def&&JSON.stringify(D[q])===JSON.stringify(U.def[q]))delete D[q]}}let H=W._zod.parent;if(H&&H!==z){J(H);let U=$.seen.get(H);if(U?.schema.$ref){if(D.$ref=U.schema.$ref,U.def)for(let Q in D){if(Q==="$ref"||Q==="allOf")continue;if(Q in U.def&&JSON.stringify(D[Q])===JSON.stringify(U.def[Q]))delete D[Q]}}}$.override({zodSchema:W,jsonSchema:D,path:Z.path??[]})};for(let W of[...$.seen.entries()].reverse())J(W[0]);let X={};if($.target==="draft-2020-12")X.$schema="https://json-schema.org/draft/2020-12/schema";else if($.target==="draft-07")X.$schema="http://json-schema.org/draft-07/schema#";else if($.target==="draft-04")X.$schema="http://json-schema.org/draft-04/schema#";else if($.target==="openapi-3.0");if($.external?.uri){let W=$.external.registry.get(F)?.id;if(!W)throw Error("Schema is missing an `id` property");X.$id=$.external.uri(W)}Object.assign(X,A.def??A.schema);let Y=$.external?.defs??{};for(let W of $.seen.entries()){let Z=W[1];if(Z.def&&Z.defId)Y[Z.defId]=Z.def}if($.external);else if(Object.keys(Y).length>0)if($.target==="draft-2020-12")X.$defs=Y;else X.definitions=Y;try{let W=JSON.parse(JSON.stringify(X));return Object.defineProperty(W,"~standard",{value:{...F["~standard"],jsonSchema:{input:_H(F,"input",$.processors),output:_H(F,"output",$.processors)}},enumerable:!1,writable:!1}),W}catch(W){throw Error("Error converting schema to JSON.")}}function Z3($,F){let A=F??{seen:new Set};if(A.seen.has($))return!1;A.seen.add($);let J=$._zod.def;if(J.type==="transform")return!0;if(J.type==="array")return Z3(J.element,A);if(J.type==="set")return Z3(J.valueType,A);if(J.type==="lazy")return Z3(J.getter(),A);if(J.type==="promise"||J.type==="optional"||J.type==="nonoptional"||J.type==="nullable"||J.type==="readonly"||J.type==="default"||J.type==="prefault")return Z3(J.innerType,A);if(J.type==="intersection")return Z3(J.left,A)||Z3(J.right,A);if(J.type==="record"||J.type==="map")return Z3(J.keyType,A)||Z3(J.valueType,A);if(J.type==="pipe")return Z3(J.in,A)||Z3(J.out,A);if(J.type==="object"){for(let X in J.shape)if(Z3(J.shape[X],A))return!0;return!1}if(J.type==="union"){for(let X of J.options)if(Z3(X,A))return!0;return!1}if(J.type==="tuple"){for(let X of J.items)if(Z3(X,A))return!0;if(J.rest&&Z3(J.rest,A))return!0;return!1}return!1}var ap=($,F={})=>(A)=>{let J=PY({...A,processors:F});return f6($,J),RY(J,$),IY(J,$)},_H=($,F,A={})=>(J)=>{let{libraryOptions:X,target:Y}=J??{},W=PY({...X??{},target:Y,io:F,processors:A});return f6($,W),RY(W,$),IY(W,$)};var Iq=x(()=>{Lq()});function Tq($,F){if("_idmap"in $){let J=$,X=PY({...F,processors:HI}),Y={};for(let D of J._idmap.entries()){let[G,z]=D;f6(z,X)}let W={},Z={registry:J,uri:F?.uri,defs:Y};X.external=Z;for(let D of J._idmap.entries()){let[G,z]=D;RY(X,z),W[G]=IY(X,z)}if(Object.keys(Y).length>0){let D=X.target==="draft-2020-12"?"$defs":"definitions";W.__shared={[D]:Y}}return{schemas:W}}let A=PY({...F,processors:HI});return f6($,A),RY(A,$),IY(A,$)}var RE0,tp=($,F,A,J)=>{let X=A;X.type="string";let{minimum:Y,maximum:W,format:Z,patterns:D,contentEncoding:G}=$._zod.bag;if(typeof Y==="number")X.minLength=Y;if(typeof W==="number")X.maxLength=W;if(Z){if(X.format=RE0[Z]??Z,X.format==="")delete X.format;if(Z==="time")delete X.format}if(G)X.contentEncoding=G;if(D&&D.size>0){let z=[...D];if(z.length===1)X.pattern=z[0].source;else if(z.length>1)X.allOf=[...z.map((H)=>({...F.target==="draft-07"||F.target==="draft-04"||F.target==="openapi-3.0"?{type:"string"}:{},pattern:H.source}))]}},sp=($,F,A,J)=>{let X=A,{minimum:Y,maximum:W,format:Z,multipleOf:D,exclusiveMaximum:G,exclusiveMinimum:z}=$._zod.bag;if(typeof Z==="string"&&Z.includes("int"))X.type="integer";else X.type="number";if(typeof z==="number")if(F.target==="draft-04"||F.target==="openapi-3.0")X.minimum=z,X.exclusiveMinimum=!0;else X.exclusiveMinimum=z;if(typeof Y==="number"){if(X.minimum=Y,typeof z==="number"&&F.target!=="draft-04")if(z>=Y)delete X.minimum;else delete X.exclusiveMinimum}if(typeof G==="number")if(F.target==="draft-04"||F.target==="openapi-3.0")X.maximum=G,X.exclusiveMaximum=!0;else X.exclusiveMaximum=G;if(typeof W==="number"){if(X.maximum=W,typeof G==="number"&&F.target!=="draft-04")if(G<=W)delete X.maximum;else delete X.exclusiveMaximum}if(typeof D==="number")X.multipleOf=D},op=($,F,A,J)=>{A.type="boolean"},ep=($,F,A,J)=>{if(F.unrepresentable==="throw")throw Error("BigInt cannot be represented in JSON Schema")},$i=($,F,A,J)=>{if(F.unrepresentable==="throw")throw Error("Symbols cannot be represented in JSON Schema")},Fi=($,F,A,J)=>{if(F.target==="openapi-3.0")A.type="string",A.nullable=!0,A.enum=[null];else A.type="null"},Ai=($,F,A,J)=>{if(F.unrepresentable==="throw")throw Error("Undefined cannot be represented in JSON Schema")},Ji=($,F,A,J)=>{if(F.unrepresentable==="throw")throw Error("Void cannot be represented in JSON Schema")},Xi=($,F,A,J)=>{A.not={}},Yi=($,F,A,J)=>{},Wi=($,F,A,J)=>{},Zi=($,F,A,J)=>{if(F.unrepresentable==="throw")throw Error("Date cannot be represented in JSON Schema")},Di=($,F,A,J)=>{let X=$._zod.def,Y=Fq(X.entries);if(Y.every((W)=>typeof W==="number"))A.type="number";if(Y.every((W)=>typeof W==="string"))A.type="string";A.enum=Y},Gi=($,F,A,J)=>{let X=$._zod.def,Y=[];for(let W of X.values)if(W===void 0){if(F.unrepresentable==="throw")throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof W==="bigint")if(F.unrepresentable==="throw")throw Error("BigInt literals cannot be represented in JSON Schema");else Y.push(Number(W));else Y.push(W);if(Y.length===0);else if(Y.length===1){let W=Y[0];if(A.type=W===null?"null":typeof W,F.target==="draft-04"||F.target==="openapi-3.0")A.enum=[W];else A.const=W}else{if(Y.every((W)=>typeof W==="number"))A.type="number";if(Y.every((W)=>typeof W==="string"))A.type="string";if(Y.every((W)=>typeof W==="boolean"))A.type="boolean";if(Y.every((W)=>W===null))A.type="null";A.enum=Y}},zi=($,F,A,J)=>{if(F.unrepresentable==="throw")throw Error("NaN cannot be represented in JSON Schema")},Hi=($,F,A,J)=>{let X=A,Y=$._zod.pattern;if(!Y)throw Error("Pattern not found in template literal");X.type="string",X.pattern=Y.source},Ui=($,F,A,J)=>{let X=A,Y={type:"string",format:"binary",contentEncoding:"binary"},{minimum:W,maximum:Z,mime:D}=$._zod.bag;if(W!==void 0)Y.minLength=W;if(Z!==void 0)Y.maxLength=Z;if(D)if(D.length===1)Y.contentMediaType=D[0],Object.assign(X,Y);else Object.assign(X,Y),X.anyOf=D.map((G)=>({contentMediaType:G}));else Object.assign(X,Y)},Qi=($,F,A,J)=>{A.type="boolean"},Ki=($,F,A,J)=>{if(F.unrepresentable==="throw")throw Error("Custom types cannot be represented in JSON Schema")},Bi=($,F,A,J)=>{if(F.unrepresentable==="throw")throw Error("Function types cannot be represented in JSON Schema")},wi=($,F,A,J)=>{if(F.unrepresentable==="throw")throw Error("Transforms cannot be represented in JSON Schema")},qi=($,F,A,J)=>{if(F.unrepresentable==="throw")throw Error("Map cannot be represented in JSON Schema")},Li=($,F,A,J)=>{if(F.unrepresentable==="throw")throw Error("Set cannot be represented in JSON Schema")},Ei=($,F,A,J)=>{let X=A,Y=$._zod.def,{minimum:W,maximum:Z}=$._zod.bag;if(typeof W==="number")X.minItems=W;if(typeof Z==="number")X.maxItems=Z;X.type="array",X.items=f6(Y.element,F,{...J,path:[...J.path,"items"]})},Vi=($,F,A,J)=>{let X=A,Y=$._zod.def;X.type="object",X.properties={};let W=Y.shape;for(let G in W)X.properties[G]=f6(W[G],F,{...J,path:[...J.path,"properties",G]});let Z=new Set(Object.keys(W)),D=new Set([...Z].filter((G)=>{let z=Y.shape[G]._zod;if(F.io==="input")return z.optin===void 0;else return z.optout===void 0}));if(D.size>0)X.required=Array.from(D);if(Y.catchall?._zod.def.type==="never")X.additionalProperties=!1;else if(!Y.catchall){if(F.io==="output")X.additionalProperties=!1}else if(Y.catchall)X.additionalProperties=f6(Y.catchall,F,{...J,path:[...J.path,"additionalProperties"]})},UI=($,F,A,J)=>{let X=$._zod.def,Y=X.inclusive===!1,W=X.options.map((Z,D)=>f6(Z,F,{...J,path:[...J.path,Y?"oneOf":"anyOf",D]}));if(Y)A.oneOf=W;else A.anyOf=W},Ni=($,F,A,J)=>{let X=$._zod.def,Y=f6(X.left,F,{...J,path:[...J.path,"allOf",0]}),W=f6(X.right,F,{...J,path:[...J.path,"allOf",1]}),Z=(G)=>("allOf"in G)&&Object.keys(G).length===1,D=[...Z(Y)?Y.allOf:[Y],...Z(W)?W.allOf:[W]];A.allOf=D},Ci=($,F,A,J)=>{let X=A,Y=$._zod.def;X.type="array";let W=F.target==="draft-2020-12"?"prefixItems":"items",Z=F.target==="draft-2020-12"?"items":F.target==="openapi-3.0"?"items":"additionalItems",D=Y.items.map((U,Q)=>f6(U,F,{...J,path:[...J.path,W,Q]})),G=Y.rest?f6(Y.rest,F,{...J,path:[...J.path,Z,...F.target==="openapi-3.0"?[Y.items.length]:[]]}):null;if(F.target==="draft-2020-12"){if(X.prefixItems=D,G)X.items=G}else if(F.target==="openapi-3.0"){if(X.items={anyOf:D},G)X.items.anyOf.push(G);if(X.minItems=D.length,!G)X.maxItems=D.length}else if(X.items=D,G)X.additionalItems=G;let{minimum:z,maximum:H}=$._zod.bag;if(typeof z==="number")X.minItems=z;if(typeof H==="number")X.maxItems=H},Mi=($,F,A,J)=>{let X=A,Y=$._zod.def;X.type="object";let W=Y.keyType,D=W._zod.bag?.patterns;if(Y.mode==="loose"&&D&&D.size>0){let z=f6(Y.valueType,F,{...J,path:[...J.path,"patternProperties","*"]});X.patternProperties={};for(let H of D)X.patternProperties[H.source]=z}else{if(F.target==="draft-07"||F.target==="draft-2020-12")X.propertyNames=f6(Y.keyType,F,{...J,path:[...J.path,"propertyNames"]});X.additionalProperties=f6(Y.valueType,F,{...J,path:[...J.path,"additionalProperties"]})}let G=W._zod.values;if(G){let z=[...G].filter((H)=>typeof H==="string"||typeof H==="number");if(z.length>0)X.required=z}},Pi=($,F,A,J)=>{let X=$._zod.def,Y=f6(X.innerType,F,J),W=F.seen.get($);if(F.target==="openapi-3.0")W.ref=X.innerType,A.nullable=!0;else A.anyOf=[Y,{type:"null"}]},Ri=($,F,A,J)=>{let X=$._zod.def;f6(X.innerType,F,J);let Y=F.seen.get($);Y.ref=X.innerType},Ii=($,F,A,J)=>{let X=$._zod.def;f6(X.innerType,F,J);let Y=F.seen.get($);Y.ref=X.innerType,A.default=JSON.parse(JSON.stringify(X.defaultValue))},Ti=($,F,A,J)=>{let X=$._zod.def;f6(X.innerType,F,J);let Y=F.seen.get($);if(Y.ref=X.innerType,F.io==="input")A._prefault=JSON.parse(JSON.stringify(X.defaultValue))},ji=($,F,A,J)=>{let X=$._zod.def;f6(X.innerType,F,J);let Y=F.seen.get($);Y.ref=X.innerType;let W;try{W=X.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}A.default=W},Oi=($,F,A,J)=>{let X=$._zod.def,Y=F.io==="input"?X.in._zod.def.type==="transform"?X.out:X.in:X.out;f6(Y,F,J);let W=F.seen.get($);W.ref=Y},Si=($,F,A,J)=>{let X=$._zod.def;f6(X.innerType,F,J);let Y=F.seen.get($);Y.ref=X.innerType,A.readOnly=!0},_i=($,F,A,J)=>{let X=$._zod.def;f6(X.innerType,F,J);let Y=F.seen.get($);Y.ref=X.innerType},QI=($,F,A,J)=>{let X=$._zod.def;f6(X.innerType,F,J);let Y=F.seen.get($);Y.ref=X.innerType},ki=($,F,A,J)=>{let X=$._zod.innerType;f6(X,F,J);let Y=F.seen.get($);Y.ref=X},HI;var jq=x(()=>{Iq();e1();RE0={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},HI={string:tp,number:sp,boolean:op,bigint:ep,symbol:$i,null:Fi,undefined:Ai,void:Ji,never:Xi,any:Yi,unknown:Wi,date:Zi,enum:Di,literal:Gi,nan:zi,template_literal:Hi,file:Ui,success:Qi,custom:Ki,function:Bi,transform:wi,map:qi,set:Li,array:Ei,object:Vi,union:UI,intersection:Ni,tuple:Ci,record:Mi,nullable:Pi,nonoptional:Ri,default:Ii,prefault:Ti,catch:ji,pipe:Oi,readonly:Si,promise:_i,optional:QI,lazy:ki}});class bi{get metadataRegistry(){return this.ctx.metadataRegistry}get target(){return this.ctx.target}get unrepresentable(){return this.ctx.unrepresentable}get override(){return this.ctx.override}get io(){return this.ctx.io}get counter(){return this.ctx.counter}set counter($){this.ctx.counter=$}get seen(){return this.ctx.seen}constructor($){let F=$?.target??"draft-2020-12";if(F==="draft-4")F="draft-04";if(F==="draft-7")F="draft-07";this.ctx=PY({processors:HI,target:F,...$?.metadata&&{metadata:$.metadata},...$?.unrepresentable&&{unrepresentable:$.unrepresentable},...$?.override&&{override:$.override},...$?.io&&{io:$.io}})}process($,F={path:[],schemaPath:[]}){return f6($,this.ctx,F)}emit($,F){if(F){if(F.cycles)this.ctx.cycles=F.cycles;if(F.reused)this.ctx.reused=F.reused;if(F.external)this.ctx.external=F.external}RY(this.ctx,$);let A=IY(this.ctx,$),{"~standard":J,...X}=A;return X}}var dM1=x(()=>{jq();Iq()});var cM1={};var lM1=()=>{};var XA={};l2(XA,{version:()=>Fc,util:()=>I1,treeifyError:()=>BR,toJSONSchema:()=>Tq,toDotPath:()=>VC1,safeParseAsync:()=>Zd,safeParse:()=>Wd,safeEncodeAsync:()=>kq0,safeEncode:()=>Sq0,safeDecodeAsync:()=>bq0,safeDecode:()=>_q0,registry:()=>qq,regexes:()=>x7,process:()=>f6,prettifyError:()=>wR,parseAsync:()=>LR,parse:()=>qR,meta:()=>np,locales:()=>OH,isValidJWT:()=>uC1,isValidBase64URL:()=>yC1,isValidBase64:()=>Pc,initializeContext:()=>PY,globalRegistry:()=>I9,globalConfig:()=>ew,formatError:()=>CH,flattenError:()=>NH,finalize:()=>IY,extractDefs:()=>RY,encodeAsync:()=>jq0,encode:()=>Iq0,describe:()=>ip,decodeAsync:()=>Oq0,decode:()=>Tq0,createToJSONSchemaMethod:()=>ap,createStandardJSONSchemaMethod:()=>_H,config:()=>M4,clone:()=>j8,_xor:()=>JE0,_xid:()=>$I,_void:()=>vp,_uuidv7:()=>rR,_uuidv6:()=>nR,_uuidv4:()=>iR,_uuid:()=>pR,_url:()=>Vq,_uppercase:()=>sZ,_unknown:()=>gp,_union:()=>AE0,_undefined:()=>kp,_ulid:()=>eR,_uint64:()=>Sp,_uint32:()=>Pp,_tuple:()=>WE0,_trim:()=>JD,_transform:()=>QE0,_toUpperCase:()=>YD,_toLowerCase:()=>XD,_templateLiteral:()=>CE0,_symbol:()=>_p,_superRefine:()=>pp,_success:()=>LE0,_stringbool:()=>rp,_stringFormat:()=>SH,_string:()=>Hp,_startsWith:()=>eZ,_slugify:()=>WD,_size:()=>NY,_set:()=>GE0,_safeParseAsync:()=>IH,_safeParse:()=>RH,_safeEncodeAsync:()=>RR,_safeEncode:()=>MR,_safeDecodeAsync:()=>IR,_safeDecode:()=>PR,_regex:()=>aZ,_refine:()=>lp,_record:()=>ZE0,_readonly:()=>NE0,_property:()=>Rq,_promise:()=>PE0,_positive:()=>Nq,_pipe:()=>VE0,_parseAsync:()=>PH,_parse:()=>MH,_overwrite:()=>k5,_optional:()=>KE0,_number:()=>Lp,_nullable:()=>BE0,_null:()=>bp,_normalize:()=>AD,_nonpositive:()=>Mq,_nonoptional:()=>qE0,_nonnegative:()=>Pq,_never:()=>fp,_negative:()=>Cq,_nativeEnum:()=>HE0,_nanoid:()=>tR,_nan:()=>hp,_multipleOf:()=>RJ,_minSize:()=>_$,_minLength:()=>JA,_min:()=>O8,_mime:()=>FD,_maxSize:()=>IJ,_maxLength:()=>CY,_max:()=>m3,_map:()=>DE0,_mac:()=>Qp,_lte:()=>m3,_lt:()=>O$,_lowercase:()=>tZ,_literal:()=>UE0,_length:()=>MY,_lazy:()=>ME0,_ksuid:()=>FI,_jwt:()=>GI,_isoTime:()=>wp,_isoDuration:()=>qp,_isoDateTime:()=>Kp,_isoDate:()=>Bp,_ipv6:()=>JI,_ipv4:()=>AI,_intersection:()=>YE0,_int64:()=>Op,_int32:()=>Mp,_int:()=>Vp,_includes:()=>oZ,_guid:()=>Eq,_gte:()=>O8,_gt:()=>S$,_float64:()=>Cp,_float32:()=>Np,_file:()=>dp,_enum:()=>zE0,_endsWith:()=>$D,_encodeAsync:()=>NR,_encode:()=>ER,_emoji:()=>aR,_email:()=>lR,_e164:()=>DI,_discriminatedUnion:()=>XE0,_default:()=>wE0,_decodeAsync:()=>CR,_decode:()=>VR,_date:()=>yp,_custom:()=>cp,_cuid2:()=>oR,_cuid:()=>sR,_coercedString:()=>Up,_coercedNumber:()=>Ep,_coercedDate:()=>up,_coercedBoolean:()=>Ip,_coercedBigint:()=>jp,_cidrv6:()=>YI,_cidrv4:()=>XI,_check:()=>hM1,_catch:()=>EE0,_boolean:()=>Rp,_bigint:()=>Tp,_base64url:()=>ZI,_base64:()=>WI,_array:()=>mp,_any:()=>xp,TimePrecision:()=>zI,NEVER:()=>HR,JSONSchemaGenerator:()=>bi,JSONSchema:()=>cM1,Doc:()=>kR,$output:()=>dR,$input:()=>cR,$constructor:()=>F1,$brand:()=>UR,$ZodXor:()=>dc,$ZodXID:()=>Qc,$ZodVoid:()=>yc,$ZodUnknown:()=>fc,$ZodUnion:()=>Hq,$ZodUndefined:()=>bc,$ZodUUID:()=>Yc,$ZodURL:()=>Zc,$ZodULID:()=>Uc,$ZodType:()=>L0,$ZodTuple:()=>hR,$ZodTransform:()=>sc,$ZodTemplateLiteral:()=>Dl,$ZodSymbol:()=>kc,$ZodSuccess:()=>Jl,$ZodStringFormat:()=>X2,$ZodString:()=>rZ,$ZodSet:()=>nc,$ZodRegistry:()=>zp,$ZodRecord:()=>pc,$ZodRealError:()=>h3,$ZodReadonly:()=>Zl,$ZodPromise:()=>zl,$ZodPrefault:()=>Fl,$ZodPipe:()=>Wl,$ZodOptional:()=>mR,$ZodObjectJIT:()=>mc,$ZodObject:()=>dC1,$ZodNumberFormat:()=>Sc,$ZodNumber:()=>yR,$ZodNullable:()=>ec,$ZodNull:()=>xc,$ZodNonOptional:()=>Al,$ZodNever:()=>vc,$ZodNanoID:()=>Gc,$ZodNaN:()=>Yl,$ZodMap:()=>ic,$ZodMAC:()=>Nc,$ZodLiteral:()=>ac,$ZodLazy:()=>Hl,$ZodKSUID:()=>Kc,$ZodJWT:()=>jc,$ZodIntersection:()=>lc,$ZodISOTime:()=>qc,$ZodISODuration:()=>Lc,$ZodISODateTime:()=>Bc,$ZodISODate:()=>wc,$ZodIPv6:()=>Vc,$ZodIPv4:()=>Ec,$ZodGUID:()=>Xc,$ZodFunction:()=>Gl,$ZodFile:()=>tc,$ZodExactOptional:()=>oc,$ZodError:()=>Wq,$ZodEnum:()=>rc,$ZodEncodeError:()=>pZ,$ZodEmoji:()=>Dc,$ZodEmail:()=>Wc,$ZodE164:()=>Tc,$ZodDiscriminatedUnion:()=>cc,$ZodDefault:()=>$l,$ZodDate:()=>uc,$ZodCustomStringFormat:()=>Oc,$ZodCustom:()=>Ul,$ZodCodec:()=>Uq,$ZodCheckUpperCase:()=>rd,$ZodCheckStringFormat:()=>TH,$ZodCheckStartsWith:()=>td,$ZodCheckSizeEquals:()=>dd,$ZodCheckRegex:()=>id,$ZodCheckProperty:()=>od,$ZodCheckOverwrite:()=>$c,$ZodCheckNumberFormat:()=>yd,$ZodCheckMultipleOf:()=>vd,$ZodCheckMinSize:()=>md,$ZodCheckMinLength:()=>ld,$ZodCheckMimeType:()=>ed,$ZodCheckMaxSize:()=>hd,$ZodCheckMaxLength:()=>cd,$ZodCheckLowerCase:()=>nd,$ZodCheckLessThan:()=>OR,$ZodCheckLengthEquals:()=>pd,$ZodCheckIncludes:()=>ad,$ZodCheckGreaterThan:()=>SR,$ZodCheckEndsWith:()=>sd,$ZodCheckBigIntFormat:()=>ud,$ZodCheck:()=>B2,$ZodCatch:()=>Xl,$ZodCUID2:()=>Hc,$ZodCUID:()=>zc,$ZodCIDRv6:()=>Mc,$ZodCIDRv4:()=>Cc,$ZodBoolean:()=>zq,$ZodBigIntFormat:()=>_c,$ZodBigInt:()=>uR,$ZodBase64URL:()=>Ic,$ZodBase64:()=>Rc,$ZodAsyncError:()=>AA,$ZodArray:()=>hc,$ZodAny:()=>gc});var g7=x(()=>{e1();jR();Gp();jq();dM1();lM1();qH();Dd();Yd();Ql();_R();Ac();Lq();mM1();Iq()});var KI={};l2(KI,{uppercase:()=>sZ,trim:()=>JD,toUpperCase:()=>YD,toLowerCase:()=>XD,startsWith:()=>eZ,slugify:()=>WD,size:()=>NY,regex:()=>aZ,property:()=>Rq,positive:()=>Nq,overwrite:()=>k5,normalize:()=>AD,nonpositive:()=>Mq,nonnegative:()=>Pq,negative:()=>Cq,multipleOf:()=>RJ,minSize:()=>_$,minLength:()=>JA,mime:()=>FD,maxSize:()=>IJ,maxLength:()=>CY,lte:()=>m3,lt:()=>O$,lowercase:()=>tZ,length:()=>MY,includes:()=>oZ,gte:()=>O8,gt:()=>S$,endsWith:()=>$D});var BI=x(()=>{g7()});var ZD={};l2(ZD,{time:()=>fi,duration:()=>vi,datetime:()=>xi,date:()=>gi,ZodISOTime:()=>_q,ZodISODuration:()=>kq,ZodISODateTime:()=>Oq,ZodISODate:()=>Sq});function xi($){return Kp(Oq,$)}function gi($){return Bp(Sq,$)}function fi($){return wp(_q,$)}function vi($){return qp(kq,$)}var Oq,Sq,_q,kq;var bq=x(()=>{g7();gq();Oq=F1("ZodISODateTime",($,F)=>{Bc.init($,F),d6.init($,F)});Sq=F1("ZodISODate",($,F)=>{wc.init($,F),d6.init($,F)});_q=F1("ZodISOTime",($,F)=>{qc.init($,F),d6.init($,F)});kq=F1("ZodISODuration",($,F)=>{Lc.init($,F),d6.init($,F)})});var pM1=($,F)=>{Wq.init($,F),$.name="ZodError",Object.defineProperties($,{format:{value:(A)=>CH($,A)},flatten:{value:(A)=>NH($,A)},addIssue:{value:(A)=>{$.issues.push(A),$.message=JSON.stringify($.issues,LH,2)}},addIssues:{value:(A)=>{$.issues.push(...A),$.message=JSON.stringify($.issues,LH,2)}},isEmpty:{get(){return $.issues.length===0}}})},iM1,D3;var yi=x(()=>{g7();g7();e1();iM1=F1("ZodError",pM1),D3=F1("ZodError",pM1,{Parent:Error})});var wI,qI,LI,EI,VI,NI,CI,MI,PI,RI,II,TI;var ui=x(()=>{g7();yi();wI=MH(D3),qI=PH(D3),LI=RH(D3),EI=IH(D3),VI=ER(D3),NI=VR(D3),CI=NR(D3),MI=CR(D3),PI=MR(D3),RI=PR(D3),II=RR(D3),TI=IR(D3)});var xq={};l2(xq,{xor:()=>Mn,xid:()=>oi,void:()=>Vn,uuidv7:()=>li,uuidv6:()=>ci,uuidv4:()=>di,uuid:()=>mi,url:()=>pi,unknown:()=>TY,union:()=>JL,undefined:()=>En,ulid:()=>si,uint64:()=>qn,uint32:()=>Kn,tuple:()=>cI,transform:()=>XL,templateLiteral:()=>fn,symbol:()=>Ln,superRefine:()=>BT,success:()=>bn,stringbool:()=>ln,stringFormat:()=>Zn,string:()=>N1,strictObject:()=>Cn,set:()=>jn,refine:()=>KT,record:()=>x5,readonly:()=>DT,promise:()=>vn,preprocess:()=>pn,prefault:()=>FT,pipe:()=>xH,partialRecord:()=>Rn,optional:()=>b5,object:()=>E0,number:()=>f7,nullish:()=>kn,nullable:()=>bH,null:()=>kI,nonoptional:()=>AT,never:()=>FL,nativeEnum:()=>On,nanoid:()=>ri,nan:()=>xn,meta:()=>dn,map:()=>Tn,mac:()=>$n,looseRecord:()=>In,looseObject:()=>AL,literal:()=>Sn,lazy:()=>HT,ksuid:()=>ei,keyof:()=>Nn,jwt:()=>Wn,json:()=>mH,ipv6:()=>fH,ipv4:()=>jY,intersection:()=>mI,int64:()=>wn,int32:()=>Qn,int:()=>fq,instanceof:()=>cn,httpUrl:()=>ii,hostname:()=>Dn,hex:()=>Gn,hash:()=>zn,guid:()=>hi,function:()=>yn,float64:()=>Un,float32:()=>Hn,file:()=>_n,exactOptional:()=>tI,enum:()=>KD,emoji:()=>ni,email:()=>G3,e164:()=>Yn,discriminatedUnion:()=>Pn,describe:()=>mn,date:()=>v7,custom:()=>hn,cuid2:()=>ti,cuid:()=>ai,codec:()=>gn,cidrv6:()=>An,cidrv4:()=>Fn,check:()=>un,catch:()=>YT,boolean:()=>Z9,bigint:()=>Bn,base64url:()=>Xn,base64:()=>Jn,array:()=>y7,any:()=>d3,_function:()=>yn,_default:()=>eI,_ZodString:()=>vq,ZodXor:()=>yI,ZodXID:()=>lq,ZodVoid:()=>fI,ZodUnknown:()=>xI,ZodUnion:()=>yH,ZodUndefined:()=>SI,ZodUUID:()=>k$,ZodURL:()=>gH,ZodULID:()=>cq,ZodType:()=>O0,ZodTuple:()=>dI,ZodTransform:()=>rI,ZodTemplateLiteral:()=>GT,ZodSymbol:()=>OI,ZodSuccess:()=>JT,ZodStringFormat:()=>d6,ZodString:()=>GD,ZodSet:()=>pI,ZodRecord:()=>uH,ZodReadonly:()=>ZT,ZodPromise:()=>UT,ZodPrefault:()=>$T,ZodPipe:()=>WL,ZodOptional:()=>TJ,ZodObject:()=>b$,ZodNumberFormat:()=>OY,ZodNumber:()=>HD,ZodNullable:()=>sI,ZodNull:()=>_I,ZodNonOptional:()=>YL,ZodNever:()=>gI,ZodNanoID:()=>hq,ZodNaN:()=>WT,ZodMap:()=>lI,ZodMAC:()=>jI,ZodLiteral:()=>iI,ZodLazy:()=>zT,ZodKSUID:()=>pq,ZodJWT:()=>eq,ZodIntersection:()=>hI,ZodIPv6:()=>nq,ZodIPv4:()=>iq,ZodGUID:()=>kH,ZodFunction:()=>QT,ZodFile:()=>nI,ZodExactOptional:()=>aI,ZodEnum:()=>DD,ZodEmoji:()=>uq,ZodEmail:()=>yq,ZodE164:()=>oq,ZodDiscriminatedUnion:()=>uI,ZodDefault:()=>oI,ZodDate:()=>vH,ZodCustomStringFormat:()=>zD,ZodCustom:()=>hH,ZodCodec:()=>ZL,ZodCatch:()=>XT,ZodCUID2:()=>dq,ZodCUID:()=>mq,ZodCIDRv6:()=>aq,ZodCIDRv4:()=>rq,ZodBoolean:()=>UD,ZodBigIntFormat:()=>$L,ZodBigInt:()=>QD,ZodBase64URL:()=>sq,ZodBase64:()=>tq,ZodArray:()=>vI,ZodAny:()=>bI});function N1($){return Hp(GD,$)}function G3($){return lR(yq,$)}function hi($){return Eq(kH,$)}function mi($){return pR(k$,$)}function di($){return iR(k$,$)}function ci($){return nR(k$,$)}function li($){return rR(k$,$)}function pi($){return Vq(gH,$)}function ii($){return Vq(gH,{protocol:/^https?$/,hostname:x7.domain,...I1.normalizeParams($)})}function ni($){return aR(uq,$)}function ri($){return tR(hq,$)}function ai($){return sR(mq,$)}function ti($){return oR(dq,$)}function si($){return eR(cq,$)}function oi($){return $I(lq,$)}function ei($){return FI(pq,$)}function jY($){return AI(iq,$)}function $n($){return Qp(jI,$)}function fH($){return JI(nq,$)}function Fn($){return XI(rq,$)}function An($){return YI(aq,$)}function Jn($){return WI(tq,$)}function Xn($){return ZI(sq,$)}function Yn($){return DI(oq,$)}function Wn($){return GI(eq,$)}function Zn($,F,A={}){return SH(zD,$,F,A)}function Dn($){return SH(zD,"hostname",x7.hostname,$)}function Gn($){return SH(zD,"hex",x7.hex,$)}function zn($,F){let A=F?.enc??"hex",J=`${$}_${A}`,X=x7[J];if(!X)throw Error(`Unrecognized hash format: ${J}`);return SH(zD,J,X,F)}function f7($){return Lp(HD,$)}function fq($){return Vp(OY,$)}function Hn($){return Np(OY,$)}function Un($){return Cp(OY,$)}function Qn($){return Mp(OY,$)}function Kn($){return Pp(OY,$)}function Z9($){return Rp(UD,$)}function Bn($){return Tp(QD,$)}function wn($){return Op($L,$)}function qn($){return Sp($L,$)}function Ln($){return _p(OI,$)}function En($){return kp(SI,$)}function kI($){return bp(_I,$)}function d3(){return xp(bI)}function TY(){return gp(xI)}function FL($){return fp(gI,$)}function Vn($){return vp(fI,$)}function v7($){return yp(vH,$)}function y7($,F){return mp(vI,$,F)}function Nn($){let F=$._zod.def.shape;return KD(Object.keys(F))}function E0($,F){let A={type:"object",shape:$??{},...I1.normalizeParams(F)};return new b$(A)}function Cn($,F){return new b$({type:"object",shape:$,catchall:FL(),...I1.normalizeParams(F)})}function AL($,F){return new b$({type:"object",shape:$,catchall:TY(),...I1.normalizeParams(F)})}function JL($,F){return new yH({type:"union",options:$,...I1.normalizeParams(F)})}function Mn($,F){return new yI({type:"union",options:$,inclusive:!1,...I1.normalizeParams(F)})}function Pn($,F,A){return new uI({type:"union",options:F,discriminator:$,...I1.normalizeParams(A)})}function mI($,F){return new hI({type:"intersection",left:$,right:F})}function cI($,F,A){let J=F instanceof L0,X=J?A:F;return new dI({type:"tuple",items:$,rest:J?F:null,...I1.normalizeParams(X)})}function x5($,F,A){return new uH({type:"record",keyType:$,valueType:F,...I1.normalizeParams(A)})}function Rn($,F,A){let J=j8($);return J._zod.values=void 0,new uH({type:"record",keyType:J,valueType:F,...I1.normalizeParams(A)})}function In($,F,A){return new uH({type:"record",keyType:$,valueType:F,mode:"loose",...I1.normalizeParams(A)})}function Tn($,F,A){return new lI({type:"map",keyType:$,valueType:F,...I1.normalizeParams(A)})}function jn($,F){return new pI({type:"set",valueType:$,...I1.normalizeParams(F)})}function KD($,F){let A=Array.isArray($)?Object.fromEntries($.map((J)=>[J,J])):$;return new DD({type:"enum",entries:A,...I1.normalizeParams(F)})}function On($,F){return new DD({type:"enum",entries:$,...I1.normalizeParams(F)})}function Sn($,F){return new iI({type:"literal",values:Array.isArray($)?$:[$],...I1.normalizeParams(F)})}function _n($){return dp(nI,$)}function XL($){return new rI({type:"transform",transform:$})}function b5($){return new TJ({type:"optional",innerType:$})}function tI($){return new aI({type:"optional",innerType:$})}function bH($){return new sI({type:"nullable",innerType:$})}function kn($){return b5(bH($))}function eI($,F){return new oI({type:"default",innerType:$,get defaultValue(){return typeof F==="function"?F():I1.shallowClone(F)}})}function FT($,F){return new $T({type:"prefault",innerType:$,get defaultValue(){return typeof F==="function"?F():I1.shallowClone(F)}})}function AT($,F){return new YL({type:"nonoptional",innerType:$,...I1.normalizeParams(F)})}function bn($){return new JT({type:"success",innerType:$})}function YT($,F){return new XT({type:"catch",innerType:$,catchValue:typeof F==="function"?F:()=>F})}function xn($){return hp(WT,$)}function xH($,F){return new WL({type:"pipe",in:$,out:F})}function gn($,F,A){return new ZL({type:"pipe",in:$,out:F,transform:A.decode,reverseTransform:A.encode})}function DT($){return new ZT({type:"readonly",innerType:$})}function fn($,F){return new GT({type:"template_literal",parts:$,...I1.normalizeParams(F)})}function HT($){return new zT({type:"lazy",getter:$})}function vn($){return new UT({type:"promise",innerType:$})}function yn($){return new QT({type:"function",input:Array.isArray($?.input)?cI($?.input):$?.input??y7(TY()),output:$?.output??TY()})}function un($){let F=new B2({check:"custom"});return F._zod.check=$,F}function hn($,F){return cp(hH,$??(()=>!0),F)}function KT($,F={}){return lp(hH,$,F)}function BT($){return pp($)}function cn($,F={}){let A=new hH({type:"custom",check:"custom",fn:(J)=>J instanceof $,abort:!0,...I1.normalizeParams(F)});return A._zod.bag.Class=$,A._zod.check=(J)=>{if(!(J.value instanceof $))J.issues.push({code:"invalid_type",expected:$.name,input:J.value,inst:A,path:[...A._zod.def.path??[]]})},A}function mH($){let F=HT(()=>{return JL([N1($),f7(),Z9(),kI(),y7(F),x5(N1(),F)])});return F}function pn($,F){return xH(XL($),F)}var O0,vq,GD,d6,yq,kH,k$,gH,uq,hq,mq,dq,cq,lq,pq,iq,jI,nq,rq,aq,tq,sq,oq,eq,zD,HD,OY,UD,QD,$L,OI,SI,_I,bI,xI,gI,fI,vH,vI,b$,yH,yI,uI,hI,dI,uH,lI,pI,DD,iI,nI,rI,TJ,aI,sI,oI,$T,YL,JT,XT,WT,WL,ZL,ZT,GT,zT,UT,QT,hH,mn,dn,ln=(...$)=>rp({Codec:ZL,Boolean:UD,String:GD},...$);var gq=x(()=>{g7();g7();jq();Iq();BI();bq();ui();O0=F1("ZodType",($,F)=>{return L0.init($,F),Object.assign($["~standard"],{jsonSchema:{input:_H($,"input"),output:_H($,"output")}}),$.toJSONSchema=ap($,{}),$.def=F,$.type=F.type,Object.defineProperty($,"_def",{value:F}),$.check=(...A)=>{return $.clone(I1.mergeDefs(F,{checks:[...F.checks??[],...A.map((J)=>typeof J==="function"?{_zod:{check:J,def:{check:"custom"},onattach:[]}}:J)]}),{parent:!0})},$.with=$.check,$.clone=(A,J)=>j8($,A,J),$.brand=()=>$,$.register=(A,J)=>{return A.add($,J),$},$.parse=(A,J)=>wI($,A,J,{callee:$.parse}),$.safeParse=(A,J)=>LI($,A,J),$.parseAsync=async(A,J)=>qI($,A,J,{callee:$.parseAsync}),$.safeParseAsync=async(A,J)=>EI($,A,J),$.spa=$.safeParseAsync,$.encode=(A,J)=>VI($,A,J),$.decode=(A,J)=>NI($,A,J),$.encodeAsync=async(A,J)=>CI($,A,J),$.decodeAsync=async(A,J)=>MI($,A,J),$.safeEncode=(A,J)=>PI($,A,J),$.safeDecode=(A,J)=>RI($,A,J),$.safeEncodeAsync=async(A,J)=>II($,A,J),$.safeDecodeAsync=async(A,J)=>TI($,A,J),$.refine=(A,J)=>$.check(KT(A,J)),$.superRefine=(A)=>$.check(BT(A)),$.overwrite=(A)=>$.check(k5(A)),$.optional=()=>b5($),$.exactOptional=()=>tI($),$.nullable=()=>bH($),$.nullish=()=>b5(bH($)),$.nonoptional=(A)=>AT($,A),$.array=()=>y7($),$.or=(A)=>JL([$,A]),$.and=(A)=>mI($,A),$.transform=(A)=>xH($,XL(A)),$.default=(A)=>eI($,A),$.prefault=(A)=>FT($,A),$.catch=(A)=>YT($,A),$.pipe=(A)=>xH($,A),$.readonly=()=>DT($),$.describe=(A)=>{let J=$.clone();return I9.add(J,{description:A}),J},Object.defineProperty($,"description",{get(){return I9.get($)?.description},configurable:!0}),$.meta=(...A)=>{if(A.length===0)return I9.get($);let J=$.clone();return I9.add(J,A[0]),J},$.isOptional=()=>$.safeParse(void 0).success,$.isNullable=()=>$.safeParse(null).success,$.apply=(A)=>A($),$}),vq=F1("_ZodString",($,F)=>{rZ.init($,F),O0.init($,F),$._zod.processJSONSchema=(J,X,Y)=>tp($,J,X,Y);let A=$._zod.bag;$.format=A.format??null,$.minLength=A.minimum??null,$.maxLength=A.maximum??null,$.regex=(...J)=>$.check(aZ(...J)),$.includes=(...J)=>$.check(oZ(...J)),$.startsWith=(...J)=>$.check(eZ(...J)),$.endsWith=(...J)=>$.check($D(...J)),$.min=(...J)=>$.check(JA(...J)),$.max=(...J)=>$.check(CY(...J)),$.length=(...J)=>$.check(MY(...J)),$.nonempty=(...J)=>$.check(JA(1,...J)),$.lowercase=(J)=>$.check(tZ(J)),$.uppercase=(J)=>$.check(sZ(J)),$.trim=()=>$.check(JD()),$.normalize=(...J)=>$.check(AD(...J)),$.toLowerCase=()=>$.check(XD()),$.toUpperCase=()=>$.check(YD()),$.slugify=()=>$.check(WD())}),GD=F1("ZodString",($,F)=>{rZ.init($,F),vq.init($,F),$.email=(A)=>$.check(lR(yq,A)),$.url=(A)=>$.check(Vq(gH,A)),$.jwt=(A)=>$.check(GI(eq,A)),$.emoji=(A)=>$.check(aR(uq,A)),$.guid=(A)=>$.check(Eq(kH,A)),$.uuid=(A)=>$.check(pR(k$,A)),$.uuidv4=(A)=>$.check(iR(k$,A)),$.uuidv6=(A)=>$.check(nR(k$,A)),$.uuidv7=(A)=>$.check(rR(k$,A)),$.nanoid=(A)=>$.check(tR(hq,A)),$.guid=(A)=>$.check(Eq(kH,A)),$.cuid=(A)=>$.check(sR(mq,A)),$.cuid2=(A)=>$.check(oR(dq,A)),$.ulid=(A)=>$.check(eR(cq,A)),$.base64=(A)=>$.check(WI(tq,A)),$.base64url=(A)=>$.check(ZI(sq,A)),$.xid=(A)=>$.check($I(lq,A)),$.ksuid=(A)=>$.check(FI(pq,A)),$.ipv4=(A)=>$.check(AI(iq,A)),$.ipv6=(A)=>$.check(JI(nq,A)),$.cidrv4=(A)=>$.check(XI(rq,A)),$.cidrv6=(A)=>$.check(YI(aq,A)),$.e164=(A)=>$.check(DI(oq,A)),$.datetime=(A)=>$.check(xi(A)),$.date=(A)=>$.check(gi(A)),$.time=(A)=>$.check(fi(A)),$.duration=(A)=>$.check(vi(A))});d6=F1("ZodStringFormat",($,F)=>{X2.init($,F),vq.init($,F)}),yq=F1("ZodEmail",($,F)=>{Wc.init($,F),d6.init($,F)});kH=F1("ZodGUID",($,F)=>{Xc.init($,F),d6.init($,F)});k$=F1("ZodUUID",($,F)=>{Yc.init($,F),d6.init($,F)});gH=F1("ZodURL",($,F)=>{Zc.init($,F),d6.init($,F)});uq=F1("ZodEmoji",($,F)=>{Dc.init($,F),d6.init($,F)});hq=F1("ZodNanoID",($,F)=>{Gc.init($,F),d6.init($,F)});mq=F1("ZodCUID",($,F)=>{zc.init($,F),d6.init($,F)});dq=F1("ZodCUID2",($,F)=>{Hc.init($,F),d6.init($,F)});cq=F1("ZodULID",($,F)=>{Uc.init($,F),d6.init($,F)});lq=F1("ZodXID",($,F)=>{Qc.init($,F),d6.init($,F)});pq=F1("ZodKSUID",($,F)=>{Kc.init($,F),d6.init($,F)});iq=F1("ZodIPv4",($,F)=>{Ec.init($,F),d6.init($,F)});jI=F1("ZodMAC",($,F)=>{Nc.init($,F),d6.init($,F)});nq=F1("ZodIPv6",($,F)=>{Vc.init($,F),d6.init($,F)});rq=F1("ZodCIDRv4",($,F)=>{Cc.init($,F),d6.init($,F)});aq=F1("ZodCIDRv6",($,F)=>{Mc.init($,F),d6.init($,F)});tq=F1("ZodBase64",($,F)=>{Rc.init($,F),d6.init($,F)});sq=F1("ZodBase64URL",($,F)=>{Ic.init($,F),d6.init($,F)});oq=F1("ZodE164",($,F)=>{Tc.init($,F),d6.init($,F)});eq=F1("ZodJWT",($,F)=>{jc.init($,F),d6.init($,F)});zD=F1("ZodCustomStringFormat",($,F)=>{Oc.init($,F),d6.init($,F)});HD=F1("ZodNumber",($,F)=>{yR.init($,F),O0.init($,F),$._zod.processJSONSchema=(J,X,Y)=>sp($,J,X,Y),$.gt=(J,X)=>$.check(S$(J,X)),$.gte=(J,X)=>$.check(O8(J,X)),$.min=(J,X)=>$.check(O8(J,X)),$.lt=(J,X)=>$.check(O$(J,X)),$.lte=(J,X)=>$.check(m3(J,X)),$.max=(J,X)=>$.check(m3(J,X)),$.int=(J)=>$.check(fq(J)),$.safe=(J)=>$.check(fq(J)),$.positive=(J)=>$.check(S$(0,J)),$.nonnegative=(J)=>$.check(O8(0,J)),$.negative=(J)=>$.check(O$(0,J)),$.nonpositive=(J)=>$.check(m3(0,J)),$.multipleOf=(J,X)=>$.check(RJ(J,X)),$.step=(J,X)=>$.check(RJ(J,X)),$.finite=()=>$;let A=$._zod.bag;$.minValue=Math.max(A.minimum??Number.NEGATIVE_INFINITY,A.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,$.maxValue=Math.min(A.maximum??Number.POSITIVE_INFINITY,A.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,$.isInt=(A.format??"").includes("int")||Number.isSafeInteger(A.multipleOf??0.5),$.isFinite=!0,$.format=A.format??null});OY=F1("ZodNumberFormat",($,F)=>{Sc.init($,F),HD.init($,F)});UD=F1("ZodBoolean",($,F)=>{zq.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>op($,A,J,X)});QD=F1("ZodBigInt",($,F)=>{uR.init($,F),O0.init($,F),$._zod.processJSONSchema=(J,X,Y)=>ep($,J,X,Y),$.gte=(J,X)=>$.check(O8(J,X)),$.min=(J,X)=>$.check(O8(J,X)),$.gt=(J,X)=>$.check(S$(J,X)),$.gte=(J,X)=>$.check(O8(J,X)),$.min=(J,X)=>$.check(O8(J,X)),$.lt=(J,X)=>$.check(O$(J,X)),$.lte=(J,X)=>$.check(m3(J,X)),$.max=(J,X)=>$.check(m3(J,X)),$.positive=(J)=>$.check(S$(BigInt(0),J)),$.negative=(J)=>$.check(O$(BigInt(0),J)),$.nonpositive=(J)=>$.check(m3(BigInt(0),J)),$.nonnegative=(J)=>$.check(O8(BigInt(0),J)),$.multipleOf=(J,X)=>$.check(RJ(J,X));let A=$._zod.bag;$.minValue=A.minimum??null,$.maxValue=A.maximum??null,$.format=A.format??null});$L=F1("ZodBigIntFormat",($,F)=>{_c.init($,F),QD.init($,F)});OI=F1("ZodSymbol",($,F)=>{kc.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>$i($,A,J,X)});SI=F1("ZodUndefined",($,F)=>{bc.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Ai($,A,J,X)});_I=F1("ZodNull",($,F)=>{xc.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Fi($,A,J,X)});bI=F1("ZodAny",($,F)=>{gc.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Yi($,A,J,X)});xI=F1("ZodUnknown",($,F)=>{fc.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Wi($,A,J,X)});gI=F1("ZodNever",($,F)=>{vc.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Xi($,A,J,X)});fI=F1("ZodVoid",($,F)=>{yc.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Ji($,A,J,X)});vH=F1("ZodDate",($,F)=>{uc.init($,F),O0.init($,F),$._zod.processJSONSchema=(J,X,Y)=>Zi($,J,X,Y),$.min=(J,X)=>$.check(O8(J,X)),$.max=(J,X)=>$.check(m3(J,X));let A=$._zod.bag;$.minDate=A.minimum?new Date(A.minimum):null,$.maxDate=A.maximum?new Date(A.maximum):null});vI=F1("ZodArray",($,F)=>{hc.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Ei($,A,J,X),$.element=F.element,$.min=(A,J)=>$.check(JA(A,J)),$.nonempty=(A)=>$.check(JA(1,A)),$.max=(A,J)=>$.check(CY(A,J)),$.length=(A,J)=>$.check(MY(A,J)),$.unwrap=()=>$.element});b$=F1("ZodObject",($,F)=>{mc.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Vi($,A,J,X),I1.defineLazy($,"shape",()=>{return F.shape}),$.keyof=()=>KD(Object.keys($._zod.def.shape)),$.catchall=(A)=>$.clone({...$._zod.def,catchall:A}),$.passthrough=()=>$.clone({...$._zod.def,catchall:TY()}),$.loose=()=>$.clone({...$._zod.def,catchall:TY()}),$.strict=()=>$.clone({...$._zod.def,catchall:FL()}),$.strip=()=>$.clone({...$._zod.def,catchall:void 0}),$.extend=(A)=>{return I1.extend($,A)},$.safeExtend=(A)=>{return I1.safeExtend($,A)},$.merge=(A)=>I1.merge($,A),$.pick=(A)=>I1.pick($,A),$.omit=(A)=>I1.omit($,A),$.partial=(...A)=>I1.partial(TJ,$,A[0]),$.required=(...A)=>I1.required(YL,$,A[0])});yH=F1("ZodUnion",($,F)=>{Hq.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>UI($,A,J,X),$.options=F.options});yI=F1("ZodXor",($,F)=>{yH.init($,F),dc.init($,F),$._zod.processJSONSchema=(A,J,X)=>UI($,A,J,X),$.options=F.options});uI=F1("ZodDiscriminatedUnion",($,F)=>{yH.init($,F),cc.init($,F)});hI=F1("ZodIntersection",($,F)=>{lc.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Ni($,A,J,X)});dI=F1("ZodTuple",($,F)=>{hR.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Ci($,A,J,X),$.rest=(A)=>$.clone({...$._zod.def,rest:A})});uH=F1("ZodRecord",($,F)=>{pc.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Mi($,A,J,X),$.keyType=F.keyType,$.valueType=F.valueType});lI=F1("ZodMap",($,F)=>{ic.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>qi($,A,J,X),$.keyType=F.keyType,$.valueType=F.valueType,$.min=(...A)=>$.check(_$(...A)),$.nonempty=(A)=>$.check(_$(1,A)),$.max=(...A)=>$.check(IJ(...A)),$.size=(...A)=>$.check(NY(...A))});pI=F1("ZodSet",($,F)=>{nc.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Li($,A,J,X),$.min=(...A)=>$.check(_$(...A)),$.nonempty=(A)=>$.check(_$(1,A)),$.max=(...A)=>$.check(IJ(...A)),$.size=(...A)=>$.check(NY(...A))});DD=F1("ZodEnum",($,F)=>{rc.init($,F),O0.init($,F),$._zod.processJSONSchema=(J,X,Y)=>Di($,J,X,Y),$.enum=F.entries,$.options=Object.values(F.entries);let A=new Set(Object.keys(F.entries));$.extract=(J,X)=>{let Y={};for(let W of J)if(A.has(W))Y[W]=F.entries[W];else throw Error(`Key ${W} not found in enum`);return new DD({...F,checks:[],...I1.normalizeParams(X),entries:Y})},$.exclude=(J,X)=>{let Y={...F.entries};for(let W of J)if(A.has(W))delete Y[W];else throw Error(`Key ${W} not found in enum`);return new DD({...F,checks:[],...I1.normalizeParams(X),entries:Y})}});iI=F1("ZodLiteral",($,F)=>{ac.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Gi($,A,J,X),$.values=new Set(F.values),Object.defineProperty($,"value",{get(){if(F.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return F.values[0]}})});nI=F1("ZodFile",($,F)=>{tc.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Ui($,A,J,X),$.min=(A,J)=>$.check(_$(A,J)),$.max=(A,J)=>$.check(IJ(A,J)),$.mime=(A,J)=>$.check(FD(Array.isArray(A)?A:[A],J))});rI=F1("ZodTransform",($,F)=>{sc.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>wi($,A,J,X),$._zod.parse=(A,J)=>{if(J.direction==="backward")throw new pZ($.constructor.name);A.addIssue=(Y)=>{if(typeof Y==="string")A.issues.push(I1.issue(Y,A.value,F));else{let W=Y;if(W.fatal)W.continue=!1;W.code??(W.code="custom"),W.input??(W.input=A.value),W.inst??(W.inst=$),A.issues.push(I1.issue(W))}};let X=F.transform(A.value,A);if(X instanceof Promise)return X.then((Y)=>{return A.value=Y,A});return A.value=X,A}});TJ=F1("ZodOptional",($,F)=>{mR.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>QI($,A,J,X),$.unwrap=()=>$._zod.def.innerType});aI=F1("ZodExactOptional",($,F)=>{oc.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>QI($,A,J,X),$.unwrap=()=>$._zod.def.innerType});sI=F1("ZodNullable",($,F)=>{ec.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Pi($,A,J,X),$.unwrap=()=>$._zod.def.innerType});oI=F1("ZodDefault",($,F)=>{$l.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Ii($,A,J,X),$.unwrap=()=>$._zod.def.innerType,$.removeDefault=$.unwrap});$T=F1("ZodPrefault",($,F)=>{Fl.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Ti($,A,J,X),$.unwrap=()=>$._zod.def.innerType});YL=F1("ZodNonOptional",($,F)=>{Al.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Ri($,A,J,X),$.unwrap=()=>$._zod.def.innerType});JT=F1("ZodSuccess",($,F)=>{Jl.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Qi($,A,J,X),$.unwrap=()=>$._zod.def.innerType});XT=F1("ZodCatch",($,F)=>{Xl.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>ji($,A,J,X),$.unwrap=()=>$._zod.def.innerType,$.removeCatch=$.unwrap});WT=F1("ZodNaN",($,F)=>{Yl.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>zi($,A,J,X)});WL=F1("ZodPipe",($,F)=>{Wl.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Oi($,A,J,X),$.in=F.in,$.out=F.out});ZL=F1("ZodCodec",($,F)=>{WL.init($,F),Uq.init($,F)});ZT=F1("ZodReadonly",($,F)=>{Zl.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Si($,A,J,X),$.unwrap=()=>$._zod.def.innerType});GT=F1("ZodTemplateLiteral",($,F)=>{Dl.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Hi($,A,J,X)});zT=F1("ZodLazy",($,F)=>{Hl.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>ki($,A,J,X),$.unwrap=()=>$._zod.def.getter()});UT=F1("ZodPromise",($,F)=>{zl.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>_i($,A,J,X),$.unwrap=()=>$._zod.def.innerType});QT=F1("ZodFunction",($,F)=>{Gl.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Bi($,A,J,X)});hH=F1("ZodCustom",($,F)=>{Ul.init($,F),O0.init($,F),$._zod.processJSONSchema=(A,J,X)=>Ki($,A,J,X)});mn=ip,dn=np});function rM1($){M4({customError:$})}function aM1(){return M4().customError}var nM1,wT;var tM1=x(()=>{g7();nM1={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};(function($){})(wT||(wT={}))});function OE0($,F){let A=$.$schema;if(A==="https://json-schema.org/draft/2020-12/schema")return"draft-2020-12";if(A==="http://json-schema.org/draft-07/schema#")return"draft-7";if(A==="http://json-schema.org/draft-04/schema#")return"draft-4";return F??"draft-2020-12"}function SE0($,F){if(!$.startsWith("#"))throw Error("External $ref is not supported, only local refs (#/...) are allowed");let A=$.slice(1).split("/").filter(Boolean);if(A.length===0)return F.rootSchema;let J=F.version==="draft-2020-12"?"$defs":"definitions";if(A[0]===J){let X=A[1];if(!X||!F.defs[X])throw Error(`Reference not found: ${$}`);return F.defs[X]}throw Error(`Reference not found: ${$}`)}function sM1($,F){if($.not!==void 0){if(typeof $.not==="object"&&Object.keys($.not).length===0)return u1.never();throw Error("not is not supported in Zod (except { not: {} } for never)")}if($.unevaluatedItems!==void 0)throw Error("unevaluatedItems is not supported");if($.unevaluatedProperties!==void 0)throw Error("unevaluatedProperties is not supported");if($.if!==void 0||$.then!==void 0||$.else!==void 0)throw Error("Conditional schemas (if/then/else) are not supported");if($.dependentSchemas!==void 0||$.dependentRequired!==void 0)throw Error("dependentSchemas and dependentRequired are not supported");if($.$ref){let X=$.$ref;if(F.refs.has(X))return F.refs.get(X);if(F.processing.has(X))return u1.lazy(()=>{if(!F.refs.has(X))throw Error(`Circular reference not resolved: ${X}`);return F.refs.get(X)});F.processing.add(X);let Y=SE0(X,F),W=S8(Y,F);return F.refs.set(X,W),F.processing.delete(X),W}if($.enum!==void 0){let X=$.enum;if(F.version==="openapi-3.0"&&$.nullable===!0&&X.length===1&&X[0]===null)return u1.null();if(X.length===0)return u1.never();if(X.length===1)return u1.literal(X[0]);if(X.every((W)=>typeof W==="string"))return u1.enum(X);let Y=X.map((W)=>u1.literal(W));if(Y.length<2)return Y[0];return u1.union([Y[0],Y[1],...Y.slice(2)])}if($.const!==void 0)return u1.literal($.const);let A=$.type;if(Array.isArray(A)){let X=A.map((Y)=>{let W={...$,type:Y};return sM1(W,F)});if(X.length===0)return u1.never();if(X.length===1)return X[0];return u1.union(X)}if(!A)return u1.any();let J;switch(A){case"string":{let X=u1.string();if($.format){let Y=$.format;if(Y==="email")X=X.check(u1.email());else if(Y==="uri"||Y==="uri-reference")X=X.check(u1.url());else if(Y==="uuid"||Y==="guid")X=X.check(u1.uuid());else if(Y==="date-time")X=X.check(u1.iso.datetime());else if(Y==="date")X=X.check(u1.iso.date());else if(Y==="time")X=X.check(u1.iso.time());else if(Y==="duration")X=X.check(u1.iso.duration());else if(Y==="ipv4")X=X.check(u1.ipv4());else if(Y==="ipv6")X=X.check(u1.ipv6());else if(Y==="mac")X=X.check(u1.mac());else if(Y==="cidr")X=X.check(u1.cidrv4());else if(Y==="cidr-v6")X=X.check(u1.cidrv6());else if(Y==="base64")X=X.check(u1.base64());else if(Y==="base64url")X=X.check(u1.base64url());else if(Y==="e164")X=X.check(u1.e164());else if(Y==="jwt")X=X.check(u1.jwt());else if(Y==="emoji")X=X.check(u1.emoji());else if(Y==="nanoid")X=X.check(u1.nanoid());else if(Y==="cuid")X=X.check(u1.cuid());else if(Y==="cuid2")X=X.check(u1.cuid2());else if(Y==="ulid")X=X.check(u1.ulid());else if(Y==="xid")X=X.check(u1.xid());else if(Y==="ksuid")X=X.check(u1.ksuid())}if(typeof $.minLength==="number")X=X.min($.minLength);if(typeof $.maxLength==="number")X=X.max($.maxLength);if($.pattern)X=X.regex(new RegExp($.pattern));J=X;break}case"number":case"integer":{let X=A==="integer"?u1.number().int():u1.number();if(typeof $.minimum==="number")X=X.min($.minimum);if(typeof $.maximum==="number")X=X.max($.maximum);if(typeof $.exclusiveMinimum==="number")X=X.gt($.exclusiveMinimum);else if($.exclusiveMinimum===!0&&typeof $.minimum==="number")X=X.gt($.minimum);if(typeof $.exclusiveMaximum==="number")X=X.lt($.exclusiveMaximum);else if($.exclusiveMaximum===!0&&typeof $.maximum==="number")X=X.lt($.maximum);if(typeof $.multipleOf==="number")X=X.multipleOf($.multipleOf);J=X;break}case"boolean":{J=u1.boolean();break}case"null":{J=u1.null();break}case"object":{let X={},Y=$.properties||{},W=new Set($.required||[]);for(let[D,G]of Object.entries(Y)){let z=S8(G,F);X[D]=W.has(D)?z:z.optional()}if($.propertyNames){let D=S8($.propertyNames,F),G=$.additionalProperties&&typeof $.additionalProperties==="object"?S8($.additionalProperties,F):u1.any();if(Object.keys(X).length===0){J=u1.record(D,G);break}let z=u1.object(X).passthrough(),H=u1.looseRecord(D,G);J=u1.intersection(z,H);break}if($.patternProperties){let D=$.patternProperties,G=Object.keys(D),z=[];for(let U of G){let Q=S8(D[U],F),B=u1.string().regex(new RegExp(U));z.push(u1.looseRecord(B,Q))}let H=[];if(Object.keys(X).length>0)H.push(u1.object(X).passthrough());if(H.push(...z),H.length===0)J=u1.object({}).passthrough();else if(H.length===1)J=H[0];else{let U=u1.intersection(H[0],H[1]);for(let Q=2;Q<H.length;Q++)U=u1.intersection(U,H[Q]);J=U}break}let Z=u1.object(X);if($.additionalProperties===!1)J=Z.strict();else if(typeof $.additionalProperties==="object")J=Z.catchall(S8($.additionalProperties,F));else J=Z.passthrough();break}case"array":{let{prefixItems:X,items:Y}=$;if(X&&Array.isArray(X)){let W=X.map((D)=>S8(D,F)),Z=Y&&typeof Y==="object"&&!Array.isArray(Y)?S8(Y,F):void 0;if(Z)J=u1.tuple(W).rest(Z);else J=u1.tuple(W);if(typeof $.minItems==="number")J=J.check(u1.minLength($.minItems));if(typeof $.maxItems==="number")J=J.check(u1.maxLength($.maxItems))}else if(Array.isArray(Y)){let W=Y.map((D)=>S8(D,F)),Z=$.additionalItems&&typeof $.additionalItems==="object"?S8($.additionalItems,F):void 0;if(Z)J=u1.tuple(W).rest(Z);else J=u1.tuple(W);if(typeof $.minItems==="number")J=J.check(u1.minLength($.minItems));if(typeof $.maxItems==="number")J=J.check(u1.maxLength($.maxItems))}else if(Y!==void 0){let W=S8(Y,F),Z=u1.array(W);if(typeof $.minItems==="number")Z=Z.min($.minItems);if(typeof $.maxItems==="number")Z=Z.max($.maxItems);J=Z}else J=u1.array(u1.any());break}default:throw Error(`Unsupported type: ${A}`)}if($.description)J=J.describe($.description);if($.default!==void 0)J=J.default($.default);return J}function S8($,F){if(typeof $==="boolean")return $?u1.any():u1.never();let A=sM1($,F),J=$.type||$.enum!==void 0||$.const!==void 0;if($.anyOf&&Array.isArray($.anyOf)){let Z=$.anyOf.map((G)=>S8(G,F)),D=u1.union(Z);A=J?u1.intersection(A,D):D}if($.oneOf&&Array.isArray($.oneOf)){let Z=$.oneOf.map((G)=>S8(G,F)),D=u1.xor(Z);A=J?u1.intersection(A,D):D}if($.allOf&&Array.isArray($.allOf))if($.allOf.length===0)A=J?A:u1.any();else{let Z=J?A:S8($.allOf[0],F),D=J?0:1;for(let G=D;G<$.allOf.length;G++)Z=u1.intersection(Z,S8($.allOf[G],F));A=Z}if($.nullable===!0&&F.version==="openapi-3.0")A=u1.nullable(A);if($.readOnly===!0)A=u1.readonly(A);let X={},Y=["$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor"];for(let Z of Y)if(Z in $)X[Z]=$[Z];let W=["contentEncoding","contentMediaType","contentSchema"];for(let Z of W)if(Z in $)X[Z]=$[Z];for(let Z of Object.keys($))if(!jE0.has(Z))X[Z]=$[Z];if(Object.keys(X).length>0)F.registry.add(A,X);return A}function nn($,F){if(typeof $==="boolean")return $?u1.any():u1.never();let A=OE0($,F?.defaultTarget),J=$.$defs||$.definitions||{},X={version:A,defs:J,refs:new Map,processing:new Set,rootSchema:$,registry:F?.registry??I9};return S8($,X)}var u1,jE0;var oM1=x(()=>{Lq();BI();bq();gq();u1={...xq,...KI,iso:ZD},jE0=new Set(["$schema","$ref","$defs","definitions","$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor","type","enum","const","anyOf","oneOf","allOf","not","properties","required","additionalProperties","patternProperties","propertyNames","minProperties","maxProperties","items","prefixItems","additionalItems","minItems","maxItems","uniqueItems","contains","minContains","maxContains","minLength","maxLength","pattern","format","minimum","maximum","exclusiveMinimum","exclusiveMaximum","multipleOf","description","default","contentEncoding","contentMediaType","contentSchema","unevaluatedItems","unevaluatedProperties","if","then","else","dependentSchemas","dependentRequired","nullable","readOnly"])});var u7={};l2(u7,{string:()=>_E0,number:()=>kE0,date:()=>gE0,boolean:()=>bE0,bigint:()=>xE0});function _E0($){return Up(GD,$)}function kE0($){return Ep(HD,$)}function bE0($){return Ip(UD,$)}function xE0($){return jp(QD,$)}function gE0($){return up(vH,$)}var eM1=x(()=>{g7();gq()});var qT={};l2(qT,{xor:()=>Mn,xid:()=>oi,void:()=>Vn,uuidv7:()=>li,uuidv6:()=>ci,uuidv4:()=>di,uuid:()=>mi,util:()=>I1,url:()=>pi,uppercase:()=>sZ,unknown:()=>TY,union:()=>JL,undefined:()=>En,ulid:()=>si,uint64:()=>qn,uint32:()=>Kn,tuple:()=>cI,trim:()=>JD,treeifyError:()=>BR,transform:()=>XL,toUpperCase:()=>YD,toLowerCase:()=>XD,toJSONSchema:()=>Tq,templateLiteral:()=>fn,symbol:()=>Ln,superRefine:()=>BT,success:()=>bn,stringbool:()=>ln,stringFormat:()=>Zn,string:()=>N1,strictObject:()=>Cn,startsWith:()=>eZ,slugify:()=>WD,size:()=>NY,setErrorMap:()=>rM1,set:()=>jn,safeParseAsync:()=>EI,safeParse:()=>LI,safeEncodeAsync:()=>II,safeEncode:()=>PI,safeDecodeAsync:()=>TI,safeDecode:()=>RI,registry:()=>qq,regexes:()=>x7,regex:()=>aZ,refine:()=>KT,record:()=>x5,readonly:()=>DT,property:()=>Rq,promise:()=>vn,prettifyError:()=>wR,preprocess:()=>pn,prefault:()=>FT,positive:()=>Nq,pipe:()=>xH,partialRecord:()=>Rn,parseAsync:()=>qI,parse:()=>wI,overwrite:()=>k5,optional:()=>b5,object:()=>E0,number:()=>f7,nullish:()=>kn,nullable:()=>bH,null:()=>kI,normalize:()=>AD,nonpositive:()=>Mq,nonoptional:()=>AT,nonnegative:()=>Pq,never:()=>FL,negative:()=>Cq,nativeEnum:()=>On,nanoid:()=>ri,nan:()=>xn,multipleOf:()=>RJ,minSize:()=>_$,minLength:()=>JA,mime:()=>FD,meta:()=>dn,maxSize:()=>IJ,maxLength:()=>CY,map:()=>Tn,mac:()=>$n,lte:()=>m3,lt:()=>O$,lowercase:()=>tZ,looseRecord:()=>In,looseObject:()=>AL,locales:()=>OH,literal:()=>Sn,length:()=>MY,lazy:()=>HT,ksuid:()=>ei,keyof:()=>Nn,jwt:()=>Wn,json:()=>mH,iso:()=>ZD,ipv6:()=>fH,ipv4:()=>jY,intersection:()=>mI,int64:()=>wn,int32:()=>Qn,int:()=>fq,instanceof:()=>cn,includes:()=>oZ,httpUrl:()=>ii,hostname:()=>Dn,hex:()=>Gn,hash:()=>zn,guid:()=>hi,gte:()=>O8,gt:()=>S$,globalRegistry:()=>I9,getErrorMap:()=>aM1,function:()=>yn,fromJSONSchema:()=>nn,formatError:()=>CH,float64:()=>Un,float32:()=>Hn,flattenError:()=>NH,file:()=>_n,exactOptional:()=>tI,enum:()=>KD,endsWith:()=>$D,encodeAsync:()=>CI,encode:()=>VI,emoji:()=>ni,email:()=>G3,e164:()=>Yn,discriminatedUnion:()=>Pn,describe:()=>mn,decodeAsync:()=>MI,decode:()=>NI,date:()=>v7,custom:()=>hn,cuid2:()=>ti,cuid:()=>ai,core:()=>XA,config:()=>M4,coerce:()=>u7,codec:()=>gn,clone:()=>j8,cidrv6:()=>An,cidrv4:()=>Fn,check:()=>un,catch:()=>YT,boolean:()=>Z9,bigint:()=>Bn,base64url:()=>Xn,base64:()=>Jn,array:()=>y7,any:()=>d3,_function:()=>yn,_default:()=>eI,_ZodString:()=>vq,ZodXor:()=>yI,ZodXID:()=>lq,ZodVoid:()=>fI,ZodUnknown:()=>xI,ZodUnion:()=>yH,ZodUndefined:()=>SI,ZodUUID:()=>k$,ZodURL:()=>gH,ZodULID:()=>cq,ZodType:()=>O0,ZodTuple:()=>dI,ZodTransform:()=>rI,ZodTemplateLiteral:()=>GT,ZodSymbol:()=>OI,ZodSuccess:()=>JT,ZodStringFormat:()=>d6,ZodString:()=>GD,ZodSet:()=>pI,ZodRecord:()=>uH,ZodRealError:()=>D3,ZodReadonly:()=>ZT,ZodPromise:()=>UT,ZodPrefault:()=>$T,ZodPipe:()=>WL,ZodOptional:()=>TJ,ZodObject:()=>b$,ZodNumberFormat:()=>OY,ZodNumber:()=>HD,ZodNullable:()=>sI,ZodNull:()=>_I,ZodNonOptional:()=>YL,ZodNever:()=>gI,ZodNanoID:()=>hq,ZodNaN:()=>WT,ZodMap:()=>lI,ZodMAC:()=>jI,ZodLiteral:()=>iI,ZodLazy:()=>zT,ZodKSUID:()=>pq,ZodJWT:()=>eq,ZodIssueCode:()=>nM1,ZodIntersection:()=>hI,ZodISOTime:()=>_q,ZodISODuration:()=>kq,ZodISODateTime:()=>Oq,ZodISODate:()=>Sq,ZodIPv6:()=>nq,ZodIPv4:()=>iq,ZodGUID:()=>kH,ZodFunction:()=>QT,ZodFirstPartyTypeKind:()=>wT,ZodFile:()=>nI,ZodExactOptional:()=>aI,ZodError:()=>iM1,ZodEnum:()=>DD,ZodEmoji:()=>uq,ZodEmail:()=>yq,ZodE164:()=>oq,ZodDiscriminatedUnion:()=>uI,ZodDefault:()=>oI,ZodDate:()=>vH,ZodCustomStringFormat:()=>zD,ZodCustom:()=>hH,ZodCodec:()=>ZL,ZodCatch:()=>XT,ZodCUID2:()=>dq,ZodCUID:()=>mq,ZodCIDRv6:()=>aq,ZodCIDRv4:()=>rq,ZodBoolean:()=>UD,ZodBigIntFormat:()=>$L,ZodBigInt:()=>QD,ZodBase64URL:()=>sq,ZodBase64:()=>tq,ZodArray:()=>vI,ZodAny:()=>bI,TimePrecision:()=>zI,NEVER:()=>HR,$output:()=>dR,$input:()=>cR,$brand:()=>UR});var rn=x(()=>{g7();g7();Cl();g7();jq();oM1();Gp();bq();bq();eM1();gq();BI();yi();ui();tM1();M4(Qq())});var y4={};l2(y4,{z:()=>qT,xor:()=>Mn,xid:()=>oi,void:()=>Vn,uuidv7:()=>li,uuidv6:()=>ci,uuidv4:()=>di,uuid:()=>mi,util:()=>I1,url:()=>pi,uppercase:()=>sZ,unknown:()=>TY,union:()=>JL,undefined:()=>En,ulid:()=>si,uint64:()=>qn,uint32:()=>Kn,tuple:()=>cI,trim:()=>JD,treeifyError:()=>BR,transform:()=>XL,toUpperCase:()=>YD,toLowerCase:()=>XD,toJSONSchema:()=>Tq,templateLiteral:()=>fn,symbol:()=>Ln,superRefine:()=>BT,success:()=>bn,stringbool:()=>ln,stringFormat:()=>Zn,string:()=>N1,strictObject:()=>Cn,startsWith:()=>eZ,slugify:()=>WD,size:()=>NY,setErrorMap:()=>rM1,set:()=>jn,safeParseAsync:()=>EI,safeParse:()=>LI,safeEncodeAsync:()=>II,safeEncode:()=>PI,safeDecodeAsync:()=>TI,safeDecode:()=>RI,registry:()=>qq,regexes:()=>x7,regex:()=>aZ,refine:()=>KT,record:()=>x5,readonly:()=>DT,property:()=>Rq,promise:()=>vn,prettifyError:()=>wR,preprocess:()=>pn,prefault:()=>FT,positive:()=>Nq,pipe:()=>xH,partialRecord:()=>Rn,parseAsync:()=>qI,parse:()=>wI,overwrite:()=>k5,optional:()=>b5,object:()=>E0,number:()=>f7,nullish:()=>kn,nullable:()=>bH,null:()=>kI,normalize:()=>AD,nonpositive:()=>Mq,nonoptional:()=>AT,nonnegative:()=>Pq,never:()=>FL,negative:()=>Cq,nativeEnum:()=>On,nanoid:()=>ri,nan:()=>xn,multipleOf:()=>RJ,minSize:()=>_$,minLength:()=>JA,mime:()=>FD,meta:()=>dn,maxSize:()=>IJ,maxLength:()=>CY,map:()=>Tn,mac:()=>$n,lte:()=>m3,lt:()=>O$,lowercase:()=>tZ,looseRecord:()=>In,looseObject:()=>AL,locales:()=>OH,literal:()=>Sn,length:()=>MY,lazy:()=>HT,ksuid:()=>ei,keyof:()=>Nn,jwt:()=>Wn,json:()=>mH,iso:()=>ZD,ipv6:()=>fH,ipv4:()=>jY,intersection:()=>mI,int64:()=>wn,int32:()=>Qn,int:()=>fq,instanceof:()=>cn,includes:()=>oZ,httpUrl:()=>ii,hostname:()=>Dn,hex:()=>Gn,hash:()=>zn,guid:()=>hi,gte:()=>O8,gt:()=>S$,globalRegistry:()=>I9,getErrorMap:()=>aM1,function:()=>yn,fromJSONSchema:()=>nn,formatError:()=>CH,float64:()=>Un,float32:()=>Hn,flattenError:()=>NH,file:()=>_n,exactOptional:()=>tI,enum:()=>KD,endsWith:()=>$D,encodeAsync:()=>CI,encode:()=>VI,emoji:()=>ni,email:()=>G3,e164:()=>Yn,discriminatedUnion:()=>Pn,describe:()=>mn,default:()=>fE0,decodeAsync:()=>MI,decode:()=>NI,date:()=>v7,custom:()=>hn,cuid2:()=>ti,cuid:()=>ai,core:()=>XA,config:()=>M4,coerce:()=>u7,codec:()=>gn,clone:()=>j8,cidrv6:()=>An,cidrv4:()=>Fn,check:()=>un,catch:()=>YT,boolean:()=>Z9,bigint:()=>Bn,base64url:()=>Xn,base64:()=>Jn,array:()=>y7,any:()=>d3,_function:()=>yn,_default:()=>eI,_ZodString:()=>vq,ZodXor:()=>yI,ZodXID:()=>lq,ZodVoid:()=>fI,ZodUnknown:()=>xI,ZodUnion:()=>yH,ZodUndefined:()=>SI,ZodUUID:()=>k$,ZodURL:()=>gH,ZodULID:()=>cq,ZodType:()=>O0,ZodTuple:()=>dI,ZodTransform:()=>rI,ZodTemplateLiteral:()=>GT,ZodSymbol:()=>OI,ZodSuccess:()=>JT,ZodStringFormat:()=>d6,ZodString:()=>GD,ZodSet:()=>pI,ZodRecord:()=>uH,ZodRealError:()=>D3,ZodReadonly:()=>ZT,ZodPromise:()=>UT,ZodPrefault:()=>$T,ZodPipe:()=>WL,ZodOptional:()=>TJ,ZodObject:()=>b$,ZodNumberFormat:()=>OY,ZodNumber:()=>HD,ZodNullable:()=>sI,ZodNull:()=>_I,ZodNonOptional:()=>YL,ZodNever:()=>gI,ZodNanoID:()=>hq,ZodNaN:()=>WT,ZodMap:()=>lI,ZodMAC:()=>jI,ZodLiteral:()=>iI,ZodLazy:()=>zT,ZodKSUID:()=>pq,ZodJWT:()=>eq,ZodIssueCode:()=>nM1,ZodIntersection:()=>hI,ZodISOTime:()=>_q,ZodISODuration:()=>kq,ZodISODateTime:()=>Oq,ZodISODate:()=>Sq,ZodIPv6:()=>nq,ZodIPv4:()=>iq,ZodGUID:()=>kH,ZodFunction:()=>QT,ZodFirstPartyTypeKind:()=>wT,ZodFile:()=>nI,ZodExactOptional:()=>aI,ZodError:()=>iM1,ZodEnum:()=>DD,ZodEmoji:()=>uq,ZodEmail:()=>yq,ZodE164:()=>oq,ZodDiscriminatedUnion:()=>uI,ZodDefault:()=>oI,ZodDate:()=>vH,ZodCustomStringFormat:()=>zD,ZodCustom:()=>hH,ZodCodec:()=>ZL,ZodCatch:()=>XT,ZodCUID2:()=>dq,ZodCUID:()=>mq,ZodCIDRv6:()=>aq,ZodCIDRv4:()=>rq,ZodBoolean:()=>UD,ZodBigIntFormat:()=>$L,ZodBigInt:()=>QD,ZodBase64URL:()=>sq,ZodBase64:()=>tq,ZodArray:()=>vI,ZodAny:()=>bI,TimePrecision:()=>zI,NEVER:()=>HR,$output:()=>dR,$input:()=>cR,$brand:()=>UR});var fE0;var u4=x(()=>{rn();rn();fE0=qT});function an($){return jY().safeParse($).success||fH().safeParse($).success}function vE0($){return fH().safeParse($).success}function yE0($){let F=$.toLowerCase();if(F.startsWith("::ffff:")){let J=F.substring(7);if(jY().safeParse(J).success)return J}let A=$.split(":");if(A.length===7&&A[5]?.toLowerCase()==="ffff"){let J=A[6];if(J&&jY().safeParse(J).success)return J}if(F.includes("::ffff:")||F.includes(":ffff:")){let J=$P1($);if(J.length===8&&J[0]==="0000"&&J[1]==="0000"&&J[2]==="0000"&&J[3]==="0000"&&J[4]==="0000"&&J[5]==="ffff"&&J[6]&&J[7])return`${Number.parseInt(J[6].substring(0,2),16)}.${Number.parseInt(J[6].substring(2,4),16)}.${Number.parseInt(J[7].substring(0,2),16)}.${Number.parseInt(J[7].substring(2,4),16)}`}return null}function $P1($){if($.includes("::")){let F=$.split("::"),A=F[0]?F[0].split(":"):[],J=F[1]?F[1].split(":"):[],X=8-A.length-J.length,Y=Array(X).fill("0000"),W=A.map((D)=>D.padStart(4,"0")),Z=J.map((D)=>D.padStart(4,"0"));return[...W,...Y,...Z]}return $.split(":").map((F)=>F.padStart(4,"0"))}function uE0($,F){let A=$P1($);if(F&&F<128){let J=F;return A.map((X)=>{if(J<=0)return"0000";if(J>=16)return J-=16,X;let Y=Number.parseInt(X,16)&(65535<<16-J&65535);return J=0,Y.toString(16).padStart(4,"0")}).join(":").toLowerCase()}return A.join(":").toLowerCase()}function tn($,F={}){if(jY().safeParse($).success)return $.toLowerCase();if(!vE0($))return $.toLowerCase();let A=yE0($);if(A)return A.toLowerCase();return uE0($,F.ipv6Subnet||128)}function sn($,F){return`${$}|${F}`}var FP1=x(()=>{u4()});function hE0($){return $?$!=="false":!1}function j6($,F){if(typeof process<"u"&&process.env)return process.env[$]??F;if(typeof Deno<"u")return Deno.env.get($)??F;if(typeof Bun<"u")return Bun.env[$]??F;return F}function ET($,F=!0){let A=j6($);if(!A)return F;return A!=="0"&&A.toLowerCase()!=="false"&&A!==""}var LT,DL=($)=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||($?LT:globalThis),X6,GL,SY,BD=()=>GL==="dev"||GL==="development",jJ=()=>GL==="test"||hE0(X6.TEST),on;var en=x(()=>{LT=Object.create(null),X6=new Proxy(LT,{get($,F){return DL()[F]??LT[F]},has($,F){return F in DL()||F in LT},set($,F,A){let J=DL(!0);return J[F]=A,!0},deleteProperty($,F){if(!F)return!1;let A=DL(!0);return delete A[F],!0},ownKeys(){let $=DL(!0);return Object.keys($)}});GL=typeof process<"u"&&process.env&&"development"||"",SY=GL==="production";on=Object.freeze({get BETTER_AUTH_SECRET(){return j6("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return j6("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return j6("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return j6("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return j6("NODE_ENV","development")},get PACKAGE_VERSION(){return j6("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return j6("BETTER_AUTH_TELEMETRY_ENDPOINT","https://telemetry.better-auth.com/v1/track")}})});function HL(){if(j6("FORCE_COLOR")!==void 0)switch(j6("FORCE_COLOR")){case"":case"1":case"true":return T9;case"2":return YA;case"3":return h7;default:return zL}if(j6("NODE_DISABLE_COLORS")!==void 0&&j6("NODE_DISABLE_COLORS")!==""||j6("NO_COLOR")!==void 0&&j6("NO_COLOR")!==""||j6("TERM")==="dumb")return zL;if(j6("TMUX"))return h7;if("TF_BUILD"in X6&&"AGENT_NAME"in X6)return T9;if("CI"in X6){for(let{0:$,1:F}of mE0)if($ in X6)return F;if(j6("CI_NAME")==="codeship")return YA;return zL}if("TEAMCITY_VERSION"in X6)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(j6("TEAMCITY_VERSION"))!==null?T9:zL;switch(j6("TERM_PROGRAM")){case"iTerm.app":if(!j6("TERM_PROGRAM_VERSION")||/^[0-2]\./.exec(j6("TERM_PROGRAM_VERSION"))!==null)return YA;return h7;case"HyperTerm":case"MacTerm":return h7;case"Apple_Terminal":return YA}if(j6("COLORTERM")==="truecolor"||j6("COLORTERM")==="24bit")return h7;if(j6("TERM")){if(/truecolor/.exec(j6("TERM"))!==null)return h7;if(/^xterm-256/.exec(j6("TERM"))!==null)return YA;let $=j6("TERM").toLowerCase();if(AP1[$])return AP1[$];if(dE0.some((F)=>F.exec($)!==null))return T9}if(j6("COLORTERM"))return T9;return zL}var zL=1,T9=4,YA=8,h7=24,AP1,mE0,dE0;var VT=x(()=>{en();AP1={eterm:T9,cons25:T9,console:T9,cygwin:T9,dtterm:T9,gnome:T9,hurd:T9,jfbterm:T9,konsole:T9,kterm:T9,mlterm:T9,mosh:h7,putty:T9,st:T9,"rxvt-unicode-24bit":h7,terminator:h7,"xterm-kitty":h7},mE0=new Map(Object.entries({APPVEYOR:YA,BUILDKITE:YA,CIRCLECI:h7,DRONE:YA,GITEA_ACTIONS:h7,GITHUB_ACTIONS:h7,GITLAB_CI:YA,TRAVIS:YA})),dE0=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/]});function dH($,F){return NT.indexOf(F)>=NT.indexOf($)}var h4,NT,cE0,lE0=($,F,A)=>{let J=new Date().toISOString();if(A)return`${h4.dim}${J}${h4.reset} ${cE0[$]}${$.toUpperCase()}${h4.reset} ${h4.bright}[Better Auth]:${h4.reset} ${F}`;return`${J} ${$.toUpperCase()} [Better Auth]: ${F}`},OJ=($)=>{let F=$?.disabled!==!0,A=$?.level??"error",J=$?.disableColors!==void 0?!$.disableColors:HL()!==1,X=(Y,W,Z=[])=>{if(!F||!dH(A,Y))return;let D=lE0(Y,W,J);if(!$||typeof $.log!=="function"){if(Y==="error")console.error(D,...Z);else if(Y==="warn")console.warn(D,...Z);else console.log(D,...Z);return}$.log(Y==="success"?"info":Y,W,...Z)};return{...Object.fromEntries(NT.map((Y)=>[Y,(...[W,...Z])=>X(Y,W,Z)])),get level(){return A}}},$0;var z3=x(()=>{VT();h4={reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",undim:"\x1B[22m",underscore:"\x1B[4m",blink:"\x1B[5m",reverse:"\x1B[7m",hidden:"\x1B[8m",fg:{black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"},bg:{black:"\x1B[40m",red:"\x1B[41m",green:"\x1B[42m",yellow:"\x1B[43m",blue:"\x1B[44m",magenta:"\x1B[45m",cyan:"\x1B[46m",white:"\x1B[47m"}},NT=["debug","info","success","warn","error"];cE0={info:h4.fg.blue,success:h4.fg.green,warn:h4.fg.yellow,error:h4.fg.red,debug:h4.fg.magenta},$0=OJ()});var c6=x(()=>{en();VT();z3()});function j2($){function F(A,J){if(typeof J==="string"){if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z$/.test(J)){let X=new Date(J);if(!isNaN(X.getTime()))return X}}return J}try{if(typeof $!=="string")return $;return JSON.parse($,F)}catch(A){return $0.error("Error parsing JSON",{error:A}),null}}var $r=x(()=>{z3();c6()});var JP1=()=>{};var XP1=()=>{};var c3=x(()=>{KC1();rm();am();FP1();$r();JP1();XP1()});var c1;var YP1=x(()=>{rm();c3();c1=nm({USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_USER:"Failed to create user",FAILED_TO_CREATE_SESSION:"Failed to create session",FAILED_TO_UPDATE_USER:"Failed to update user",FAILED_TO_GET_SESSION:"Failed to get session",INVALID_PASSWORD:"Invalid password",INVALID_EMAIL:"Invalid email",INVALID_EMAIL_OR_PASSWORD:"Invalid email or password",SOCIAL_ACCOUNT_ALREADY_LINKED:"Social account already linked",PROVIDER_NOT_FOUND:"Provider not found",INVALID_TOKEN:"Invalid token",ID_TOKEN_NOT_SUPPORTED:"id_token not supported",FAILED_TO_GET_USER_INFO:"Failed to get user info",USER_EMAIL_NOT_FOUND:"User email not found",EMAIL_NOT_VERIFIED:"Email not verified",PASSWORD_TOO_SHORT:"Password too short",PASSWORD_TOO_LONG:"Password too long",USER_ALREADY_EXISTS:"User already exists.",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",EMAIL_CAN_NOT_BE_UPDATED:"Email can not be updated",CREDENTIAL_ACCOUNT_NOT_FOUND:"Credential account not found",SESSION_EXPIRED:"Session expired. Re-authenticate to perform this action.",FAILED_TO_UNLINK_LAST_ACCOUNT:"You can't unlink your last account",ACCOUNT_NOT_FOUND:"Account not found",USER_ALREADY_HAS_PASSWORD:"User already has a password. Provide that to delete the account.",CROSS_SITE_NAVIGATION_LOGIN_BLOCKED:"Cross-site navigation login blocked. This request appears to be a CSRF attack.",VERIFICATION_EMAIL_NOT_ENABLED:"Verification email isn't enabled",EMAIL_ALREADY_VERIFIED:"Email is already verified",EMAIL_MISMATCH:"Email mismatch",SESSION_NOT_FRESH:"Session is not fresh",LINKED_ACCOUNT_ALREADY_EXISTS:"Linked account already exists",INVALID_ORIGIN:"Invalid origin",INVALID_CALLBACK_URL:"Invalid callbackURL",INVALID_REDIRECT_URL:"Invalid redirectURL",INVALID_ERROR_CALLBACK_URL:"Invalid errorCallbackURL",INVALID_NEW_USER_CALLBACK_URL:"Invalid newUserCallbackURL",MISSING_OR_NULL_ORIGIN:"Missing or null Origin",CALLBACK_URL_REQUIRED:"callbackURL is required",FAILED_TO_CREATE_VERIFICATION:"Unable to create verification",FIELD_NOT_ALLOWED:"Field not allowed to be set",ASYNC_VALIDATION_NOT_SUPPORTED:"Async validation is not supported",VALIDATION_ERROR:"Validation Error",MISSING_FIELD:"Field is required"})});var o1;var l6=x(()=>{YP1();o1=class extends Error{constructor($,F){super($,F);this.name="BetterAuthError",this.message=$,this.stack=""}}});var l3=($)=>{let F=($.plugins??[]).reduce((z,H)=>{let U=H.schema;if(!U)return z;for(let[Q,B]of Object.entries(U))z[Q]={fields:{...z[Q]?.fields,...B.fields},modelName:B.modelName||Q};return z},{}),A=$.rateLimit?.storage==="database",J={rateLimit:{modelName:$.rateLimit?.modelName||"rateLimit",fields:{key:{type:"string",fieldName:$.rateLimit?.fields?.key||"key"},count:{type:"number",fieldName:$.rateLimit?.fields?.count||"count"},lastRequest:{type:"number",bigint:!0,fieldName:$.rateLimit?.fields?.lastRequest||"lastRequest"}}}},{user:X,session:Y,account:W,verification:Z,...D}=F,G={session:{modelName:$.session?.modelName||"session",fields:{expiresAt:{type:"date",required:!0,fieldName:$.session?.fields?.expiresAt||"expiresAt"},token:{type:"string",required:!0,fieldName:$.session?.fields?.token||"token",unique:!0},createdAt:{type:"date",required:!0,fieldName:$.session?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:$.session?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},ipAddress:{type:"string",required:!1,fieldName:$.session?.fields?.ipAddress||"ipAddress"},userAgent:{type:"string",required:!1,fieldName:$.session?.fields?.userAgent||"userAgent"},userId:{type:"string",fieldName:$.session?.fields?.userId||"userId",references:{model:$.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,index:!0},...Y?.fields,...$.session?.additionalFields},order:2}};return{user:{modelName:$.user?.modelName||"user",fields:{name:{type:"string",required:!0,fieldName:$.user?.fields?.name||"name",sortable:!0},email:{type:"string",unique:!0,required:!0,fieldName:$.user?.fields?.email||"email",sortable:!0},emailVerified:{type:"boolean",defaultValue:!1,required:!0,fieldName:$.user?.fields?.emailVerified||"emailVerified",input:!1},image:{type:"string",required:!1,fieldName:$.user?.fields?.image||"image"},createdAt:{type:"date",defaultValue:()=>new Date,required:!0,fieldName:$.user?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",defaultValue:()=>new Date,onUpdate:()=>new Date,required:!0,fieldName:$.user?.fields?.updatedAt||"updatedAt"},...X?.fields,...$.user?.additionalFields},order:1},...!$.secondaryStorage||$.session?.storeSessionInDatabase?G:{},account:{modelName:$.account?.modelName||"account",fields:{accountId:{type:"string",required:!0,fieldName:$.account?.fields?.accountId||"accountId"},providerId:{type:"string",required:!0,fieldName:$.account?.fields?.providerId||"providerId"},userId:{type:"string",references:{model:$.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,fieldName:$.account?.fields?.userId||"userId",index:!0},accessToken:{type:"string",required:!1,returned:!1,fieldName:$.account?.fields?.accessToken||"accessToken"},refreshToken:{type:"string",required:!1,returned:!1,fieldName:$.account?.fields?.refreshToken||"refreshToken"},idToken:{type:"string",required:!1,returned:!1,fieldName:$.account?.fields?.idToken||"idToken"},accessTokenExpiresAt:{type:"date",required:!1,returned:!1,fieldName:$.account?.fields?.accessTokenExpiresAt||"accessTokenExpiresAt"},refreshTokenExpiresAt:{type:"date",required:!1,returned:!1,fieldName:$.account?.fields?.refreshTokenExpiresAt||"refreshTokenExpiresAt"},scope:{type:"string",required:!1,fieldName:$.account?.fields?.scope||"scope"},password:{type:"string",required:!1,returned:!1,fieldName:$.account?.fields?.password||"password"},createdAt:{type:"date",required:!0,fieldName:$.account?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:$.account?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},...W?.fields,...$.account?.additionalFields},order:3},verification:{modelName:$.verification?.modelName||"verification",fields:{identifier:{type:"string",required:!0,fieldName:$.verification?.fields?.identifier||"identifier",index:!0},value:{type:"string",required:!0,fieldName:$.verification?.fields?.value||"value"},expiresAt:{type:"date",required:!0,fieldName:$.verification?.fields?.expiresAt||"expiresAt"},createdAt:{type:"date",required:!0,defaultValue:()=>new Date,fieldName:$.verification?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!0,defaultValue:()=>new Date,onUpdate:()=>new Date,fieldName:$.verification?.fields?.updatedAt||"updatedAt"},...Z?.fields,...$.verification?.additionalFields},order:4},...D,...A?J:{}}};var Qr=()=>{};var m7=({usePlural:$,schema:F})=>{return(J)=>{if($&&J.charAt(J.length-1)==="s"){let Y=J.slice(0,-1),W=F[Y]?Y:void 0;if(!W)W=Object.entries(F).find(([Z,D])=>D.modelName===Y)?.[0];if(W)return W}let X=F[J]?J:void 0;if(!X)X=Object.entries(F).find(([Y,W])=>W.modelName===J)?.[0];if(!X)throw new o1(`Model "${J}" not found in schema`);return X}};var fY=x(()=>{l6()});var LD=({schema:$,usePlural:F})=>{let A=m7({schema:$,usePlural:F});return({field:X,model:Y})=>{if(X==="id"||X==="_id")return"id";let W=A(Y),Z=$[W]?.fields[X];if(!Z){let D=Object.entries($[W].fields).find(([G,z])=>z.fieldName===X);if(D)Z=D[1],X=D[0]}if(!Z)throw new o1(`Field ${X} not found in model ${W}`);return X}};var VL=x(()=>{l6();fY()});var NL=({usePlural:$,schema:F,disableIdGeneration:A,options:J,customIdGenerator:X,supportsUUIDs:Y})=>{let W=m7({usePlural:$,schema:F});return({customModelName:D,forceAllowId:G})=>{let z=J.advanced?.database?.useNumberId||J.advanced?.database?.generateId==="serial",H=J.advanced?.database?.generateId==="uuid",U=(()=>{if(A)return!1;else if(z&&!G)return!1;else if(H)return!Y;else return!0})(),Q=W(D??"id");return{type:z?"number":"string",required:U?!0:!1,...U?{defaultValue(){if(A)return;let B=J.advanced?.database?.generateId;if(B===!1||z)return;if(typeof B==="function")return B({model:Q});if(X)return X({model:Q});if(B==="uuid")return crypto.randomUUID();return S5()}}:{},transform:{input:(B)=>{if(!B)return;if(z){let q=Number(B);if(isNaN(q))return;return q}if(H){if(U&&!G)return B;if(A)return;if(Y)return;if(G&&typeof B==="string")if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(B))return B;else{let q=Error().stack?.split(`
`).filter((L,E)=>E!==1).join(`
`).replace("Error:","");$0.warn("[Adapter Factory] - Invalid UUID value for field `id` provided when `forceAllowId` is true. Generating a new UUID.",q)}if(typeof B!=="string"&&!Y)return crypto.randomUUID();return}return B},output:(B)=>{if(!B)return;return String(B)}}}}};var mT=x(()=>{z3();c6();am();c3();fY()});var dr=({usePlural:$,schema:F,options:A,customIdGenerator:J,disableIdGeneration:X})=>{let Y=m7({usePlural:$,schema:F}),W=LD({usePlural:$,schema:F}),Z=NL({usePlural:$,schema:F,options:A,customIdGenerator:J,disableIdGeneration:X});return({model:G,field:z})=>{let H=Y(G),U=W({field:z,model:H}),Q=F[H].fields;Q.id=Z({customModelName:H});let B=Q[U];if(!B)throw new o1(`Field ${z} not found in model ${G}`);return B}};var cr=x(()=>{l6();fY();VL();mT()});var CL=({schema:$,usePlural:F})=>{let A=m7({schema:$,usePlural:F}),J=LD({schema:$,usePlural:F});function X({model:Y,field:W}){let Z=A(Y),D=J({model:Z,field:W});return $[Z]?.fields[D]?.fieldName||D}return X};var lr=x(()=>{fY();VL()});var ML=({usePlural:$,schema:F})=>{let A=m7({schema:F,usePlural:$});return(X)=>{let Y=A(X);if(F&&F[Y]&&F[Y].modelName!==X)return $?`${F[Y].modelName}s`:F[Y].modelName;return $?`${X}s`:X}};var pr=x(()=>{fY()});function ir($,F,A){if(A==="update"){if($===void 0&&F.onUpdate!==void 0){if(typeof F.onUpdate==="function")return F.onUpdate();return F.onUpdate}return $}if(A==="create"){if($===void 0||F.required===!0&&$===null){if(F.defaultValue!==void 0){if(typeof F.defaultValue==="function")return F.defaultValue();return F.defaultValue}}}return $}var nr=()=>{};function t2($){if(HL()<8)return`#${$}`;return`${h4.fg.magenta}#${$}${h4.reset}`}function s2($,F){return`${h4.bg.black}${h4.fg.yellow}[${$}/${F}]${h4.reset}`}function o2($){return`${h4.bright}${$}${h4.reset}`}function D9($){return`${h4.dim}(${$})${h4.reset}`}var dT,_8=-1,cV0=($)=>(F)=>F($),bJ=({adapter:$,config:F})=>(A)=>{let J=Math.random().toString(36).substring(2,15),X={...F,supportsBooleans:F.supportsBooleans??!0,supportsDates:F.supportsDates??!0,supportsJSON:F.supportsJSON??!1,adapterName:F.adapterName??F.adapterId,supportsNumericIds:F.supportsNumericIds??!0,supportsUUIDs:F.supportsUUIDs??!1,supportsArrays:F.supportsArrays??!1,transaction:F.transaction??!1,disableTransformInput:F.disableTransformInput??!1,disableTransformOutput:F.disableTransformOutput??!1,disableTransformJoin:F.disableTransformJoin??!1};if((A.advanced?.database?.useNumberId===!0||A.advanced?.database?.generateId==="serial")&&X.supportsNumericIds===!1)throw new o1(`[${X.adapterName}] Your database or database adapter does not support numeric ids. Please disable "useNumberId" in your config.`);let Y=l3(A),W=(...C)=>{if(X.debugLogs===!0||typeof X.debugLogs==="object"){let M=OJ({level:"info"});if(typeof X.debugLogs==="object"&&"isRunningAdapterTests"in X.debugLogs){if(X.debugLogs.isRunningAdapterTests)C.shift(),dT.push({instance:J,args:C});return}if(typeof X.debugLogs==="object"&&X.debugLogs.logCondition&&!X.debugLogs.logCondition?.())return;if(typeof C[0]==="object"&&"method"in C[0]){let I=C.shift().method;if(typeof X.debugLogs==="object"){if(I==="create"&&!X.debugLogs.create)return;else if(I==="update"&&!X.debugLogs.update)return;else if(I==="updateMany"&&!X.debugLogs.updateMany)return;else if(I==="findOne"&&!X.debugLogs.findOne)return;else if(I==="findMany"&&!X.debugLogs.findMany)return;else if(I==="delete"&&!X.debugLogs.delete)return;else if(I==="deleteMany"&&!X.debugLogs.deleteMany)return;else if(I==="count"&&!X.debugLogs.count)return}M.info(`[${X.adapterName}]`,...C)}else M.info(`[${X.adapterName}]`,...C)}},Z=OJ(A.logger),D=m7({usePlural:X.usePlural,schema:Y}),G=LD({usePlural:X.usePlural,schema:Y}),z=ML({usePlural:X.usePlural,schema:Y}),H=CL({schema:Y,usePlural:X.usePlural}),U=NL({schema:Y,options:A,usePlural:X.usePlural,disableIdGeneration:X.disableIdGeneration,customIdGenerator:X.customIdGenerator,supportsUUIDs:X.supportsUUIDs}),Q=dr({schema:Y,options:A,usePlural:X.usePlural,disableIdGeneration:X.disableIdGeneration,customIdGenerator:X.customIdGenerator}),B=async(C,M,I,T)=>{let j={},b=Y[M].fields,g=X.mapKeysTransformInput??{},f=A.advanced?.database?.useNumberId||A.advanced?.database?.generateId==="serial";b.id=U({customModelName:M,forceAllowId:T&&"id"in C});for(let d in b){let s=C[d],n=b[d],L1=g[d]||b[d].fieldName||d;if(s===void 0&&(n.defaultValue===void 0&&!n.transform?.input&&!(I==="update"&&n.onUpdate)||I==="update"&&!n.onUpdate))continue;if(n&&n.type==="date"&&!(s instanceof Date)&&typeof s==="string")try{s=new Date(s)}catch{Z.error("[Adapter Factory] Failed to convert string to date",{value:s,field:d})}let X1=ir(s,n,I);if(n.transform?.input)X1=await n.transform.input(X1);if(n.references?.field==="id"&&f)if(Array.isArray(X1))X1=X1.map((M1)=>M1!==null?Number(M1):null);else X1=X1!==null?Number(X1):null;else if(X.supportsJSON===!1&&typeof X1==="object"&&n.type==="json")X1=JSON.stringify(X1);else if(X.supportsArrays===!1&&Array.isArray(X1)&&(n.type==="string[]"||n.type==="number[]"))X1=JSON.stringify(X1);else if(X.supportsDates===!1&&X1 instanceof Date&&n.type==="date")X1=X1.toISOString();else if(X.supportsBooleans===!1&&typeof X1==="boolean")X1=X1?1:0;if(X.customTransformInput)X1=X.customTransformInput({data:X1,action:I,field:L1,fieldAttributes:n,model:z(M),schema:Y,options:A});if(X1!==void 0)j[L1]=X1}return j},q=async(C,M,I=[],T)=>{let j=async(f,d,s=[])=>{if(!f)return null;let n=X.mapKeysTransformOutput??{},L1={},X1=Y[D(d)].fields,M1=Object.entries(n).find(([g1,j1])=>j1==="id")?.[0];X1[M1??"id"]={type:A.advanced?.database?.useNumberId||A.advanced?.database?.generateId==="serial"?"number":"string"};for(let g1 in X1){if(s.length&&!s.includes(g1))continue;let j1=X1[g1];if(j1){let i1=j1.fieldName||g1,K1=f[Object.entries(n).find(([I4,T4])=>T4===i1)?.[0]||i1];if(j1.transform?.output)K1=await j1.transform.output(K1);let l0=n[g1]||g1;if(i1==="id"||j1.references?.field==="id"){if(typeof K1<"u"&&K1!==null)K1=String(K1)}else if(X.supportsJSON===!1&&typeof K1==="string"&&j1.type==="json")K1=j2(K1);else if(X.supportsArrays===!1&&typeof K1==="string"&&(j1.type==="string[]"||j1.type==="number[]"))K1=j2(K1);else if(X.supportsDates===!1&&typeof K1==="string"&&j1.type==="date")K1=new Date(K1);else if(X.supportsBooleans===!1&&typeof K1==="number"&&j1.type==="boolean")K1=K1===1;if(X.customTransformOutput)K1=X.customTransformOutput({data:K1,field:l0,fieldAttributes:j1,select:s,model:z(d),schema:Y,options:A});L1[l0]=K1}}return L1};if(!T||Object.keys(T).length===0)return await j(C,M,I);M=D(M);let b=await j(C,M,I),g=Object.entries(T).map(([f,d])=>({modelName:z(f),defaultModelName:D(f),joinConfig:d}));if(!C)return null;for(let{modelName:f,defaultModelName:d,joinConfig:s}of g){let n=await(async()=>{if(A.experimental?.joins)return C[f];else return await V({baseModel:M,baseData:b,joinModel:f,specificJoinConfig:s})})();if(n===void 0||n===null)n=s.relation==="one-to-one"?null:[];if(s.relation==="one-to-many"&&!Array.isArray(n))n=[n];let L1=[];if(Array.isArray(n))for(let X1 of n){let M1=await j(X1,f,[]);L1.push(M1)}else{let X1=await j(n,f,[]);L1.push(X1)}b[d]=(s.relation==="one-to-one"?L1[0]:L1)??null}return b},L=({model:C,where:M,action:I})=>{if(!M)return;let T=X.mapKeysTransformInput??{};return M.map((j)=>{let{field:b,value:g,operator:f="eq",connector:d="AND"}=j;if(f==="in"){if(!Array.isArray(g))throw new o1("Value must be an array")}let s=g,n=D(C),L1=G({field:b,model:C}),X1=T[L1]||H({field:L1,model:n}),M1=Q({field:L1,model:n}),g1=A.advanced?.database?.useNumberId||A.advanced?.database?.generateId==="serial";if(L1==="id"||M1.references?.field==="id"){if(g1)if(Array.isArray(g))s=g.map(Number);else s=Number(g)}if(M1.type==="date"&&g instanceof Date&&!X.supportsDates)s=g.toISOString();if(M1.type==="boolean"&&typeof g==="boolean"&&!X.supportsBooleans)s=g?1:0;if(M1.type==="json"&&typeof g==="object"&&!X.supportsJSON)try{s=JSON.stringify(g)}catch(j1){throw Error(`Failed to stringify JSON value for field ${X1}`,{cause:j1})}if(X.customTransformInput)s=X.customTransformInput({data:s,fieldAttributes:M1,field:X1,model:z(C),schema:Y,options:A,action:I});return{operator:f,connector:d,field:X1,value:s}})},E=(C,M,I)=>{if(!M)return;if(Object.keys(M).length===0)return;let T={};for(let[j,b]of Object.entries(M)){if(!b)continue;let g=D(j),f=D(C),d=Object.entries(Y[g].fields).filter(([K1,l0])=>l0.references&&D(l0.references.model)===f),s=!0;if(!d.length)d=Object.entries(Y[f].fields).filter(([K1,l0])=>l0.references&&D(l0.references.model)===g),s=!1;if(!d.length)throw new o1(`No foreign key found for model ${j} and base model ${C} while performing join operation.`);else if(d.length>1)throw new o1(`Multiple foreign keys found for model ${j} and base model ${C} while performing join operation. Only one foreign key is supported.`);let[n,L1]=d[0];if(!L1.references)throw new o1(`No references found for foreign key ${n} on model ${j} while performing join operation.`);let X1,M1,g1;if(s)g1=L1.references.field,X1=H({model:C,field:g1}),M1=H({model:j,field:n});else g1=n,X1=H({model:C,field:g1}),M1=H({model:j,field:L1.references.field});if(I&&!I.includes(g1))I.push(g1);let j1=M1==="id"?!0:L1.unique??!1,i1=A.advanced?.database?.defaultFindManyLimit??100;if(j1)i1=1;else if(typeof b==="object"&&typeof b.limit==="number")i1=b.limit;T[z(j)]={on:{from:X1,to:M1},limit:i1,relation:j1?"one-to-one":"one-to-many"}}return{join:T,select:I}},V=async({baseModel:C,baseData:M,joinModel:I,specificJoinConfig:T})=>{if(!M)return M;let j=z(I),b=T.on.to,g=M[G({field:T.on.from,model:C})];if(g===null||g===void 0)return T.relation==="one-to-one"?null:[];let f,d=L({model:j,where:[{field:b,value:g,operator:"eq",connector:"AND"}],action:"findOne"});try{if(T.relation==="one-to-one")f=await R.findOne({model:j,where:d});else{let s=T.limit??A.advanced?.database?.defaultFindManyLimit??100;f=await R.findMany({model:j,where:d,limit:s})}}catch(s){throw Z.error(`Failed to query fallback join for model ${j}:`,{where:d,limit:T.limit}),console.error(s),s}return f},R=$({options:A,schema:Y,debugLog:W,getFieldName:H,getModelName:z,getDefaultModelName:D,getDefaultFieldName:G,getFieldAttributes:Q,transformInput:B,transformOutput:q,transformWhereClause:L}),N=null,S={transaction:async(C)=>{if(!N)if(!X.transaction)N=cV0(S);else Z.debug(`[${X.adapterName}] - Using provided transaction implementation.`),N=X.transaction;return N(C)},create:async({data:C,model:M,select:I,forceAllowId:T=!1})=>{_8++;let j=_8,b=z(M);if(M=D(M),"id"in C&&typeof C.id<"u"&&!T){Z.warn(`[${X.adapterName}] - You are trying to create a record with an id. This is not allowed as we handle id generation for you, unless you pass in the \`forceAllowId\` parameter. The id will be ignored.`);let s=Error().stack?.split(`
`).filter((n,L1)=>L1!==1).join(`
`).replace("Error:","Create method with `id` being called at:");console.log(s),C.id=void 0}W({method:"create"},`${t2(j)} ${s2(1,4)}`,`${o2("create")} ${D9("Unsafe Input")}:`,{model:b,data:C});let g=C;if(!X.disableTransformInput)g=await B(C,M,"create",T);W({method:"create"},`${t2(j)} ${s2(2,4)}`,`${o2("create")} ${D9("Parsed Input")}:`,{model:b,data:g});let f=await R.create({data:g,model:b});W({method:"create"},`${t2(j)} ${s2(3,4)}`,`${o2("create")} ${D9("DB Result")}:`,{model:b,res:f});let d=f;if(!X.disableTransformOutput)d=await q(f,M,I,void 0);return W({method:"create"},`${t2(j)} ${s2(4,4)}`,`${o2("create")} ${D9("Parsed Result")}:`,{model:b,data:d}),d},update:async({model:C,where:M,update:I})=>{_8++;let T=_8;C=D(C);let j=z(C),b=L({model:C,where:M,action:"update"});W({method:"update"},`${t2(T)} ${s2(1,4)}`,`${o2("update")} ${D9("Unsafe Input")}:`,{model:j,data:I});let g=I;if(!X.disableTransformInput)g=await B(I,C,"update");W({method:"update"},`${t2(T)} ${s2(2,4)}`,`${o2("update")} ${D9("Parsed Input")}:`,{model:j,data:g});let f=await R.update({model:j,where:b,update:g});W({method:"update"},`${t2(T)} ${s2(3,4)}`,`${o2("update")} ${D9("DB Result")}:`,{model:j,data:f});let d=f;if(!X.disableTransformOutput)d=await q(f,C,void 0,void 0);return W({method:"update"},`${t2(T)} ${s2(4,4)}`,`${o2("update")} ${D9("Parsed Result")}:`,{model:j,data:d}),d},updateMany:async({model:C,where:M,update:I})=>{_8++;let T=_8,j=z(C),b=L({model:C,where:M,action:"updateMany"});C=D(C),W({method:"updateMany"},`${t2(T)} ${s2(1,4)}`,`${o2("updateMany")} ${D9("Unsafe Input")}:`,{model:j,data:I});let g=I;if(!X.disableTransformInput)g=await B(I,C,"update");W({method:"updateMany"},`${t2(T)} ${s2(2,4)}`,`${o2("updateMany")} ${D9("Parsed Input")}:`,{model:j,data:g});let f=await R.updateMany({model:j,where:b,update:g});return W({method:"updateMany"},`${t2(T)} ${s2(3,4)}`,`${o2("updateMany")} ${D9("DB Result")}:`,{model:j,data:f}),W({method:"updateMany"},`${t2(T)} ${s2(4,4)}`,`${o2("updateMany")} ${D9("Parsed Result")}:`,{model:j,data:f}),f},findOne:async({model:C,where:M,select:I,join:T})=>{_8++;let j=_8,b=z(C),g=L({model:C,where:M,action:"findOne"});C=D(C);let f,d=!0;if(!X.disableTransformJoin){let L1=E(C,T,I);if(L1)f=L1.join,I=L1.select;if(!A.experimental?.joins&&f&&Object.keys(f).length>0)d=!1}else f=T;W({method:"findOne"},`${t2(j)} ${s2(1,3)}`,`${o2("findOne")}:`,{model:b,where:g,select:I,join:f});let s=await R.findOne({model:b,where:g,select:I,join:d?f:void 0});W({method:"findOne"},`${t2(j)} ${s2(2,3)}`,`${o2("findOne")} ${D9("DB Result")}:`,{model:b,data:s});let n=s;if(!X.disableTransformOutput)n=await q(s,C,I,f);return W({method:"findOne"},`${t2(j)} ${s2(3,3)}`,`${o2("findOne")} ${D9("Parsed Result")}:`,{model:b,data:n}),n},findMany:async({model:C,where:M,limit:I,sortBy:T,offset:j,join:b})=>{_8++;let g=_8,f=I??A.advanced?.database?.defaultFindManyLimit??100,d=z(C),s=L({model:C,where:M,action:"findMany"});C=D(C);let n,L1=!0;if(!X.disableTransformJoin){let g1=E(C,b,void 0);if(g1)n=g1.join;if(!A.experimental?.joins&&n&&Object.keys(n).length>0)L1=!1}else n=b;W({method:"findMany"},`${t2(g)} ${s2(1,3)}`,`${o2("findMany")}:`,{model:d,where:s,limit:f,sortBy:T,offset:j,join:n});let X1=await R.findMany({model:d,where:s,limit:f,sortBy:T,offset:j,join:L1?n:void 0});W({method:"findMany"},`${t2(g)} ${s2(2,3)}`,`${o2("findMany")} ${D9("DB Result")}:`,{model:d,data:X1});let M1=X1;if(!X.disableTransformOutput)M1=await Promise.all(X1.map(async(g1)=>{return await q(g1,C,void 0,n)}));return W({method:"findMany"},`${t2(g)} ${s2(3,3)}`,`${o2("findMany")} ${D9("Parsed Result")}:`,{model:d,data:M1}),M1},delete:async({model:C,where:M})=>{_8++;let I=_8,T=z(C),j=L({model:C,where:M,action:"delete"});C=D(C),W({method:"delete"},`${t2(I)} ${s2(1,2)}`,`${o2("delete")}:`,{model:T,where:j}),await R.delete({model:T,where:j}),W({method:"delete"},`${t2(I)} ${s2(2,2)}`,`${o2("delete")} ${D9("DB Result")}:`,{model:T})},deleteMany:async({model:C,where:M})=>{_8++;let I=_8,T=z(C),j=L({model:C,where:M,action:"deleteMany"});C=D(C),W({method:"deleteMany"},`${t2(I)} ${s2(1,2)}`,`${o2("deleteMany")} ${D9("DeleteMany")}:`,{model:T,where:j});let b=await R.deleteMany({model:T,where:j});return W({method:"deleteMany"},`${t2(I)} ${s2(2,2)}`,`${o2("deleteMany")} ${D9("DB Result")}:`,{model:T,data:b}),b},count:async({model:C,where:M})=>{_8++;let I=_8,T=z(C),j=L({model:C,where:M,action:"count"});C=D(C),W({method:"count"},`${t2(I)} ${s2(1,2)}`,`${o2("count")}:`,{model:T,where:j});let b=await R.count({model:T,where:j});return W({method:"count"},`${t2(I)} ${s2(2,2)}`,`${o2("count")}:`,{model:T,data:b}),b},createSchema:R.createSchema?async(C,M)=>{let I=l3(A);if(A.secondaryStorage&&!A.session?.storeSessionInDatabase)delete I.session;if(A.rateLimit&&A.rateLimit.storage==="database"&&(typeof A.rateLimit.enabled>"u"||A.rateLimit.enabled===!0))I.ratelimit={modelName:A.rateLimit.modelName??"ratelimit",fields:{key:{type:"string",unique:!0,required:!0,fieldName:A.rateLimit.fields?.key??"key"},count:{type:"number",required:!0,fieldName:A.rateLimit.fields?.count??"count"},lastRequest:{type:"number",required:!0,bigint:!0,defaultValue:()=>Date.now(),fieldName:A.rateLimit.fields?.lastRequest??"lastRequest"}}};return R.createSchema({file:M,tables:I})}:void 0,options:{adapterConfig:X,...R.options??{}},id:X.adapterId,...X.debugLogs?.isRunningAdapterTests?{adapterTestDebugLogs:{resetDebugLogs(){dT=dT.filter((C)=>C.instance!==J)},printDebugLogs(){let C="\u2500".repeat(80),M=dT.filter((T)=>T.instance===J);if(M.length===0)return;let I=M.reverse().map((T)=>{return T.args[0]=`
${T.args[0]}`,[...T.args,`
`]}).reduce((T,j)=>{return[...j,...T]},[`
${C}`]);console.log(...I)}}}:{}};return S};var ER1=x(()=>{Qr();VT();z3();c6();$r();l6();fY();VL();mT();cr();lr();pr();nr();dT=[]});var PL=x(()=>{fY();VL();mT();cr();lr();pr();nr();ER1()});var VR1=($,F)=>{let A=null,J=bJ({config:{adapterId:"memory",adapterName:"Memory Adapter",usePlural:!1,debugLogs:F?.debugLogs||!1,supportsArrays:!0,customTransformInput(X){if((X.options.advanced?.database?.useNumberId||X.options.advanced?.database?.generateId==="serial")&&X.field==="id"&&X.action==="create")return $[X.model].length+1;return X.data},transaction:async(X)=>{let Y=structuredClone($);try{return await X(J(A))}catch(W){throw Object.keys($).forEach((Z)=>{$[Z]=Y[Z]}),W}}},adapter:({getFieldName:X,options:Y,getModelName:W})=>{let Z=(G,z,H)=>{if(!z)return G;return G.sort((U,Q)=>{let B=X({model:H,field:z.field}),q=U[B],L=Q[B],E=0;if(q==null&&L==null)E=0;else if(q==null)E=-1;else if(L==null)E=1;else if(typeof q==="string"&&typeof L==="string")E=q.localeCompare(L);else if(q instanceof Date&&L instanceof Date)E=q.getTime()-L.getTime();else if(typeof q==="number"&&typeof L==="number")E=q-L;else if(typeof q==="boolean"&&typeof L==="boolean")E=q===L?0:q?1:-1;else E=String(q).localeCompare(String(L));return z.direction==="asc"?E:-E})};function D(G,z,H){let U=(L,E)=>{let V=$[E];if(!V)throw $0.error(`[MemoryAdapter] Model ${E} not found in the DB`,Object.keys($)),Error(`Model ${E} not found`);let R=(N,S)=>{let{field:C,value:M,operator:I}=S;switch(I){case"in":if(!Array.isArray(M))throw Error("Value must be an array");return M.includes(N[C]);case"not_in":if(!Array.isArray(M))throw Error("Value must be an array");return!M.includes(N[C]);case"contains":return N[C].includes(M);case"starts_with":return N[C].startsWith(M);case"ends_with":return N[C].endsWith(M);case"ne":return N[C]!==M;case"gt":return M!=null&&Boolean(N[C]>M);case"gte":return M!=null&&Boolean(N[C]>=M);case"lt":return M!=null&&Boolean(N[C]<M);case"lte":return M!=null&&Boolean(N[C]<=M);default:return N[C]===M}};return V.filter((N)=>{if(!L.length||L.length===0)return!0;let S=R(N,L[0]);for(let C of L){let M=R(N,C);if(C.connector==="OR")S=S||M;else S=S&&M}return S})};if(!H)return U(G,z);let Q=U(G,z),B=new Map,q=new Map;for(let L of Q){let E=String(L.id);if(!B.has(E)){let R={...L};for(let[N,S]of Object.entries(H)){let C=W(N);if(S.relation==="one-to-one")R[C]=null;else R[C]=[],q.set(`${E}-${N}`,new Set)}B.set(E,R)}let V=B.get(E);for(let[R,N]of Object.entries(H)){let S=W(R),C=$[S];if(!C)throw $0.error(`[MemoryAdapter] JoinOption model ${S} not found in the DB`,Object.keys($)),Error(`JoinOption model ${S} not found`);let M=C.filter((I)=>I[N.on.to]===L[N.on.from]);if(N.relation==="one-to-one")V[S]=M[0]||null;else{let I=q.get(`${E}-${R}`),T=N.limit??100,j=0;for(let b of M){if(j>=T)break;if(!I.has(b.id))V[S].push(b),I.add(b.id),j++}}}}return Array.from(B.values())}return{create:async({model:G,data:z})=>{if(Y.advanced?.database?.useNumberId||Y.advanced?.database?.generateId==="serial")z.id=$[W(G)].length+1;if(!$[G])$[G]=[];return $[G].push(z),z},findOne:async({model:G,where:z,join:H})=>{let U=D(z,G,H);if(H){let Q=U;if(!Q.length)return null;return Q[0]}return U[0]||null},findMany:async({model:G,where:z,sortBy:H,limit:U,offset:Q,join:B})=>{let q=D(z||[],G,B);if(B){let E=q;if(!E.length)return[];Z(E,H,G);let V=E;if(Q!==void 0)V=V.slice(Q);if(U!==void 0)V=V.slice(0,U);return V}let L=Z(q,H,G);if(Q!==void 0)L=L.slice(Q);if(U!==void 0)L=L.slice(0,U);return L||[]},count:async({model:G,where:z})=>{if(z)return D(z,G).length;return $[G].length},update:async({model:G,where:z,update:H})=>{let U=D(z,G);return U.forEach((Q)=>{Object.assign(Q,H)}),U[0]||null},delete:async({model:G,where:z})=>{let H=$[G],U=D(z,G);$[G]=H.filter((Q)=>!U.includes(Q))},deleteMany:async({model:G,where:z})=>{let H=$[G],U=D(z,G),Q=0;return $[G]=H.filter((B)=>{if(U.includes(B))return Q++,!1;return!U.includes(B)}),Q},updateMany({model:G,where:z,update:H}){let U=D(z,G);return U.forEach((Q)=>{Object.assign(Q,H)}),U[0]||null}}}});return(X)=>{return A=X,J(X)}};var NR1=x(()=>{c6();PL()});var CR1={};l2(CR1,{memoryAdapter:()=>VR1});var MR1=x(()=>{NR1()});function U3($){return typeof $>"u"||$===void 0}function O6($){return typeof $==="string"}function v$($){return typeof $==="number"}function xJ($){return typeof $==="boolean"}function vY($){return $===null}function eH($){return $ instanceof Date}function yY($){return typeof $==="bigint"}function lT($){return typeof Buffer<"u"&&Buffer.isBuffer($)}function S6($){return typeof $==="function"}function Y2($){return typeof $==="object"&&$!==null}function pT($){if(!Y2($)||tV0($)!=="[object Object]")return!1;if(Object.getPrototypeOf($)===null)return!0;let F=$;while(Object.getPrototypeOf(F)!==null)F=Object.getPrototypeOf(F);return Object.getPrototypeOf($)===F}function PR1($){return $[$.length-1]}function P($){return Object.freeze($)}function RL($){if(S9($))return $;else return[$]}function S9($){return Array.isArray($)}function Q3($){return $}function iT($,F){if(S9($)&&S9(F))return lV0($,F);else if(Y2($)&&Y2(F))return pV0($,F);return $===F}function lV0($,F){if($.length!==F.length)return!1;for(let A=0;A<$.length;++A)if(!iT($[A],F[A]))return!1;return!0}function pV0($,F){if(lT($)&&lT(F))return iV0($,F);else if(eH($)&&eH(F))return nV0($,F);return rV0($,F)}function iV0($,F){return Buffer.compare($,F)===0}function nV0($,F){return $.getTime()===F.getTime()}function rV0($,F){let A=Object.keys($),J=Object.keys(F);if(A.length!==J.length)return!1;for(let X of A)if(!iT($[X],F[X]))return!1;return!0}function tV0($){if($==null)return $===void 0?"[object Undefined]":"[object Null]";return aV0.call($)}var aV0;var A1=x(()=>{aV0=Object.prototype.toString});var U6;var ED=x(()=>{A1();U6=P({is($){return $.kind==="AlterTableNode"},create($){return P({kind:"AlterTableNode",table:$})},cloneWithTableProps($,F){return P({...$,...F})},cloneWithColumnAlteration($,F){return P({...$,columnAlterations:$.columnAlterations?[...$.columnAlterations,F]:[F]})}})});var Y0;var W2=x(()=>{A1();Y0=P({is($){return $.kind==="IdentifierNode"},create($){return P({kind:"IdentifierNode",name:$})}})});var y$;var nT=x(()=>{A1();W2();y$=P({is($){return $.kind==="CreateIndexNode"},create($){return P({kind:"CreateIndexNode",name:Y0.create($)})},cloneWith($,F){return P({...$,...F})},cloneWithColumns($,F){return P({...$,columns:[...$.columns||[],...F]})}})});var rT;var aT=x(()=>{A1();W2();rT=P({is($){return $.kind==="CreateSchemaNode"},create($,F){return P({kind:"CreateSchemaNode",schema:Y0.create($),...F})},cloneWith($,F){return P({...$,...F})}})});var RR1,k8;var $U=x(()=>{A1();RR1=["preserve rows","delete rows","drop"],k8=P({is($){return $.kind==="CreateTableNode"},create($){return P({kind:"CreateTableNode",table:$,columns:P([])})},cloneWithColumn($,F){return P({...$,columns:P([...$.columns,F])})},cloneWithConstraint($,F){return P({...$,constraints:$.constraints?P([...$.constraints,F]):P([F])})},cloneWithFrontModifier($,F){return P({...$,frontModifiers:$.frontModifiers?P([...$.frontModifiers,F]):P([F])})},cloneWithEndModifier($,F){return P({...$,endModifiers:$.endModifiers?P([...$.endModifiers,F]):P([F])})},cloneWith($,F){return P({...$,...F})}})});var b8;var gJ=x(()=>{A1();W2();b8=P({is($){return $.kind==="SchemableIdentifierNode"},create($){return P({kind:"SchemableIdentifierNode",identifier:Y0.create($)})},createWithSchema($,F){return P({kind:"SchemableIdentifierNode",schema:Y0.create($),identifier:Y0.create(F)})}})});var uY;var IL=x(()=>{A1();gJ();uY=P({is($){return $.kind==="DropIndexNode"},create($,F){return P({kind:"DropIndexNode",name:b8.create($),...F})},cloneWith($,F){return P({...$,...F})}})});var TL;var tT=x(()=>{A1();W2();TL=P({is($){return $.kind==="DropSchemaNode"},create($,F){return P({kind:"DropSchemaNode",schema:Y0.create($),...F})},cloneWith($,F){return P({...$,...F})}})});var jL;var sT=x(()=>{A1();jL=P({is($){return $.kind==="DropTableNode"},create($,F){return P({kind:"DropTableNode",table:$,...F})},cloneWith($,F){return P({...$,...F})}})});var _9;var u$=x(()=>{A1();_9=P({is($){return $.kind==="AliasNode"},create($,F){return P({kind:"AliasNode",node:$,alias:F})}})});var i3;var FU=x(()=>{A1();gJ();i3=P({is($){return $.kind==="TableNode"},create($){return P({kind:"TableNode",table:b8.create($)})},createWithSchema($,F){return P({kind:"TableNode",table:b8.createWithSchema($,F)})}})});function w2($){return Y2($)&&S6($.toOperationNode)}var n3=x(()=>{A1()});function oT($){return Y2($)&&"expressionType"in $&&w2($)}function IR1($){return Y2($)&&"expression"in $&&O6($.alias)&&w2($)}var eT=x(()=>{n3();A1()});var GA;var rr=x(()=>{A1();GA=P({is($){return $.kind==="SelectModifierNode"},create($,F){return P({kind:"SelectModifierNode",modifier:$,of:F})},createWithExpression($){return P({kind:"SelectModifierNode",rawModifier:$})}})});var r3;var hY=x(()=>{A1();r3=P({is($){return $.kind==="AndNode"},create($,F){return P({kind:"AndNode",left:$,right:F})}})});var h$;var VD=x(()=>{A1();h$=P({is($){return $.kind==="OrNode"},create($,F){return P({kind:"OrNode",left:$,right:F})}})});var $j;var ar=x(()=>{A1();hY();VD();$j=P({is($){return $.kind==="OnNode"},create($){return P({kind:"OnNode",on:$})},cloneWithOperation($,F,A){return P({...$,on:F==="And"?r3.create($.on,A):h$.create($.on,A)})}})});var m$;var AU=x(()=>{A1();ar();m$=P({is($){return $.kind==="JoinNode"},create($,F){return P({kind:"JoinNode",joinType:$,table:F,on:void 0})},createWithOn($,F,A){return P({kind:"JoinNode",joinType:$,table:F,on:$j.create(A)})},cloneWithOn($,F){return P({...$,on:$.on?$j.cloneWithOperation($.on,"And",F):$j.create(F)})}})});var fJ;var OL=x(()=>{A1();fJ=P({is($){return $.kind==="BinaryOperationNode"},create($,F,A){return P({kind:"BinaryOperationNode",leftOperand:$,operator:F,rightOperand:A})}})});function tr($){return O6($)&&TR1.includes($)}var sV0,oV0,TR1,eV0,$N0,FN0,jR1,x8;var vJ=x(()=>{A1();sV0=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],oV0=["+","-","*","/","%","^","&","|","#","<<",">>"],TR1=["->","->>"],eV0=[...sV0,...oV0,"&&","||"],$N0=["exists","not exists"],FN0=["not","-",...$N0],jR1=[...eV0,...TR1,...FN0,"between","between symmetric"],x8=P({is($){return $.kind==="OperatorNode"},create($){return P({kind:"OperatorNode",operator:$})}})});var Y6;var g8=x(()=>{A1();W2();Y6=P({is($){return $.kind==="ColumnNode"},create($){return P({kind:"ColumnNode",column:Y0.create($)})}})});var JU;var SL=x(()=>{A1();JU=P({is($){return $.kind==="SelectAllNode"},create(){return P({kind:"SelectAllNode"})}})});var XU;var Fj=x(()=>{SL();A1();XU=P({is($){return $.kind==="ReferenceNode"},create($,F){return P({kind:"ReferenceNode",table:F,column:$})},createSelectAll($){return P({kind:"ReferenceNode",table:$,column:JU.create()})}})});class sr{#$;get dynamicReference(){return this.#$}get refType(){return}constructor($){this.#$=$}toOperationNode(){return or(this.#$)}}function Aj($){return Y2($)&&w2($)&&O6($.dynamicReference)}var _L=x(()=>{n3();X8();A1()});var d$;var Jj=x(()=>{A1();d$=P({is($){return $.kind==="OrderByItemNode"},create($,F){return P({kind:"OrderByItemNode",orderBy:$,direction:F})},cloneWith($,F){return P({...$,...F})}})});var Q6;var g5=x(()=>{A1();Q6=P({is($){return $.kind==="RawNode"},create($,F){return P({kind:"RawNode",sqlFragments:P($),parameters:P(F)})},createWithSql($){return Q6.create([$],[])},createWithChild($){return Q6.create(["",""],[$])},createWithChildren($){return Q6.create(Array($.length+1).fill(""),$)}})});var OR1;var er=x(()=>{A1();W2();OR1=P({is($){return $.kind==="CollateNode"},create($){return P({kind:"CollateNode",collation:Y0.create($)})}})});class mY{#$;constructor($){this.#$=P($)}desc(){return new mY({node:d$.cloneWith(this.#$.node,{direction:Q6.createWithSql("desc")})})}asc(){return new mY({node:d$.cloneWith(this.#$.node,{direction:Q6.createWithSql("asc")})})}nullsLast(){return new mY({node:d$.cloneWith(this.#$.node,{nulls:"last"})})}nullsFirst(){return new mY({node:d$.cloneWith(this.#$.node,{nulls:"first"})})}collate($){return new mY({node:d$.cloneWith(this.#$.node,{collation:OR1.create($)})})}toOperationNode(){return this.#$.node}}var $a=x(()=>{er();Jj();g5();A1()});function c$($){if(SR1.has($))return;SR1.add($),console.log($)}var SR1;var YU=x(()=>{SR1=new Set});function Aa($){return $==="asc"||$==="desc"}function c7($){if($.length===2)return[Fa($[0],$[1])];if($.length===1){let[F]=$;if(Array.isArray(F))return c$("orderBy(array) is deprecated, use multiple orderBy calls instead."),F.map((A)=>Fa(A));return[Fa(F)]}throw Error(`Invalid number of arguments at order by! expected 1-2, received ${$.length}`)}function Fa($,F){let A=AN0($);if(d$.is(A)){if(F)throw Error("Cannot specify direction twice!");return A}return _R1(A,F)}function AN0($){if(yJ($))return a3($);if(Aj($))return $.toOperationNode();let[F,A]=$.split(" ");if(A)return c$("`orderBy('column asc')` is deprecated. Use `orderBy('column', 'asc')` instead."),_R1(d7(F),A);return d7($)}function _R1($,F){if(typeof F==="string"){if(!Aa(F))throw Error(`Invalid order by direction: ${F}`);return d$.create($,Q6.createWithSql(F))}if(oT(F))return c$("`orderBy(..., expr)` is deprecated. Use `orderBy(..., 'asc')` or `orderBy(..., (ob) => ...)` instead."),d$.create($,F.toOperationNode());let A=d$.create($);if(!F)return A;return F(new mY({node:A})).toOperationNode()}var ND=x(()=>{_L();eT();Jj();g5();$a();YU();l$();X8()});var WU;var Xj=x(()=>{A1();WU=P({is($){return $.kind==="JSONReferenceNode"},create($,F){return P({kind:"JSONReferenceNode",reference:$,traversal:F})},cloneWithTraversal($,F){return P({...$,traversal:F})}})});var Yj;var Wj=x(()=>{A1();Yj=P({is($){return $.kind==="JSONOperatorChainNode"},create($){return P({kind:"JSONOperatorChainNode",operator:$,values:P([])})},cloneWithValue($,F){return P({...$,values:P([...$.values,F])})}})});var dY;var kL=x(()=>{A1();dY=P({is($){return $.kind==="JSONPathNode"},create($){return P({kind:"JSONPathNode",inOperator:$,pathLegs:P([])})},cloneWithLeg($,F){return P({...$,pathLegs:P([...$.pathLegs,F])})}})});function or($){if(O6($))return d7($);return $.toOperationNode()}function uJ($){if(S9($))return $.map((F)=>Y8(F));else return[Y8($)]}function Y8($){if(yJ($))return a3($);return or($)}function kR1($,F){let A=d7($);if(tr(F))return WU.create(A,Yj.create(x8.create(F)));let J=F.slice(0,-1);if(tr(J))return WU.create(A,dY.create(x8.create(J)));throw Error(`Invalid JSON operator: ${F}`)}function d7($){if(!$.includes("."))return XU.create(Y6.create($));let A=$.split(".").map(Xa);if(A.length===3)return JN0(A);if(A.length===2)return XN0(A);throw Error(`invalid column reference ${$}`)}function bR1($){if($.includes(" as ")){let[A,J]=$.split(" as ").map(Xa);return _9.create(d7(A),Y0.create(J))}else return d7($)}function Ja($){return Y6.create($)}function ZU($){if($.includes(" ")){let[A,J]=$.split(" ").map(Xa);if(!Aa(J))throw Error(`invalid order direction "${J}" next to "${A}"`);return c7([A,J])[0]}else return Ja($)}function JN0($){let[F,A,J]=$;return XU.create(Y6.create(J),i3.createWithSchema(F,A))}function XN0($){let[F,A]=$;return XU.create(Y6.create(A),i3.create(F))}function Xa($){return $.trim()}var X8=x(()=>{u$();g8();Fj();FU();A1();l$();W2();ND();vJ();Xj();Wj();kL()});var DU;var bL=x(()=>{A1();DU=P({is($){return $.kind==="PrimitiveValueListNode"},create($){return P({kind:"PrimitiveValueListNode",values:P([...$])})}})});var p$;var cY=x(()=>{A1();p$=P({is($){return $.kind==="ValueListNode"},create($){return P({kind:"ValueListNode",values:P($)})}})});var m4;var i$=x(()=>{A1();m4=P({is($){return $.kind==="ValueNode"},create($){return P({kind:"ValueNode",value:$})},createImmediate($){return P({kind:"ValueNode",value:$,immediate:!0})}})});function xR1($){if(S9($))return YN0($);return p6($)}function p6($){if(yJ($))return a3($);return m4.create($)}function Zj($){return v$($)||xJ($)||vY($)}function xL($){if(!Zj($))throw Error(`unsafe immediate value ${JSON.stringify($)}`);return m4.createImmediate($)}function YN0($){if($.some(yJ))return p$.create($.map((F)=>p6(F)));return DU.create($)}var zA=x(()=>{bL();cY();i$();A1();l$()});var l7;var GU=x(()=>{A1();l7=P({is($){return $.kind==="ParensNode"},create($){return P({kind:"ParensNode",node:$})}})});function Z2($){if($.length===3)return Dj($[0],$[1],$[2]);else if($.length===1)return p6($[0]);throw Error(`invalid arguments: ${JSON.stringify($)}`)}function Dj($,F,A){if(WN0(F)&&fR1(A))return fJ.create(Y8($),Ya(F),m4.createImmediate(A));return fJ.create(Y8($),Ya(F),xR1(A))}function k9($,F,A){return fJ.create(Y8($),Ya(F),Y8(A))}function Wa($,F){return zU(Object.entries($).filter(([,A])=>!U3(A)).map(([A,J])=>Dj(A,fR1(J)?"is":"=",J)),F)}function zU($,F,A=!0){let J=F==="and"?r3.create:h$.create;if($.length===0)return fJ.create(m4.createImmediate(1),x8.create("="),m4.createImmediate(F==="and"?1:0));let X=gR1($[0]);for(let Y=1;Y<$.length;++Y)X=J(X,gR1($[Y]));if($.length>1&&A)return l7.create(X);return X}function WN0($){return $==="is"||$==="is not"}function fR1($){return vY($)||xJ($)}function Ya($){if(O6($)&&jR1.includes($))return x8.create($);if(w2($))return $.toOperationNode();throw Error(`invalid operator ${JSON.stringify($)}`)}function gR1($){return w2($)?$.toOperationNode():$}var p7=x(()=>{OL();A1();n3();vJ();X8();zA();i$();hY();GU();VD()});var hJ;var gL=x(()=>{A1();hJ=P({is($){return $.kind==="OrderByNode"},create($){return P({kind:"OrderByNode",items:P([...$])})},cloneWithItems($,F){return P({...$,items:P([...$.items,...F])})}})});var Za;var Da=x(()=>{A1();Za=P({is($){return $.kind==="PartitionByNode"},create($){return P({kind:"PartitionByNode",items:P($)})},cloneWithItems($,F){return P({...$,items:P([...$.items,...F])})}})});var fL;var Gj=x(()=>{A1();gL();Da();fL=P({is($){return $.kind==="OverNode"},create(){return P({kind:"OverNode"})},cloneWithOrderByItems($,F){return P({...$,orderBy:$.orderBy?hJ.cloneWithItems($.orderBy,F):hJ.create(F)})},cloneWithPartitionByItems($,F){return P({...$,partitionBy:$.partitionBy?Za.cloneWithItems($.partitionBy,F):Za.create(F)})}})});var CD;var vL=x(()=>{A1();CD=P({is($){return $.kind==="FromNode"},create($){return P({kind:"FromNode",froms:P($)})},cloneWithFroms($,F){return P({...$,froms:P([...$.froms,...F])})}})});var Ga;var za=x(()=>{A1();Ga=P({is($){return $.kind==="GroupByNode"},create($){return P({kind:"GroupByNode",items:P($)})},cloneWithItems($,F){return P({...$,items:P([...$.items,...F])})}})});var Ha;var Ua=x(()=>{A1();hY();VD();Ha=P({is($){return $.kind==="HavingNode"},create($){return P({kind:"HavingNode",having:$})},cloneWithOperation($,F,A){return P({...$,having:F==="And"?r3.create($.having,A):h$.create($.having,A)})}})});var G4;var MD=x(()=>{A1();G4=P({is($){return $.kind==="InsertQueryNode"},create($,F,A){return P({kind:"InsertQueryNode",into:$,...F&&{with:F},replace:A})},createWithoutInto(){return P({kind:"InsertQueryNode"})},cloneWith($,F){return P({...$,...F})}})});var zj;var Hj=x(()=>{A1();zj=P({is($){return $.kind==="ListNode"},create($){return P({kind:"ListNode",items:P($)})}})});var HA;var HU=x(()=>{A1();vL();Hj();HA=P({is($){return $.kind==="UpdateQueryNode"},create($,F){return P({kind:"UpdateQueryNode",table:$.length===1?$[0]:zj.create($),...F&&{with:F}})},createWithoutTable(){return P({kind:"UpdateQueryNode"})},cloneWithFromItems($,F){return P({...$,from:$.from?CD.cloneWithFroms($.from,F):CD.create(F)})},cloneWithUpdates($,F){return P({...$,updates:$.updates?P([...$.updates,...F]):F})},cloneWithLimit($,F){return P({...$,limit:F})}})});var yL;var Uj=x(()=>{A1();yL=P({is($){return $.kind==="UsingNode"},create($){return P({kind:"UsingNode",tables:P($)})},cloneWithTables($,F){return P({...$,tables:P([...$.tables,...F])})}})});var lY;var uL=x(()=>{A1();vL();Uj();f5();lY=P({is($){return $.kind==="DeleteQueryNode"},create($,F){return P({kind:"DeleteQueryNode",from:CD.create($),...F&&{with:F}})},cloneWithOrderByItems:($,F)=>f1.cloneWithOrderByItems($,F),cloneWithoutOrderBy:($)=>f1.cloneWithoutOrderBy($),cloneWithLimit($,F){return P({...$,limit:F})},cloneWithoutLimit($){return P({...$,limit:void 0})},cloneWithUsing($,F){return P({...$,using:$.using!==void 0?yL.cloneWithTables($.using,F):yL.create(F)})}})});var W8;var hL=x(()=>{A1();hY();VD();W8=P({is($){return $.kind==="WhereNode"},create($){return P({kind:"WhereNode",where:$})},cloneWithOperation($,F,A){return P({...$,where:F==="And"?r3.create($.where,A):h$.create($.where,A)})}})});var Qa;var Ka=x(()=>{A1();Qa=P({is($){return $.kind==="ReturningNode"},create($){return P({kind:"ReturningNode",selections:P($)})},cloneWithSelections($,F){return P({...$,selections:$.selections?P([...$.selections,...F]):P(F)})}})});var vR1;var Ba=x(()=>{A1();vR1=P({is($){return $.kind==="ExplainNode"},create($,F){return P({kind:"ExplainNode",format:$,options:F})}})});var v5;var PD=x(()=>{A1();v5=P({is($){return $.kind==="WhenNode"},create($){return P({kind:"WhenNode",condition:$})},cloneWithResult($,F){return P({...$,result:F})}})});var i7;var mL=x(()=>{A1();PD();i7=P({is($){return $.kind==="MergeQueryNode"},create($,F){return P({kind:"MergeQueryNode",into:$,...F&&{with:F}})},cloneWithUsing($,F){return P({...$,using:F})},cloneWithWhen($,F){return P({...$,whens:$.whens?P([...$.whens,F]):P([F])})},cloneWithThen($,F){return P({...$,whens:$.whens?P([...$.whens.slice(0,-1),v5.cloneWithResult($.whens[$.whens.length-1],F)]):void 0})}})});var wa;var qa=x(()=>{A1();wa=P({is($){return $.kind==="OutputNode"},create($){return P({kind:"OutputNode",selections:P($)})},cloneWithSelections($,F){return P({...$,selections:$.selections?P([...$.selections,...F]):P(F)})}})});var f1;var f5=x(()=>{MD();pY();HU();uL();hL();A1();Ka();Ba();mL();qa();gL();f1=P({is($){return M6.is($)||G4.is($)||HA.is($)||lY.is($)||i7.is($)},cloneWithEndModifier($,F){return P({...$,endModifiers:$.endModifiers?P([...$.endModifiers,F]):P([F])})},cloneWithWhere($,F){return P({...$,where:$.where?W8.cloneWithOperation($.where,"And",F):W8.create(F)})},cloneWithJoin($,F){return P({...$,joins:$.joins?P([...$.joins,F]):P([F])})},cloneWithReturning($,F){return P({...$,returning:$.returning?Qa.cloneWithSelections($.returning,F):Qa.create(F)})},cloneWithoutReturning($){return P({...$,returning:void 0})},cloneWithoutWhere($){return P({...$,where:void 0})},cloneWithExplain($,F,A){return P({...$,explain:vR1.create(F,A?.toOperationNode())})},cloneWithTop($,F){return P({...$,top:F})},cloneWithOutput($,F){return P({...$,output:$.output?wa.cloneWithSelections($.output,F):wa.create(F)})},cloneWithOrderByItems($,F){return P({...$,orderBy:$.orderBy?hJ.cloneWithItems($.orderBy,F):hJ.create(F)})},cloneWithoutOrderBy($){return P({...$,orderBy:void 0})}})});var M6;var pY=x(()=>{A1();vL();za();Ua();f5();M6=P({is($){return $.kind==="SelectQueryNode"},create($){return P({kind:"SelectQueryNode",...$&&{with:$}})},createFrom($,F){return P({kind:"SelectQueryNode",from:CD.create($),...F&&{with:F}})},cloneWithSelections($,F){return P({...$,selections:$.selections?P([...$.selections,...F]):P(F)})},cloneWithDistinctOn($,F){return P({...$,distinctOn:$.distinctOn?P([...$.distinctOn,...F]):P(F)})},cloneWithFrontModifier($,F){return P({...$,frontModifiers:$.frontModifiers?P([...$.frontModifiers,F]):P([F])})},cloneWithOrderByItems:($,F)=>f1.cloneWithOrderByItems($,F),cloneWithGroupByItems($,F){return P({...$,groupBy:$.groupBy?Ga.cloneWithItems($.groupBy,F):Ga.create(F)})},cloneWithLimit($,F){return P({...$,limit:F})},cloneWithOffset($,F){return P({...$,offset:F})},cloneWithFetch($,F){return P({...$,fetch:F})},cloneWithHaving($,F){return P({...$,having:$.having?Ha.cloneWithOperation($.having,"And",F):Ha.create(F)})},cloneWithSetOperations($,F){return P({...$,setOperations:$.setOperations?P([...$.setOperations,...F]):P([...F])})},cloneWithoutSelections($){return P({...$,selections:[]})},cloneWithoutLimit($){return P({...$,limit:void 0})},cloneWithoutOffset($){return P({...$,offset:void 0})},cloneWithoutOrderBy:($)=>f1.cloneWithoutOrderBy($),cloneWithoutGroupBy($){return P({...$,groupBy:void 0})}})});class UU{#$;constructor($){this.#$=P($)}on(...$){return new UU({...this.#$,joinNode:m$.cloneWithOn(this.#$.joinNode,Z2($))})}onRef($,F,A){return new UU({...this.#$,joinNode:m$.cloneWithOn(this.#$.joinNode,k9($,F,A))})}onTrue(){return new UU({...this.#$,joinNode:m$.cloneWithOn(this.#$.joinNode,Q6.createWithSql("true"))})}$call($){return $(this)}toOperationNode(){return this.#$.joinNode}}var La=x(()=>{AU();g5();p7();A1()});var yR1;var Ea=x(()=>{A1();yR1=P({is($){return $.kind==="PartitionByItemNode"},create($){return P({kind:"PartitionByItemNode",partitionBy:$})}})});function uR1($){return uJ($).map(yR1.create)}var hR1=x(()=>{Ea();X8()});class QU{#$;constructor($){this.#$=P($)}orderBy(...$){return new QU({overNode:fL.cloneWithOrderByItems(this.#$.overNode,c7($))})}clearOrderBy(){return new QU({overNode:f1.cloneWithoutOrderBy(this.#$.overNode)})}partitionBy($){return new QU({overNode:fL.cloneWithPartitionByItems(this.#$.overNode,uR1($))})}$call($){return $(this)}toOperationNode(){return this.#$.overNode}}var mR1=x(()=>{Gj();f5();ND();hR1();A1()});var KU;var Va=x(()=>{A1();Fj();SL();KU=P({is($){return $.kind==="SelectionNode"},create($){return P({kind:"SelectionNode",selection:$})},createSelectAll(){return P({kind:"SelectionNode",selection:JU.create()})},createSelectAllFromTable($){return P({kind:"SelectionNode",selection:XU.createSelectAll($)})}})});function G9($){if(S6($))return G9($(y5()));else if(S9($))return $.map((F)=>dR1(F));else return[dR1($)]}function dR1($){if(O6($))return KU.create(bR1($));else if(Aj($))return KU.create($.toOperationNode());else return KU.create(Qj($))}function b9($){if(!$)return[KU.createSelectAll()];else if(Array.isArray($))return $.map(cR1);else return[cR1($)]}function cR1($){if(O6($))return KU.createSelectAllFromTable(K6($));throw Error(`invalid value selectAll expression: ${JSON.stringify($)}`)}var iY=x(()=>{A1();Va();X8();_L();l$();Z8();nY()});var lR1;var Na=x(()=>{A1();lR1=P({is($){return $.kind==="ValuesNode"},create($){return P({kind:"ValuesNode",values:P($)})}})});var pR1;var Ca=x(()=>{A1();pR1=P({is($){return $.kind==="DefaultInsertValueNode"},create(){return P({kind:"DefaultInsertValueNode"})}})});function Kj($){let F=S6($)?$(y5()):$,A=S9(F)?F:P([F]);return ZN0(A)}function ZN0($){let F=DN0($);return[P([...F.keys()].map(Y6.create)),lR1.create($.map((A)=>GN0(A,F)))]}function DN0($){let F=new Map;for(let A of $){let J=Object.keys(A);for(let X of J)if(!F.has(X)&&A[X]!==void 0)F.set(X,F.size)}return F}function GN0($,F){let A=Object.keys($),J=Array.from({length:F.size}),X=!1,Y=A.length;for(let Z of A){let D=F.get(Z);if(U3(D)){Y--;continue}let G=$[Z];if(U3(G)||yJ(G))X=!0;J[D]=G}if(Y<F.size||X){let Z=pR1.create();return p$.create(J.map((D)=>U3(D)?Z:p6(D)))}return DU.create(J)}var Ma=x(()=>{g8();bL();cY();A1();zA();Na();l$();Ca();nY()});var Pa;var Ra=x(()=>{A1();Pa=P({is($){return $.kind==="ColumnUpdateNode"},create($,F){return P({kind:"ColumnUpdateNode",column:$,value:F})}})});function iR1(...$){if($.length===2)return[Pa.create(Y8($[0]),p6($[1]))];return dL($[0])}function dL($){let F=S6($)?$(y5()):$;return Object.entries(F).filter(([A,J])=>J!==void 0).map(([A,J])=>{return Pa.create(Y6.create(A),p6(J))})}var Bj=x(()=>{g8();Ra();nY();A1();zA();X8()});var nR1;var Ia=x(()=>{A1();nR1=P({is($){return $.kind==="OnDuplicateKeyNode"},create($){return P({kind:"OnDuplicateKeyNode",updates:$})}})});class Ta{insertId;numInsertedOrUpdatedRows;constructor($,F){this.insertId=$,this.numInsertedOrUpdatedRows=F}}function UA($){return Object.prototype.hasOwnProperty.call($,"prototype")}var n$;var RD=x(()=>{n$=class n$ extends Error{node;constructor($){super("no result");this.node=$}}});var K3;var wj=x(()=>{A1();hL();K3=P({is($){return $.kind==="OnConflictNode"},create(){return P({kind:"OnConflictNode"})},cloneWith($,F){return P({...$,...F})},cloneWithIndexWhere($,F){return P({...$,indexWhere:$.indexWhere?W8.cloneWithOperation($.indexWhere,"And",F):W8.create(F)})},cloneWithIndexOrWhere($,F){return P({...$,indexWhere:$.indexWhere?W8.cloneWithOperation($.indexWhere,"Or",F):W8.create(F)})},cloneWithUpdateWhere($,F){return P({...$,updateWhere:$.updateWhere?W8.cloneWithOperation($.updateWhere,"And",F):W8.create(F)})},cloneWithUpdateOrWhere($,F){return P({...$,updateWhere:$.updateWhere?W8.cloneWithOperation($.updateWhere,"Or",F):W8.create(F)})},cloneWithoutIndexWhere($){return P({...$,indexWhere:void 0})},cloneWithoutUpdateWhere($){return P({...$,updateWhere:void 0})}})});class QA{#$;constructor($){this.#$=P($)}column($){let F=Y6.create($);return new QA({...this.#$,onConflictNode:K3.cloneWith(this.#$.onConflictNode,{columns:this.#$.onConflictNode.columns?P([...this.#$.onConflictNode.columns,F]):P([F])})})}columns($){let F=$.map(Y6.create);return new QA({...this.#$,onConflictNode:K3.cloneWith(this.#$.onConflictNode,{columns:this.#$.onConflictNode.columns?P([...this.#$.onConflictNode.columns,...F]):P(F)})})}constraint($){return new QA({...this.#$,onConflictNode:K3.cloneWith(this.#$.onConflictNode,{constraint:Y0.create($)})})}expression($){return new QA({...this.#$,onConflictNode:K3.cloneWith(this.#$.onConflictNode,{indexExpression:$.toOperationNode()})})}where(...$){return new QA({...this.#$,onConflictNode:K3.cloneWithIndexWhere(this.#$.onConflictNode,Z2($))})}whereRef($,F,A){return new QA({...this.#$,onConflictNode:K3.cloneWithIndexWhere(this.#$.onConflictNode,k9($,F,A))})}clearWhere(){return new QA({...this.#$,onConflictNode:K3.cloneWithoutIndexWhere(this.#$.onConflictNode)})}doNothing(){return new rR1({...this.#$,onConflictNode:K3.cloneWith(this.#$.onConflictNode,{doNothing:!0})})}doUpdateSet($){return new cL({...this.#$,onConflictNode:K3.cloneWith(this.#$.onConflictNode,{updates:dL($)})})}$call($){return $(this)}}class rR1{#$;constructor($){this.#$=P($)}toOperationNode(){return this.#$.onConflictNode}}class cL{#$;constructor($){this.#$=P($)}where(...$){return new cL({...this.#$,onConflictNode:K3.cloneWithUpdateWhere(this.#$.onConflictNode,Z2($))})}whereRef($,F,A){return new cL({...this.#$,onConflictNode:K3.cloneWithUpdateWhere(this.#$.onConflictNode,k9($,F,A))})}clearWhere(){return new cL({...this.#$,onConflictNode:K3.cloneWithoutUpdateWhere(this.#$.onConflictNode)})}$call($){return $(this)}toOperationNode(){return this.#$.onConflictNode}}var ja=x(()=>{g8();W2();wj();p7();Bj();A1()});var aR1;var Oa=x(()=>{A1();aR1=P({is($){return $.kind==="TopNode"},create($,F){return P({kind:"TopNode",expression:$,modifiers:F})}})});function r$($,F){if(!v$($)&&!yY($))throw Error(`Invalid top expression: ${$}`);if(!U3(F)&&!zN0(F))throw Error(`Invalid top modifiers: ${F}`);return aR1.create($,F)}function zN0($){return $==="percent"||$==="with ties"||$==="percent with ties"}var BU=x(()=>{Oa();A1()});var ID;var Sa=x(()=>{A1();ID=P({is($){return $.kind==="OrActionNode"},create($){return P({kind:"OrActionNode",action:$})}})});class i6{#$;constructor($){this.#$=P($)}values($){let[F,A]=Kj($);return new i6({...this.#$,queryNode:G4.cloneWith(this.#$.queryNode,{columns:F,values:A})})}columns($){return new i6({...this.#$,queryNode:G4.cloneWith(this.#$.queryNode,{columns:P($.map(Y6.create))})})}expression($){return new i6({...this.#$,queryNode:G4.cloneWith(this.#$.queryNode,{values:a3($)})})}defaultValues(){return new i6({...this.#$,queryNode:G4.cloneWith(this.#$.queryNode,{defaultValues:!0})})}modifyEnd($){return new i6({...this.#$,queryNode:f1.cloneWithEndModifier(this.#$.queryNode,$.toOperationNode())})}ignore(){return new i6({...this.#$,queryNode:G4.cloneWith(this.#$.queryNode,{orAction:ID.create("ignore")})})}orIgnore(){return new i6({...this.#$,queryNode:G4.cloneWith(this.#$.queryNode,{orAction:ID.create("ignore")})})}orAbort(){return new i6({...this.#$,queryNode:G4.cloneWith(this.#$.queryNode,{orAction:ID.create("abort")})})}orFail(){return new i6({...this.#$,queryNode:G4.cloneWith(this.#$.queryNode,{orAction:ID.create("fail")})})}orReplace(){return new i6({...this.#$,queryNode:G4.cloneWith(this.#$.queryNode,{orAction:ID.create("replace")})})}orRollback(){return new i6({...this.#$,queryNode:G4.cloneWith(this.#$.queryNode,{orAction:ID.create("rollback")})})}top($,F){return new i6({...this.#$,queryNode:f1.cloneWithTop(this.#$.queryNode,r$($,F))})}onConflict($){return new i6({...this.#$,queryNode:G4.cloneWith(this.#$.queryNode,{onConflict:$(new QA({onConflictNode:K3.create()})).toOperationNode()})})}onDuplicateKeyUpdate($){return new i6({...this.#$,queryNode:G4.cloneWith(this.#$.queryNode,{onDuplicateKey:nR1.create(dL($))})})}returning($){return new i6({...this.#$,queryNode:f1.cloneWithReturning(this.#$.queryNode,G9($))})}returningAll(){return new i6({...this.#$,queryNode:f1.cloneWithReturning(this.#$.queryNode,b9())})}output($){return new i6({...this.#$,queryNode:f1.cloneWithOutput(this.#$.queryNode,G9($))})}outputAll($){return new i6({...this.#$,queryNode:f1.cloneWithOutput(this.#$.queryNode,b9($))})}clearReturning(){return new i6({...this.#$,queryNode:f1.cloneWithoutReturning(this.#$.queryNode)})}$call($){return $(this)}$if($,F){if($)return F(this);return new i6({...this.#$})}$castTo(){return new i6(this.#$)}$narrowType(){return new i6(this.#$)}$assertType(){return new i6(this.#$)}withPlugin($){return new i6({...this.#$,executor:this.#$.executor.withPlugin($)})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.queryNode,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){let $=this.compile(),F=await this.#$.executor.executeQuery($),{adapter:A}=this.#$.executor,J=$.query;if(J.returning&&A.supportsReturning||J.output&&A.supportsOutput)return F.rows;return[new Ta(F.insertId,F.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[$]=await this.execute();return $}async executeTakeFirstOrThrow($=n$){let F=await this.executeTakeFirst();if(F===void 0)throw UA($)?new $(this.toOperationNode()):$(this.toOperationNode());return F}async*stream($=100){let F=this.compile(),A=this.#$.executor.stream(F,$);for await(let J of A)yield*J.rows}async explain($,F){return await new i6({...this.#$,queryNode:f1.cloneWithExplain(this.#$.queryNode,$,F)}).execute()}}var _a=x(()=>{iY();Ma();MD();f5();Bj();A1();Ia();RD();l$();g8();ja();wj();BU();Sa()});class ka{numDeletedRows;constructor($){this.numDeletedRows=$}}var wU;var lL=x(()=>{A1();wU=P({is($){return $.kind==="LimitNode"},create($){return P({kind:"LimitNode",limit:$})}})});class v2{#$;constructor($){this.#$=P($)}where(...$){return new v2({...this.#$,queryNode:f1.cloneWithWhere(this.#$.queryNode,Z2($))})}whereRef($,F,A){return new v2({...this.#$,queryNode:f1.cloneWithWhere(this.#$.queryNode,k9($,F,A))})}clearWhere(){return new v2({...this.#$,queryNode:f1.cloneWithoutWhere(this.#$.queryNode)})}top($,F){return new v2({...this.#$,queryNode:f1.cloneWithTop(this.#$.queryNode,r$($,F))})}using($){return new v2({...this.#$,queryNode:lY.cloneWithUsing(this.#$.queryNode,a$($))})}innerJoin(...$){return this.#F("InnerJoin",$)}leftJoin(...$){return this.#F("LeftJoin",$)}rightJoin(...$){return this.#F("RightJoin",$)}fullJoin(...$){return this.#F("FullJoin",$)}#F($,F){return new v2({...this.#$,queryNode:f1.cloneWithJoin(this.#$.queryNode,rY($,F))})}returning($){return new v2({...this.#$,queryNode:f1.cloneWithReturning(this.#$.queryNode,G9($))})}returningAll($){return new v2({...this.#$,queryNode:f1.cloneWithReturning(this.#$.queryNode,b9($))})}output($){return new v2({...this.#$,queryNode:f1.cloneWithOutput(this.#$.queryNode,G9($))})}outputAll($){return new v2({...this.#$,queryNode:f1.cloneWithOutput(this.#$.queryNode,b9($))})}clearReturning(){return new v2({...this.#$,queryNode:f1.cloneWithoutReturning(this.#$.queryNode)})}clearLimit(){return new v2({...this.#$,queryNode:lY.cloneWithoutLimit(this.#$.queryNode)})}orderBy(...$){return new v2({...this.#$,queryNode:f1.cloneWithOrderByItems(this.#$.queryNode,c7($))})}clearOrderBy(){return new v2({...this.#$,queryNode:f1.cloneWithoutOrderBy(this.#$.queryNode)})}limit($){return new v2({...this.#$,queryNode:lY.cloneWithLimit(this.#$.queryNode,wU.create(p6($)))})}modifyEnd($){return new v2({...this.#$,queryNode:f1.cloneWithEndModifier(this.#$.queryNode,$.toOperationNode())})}$call($){return $(this)}$if($,F){if($)return F(this);return new v2({...this.#$})}$castTo(){return new v2(this.#$)}$narrowType(){return new v2(this.#$)}$assertType(){return new v2(this.#$)}withPlugin($){return new v2({...this.#$,executor:this.#$.executor.withPlugin($)})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.queryNode,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){let $=this.compile(),F=await this.#$.executor.executeQuery($),{adapter:A}=this.#$.executor,J=$.query;if(J.returning&&A.supportsReturning||J.output&&A.supportsOutput)return F.rows;return[new ka(F.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[$]=await this.execute();return $}async executeTakeFirstOrThrow($=n$){let F=await this.executeTakeFirst();if(F===void 0)throw UA($)?new $(this.toOperationNode()):$(this.toOperationNode());return F}async*stream($=100){let F=this.compile(),A=this.#$.executor.stream(F,$);for await(let J of A)yield*J.rows}async explain($,F){return await new v2({...this.#$,queryNode:f1.cloneWithExplain(this.#$.queryNode,$,F)}).execute()}}var ba=x(()=>{pL();Z8();iY();f5();A1();RD();uL();lL();ND();p7();zA();BU()});class xa{numUpdatedRows;numChangedRows;constructor($,F){this.numUpdatedRows=$,this.numChangedRows=F}}class q2{#$;constructor($){this.#$=P($)}where(...$){return new q2({...this.#$,queryNode:f1.cloneWithWhere(this.#$.queryNode,Z2($))})}whereRef($,F,A){return new q2({...this.#$,queryNode:f1.cloneWithWhere(this.#$.queryNode,k9($,F,A))})}clearWhere(){return new q2({...this.#$,queryNode:f1.cloneWithoutWhere(this.#$.queryNode)})}top($,F){return new q2({...this.#$,queryNode:f1.cloneWithTop(this.#$.queryNode,r$($,F))})}from($){return new q2({...this.#$,queryNode:HA.cloneWithFromItems(this.#$.queryNode,a$($))})}innerJoin(...$){return this.#F("InnerJoin",$)}leftJoin(...$){return this.#F("LeftJoin",$)}rightJoin(...$){return this.#F("RightJoin",$)}fullJoin(...$){return this.#F("FullJoin",$)}#F($,F){return new q2({...this.#$,queryNode:f1.cloneWithJoin(this.#$.queryNode,rY($,F))})}orderBy(...$){return new q2({...this.#$,queryNode:f1.cloneWithOrderByItems(this.#$.queryNode,c7($))})}clearOrderBy(){return new q2({...this.#$,queryNode:f1.cloneWithoutOrderBy(this.#$.queryNode)})}limit($){return new q2({...this.#$,queryNode:HA.cloneWithLimit(this.#$.queryNode,wU.create(p6($)))})}set(...$){return new q2({...this.#$,queryNode:HA.cloneWithUpdates(this.#$.queryNode,iR1(...$))})}returning($){return new q2({...this.#$,queryNode:f1.cloneWithReturning(this.#$.queryNode,G9($))})}returningAll($){return new q2({...this.#$,queryNode:f1.cloneWithReturning(this.#$.queryNode,b9($))})}output($){return new q2({...this.#$,queryNode:f1.cloneWithOutput(this.#$.queryNode,G9($))})}outputAll($){return new q2({...this.#$,queryNode:f1.cloneWithOutput(this.#$.queryNode,b9($))})}modifyEnd($){return new q2({...this.#$,queryNode:f1.cloneWithEndModifier(this.#$.queryNode,$.toOperationNode())})}clearReturning(){return new q2({...this.#$,queryNode:f1.cloneWithoutReturning(this.#$.queryNode)})}$call($){return $(this)}$if($,F){if($)return F(this);return new q2({...this.#$})}$castTo(){return new q2(this.#$)}$narrowType(){return new q2(this.#$)}$assertType(){return new q2(this.#$)}withPlugin($){return new q2({...this.#$,executor:this.#$.executor.withPlugin($)})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.queryNode,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){let $=this.compile(),F=await this.#$.executor.executeQuery($),{adapter:A}=this.#$.executor,J=$.query;if(J.returning&&A.supportsReturning||J.output&&A.supportsOutput)return F.rows;return[new xa(F.numAffectedRows??BigInt(0),F.numChangedRows)]}async executeTakeFirst(){let[$]=await this.execute();return $}async executeTakeFirstOrThrow($=n$){let F=await this.executeTakeFirst();if(F===void 0)throw UA($)?new $(this.toOperationNode()):$(this.toOperationNode());return F}async*stream($=100){let F=this.compile(),A=this.#$.executor.stream(F,$);for await(let J of A)yield*J.rows}async explain($,F){return await new q2({...this.#$,queryNode:f1.cloneWithExplain(this.#$.queryNode,$,F)}).execute()}}var qj=x(()=>{pL();Z8();iY();f5();HU();Bj();A1();RD();p7();zA();lL();BU();ND()});var ga;var fa=x(()=>{A1();g8();FU();ga=P({is($){return $.kind==="CommonTableExpressionNameNode"},create($,F){return P({kind:"CommonTableExpressionNameNode",table:i3.create($),columns:F?P(F.map(Y6.create)):void 0})}})});var qU;var Lj=x(()=>{A1();qU=P({is($){return $.kind==="CommonTableExpressionNode"},create($,F){return P({kind:"CommonTableExpressionNode",name:$,expression:F})},cloneWith($,F){return P({...$,...F})}})});class iL{#$;constructor($){this.#$=P($)}materialized(){return new iL({...this.#$,node:qU.cloneWith(this.#$.node,{materialized:!0})})}notMaterialized(){return new iL({...this.#$,node:qU.cloneWith(this.#$.node,{materialized:!1})})}toOperationNode(){return this.#$.node}}var tR1=x(()=>{Lj();A1()});function va($,F){let A=F(eR1()).toOperationNode();if(S6($))return $(HN0(A)).toOperationNode();return qU.create(sR1($),A)}function HN0($){return(F)=>{return new iL({node:qU.create(sR1(F),$)})}}function sR1($){if($.includes("(")){let F=$.split(/[\(\)]/),A=F[0],J=F[1].split(",").map((X)=>X.trim());return ga.create(A,J)}else return ga.create($)}var oR1=x(()=>{fa();Ej();A1();tR1();Lj()});var nL;var ya=x(()=>{A1();nL=P({is($){return $.kind==="WithNode"},create($,F){return P({kind:"WithNode",expressions:P([$]),...F})},cloneWithExpression($,F){return P({...$,expressions:P([...$.expressions,F])})}})});function Vj($){let F="";for(let A=0;A<$;++A)F+=UN0();return F}function UN0(){return $I1[~~(Math.random()*$I1.length)]}var $I1;var ua=x(()=>{$I1=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"]});function U0(){return new FI1}class FI1{#$;get queryId(){if(this.#$===void 0)this.#$=Vj(8);return this.#$}}var u5=x(()=>{ua()});function S1($){return $}class t${nodeStack=[];#$=P({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),RenameConstraintNode:this.transformRenameConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),RefreshMaterializedViewNode:this.transformRefreshMaterializedView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this),OrActionNode:this.transformOrAction.bind(this),CollateNode:this.transformCollate.bind(this)});transformNode($,F){if(!$)return $;this.nodeStack.push($);let A=this.transformNodeImpl($,F);return this.nodeStack.pop(),P(A)}transformNodeImpl($,F){return this.#$[$.kind]($,F)}transformNodeList($,F){if(!$)return $;return P($.map((A)=>this.transformNode(A,F)))}transformSelectQuery($,F){return S1({kind:"SelectQueryNode",from:this.transformNode($.from,F),selections:this.transformNodeList($.selections,F),distinctOn:this.transformNodeList($.distinctOn,F),joins:this.transformNodeList($.joins,F),groupBy:this.transformNode($.groupBy,F),orderBy:this.transformNode($.orderBy,F),where:this.transformNode($.where,F),frontModifiers:this.transformNodeList($.frontModifiers,F),endModifiers:this.transformNodeList($.endModifiers,F),limit:this.transformNode($.limit,F),offset:this.transformNode($.offset,F),with:this.transformNode($.with,F),having:this.transformNode($.having,F),explain:this.transformNode($.explain,F),setOperations:this.transformNodeList($.setOperations,F),fetch:this.transformNode($.fetch,F),top:this.transformNode($.top,F)})}transformSelection($,F){return S1({kind:"SelectionNode",selection:this.transformNode($.selection,F)})}transformColumn($,F){return S1({kind:"ColumnNode",column:this.transformNode($.column,F)})}transformAlias($,F){return S1({kind:"AliasNode",node:this.transformNode($.node,F),alias:this.transformNode($.alias,F)})}transformTable($,F){return S1({kind:"TableNode",table:this.transformNode($.table,F)})}transformFrom($,F){return S1({kind:"FromNode",froms:this.transformNodeList($.froms,F)})}transformReference($,F){return S1({kind:"ReferenceNode",column:this.transformNode($.column,F),table:this.transformNode($.table,F)})}transformAnd($,F){return S1({kind:"AndNode",left:this.transformNode($.left,F),right:this.transformNode($.right,F)})}transformOr($,F){return S1({kind:"OrNode",left:this.transformNode($.left,F),right:this.transformNode($.right,F)})}transformValueList($,F){return S1({kind:"ValueListNode",values:this.transformNodeList($.values,F)})}transformParens($,F){return S1({kind:"ParensNode",node:this.transformNode($.node,F)})}transformJoin($,F){return S1({kind:"JoinNode",joinType:$.joinType,table:this.transformNode($.table,F),on:this.transformNode($.on,F)})}transformRaw($,F){return S1({kind:"RawNode",sqlFragments:P([...$.sqlFragments]),parameters:this.transformNodeList($.parameters,F)})}transformWhere($,F){return S1({kind:"WhereNode",where:this.transformNode($.where,F)})}transformInsertQuery($,F){return S1({kind:"InsertQueryNode",into:this.transformNode($.into,F),columns:this.transformNodeList($.columns,F),values:this.transformNode($.values,F),returning:this.transformNode($.returning,F),onConflict:this.transformNode($.onConflict,F),onDuplicateKey:this.transformNode($.onDuplicateKey,F),endModifiers:this.transformNodeList($.endModifiers,F),with:this.transformNode($.with,F),ignore:$.ignore,orAction:this.transformNode($.orAction,F),replace:$.replace,explain:this.transformNode($.explain,F),defaultValues:$.defaultValues,top:this.transformNode($.top,F),output:this.transformNode($.output,F)})}transformValues($,F){return S1({kind:"ValuesNode",values:this.transformNodeList($.values,F)})}transformDeleteQuery($,F){return S1({kind:"DeleteQueryNode",from:this.transformNode($.from,F),using:this.transformNode($.using,F),joins:this.transformNodeList($.joins,F),where:this.transformNode($.where,F),returning:this.transformNode($.returning,F),endModifiers:this.transformNodeList($.endModifiers,F),with:this.transformNode($.with,F),orderBy:this.transformNode($.orderBy,F),limit:this.transformNode($.limit,F),explain:this.transformNode($.explain,F),top:this.transformNode($.top,F),output:this.transformNode($.output,F)})}transformReturning($,F){return S1({kind:"ReturningNode",selections:this.transformNodeList($.selections,F)})}transformCreateTable($,F){return S1({kind:"CreateTableNode",table:this.transformNode($.table,F),columns:this.transformNodeList($.columns,F),constraints:this.transformNodeList($.constraints,F),temporary:$.temporary,ifNotExists:$.ifNotExists,onCommit:$.onCommit,frontModifiers:this.transformNodeList($.frontModifiers,F),endModifiers:this.transformNodeList($.endModifiers,F),selectQuery:this.transformNode($.selectQuery,F)})}transformColumnDefinition($,F){return S1({kind:"ColumnDefinitionNode",column:this.transformNode($.column,F),dataType:this.transformNode($.dataType,F),references:this.transformNode($.references,F),primaryKey:$.primaryKey,autoIncrement:$.autoIncrement,unique:$.unique,notNull:$.notNull,unsigned:$.unsigned,defaultTo:this.transformNode($.defaultTo,F),check:this.transformNode($.check,F),generated:this.transformNode($.generated,F),frontModifiers:this.transformNodeList($.frontModifiers,F),endModifiers:this.transformNodeList($.endModifiers,F),nullsNotDistinct:$.nullsNotDistinct,identity:$.identity,ifNotExists:$.ifNotExists})}transformAddColumn($,F){return S1({kind:"AddColumnNode",column:this.transformNode($.column,F)})}transformDropTable($,F){return S1({kind:"DropTableNode",table:this.transformNode($.table,F),ifExists:$.ifExists,cascade:$.cascade})}transformOrderBy($,F){return S1({kind:"OrderByNode",items:this.transformNodeList($.items,F)})}transformOrderByItem($,F){return S1({kind:"OrderByItemNode",orderBy:this.transformNode($.orderBy,F),direction:this.transformNode($.direction,F),collation:this.transformNode($.collation,F),nulls:$.nulls})}transformGroupBy($,F){return S1({kind:"GroupByNode",items:this.transformNodeList($.items,F)})}transformGroupByItem($,F){return S1({kind:"GroupByItemNode",groupBy:this.transformNode($.groupBy,F)})}transformUpdateQuery($,F){return S1({kind:"UpdateQueryNode",table:this.transformNode($.table,F),from:this.transformNode($.from,F),joins:this.transformNodeList($.joins,F),where:this.transformNode($.where,F),updates:this.transformNodeList($.updates,F),returning:this.transformNode($.returning,F),endModifiers:this.transformNodeList($.endModifiers,F),with:this.transformNode($.with,F),explain:this.transformNode($.explain,F),limit:this.transformNode($.limit,F),top:this.transformNode($.top,F),output:this.transformNode($.output,F),orderBy:this.transformNode($.orderBy,F)})}transformColumnUpdate($,F){return S1({kind:"ColumnUpdateNode",column:this.transformNode($.column,F),value:this.transformNode($.value,F)})}transformLimit($,F){return S1({kind:"LimitNode",limit:this.transformNode($.limit,F)})}transformOffset($,F){return S1({kind:"OffsetNode",offset:this.transformNode($.offset,F)})}transformOnConflict($,F){return S1({kind:"OnConflictNode",columns:this.transformNodeList($.columns,F),constraint:this.transformNode($.constraint,F),indexExpression:this.transformNode($.indexExpression,F),indexWhere:this.transformNode($.indexWhere,F),updates:this.transformNodeList($.updates,F),updateWhere:this.transformNode($.updateWhere,F),doNothing:$.doNothing})}transformOnDuplicateKey($,F){return S1({kind:"OnDuplicateKeyNode",updates:this.transformNodeList($.updates,F)})}transformCreateIndex($,F){return S1({kind:"CreateIndexNode",name:this.transformNode($.name,F),table:this.transformNode($.table,F),columns:this.transformNodeList($.columns,F),unique:$.unique,using:this.transformNode($.using,F),ifNotExists:$.ifNotExists,where:this.transformNode($.where,F),nullsNotDistinct:$.nullsNotDistinct})}transformList($,F){return S1({kind:"ListNode",items:this.transformNodeList($.items,F)})}transformDropIndex($,F){return S1({kind:"DropIndexNode",name:this.transformNode($.name,F),table:this.transformNode($.table,F),ifExists:$.ifExists,cascade:$.cascade})}transformPrimaryKeyConstraint($,F){return S1({kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList($.columns,F),name:this.transformNode($.name,F),deferrable:$.deferrable,initiallyDeferred:$.initiallyDeferred})}transformUniqueConstraint($,F){return S1({kind:"UniqueConstraintNode",columns:this.transformNodeList($.columns,F),name:this.transformNode($.name,F),nullsNotDistinct:$.nullsNotDistinct,deferrable:$.deferrable,initiallyDeferred:$.initiallyDeferred})}transformForeignKeyConstraint($,F){return S1({kind:"ForeignKeyConstraintNode",columns:this.transformNodeList($.columns,F),references:this.transformNode($.references,F),name:this.transformNode($.name,F),onDelete:$.onDelete,onUpdate:$.onUpdate,deferrable:$.deferrable,initiallyDeferred:$.initiallyDeferred})}transformSetOperation($,F){return S1({kind:"SetOperationNode",operator:$.operator,expression:this.transformNode($.expression,F),all:$.all})}transformReferences($,F){return S1({kind:"ReferencesNode",table:this.transformNode($.table,F),columns:this.transformNodeList($.columns,F),onDelete:$.onDelete,onUpdate:$.onUpdate})}transformCheckConstraint($,F){return S1({kind:"CheckConstraintNode",expression:this.transformNode($.expression,F),name:this.transformNode($.name,F)})}transformWith($,F){return S1({kind:"WithNode",expressions:this.transformNodeList($.expressions,F),recursive:$.recursive})}transformCommonTableExpression($,F){return S1({kind:"CommonTableExpressionNode",name:this.transformNode($.name,F),materialized:$.materialized,expression:this.transformNode($.expression,F)})}transformCommonTableExpressionName($,F){return S1({kind:"CommonTableExpressionNameNode",table:this.transformNode($.table,F),columns:this.transformNodeList($.columns,F)})}transformHaving($,F){return S1({kind:"HavingNode",having:this.transformNode($.having,F)})}transformCreateSchema($,F){return S1({kind:"CreateSchemaNode",schema:this.transformNode($.schema,F),ifNotExists:$.ifNotExists})}transformDropSchema($,F){return S1({kind:"DropSchemaNode",schema:this.transformNode($.schema,F),ifExists:$.ifExists,cascade:$.cascade})}transformAlterTable($,F){return S1({kind:"AlterTableNode",table:this.transformNode($.table,F),renameTo:this.transformNode($.renameTo,F),setSchema:this.transformNode($.setSchema,F),columnAlterations:this.transformNodeList($.columnAlterations,F),addConstraint:this.transformNode($.addConstraint,F),dropConstraint:this.transformNode($.dropConstraint,F),renameConstraint:this.transformNode($.renameConstraint,F),addIndex:this.transformNode($.addIndex,F),dropIndex:this.transformNode($.dropIndex,F)})}transformDropColumn($,F){return S1({kind:"DropColumnNode",column:this.transformNode($.column,F)})}transformRenameColumn($,F){return S1({kind:"RenameColumnNode",column:this.transformNode($.column,F),renameTo:this.transformNode($.renameTo,F)})}transformAlterColumn($,F){return S1({kind:"AlterColumnNode",column:this.transformNode($.column,F),dataType:this.transformNode($.dataType,F),dataTypeExpression:this.transformNode($.dataTypeExpression,F),setDefault:this.transformNode($.setDefault,F),dropDefault:$.dropDefault,setNotNull:$.setNotNull,dropNotNull:$.dropNotNull})}transformModifyColumn($,F){return S1({kind:"ModifyColumnNode",column:this.transformNode($.column,F)})}transformAddConstraint($,F){return S1({kind:"AddConstraintNode",constraint:this.transformNode($.constraint,F)})}transformDropConstraint($,F){return S1({kind:"DropConstraintNode",constraintName:this.transformNode($.constraintName,F),ifExists:$.ifExists,modifier:$.modifier})}transformRenameConstraint($,F){return S1({kind:"RenameConstraintNode",oldName:this.transformNode($.oldName,F),newName:this.transformNode($.newName,F)})}transformCreateView($,F){return S1({kind:"CreateViewNode",name:this.transformNode($.name,F),temporary:$.temporary,orReplace:$.orReplace,ifNotExists:$.ifNotExists,materialized:$.materialized,columns:this.transformNodeList($.columns,F),as:this.transformNode($.as,F)})}transformRefreshMaterializedView($,F){return S1({kind:"RefreshMaterializedViewNode",name:this.transformNode($.name,F),concurrently:$.concurrently,withNoData:$.withNoData})}transformDropView($,F){return S1({kind:"DropViewNode",name:this.transformNode($.name,F),ifExists:$.ifExists,materialized:$.materialized,cascade:$.cascade})}transformGenerated($,F){return S1({kind:"GeneratedNode",byDefault:$.byDefault,always:$.always,identity:$.identity,stored:$.stored,expression:this.transformNode($.expression,F)})}transformDefaultValue($,F){return S1({kind:"DefaultValueNode",defaultValue:this.transformNode($.defaultValue,F)})}transformOn($,F){return S1({kind:"OnNode",on:this.transformNode($.on,F)})}transformSelectModifier($,F){return S1({kind:"SelectModifierNode",modifier:$.modifier,rawModifier:this.transformNode($.rawModifier,F),of:this.transformNodeList($.of,F)})}transformCreateType($,F){return S1({kind:"CreateTypeNode",name:this.transformNode($.name,F),enum:this.transformNode($.enum,F)})}transformDropType($,F){return S1({kind:"DropTypeNode",name:this.transformNode($.name,F),ifExists:$.ifExists})}transformExplain($,F){return S1({kind:"ExplainNode",format:$.format,options:this.transformNode($.options,F)})}transformSchemableIdentifier($,F){return S1({kind:"SchemableIdentifierNode",schema:this.transformNode($.schema,F),identifier:this.transformNode($.identifier,F)})}transformAggregateFunction($,F){return S1({kind:"AggregateFunctionNode",func:$.func,aggregated:this.transformNodeList($.aggregated,F),distinct:$.distinct,orderBy:this.transformNode($.orderBy,F),withinGroup:this.transformNode($.withinGroup,F),filter:this.transformNode($.filter,F),over:this.transformNode($.over,F)})}transformOver($,F){return S1({kind:"OverNode",orderBy:this.transformNode($.orderBy,F),partitionBy:this.transformNode($.partitionBy,F)})}transformPartitionBy($,F){return S1({kind:"PartitionByNode",items:this.transformNodeList($.items,F)})}transformPartitionByItem($,F){return S1({kind:"PartitionByItemNode",partitionBy:this.transformNode($.partitionBy,F)})}transformBinaryOperation($,F){return S1({kind:"BinaryOperationNode",leftOperand:this.transformNode($.leftOperand,F),operator:this.transformNode($.operator,F),rightOperand:this.transformNode($.rightOperand,F)})}transformUnaryOperation($,F){return S1({kind:"UnaryOperationNode",operator:this.transformNode($.operator,F),operand:this.transformNode($.operand,F)})}transformUsing($,F){return S1({kind:"UsingNode",tables:this.transformNodeList($.tables,F)})}transformFunction($,F){return S1({kind:"FunctionNode",func:$.func,arguments:this.transformNodeList($.arguments,F)})}transformCase($,F){return S1({kind:"CaseNode",value:this.transformNode($.value,F),when:this.transformNodeList($.when,F),else:this.transformNode($.else,F),isStatement:$.isStatement})}transformWhen($,F){return S1({kind:"WhenNode",condition:this.transformNode($.condition,F),result:this.transformNode($.result,F)})}transformJSONReference($,F){return S1({kind:"JSONReferenceNode",reference:this.transformNode($.reference,F),traversal:this.transformNode($.traversal,F)})}transformJSONPath($,F){return S1({kind:"JSONPathNode",inOperator:this.transformNode($.inOperator,F),pathLegs:this.transformNodeList($.pathLegs,F)})}transformJSONPathLeg($,F){return S1({kind:"JSONPathLegNode",type:$.type,value:$.value})}transformJSONOperatorChain($,F){return S1({kind:"JSONOperatorChainNode",operator:this.transformNode($.operator,F),values:this.transformNodeList($.values,F)})}transformTuple($,F){return S1({kind:"TupleNode",values:this.transformNodeList($.values,F)})}transformMergeQuery($,F){return S1({kind:"MergeQueryNode",into:this.transformNode($.into,F),using:this.transformNode($.using,F),whens:this.transformNodeList($.whens,F),with:this.transformNode($.with,F),top:this.transformNode($.top,F),endModifiers:this.transformNodeList($.endModifiers,F),output:this.transformNode($.output,F),returning:this.transformNode($.returning,F)})}transformMatched($,F){return S1({kind:"MatchedNode",not:$.not,bySource:$.bySource})}transformAddIndex($,F){return S1({kind:"AddIndexNode",name:this.transformNode($.name,F),columns:this.transformNodeList($.columns,F),unique:$.unique,using:this.transformNode($.using,F),ifNotExists:$.ifNotExists})}transformCast($,F){return S1({kind:"CastNode",expression:this.transformNode($.expression,F),dataType:this.transformNode($.dataType,F)})}transformFetch($,F){return S1({kind:"FetchNode",rowCount:this.transformNode($.rowCount,F),modifier:$.modifier})}transformTop($,F){return S1({kind:"TopNode",expression:$.expression,modifiers:$.modifiers})}transformOutput($,F){return S1({kind:"OutputNode",selections:this.transformNodeList($.selections,F)})}transformDataType($,F){return $}transformSelectAll($,F){return $}transformIdentifier($,F){return $}transformValue($,F){return $}transformPrimitiveValueList($,F){return $}transformOperator($,F){return $}transformDefaultInsertValue($,F){return $}transformOrAction($,F){return $}transformCollate($,F){return $}}var TD=x(()=>{A1()});var QN0,KN0,ha;var AI1=x(()=>{u$();W2();AU();Hj();TD();gJ();FU();Uj();A1();QN0=P({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,RefreshMaterializedViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),KN0={json_agg:!0,to_json:!0};ha=class ha extends t${#$;#F=new Set;#A=new Set;constructor($){super();this.#$=$}transformNodeImpl($,F){if(!this.#X($))return super.transformNodeImpl($,F);let A=this.#W($);for(let Y of A)this.#A.add(Y);let J=this.#Z($);for(let Y of J)this.#F.add(Y);let X=super.transformNodeImpl($,F);for(let Y of J)this.#F.delete(Y);for(let Y of A)this.#A.delete(Y);return X}transformSchemableIdentifier($,F){let A=super.transformSchemableIdentifier($,F);if(A.schema||!this.#F.has($.identifier.name))return A;return{...A,schema:Y0.create(this.#$)}}transformReferences($,F){let A=super.transformReferences($,F);if(A.table.table.schema)return A;return{...A,table:i3.createWithSchema(this.#$,A.table.table.identifier.name)}}transformAggregateFunction($,F){return{...super.transformAggregateFunction({...$,aggregated:[]},F),aggregated:this.#J($,F,"aggregated")}}transformFunction($,F){return{...super.transformFunction({...$,arguments:[]},F),arguments:this.#J($,F,"arguments")}}transformSelectModifier($,F){return{...super.transformSelectModifier({...$,of:void 0},F),of:$.of?.map((A)=>i3.is(A)&&!A.table.schema?{...A,table:this.transformIdentifier(A.table.identifier,F)}:this.transformNode(A,F))}}#J($,F,A){return KN0[$.func]?$[A].map((J)=>!i3.is(J)||J.table.schema?this.transformNode(J,F):{...J,table:this.transformIdentifier(J.table.identifier,F)}):this.transformNodeList($[A],F)}#X($){return $.kind in QN0}#Z($){let F=new Set;if("name"in $&&$.name&&b8.is($.name))this.#D($.name,F);if("from"in $&&$.from)for(let A of $.from.froms)this.#Y(A,F);if("into"in $&&$.into)this.#Y($.into,F);if("table"in $&&$.table)this.#Y($.table,F);if("joins"in $&&$.joins)for(let A of $.joins)this.#Y(A.table,F);if("using"in $&&$.using)if(m$.is($.using))this.#Y($.using.table,F);else this.#Y($.using,F);return F}#W($){let F=new Set;if("with"in $&&$.with)this.#G($.with,F);return F}#Y($,F){if(i3.is($))return this.#D($.table,F);if(_9.is($)&&i3.is($.node))return this.#D($.node.table,F);if(zj.is($)){for(let A of $.items)this.#Y(A,F);return}if(yL.is($)){for(let A of $.tables)this.#Y(A,F);return}}#D($,F){let A=$.identifier.name;if(!this.#F.has(A)&&!this.#A.has(A))F.add(A)}#G($,F){for(let A of $.expressions){let J=A.name.table.table.identifier.name;if(!this.#A.has(J))F.add(J)}}}});class n7{#$;constructor($){this.#$=new ha($)}transformQuery($){return this.#$.transformNode($.node,$.queryId)}async transformResult($){return $.result}}var jD=x(()=>{AI1()});var JI1;var ma=x(()=>{A1();JI1=P({is($){return $.kind==="MatchedNode"},create($,F=!1){return P({kind:"MatchedNode",not:$,bySource:F})}})});function da($,F,A){return v5.create(zU([JI1.create(!$.isMatched,$.bySource),...F&&F.length>0?[F.length===3&&A?k9(F[0],F[1],F[2]):Z2(F)]:[]],"and",!1))}function LU($){if(O6($))return Q6.create([$],[]);if(w2($))return $.toOperationNode();return $}var XI1=x(()=>{ma();n3();g5();PD();A1();p7()});class aY{#$;#F;#A;constructor(){this.#$=new Promise(($,F)=>{this.#A=F,this.#F=$})}get promise(){return this.#$}resolve=($)=>{if(this.#F)this.#F($)};reject=($)=>{if(this.#A)this.#A($)}}async function Nj($){let F=new aY,A=new aY;return $.provideConnection(async(J)=>{return F.resolve(J),await A.promise}).catch((J)=>F.reject(J)),P({connection:await F.promise,release:A.resolve})}var ca=x(()=>{A1()});class rL{#$;constructor($=BN0){this.#$=$}get plugins(){return this.#$}transformQuery($,F){for(let A of this.#$){let J=A.transformQuery({node:$,queryId:F});if(J.kind===$.kind)$=J;else throw Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${$.kind}`,`but it returned a ${J.kind}`].join(" "))}return $}async executeQuery($){return await this.provideConnection(async(F)=>{let A=await F.executeQuery($);if("numUpdatedOrDeletedRows"in A)c$("kysely:warning: outdated driver/plugin detected! `QueryResult.numUpdatedOrDeletedRows` has been replaced with `QueryResult.numAffectedRows`.");return await this.#F(A,$.queryId)})}async*stream($,F){let{connection:A,release:J}=await Nj(this);try{for await(let X of A.streamQuery($,F))yield await this.#F(X,$.queryId)}finally{J()}}async#F($,F){for(let A of this.#$)$=await A.transformResult({result:$,queryId:F});return $}}var BN0;var la=x(()=>{A1();ca();YU();BN0=P([])});var EU,tY;var VU=x(()=>{la();EU=class EU extends rL{get adapter(){throw Error("this query cannot be compiled to SQL")}compileQuery(){throw Error("this query cannot be compiled to SQL")}provideConnection(){throw Error("this query cannot be executed")}withConnectionProvider(){throw Error("this query cannot have a connection provider")}withPlugin($){return new EU([...this.plugins,$])}withPlugins($){return new EU([...this.plugins,...$])}withPluginAtFront($){return new EU([$,...this.plugins])}withoutPlugins(){return new EU([])}};tY=new EU});class pa{numChangedRows;constructor($){this.numChangedRows=$}}class mJ{#$;constructor($){this.#$=P($)}modifyEnd($){return new mJ({...this.#$,queryNode:f1.cloneWithEndModifier(this.#$.queryNode,$.toOperationNode())})}top($,F){return new mJ({...this.#$,queryNode:f1.cloneWithTop(this.#$.queryNode,r$($,F))})}using(...$){return new t3({...this.#$,queryNode:i7.cloneWithUsing(this.#$.queryNode,rY("Using",$))})}returning($){return new mJ({...this.#$,queryNode:f1.cloneWithReturning(this.#$.queryNode,G9($))})}returningAll($){return new mJ({...this.#$,queryNode:f1.cloneWithReturning(this.#$.queryNode,b9($))})}output($){return new mJ({...this.#$,queryNode:f1.cloneWithOutput(this.#$.queryNode,G9($))})}outputAll($){return new mJ({...this.#$,queryNode:f1.cloneWithOutput(this.#$.queryNode,b9($))})}}class t3{#$;constructor($){this.#$=P($)}modifyEnd($){return new t3({...this.#$,queryNode:f1.cloneWithEndModifier(this.#$.queryNode,$.toOperationNode())})}top($,F){return new t3({...this.#$,queryNode:f1.cloneWithTop(this.#$.queryNode,r$($,F))})}whenMatched(){return this.#F([])}whenMatchedAnd(...$){return this.#F($)}whenMatchedAndRef($,F,A){return this.#F([$,F,A],!0)}#F($,F){return new ia({...this.#$,queryNode:i7.cloneWithWhen(this.#$.queryNode,da({isMatched:!0},$,F))})}whenNotMatched(){return this.#A([])}whenNotMatchedAnd(...$){return this.#A($)}whenNotMatchedAndRef($,F,A){return this.#A([$,F,A],!0)}whenNotMatchedBySource(){return this.#A([],!1,!0)}whenNotMatchedBySourceAnd(...$){return this.#A($,!1,!0)}whenNotMatchedBySourceAndRef($,F,A){return this.#A([$,F,A],!0,!0)}returning($){return new t3({...this.#$,queryNode:f1.cloneWithReturning(this.#$.queryNode,G9($))})}returningAll($){return new t3({...this.#$,queryNode:f1.cloneWithReturning(this.#$.queryNode,b9($))})}output($){return new t3({...this.#$,queryNode:f1.cloneWithOutput(this.#$.queryNode,G9($))})}outputAll($){return new t3({...this.#$,queryNode:f1.cloneWithOutput(this.#$.queryNode,b9($))})}#A($,F=!1,A=!1){let J={...this.#$,queryNode:i7.cloneWithWhen(this.#$.queryNode,da({isMatched:!1,bySource:A},$,F))};return new(A?ia:YI1)(J)}$call($){return $(this)}$if($,F){if($)return F(this);return new t3({...this.#$})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.queryNode,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){let $=this.compile(),F=await this.#$.executor.executeQuery($),{adapter:A}=this.#$.executor,J=$.query;if(J.returning&&A.supportsReturning||J.output&&A.supportsOutput)return F.rows;return[new pa(F.numAffectedRows)]}async executeTakeFirst(){let[$]=await this.execute();return $}async executeTakeFirstOrThrow($=n$){let F=await this.executeTakeFirst();if(F===void 0)throw UA($)?new $(this.toOperationNode()):$(this.toOperationNode());return F}}class ia{#$;constructor($){this.#$=P($)}thenDelete(){return new t3({...this.#$,queryNode:i7.cloneWithThen(this.#$.queryNode,LU("delete"))})}thenDoNothing(){return new t3({...this.#$,queryNode:i7.cloneWithThen(this.#$.queryNode,LU("do nothing"))})}thenUpdate($){return new t3({...this.#$,queryNode:i7.cloneWithThen(this.#$.queryNode,LU($(new q2({queryId:this.#$.queryId,executor:tY,queryNode:HA.createWithoutTable()}))))})}thenUpdateSet(...$){return this.thenUpdate((F)=>F.set(...$))}}class YI1{#$;constructor($){this.#$=P($)}thenDoNothing(){return new t3({...this.#$,queryNode:i7.cloneWithThen(this.#$.queryNode,LU("do nothing"))})}thenInsertValues($){let[F,A]=Kj($);return new t3({...this.#$,queryNode:i7.cloneWithThen(this.#$.queryNode,LU(G4.cloneWith(G4.createWithoutInto(),{columns:F,values:A})))})}}var na=x(()=>{MD();mL();f5();HU();Ma();pL();XI1();iY();BU();VU();A1();RD();qj()});class KA{#$;constructor($){this.#$=P($)}selectFrom($){return NU({queryId:U0(),executor:this.#$.executor,queryNode:M6.createFrom(a$($),this.#$.withNode)})}selectNoFrom($){return NU({queryId:U0(),executor:this.#$.executor,queryNode:M6.cloneWithSelections(M6.create(this.#$.withNode),G9($))})}insertInto($){return new i6({queryId:U0(),executor:this.#$.executor,queryNode:G4.create(K6($),this.#$.withNode)})}replaceInto($){return new i6({queryId:U0(),executor:this.#$.executor,queryNode:G4.create(K6($),this.#$.withNode,!0)})}deleteFrom($){return new v2({queryId:U0(),executor:this.#$.executor,queryNode:lY.create(a$($),this.#$.withNode)})}updateTable($){return new q2({queryId:U0(),executor:this.#$.executor,queryNode:HA.create(a$($),this.#$.withNode)})}mergeInto($){return new mJ({queryId:U0(),executor:this.#$.executor,queryNode:i7.create(ra($),this.#$.withNode)})}with($,F){let A=va($,F);return new KA({...this.#$,withNode:this.#$.withNode?nL.cloneWithExpression(this.#$.withNode,A):nL.create(A)})}withRecursive($,F){let A=va($,F);return new KA({...this.#$,withNode:this.#$.withNode?nL.cloneWithExpression(this.#$.withNode,A):nL.create(A,{recursive:!0})})}withPlugin($){return new KA({...this.#$,executor:this.#$.executor.withPlugin($)})}withoutPlugins(){return new KA({...this.#$,executor:this.#$.executor.withoutPlugins()})}withSchema($){return new KA({...this.#$,executor:this.#$.executor.withPluginAtFront(new n7($))})}}var Cj=x(()=>{aL();_a();ba();qj();uL();MD();pY();HU();Z8();oR1();ya();u5();jD();A1();iY();na();mL()});function eR1(){return new KA({executor:tY})}function WI1($,F){return new UU({joinNode:m$.create($,OD(F))})}function ZI1(){return new QU({overNode:fL.create()})}var Ej=x(()=>{AU();Gj();pY();La();mR1();aL();Cj();VU();u5();Z8()});function rY($,F){if(F.length===3)return qN0($,F[0],F[1],F[2]);else if(F.length===2)return wN0($,F[0],F[1]);else if(F.length===1)return LN0($,F[0]);else throw Error("not implemented")}function wN0($,F,A){return A(WI1($,F)).toOperationNode()}function qN0($,F,A,J){return m$.createWithOn($,OD(F),k9(A,"=",J))}function LN0($,F){return m$.create($,OD(F))}var pL=x(()=>{AU();p7();Ej();Z8()});var DI1;var aa=x(()=>{A1();DI1=P({is($){return $.kind==="OffsetNode"},create($){return P({kind:"OffsetNode",offset:$})}})});var GI1;var ta=x(()=>{A1();GI1=P({is($){return $.kind==="GroupByItemNode"},create($){return P({kind:"GroupByItemNode",groupBy:$})}})});function zI1($){return $=S6($)?$(y5()):$,uJ($).map(GI1.create)}var HI1=x(()=>{ta();nY();A1();X8()});var Mj;var Pj=x(()=>{A1();Mj=P({is($){return $.kind==="SetOperationNode"},create($,F,A){return P({kind:"SetOperationNode",operator:$,expression:F,all:A})}})});function SD($,F,A){if(S6(F))F=F(Rj());if(!S9(F))F=[F];return F.map((J)=>Mj.create($,a3(J),A))}var UI1=x(()=>{nY();Pj();A1();l$()});class _6{#$;constructor($){this.#$=$}get expressionType(){return}as($){return new jj(this,$)}or(...$){return new Ij(h$.create(this.#$,Z2($)))}and(...$){return new Tj(r3.create(this.#$,Z2($)))}$castTo(){return new _6(this.#$)}$notNull(){return new _6(this.#$)}toOperationNode(){return this.#$}}class jj{#$;#F;constructor($,F){this.#$=$,this.#F=F}get expression(){return this.#$}get alias(){return this.#F}toOperationNode(){return _9.create(this.#$.toOperationNode(),w2(this.#F)?this.#F.toOperationNode():Y0.create(this.#F))}}class Ij{#$;constructor($){this.#$=$}get expressionType(){return}as($){return new jj(this,$)}or(...$){return new Ij(h$.create(this.#$,Z2($)))}$castTo(){return new Ij(this.#$)}toOperationNode(){return l7.create(this.#$)}}class Tj{#$;constructor($){this.#$=$}get expressionType(){return}as($){return new jj(this,$)}and(...$){return new Tj(r3.create(this.#$,Z2($)))}$castTo(){return new Tj(this.#$)}toOperationNode(){return l7.create(this.#$)}}var CU=x(()=>{u$();hY();W2();n3();VD();GU();p7()});var QI1;var sa=x(()=>{A1();i$();QI1=P({is($){return $.kind==="FetchNode"},create($,F){return{kind:"FetchNode",rowCount:m4.create($),modifier:F}}})});function KI1($,F){if(!v$($)&&!yY($))throw Error(`Invalid fetch row count: ${$}`);if(!EN0(F))throw Error(`Invalid fetch modifier: ${F}`);return QI1.create($,F)}function EN0($){return $==="only"||$==="with ties"}var BI1=x(()=>{sa();A1()});class S0{#$;constructor($){this.#$=P($)}get expressionType(){return}get isSelectQueryBuilder(){return!0}where(...$){return new S0({...this.#$,queryNode:f1.cloneWithWhere(this.#$.queryNode,Z2($))})}whereRef($,F,A){return new S0({...this.#$,queryNode:f1.cloneWithWhere(this.#$.queryNode,k9($,F,A))})}having(...$){return new S0({...this.#$,queryNode:M6.cloneWithHaving(this.#$.queryNode,Z2($))})}havingRef($,F,A){return new S0({...this.#$,queryNode:M6.cloneWithHaving(this.#$.queryNode,k9($,F,A))})}select($){return new S0({...this.#$,queryNode:M6.cloneWithSelections(this.#$.queryNode,G9($))})}distinctOn($){return new S0({...this.#$,queryNode:M6.cloneWithDistinctOn(this.#$.queryNode,uJ($))})}modifyFront($){return new S0({...this.#$,queryNode:M6.cloneWithFrontModifier(this.#$.queryNode,GA.createWithExpression($.toOperationNode()))})}modifyEnd($){return new S0({...this.#$,queryNode:f1.cloneWithEndModifier(this.#$.queryNode,GA.createWithExpression($.toOperationNode()))})}distinct(){return new S0({...this.#$,queryNode:M6.cloneWithFrontModifier(this.#$.queryNode,GA.create("Distinct"))})}forUpdate($){return new S0({...this.#$,queryNode:f1.cloneWithEndModifier(this.#$.queryNode,GA.create("ForUpdate",$?RL($).map(K6):void 0))})}forShare($){return new S0({...this.#$,queryNode:f1.cloneWithEndModifier(this.#$.queryNode,GA.create("ForShare",$?RL($).map(K6):void 0))})}forKeyShare($){return new S0({...this.#$,queryNode:f1.cloneWithEndModifier(this.#$.queryNode,GA.create("ForKeyShare",$?RL($).map(K6):void 0))})}forNoKeyUpdate($){return new S0({...this.#$,queryNode:f1.cloneWithEndModifier(this.#$.queryNode,GA.create("ForNoKeyUpdate",$?RL($).map(K6):void 0))})}skipLocked(){return new S0({...this.#$,queryNode:f1.cloneWithEndModifier(this.#$.queryNode,GA.create("SkipLocked"))})}noWait(){return new S0({...this.#$,queryNode:f1.cloneWithEndModifier(this.#$.queryNode,GA.create("NoWait"))})}selectAll($){return new S0({...this.#$,queryNode:M6.cloneWithSelections(this.#$.queryNode,b9($))})}innerJoin(...$){return this.#F("InnerJoin",$)}leftJoin(...$){return this.#F("LeftJoin",$)}rightJoin(...$){return this.#F("RightJoin",$)}fullJoin(...$){return this.#F("FullJoin",$)}crossJoin(...$){return this.#F("CrossJoin",$)}innerJoinLateral(...$){return this.#F("LateralInnerJoin",$)}leftJoinLateral(...$){return this.#F("LateralLeftJoin",$)}crossJoinLateral(...$){return this.#F("LateralCrossJoin",$)}crossApply(...$){return this.#F("CrossApply",$)}outerApply(...$){return this.#F("OuterApply",$)}#F($,F){return new S0({...this.#$,queryNode:f1.cloneWithJoin(this.#$.queryNode,rY($,F))})}orderBy(...$){return new S0({...this.#$,queryNode:f1.cloneWithOrderByItems(this.#$.queryNode,c7($))})}groupBy($){return new S0({...this.#$,queryNode:M6.cloneWithGroupByItems(this.#$.queryNode,zI1($))})}limit($){return new S0({...this.#$,queryNode:M6.cloneWithLimit(this.#$.queryNode,wU.create(p6($)))})}offset($){return new S0({...this.#$,queryNode:M6.cloneWithOffset(this.#$.queryNode,DI1.create(p6($)))})}fetch($,F="only"){return new S0({...this.#$,queryNode:M6.cloneWithFetch(this.#$.queryNode,KI1($,F))})}top($,F){return new S0({...this.#$,queryNode:f1.cloneWithTop(this.#$.queryNode,r$($,F))})}union($){return new S0({...this.#$,queryNode:M6.cloneWithSetOperations(this.#$.queryNode,SD("union",$,!1))})}unionAll($){return new S0({...this.#$,queryNode:M6.cloneWithSetOperations(this.#$.queryNode,SD("union",$,!0))})}intersect($){return new S0({...this.#$,queryNode:M6.cloneWithSetOperations(this.#$.queryNode,SD("intersect",$,!1))})}intersectAll($){return new S0({...this.#$,queryNode:M6.cloneWithSetOperations(this.#$.queryNode,SD("intersect",$,!0))})}except($){return new S0({...this.#$,queryNode:M6.cloneWithSetOperations(this.#$.queryNode,SD("except",$,!1))})}exceptAll($){return new S0({...this.#$,queryNode:M6.cloneWithSetOperations(this.#$.queryNode,SD("except",$,!0))})}as($){return new wI1(this,$)}clearSelect(){return new S0({...this.#$,queryNode:M6.cloneWithoutSelections(this.#$.queryNode)})}clearWhere(){return new S0({...this.#$,queryNode:f1.cloneWithoutWhere(this.#$.queryNode)})}clearLimit(){return new S0({...this.#$,queryNode:M6.cloneWithoutLimit(this.#$.queryNode)})}clearOffset(){return new S0({...this.#$,queryNode:M6.cloneWithoutOffset(this.#$.queryNode)})}clearOrderBy(){return new S0({...this.#$,queryNode:f1.cloneWithoutOrderBy(this.#$.queryNode)})}clearGroupBy(){return new S0({...this.#$,queryNode:M6.cloneWithoutGroupBy(this.#$.queryNode)})}$call($){return $(this)}$if($,F){if($)return F(this);return new S0({...this.#$})}$castTo(){return new S0(this.#$)}$narrowType(){return new S0(this.#$)}$assertType(){return new S0(this.#$)}$asTuple(){return new _6(this.toOperationNode())}$asScalar(){return new _6(this.toOperationNode())}withPlugin($){return new S0({...this.#$,executor:this.#$.executor.withPlugin($)})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.queryNode,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){let $=this.compile();return(await this.#$.executor.executeQuery($)).rows}async executeTakeFirst(){let[$]=await this.execute();return $}async executeTakeFirstOrThrow($=n$){let F=await this.executeTakeFirst();if(F===void 0)throw UA($)?new $(this.toOperationNode()):$(this.toOperationNode());return F}async*stream($=100){let F=this.compile(),A=this.#$.executor.stream(F,$);for await(let J of A)yield*J.rows}async explain($,F){return await new S0({...this.#$,queryNode:f1.cloneWithExplain(this.#$.queryNode,$,F)}).execute()}}function NU($){return new S0($)}class wI1{#$;#F;constructor($,F){this.#$=$,this.#F=F}get expression(){return this.#$}get alias(){return this.#F}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return _9.create(this.#$.toOperationNode(),Y0.create(this.#F))}}var aL=x(()=>{u$();rr();pL();Z8();iY();X8();pY();f5();ND();lL();aa();A1();HI1();RD();W2();UI1();p7();CU();zA();BI1();BU()});var BA;var Oj=x(()=>{A1();hL();gL();BA=P({is($){return $.kind==="AggregateFunctionNode"},create($,F=[]){return P({kind:"AggregateFunctionNode",func:$,aggregated:F})},cloneWithDistinct($){return P({...$,distinct:!0})},cloneWithOrderBy($,F,A=!1){let J=A?"withinGroup":"orderBy";return P({...$,[J]:$[J]?hJ.cloneWithItems($[J],F):hJ.create(F)})},cloneWithFilter($,F){return P({...$,filter:$.filter?W8.cloneWithOperation($.filter,"And",F):W8.create(F)})},cloneWithOrFilter($,F){return P({...$,filter:$.filter?W8.cloneWithOperation($.filter,"Or",F):W8.create(F)})},cloneWithOver($,F){return P({...$,over:F})}})});var oa;var ea=x(()=>{A1();oa=P({is($){return $.kind==="FunctionNode"},create($,F){return P({kind:"FunctionNode",func:$,arguments:F})}})});class s3{#$;constructor($){this.#$=P($)}get expressionType(){return}as($){return new qI1(this,$)}distinct(){return new s3({...this.#$,aggregateFunctionNode:BA.cloneWithDistinct(this.#$.aggregateFunctionNode)})}orderBy(...$){return new s3({...this.#$,aggregateFunctionNode:f1.cloneWithOrderByItems(this.#$.aggregateFunctionNode,c7($))})}clearOrderBy(){return new s3({...this.#$,aggregateFunctionNode:f1.cloneWithoutOrderBy(this.#$.aggregateFunctionNode)})}withinGroupOrderBy(...$){return new s3({...this.#$,aggregateFunctionNode:BA.cloneWithOrderBy(this.#$.aggregateFunctionNode,c7($),!0)})}filterWhere(...$){return new s3({...this.#$,aggregateFunctionNode:BA.cloneWithFilter(this.#$.aggregateFunctionNode,Z2($))})}filterWhereRef($,F,A){return new s3({...this.#$,aggregateFunctionNode:BA.cloneWithFilter(this.#$.aggregateFunctionNode,k9($,F,A))})}over($){let F=ZI1();return new s3({...this.#$,aggregateFunctionNode:BA.cloneWithOver(this.#$.aggregateFunctionNode,($?$(F):F).toOperationNode())})}$call($){return $(this)}$castTo(){return new s3(this.#$)}$notNull(){return new s3(this.#$)}toOperationNode(){return this.#$.aggregateFunctionNode}}class qI1{#$;#F;constructor($,F){this.#$=$,this.#F=F}get expression(){return this.#$}get alias(){return this.#F}toOperationNode(){return _9.create(this.#$.toOperationNode(),Y0.create(this.#F))}}var $t=x(()=>{A1();Oj();u$();W2();Ej();p7();ND();f5()});function Sj(){let $=(A,J)=>{return new _6(oa.create(A,uJ(J??[])))},F=(A,J)=>{return new s3({aggregateFunctionNode:BA.create(A,J?uJ(J):void 0)})};return Object.assign($,{agg:F,avg(A){return F("avg",[A])},coalesce(...A){return $("coalesce",A)},count(A){return F("count",[A])},countAll(A){return new s3({aggregateFunctionNode:BA.create("count",b9(A))})},max(A){return F("max",[A])},min(A){return F("min",[A])},sum(A){return F("sum",[A])},any(A){return $("any",[A])},jsonAgg(A){return new s3({aggregateFunctionNode:BA.create("json_agg",[O6(A)?K6(A):A.toOperationNode()])})},toJson(A){return new _6(oa.create("to_json",[O6(A)?K6(A):A.toOperationNode()]))}})}var _j=x(()=>{CU();Oj();ea();X8();iY();$t();A1();Z8()});var LI1;var Ft=x(()=>{A1();LI1=P({is($){return $.kind==="UnaryOperationNode"},create($,F){return P({kind:"UnaryOperationNode",operator:$,operand:F})}})});function EI1($,F){return LI1.create(x8.create($),Y8(F))}var VI1=x(()=>{vJ();Ft();X8()});var r7;var tL=x(()=>{A1();PD();r7=P({is($){return $.kind==="CaseNode"},create($){return P({kind:"CaseNode",value:$})},cloneWithWhen($,F){return P({...$,when:P($.when?[...$.when,F]:[F])})},cloneWithThen($,F){return P({...$,when:$.when?P([...$.when.slice(0,-1),v5.cloneWithResult($.when[$.when.length-1],F)]):void 0})},cloneWith($,F){return P({...$,...F})}})});class sL{#$;constructor($){this.#$=P($)}when(...$){return new At({...this.#$,node:r7.cloneWithWhen(this.#$.node,v5.create(Z2($)))})}}class At{#$;constructor($){this.#$=P($)}then($){return new NI1({...this.#$,node:r7.cloneWithThen(this.#$.node,Zj($)?xL($):p6($))})}}class NI1{#$;constructor($){this.#$=P($)}when(...$){return new At({...this.#$,node:r7.cloneWithWhen(this.#$.node,v5.create(Z2($)))})}else($){return new CI1({...this.#$,node:r7.cloneWith(this.#$.node,{else:Zj($)?xL($):p6($)})})}end(){return new _6(r7.cloneWith(this.#$.node,{isStatement:!1}))}endCase(){return new _6(r7.cloneWith(this.#$.node,{isStatement:!0}))}}class CI1{#$;constructor($){this.#$=P($)}end(){return new _6(r7.cloneWith(this.#$.node,{isStatement:!1}))}endCase(){return new _6(r7.cloneWith(this.#$.node,{isStatement:!0}))}}var kj=x(()=>{CU();A1();tL();PD();p7();zA()});var Jt;var Xt=x(()=>{A1();Jt=P({is($){return $.kind==="JSONPathLegNode"},create($,F){return P({kind:"JSONPathLegNode",type:$,value:F})}})});class eL{#$;constructor($){this.#$=$}at($){return this.#F("ArrayLocation",$)}key($){return this.#F("Member",$)}#F($,F){if(WU.is(this.#$))return new oL(WU.cloneWithTraversal(this.#$,dY.is(this.#$.traversal)?dY.cloneWithLeg(this.#$.traversal,Jt.create($,F)):Yj.cloneWithValue(this.#$.traversal,m4.createImmediate(F))));return new oL(dY.cloneWithLeg(this.#$,Jt.create($,F)))}}class MI1{#$;#F;constructor($,F){this.#$=$,this.#F=F}get expression(){return this.#$}get alias(){return this.#F}toOperationNode(){return _9.create(this.#$.toOperationNode(),w2(this.#F)?this.#F.toOperationNode():Y0.create(this.#F))}}var oL;var Yt=x(()=>{u$();W2();Wj();Xt();kL();Xj();n3();i$();oL=class oL extends eL{#$;constructor($){super($);this.#$=$}get expressionType(){return}as($){return new MI1(this,$)}$castTo(){return new oL(this.#$)}$notNull(){return new oL(this.#$)}toOperationNode(){return this.#$}}});var Wt;var Zt=x(()=>{A1();Wt=P({is($){return $.kind==="TupleNode"},create($){return P({kind:"TupleNode",values:P($)})}})});function PI1($){if(VN0.includes($))return!0;if(NN0.some((F)=>F.test($)))return!0;return!1}var VN0,NN0,Dt;var bj=x(()=>{A1();VN0=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],NN0=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],Dt=P({is($){return $.kind==="DataTypeNode"},create($){return P({kind:"DataTypeNode",dataType:$})}})});function s$($){if(w2($))return $.toOperationNode();if(PI1($))return Dt.create($);throw Error(`invalid column data type ${JSON.stringify($)}`)}var $E=x(()=>{bj();n3()});var Gt;var xj=x(()=>{A1();Gt=P({is($){return $.kind==="CastNode"},create($,F){return P({kind:"CastNode",expression:$,dataType:F})}})});function Rj($=tY){function F(X,Y,W){return new _6(Dj(X,Y,W))}function A(X,Y){return new _6(EI1(X,Y))}let J=Object.assign(F,{fn:void 0,eb:void 0,selectFrom(X){return NU({queryId:U0(),executor:$,queryNode:M6.createFrom(a$(X))})},case(X){return new sL({node:r7.create(U3(X)?void 0:Y8(X))})},ref(X,Y){if(U3(Y))return new _6(d7(X));return new eL(kR1(X,Y))},jsonPath(){return new eL(dY.create())},table(X){return new _6(K6(X))},val(X){return new _6(p6(X))},refTuple(...X){return new _6(Wt.create(X.map(Y8)))},tuple(...X){return new _6(Wt.create(X.map(p6)))},lit(X){return new _6(xL(X))},unary:A,not(X){return A("not",X)},exists(X){return A("exists",X)},neg(X){return A("-",X)},between(X,Y,W){return new _6(fJ.create(Y8(X),x8.create("between"),r3.create(p6(Y),p6(W))))},betweenSymmetric(X,Y,W){return new _6(fJ.create(Y8(X),x8.create("between symmetric"),r3.create(p6(Y),p6(W))))},and(X){if(S9(X))return new _6(zU(X,"and"));return new _6(Wa(X,"and"))},or(X){if(S9(X))return new _6(zU(X,"or"));return new _6(Wa(X,"or"))},parens(...X){let Y=Z2(X);if(l7.is(Y))return new _6(Y);else return new _6(l7.create(Y))},cast(X,Y){return new _6(Gt.create(Y8(X),s$(Y)))},withSchema(X){return Rj($.withPluginAtFront(new n7(X)))}});return J.fn=Sj(),J.eb=J,J}function y5($){return Rj()}var nY=x(()=>{aL();pY();Z8();jD();u5();_j();X8();p7();GU();CU();vJ();VI1();zA();VU();kj();tL();A1();Yt();OL();hY();Zt();kL();$E();xj()});function a3($){if(w2($))return $.toOperationNode();else if(S6($))return $(y5()).toOperationNode();throw Error(`invalid expression: ${JSON.stringify($)}`)}function Qj($){if(w2($))return $.toOperationNode();else if(S6($))return $(y5()).toOperationNode();throw Error(`invalid aliased expression: ${JSON.stringify($)}`)}function yJ($){return oT($)||IR1($)||S6($)}var l$=x(()=>{eT();n3();nY();A1()});class zt{#$;get table(){return this.#$}constructor($){this.#$=$}as($){return new RI1(this.#$,$)}}class RI1{#$;#F;get table(){return this.#$}get alias(){return this.#F}constructor($,F){this.#$=$,this.#F=F}toOperationNode(){return _9.create(K6(this.#$),Y0.create(this.#F))}}function II1($){return Y2($)&&w2($)&&O6($.table)&&O6($.alias)}var gj=x(()=>{u$();W2();n3();Z8();A1()});function a$($){if(S9($))return $.map((F)=>OD(F));else return[OD($)]}function OD($){if(O6($))return ra($);else if(II1($))return $.toOperationNode();else return Qj($)}function ra($){if($.includes(" as ")){let[A,J]=$.split(" as ").map(TI1);return _9.create(K6(A),Y0.create(J))}else return K6($)}function K6($){if($.includes(".")){let[A,J]=$.split(".").map(TI1);return i3.createWithSchema(A,J)}else return i3.create($)}function TI1($){return $.trim()}var Z8=x(()=>{A1();u$();FU();l$();W2();gj()});var Ht;var Ut=x(()=>{A1();Ht=P({is($){return $.kind==="AddColumnNode"},create($){return P({kind:"AddColumnNode",column:$})}})});var L2;var FE=x(()=>{A1();g8();L2=P({is($){return $.kind==="ColumnDefinitionNode"},create($,F){return P({kind:"ColumnDefinitionNode",column:Y6.create($),dataType:F})},cloneWithFrontModifier($,F){return P({...$,frontModifiers:$.frontModifiers?P([...$.frontModifiers,F]):[F]})},cloneWithEndModifier($,F){return P({...$,endModifiers:$.endModifiers?P([...$.endModifiers,F]):[F]})},cloneWith($,F){return P({...$,...F})}})});var Qt;var Kt=x(()=>{A1();g8();Qt=P({is($){return $.kind==="DropColumnNode"},create($){return P({kind:"DropColumnNode",column:Y6.create($)})}})});var Bt;var wt=x(()=>{A1();g8();Bt=P({is($){return $.kind==="RenameColumnNode"},create($,F){return P({kind:"RenameColumnNode",column:Y6.create($),renameTo:Y6.create(F)})}})});var MU;var AE=x(()=>{A1();W2();MU=P({is($){return $.kind==="CheckConstraintNode"},create($,F){return P({kind:"CheckConstraintNode",expression:$,name:F?Y0.create(F):void 0})}})});var jI1,PU;var JE=x(()=>{A1();jI1=["no action","restrict","cascade","set null","set default"],PU=P({is($){return $.kind==="ReferencesNode"},create($,F){return P({kind:"ReferencesNode",table:$,columns:P([...F])})},cloneWithOnDelete($,F){return P({...$,onDelete:F})},cloneWithOnUpdate($,F){return P({...$,onUpdate:F})}})});function fj($){return w2($)?$.toOperationNode():m4.createImmediate($)}var qt=x(()=>{n3();i$()});var XE;var Lt=x(()=>{A1();XE=P({is($){return $.kind==="GeneratedNode"},create($){return P({kind:"GeneratedNode",...$})},createWithExpression($){return P({kind:"GeneratedNode",always:!0,expression:$})},cloneWith($,F){return P({...$,...F})}})});var OI1;var Et=x(()=>{A1();OI1=P({is($){return $.kind==="DefaultValueNode"},create($){return P({kind:"DefaultValueNode",defaultValue:$})}})});function RU($){if(jI1.includes($))return $;throw Error(`invalid OnModifyForeignAction ${$}`)}var Vt=x(()=>{JE()});class E2{#$;constructor($){this.#$=$}autoIncrement(){return new E2(L2.cloneWith(this.#$,{autoIncrement:!0}))}identity(){return new E2(L2.cloneWith(this.#$,{identity:!0}))}primaryKey(){return new E2(L2.cloneWith(this.#$,{primaryKey:!0}))}references($){let F=d7($);if(!F.table||JU.is(F.column))throw Error(`invalid call references('${$}'). The reference must have format table.column or schema.table.column`);return new E2(L2.cloneWith(this.#$,{references:PU.create(F.table,[F.column])}))}onDelete($){if(!this.#$.references)throw Error("on delete constraint can only be added for foreign keys");return new E2(L2.cloneWith(this.#$,{references:PU.cloneWithOnDelete(this.#$.references,RU($))}))}onUpdate($){if(!this.#$.references)throw Error("on update constraint can only be added for foreign keys");return new E2(L2.cloneWith(this.#$,{references:PU.cloneWithOnUpdate(this.#$.references,RU($))}))}unique(){return new E2(L2.cloneWith(this.#$,{unique:!0}))}notNull(){return new E2(L2.cloneWith(this.#$,{notNull:!0}))}unsigned(){return new E2(L2.cloneWith(this.#$,{unsigned:!0}))}defaultTo($){return new E2(L2.cloneWith(this.#$,{defaultTo:OI1.create(fj($))}))}check($){return new E2(L2.cloneWith(this.#$,{check:MU.create($.toOperationNode())}))}generatedAlwaysAs($){return new E2(L2.cloneWith(this.#$,{generated:XE.createWithExpression($.toOperationNode())}))}generatedAlwaysAsIdentity(){return new E2(L2.cloneWith(this.#$,{generated:XE.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new E2(L2.cloneWith(this.#$,{generated:XE.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#$.generated)throw Error("stored() can only be called after generatedAlwaysAs");return new E2(L2.cloneWith(this.#$,{generated:XE.cloneWith(this.#$.generated,{stored:!0})}))}modifyFront($){return new E2(L2.cloneWithFrontModifier(this.#$,$.toOperationNode()))}nullsNotDistinct(){return new E2(L2.cloneWith(this.#$,{nullsNotDistinct:!0}))}ifNotExists(){return new E2(L2.cloneWith(this.#$,{ifNotExists:!0}))}modifyEnd($){return new E2(L2.cloneWithEndModifier(this.#$,$.toOperationNode()))}$call($){return $(this)}toOperationNode(){return this.#$}}var vj=x(()=>{AE();JE();SL();X8();FE();qt();Lt();Et();Vt()});var Nt;var Ct=x(()=>{A1();Nt=P({is($){return $.kind==="ModifyColumnNode"},create($){return P({kind:"ModifyColumnNode",column:$})}})});var o$;var YE=x(()=>{A1();W2();JE();o$=P({is($){return $.kind==="ForeignKeyConstraintNode"},create($,F,A,J){return P({kind:"ForeignKeyConstraintNode",columns:$,references:PU.create(F,A),name:J?Y0.create(J):void 0})},cloneWith($,F){return P({...$,...F})}})});class e${#$;constructor($){this.#$=$}onDelete($){return new e$(o$.cloneWith(this.#$,{onDelete:RU($)}))}onUpdate($){return new e$(o$.cloneWith(this.#$,{onUpdate:RU($)}))}deferrable(){return new e$(o$.cloneWith(this.#$,{deferrable:!0}))}notDeferrable(){return new e$(o$.cloneWith(this.#$,{deferrable:!1}))}initiallyDeferred(){return new e$(o$.cloneWith(this.#$,{initiallyDeferred:!0}))}initiallyImmediate(){return new e$(o$.cloneWith(this.#$,{initiallyDeferred:!1}))}$call($){return $(this)}toOperationNode(){return this.#$}}var yj=x(()=>{YE();Vt()});var IU;var uj=x(()=>{A1();IU=P({is($){return $.kind==="AddConstraintNode"},create($){return P({kind:"AddConstraintNode",constraint:$})}})});var wA;var WE=x(()=>{A1();g8();W2();wA=P({is($){return $.kind==="UniqueConstraintNode"},create($,F,A){return P({kind:"UniqueConstraintNode",columns:P($.map(Y6.create)),name:F?Y0.create(F):void 0,nullsNotDistinct:A})},cloneWith($,F){return P({...$,...F})}})});var TU;var hj=x(()=>{A1();W2();TU=P({is($){return $.kind==="DropConstraintNode"},create($){return P({kind:"DropConstraintNode",constraintName:Y0.create($)})},cloneWith($,F){return P({...$,...F})}})});var jU;var Mt=x(()=>{A1();g8();jU=P({is($){return $.kind==="AlterColumnNode"},create($,F,A){return P({kind:"AlterColumnNode",column:Y6.create($),[F]:A})}})});class mj{#$;constructor($){this.#$=$}setDataType($){return new OU(jU.create(this.#$,"dataType",s$($)))}setDefault($){return new OU(jU.create(this.#$,"setDefault",fj($)))}dropDefault(){return new OU(jU.create(this.#$,"dropDefault",!0))}setNotNull(){return new OU(jU.create(this.#$,"setNotNull",!0))}dropNotNull(){return new OU(jU.create(this.#$,"dropNotNull",!0))}$call($){return $(this)}}class OU{#$;constructor($){this.#$=$}toOperationNode(){return this.#$}}var Pt=x(()=>{Mt();$E();qt()});class sY{#$;constructor($){this.#$=P($)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var SI1=x(()=>{A1()});class dJ{#$;constructor($){this.#$=P($)}onDelete($){return new dJ({...this.#$,constraintBuilder:this.#$.constraintBuilder.onDelete($)})}onUpdate($){return new dJ({...this.#$,constraintBuilder:this.#$.constraintBuilder.onUpdate($)})}deferrable(){return new dJ({...this.#$,constraintBuilder:this.#$.constraintBuilder.deferrable()})}notDeferrable(){return new dJ({...this.#$,constraintBuilder:this.#$.constraintBuilder.notDeferrable()})}initiallyDeferred(){return new dJ({...this.#$,constraintBuilder:this.#$.constraintBuilder.initiallyDeferred()})}initiallyImmediate(){return new dJ({...this.#$,constraintBuilder:this.#$.constraintBuilder.initiallyImmediate()})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(U6.cloneWithTableProps(this.#$.node,{addConstraint:IU.create(this.#$.constraintBuilder.toOperationNode())}),this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var _I1=x(()=>{uj();ED();A1()});class _D{#$;constructor($){this.#$=P($)}ifExists(){return new _D({...this.#$,node:U6.cloneWithTableProps(this.#$.node,{dropConstraint:TU.cloneWith(this.#$.node.dropConstraint,{ifExists:!0})})})}cascade(){return new _D({...this.#$,node:U6.cloneWithTableProps(this.#$.node,{dropConstraint:TU.cloneWith(this.#$.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new _D({...this.#$,node:U6.cloneWithTableProps(this.#$.node,{dropConstraint:TU.cloneWith(this.#$.node.dropConstraint,{modifier:"restrict"})})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var kI1=x(()=>{ED();hj();A1()});var cJ;var ZE=x(()=>{A1();g8();W2();cJ=P({is($){return $.kind==="PrimaryKeyConstraintNode"},create($,F){return P({kind:"PrimaryKeyConstraintNode",columns:P($.map(Y6.create)),name:F?Y0.create(F):void 0})},cloneWith($,F){return P({...$,...F})}})});var oY;var dj=x(()=>{A1();W2();oY=P({is($){return $.kind==="AddIndexNode"},create($){return P({kind:"AddIndexNode",name:Y0.create($)})},cloneWith($,F){return P({...$,...F})},cloneWithColumns($,F){return P({...$,columns:[...$.columns||[],...F]})}})});class eY{#$;constructor($){this.#$=P($)}unique(){return new eY({...this.#$,node:U6.cloneWithTableProps(this.#$.node,{addIndex:oY.cloneWith(this.#$.node.addIndex,{unique:!0})})})}column($){return new eY({...this.#$,node:U6.cloneWithTableProps(this.#$.node,{addIndex:oY.cloneWithColumns(this.#$.node.addIndex,[ZU($)])})})}columns($){return new eY({...this.#$,node:U6.cloneWithTableProps(this.#$.node,{addIndex:oY.cloneWithColumns(this.#$.node.addIndex,$.map(ZU))})})}expression($){return new eY({...this.#$,node:U6.cloneWithTableProps(this.#$.node,{addIndex:oY.cloneWithColumns(this.#$.node.addIndex,[$.toOperationNode()])})})}using($){return new eY({...this.#$,node:U6.cloneWithTableProps(this.#$.node,{addIndex:oY.cloneWith(this.#$.node.addIndex,{using:Q6.createWithSql($)})})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var bI1=x(()=>{dj();ED();g5();X8();A1()});class qA{#$;constructor($){this.#$=$}nullsNotDistinct(){return new qA(wA.cloneWith(this.#$,{nullsNotDistinct:!0}))}deferrable(){return new qA(wA.cloneWith(this.#$,{deferrable:!0}))}notDeferrable(){return new qA(wA.cloneWith(this.#$,{deferrable:!1}))}initiallyDeferred(){return new qA(wA.cloneWith(this.#$,{initiallyDeferred:!0}))}initiallyImmediate(){return new qA(wA.cloneWith(this.#$,{initiallyDeferred:!1}))}$call($){return $(this)}toOperationNode(){return this.#$}}var Rt=x(()=>{WE()});class lJ{#$;constructor($){this.#$=$}deferrable(){return new lJ(cJ.cloneWith(this.#$,{deferrable:!0}))}notDeferrable(){return new lJ(cJ.cloneWith(this.#$,{deferrable:!1}))}initiallyDeferred(){return new lJ(cJ.cloneWith(this.#$,{initiallyDeferred:!0}))}initiallyImmediate(){return new lJ(cJ.cloneWith(this.#$,{initiallyDeferred:!1}))}$call($){return $(this)}toOperationNode(){return this.#$}}var It=x(()=>{ZE()});class DE{#$;constructor($){this.#$=$}$call($){return $(this)}toOperationNode(){return this.#$}}var xI1;var Tt=x(()=>{A1();W2();xI1=P({is($){return $.kind==="RenameConstraintNode"},create($,F){return P({kind:"RenameConstraintNode",oldName:Y0.create($),newName:Y0.create(F)})}})});class jt{#$;constructor($){this.#$=P($)}renameTo($){return new sY({...this.#$,node:U6.cloneWithTableProps(this.#$.node,{renameTo:K6($)})})}setSchema($){return new sY({...this.#$,node:U6.cloneWithTableProps(this.#$.node,{setSchema:Y0.create($)})})}alterColumn($,F){let A=F(new mj($));return new $F({...this.#$,node:U6.cloneWithColumnAlteration(this.#$.node,A.toOperationNode())})}dropColumn($){return new $F({...this.#$,node:U6.cloneWithColumnAlteration(this.#$.node,Qt.create($))})}renameColumn($,F){return new $F({...this.#$,node:U6.cloneWithColumnAlteration(this.#$.node,Bt.create($,F))})}addColumn($,F,A=Q3){let J=A(new E2(L2.create($,s$(F))));return new $F({...this.#$,node:U6.cloneWithColumnAlteration(this.#$.node,Ht.create(J.toOperationNode()))})}modifyColumn($,F,A=Q3){let J=A(new E2(L2.create($,s$(F))));return new $F({...this.#$,node:U6.cloneWithColumnAlteration(this.#$.node,Nt.create(J.toOperationNode()))})}addUniqueConstraint($,F,A=Q3){let J=A(new qA(wA.create(F,$)));return new sY({...this.#$,node:U6.cloneWithTableProps(this.#$.node,{addConstraint:IU.create(J.toOperationNode())})})}addCheckConstraint($,F,A=Q3){let J=A(new DE(MU.create(F.toOperationNode(),$)));return new sY({...this.#$,node:U6.cloneWithTableProps(this.#$.node,{addConstraint:IU.create(J.toOperationNode())})})}addForeignKeyConstraint($,F,A,J,X=Q3){let Y=X(new e$(o$.create(F.map(Y6.create),K6(A),J.map(Y6.create),$)));return new dJ({...this.#$,constraintBuilder:Y})}addPrimaryKeyConstraint($,F,A=Q3){let J=A(new lJ(cJ.create(F,$)));return new sY({...this.#$,node:U6.cloneWithTableProps(this.#$.node,{addConstraint:IU.create(J.toOperationNode())})})}dropConstraint($){return new _D({...this.#$,node:U6.cloneWithTableProps(this.#$.node,{dropConstraint:TU.create($)})})}renameConstraint($,F){return new _D({...this.#$,node:U6.cloneWithTableProps(this.#$.node,{renameConstraint:xI1.create($,F)})})}addIndex($){return new eY({...this.#$,node:U6.cloneWithTableProps(this.#$.node,{addIndex:oY.create($)})})}dropIndex($){return new sY({...this.#$,node:U6.cloneWithTableProps(this.#$.node,{dropIndex:uY.create($)})})}$call($){return $(this)}}class $F{#$;constructor($){this.#$=P($)}alterColumn($,F){let A=F(new mj($));return new $F({...this.#$,node:U6.cloneWithColumnAlteration(this.#$.node,A.toOperationNode())})}dropColumn($){return new $F({...this.#$,node:U6.cloneWithColumnAlteration(this.#$.node,Qt.create($))})}renameColumn($,F){return new $F({...this.#$,node:U6.cloneWithColumnAlteration(this.#$.node,Bt.create($,F))})}addColumn($,F,A=Q3){let J=A(new E2(L2.create($,s$(F))));return new $F({...this.#$,node:U6.cloneWithColumnAlteration(this.#$.node,Ht.create(J.toOperationNode()))})}modifyColumn($,F,A=Q3){let J=A(new E2(L2.create($,s$(F))));return new $F({...this.#$,node:U6.cloneWithColumnAlteration(this.#$.node,Nt.create(J.toOperationNode()))})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var Ot=x(()=>{Ut();ED();FE();Kt();W2();wt();A1();vj();Ct();$E();yj();uj();WE();AE();YE();g8();Z8();hj();Pt();SI1();_I1();kI1();ZE();IL();dj();bI1();Rt();It();Tt()});var GE;var St=x(()=>{TD();cY();i$();GE=class GE extends t${transformPrimitiveValueList($){return p$.create($.values.map(m4.createImmediate))}transformValue($){return m4.createImmediate($.value)}}});class h5{#$;constructor($){this.#$=P($)}ifNotExists(){return new h5({...this.#$,node:y$.cloneWith(this.#$.node,{ifNotExists:!0})})}unique(){return new h5({...this.#$,node:y$.cloneWith(this.#$.node,{unique:!0})})}nullsNotDistinct(){return new h5({...this.#$,node:y$.cloneWith(this.#$.node,{nullsNotDistinct:!0})})}on($){return new h5({...this.#$,node:y$.cloneWith(this.#$.node,{table:K6($)})})}column($){return new h5({...this.#$,node:y$.cloneWithColumns(this.#$.node,[ZU($)])})}columns($){return new h5({...this.#$,node:y$.cloneWithColumns(this.#$.node,$.map(ZU))})}expression($){return new h5({...this.#$,node:y$.cloneWithColumns(this.#$.node,[$.toOperationNode()])})}using($){return new h5({...this.#$,node:y$.cloneWith(this.#$.node,{using:Q6.createWithSql($)})})}where(...$){let F=new GE;return new h5({...this.#$,node:f1.cloneWithWhere(this.#$.node,F.transformNode(Z2($),this.#$.queryId))})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var _t=x(()=>{nT();g5();X8();Z8();A1();p7();f5();St()});class cj{#$;constructor($){this.#$=P($)}ifNotExists(){return new cj({...this.#$,node:rT.cloneWith(this.#$.node,{ifNotExists:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var kt=x(()=>{aT();A1()});function gI1($){if(RR1.includes($))return $;throw Error(`invalid OnCommitAction ${$}`)}var fI1=x(()=>{$U()});class o3{#$;constructor($){this.#$=P($)}temporary(){return new o3({...this.#$,node:k8.cloneWith(this.#$.node,{temporary:!0})})}onCommit($){return new o3({...this.#$,node:k8.cloneWith(this.#$.node,{onCommit:gI1($)})})}ifNotExists(){return new o3({...this.#$,node:k8.cloneWith(this.#$.node,{ifNotExists:!0})})}addColumn($,F,A=Q3){let J=A(new E2(L2.create($,s$(F))));return new o3({...this.#$,node:k8.cloneWithColumn(this.#$.node,J.toOperationNode())})}addPrimaryKeyConstraint($,F,A=Q3){let J=A(new lJ(cJ.create(F,$)));return new o3({...this.#$,node:k8.cloneWithConstraint(this.#$.node,J.toOperationNode())})}addUniqueConstraint($,F,A=Q3){let J=A(new qA(wA.create(F,$)));return new o3({...this.#$,node:k8.cloneWithConstraint(this.#$.node,J.toOperationNode())})}addCheckConstraint($,F,A=Q3){let J=A(new DE(MU.create(F.toOperationNode(),$)));return new o3({...this.#$,node:k8.cloneWithConstraint(this.#$.node,J.toOperationNode())})}addForeignKeyConstraint($,F,A,J,X=Q3){let Y=X(new e$(o$.create(F.map(Y6.create),K6(A),J.map(Y6.create),$)));return new o3({...this.#$,node:k8.cloneWithConstraint(this.#$.node,Y.toOperationNode())})}modifyFront($){return new o3({...this.#$,node:k8.cloneWithFrontModifier(this.#$.node,$.toOperationNode())})}modifyEnd($){return new o3({...this.#$,node:k8.cloneWithEndModifier(this.#$.node,$.toOperationNode())})}as($){return new o3({...this.#$,node:k8.cloneWith(this.#$.node,{selectQuery:a3($)})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var bt=x(()=>{FE();$U();vj();A1();YE();g8();yj();$E();ZE();WE();AE();Z8();fI1();Rt();l$();It()});class SU{#$;constructor($){this.#$=P($)}on($){return new SU({...this.#$,node:uY.cloneWith(this.#$.node,{table:K6($)})})}ifExists(){return new SU({...this.#$,node:uY.cloneWith(this.#$.node,{ifExists:!0})})}cascade(){return new SU({...this.#$,node:uY.cloneWith(this.#$.node,{cascade:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var xt=x(()=>{IL();Z8();A1()});class zE{#$;constructor($){this.#$=P($)}ifExists(){return new zE({...this.#$,node:TL.cloneWith(this.#$.node,{ifExists:!0})})}cascade(){return new zE({...this.#$,node:TL.cloneWith(this.#$.node,{cascade:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var gt=x(()=>{tT();A1()});class HE{#$;constructor($){this.#$=P($)}ifExists(){return new HE({...this.#$,node:jL.cloneWith(this.#$.node,{ifExists:!0})})}cascade(){return new HE({...this.#$,node:jL.cloneWith(this.#$.node,{cascade:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var ft=x(()=>{sT();A1()});var FF;var UE=x(()=>{A1();gJ();FF=P({is($){return $.kind==="CreateViewNode"},create($){return P({kind:"CreateViewNode",name:b8.create($)})},cloneWith($,F){return P({...$,...F})}})});class vt{#$=new GE;transformQuery($){return this.#$.transformNode($.node,$.queryId)}transformResult($){return Promise.resolve($.result)}}var vI1=x(()=>{St()});class pJ{#$;constructor($){this.#$=P($)}temporary(){return new pJ({...this.#$,node:FF.cloneWith(this.#$.node,{temporary:!0})})}materialized(){return new pJ({...this.#$,node:FF.cloneWith(this.#$.node,{materialized:!0})})}ifNotExists(){return new pJ({...this.#$,node:FF.cloneWith(this.#$.node,{ifNotExists:!0})})}orReplace(){return new pJ({...this.#$,node:FF.cloneWith(this.#$.node,{orReplace:!0})})}columns($){return new pJ({...this.#$,node:FF.cloneWith(this.#$.node,{columns:$.map(Ja)})})}as($){let F=$.withPlugin(new vt).toOperationNode();return new pJ({...this.#$,node:FF.cloneWith(this.#$.node,{as:F})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var yt=x(()=>{A1();UE();X8();vI1()});var _U;var lj=x(()=>{A1();gJ();_U=P({is($){return $.kind==="DropViewNode"},create($){return P({kind:"DropViewNode",name:b8.create($)})},cloneWith($,F){return P({...$,...F})}})});class kU{#$;constructor($){this.#$=P($)}materialized(){return new kU({...this.#$,node:_U.cloneWith(this.#$.node,{materialized:!0})})}ifExists(){return new kU({...this.#$,node:_U.cloneWith(this.#$.node,{ifExists:!0})})}cascade(){return new kU({...this.#$,node:_U.cloneWith(this.#$.node,{cascade:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var ut=x(()=>{A1();lj()});var pj;var ij=x(()=>{A1();cY();i$();pj=P({is($){return $.kind==="CreateTypeNode"},create($){return P({kind:"CreateTypeNode",name:$})},cloneWithEnum($,F){return P({...$,enum:p$.create(F.map(m4.createImmediate))})}})});class nj{#$;constructor($){this.#$=P($)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}asEnum($){return new nj({...this.#$,node:pj.cloneWithEnum(this.#$.node,$)})}$call($){return $(this)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var ht=x(()=>{A1();ij()});var rj;var aj=x(()=>{A1();rj=P({is($){return $.kind==="DropTypeNode"},create($){return P({kind:"DropTypeNode",name:$})},cloneWith($,F){return P({...$,...F})}})});class tj{#$;constructor($){this.#$=P($)}ifExists(){return new tj({...this.#$,node:rj.cloneWith(this.#$.node,{ifExists:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var mt=x(()=>{aj();A1()});function dt($){if($.includes(".")){let A=$.split(".").map(CN0);if(A.length===2)return b8.createWithSchema(A[0],A[1]);else throw Error(`invalid schemable identifier ${$}`)}else return b8.create($)}function CN0($){return $.trim()}var yI1=x(()=>{gJ()});var bU;var sj=x(()=>{A1();gJ();bU=P({is($){return $.kind==="RefreshMaterializedViewNode"},create($){return P({kind:"RefreshMaterializedViewNode",name:b8.create($)})},cloneWith($,F){return P({...$,...F})}})});class xU{#$;constructor($){this.#$=P($)}concurrently(){return new xU({...this.#$,node:bU.cloneWith(this.#$.node,{concurrently:!0,withNoData:!1})})}withData(){return new xU({...this.#$,node:bU.cloneWith(this.#$.node,{withNoData:!1})})}withNoData(){return new xU({...this.#$,node:bU.cloneWith(this.#$.node,{withNoData:!0,concurrently:!1})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var ct=x(()=>{A1();sj()});class gU{#$;constructor($){this.#$=$}createTable($){return new o3({queryId:U0(),executor:this.#$,node:k8.create(K6($))})}dropTable($){return new HE({queryId:U0(),executor:this.#$,node:jL.create(K6($))})}createIndex($){return new h5({queryId:U0(),executor:this.#$,node:y$.create($)})}dropIndex($){return new SU({queryId:U0(),executor:this.#$,node:uY.create($)})}createSchema($){return new cj({queryId:U0(),executor:this.#$,node:rT.create($)})}dropSchema($){return new zE({queryId:U0(),executor:this.#$,node:TL.create($)})}alterTable($){return new jt({queryId:U0(),executor:this.#$,node:U6.create(K6($))})}createView($){return new pJ({queryId:U0(),executor:this.#$,node:FF.create($)})}refreshMaterializedView($){return new xU({queryId:U0(),executor:this.#$,node:bU.create($)})}dropView($){return new kU({queryId:U0(),executor:this.#$,node:_U.create($)})}createType($){return new nj({queryId:U0(),executor:this.#$,node:pj.create(dt($))})}dropType($){return new tj({queryId:U0(),executor:this.#$,node:rj.create(dt($))})}withPlugin($){return new gU(this.#$.withPlugin($))}withoutPlugins(){return new gU(this.#$.withoutPlugins())}withSchema($){return new gU(this.#$.withPluginAtFront(new n7($)))}}var lt=x(()=>{ED();nT();aT();$U();IL();tT();sT();Z8();Ot();_t();kt();bt();xt();gt();ft();u5();jD();yt();UE();ut();lj();ht();mt();ij();aj();yI1();ct();sj()});class pt{ref($){return new sr($)}table($){return new zt($)}}var it=x(()=>{_L();gj()});class nt{#$;constructor($){this.#$=$}async provideConnection($){let F=await this.#$.acquireConnection();try{return await $(F)}finally{await this.#$.releaseConnection(F)}}}var $W;var rt=x(()=>{la();$W=class $W extends rL{#$;#F;#A;constructor($,F,A,J=[]){super(J);this.#$=$,this.#F=F,this.#A=A}get adapter(){return this.#F}compileQuery($,F){return this.#$.compileQuery($,F)}provideConnection($){return this.#A.provideConnection($)}withPlugins($){return new $W(this.#$,this.#F,this.#A,[...this.plugins,...$])}withPlugin($){return new $W(this.#$,this.#F,this.#A,[...this.plugins,$])}withPluginAtFront($){return new $W(this.#$,this.#F,this.#A,[$,...this.plugins])}withConnectionProvider($){return new $W(this.#$,this.#F,$,[...this.plugins])}withoutPlugins(){return new $W(this.#$,this.#F,this.#A,[])}}});function oj(){if(typeof performance<"u"&&S6(performance.now))return performance.now();else return Date.now()}var uI1=x(()=>{A1()});class at{#$;#F;#A;#J;#X;#Z=new WeakSet;constructor($,F){this.#J=!1,this.#$=$,this.#F=F}async init(){if(this.#X)throw Error("driver has already been destroyed");if(!this.#A)this.#A=this.#$.init().then(()=>{this.#J=!0}).catch(($)=>{return this.#A=void 0,Promise.reject($)});await this.#A}async acquireConnection(){if(this.#X)throw Error("driver has already been destroyed");if(!this.#J)await this.init();let $=await this.#$.acquireConnection();if(!this.#Z.has($)){if(this.#W())this.#Y($);this.#Z.add($)}return $}async releaseConnection($){await this.#$.releaseConnection($)}beginTransaction($,F){return this.#$.beginTransaction($,F)}commitTransaction($){return this.#$.commitTransaction($)}rollbackTransaction($){return this.#$.rollbackTransaction($)}savepoint($,F,A){if(this.#$.savepoint)return this.#$.savepoint($,F,A);throw Error("The `savepoint` method is not supported by this driver")}rollbackToSavepoint($,F,A){if(this.#$.rollbackToSavepoint)return this.#$.rollbackToSavepoint($,F,A);throw Error("The `rollbackToSavepoint` method is not supported by this driver")}releaseSavepoint($,F,A){if(this.#$.releaseSavepoint)return this.#$.releaseSavepoint($,F,A);throw Error("The `releaseSavepoint` method is not supported by this driver")}async destroy(){if(!this.#A)return;if(await this.#A,!this.#X)this.#X=this.#$.destroy().catch(($)=>{return this.#X=void 0,Promise.reject($)});await this.#X}#W(){return this.#F.isLevelEnabled("query")||this.#F.isLevelEnabled("error")}#Y($){let{executeQuery:F,streamQuery:A}=$,J=this;$.executeQuery=async(X)=>{let Y,W=oj();try{return await F.call($,X)}catch(Z){throw Y=Z,await J.#D(Z,X,W),Z}finally{if(!Y)await J.#G(X,W)}},$.streamQuery=async function*(X,Y){let W,Z=oj();try{for await(let D of A.call($,X,Y))yield D}catch(D){throw W=D,await J.#D(D,X,Z),D}finally{if(!W)await J.#G(X,Z,!0)}}}async#D($,F,A){await this.#F.error(()=>({level:"error",error:$,query:F,queryDurationMillis:this.#H(A)}))}async#G($,F,A=!1){await this.#F.query(()=>({level:"query",isStream:A,query:$,queryDurationMillis:this.#H(F)}))}#H($){return oj()-$}}var hI1=x(()=>{uI1()});class QE{#$;#F;constructor($){this.#$=$}async provideConnection($){while(this.#F)await this.#F.catch(MN0);return this.#F=this.#A($).finally(()=>{this.#F=void 0}),this.#F}async#A($){return await $(this.#$)}}var MN0=()=>{};function tt($){if($.accessMode&&!PN0.includes($.accessMode))throw Error(`invalid transaction access mode ${$.accessMode}`);if($.isolationLevel&&!RN0.includes($.isolationLevel))throw Error(`invalid transaction isolation level ${$.isolationLevel}`)}var PN0,RN0;var st=x(()=>{PN0=["read only","read write"],RN0=["read uncommitted","read committed","repeatable read","serializable","snapshot"]});class ot{#$;#F;constructor($){if(S6($))this.#F=$,this.#$=P({query:!0,error:!0});else this.#F=TN0,this.#$=P({query:$.includes("query"),error:$.includes("error")})}isLevelEnabled($){return this.#$[$]}async query($){if(this.#$.query)await this.#F($())}async error($){if(this.#$.error)await this.#F($())}}function TN0($){if($.level==="query"){let F=`kysely:query:${$.isStream?"stream:":""}`;console.log(`${F} ${$.query.sql}`),console.log(`${F} duration: ${$.queryDurationMillis.toFixed(1)}ms`)}else if($.level==="error")if($.error instanceof Error)console.error(`kysely:error: ${$.error.stack??$.error.message}`);else console.error(`kysely:error: ${JSON.stringify({error:$.error,query:$.query.sql,queryDurationMillis:$.queryDurationMillis})}`)}var IN0,PV6;var et=x(()=>{A1();IN0=["query","error"],PV6=P(IN0)});function mI1($){return Y2($)&&S6($.compile)}var $s=x(()=>{A1()});function jN0($){return Y2($)&&Y2($.config)&&Y2($.driver)&&Y2($.executor)&&Y2($.dialect)}class dI1{#$;constructor($){this.#$=P($)}async execute($){return this.#$.executor.provideConnection(async(F)=>{let A=this.#$.executor.withConnectionProvider(new QE(F)),J=new LA({...this.#$,executor:A});return await $(J)})}}class ej{#$;constructor($){this.#$=P($)}setAccessMode($){return new ej({...this.#$,accessMode:$})}setIsolationLevel($){return new ej({...this.#$,isolationLevel:$})}async execute($){let{isolationLevel:F,accessMode:A,...J}=this.#$,X={isolationLevel:F,accessMode:A};return tt(X),this.#$.executor.provideConnection(async(Y)=>{let W=this.#$.executor.withConnectionProvider(new QE(Y)),Z=new bD({...J,executor:W}),D=!1;try{await this.#$.driver.beginTransaction(Y,X),D=!0;let G=await $(Z);return await this.#$.driver.commitTransaction(Y),G}catch(G){if(D)await this.#$.driver.rollbackTransaction(Y);throw G}})}}class $O{#$;constructor($){this.#$=P($)}setAccessMode($){return new $O({...this.#$,accessMode:$})}setIsolationLevel($){return new $O({...this.#$,isolationLevel:$})}async execute(){let{isolationLevel:$,accessMode:F,...A}=this.#$,J={isolationLevel:$,accessMode:F};tt(J);let X=await Nj(this.#$.executor);return await this.#$.driver.beginTransaction(X.connection,J),new iJ({...A,connection:X,executor:this.#$.executor.withConnectionProvider(new QE(X.connection))})}}class fU{#$;constructor($){this.#$=$}async execute(){return await this.#$()}}function kD($){if($.isCommitted)throw Error("Transaction is already committed");if($.isRolledBack)throw Error("Transaction is already rolled back")}class FW{#$;#F;constructor($,F){if($ instanceof FW)this.#$=$.#$;else this.#$=$;this.#F=F}get adapter(){return this.#$.adapter}get plugins(){return this.#$.plugins}transformQuery($,F){return this.#$.transformQuery($,F)}compileQuery($,F){return this.#$.compileQuery($,F)}provideConnection($){return this.#$.provideConnection($)}executeQuery($){return kD(this.#F),this.#$.executeQuery($)}stream($,F){return kD(this.#F),this.#$.stream($,F)}withConnectionProvider($){return new FW(this.#$.withConnectionProvider($),this.#F)}withPlugin($){return new FW(this.#$.withPlugin($),this.#F)}withPlugins($){return new FW(this.#$.withPlugins($),this.#F)}withPluginAtFront($){return new FW(this.#$.withPluginAtFront($),this.#F)}withoutPlugins(){return new FW(this.#$.withoutPlugins(),this.#F)}}var LA,bD,iJ;var cI1=x(()=>{lt();it();Cj();rt();A1();hI1();st();_j();et();u5();$s();kj();tL();l$();jD();ca();YU();Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");LA=class LA extends KA{#$;constructor($){let F,A;if(jN0($))F={executor:$.executor},A={...$};else{let J=$.dialect,X=J.createDriver(),Y=J.createQueryCompiler(),W=J.createAdapter(),Z=new ot($.log??[]),D=new at(X,Z),G=new nt(D),z=new $W(Y,W,G,$.plugins??[]);F={executor:z},A={config:$,executor:z,dialect:J,driver:D}}super(F);this.#$=P(A)}get schema(){return new gU(this.#$.executor)}get dynamic(){return new pt}get introspection(){return this.#$.dialect.createIntrospector(this.withoutPlugins())}case($){return new sL({node:r7.create(U3($)?void 0:a3($))})}get fn(){return Sj()}transaction(){return new ej({...this.#$})}startTransaction(){return new $O({...this.#$})}connection(){return new dI1({...this.#$})}withPlugin($){return new LA({...this.#$,executor:this.#$.executor.withPlugin($)})}withoutPlugins(){return new LA({...this.#$,executor:this.#$.executor.withoutPlugins()})}withSchema($){return new LA({...this.#$,executor:this.#$.executor.withPluginAtFront(new n7($))})}withTables(){return new LA({...this.#$})}async destroy(){await this.#$.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#$.executor}executeQuery($,F){if(F!==void 0)c$("Passing `queryId` in `db.executeQuery` is deprecated and will result in a compile-time error in the future.");let A=mI1($)?$.compile():$;return this.getExecutor().executeQuery(A)}async[Symbol.asyncDispose](){await this.destroy()}};bD=class bD extends LA{#$;constructor($){super($);this.#$=$}get isTransaction(){return!0}transaction(){throw Error("calling the transaction method for a Transaction is not supported")}connection(){throw Error("calling the connection method for a Transaction is not supported")}async destroy(){throw Error("calling the destroy method for a Transaction is not supported")}withPlugin($){return new bD({...this.#$,executor:this.#$.executor.withPlugin($)})}withoutPlugins(){return new bD({...this.#$,executor:this.#$.executor.withoutPlugins()})}withSchema($){return new bD({...this.#$,executor:this.#$.executor.withPluginAtFront(new n7($))})}withTables(){return new bD({...this.#$})}};iJ=class iJ extends bD{#$;#F;#A;constructor($){let F={isCommitted:!1,isRolledBack:!1};$={...$,executor:new FW($.executor,F)};let{connection:A,...J}=$;super(J);this.#$=P($),this.#A=F;let X=U0();this.#F=(Y)=>$.executor.compileQuery(Y,X)}get isCommitted(){return this.#A.isCommitted}get isRolledBack(){return this.#A.isRolledBack}commit(){return kD(this.#A),new fU(async()=>{await this.#$.driver.commitTransaction(this.#$.connection.connection),this.#A.isCommitted=!0,this.#$.connection.release()})}rollback(){return kD(this.#A),new fU(async()=>{await this.#$.driver.rollbackTransaction(this.#$.connection.connection),this.#A.isRolledBack=!0,this.#$.connection.release()})}savepoint($){return kD(this.#A),new fU(async()=>{return await this.#$.driver.savepoint?.(this.#$.connection.connection,$,this.#F),new iJ({...this.#$})})}rollbackToSavepoint($){return kD(this.#A),new fU(async()=>{return await this.#$.driver.rollbackToSavepoint?.(this.#$.connection.connection,$,this.#F),new iJ({...this.#$})})}releaseSavepoint($){return kD(this.#A),new fU(async()=>{return await this.#$.driver.releaseSavepoint?.(this.#$.connection.connection,$,this.#F),new iJ({...this.#$})})}withPlugin($){return new iJ({...this.#$,executor:this.#$.executor.withPlugin($)})}withoutPlugins(){return new iJ({...this.#$,executor:this.#$.executor.withoutPlugins()})}withSchema($){return new iJ({...this.#$,executor:this.#$.executor.withPluginAtFront(new n7($))})}withTables(){return new iJ({...this.#$})}}});var lI1=()=>{};var pI1=()=>{};var iI1=()=>{};var nI1=()=>{};var rI1=()=>{};class KE{#$;constructor($){this.#$=P($)}get expressionType(){return}get isRawBuilder(){return!0}as($){return new aI1(this,$)}$castTo(){return new KE({...this.#$})}$notNull(){return new KE(this.#$)}withPlugin($){return new KE({...this.#$,plugins:this.#$.plugins!==void 0?P([...this.#$.plugins,$]):P([$])})}toOperationNode(){return this.#A(this.#F())}compile($){return this.#J(this.#F($))}async execute($){let F=this.#F($);return F.executeQuery(this.#J(F))}#F($){let F=$!==void 0?$.getExecutor():tY;return this.#$.plugins!==void 0?F.withPlugins(this.#$.plugins):F}#A($){return $.transformQuery(this.#$.rawNode,this.#$.queryId)}#J($){return $.compileQuery(this.#A($),this.#$.queryId)}}function nJ($){return new KE($)}class aI1{#$;#F;constructor($,F){this.#$=$,this.#F=F}get expression(){return this.#$}get alias(){return this.#F}get rawBuilder(){return this.#$}toOperationNode(){return _9.create(this.#$.toOperationNode(),w2(this.#F)?this.#F.toOperationNode():Y0.create(this.#F))}}var Fs=x(()=>{u$();A1();VU();W2();n3()});function tI1($){if(w2($))return $.toOperationNode();return p6($)}var _0;var AW=x(()=>{W2();n3();g5();i$();X8();Z8();zA();u5();Fs();_0=Object.assign(($,...F)=>{return nJ({queryId:U0(),rawNode:Q6.create($,F?.map(tI1)??[])})},{ref($){return nJ({queryId:U0(),rawNode:Q6.createWithChild(d7($))})},val($){return nJ({queryId:U0(),rawNode:Q6.createWithChild(p6($))})},value($){return this.val($)},table($){return nJ({queryId:U0(),rawNode:Q6.createWithChild(K6($))})},id(...$){let F=Array($.length+1).fill(".");return F[0]="",F[F.length-1]="",nJ({queryId:U0(),rawNode:Q6.create(F,$.map(Y0.create))})},lit($){return nJ({queryId:U0(),rawNode:Q6.createWithChild(m4.createImmediate($))})},literal($){return this.lit($)},raw($){return nJ({queryId:U0(),rawNode:Q6.createWithSql($)})},join($,F=_0`, `){let A=Array(Math.max(2*$.length-1,0)),J=F.toOperationNode();for(let X=0;X<$.length;++X)if(A[2*X]=tI1($[X]),X!==$.length-1)A[2*X+1]=J;return nJ({queryId:U0(),rawNode:Q6.createWithChildren(A)})}})});var sI1=()=>{};var oI1=()=>{};class As{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#$=P({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),RenameConstraintNode:this.visitRenameConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),RefreshMaterializedViewNode:this.visitRefreshMaterializedView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this),OrActionNode:this.visitOrAction.bind(this),CollateNode:this.visitCollate.bind(this)});visitNode=($)=>{this.nodeStack.push($),this.#$[$.kind]($),this.nodeStack.pop()}}var Js=x(()=>{A1()});var ON0,a7,SN0,eI1,_N0;var xD=x(()=>{$U();MD();Js();vJ();GU();g5();A1();UE();Pj();PD();YU();ON0=/'/g;a7=class a7 extends As{#$="";#F=[];get numParameters(){return this.#F.length}compileQuery($,F){return this.#$="",this.#F=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode($),P({query:$,queryId:F,sql:this.getSql(),parameters:[...this.#F]})}getSql(){return this.#$}visitSelectQuery($){let F=this.parentNode!==void 0&&!l7.is(this.parentNode)&&!G4.is(this.parentNode)&&!k8.is(this.parentNode)&&!FF.is(this.parentNode)&&!Mj.is(this.parentNode);if(this.parentNode===void 0&&$.explain)this.visitNode($.explain),this.append(" ");if(F)this.append("(");if($.with)this.visitNode($.with),this.append(" ");if(this.append("select"),$.distinctOn)this.append(" "),this.compileDistinctOn($.distinctOn);if($.frontModifiers?.length)this.append(" "),this.compileList($.frontModifiers," ");if($.top)this.append(" "),this.visitNode($.top);if($.selections)this.append(" "),this.compileList($.selections);if($.from)this.append(" "),this.visitNode($.from);if($.joins)this.append(" "),this.compileList($.joins," ");if($.where)this.append(" "),this.visitNode($.where);if($.groupBy)this.append(" "),this.visitNode($.groupBy);if($.having)this.append(" "),this.visitNode($.having);if($.setOperations)this.append(" "),this.compileList($.setOperations," ");if($.orderBy)this.append(" "),this.visitNode($.orderBy);if($.limit)this.append(" "),this.visitNode($.limit);if($.offset)this.append(" "),this.visitNode($.offset);if($.fetch)this.append(" "),this.visitNode($.fetch);if($.endModifiers?.length)this.append(" "),this.compileList(this.sortSelectModifiers([...$.endModifiers])," ");if(F)this.append(")")}visitFrom($){this.append("from "),this.compileList($.froms)}visitSelection($){this.visitNode($.selection)}visitColumn($){this.visitNode($.column)}compileDistinctOn($){this.append("distinct on ("),this.compileList($),this.append(")")}compileList($,F=", "){let A=$.length-1;for(let J=0;J<=A;J++)if(this.visitNode($[J]),J<A)this.append(F)}visitWhere($){this.append("where "),this.visitNode($.where)}visitHaving($){this.append("having "),this.visitNode($.having)}visitInsertQuery($){let F=this.parentNode!==void 0&&!l7.is(this.parentNode)&&!Q6.is(this.parentNode)&&!v5.is(this.parentNode);if(this.parentNode===void 0&&$.explain)this.visitNode($.explain),this.append(" ");if(F)this.append("(");if($.with)this.visitNode($.with),this.append(" ");if(this.append($.replace?"replace":"insert"),$.ignore)c$("`InsertQueryNode.ignore` is deprecated. Use `InsertQueryNode.orAction` instead."),this.append(" ignore");if($.orAction)this.append(" "),this.visitNode($.orAction);if($.top)this.append(" "),this.visitNode($.top);if($.into)this.append(" into "),this.visitNode($.into);if($.columns)this.append(" ("),this.compileList($.columns),this.append(")");if($.output)this.append(" "),this.visitNode($.output);if($.values)this.append(" "),this.visitNode($.values);if($.defaultValues)this.append(" "),this.append("default values");if($.onConflict)this.append(" "),this.visitNode($.onConflict);if($.onDuplicateKey)this.append(" "),this.visitNode($.onDuplicateKey);if($.returning)this.append(" "),this.visitNode($.returning);if(F)this.append(")");if($.endModifiers?.length)this.append(" "),this.compileList($.endModifiers," ")}visitValues($){this.append("values "),this.compileList($.values)}visitDeleteQuery($){let F=this.parentNode!==void 0&&!l7.is(this.parentNode)&&!Q6.is(this.parentNode);if(this.parentNode===void 0&&$.explain)this.visitNode($.explain),this.append(" ");if(F)this.append("(");if($.with)this.visitNode($.with),this.append(" ");if(this.append("delete "),$.top)this.visitNode($.top),this.append(" ");if(this.visitNode($.from),$.output)this.append(" "),this.visitNode($.output);if($.using)this.append(" "),this.visitNode($.using);if($.joins)this.append(" "),this.compileList($.joins," ");if($.where)this.append(" "),this.visitNode($.where);if($.orderBy)this.append(" "),this.visitNode($.orderBy);if($.limit)this.append(" "),this.visitNode($.limit);if($.returning)this.append(" "),this.visitNode($.returning);if(F)this.append(")");if($.endModifiers?.length)this.append(" "),this.compileList($.endModifiers," ")}visitReturning($){this.append("returning "),this.compileList($.selections)}visitAlias($){this.visitNode($.node),this.append(" as "),this.visitNode($.alias)}visitReference($){if($.table)this.visitNode($.table),this.append(".");this.visitNode($.column)}visitSelectAll($){this.append("*")}visitIdentifier($){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier($),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier($){if(!O6($.name))throw Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier($.name))}visitAnd($){this.visitNode($.left),this.append(" and "),this.visitNode($.right)}visitOr($){this.visitNode($.left),this.append(" or "),this.visitNode($.right)}visitValue($){if($.immediate)this.appendImmediateValue($.value);else this.appendValue($.value)}visitValueList($){this.append("("),this.compileList($.values),this.append(")")}visitTuple($){this.append("("),this.compileList($.values),this.append(")")}visitPrimitiveValueList($){this.append("(");let{values:F}=$;for(let A=0;A<F.length;++A)if(this.appendValue(F[A]),A!==F.length-1)this.append(", ");this.append(")")}visitParens($){this.append("("),this.visitNode($.node),this.append(")")}visitJoin($){if(this.append(_N0[$.joinType]),this.append(" "),this.visitNode($.table),$.on)this.append(" "),this.visitNode($.on)}visitOn($){this.append("on "),this.visitNode($.on)}visitRaw($){let{sqlFragments:F,parameters:A}=$;for(let J=0;J<F.length;++J)if(this.append(F[J]),A.length>J)this.visitNode(A[J])}visitOperator($){this.append($.operator)}visitTable($){this.visitNode($.table)}visitSchemableIdentifier($){if($.schema)this.visitNode($.schema),this.append(".");this.visitNode($.identifier)}visitCreateTable($){if(this.append("create "),$.frontModifiers&&$.frontModifiers.length>0)this.compileList($.frontModifiers," "),this.append(" ");if($.temporary)this.append("temporary ");if(this.append("table "),$.ifNotExists)this.append("if not exists ");if(this.visitNode($.table),$.selectQuery)this.append(" as "),this.visitNode($.selectQuery);else{if(this.append(" ("),this.compileList([...$.columns,...$.constraints??[]]),this.append(")"),$.onCommit)this.append(" on commit "),this.append($.onCommit);if($.endModifiers&&$.endModifiers.length>0)this.append(" "),this.compileList($.endModifiers," ")}}visitColumnDefinition($){if($.ifNotExists)this.append("if not exists ");if(this.visitNode($.column),this.append(" "),this.visitNode($.dataType),$.unsigned)this.append(" unsigned");if($.frontModifiers&&$.frontModifiers.length>0)this.append(" "),this.compileList($.frontModifiers," ");if($.generated)this.append(" "),this.visitNode($.generated);if($.identity)this.append(" identity");if($.defaultTo)this.append(" "),this.visitNode($.defaultTo);if($.notNull)this.append(" not null");if($.unique)this.append(" unique");if($.nullsNotDistinct)this.append(" nulls not distinct");if($.primaryKey)this.append(" primary key");if($.autoIncrement)this.append(" "),this.append(this.getAutoIncrement());if($.references)this.append(" "),this.visitNode($.references);if($.check)this.append(" "),this.visitNode($.check);if($.endModifiers&&$.endModifiers.length>0)this.append(" "),this.compileList($.endModifiers," ")}getAutoIncrement(){return"auto_increment"}visitReferences($){if(this.append("references "),this.visitNode($.table),this.append(" ("),this.compileList($.columns),this.append(")"),$.onDelete)this.append(" on delete "),this.append($.onDelete);if($.onUpdate)this.append(" on update "),this.append($.onUpdate)}visitDropTable($){if(this.append("drop table "),$.ifExists)this.append("if exists ");if(this.visitNode($.table),$.cascade)this.append(" cascade")}visitDataType($){this.append($.dataType)}visitOrderBy($){this.append("order by "),this.compileList($.items)}visitOrderByItem($){if(this.visitNode($.orderBy),$.collation)this.append(" "),this.visitNode($.collation);if($.direction)this.append(" "),this.visitNode($.direction);if($.nulls)this.append(" nulls "),this.append($.nulls)}visitGroupBy($){this.append("group by "),this.compileList($.items)}visitGroupByItem($){this.visitNode($.groupBy)}visitUpdateQuery($){let F=this.parentNode!==void 0&&!l7.is(this.parentNode)&&!Q6.is(this.parentNode)&&!v5.is(this.parentNode);if(this.parentNode===void 0&&$.explain)this.visitNode($.explain),this.append(" ");if(F)this.append("(");if($.with)this.visitNode($.with),this.append(" ");if(this.append("update "),$.top)this.visitNode($.top),this.append(" ");if($.table)this.visitNode($.table),this.append(" ");if(this.append("set "),$.updates)this.compileList($.updates);if($.output)this.append(" "),this.visitNode($.output);if($.from)this.append(" "),this.visitNode($.from);if($.joins){if(!$.from)throw Error("Joins in an update query are only supported as a part of a PostgreSQL 'update set from join' query. If you want to create a MySQL 'update join set' query, see https://kysely.dev/docs/examples/update/my-sql-joins");this.append(" "),this.compileList($.joins," ")}if($.where)this.append(" "),this.visitNode($.where);if($.orderBy)this.append(" "),this.visitNode($.orderBy);if($.limit)this.append(" "),this.visitNode($.limit);if($.returning)this.append(" "),this.visitNode($.returning);if(F)this.append(")");if($.endModifiers?.length)this.append(" "),this.compileList($.endModifiers," ")}visitColumnUpdate($){this.visitNode($.column),this.append(" = "),this.visitNode($.value)}visitLimit($){this.append("limit "),this.visitNode($.limit)}visitOffset($){this.append("offset "),this.visitNode($.offset)}visitOnConflict($){if(this.append("on conflict"),$.columns)this.append(" ("),this.compileList($.columns),this.append(")");else if($.constraint)this.append(" on constraint "),this.visitNode($.constraint);else if($.indexExpression)this.append(" ("),this.visitNode($.indexExpression),this.append(")");if($.indexWhere)this.append(" "),this.visitNode($.indexWhere);if($.doNothing===!0)this.append(" do nothing");else if($.updates){if(this.append(" do update set "),this.compileList($.updates),$.updateWhere)this.append(" "),this.visitNode($.updateWhere)}}visitOnDuplicateKey($){this.append("on duplicate key update "),this.compileList($.updates)}visitCreateIndex($){if(this.append("create "),$.unique)this.append("unique ");if(this.append("index "),$.ifNotExists)this.append("if not exists ");if(this.visitNode($.name),$.table)this.append(" on "),this.visitNode($.table);if($.using)this.append(" using "),this.visitNode($.using);if($.columns)this.append(" ("),this.compileList($.columns),this.append(")");if($.nullsNotDistinct)this.append(" nulls not distinct");if($.where)this.append(" "),this.visitNode($.where)}visitDropIndex($){if(this.append("drop index "),$.ifExists)this.append("if exists ");if(this.visitNode($.name),$.table)this.append(" on "),this.visitNode($.table);if($.cascade)this.append(" cascade")}visitCreateSchema($){if(this.append("create schema "),$.ifNotExists)this.append("if not exists ");this.visitNode($.schema)}visitDropSchema($){if(this.append("drop schema "),$.ifExists)this.append("if exists ");if(this.visitNode($.schema),$.cascade)this.append(" cascade")}visitPrimaryKeyConstraint($){if($.name)this.append("constraint "),this.visitNode($.name),this.append(" ");this.append("primary key ("),this.compileList($.columns),this.append(")"),this.buildDeferrable($)}buildDeferrable($){if($.deferrable!==void 0)if($.deferrable)this.append(" deferrable");else this.append(" not deferrable");if($.initiallyDeferred!==void 0)if($.initiallyDeferred)this.append(" initially deferred");else this.append(" initially immediate")}visitUniqueConstraint($){if($.name)this.append("constraint "),this.visitNode($.name),this.append(" ");if(this.append("unique"),$.nullsNotDistinct)this.append(" nulls not distinct");this.append(" ("),this.compileList($.columns),this.append(")"),this.buildDeferrable($)}visitCheckConstraint($){if($.name)this.append("constraint "),this.visitNode($.name),this.append(" ");this.append("check ("),this.visitNode($.expression),this.append(")")}visitForeignKeyConstraint($){if($.name)this.append("constraint "),this.visitNode($.name),this.append(" ");if(this.append("foreign key ("),this.compileList($.columns),this.append(") "),this.visitNode($.references),$.onDelete)this.append(" on delete "),this.append($.onDelete);if($.onUpdate)this.append(" on update "),this.append($.onUpdate);this.buildDeferrable($)}visitList($){this.compileList($.items)}visitWith($){if(this.append("with "),$.recursive)this.append("recursive ");this.compileList($.expressions)}visitCommonTableExpression($){if(this.visitNode($.name),this.append(" as "),xJ($.materialized)){if(!$.materialized)this.append("not ");this.append("materialized ")}this.visitNode($.expression)}visitCommonTableExpressionName($){if(this.visitNode($.table),$.columns)this.append("("),this.compileList($.columns),this.append(")")}visitAlterTable($){if(this.append("alter table "),this.visitNode($.table),this.append(" "),$.renameTo)this.append("rename to "),this.visitNode($.renameTo);if($.setSchema)this.append("set schema "),this.visitNode($.setSchema);if($.addConstraint)this.visitNode($.addConstraint);if($.dropConstraint)this.visitNode($.dropConstraint);if($.renameConstraint)this.visitNode($.renameConstraint);if($.columnAlterations)this.compileColumnAlterations($.columnAlterations);if($.addIndex)this.visitNode($.addIndex);if($.dropIndex)this.visitNode($.dropIndex)}visitAddColumn($){this.append("add column "),this.visitNode($.column)}visitRenameColumn($){this.append("rename column "),this.visitNode($.column),this.append(" to "),this.visitNode($.renameTo)}visitDropColumn($){this.append("drop column "),this.visitNode($.column)}visitAlterColumn($){if(this.append("alter column "),this.visitNode($.column),this.append(" "),$.dataType){if(this.announcesNewColumnDataType())this.append("type ");if(this.visitNode($.dataType),$.dataTypeExpression)this.append("using "),this.visitNode($.dataTypeExpression)}if($.setDefault)this.append("set default "),this.visitNode($.setDefault);if($.dropDefault)this.append("drop default");if($.setNotNull)this.append("set not null");if($.dropNotNull)this.append("drop not null")}visitModifyColumn($){this.append("modify column "),this.visitNode($.column)}visitAddConstraint($){this.append("add "),this.visitNode($.constraint)}visitDropConstraint($){if(this.append("drop constraint "),$.ifExists)this.append("if exists ");if(this.visitNode($.constraintName),$.modifier==="cascade")this.append(" cascade");else if($.modifier==="restrict")this.append(" restrict")}visitRenameConstraint($){this.append("rename constraint "),this.visitNode($.oldName),this.append(" to "),this.visitNode($.newName)}visitSetOperation($){if(this.append($.operator),this.append(" "),$.all)this.append("all ");this.visitNode($.expression)}visitCreateView($){if(this.append("create "),$.orReplace)this.append("or replace ");if($.materialized)this.append("materialized ");if($.temporary)this.append("temporary ");if(this.append("view "),$.ifNotExists)this.append("if not exists ");if(this.visitNode($.name),this.append(" "),$.columns)this.append("("),this.compileList($.columns),this.append(") ");if($.as)this.append("as "),this.visitNode($.as)}visitRefreshMaterializedView($){if(this.append("refresh materialized view "),$.concurrently)this.append("concurrently ");if(this.visitNode($.name),$.withNoData)this.append(" with no data");else this.append(" with data")}visitDropView($){if(this.append("drop "),$.materialized)this.append("materialized ");if(this.append("view "),$.ifExists)this.append("if exists ");if(this.visitNode($.name),$.cascade)this.append(" cascade")}visitGenerated($){if(this.append("generated "),$.always)this.append("always ");if($.byDefault)this.append("by default ");if(this.append("as "),$.identity)this.append("identity");if($.expression)this.append("("),this.visitNode($.expression),this.append(")");if($.stored)this.append(" stored")}visitDefaultValue($){this.append("default "),this.visitNode($.defaultValue)}visitSelectModifier($){if($.rawModifier)this.visitNode($.rawModifier);else this.append(SN0[$.modifier]);if($.of)this.append(" of "),this.compileList($.of,", ")}visitCreateType($){if(this.append("create type "),this.visitNode($.name),$.enum)this.append(" as enum "),this.visitNode($.enum)}visitDropType($){if(this.append("drop type "),$.ifExists)this.append("if exists ");this.visitNode($.name)}visitExplain($){if(this.append("explain"),$.options||$.format){if(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),$.options){if(this.visitNode($.options),$.format)this.append(this.getExplainOptionsDelimiter())}if($.format)this.append("format"),this.append(this.getExplainOptionAssignment()),this.append($.format);this.append(this.getRightExplainOptionsWrapper())}}visitDefaultInsertValue($){this.append("default")}visitAggregateFunction($){if(this.append($.func),this.append("("),$.distinct)this.append("distinct ");if(this.compileList($.aggregated),$.orderBy)this.append(" "),this.visitNode($.orderBy);if(this.append(")"),$.withinGroup)this.append(" within group ("),this.visitNode($.withinGroup),this.append(")");if($.filter)this.append(" filter("),this.visitNode($.filter),this.append(")");if($.over)this.append(" "),this.visitNode($.over)}visitOver($){if(this.append("over("),$.partitionBy){if(this.visitNode($.partitionBy),$.orderBy)this.append(" ")}if($.orderBy)this.visitNode($.orderBy);this.append(")")}visitPartitionBy($){this.append("partition by "),this.compileList($.items)}visitPartitionByItem($){this.visitNode($.partitionBy)}visitBinaryOperation($){this.visitNode($.leftOperand),this.append(" "),this.visitNode($.operator),this.append(" "),this.visitNode($.rightOperand)}visitUnaryOperation($){if(this.visitNode($.operator),!this.isMinusOperator($.operator))this.append(" ");this.visitNode($.operand)}isMinusOperator($){return x8.is($)&&$.operator==="-"}visitUsing($){this.append("using "),this.compileList($.tables)}visitFunction($){this.append($.func),this.append("("),this.compileList($.arguments),this.append(")")}visitCase($){if(this.append("case"),$.value)this.append(" "),this.visitNode($.value);if($.when)this.append(" "),this.compileList($.when," ");if($.else)this.append(" else "),this.visitNode($.else);if(this.append(" end"),$.isStatement)this.append(" case")}visitWhen($){if(this.append("when "),this.visitNode($.condition),$.result)this.append(" then "),this.visitNode($.result)}visitJSONReference($){this.visitNode($.reference),this.visitNode($.traversal)}visitJSONPath($){if($.inOperator)this.visitNode($.inOperator);this.append("'$");for(let F of $.pathLegs)this.visitNode(F);this.append("'")}visitJSONPathLeg($){let F=$.type==="ArrayLocation";if(this.append(F?"[":"."),this.append(String($.value)),F)this.append("]")}visitJSONOperatorChain($){for(let F=0,A=$.values.length;F<A;F++){if(F===A-1)this.visitNode($.operator);else this.append("->");this.visitNode($.values[F])}}visitMergeQuery($){if($.with)this.visitNode($.with),this.append(" ");if(this.append("merge "),$.top)this.visitNode($.top),this.append(" ");if(this.append("into "),this.visitNode($.into),$.using)this.append(" "),this.visitNode($.using);if($.whens)this.append(" "),this.compileList($.whens," ");if($.returning)this.append(" "),this.visitNode($.returning);if($.output)this.append(" "),this.visitNode($.output);if($.endModifiers?.length)this.append(" "),this.compileList($.endModifiers," ")}visitMatched($){if($.not)this.append("not ");if(this.append("matched"),$.bySource)this.append(" by source")}visitAddIndex($){if(this.append("add "),$.unique)this.append("unique ");if(this.append("index "),this.visitNode($.name),$.columns)this.append(" ("),this.compileList($.columns),this.append(")");if($.using)this.append(" using "),this.visitNode($.using)}visitCast($){this.append("cast("),this.visitNode($.expression),this.append(" as "),this.visitNode($.dataType),this.append(")")}visitFetch($){this.append("fetch next "),this.visitNode($.rowCount),this.append(` rows ${$.modifier}`)}visitOutput($){this.append("output "),this.compileList($.selections)}visitTop($){if(this.append(`top(${$.expression})`),$.modifiers)this.append(` ${$.modifiers}`)}visitOrAction($){this.append($.action)}visitCollate($){this.append("collate "),this.visitNode($.collation)}append($){this.#$+=$}appendValue($){this.addParameter($),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier($){let F=this.getLeftIdentifierWrapper(),A=this.getRightIdentifierWrapper(),J="";for(let X of $)if(J+=X,X===F)J+=F;else if(X===A)J+=A;return J}sanitizeStringLiteral($){return $.replace(ON0,"''")}addParameter($){this.#F.push($)}appendImmediateValue($){if(O6($))this.appendStringLiteral($);else if(v$($)||xJ($)||yY($))this.append($.toString());else if(vY($))this.append("null");else if(eH($))this.appendImmediateValue($.toISOString());else throw Error(`invalid immediate value ${$}`)}appendStringLiteral($){this.append("'"),this.append(this.sanitizeStringLiteral($)),this.append("'")}sortSelectModifiers($){return $.sort((F,A)=>F.modifier&&A.modifier?eI1[F.modifier]-eI1[A.modifier]:1),P($)}compileColumnAlterations($){this.compileList($)}announcesNewColumnDataType(){return!0}};SN0=P({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),eI1=P({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),_N0=P({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",CrossJoin:"cross join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",LateralCrossJoin:"cross join lateral",OuterApply:"outer apply",CrossApply:"cross apply",Using:"using"})});var e2;var vU=x(()=>{g5();A1();u5();e2=P({raw($,F=[]){return P({sql:$,query:Q6.createWithSql($),parameters:P(F),queryId:U0()})}})});var $T1=()=>{};var FT1=()=>{};var AT1=()=>{};var JT1=()=>{};class rJ{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}var XT1=()=>{};function m5($,F){return Q6.createWithChildren([Q6.createWithSql(`${$} `),Y0.create(F)])}var FO=x(()=>{W2();g5()});class Xs{#$;#F=new WT1;#A;#J;constructor($){this.#$=P({...$})}async init(){if(this.#A=S6(this.#$.database)?await this.#$.database():this.#$.database,this.#J=new YT1(this.#A),this.#$.onCreateConnection)await this.#$.onCreateConnection(this.#J)}async acquireConnection(){return await this.#F.lock(),this.#J}async beginTransaction($){await $.executeQuery(e2.raw("begin"))}async commitTransaction($){await $.executeQuery(e2.raw("commit"))}async rollbackTransaction($){await $.executeQuery(e2.raw("rollback"))}async savepoint($,F,A){await $.executeQuery(A(m5("savepoint",F),U0()))}async rollbackToSavepoint($,F,A){await $.executeQuery(A(m5("rollback to",F),U0()))}async releaseSavepoint($,F,A){await $.executeQuery(A(m5("release",F),U0()))}async releaseConnection(){this.#F.unlock()}async destroy(){this.#A?.close()}}class YT1{#$;constructor($){this.#$=$}executeQuery($){let{sql:F,parameters:A}=$,J=this.#$.prepare(F);if(J.reader)return Promise.resolve({rows:J.all(A)});let{changes:X,lastInsertRowid:Y}=J.run(A);return Promise.resolve({numAffectedRows:X!==void 0&&X!==null?BigInt(X):void 0,insertId:Y!==void 0&&Y!==null?BigInt(Y):void 0,rows:[]})}async*streamQuery($,F){let{sql:A,parameters:J,query:X}=$,Y=this.#$.prepare(A);if(M6.is(X)){let W=Y.iterate(J);for(let Z of W)yield{rows:[Z]}}else throw Error("Sqlite driver only supports streaming of select queries")}}class WT1{#$;#F;async lock(){while(this.#$)await this.#$;this.#$=new Promise(($)=>{this.#F=$})}unlock(){let $=this.#F;this.#$=void 0,this.#F=void 0,$?.()}}var Ys=x(()=>{pY();FO();vU();A1();u5()});var kN0,Ws;var Zs=x(()=>{xD();kN0=/"/g;Ws=class Ws extends a7{visitOrAction($){this.append("or "),this.append($.action)}getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier($){return $.replace(kN0,'""')}visitDefaultInsertValue($){this.append("null")}}});class Ds{transformQuery($){return $.node}async transformResult($){return $.result}}class xN0{#$;constructor($){this.#$=P($)}async getMigrations(){let F=await this.#z(this.#J)?await this.#$.db.withPlugin(this.#W).selectFrom(this.#J).select(["name","timestamp"]).$narrowType().execute():[];return(await this.#B()).map(({name:J,...X})=>{let Y=F.find((W)=>W.name===J);return{name:J,migration:X,executedAt:Y?new Date(Y.timestamp):void 0}})}async migrateToLatest(){return this.#F(()=>({direction:"Up",step:1/0}))}async migrateTo($){return this.#F(({migrations:F,executedMigrations:A,pendingMigrations:J})=>{if(Y2($)&&$.__noMigrations__===!0)return{direction:"Down",step:1/0};if(!F.find((W)=>W.name===$))throw Error(`migration "${$}" doesn't exist`);let X=A.indexOf($),Y=J.findIndex((W)=>W.name===$);if(X!==-1)return{direction:"Down",step:A.length-X-1};else if(Y!==-1)return{direction:"Up",step:Y+1};else throw Error(`migration "${$}" isn't executed or pending`)})}async migrateUp(){return this.#F(()=>({direction:"Up",step:1}))}async migrateDown(){return this.#F(()=>({direction:"Down",step:1}))}async#F($){try{return await this.#Y(),await this.#D(),await this.#G(),await this.#H(),await this.#w($)}catch(F){if(F instanceof AO)return F.resultSet;return{error:F}}}get#A(){return this.#$.migrationTableSchema}get#J(){return this.#$.migrationTableName??B3}get#X(){return this.#$.migrationLockTableName??e3}get#Z(){return this.#$.allowUnorderedMigrations??bN0}get#W(){if(this.#A)return new n7(this.#A);return new Ds}async#Y(){if(!this.#A)return;if(await this.#Q())return;try{await this.#U(this.#$.db.schema.createSchema(this.#A))}catch(F){if(!await this.#Q())throw F}}async#D(){if(await this.#z(this.#J))return;try{await this.#U(this.#$.db.schema.withPlugin(this.#W).createTable(this.#J).addColumn("name","varchar(255)",(F)=>F.notNull().primaryKey()).addColumn("timestamp","varchar(255)",(F)=>F.notNull()))}catch(F){if(!await this.#z(this.#J))throw F}}async#G(){if(await this.#z(this.#X))return;try{await this.#U(this.#$.db.schema.withPlugin(this.#W).createTable(this.#X).addColumn("id","varchar(255)",(F)=>F.notNull().primaryKey()).addColumn("is_locked","integer",(F)=>F.notNull().defaultTo(0)))}catch(F){if(!await this.#z(this.#X))throw F}}async#H(){if(await this.#K())return;try{await this.#$.db.withPlugin(this.#W).insertInto(this.#X).values({id:Gs,is_locked:0}).execute()}catch(F){if(!await this.#K())throw F}}async#Q(){return(await this.#$.db.introspection.getSchemas()).some((F)=>F.name===this.#A)}async#z($){let F=this.#A;return(await this.#$.db.introspection.getTables({withInternalKyselyTables:!0})).some((J)=>J.name===$&&(!F||J.schema===F))}async#K(){return!!await this.#$.db.withPlugin(this.#W).selectFrom(this.#X).where("id","=",Gs).select("id").executeTakeFirst()}async#w($){let F=this.#$.db.getExecutor().adapter,A=P({lockTable:this.#$.migrationLockTableName??e3,lockRowId:Gs,lockTableSchema:this.#$.migrationTableSchema}),J=async(X)=>{try{await F.acquireMigrationLock(X,A);let Y=await this.#q(X);if(Y.migrations.length===0)return{results:[]};let{direction:W,step:Z}=$(Y);if(Z<=0)return{results:[]};if(W==="Down")return await this.#C(X,Y,Z);else if(W==="Up")return await this.#M(X,Y,Z);return{results:[]}}finally{await F.releaseMigrationLock(X,A)}};if(F.supportsTransactionalDdl&&!this.#$.disableTransactions)return this.#$.db.transaction().execute(J);else return this.#$.db.connection().execute(J)}async#q($){let F=await this.#B(),A=await this.#E($);if(this.#V(F,A),!this.#Z)this.#N(F,A);let J=this.#L(F,A);return P({migrations:F,executedMigrations:A,lastMigration:PR1(A),pendingMigrations:J})}#L($,F){return $.filter((A)=>{return!F.includes(A.name)})}async#B(){let $=await this.#$.provider.getMigrations();return Object.keys($).sort().map((F)=>({...$[F],name:F}))}async#E($){let F=await $.withPlugin(this.#W).selectFrom(this.#J).select(["name","timestamp"]).$narrowType().execute(),A=this.#$.nameComparator||((J,X)=>J.localeCompare(X));return F.sort((J,X)=>{if(J.timestamp===X.timestamp)return A(J.name,X.name);return new Date(J.timestamp).getTime()-new Date(X.timestamp).getTime()}).map((J)=>J.name)}#V($,F){for(let A of F)if(!$.some((J)=>J.name===A))throw Error(`corrupted migrations: previously executed migration ${A} is missing`)}#N($,F){for(let A=0;A<F.length;++A)if($[A].name!==F[A])throw Error(`corrupted migrations: expected previously executed migration ${F[A]} to be at index ${A} but ${$[A].name} was found in its place. New migrations must always have a name that comes alphabetically after the last executed migration.`)}async#C($,F,A){let J=F.executedMigrations.slice().reverse().slice(0,A).map((Y)=>{return F.migrations.find((W)=>W.name===Y)}),X=J.map((Y)=>{return{migrationName:Y.name,direction:"Down",status:"NotExecuted"}});for(let Y=0;Y<X.length;++Y){let W=J[Y];try{if(W.down)await W.down($),await $.withPlugin(this.#W).deleteFrom(this.#J).where("name","=",W.name).execute(),X[Y]={migrationName:W.name,direction:"Down",status:"Success"}}catch(Z){throw X[Y]={migrationName:W.name,direction:"Down",status:"Error"},new AO({error:Z,results:X})}}return{results:X}}async#M($,F,A){let X=F.pendingMigrations.slice(0,A).map((Y)=>{return{migrationName:Y.name,direction:"Up",status:"NotExecuted"}});for(let Y=0;Y<X.length;Y++){let W=F.pendingMigrations[Y];try{await W.up($),await $.withPlugin(this.#W).insertInto(this.#J).values({name:W.name,timestamp:new Date().toISOString()}).execute(),X[Y]={migrationName:W.name,direction:"Up",status:"Success"}}catch(Z){throw X[Y]={migrationName:W.name,direction:"Up",status:"Error"},new AO({error:Z,results:X})}}return{results:X}}async#U($){if(this.#$.db.getExecutor().adapter.supportsCreateIfNotExists)$=$.ifNotExists();await $.execute()}}var B3="kysely_migration",e3="kysely_migration_lock",bN0=!1,Gs="migration_lock",pN6,AO;var gD=x(()=>{jD();A1();pN6=P({__noMigrations__:!0});AO=class AO extends Error{#$;constructor($){super();this.#$=$}get resultSet(){return this.#$}}});class zs{#$;constructor($){this.#$=$}async getSchemas(){return[]}async getTables($={withInternalKyselyTables:!1}){return await this.#A($)}async getMetadata($){return{tables:await this.getTables($)}}#F($,F){let A=$.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select(["name","sql","type"]).orderBy("name");if(!F.withInternalKyselyTables)A=A.where("name","!=",B3).where("name","!=",e3);return A}async#A($){let F=await this.#F(this.#$,$).execute(),A=await this.#$.with("table_list",(X)=>this.#F(X,$)).selectFrom(["table_list as tl",_0`pragma_table_info(tl.name)`.as("p")]).select(["tl.name as table","p.cid","p.name","p.type","p.notnull","p.dflt_value","p.pk"]).orderBy("tl.name").orderBy("p.cid").execute(),J={};for(let X of A)J[X.table]??=[],J[X.table].push(X);return F.map(({name:X,sql:Y,type:W})=>{let Z=Y?.split(/[\(\),]/)?.find((G)=>G.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),D=J[X]??[];if(!Z){let G=D.filter((z)=>z.pk>0);if(G.length===1&&G[0].type.toLowerCase()==="integer")Z=G[0].name}return{name:X,isView:W==="view",columns:D.map((G)=>({name:G.name,dataType:G.type,isNullable:!G.notnull,isAutoIncrementing:G.name===Z,hasDefaultValue:G.dflt_value!=null,comment:void 0}))}})}}var Hs=x(()=>{gD();AW()});var Us;var Qs=x(()=>{Us=class Us extends rJ{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock($,F){}async releaseMigrationLock($,F){}}});class JO{#$;constructor($){this.#$=P({...$})}createDriver(){return new Xs(this.#$)}createQueryCompiler(){return new Ws}createAdapter(){return new Us}createIntrospector($){return new zs($)}}var ZT1=x(()=>{Ys();Zs();Hs();Qs();A1()});var DT1=()=>{};var gN0,Ks;var Bs=x(()=>{xD();gN0=/"/g;Ks=class Ks extends a7{sanitizeIdentifier($){return $.replace(gN0,'""')}}});class ws{#$;constructor($){this.#$=$}async getSchemas(){return(await this.#$.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map((F)=>({name:F.nspname}))}async getTables($={withInternalKyselyTables:!1}){let F=this.#$.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",_0`col_description(a.attrelid, a.attnum)`.as("column_description"),_0`pg_get_serial_sequence(quote_ident(ns.nspname) || '.' || quote_ident(c.relname), a.attname)`.as("auto_incrementing")]).where("c.relkind","in",["r","v","p"]).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("ns.nspname","!=","crdb_internal").where(_0`has_schema_privilege(ns.nspname, 'USAGE')`).where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();if(!$.withInternalKyselyTables)F=F.where("c.relname","!=",B3).where("c.relname","!=",e3);let A=await F.execute();return this.#F(A)}async getMetadata($){return{tables:await this.getTables($)}}#F($){return $.reduce((F,A)=>{let J=F.find((X)=>X.name===A.table&&X.schema===A.schema);if(!J)J=P({name:A.table,isView:A.table_type==="v",schema:A.schema,columns:[]}),F.push(J);return J.columns.push(P({name:A.column,dataType:A.type,dataTypeSchema:A.type_schema,isNullable:!A.not_null,isAutoIncrementing:A.auto_incrementing!==null,hasDefaultValue:A.has_default,comment:A.column_description??void 0})),F},[])}}var qs=x(()=>{gD();A1();AW()});var fN0,Ls;var Es=x(()=>{AW();fN0=BigInt("3853314791062309107");Ls=class Ls extends rJ{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock($,F){await _0`select pg_advisory_xact_lock(${_0.lit(fN0)})`.execute($)}async releaseMigrationLock($,F){}}});function yU($,F){if(vN0($)&&F.stack){let A=F.stack.split(`
`).slice(1).join(`
`);return $.stack+=`
${A}`,$}return $}function vN0($){return Y2($)&&O6($.stack)}var XO=x(()=>{A1()});class Vs{#$;#F=new WeakMap;#A;constructor($){this.#$=P({...$})}async init(){this.#A=S6(this.#$.pool)?await this.#$.pool():this.#$.pool}async acquireConnection(){let $=await this.#J(),F=this.#F.get($);if(!F){if(F=new zT1($),this.#F.set($,F),this.#$?.onCreateConnection)await this.#$.onCreateConnection(F)}if(this.#$?.onReserveConnection)await this.#$.onReserveConnection(F);return F}async#J(){return new Promise(($,F)=>{this.#A.getConnection(async(A,J)=>{if(A)F(A);else $(J)})})}async beginTransaction($,F){if(F.isolationLevel||F.accessMode){let A=[];if(F.isolationLevel)A.push(`isolation level ${F.isolationLevel}`);if(F.accessMode)A.push(F.accessMode);let J=`set transaction ${A.join(", ")}`;await $.executeQuery(e2.raw(J))}await $.executeQuery(e2.raw("begin"))}async commitTransaction($){await $.executeQuery(e2.raw("commit"))}async rollbackTransaction($){await $.executeQuery(e2.raw("rollback"))}async savepoint($,F,A){await $.executeQuery(A(m5("savepoint",F),U0()))}async rollbackToSavepoint($,F,A){await $.executeQuery(A(m5("rollback to",F),U0()))}async releaseSavepoint($,F,A){await $.executeQuery(A(m5("release savepoint",F),U0()))}async releaseConnection($){$[GT1]()}async destroy(){return new Promise(($,F)=>{this.#A.end((A)=>{if(A)F(A);else $()})})}}function yN0($){return Y2($)&&"insertId"in $&&"affectedRows"in $}var GT1,zT1;var Ns=x(()=>{FO();vU();A1();u5();XO();GT1=Symbol();zT1=class zT1{#$;constructor($){this.#$=$}async executeQuery($){try{let F=await this.#F($);if(yN0(F)){let{insertId:A,affectedRows:J,changedRows:X}=F;return{insertId:A!==void 0&&A!==null&&A.toString()!=="0"?BigInt(A):void 0,numAffectedRows:J!==void 0&&J!==null?BigInt(J):void 0,numChangedRows:X!==void 0&&X!==null?BigInt(X):void 0,rows:[]}}else if(Array.isArray(F))return{rows:F};return{rows:[]}}catch(F){throw yU(F,Error())}}#F($){return new Promise((F,A)=>{this.#$.query($.sql,$.parameters,(J,X)=>{if(J)A(J);else F(X)})})}async*streamQuery($,F){let A=this.#$.query($.sql,$.parameters).stream({objectMode:!0});try{for await(let J of A)yield{rows:[J]}}catch(J){if(J&&typeof J==="object"&&"code"in J&&J.code==="ERR_STREAM_PREMATURE_CLOSE")return;throw J}}[GT1](){this.#$.release()}}});var uN0,Cs;var Ms=x(()=>{xD();uN0=/`/g;Cs=class Cs extends a7{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier($){return $.replace(uN0,"``")}visitCreateIndex($){if(this.append("create "),$.unique)this.append("unique ");if(this.append("index "),$.ifNotExists)this.append("if not exists ");if(this.visitNode($.name),$.using)this.append(" using "),this.visitNode($.using);if($.table)this.append(" on "),this.visitNode($.table);if($.columns)this.append(" ("),this.compileList($.columns),this.append(")");if($.where)this.append(" "),this.visitNode($.where)}}});class Ps{#$;constructor($){this.#$=$}async getSchemas(){return(await this.#$.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map((F)=>({name:F.SCHEMA_NAME}))}async getTables($={withInternalKyselyTables:!1}){let F=this.#$.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",(J)=>J.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA","columns.COLUMN_COMMENT"]).where("columns.TABLE_SCHEMA","=",_0`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();if(!$.withInternalKyselyTables)F=F.where("columns.TABLE_NAME","!=",B3).where("columns.TABLE_NAME","!=",e3);let A=await F.execute();return this.#F(A)}async getMetadata($){return{tables:await this.getTables($)}}#F($){return $.reduce((F,A)=>{let J=F.find((X)=>X.name===A.TABLE_NAME);if(!J)J=P({name:A.TABLE_NAME,isView:A.TABLE_TYPE==="VIEW",schema:A.TABLE_SCHEMA,columns:[]}),F.push(J);return J.columns.push(P({name:A.COLUMN_NAME,dataType:A.DATA_TYPE,isNullable:A.IS_NULLABLE==="YES",isAutoIncrementing:A.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:A.COLUMN_DEFAULT!==null,comment:A.COLUMN_COMMENT===""?void 0:A.COLUMN_COMMENT})),F},[])}}var Rs=x(()=>{gD();A1();AW()});var HT1="ea586330-2c93-47c8-908d-981d9d270f9d",hN0=3600,Is;var Ts=x(()=>{AW();Is=class Is extends rJ{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock($,F){await _0`select get_lock(${_0.lit(HT1)}, ${_0.lit(hN0)})`.execute($)}async releaseMigrationLock($,F){await _0`select release_lock(${_0.lit(HT1)})`.execute($)}}});class YO{#$;constructor($){this.#$=$}createDriver(){return new Vs(this.#$)}createQueryCompiler(){return new Cs}createAdapter(){return new Is}createIntrospector($){return new Ps($)}}var UT1=x(()=>{Ns();Ms();Rs();Ts()});var QT1=()=>{};class js{#$;#F=new WeakMap;#A;constructor($){this.#$=P({...$})}async init(){this.#A=S6(this.#$.pool)?await this.#$.pool():this.#$.pool}async acquireConnection(){let $=await this.#A.connect(),F=this.#F.get($);if(!F){if(F=new BT1($,{cursor:this.#$.cursor??null}),this.#F.set($,F),this.#$.onCreateConnection)await this.#$.onCreateConnection(F)}if(this.#$.onReserveConnection)await this.#$.onReserveConnection(F);return F}async beginTransaction($,F){if(F.isolationLevel||F.accessMode){let A="start transaction";if(F.isolationLevel)A+=` isolation level ${F.isolationLevel}`;if(F.accessMode)A+=` ${F.accessMode}`;await $.executeQuery(e2.raw(A))}else await $.executeQuery(e2.raw("begin"))}async commitTransaction($){await $.executeQuery(e2.raw("commit"))}async rollbackTransaction($){await $.executeQuery(e2.raw("rollback"))}async savepoint($,F,A){await $.executeQuery(A(m5("savepoint",F),U0()))}async rollbackToSavepoint($,F,A){await $.executeQuery(A(m5("rollback to",F),U0()))}async releaseSavepoint($,F,A){await $.executeQuery(A(m5("release",F),U0()))}async releaseConnection($){$[KT1]()}async destroy(){if(this.#A){let $=this.#A;this.#A=void 0,await $.end()}}}var KT1,BT1;var Os=x(()=>{FO();vU();A1();u5();XO();KT1=Symbol();BT1=class BT1{#$;#F;constructor($,F){this.#$=$,this.#F=F}async executeQuery($){try{let{command:F,rowCount:A,rows:J}=await this.#$.query($.sql,[...$.parameters]);return{numAffectedRows:F==="INSERT"||F==="UPDATE"||F==="DELETE"||F==="MERGE"?BigInt(A):void 0,rows:J??[]}}catch(F){throw yU(F,Error())}}async*streamQuery($,F){if(!this.#F.cursor)throw Error("'cursor' is not present in your postgres dialect config. It's required to make streaming work in postgres.");if(!Number.isInteger(F)||F<=0)throw Error("chunkSize must be a positive integer");let A=this.#$.query(new this.#F.cursor($.sql,$.parameters.slice()));try{while(!0){let J=await A.read(F);if(J.length===0)break;yield{rows:J}}}finally{await A.close()}}[KT1](){this.#$.release()}}});var wT1=()=>{};class WO{#$;constructor($){this.#$=$}createDriver(){return new js(this.#$)}createQueryCompiler(){return new Ks}createAdapter(){return new Ls}createIntrospector($){return new ws($)}}var qT1=x(()=>{Os();qs();Bs();Es()});var Ss;var _s=x(()=>{gD();AW();Ss=class Ss extends rJ{get supportsCreateIfNotExists(){return!1}get supportsTransactionalDdl(){return!0}get supportsOutput(){return!0}async acquireMigrationLock($){await _0`exec sp_getapplock @DbPrincipal = ${_0.lit("dbo")}, @Resource = ${_0.lit(B3)}, @LockMode = ${_0.lit("Exclusive")}`.execute($)}async releaseMigrationLock(){}}});var LT1=()=>{};class ks{#$;#F;constructor($){this.#$=P({...$});let{tarn:F,tedious:A,validateConnections:J}=this.#$,{validateConnections:X,...Y}=F.options;this.#F=new F.Pool({...Y,create:async()=>{let W=await A.connectionFactory();return await new CT1(W,A).connect()},destroy:async(W)=>{await W[VT1]()},validate:J===!1||X===!1?void 0:(W)=>W[NT1]()})}async init(){}async acquireConnection(){return await this.#F.acquire().promise}async beginTransaction($,F){await $.beginTransaction(F)}async commitTransaction($){await $.commitTransaction()}async rollbackTransaction($){await $.rollbackTransaction()}async savepoint($,F){await $.savepoint(F)}async rollbackToSavepoint($,F){await $.rollbackTransaction(F)}async releaseConnection($){if(this.#$.resetConnectionsOnRelease||this.#$.tedious.resetConnectionOnRelease)await $[ET1]();this.#F.release($)}async destroy(){await this.#F.destroy()}}class ZO{#$;#F;#A;#J;#X;#Z;constructor($){let{compiledQuery:F,onDone:A,streamChunkSize:J,tedious:X}=$;if(this.#F=[],this.#A=J,this.#J={},this.#X=X,A)this.#J.onDone=(W,Z)=>{if(W==="chunkReady")return;if(delete this.#J.onDone,W==="error")return A.reject(Z);A.resolve({rowCount:this.#Z,rows:this.#F})};this.#$=new this.#X.Request(F.sql,(Y,W)=>{if(Y)return Object.values(this.#J).forEach((Z)=>Z("error",Y instanceof AggregateError?Y.errors:Y));this.#Z=W}),this.#W(F.parameters),this.#Y()}get request(){return this.#$}readChunk(){let $=this.readChunk.name;return new Promise((F,A)=>{this.#J[$]=(J,X)=>{if(delete this.#J[$],J==="error")return A(X);F(this.#F.splice(0,this.#A))},this.#$.resume()})}#W($){for(let F=0;F<$.length;F++){let A=$[F];this.#$.addParameter(String(F+1),this.#D(A),A)}}#Y(){let $=this.#A?()=>{if(this.#A<=this.#F.length)this.#$.pause(),Object.values(this.#J).forEach((A)=>A("chunkReady"))}:()=>{},F=(A)=>{let J={};for(let X of A)J[X.metadata.colName]=X.value;this.#F.push(J),$()};this.#$.on("row",F),this.#$.once("requestCompleted",()=>{Object.values(this.#J).forEach((A)=>A("completed")),this.#$.off("row",F)})}#D($){if(vY($)||U3($)||O6($))return this.#X.TYPES.NVarChar;if(yY($)||v$($)&&$%1===0)if($<-2147483648||$>2147483647)return this.#X.TYPES.BigInt;else return this.#X.TYPES.Int;if(v$($))return this.#X.TYPES.Float;if(xJ($))return this.#X.TYPES.Bit;if(eH($))return this.#X.TYPES.DateTime;if(lT($))return this.#X.TYPES.VarBinary;return this.#X.TYPES.NVarChar}}var ET1,VT1,NT1,CT1;var bs=x(()=>{A1();vU();XO();ua();ET1=Symbol(),VT1=Symbol(),NT1=Symbol();CT1=class CT1{#$;#F;#A;constructor($,F){this.#$=$,this.#F=!1,this.#A=F}async beginTransaction($){let{isolationLevel:F}=$;await new Promise((A,J)=>this.#$.beginTransaction((X)=>{if(X)J(X);else A(void 0)},F?Vj(8):void 0,F?this.#J(F):void 0))}async commitTransaction(){await new Promise(($,F)=>this.#$.commitTransaction((A)=>{if(A)F(A);else $(void 0)}))}async connect(){let{promise:$,reject:F,resolve:A}=new aY;this.#$.connect((X)=>{if(X)return F(X);A()}),this.#$.on("error",(X)=>{if(X instanceof Error&&"code"in X&&X.code==="ESOCKET")this.#F=!0;console.error(X),F(X)});function J(){F(Error("The connection ended without ever completing the connection"))}return this.#$.once("end",J),await $,this.#$.off("end",J),this}async executeQuery($){try{let F=new aY,A=new ZO({compiledQuery:$,tedious:this.#A,onDone:F});this.#$.execSql(A.request);let{rowCount:J,rows:X}=await F.promise;return{numAffectedRows:J!==void 0?BigInt(J):void 0,rows:X}}catch(F){throw yU(F,Error())}}async rollbackTransaction($){await new Promise((F,A)=>this.#$.rollbackTransaction((J)=>{if(J)A(J);else F(void 0)},$))}async savepoint($){await new Promise((F,A)=>this.#$.saveTransaction((J)=>{if(J)A(J);else F(void 0)},$))}async*streamQuery($,F){if(!Number.isInteger(F)||F<=0)throw Error("chunkSize must be a positive integer");let A=new ZO({compiledQuery:$,streamChunkSize:F,tedious:this.#A});this.#$.execSql(A.request);try{while(!0){let J=await A.readChunk();if(J.length===0)break;if(yield{rows:J},J.length<F)break}}finally{await this.#X(A)}}#J($){let{ISOLATION_LEVEL:F}=this.#A,J={"read committed":F.READ_COMMITTED,"read uncommitted":F.READ_UNCOMMITTED,"repeatable read":F.REPEATABLE_READ,serializable:F.SERIALIZABLE,snapshot:F.SNAPSHOT}[$];if(J===void 0)throw Error(`Unknown isolation level: ${$}`);return J}#X($){return new Promise((F)=>{if($.request.once("requestCompleted",F),!this.#$.cancel())$.request.off("requestCompleted",F),F()})}[VT1](){if("closed"in this.#$&&this.#$.closed)return Promise.resolve();return new Promise(($)=>{this.#$.once("end",$),this.#$.close()})}async[ET1](){await new Promise(($,F)=>{this.#$.reset((A)=>{if(A)return F(A);$()})})}async[NT1](){if(this.#F||this.#Z())return!1;try{let $=new aY,F=new ZO({compiledQuery:e2.raw("select 1"),onDone:$,tedious:this.#A});return this.#$.execSql(F.request),await $.promise,!0}catch{return!1}}#Z(){return"closed"in this.#$&&Boolean(this.#$.closed)}}});class xs{#$;constructor($){this.#$=$}async getSchemas(){return await this.#$.selectFrom("sys.schemas").select("name").execute()}async getTables($={withInternalKyselyTables:!1}){let F=await this.#$.selectFrom("sys.tables as tables").leftJoin("sys.schemas as table_schemas","table_schemas.schema_id","tables.schema_id").innerJoin("sys.columns as columns","columns.object_id","tables.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",(J)=>J.onRef("comments.major_id","=","tables.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).$if(!$.withInternalKyselyTables,(J)=>J.where("tables.name","!=",B3).where("tables.name","!=",e3)).select(["tables.name as table_name",(J)=>J.ref("tables.type").$castTo().as("table_type"),"table_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"]).unionAll(this.#$.selectFrom("sys.views as views").leftJoin("sys.schemas as view_schemas","view_schemas.schema_id","views.schema_id").innerJoin("sys.columns as columns","columns.object_id","views.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",(J)=>J.onRef("comments.major_id","=","views.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).select(["views.name as table_name","views.type as table_type","view_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"])).orderBy("table_schema_name").orderBy("table_name").orderBy("column_name").execute(),A={};for(let J of F){let X=`${J.table_schema_name}.${J.table_name}`;(A[X]=A[X]||P({columns:[],isView:J.table_type==="V ",name:J.table_name,schema:J.table_schema_name??void 0})).columns.push(P({dataType:J.type_name,dataTypeSchema:J.type_schema_name??void 0,hasDefaultValue:J.column_default_object_id>0||J.column_generated_always_type!=="NOT_APPLICABLE"||J.column_is_identity||J.column_is_computed||J.column_is_rowguidcol,isAutoIncrementing:J.column_is_identity,isNullable:J.column_is_nullable&&J.type_is_nullable,name:J.column_name,comment:J.column_comment??void 0}))}return Object.values(A)}async getMetadata($){return{tables:await this.getTables($)}}}var gs=x(()=>{gD();A1()});var mN0,fs;var vs=x(()=>{xD();mN0=/^[a-z0-9_]$/i;fs=class fs extends a7{getCurrentParameterPlaceholder(){return`@${this.numParameters}`}visitOffset($){super.visitOffset($),this.append(" rows")}compileColumnAlterations($){let F={};for(let J of $){if(!F[J.kind])F[J.kind]=[];F[J.kind].push(J)}let A=!0;if(F.AddColumnNode)this.append("add "),this.compileList(F.AddColumnNode),A=!1;if(F.AlterColumnNode){if(!A)this.append(", ");this.compileList(F.AlterColumnNode)}if(F.DropColumnNode){if(!A)this.append(", ");this.append("drop column "),this.compileList(F.DropColumnNode)}if(F.ModifyColumnNode){if(!A)this.append(", ");this.compileList(F.ModifyColumnNode)}if(F.RenameColumnNode){if(!A)this.append(", ");this.compileList(F.RenameColumnNode)}}visitAddColumn($){this.visitNode($.column)}visitDropColumn($){this.visitNode($.column)}visitMergeQuery($){super.visitMergeQuery($),this.append(";")}visitCollate($){this.append("collate ");let{name:F}=$.collation;for(let A of F)if(!mN0.test(A))throw Error(`Invalid collation: ${F}`);this.append(F)}announcesNewColumnDataType(){return!1}}});class ys{#$;constructor($){this.#$=$}createDriver(){return new ks(this.#$)}createQueryCompiler(){return new fs}createAdapter(){return new Ss}createIntrospector($){return new xs($)}}var MT1=x(()=>{_s();bs();gs();vs()});var PT1=()=>{};class dN0{#$;constructor($){this.#$=$}async getMigrations(){let $={},F=await this.#$.fs.readdir(this.#$.migrationFolder);for(let A of F)if(A.endsWith(".js")||A.endsWith(".ts")&&!A.endsWith(".d.ts")||A.endsWith(".mjs")||A.endsWith(".mts")&&!A.endsWith(".d.mts")){let J=await import(this.#$.path.join(this.#$.migrationFolder,A)),X=A.substring(0,A.lastIndexOf("."));if(RT1(J?.default))$[X]=J.default;else if(RT1(J))$[X]=J}return $}}function RT1($){return Y2($)&&S6($.up)}var IT1=x(()=>{A1()});var TT1=()=>{};var us;var jT1=x(()=>{TD();us=class us extends t${#$;constructor($){super();this.#$=$}transformIdentifier($,F){return $=super.transformIdentifier($,F),{...$,name:this.#$($.name)}}}});function ST1({upperCase:$=!1,underscoreBeforeDigits:F=!1,underscoreBetweenUppercaseLetters:A=!1}={}){return kT1((J)=>{if(J.length===0)return J;let X=J.toUpperCase(),Y=J.toLowerCase(),W=Y[0];for(let Z=1,D=J.length;Z<D;++Z){let G=J[Z],z=J[Z-1],H=X[Z],U=X[Z-1],Q=Y[Z],B=Y[Z-1];if(F&&OT1(G)&&!OT1(z)&&!W.endsWith("_")){W+="_"+G;continue}if(G===H&&H!==Q)if(A||!(z===U&&U!==B))W+="_"+Q;else W+=Q;else W+=G}if($)return W.toUpperCase();else return W})}function _T1({upperCase:$=!1}={}){return kT1((F)=>{if(F.length===0)return F;if($&&cN0(F))F=F.toLowerCase();let A=F[0];for(let J=1,X=F.length;J<X;++J){let Y=F[J],W=F[J-1];if(Y!=="_")if(W==="_")A+=Y.toUpperCase();else A+=Y}return A})}function cN0($){for(let F=1,A=$.length;F<A;++F){let J=$[F];if(J!=="_"&&J!==J.toUpperCase())return!1}return!0}function OT1($){return $>="0"&&$<="9"}function kT1($){let F=new Map;return(A)=>{let J=F.get(A);if(!J)J=$(A),F.set(A,J);return J}}class lN0{opt;#$;#F;#A;constructor($={}){this.opt=$,this.#$=_T1($),this.#F=ST1($),this.#A=new us(this.snakeCase.bind(this))}transformQuery($){return this.#A.transformNode($.node,$.queryId)}async transformResult($){if($.result.rows&&Array.isArray($.result.rows))return{...$.result,rows:$.result.rows.map((F)=>this.mapRow(F))};return $.result}mapRow($){return Object.keys($).reduce((F,A)=>{let J=$[A];if(Array.isArray(J))J=J.map((X)=>bT1(X,this.opt)?this.mapRow(X):X);else if(bT1(J,this.opt))J=this.mapRow(J);return F[this.camelCase(A)]=J,F},{})}snakeCase($){return this.#F($)}camelCase($){return this.#$($)}}function bT1($,F){return pT($)&&!F?.maintainNestedObjectKeys}var xT1=x(()=>{A1();jT1()});var hs;var gT1=x(()=>{TD();A1();hs=class hs extends t${transformSelectQuery($,F){return this.#$(super.transformSelectQuery($,F))}transformUpdateQuery($,F){return this.#$(super.transformUpdateQuery($,F))}transformDeleteQuery($,F){return this.#$(super.transformDeleteQuery($,F))}#$($){if(!$.joins||$.joins.length===0)return $;return P({...$,joins:this.#F($.joins)})}#F($){let F=[];for(let A=0;A<$.length;++A){let J=!1;for(let X=0;X<F.length;++X)if(iT($[A],F[X])){J=!0;break}if(!J)F.push($[A])}return P(F)}}});class pN0{#$=new hs;transformQuery($){return this.#$.transformNode($.node,$.queryId)}transformResult($){return Promise.resolve($.result)}}var fT1=x(()=>{gT1()});class iN0{opt;#$;constructor($={}){this.opt=$,this.#$=$.objectStrategy||"in-place"}transformQuery($){return $.node}async transformResult($){return{...$.result,rows:vT1($.result.rows,this.#$)}}}function vT1($,F){let A=F==="create"?Array($.length):$;for(let J=0;J<$.length;++J)A[J]=ms($[J],F);return A}function ms($,F){if(O6($))return nN0($);if(Array.isArray($))return vT1($,F);if(pT($))return aN0($,F);return $}function nN0($){if(rN0($))try{return ms(JSON.parse($),"in-place")}catch(F){}return $}function rN0($){return $.match(/^[\[\{]/)!=null}function aN0($,F){let A=F==="create"?{}:$;for(let J in $)A[J]=ms($[J],F);return A}var yT1=x(()=>{A1()});var ds;var uT1=x(()=>{TD();bL();vJ();cY();ds=class ds extends t${#$;constructor($){super();this.#$=$}transformBinaryOperation($){if(this.#F($))return this.#$($);return $}#F($){let{operator:F,rightOperand:A}=$;return(DU.is(A)||p$.is(A))&&A.values.length===0&&x8.is(F)&&(F.operator==="in"||F.operator==="not in")}}});class tN0{opt;#$;constructor($){this.opt=$,this.#$=new ds($.strategy)}transformQuery($){return this.#$.transformNode($.node,$.queryId)}async transformResult($){return $.result}}var hT1=x(()=>{uT1()});var mT1=x(()=>{OL();xj();bj();vJ();cY();i$();A1()});var dT1=()=>{};var cT1=()=>{};var lT1=()=>{};var pT1=()=>{};var iT1=()=>{};var nT1=()=>{};var rT1=()=>{};var uU=x(()=>{nY();YU();u5();cI1();Cj();eT();CU();lI1();pI1();iI1();nI1();rI1();aL();_a();qj();ba();RD();La();_j();ja();$t();kj();Yt();na();$a();Fs();AW();sI1();rt();VU();oI1();xD();vU();lt();bt();ht();ft();mt();_t();xt();kt();gt();vj();yj();Ot();yt();ct();ut();Pt();it();_L();gj();st();$T1();FT1();AT1();JT1();XT1();ZT1();DT1();Ys();Bs();qs();Es();UT1();QT1();Ns();Ms();Rs();Ts();Os();wT1();qT1();Zs();Hs();Qs();_s();LT1();MT1();bs();gs();vs();xD();PT1();gD();IT1();TT1();xT1();fT1();jD();yT1();hT1();mT1();Ut();uj();dj();Oj();u$();Mt();ED();hY();OL();tL();xj();AE();er();FE();g8();Ra();fa();Lj();dT1();nT();aT();$U();ij();UE();sj();bj();Ca();Et();uL();Kt();hj();IL();tT();sT();aj();lj();Ba();sa();YE();vL();ea();Lt();ta();za();Ua();W2();MD();AU();Wj();Xt();kL();Xj();lL();Hj();ma();mL();Ct();aa();wj();Ia();ar();n3();TD();Js();cT1();vJ();Sa();VD();Jj();gL();qa();Gj();GU();Ea();Da();ZE();bL();f5();g5();Fj();JE();wt();Tt();Ka();gJ();SL();rr();pY();Va();Pj();lT1();FU();Oa();Zt();Ft();WE();HU();Uj();cY();i$();Na();PD();hL();ya();pT1();$s();iT1();nT1();et();rT1()});var aT1={};l2(aT1,{BunSqliteDialect:()=>JC0});var sN0=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(){}async releaseMigrationLock(){}get supportsOutput(){return!0}},oN0=class{#$;#F=new $C0;#A;#J;constructor($){this.#$={...$}}async init(){if(this.#A=this.#$.database,this.#J=new eN0(this.#A),this.#$.onCreateConnection)await this.#$.onCreateConnection(this.#J)}async acquireConnection(){return await this.#F.lock(),this.#J}async beginTransaction($){await $.executeQuery(e2.raw("begin"))}async commitTransaction($){await $.executeQuery(e2.raw("commit"))}async rollbackTransaction($){await $.executeQuery(e2.raw("rollback"))}async releaseConnection(){this.#F.unlock()}async destroy(){this.#A?.close()}},eN0=class{#$;constructor($){this.#$=$}executeQuery($){let{sql:F,parameters:A}=$,J=this.#$.prepare(F);return Promise.resolve({rows:J.all(A)})}async*streamQuery(){throw Error("Streaming query is not supported by SQLite driver.")}},$C0=class{#$;#F;async lock(){while(this.#$)await this.#$;this.#$=new Promise(($)=>{this.#F=$})}unlock(){let $=this.#F;this.#$=void 0,this.#F=void 0,$?.()}},FC0=class{#$;constructor($){this.#$=$}async getSchemas(){return[]}async getTables($={withInternalKyselyTables:!1}){let F=this.#$.selectFrom("sqlite_schema").where("type","=","table").where("name","not like","sqlite_%").select("name").$castTo();if(!$.withInternalKyselyTables)F=F.where("name","!=",B3).where("name","!=",e3);let A=await F.execute();return Promise.all(A.map(({name:J})=>this.#F(J)))}async getMetadata($){return{tables:await this.getTables($)}}async#F($){let F=this.#$,A=(await F.selectFrom("sqlite_master").where("name","=",$).select("sql").$castTo().execute())[0]?.sql?.split(/[\(\),]/)?.find((J)=>J.toLowerCase().includes("autoincrement"))?.split(/\s+/)?.[0]?.replace(/["`]/g,"");return{name:$,columns:(await F.selectFrom(_0`pragma_table_info(${$})`.as("table_info")).select(["name","type","notnull","dflt_value"]).execute()).map((J)=>({name:J.name,dataType:J.type,isNullable:!J.notnull,isAutoIncrementing:J.name===A,hasDefaultValue:J.dflt_value!=null})),isView:!0}}},AC0,JC0=class{#$;constructor($){this.#$={...$}}createDriver(){return new oN0(this.#$)}createQueryCompiler(){return new AC0}createAdapter(){return new sN0}createIntrospector($){return new FC0($)}};var tT1=x(()=>{uU();AC0=class extends a7{getCurrentParameterPlaceholder(){return"?"}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}}});var sT1={};l2(sT1,{NodeSqliteDialect:()=>zC0});var XC0=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(){}async releaseMigrationLock(){}get supportsOutput(){return!0}},YC0=class{#$;#F=new ZC0;#A;#J;constructor($){this.#$={...$}}async init(){if(this.#A=this.#$.database,this.#J=new WC0(this.#A),this.#$.onCreateConnection)await this.#$.onCreateConnection(this.#J)}async acquireConnection(){return await this.#F.lock(),this.#J}async beginTransaction($){await $.executeQuery(e2.raw("begin"))}async commitTransaction($){await $.executeQuery(e2.raw("commit"))}async rollbackTransaction($){await $.executeQuery(e2.raw("rollback"))}async releaseConnection(){this.#F.unlock()}async destroy(){this.#A?.close()}},WC0=class{#$;constructor($){this.#$=$}executeQuery($){let{sql:F,parameters:A}=$,J=this.#$.prepare(F).all(...A);return Promise.resolve({rows:J})}async*streamQuery(){throw Error("Streaming query is not supported by SQLite driver.")}},ZC0=class{#$;#F;async lock(){while(this.#$)await this.#$;this.#$=new Promise(($)=>{this.#F=$})}unlock(){let $=this.#F;this.#$=void 0,this.#F=void 0,$?.()}},DC0=class{#$;constructor($){this.#$=$}async getSchemas(){return[]}async getTables($={withInternalKyselyTables:!1}){let F=this.#$.selectFrom("sqlite_schema").where("type","=","table").where("name","not like","sqlite_%").select("name").$castTo();if(!$.withInternalKyselyTables)F=F.where("name","!=",B3).where("name","!=",e3);let A=await F.execute();return Promise.all(A.map(({name:J})=>this.#F(J)))}async getMetadata($){return{tables:await this.getTables($)}}async#F($){let F=this.#$,A=(await F.selectFrom("sqlite_master").where("name","=",$).select("sql").$castTo().execute())[0]?.sql?.split(/[\(\),]/)?.find((J)=>J.toLowerCase().includes("autoincrement"))?.split(/\s+/)?.[0]?.replace(/["`]/g,"");return{name:$,columns:(await F.selectFrom(_0`pragma_table_info(${$})`.as("table_info")).select(["name","type","notnull","dflt_value"]).execute()).map((J)=>({name:J.name,dataType:J.type,isNullable:!J.notnull,isAutoIncrementing:J.name===A,hasDefaultValue:J.dflt_value!=null})),isView:!0}}},GC0,zC0=class{#$;constructor($){this.#$={...$}}createDriver(){return new YC0(this.#$)}createQueryCompiler(){return new GC0}createAdapter(){return new XC0}createIntrospector($){return new DC0($)}};var oT1=x(()=>{uU();GC0=class extends a7{getCurrentParameterPlaceholder(){return"?"}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}}});function hU($){if(!$)return null;if("dialect"in $)return hU($.dialect);if("createDriver"in $){if($ instanceof JO)return"sqlite";if($ instanceof YO)return"mysql";if($ instanceof WO)return"postgres";if($ instanceof ys)return"mssql"}if("aggregate"in $)return"sqlite";if("getConnection"in $)return"mysql";if("connect"in $)return"postgres";if("fileControl"in $)return"sqlite";if("open"in $&&"close"in $&&"prepare"in $)return"sqlite";return null}var DO=async($)=>{let F=$.database;if(!F)return{kysely:null,databaseType:null,transaction:void 0};if("db"in F)return{kysely:F.db,databaseType:F.type,transaction:F.transaction};if("dialect"in F)return{kysely:new LA({dialect:F.dialect}),databaseType:F.type,transaction:F.transaction};let A=void 0,J=hU(F);if("createDriver"in F)A=F;if("aggregate"in F&&!("createSession"in F))A=new JO({database:F});if("getConnection"in F)A=new YO(F);if("connect"in F)A=new WO({pool:F});if("fileControl"in F){let{BunSqliteDialect:X}=await Promise.resolve().then(() => (tT1(),aT1));A=new X({database:F})}if("createSession"in F&&typeof window>"u"){let X=void 0;try{({DatabaseSync:X}=await import("node:sqlite"))}catch(Y){if(Y!==null&&typeof Y==="object"&&"code"in Y&&Y.code!=="ERR_UNKNOWN_BUILTIN_MODULE")throw Y}if(X&&F instanceof X){let{NodeSqliteDialect:Y}=await Promise.resolve().then(() => (oT1(),sT1));A=new Y({database:F})}}return{kysely:A?new LA({dialect:A}):null,databaseType:J,transaction:void 0}};var GO=x(()=>{uU()});var eT1=($,F)=>{let A=null,J=(W)=>{return({getFieldName:Z,schema:D,getDefaultFieldName:G,getDefaultModelName:z,getFieldAttributes:H,getModelName:U})=>{let Q=(E)=>{let V=[],R=[];if(E)for(let[N,S]of Object.entries(E)){let C=D[z(N)]?.fields,[M,I]=N.includes(".")?N.split("."):[void 0,N];if(!C)continue;C.id={type:"string"};for(let[T,j]of Object.entries(C))V.push(_0`${_0.ref(`join_${I}`)}.${_0.ref(j.fieldName||T)} as ${_0.ref(`_joined_${I}_${j.fieldName||T}`)}`),R.push({joinModel:N,joinModelRef:I,fieldName:j.fieldName||T})}return{allSelectsStr:R,allSelects:V}},B=async(E,V,R,N)=>{let S;if(F?.type==="mysql"){await V.execute();let C=E.id?"id":N.length>0&&N[0]?.field?N[0].field:"id";if(!E.id&&N.length===0)return S=await W.selectFrom(R).selectAll().orderBy(Z({model:R,field:C}),"desc").limit(1).executeTakeFirst(),S;let M=E[C]||N[0]?.value;return S=await W.selectFrom(R).selectAll().orderBy(Z({model:R,field:C}),"desc").where(Z({model:R,field:C}),"=",M).limit(1).executeTakeFirst(),S}if(F?.type==="mssql")return S=await V.outputAll("inserted").executeTakeFirst(),S;return S=await V.returningAll().executeTakeFirst(),S};function q(E,V){if(!V)return{and:null,or:null};let R={and:[],or:[]};return V.forEach((N)=>{let{field:S,value:C,operator:M="=",connector:I="AND"}=N,T=C,j=Z({model:E,field:S}),b=(g)=>{let f=`${E}.${j}`;if(M.toLowerCase()==="in")return g(f,"in",Array.isArray(T)?T:[T]);if(M.toLowerCase()==="not_in")return g(f,"not in",Array.isArray(T)?T:[T]);if(M==="contains")return g(f,"like",`%${T}%`);if(M==="starts_with")return g(f,"like",`${T}%`);if(M==="ends_with")return g(f,"like",`%${T}`);if(M==="eq")return g(f,"=",T);if(M==="ne")return g(f,"<>",T);if(M==="gt")return g(f,">",T);if(M==="gte")return g(f,">=",T);if(M==="lt")return g(f,"<",T);if(M==="lte")return g(f,"<=",T);return g(f,M,T)};if(I==="OR")R.or.push(b);else R.and.push(b)}),{and:R.and.length?R.and:null,or:R.or.length?R.or:null}}function L(E,V,R){if(!V||!E.length)return E;let N=new Map;for(let C of E){let M={},I={};for(let[b]of Object.entries(V))I[U(b)]={};for(let[b,g]of Object.entries(C)){let f=String(b),d=!1;for(let{joinModel:s,fieldName:n,joinModelRef:L1}of R)if(f===`_joined_${L1}_${n}`){I[U(s)][Z({model:s,field:n})]=g,d=!0;break}if(!d)M[b]=g}let T=M.id;if(!T)continue;if(!N.has(T)){let b={...M};for(let[g,f]of Object.entries(V))b[U(g)]=f.relation==="one-to-one"?null:[];N.set(T,b)}let j=N.get(T);for(let[b,g]of Object.entries(V)){let f=g.relation==="one-to-one",d=g.limit??100,s=I[U(b)],n=s&&Object.keys(s).length>0&&Object.values(s).some((L1)=>L1!==null&&L1!==void 0);if(f)j[U(b)]=n?s:null;else{let L1=U(b);if(Array.isArray(j[L1])&&n){if(j[L1].length>=d)continue;let X1=Z({model:b,field:"id"}),M1=s[X1];if(M1){if(!j[L1].some((g1)=>g1[X1]===M1)&&j[L1].length<d)j[L1].push(s)}else if(j[L1].length<d)j[L1].push(s)}}}}let S=Array.from(N.values());for(let C of S)for(let[M,I]of Object.entries(V))if(I.relation!=="one-to-one"){let T=U(M);if(Array.isArray(C[T])){let j=I.limit??100;if(C[T].length>j)C[T]=C[T].slice(0,j)}}return S}return{async create({data:E,model:V}){return await B(E,W.insertInto(V).values(E),V,[])},async findOne({model:E,where:V,select:R,join:N}){let{and:S,or:C}=q(E,V),M=W.selectFrom((g)=>{let f=g.selectFrom(E);if(S)f=f.where((d)=>d.and(S.map((s)=>s(d))));if(C)f=f.where((d)=>d.or(C.map((s)=>s(d))));return f.selectAll().as("primary")}).selectAll("primary");if(N)for(let[g,f]of Object.entries(N)){let[d,s]=g.includes(".")?g.split("."):[void 0,g];M=M.leftJoin(`${g} as join_${s}`,(n)=>n.onRef(`join_${s}.${f.on.to}`,"=",`primary.${f.on.from}`))}let{allSelectsStr:I,allSelects:T}=Q(N);M=M.select(T);let j=await M.execute();if(!j||!Array.isArray(j)||j.length===0)return null;let b=j[0];if(N)return L(j,N,I)[0];return b},async findMany({model:E,where:V,limit:R,offset:N,sortBy:S,join:C}){let{and:M,or:I}=q(E,V),T=W.selectFrom((f)=>{let d=f.selectFrom(E);if(F?.type==="mssql"){if(N!==void 0){if(!S)d=d.orderBy(Z({model:E,field:"id"}));d=d.offset(N).fetch(R||100)}else if(R!==void 0)d=d.top(R)}else{if(R!==void 0)d=d.limit(R);if(N!==void 0)d=d.offset(N)}if(S?.field)d=d.orderBy(`${Z({model:E,field:S.field})}`,S.direction);if(M)d=d.where((s)=>s.and(M.map((n)=>n(s))));if(I)d=d.where((s)=>s.or(I.map((n)=>n(s))));return d.selectAll().as("primary")}).selectAll("primary");if(C)for(let[f,d]of Object.entries(C)){let[s,n]=f.includes(".")?f.split("."):[void 0,f];T=T.leftJoin(`${f} as join_${n}`,(L1)=>L1.onRef(`join_${n}.${d.on.to}`,"=",`primary.${d.on.from}`))}let{allSelectsStr:j,allSelects:b}=Q(C);if(T=T.select(b),S?.field)T=T.orderBy(`${Z({model:E,field:S.field})}`,S.direction);let g=await T.execute();if(!g)return[];if(C)return L(g,C,j);return g},async update({model:E,where:V,update:R}){let{and:N,or:S}=q(E,V),C=W.updateTable(E).set(R);if(N)C=C.where((M)=>M.and(N.map((I)=>I(M))));if(S)C=C.where((M)=>M.or(S.map((I)=>I(M))));return await B(R,C,E,V)},async updateMany({model:E,where:V,update:R}){let{and:N,or:S}=q(E,V),C=W.updateTable(E).set(R);if(N)C=C.where((I)=>I.and(N.map((T)=>T(I))));if(S)C=C.where((I)=>I.or(S.map((T)=>T(I))));let M=(await C.executeTakeFirst()).numUpdatedRows;return M>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Number(M)},async count({model:E,where:V}){let{and:R,or:N}=q(E,V),S=W.selectFrom(E).select(W.fn.count("id").as("count"));if(R)S=S.where((M)=>M.and(R.map((I)=>I(M))));if(N)S=S.where((M)=>M.or(N.map((I)=>I(M))));let C=await S.execute();if(typeof C[0].count==="number")return C[0].count;if(typeof C[0].count==="bigint")return Number(C[0].count);return parseInt(C[0].count)},async delete({model:E,where:V}){let{and:R,or:N}=q(E,V),S=W.deleteFrom(E);if(R)S=S.where((C)=>C.and(R.map((M)=>M(C))));if(N)S=S.where((C)=>C.or(N.map((M)=>M(C))));await S.execute()},async deleteMany({model:E,where:V}){let{and:R,or:N}=q(E,V),S=W.deleteFrom(E);if(R)S=S.where((M)=>M.and(R.map((I)=>I(M))));if(N)S=S.where((M)=>M.or(N.map((I)=>I(M))));let C=(await S.executeTakeFirst()).numDeletedRows;return C>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Number(C)},options:F}}},X=null;X={config:{adapterId:"kysely",adapterName:"Kysely Adapter",usePlural:F?.usePlural,debugLogs:F?.debugLogs,supportsBooleans:F?.type==="sqlite"||F?.type==="mssql"||F?.type==="mysql"||!F?.type?!1:!0,supportsDates:F?.type==="sqlite"||F?.type==="mssql"||!F?.type?!1:!0,supportsJSON:F?.type==="postgres"?!0:!1,supportsArrays:!1,supportsUUIDs:F?.type==="postgres"?!0:!1,transaction:F?.transaction?(W)=>$.transaction().execute((Z)=>{return W(bJ({config:X.config,adapter:J(Z)})(A))}):!1},adapter:J($)};let Y=bJ(X);return(W)=>{return A=W,Y(W)}};var $j1=x(()=>{uU();PL()});var cs={};l2(cs,{kyselyAdapter:()=>eT1,getKyselyDatabaseType:()=>hU,createKyselyAdapter:()=>DO});var ls=x(()=>{GO();$j1()});var s6,eD;var uE=x(()=>{s6=class s6 extends Error{constructor(){super("End-Of-Stream");this.name="EndOfStreamError"}};eD=class eD extends Error{constructor($="The operation was aborted"){super($);this.name="AbortError"}}});class Re{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise(($,F)=>{this.reject=F,this.resolve=$})}}class $G{constructor(){this.endOfStream=!1,this.interrupted=!1,this.peekQueue=[]}async peek($,F=!1){let A=await this.read($,F);return this.peekQueue.push($.subarray(0,A)),A}async read($,F=!1){if($.length===0)return 0;let A=this.readFromPeekBuffer($);if(!this.endOfStream)A+=await this.readRemainderFromStream($.subarray(A),F);if(A===0&&!F)throw new s6;return A}readFromPeekBuffer($){let F=$.length,A=0;while(this.peekQueue.length>0&&F>0){let J=this.peekQueue.pop();if(!J)throw Error("peekData should be defined");let X=Math.min(J.length,F);if($.set(J.subarray(0,X),A),A+=X,F-=X,X<J.length)this.peekQueue.push(J.subarray(X))}return A}async readRemainderFromStream($,F){let A=0;while(A<$.length&&!this.endOfStream){if(this.interrupted)throw new eD;let J=await this.readFromStream($.subarray(A),F);if(J===0)break;A+=J}if(!F&&A<$.length)throw new s6;return A}}var zS=x(()=>{uE()});var HS;var Nk1=x(()=>{uE();zS();HS=class HS extends $G{constructor($){super();if(this.s=$,this.deferred=null,!$.read||!$.once)throw Error("Expected an instance of stream.Readable");this.s.once("end",()=>{if(this.endOfStream=!0,this.deferred)this.deferred.resolve(0)}),this.s.once("error",(F)=>this.reject(F)),this.s.once("close",()=>this.abort())}async readFromStream($,F){if($.length===0)return 0;let A=this.s.read($.length);if(A)return $.set(A),A.length;let J={buffer:$,mayBeLess:F,deferred:new Re};return this.deferred=J.deferred,this.s.once("readable",()=>{this.readDeferred(J)}),J.deferred.promise}readDeferred($){let F=this.s.read($.buffer.length);if(F)$.buffer.set(F),$.deferred.resolve(F.length),this.deferred=null;else this.s.once("readable",()=>{this.readDeferred($)})}reject($){if(this.interrupted=!0,this.deferred)this.deferred.reject($),this.deferred=null}async abort(){this.reject(new eD)}async close(){return this.abort()}}});var Ie;var Ck1=x(()=>{zS();Ie=class Ie extends $G{constructor($){super();this.reader=$}async abort(){return this.close()}async close(){this.reader.releaseLock()}}});var US;var Te=x(()=>{Ck1();US=class US extends Ie{async readFromStream($,F){if($.length===0)return 0;let A=await this.reader.read(new Uint8Array($.length),{min:F?void 0:$.length});if(A.done)this.endOfStream=A.done;if(A.value)return $.set(A.value),A.value.length;return 0}}});var hE;var je=x(()=>{uE();zS();hE=class hE extends $G{constructor($){super();this.reader=$,this.buffer=null}writeChunk($,F){let A=Math.min(F.length,$.length);if($.set(F.subarray(0,A)),A<F.length)this.buffer=F.subarray(A);else this.buffer=null;return A}async readFromStream($,F){if($.length===0)return 0;let A=0;if(this.buffer)A+=this.writeChunk($,this.buffer);while(A<$.length&&!this.endOfStream){let J=await this.reader.read();if(J.done){this.endOfStream=!0;break}if(J.value)A+=this.writeChunk($.subarray(A),J.value)}if(!F&&A===0&&this.endOfStream)throw new s6;return A}abort(){return this.interrupted=!0,this.reader.cancel()}async close(){await this.abort(),this.reader.releaseLock()}}});function Oe($){try{let F=$.getReader({mode:"byob"});if(F instanceof ReadableStreamDefaultReader)return new hE(F);return new US(F)}catch(F){if(F instanceof TypeError)return new hE($.getReader());throw F}}var Mk1=x(()=>{Te();je()});var wW=x(()=>{uE();Nk1();Te();je();Mk1()});class MA{constructor($){if(this.numBuffer=new Uint8Array(8),this.position=0,this.onClose=$?.onClose,$?.abortSignal)$.abortSignal.addEventListener("abort",()=>{this.abort()})}async readToken($,F=this.position){let A=new Uint8Array($.len);if(await this.readBuffer(A,{position:F})<$.len)throw new s6;return $.get(A,0)}async peekToken($,F=this.position){let A=new Uint8Array($.len);if(await this.peekBuffer(A,{position:F})<$.len)throw new s6;return $.get(A,0)}async readNumber($){if(await this.readBuffer(this.numBuffer,{length:$.len})<$.len)throw new s6;return $.get(this.numBuffer,0)}async peekNumber($){if(await this.peekBuffer(this.numBuffer,{length:$.len})<$.len)throw new s6;return $.get(this.numBuffer,0)}async ignore($){if(this.fileInfo.size!==void 0){let F=this.fileInfo.size-this.position;if($>F)return this.position+=F,F}return this.position+=$,$}async close(){await this.abort(),await this.onClose?.()}normalizeOptions($,F){if(!this.supportsRandomAccess()&&F&&F.position!==void 0&&F.position<this.position)throw Error("`options.position` must be equal or greater than `tokenizer.position`");return{...{mayBeLess:!1,offset:0,length:$.length,position:this.position},...F}}abort(){return Promise.resolve()}}var BQ=x(()=>{wW()});var lk0=256000,QS;var Pk1=x(()=>{BQ();wW();QS=class QS extends MA{constructor($,F){super(F);this.streamReader=$,this.fileInfo=F?.fileInfo??{}}async readBuffer($,F){let A=this.normalizeOptions($,F),J=A.position-this.position;if(J>0)return await this.ignore(J),this.readBuffer($,F);if(J<0)throw Error("`options.position` must be equal or greater than `tokenizer.position`");if(A.length===0)return 0;let X=await this.streamReader.read($.subarray(0,A.length),A.mayBeLess);if(this.position+=X,(!F||!F.mayBeLess)&&X<A.length)throw new s6;return X}async peekBuffer($,F){let A=this.normalizeOptions($,F),J=0;if(A.position){let X=A.position-this.position;if(X>0){let Y=new Uint8Array(A.length+X);return J=await this.peekBuffer(Y,{mayBeLess:A.mayBeLess}),$.set(Y.subarray(X)),J-X}if(X<0)throw Error("Cannot peek from a negative offset in a stream")}if(A.length>0){try{J=await this.streamReader.peek($.subarray(0,A.length),A.mayBeLess)}catch(X){if(F?.mayBeLess&&X instanceof s6)return 0;throw X}if(!A.mayBeLess&&J<A.length)throw new s6}return J}async ignore($){let F=Math.min(lk0,$),A=new Uint8Array(F),J=0;while(J<$){let X=$-J,Y=await this.readBuffer(A,{length:Math.min(F,X)});if(Y<0)return Y;J+=Y}return J}abort(){return this.streamReader.abort()}async close(){return this.streamReader.close()}supportsRandomAccess(){return!1}}});var Se;var Rk1=x(()=>{wW();BQ();Se=class Se extends MA{constructor($,F){super(F);this.uint8Array=$,this.fileInfo={...F?.fileInfo??{},...{size:$.length}}}async readBuffer($,F){if(F?.position)this.position=F.position;let A=await this.peekBuffer($,F);return this.position+=A,A}async peekBuffer($,F){let A=this.normalizeOptions($,F),J=Math.min(this.uint8Array.length-A.position,A.length);if(!A.mayBeLess&&J<A.length)throw new s6;return $.set(this.uint8Array.subarray(A.position,A.position+J)),J}close(){return super.close()}supportsRandomAccess(){return!0}setPosition($){this.position=$}}});var _e;var Ik1=x(()=>{wW();BQ();_e=class _e extends MA{constructor($,F){super(F);this.blob=$,this.fileInfo={...F?.fileInfo??{},...{size:$.size,mimeType:$.type}}}async readBuffer($,F){if(F?.position)this.position=F.position;let A=await this.peekBuffer($,F);return this.position+=A,A}async peekBuffer($,F){let A=this.normalizeOptions($,F),J=Math.min(this.blob.size-A.position,A.length);if(!A.mayBeLess&&J<A.length)throw new s6;let X=await this.blob.slice(A.position,A.position+J).arrayBuffer();return $.set(new Uint8Array(X)),J}close(){return super.close()}supportsRandomAccess(){return!0}setPosition($){this.position=$}}});function Tk1($,F){let A=new HS($),J=F??{},X=J.onClose;return J.onClose=async()=>{if(await A.close(),X)return X()},new QS(A,J)}function KS($,F){let A=Oe($),J=F??{},X=J.onClose;return J.onClose=async()=>{if(await A.close(),X)return X()},new QS(A,J)}function jk1($,F){return new Se($,F)}function Ok1($,F){return new _e($,F)}var BS=x(()=>{wW();Pk1();Rk1();Ik1();wW();BQ()});import{open as ik0}from"fs/promises";var mE;var ke=x(()=>{BQ();wW();mE=class mE extends MA{static async fromFile($){let F=await ik0($,"r"),A=await F.stat();return new mE(F,{fileInfo:{path:$,size:A.size}})}constructor($,F){super(F);this.fileHandle=$,this.fileInfo=F.fileInfo}async readBuffer($,F){let A=this.normalizeOptions($,F);if(this.position=A.position,A.length===0)return 0;let J=await this.fileHandle.read($,0,A.length,A.position);if(this.position+=J.bytesRead,J.bytesRead<A.length&&(!F||!F.mayBeLess))throw new s6;return J.bytesRead}async peekBuffer($,F){let A=this.normalizeOptions($,F),J=await this.fileHandle.read($,0,A.length,A.position);if(!A.mayBeLess&&J.bytesRead<A.length)throw new s6;return J.bytesRead}async close(){return await this.fileHandle.close(),super.close()}setPosition($){this.position=$}supportsRandomAccess(){return!0}}});import{stat as nk0}from"fs/promises";async function Sk1($,F){let A=Tk1($,F);if($.path){let J=await nk0($.path);A.fileInfo.path=$.path,A.fileInfo.size=J.size}return A}var _k1;var kk1=x(()=>{BS();ke();ke();BS();_k1=mE.fromFile});var bk1=x(()=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */});function sk0(){if(typeof globalThis.TextDecoder>"u")return;return wS!==null&&wS!==void 0?wS:wS=new globalThis.TextDecoder("utf-8")}function gk1($,F="utf-8"){switch(F.toLowerCase()){case"utf-8":case"utf8":{let A=sk0();return A?A.decode($):ok0($)}case"utf-16le":return ek0($);case"us-ascii":case"ascii":return $b0($);case"latin1":case"iso-8859-1":return Fb0($);case"windows-1252":return Ab0($);default:throw RangeError(`Encoding '${F}' not supported`)}}function ok0($){let F=[],A="",J=0;while(J<$.length){let X=$[J++];if(X<128)A+=String.fromCharCode(X);else if(X<224){let Y=$[J++]&63;A+=String.fromCharCode((X&31)<<6|Y)}else if(X<240){let Y=$[J++]&63,W=$[J++]&63;A+=String.fromCharCode((X&15)<<12|Y<<6|W)}else{let Y=$[J++]&63,W=$[J++]&63,Z=$[J++]&63,D=(X&7)<<18|Y<<12|W<<6|Z;D-=65536,A+=String.fromCharCode(55296+(D>>10&1023),56320+(D&1023))}if(A.length>=FG)F.push(A),A=""}if(A)F.push(A);return F.join("")}function ek0($){let F=$.length&-2;if(F===0)return"";let A=[],J=FG;for(let X=0;X<F;){let Y=Math.min(J,F-X>>1),W=Array(Y);for(let Z=0;Z<Y;Z++,X+=2)W[Z]=$[X]|$[X+1]<<8;A.push(String.fromCharCode.apply(null,W))}return A.join("")}function $b0($){let F=[];for(let A=0;A<$.length;A+=FG){let J=Math.min($.length,A+FG),X=Array(J-A);for(let Y=A,W=0;Y<J;Y++,W++)X[W]=$[Y]&127;F.push(String.fromCharCode.apply(null,X))}return F.join("")}function Fb0($){let F=[];for(let A=0;A<$.length;A+=FG){let J=Math.min($.length,A+FG),X=Array(J-A);for(let Y=A,W=0;Y<J;Y++,W++)X[W]=$[Y];F.push(String.fromCharCode.apply(null,X))}return F.join("")}function Ab0($){let F=[],A="";for(let J=0;J<$.length;J++){let X=$[J],Y=X>=128&&X<=159?xk1[X]:void 0;if(A+=Y!==null&&Y!==void 0?Y:String.fromCharCode(X),A.length>=FG)F.push(A),A=""}if(A)F.push(A);return F.join("")}var xk1,tk0,wS,FG=32768;var fk1=x(()=>{xk1={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},tk0={};for(let[$,F]of Object.entries(xk1))tk0[F]=Number.parseInt($,10)});function W7($){return new DataView($.buffer,$.byteOffset)}class Y5{constructor($,F){this.len=$,this.encoding=F}get($,F=0){let A=$.subarray(F,F+this.len);return gk1(A,this.encoding)}}var vk1,U4,AG,p4,be,yk1,uk1;var dE=x(()=>{bk1();fk1();vk1={len:1,get($,F){return W7($).getUint8(F)},put($,F,A){return W7($).setUint8(F,A),F+1}},U4={len:2,get($,F){return W7($).getUint16(F,!0)},put($,F,A){return W7($).setUint16(F,A,!0),F+2}},AG={len:2,get($,F){return W7($).getUint16(F)},put($,F,A){return W7($).setUint16(F,A),F+2}},p4={len:4,get($,F){return W7($).getUint32(F,!0)},put($,F,A){return W7($).setUint32(F,A,!0),F+4}},be={len:4,get($,F){return W7($).getUint32(F)},put($,F,A){return W7($).setUint32(F,A),F+4}},yk1={len:4,get($,F){return W7($).getInt32(F)},put($,F,A){return W7($).setInt32(F,A),F+4}},uk1={len:8,get($,F){return W7($).getBigUint64(F,!0)},put($,F,A){return W7($).setBigUint64(F,A,!0),F+8}}});var JG,xe,hk1,mk1,dk1;var ck1=x(()=>{dE();JG={LocalFileHeader:67324752,DataDescriptor:134695760,CentralFileHeader:33639248,EndOfCentralDirectory:101010256},xe={get($){return{signature:p4.get($,0),compressedSize:p4.get($,8),uncompressedSize:p4.get($,12)}},len:16},hk1={get($){let F=U4.get($,6);return{signature:p4.get($,0),minVersion:U4.get($,4),dataDescriptor:!!(F&8),compressedMethod:U4.get($,8),compressedSize:p4.get($,18),uncompressedSize:p4.get($,22),filenameLength:U4.get($,26),extraFieldLength:U4.get($,28),filename:null}},len:30},mk1={get($){return{signature:p4.get($,0),nrOfThisDisk:U4.get($,4),nrOfThisDiskWithTheStart:U4.get($,6),nrOfEntriesOnThisDisk:U4.get($,8),nrOfEntriesOfSize:U4.get($,10),sizeOfCd:p4.get($,12),offsetOfStartOfCd:p4.get($,16),zipFileCommentLength:U4.get($,20)}},len:22},dk1={get($){let F=U4.get($,8);return{signature:p4.get($,0),minVersion:U4.get($,6),dataDescriptor:!!(F&8),compressedMethod:U4.get($,10),compressedSize:p4.get($,20),uncompressedSize:p4.get($,24),filenameLength:U4.get($,28),extraFieldLength:U4.get($,30),fileCommentLength:U4.get($,32),relativeOffsetOfLocalHeader:p4.get($,42),filename:null}},len:46}});function pk1($){let F=new Uint8Array(p4.len);return p4.put(F,0,$),F}class cE{constructor($){this.tokenizer=$,this.syncBuffer=new Uint8Array(ge)}async isZip(){return await this.peekSignature()===JG.LocalFileHeader}peekSignature(){return this.tokenizer.peekToken(p4)}async findEndOfCentralDirectoryLocator(){let $=this.tokenizer,F=Math.min(16384,$.fileInfo.size),A=this.syncBuffer.subarray(0,F);await this.tokenizer.readBuffer(A,{position:$.fileInfo.size-F});for(let J=A.length-4;J>=0;J--)if(A[J]===qS[0]&&A[J+1]===qS[1]&&A[J+2]===qS[2]&&A[J+3]===qS[3])return $.fileInfo.size-F+J;return-1}async readCentralDirectory(){if(!this.tokenizer.supportsRandomAccess()){PA("Cannot reading central-directory without random-read support");return}PA("Reading central-directory...");let $=this.tokenizer.position,F=await this.findEndOfCentralDirectoryLocator();if(F>0){PA("Central-directory 32-bit signature found");let A=await this.tokenizer.readToken(mk1,F),J=[];this.tokenizer.setPosition(A.offsetOfStartOfCd);for(let X=0;X<A.nrOfEntriesOfSize;++X){let Y=await this.tokenizer.readToken(dk1);if(Y.signature!==JG.CentralFileHeader)throw Error("Expected Central-File-Header signature");Y.filename=await this.tokenizer.readToken(new Y5(Y.filenameLength,"utf-8")),await this.tokenizer.ignore(Y.extraFieldLength),await this.tokenizer.ignore(Y.fileCommentLength),J.push(Y),PA(`Add central-directory file-entry: n=${X+1}/${J.length}: filename=${J[X].filename}`)}return this.tokenizer.setPosition($),J}this.tokenizer.setPosition($)}async unzip($){let F=await this.readCentralDirectory();if(F)return this.iterateOverCentralDirectory(F,$);let A=!1;do{let J=await this.readLocalFileHeader();if(!J)break;let X=$(J);A=!!X.stop;let Y;if(await this.tokenizer.ignore(J.extraFieldLength),J.dataDescriptor&&J.compressedSize===0){let W=[],Z=ge;PA("Compressed-file-size unknown, scanning for next data-descriptor-signature....");let D=-1;while(D<0&&Z===ge){Z=await this.tokenizer.peekBuffer(this.syncBuffer,{mayBeLess:!0}),D=Yb0(this.syncBuffer.subarray(0,Z),Xb0);let G=D>=0?D:Z;if(X.handler){let z=new Uint8Array(G);await this.tokenizer.readBuffer(z),W.push(z)}else await this.tokenizer.ignore(G)}if(PA(`Found data-descriptor-signature at pos=${this.tokenizer.position}`),X.handler)await this.inflate(J,Wb0(W),X.handler)}else if(X.handler)PA(`Reading compressed-file-data: ${J.compressedSize} bytes`),Y=new Uint8Array(J.compressedSize),await this.tokenizer.readBuffer(Y),await this.inflate(J,Y,X.handler);else PA(`Ignoring compressed-file-data: ${J.compressedSize} bytes`),await this.tokenizer.ignore(J.compressedSize);if(PA(`Reading data-descriptor at pos=${this.tokenizer.position}`),J.dataDescriptor){if((await this.tokenizer.readToken(xe)).signature!==134695760)throw Error(`Expected data-descriptor-signature at position ${this.tokenizer.position-xe.len}`)}}while(!A)}async iterateOverCentralDirectory($,F){for(let A of $){let J=F(A);if(J.handler){this.tokenizer.setPosition(A.relativeOffsetOfLocalHeader);let X=await this.readLocalFileHeader();if(X){await this.tokenizer.ignore(X.extraFieldLength);let Y=new Uint8Array(A.compressedSize);await this.tokenizer.readBuffer(Y),await this.inflate(X,Y,J.handler)}}if(J.stop)break}}async inflate($,F,A){if($.compressedMethod===0)return A(F);if($.compressedMethod!==8)throw Error(`Unsupported ZIP compression method: ${$.compressedMethod}`);PA(`Decompress filename=${$.filename}, compressed-size=${F.length}`);let J=await cE.decompressDeflateRaw(F);return A(J)}static async decompressDeflateRaw($){let F=new ReadableStream({start(X){X.enqueue($),X.close()}}),A=new DecompressionStream("deflate-raw"),J=F.pipeThrough(A);try{let Y=await new Response(J).arrayBuffer();return new Uint8Array(Y)}catch(X){let Y=X instanceof Error?`Failed to deflate ZIP entry: ${X.message}`:"Unknown decompression error in ZIP entry";throw TypeError(Y)}}async readLocalFileHeader(){let $=await this.tokenizer.peekToken(p4);if($===JG.LocalFileHeader){let F=await this.tokenizer.readToken(hk1);return F.filename=await this.tokenizer.readToken(new Y5(F.filenameLength,"utf-8")),F}if($===JG.CentralFileHeader)return!1;if($===3759263696)throw Error("Encrypted ZIP");throw Error("Unexpected signature")}}function Yb0($,F){let A=$.length,J=F.length;if(J>A)return-1;for(let X=0;X<=A-J;X++){let Y=!0;for(let W=0;W<J;W++)if($[X+W]!==F[W]){Y=!1;break}if(Y)return X}return-1}function Wb0($){let F=$.reduce((X,Y)=>X+Y.length,0),A=new Uint8Array(F),J=0;for(let X of $)A.set(X,J),J+=X.length;return A}var lk1,PA,ge=262144,Xb0,qS;var ik1=x(()=>{dE();ck1();lk1=l8(SN(),1);PA=lk1.default("tokenizer:inflate"),Xb0=pk1(JG.DataDescriptor),qS=pk1(JG.EndOfCentralDirectory)});class LS{constructor($){this.tokenizer=$}inflate(){let $=this.tokenizer;return new ReadableStream({async pull(F){let A=new Uint8Array(1024),J=await $.readBuffer(A,{mayBeLess:!0});if(J===0){F.close();return}F.enqueue(A.subarray(0,J))}}).pipeThrough(new DecompressionStream("gzip"))}}var nk1=x(()=>{ik1()});function fe($){let{byteLength:F}=$;if(F===6)return $.getUint16(0)*4294967296+$.getUint32(2);if(F===5)return $.getUint8(0)*4294967296+$.getUint32(1);if(F===4)return $.getUint32(0);if(F===3)return $.getUint8(0)*65536+$.getUint16(1);if(F===2)return $.getUint16(0);if(F===1)return $.getUint8(0)}var $12,F12,A12;var rk1=x(()=>{$12={utf8:new globalThis.TextDecoder("utf8")},F12=new globalThis.TextEncoder,A12=Array.from({length:256},($,F)=>F.toString(16).padStart(2,"0"))});function ak1($,F){if(F==="utf-16le"){let A=[];for(let J=0;J<$.length;J++){let X=$.charCodeAt(J);A.push(X&255,X>>8&255)}return A}if(F==="utf-16be"){let A=[];for(let J=0;J<$.length;J++){let X=$.charCodeAt(J);A.push(X>>8&255,X&255)}return A}return[...$].map((A)=>A.charCodeAt(0))}function tk1($,F=0){let A=Number.parseInt(new Y5(6).get($,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(A))return!1;let J=256;for(let X=F;X<F+148;X++)J+=$[X];for(let X=F+156;X<F+512;X++)J+=$[X];return A===J}var sk1;var ok1=x(()=>{dE();sk1={get:($,F)=>$[F+3]&127|$[F+2]<<7|$[F+1]<<14|$[F]<<21,len:4}});var ek1,$b1;var Fb1=x(()=>{ek1=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ttc","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx","vtt","apk","drc","lz4","potx","xltx","dotx","xltm","ott","ots","otp","odg","otg","xlsm","docm","dotm","potm","pptm","jar","jmp","rm","sav","ppsm","ppsx","tar.gz","reg","dat"],$b1=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/vnd.apache.arrow.file","video/mp4","audio/midi","video/matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","video/ogg","audio/ogg","audio/ogg; codecs=opus","application/ogg","audio/flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","font/collection","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","text/vtt","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/vnd.apache.parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio","application/vnd.android.package-archive","application/vnd.google.draco","application/x-lz4","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-excel.template.macroenabled.12","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.presentation-template","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.graphics-template","application/vnd.ms-excel.sheet.macroenabled.12","application/vnd.ms-word.document.macroenabled.12","application/vnd.ms-word.template.macroenabled.12","application/vnd.ms-powerpoint.template.macroenabled.12","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/java-archive","application/vnd.rn-realmedia","application/x-spss-sav","application/x-ms-regedit","application/x-ft-windows-registry-hive","application/x-jmp-data"]});async function Ab1($,F){return new wQ(F).fromBuffer($)}async function Jb1($,F){return new wQ(F).fromBlob($)}function ve($){switch($=$.toLowerCase(),$){case"application/epub+zip":return{ext:"epub",mime:$};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:$};case"application/vnd.oasis.opendocument.text-template":return{ext:"ott",mime:$};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:$};case"application/vnd.oasis.opendocument.spreadsheet-template":return{ext:"ots",mime:$};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:$};case"application/vnd.oasis.opendocument.presentation-template":return{ext:"otp",mime:$};case"application/vnd.oasis.opendocument.graphics":return{ext:"odg",mime:$};case"application/vnd.oasis.opendocument.graphics-template":return{ext:"otg",mime:$};case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":return{ext:"ppsx",mime:$};case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return{ext:"xlsx",mime:$};case"application/vnd.ms-excel.sheet.macroenabled":return{ext:"xlsm",mime:"application/vnd.ms-excel.sheet.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":return{ext:"xltx",mime:$};case"application/vnd.ms-excel.template.macroenabled":return{ext:"xltm",mime:"application/vnd.ms-excel.template.macroenabled.12"};case"application/vnd.ms-powerpoint.slideshow.macroenabled":return{ext:"ppsm",mime:"application/vnd.ms-powerpoint.slideshow.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return{ext:"docx",mime:$};case"application/vnd.ms-word.document.macroenabled":return{ext:"docm",mime:"application/vnd.ms-word.document.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":return{ext:"dotx",mime:$};case"application/vnd.ms-word.template.macroenabledtemplate":return{ext:"dotm",mime:"application/vnd.ms-word.template.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.presentationml.template":return{ext:"potx",mime:$};case"application/vnd.ms-powerpoint.template.macroenabled":return{ext:"potm",mime:"application/vnd.ms-powerpoint.template.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return{ext:"pptx",mime:$};case"application/vnd.ms-powerpoint.presentation.macroenabled":return{ext:"pptm",mime:"application/vnd.ms-powerpoint.presentation.macroenabled.12"};case"application/vnd.ms-visio.drawing":return{ext:"vsdx",mime:"application/vnd.visio"};case"application/vnd.ms-package.3dmanufacturing-3dmodel+xml":return{ext:"3mf",mime:"model/3mf"};default:}}function RA($,F,A){A={offset:0,...A};for(let[J,X]of F.entries())if(A.mask){if(X!==(A.mask[J]&$[J+A.offset]))return!1}else if(X!==$[J+A.offset])return!1;return!0}async function Xb1($,F){return new wQ(F).fromTokenizer($)}class wQ{constructor($){this.options={mpegOffsetTolerance:0,...$},this.detectors=[...$?.customDetectors??[],{id:"core",detect:this.detectConfident},{id:"core.imprecise",detect:this.detectImprecise}],this.tokenizerOptions={abortSignal:$?.signal}}async fromTokenizer($){let F=$.position;for(let A of this.detectors){let J=await A.detect($);if(J)return J;if(F!==$.position)return}}async fromBuffer($){if(!($ instanceof Uint8Array||$ instanceof ArrayBuffer))throw TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof $}\``);let F=$ instanceof Uint8Array?$:new Uint8Array($);if(!(F?.length>1))return;return this.fromTokenizer(jk1(F,this.tokenizerOptions))}async fromBlob($){let F=Ok1($,this.tokenizerOptions);try{return await this.fromTokenizer(F)}finally{await F.close()}}async fromStream($){let F=KS($,this.tokenizerOptions);try{return await this.fromTokenizer(F)}finally{await F.close()}}async toDetectionStream($,F){let{sampleSize:A=lE}=F,J,X,Y=$.getReader({mode:"byob"});try{let{value:D,done:G}=await Y.read(new Uint8Array(A));if(X=D,!G&&D)try{J=await this.fromBuffer(D.subarray(0,A))}catch(z){if(!(z instanceof s6))throw z;J=void 0}X=D}finally{Y.releaseLock()}let W=new TransformStream({async start(D){D.enqueue(X)},transform(D,G){G.enqueue(D)}}),Z=$.pipeThrough(W);return Z.fileType=J,Z}check($,F){return RA(this.buffer,$,F)}checkString($,F){return this.check(ak1($,F?.encoding),F)}detectConfident=async($)=>{if(this.buffer=new Uint8Array(lE),$.fileInfo.size===void 0)$.fileInfo.size=Number.MAX_SAFE_INTEGER;if(this.tokenizer=$,await $.peekBuffer(this.buffer,{length:32,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33])){if(await $.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14}))return{ext:"eps",mime:"application/eps"};return{ext:"ps",mime:"application/postscript"}}if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.detectConfident($);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8])){let A=new LS($).inflate(),J=!0;try{let X;try{X=await this.fromStream(A)}catch{J=!1}if(X&&X.ext==="tar")return{ext:"tar.gz",mime:"application/gzip"}}finally{if(J)await A.cancel()}return{ext:"gz",mime:"application/gzip"}}if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await $.ignore(6);let F=await $.readToken(sk1);if($.position+F>$.fileInfo.size)return{ext:"mp3",mime:"audio/mpeg"};return await $.ignore(F),this.fromTokenizer($)}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255])){if(this.check([247],{offset:3}))return{ext:"jls",mime:"image/jls"};return{ext:"jpg",mime:"image/jpeg"}}if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){let F;return await new cE($).unzip((A)=>{switch(A.filename){case"META-INF/mozilla.rsa":return F={ext:"xpi",mime:"application/x-xpinstall"},{stop:!0};case"META-INF/MANIFEST.MF":return F={ext:"jar",mime:"application/java-archive"},{stop:!0};case"mimetype":return{async handler(J){let X=new TextDecoder("utf-8").decode(J).trim();F=ve(X)},stop:!0};case"[Content_Types].xml":return{async handler(J){let X=new TextDecoder("utf-8").decode(J),Y=X.indexOf('.main+xml"');if(Y===-1){if(X.includes('ContentType="application/vnd.ms-package.3dmanufacturing-3dmodel+xml"'))F=ve("application/vnd.ms-package.3dmanufacturing-3dmodel+xml")}else{X=X.slice(0,Math.max(0,Y));let W=X.lastIndexOf('"'),Z=X.slice(Math.max(0,W+1));F=ve(Z)}},stop:!0};default:if(/classes\d*\.dex/.test(A.filename))return F={ext:"apk",mime:"application/vnd.android.package-archive"},{stop:!0};return{}}}).catch((A)=>{if(!(A instanceof s6))throw A}),F??{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await $.ignore(28);let F=new Uint8Array(8);if(await $.readBuffer(F),RA(F,[79,112,117,115,72,101,97,100]))return{ext:"opus",mime:"audio/ogg; codecs=opus"};if(RA(F,[128,116,104,101,111,114,97]))return{ext:"ogv",mime:"video/ogg"};if(RA(F,[1,118,105,100,101,111,0]))return{ext:"ogm",mime:"video/ogg"};if(RA(F,[127,70,76,65,67]))return{ext:"oga",mime:"audio/ogg"};if(RA(F,[83,112,101,101,120,32,32]))return{ext:"spx",mime:"audio/ogg"};if(RA(F,[1,118,111,114,98,105,115]))return{ext:"ogg",mime:"audio/ogg"};return{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF"))return{ext:"pdf",mime:"application/pdf"};if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){let F=await this.readTiffHeader(!1);if(F)return F}if(this.check([77,77])){let F=await this.readTiffHeader(!0);if(F)return F}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function F(){let W=await $.peekNumber(vk1),Z=128,D=0;while((W&Z)===0&&Z!==0)++D,Z>>=1;let G=new Uint8Array(D+1);return await $.readBuffer(G),G}async function A(){let W=await F(),Z=await F();Z[0]^=128>>Z.length-1;let D=Math.min(6,Z.length),G=new DataView(W.buffer),z=new DataView(Z.buffer,Z.length-D,D);return{id:fe(G),len:fe(z)}}async function J(W){while(W>0){let Z=await A();if(Z.id===17026)return(await $.readToken(new Y5(Z.len))).replaceAll(/\00.*$/g,"");await $.ignore(Z.len),--W}}let X=await A();switch(await J(X.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/matroska"};default:return}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1")||this.checkString("PARE"))return{ext:"parquet",mime:"application/vnd.apache.parquet"};if(this.checkString("ttcf"))return{ext:"ttc",mime:"font/collection"};if(this.check([254,237,250,206])||this.check([254,237,250,207])||this.check([206,250,237,254])||this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([4,34,77,24]))return{ext:"lz4",mime:"application/x-lz4"};if(this.checkString("regf"))return{ext:"dat",mime:"application/x-ft-windows-registry-hive"};if(this.checkString("$FL2")||this.checkString("$FL3"))return{ext:"sav",mime:"application/x-spss-sav"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190])){let F=be.get(this.buffer,4),A=AG.get(this.buffer,6);if(F>0&&F<=30)return{ext:"macho",mime:"application/x-mach-binary"};if(A>30)return{ext:"class",mime:"application/java-vm"}}if(this.checkString(".RMF"))return{ext:"rm",mime:"application/vnd.rn-realmedia"};if(this.checkString("DRACO"))return{ext:"drc",mime:"application/vnd.google.draco"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){let F=new Y5(4,"latin1").get(this.buffer,2);if(F.match("^d*")&&F>=1000&&F<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>")){if(await $.ignore(8),await $.readToken(new Y5(13,"ascii"))==="debian-binary")return{ext:"deb",mime:"application/x-deb"};return{ext:"ar",mime:"application/x-unix-archive"}}if(this.checkString("WEBVTT")&&[`
`,"\r","\t"," ","\x00"].some((F)=>this.checkString(F,{offset:6})))return{ext:"vtt",mime:"text/vtt"};if(this.check([137,80,78,71,13,10,26,10])){await $.ignore(8);async function F(){return{length:await $.readToken(yk1),type:await $.readToken(new Y5(4,"latin1"))}}do{let A=await F();if(A.length<0)return;switch(A.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await $.ignore(A.length+4)}}while($.position+8<$.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/vnd.apache.arrow.file"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.checkString("ftyp",{offset:4})&&(this.buffer[8]&96)!==0){let F=new Y5(4,"latin1").get(this.buffer,8).replace("\x00"," ").trim();switch(F){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:if(F.startsWith("3g")){if(F.startsWith("3g2"))return{ext:"3g2",mime:"video/3gpp2"};return{ext:"3gp",mime:"video/3gpp"}}return{ext:"mp4",mime:"video/mp4"}}}if(this.checkString(`REGEDIT4\r
`))return{ext:"reg",mime:"application/x-ms-regedit"};if(this.check([82,73,70,70])){if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function F(){let A=new Uint8Array(16);return await $.readBuffer(A),{id:A,size:Number(await $.readToken(uk1))}}await $.ignore(30);while($.position+24<$.fileInfo.size){let A=await F(),J=A.size-24;if(RA(A.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let X=new Uint8Array(16);if(J-=await $.readBuffer(X),RA(X,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(RA(X,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await $.ignore(J)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await $.ignore(20),await $.readToken(new Y5(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255])){if(this.checkString("<?xml ",{offset:2,encoding:"utf-16be"}))return{ext:"xml",mime:"application/xml"};return}if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await $.peekBuffer(this.buffer,{length:Math.min(256,$.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("**ACE",{offset:7})&&this.checkString("**",{offset:12}))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){let F=new DataView(this.buffer.buffer).getUint32(12,!0);if(F>12&&this.buffer.length>=F+16)try{let A=new TextDecoder().decode(this.buffer.subarray(16,F+16));if(JSON.parse(A).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \x00"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(this.check([255,255,0,0,7,0,0,0,4,0,0,0,1,0,1,0])||this.check([0,0,255,255,0,0,0,7,0,0,0,4,0,1,0,1]))return{ext:"jmp",mime:"application/x-jmp-data"};if(await $.peekBuffer(this.buffer,{length:Math.min(512,$.fileInfo.size),mayBeLess:!0}),this.checkString("ustar",{offset:257})&&(this.checkString("\x00",{offset:262})||this.checkString(" ",{offset:262}))||this.check([0,0,0,0,0,0],{offset:257})&&tk1(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254])){if(this.checkString("<?xml ",{offset:2,encoding:"utf-16le"}))return{ext:"xml",mime:"application/xml"};if(this.check([255,14],{offset:2})&&this.checkString("SketchUp Model",{offset:4,encoding:"utf-16le"}))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(this.checkString(`Windows Registry Editor Version 5.00\r
`,{offset:2,encoding:"utf-16le"}))return{ext:"reg",mime:"application/x-ms-regedit"};return}if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"}};detectImprecise=async($)=>{if(this.buffer=new Uint8Array(lE),await $.peekBuffer(this.buffer,{length:Math.min(8,$.fileInfo.size),mayBeLess:!0}),this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(await $.peekBuffer(this.buffer,{length:Math.min(2+this.options.mpegOffsetTolerance,$.fileInfo.size),mayBeLess:!0}),this.buffer.length>=2+this.options.mpegOffsetTolerance)for(let F=0;F<=this.options.mpegOffsetTolerance;++F){let A=this.scanMpeg(F);if(A)return A}};async readTiffTag($){let F=await this.tokenizer.readToken($?AG:U4);switch(this.tokenizer.ignore(10),F){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"};default:}}async readTiffIFD($){let F=await this.tokenizer.readToken($?AG:U4);for(let A=0;A<F;++A){let J=await this.readTiffTag($);if(J)return J}}async readTiffHeader($){let F=($?AG:U4).get(this.buffer,2),A=($?be:p4).get(this.buffer,4);if(F===42){if(A>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(A>=8){let X=($?AG:U4).get(this.buffer,8),Y=($?AG:U4).get(this.buffer,10);if(X===28&&Y===254||X===31&&Y===11)return{ext:"nef",mime:"image/x-nikon-nef"}}}return await this.tokenizer.ignore(A),await this.readTiffIFD($)??{ext:"tif",mime:"image/tiff"}}if(F===43)return{ext:"tif",mime:"image/tiff"}}scanMpeg($){if(this.check([255,224],{offset:$,mask:[255,224]})){if(this.check([16],{offset:$+1,mask:[22]})){if(this.check([8],{offset:$+1,mask:[8]}))return{ext:"aac",mime:"audio/aac"};return{ext:"aac",mime:"audio/aac"}}if(this.check([2],{offset:$+1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:$+1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:$+1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}}var lE=4100,Yb1,Wb1;var ye=x(()=>{dE();BS();nk1();rk1();ok1();Fb1();Yb1=new Set(ek1),Wb1=new Set($b1)});var Db1={};l2(Db1,{supportedMimeTypes:()=>Wb1,supportedExtensions:()=>Yb1,fileTypeStream:()=>Ub0,fileTypeFromTokenizer:()=>Xb1,fileTypeFromStream:()=>Hb0,fileTypeFromFile:()=>zb0,fileTypeFromBuffer:()=>Ab1,fileTypeFromBlob:()=>Jb1,FileTypeParser:()=>pE});import{ReadableStream as Zb0}from"stream/web";import{pipeline as Zb1,PassThrough as Db0,Readable as Gb0}from"stream";async function zb0($,F){return new pE(F).fromFile($,F)}async function Hb0($,F){return new pE(F).fromStream($)}async function Ub0($,F={}){return new pE(F).toDetectionStream($,F)}var pE;var Gb1=x(()=>{kk1();ye();ye();pE=class pE extends wQ{async fromStream($){let F=await($ instanceof Zb0?KS($,this.tokenizerOptions):Sk1($,this.tokenizerOptions));try{return await super.fromTokenizer(F)}finally{await F.close()}}async fromFile($){let F=await _k1($);try{return await super.fromTokenizer(F)}finally{await F.close()}}async toDetectionStream($,F={}){if(!($ instanceof Gb0))return super.toDetectionStream($,F);let{sampleSize:A=lE}=F;return new Promise((J,X)=>{$.on("error",X),$.once("readable",()=>{(async()=>{try{let Y=new Db0,W=Zb1?Zb1($,Y,()=>{}):$.pipe(Y),Z=$.read(A)??$.read()??new Uint8Array(0);try{Y.fileType=await this.fromBuffer(Z)}catch(D){if(D instanceof s6)Y.fileType=void 0;else X(D)}J(W)}catch(Y){X(Y)}})()})})}}});var Sx1=O((sx0)=>{sx0.byteLength=px0;sx0.toByteArray=nx0;sx0.fromByteArray=tx0;var bA=[],e5=[],lx0=typeof Uint8Array<"u"?Uint8Array:Array,K11="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(MW=0,B11=K11.length;MW<B11;++MW)bA[MW]=K11[MW],e5[K11.charCodeAt(MW)]=MW;var MW,B11;e5[45]=62;e5[95]=63;function Ox1($){var F=$.length;if(F%4>0)throw Error("Invalid string. Length must be a multiple of 4");var A=$.indexOf("=");if(A===-1)A=F;var J=A===F?0:4-A%4;return[A,J]}function px0($){var F=Ox1($),A=F[0],J=F[1];return(A+J)*3/4-J}function ix0($,F,A){return(F+A)*3/4-A}function nx0($){var F,A=Ox1($),J=A[0],X=A[1],Y=new lx0(ix0($,J,X)),W=0,Z=X>0?J-4:J,D;for(D=0;D<Z;D+=4)F=e5[$.charCodeAt(D)]<<18|e5[$.charCodeAt(D+1)]<<12|e5[$.charCodeAt(D+2)]<<6|e5[$.charCodeAt(D+3)],Y[W++]=F>>16&255,Y[W++]=F>>8&255,Y[W++]=F&255;if(X===2)F=e5[$.charCodeAt(D)]<<2|e5[$.charCodeAt(D+1)]>>4,Y[W++]=F&255;if(X===1)F=e5[$.charCodeAt(D)]<<10|e5[$.charCodeAt(D+1)]<<4|e5[$.charCodeAt(D+2)]>>2,Y[W++]=F>>8&255,Y[W++]=F&255;return Y}function rx0($){return bA[$>>18&63]+bA[$>>12&63]+bA[$>>6&63]+bA[$&63]}function ax0($,F,A){var J,X=[];for(var Y=F;Y<A;Y+=3)J=($[Y]<<16&16711680)+($[Y+1]<<8&65280)+($[Y+2]&255),X.push(rx0(J));return X.join("")}function tx0($){var F,A=$.length,J=A%3,X=[],Y=16383;for(var W=0,Z=A-J;W<Z;W+=Y)X.push(ax0($,W,W+Y>Z?Z:W+Y));if(J===1)F=$[A-1],X.push(bA[F>>2]+bA[F<<4&63]+"==");else if(J===2)F=($[A-2]<<8)+$[A-1],X.push(bA[F>>10]+bA[F>>4&63]+bA[F<<2&63]+"=");return X.join("")}});var w11=O((_x1)=>{Object.defineProperty(_x1,"__esModule",{value:!0});_x1.fromArrayBufferToHex=Fg0;function Fg0($){return Array.from(new Uint8Array($)).map((A)=>{return A.toString(16).padStart(2,"0")}).join("")}});var xx1=O((kx1)=>{Object.defineProperty(kx1,"__esModule",{value:!0});kx1.BrowserCrypto=void 0;var xQ=Sx1(),Jg0=w11();class yS{constructor(){if(typeof window>"u"||window.crypto===void 0||window.crypto.subtle===void 0)throw Error("SubtleCrypto not found. Make sure it's an https:// website.")}async sha256DigestBase64($){let F=new TextEncoder().encode($),A=await window.crypto.subtle.digest("SHA-256",F);return xQ.fromByteArray(new Uint8Array(A))}randomBytesBase64($){let F=new Uint8Array($);return window.crypto.getRandomValues(F),xQ.fromByteArray(F)}static padBase64($){while($.length%4!==0)$+="=";return $}async verify($,F,A){let J={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},X=new TextEncoder().encode(F),Y=xQ.toByteArray(yS.padBase64(A)),W=await window.crypto.subtle.importKey("jwk",$,J,!0,["verify"]);return await window.crypto.subtle.verify(J,W,Y,X)}async sign($,F){let A={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},J=new TextEncoder().encode(F),X=await window.crypto.subtle.importKey("jwk",$,A,!0,["sign"]),Y=await window.crypto.subtle.sign(A,X,J);return xQ.fromByteArray(new Uint8Array(Y))}decodeBase64StringUtf8($){let F=xQ.toByteArray(yS.padBase64($));return new TextDecoder().decode(F)}encodeBase64StringUtf8($){let F=new TextEncoder().encode($);return xQ.fromByteArray(F)}async sha256DigestHex($){let F=new TextEncoder().encode($),A=await window.crypto.subtle.digest("SHA-256",F);return(0,Jg0.fromArrayBufferToHex)(A)}async signWithHmacSha256($,F){let A=typeof $==="string"?$:String.fromCharCode(...new Uint16Array($)),J=new TextEncoder,X=await window.crypto.subtle.importKey("raw",J.encode(A),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",X,J.encode(F))}}kx1.BrowserCrypto=yS});var yx1=O((fx1)=>{Object.defineProperty(fx1,"__esModule",{value:!0});fx1.NodeCrypto=void 0;var gQ=Z1("crypto");class gx1{async sha256DigestBase64($){return gQ.createHash("sha256").update($).digest("base64")}randomBytesBase64($){return gQ.randomBytes($).toString("base64")}async verify($,F,A){let J=gQ.createVerify("RSA-SHA256");return J.update(F),J.end(),J.verify($,A,"base64")}async sign($,F){let A=gQ.createSign("RSA-SHA256");return A.update(F),A.end(),A.sign($,"base64")}decodeBase64StringUtf8($){return Buffer.from($,"base64").toString("utf-8")}encodeBase64StringUtf8($){return Buffer.from($,"utf-8").toString("base64")}async sha256DigestHex($){return gQ.createHash("sha256").update($).digest("hex")}async signWithHmacSha256($,F){let A=typeof $==="string"?$:Yg0($);return Xg0(gQ.createHmac("sha256",A).update(F).digest())}}fx1.NodeCrypto=gx1;function Xg0($){return $.buffer.slice($.byteOffset,$.byteOffset+$.byteLength)}function Yg0($){return Buffer.from($)}});var wV=O((wX)=>{var Wg0=wX&&wX.__createBinding||(Object.create?function($,F,A,J){if(J===void 0)J=A;var X=Object.getOwnPropertyDescriptor(F,A);if(!X||("get"in X?!F.__esModule:X.writable||X.configurable))X={enumerable:!0,get:function(){return F[A]}};Object.defineProperty($,J,X)}:function($,F,A,J){if(J===void 0)J=A;$[J]=F[A]}),Zg0=wX&&wX.__exportStar||function($,F){for(var A in $)if(A!=="default"&&!Object.prototype.hasOwnProperty.call(F,A))Wg0(F,$,A)};Object.defineProperty(wX,"__esModule",{value:!0});wX.createCrypto=zg0;wX.hasBrowserCrypto=ux1;var Dg0=xx1(),Gg0=yx1();Zg0(w11(),wX);function zg0(){if(ux1())return new Dg0.BrowserCrypto;return new Gg0.NodeCrypto}function ux1(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}});var fQ=O((q11,mx1)=>{/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var uS=Z1("buffer"),xA=uS.Buffer;function hx1($,F){for(var A in $)F[A]=$[A]}if(xA.from&&xA.alloc&&xA.allocUnsafe&&xA.allocUnsafeSlow)mx1.exports=uS;else hx1(uS,q11),q11.Buffer=WG;function WG($,F,A){return xA($,F,A)}WG.prototype=Object.create(xA.prototype);hx1(xA,WG);WG.from=function($,F,A){if(typeof $==="number")throw TypeError("Argument must not be a number");return xA($,F,A)};WG.alloc=function($,F,A){if(typeof $!=="number")throw TypeError("Argument must be a number");var J=xA($);if(F!==void 0)if(typeof A==="string")J.fill(F,A);else J.fill(F);else J.fill(0);return J};WG.allocUnsafe=function($){if(typeof $!=="number")throw TypeError("Argument must be a number");return xA($)};WG.allocUnsafeSlow=function($){if(typeof $!=="number")throw TypeError("Argument must be a number");return uS.SlowBuffer($)}});var cx1=O((R02,dx1)=>{function L11($){var F=($/8|0)+($%8===0?0:1);return F}var Hg0={ES256:L11(256),ES384:L11(384),ES512:L11(521)};function Ug0($){var F=Hg0[$];if(F)return F;throw Error('Unknown algorithm "'+$+'"')}dx1.exports=Ug0});var E11=O((I02,ax1)=>{var hS=fQ().Buffer,px1=cx1(),mS=128,ix1=0,Qg0=32,Kg0=16,Bg0=2,nx1=Kg0|Qg0|ix1<<6,dS=Bg0|ix1<<6;function wg0($){return $.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function rx1($){if(hS.isBuffer($))return $;else if(typeof $==="string")return hS.from($,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function qg0($,F){$=rx1($);var A=px1(F),J=A+1,X=$.length,Y=0;if($[Y++]!==nx1)throw Error('Could not find expected "seq"');var W=$[Y++];if(W===(mS|1))W=$[Y++];if(X-Y<W)throw Error('"seq" specified length of "'+W+'", only "'+(X-Y)+'" remaining');if($[Y++]!==dS)throw Error('Could not find expected "int" for "r"');var Z=$[Y++];if(X-Y-2<Z)throw Error('"r" specified length of "'+Z+'", only "'+(X-Y-2)+'" available');if(J<Z)throw Error('"r" specified length of "'+Z+'", max of "'+J+'" is acceptable');var D=Y;if(Y+=Z,$[Y++]!==dS)throw Error('Could not find expected "int" for "s"');var G=$[Y++];if(X-Y!==G)throw Error('"s" specified length of "'+G+'", expected "'+(X-Y)+'"');if(J<G)throw Error('"s" specified length of "'+G+'", max of "'+J+'" is acceptable');var z=Y;if(Y+=G,Y!==X)throw Error('Expected to consume entire buffer, but "'+(X-Y)+'" bytes remain');var H=A-Z,U=A-G,Q=hS.allocUnsafe(H+Z+U+G);for(Y=0;Y<H;++Y)Q[Y]=0;$.copy(Q,Y,D+Math.max(-H,0),D+Z),Y=A;for(var B=Y;Y<B+U;++Y)Q[Y]=0;return $.copy(Q,Y,z+Math.max(-U,0),z+G),Q=Q.toString("base64"),Q=wg0(Q),Q}function lx1($,F,A){var J=0;while(F+J<A&&$[F+J]===0)++J;var X=$[F+J]>=mS;if(X)--J;return J}function Lg0($,F){$=rx1($);var A=px1(F),J=$.length;if(J!==A*2)throw TypeError('"'+F+'" signatures must be "'+A*2+'" bytes, saw "'+J+'"');var X=lx1($,0,A),Y=lx1($,A,$.length),W=A-X,Z=A-Y,D=2+W+1+1+Z,G=D<mS,z=hS.allocUnsafe((G?2:3)+D),H=0;if(z[H++]=nx1,G)z[H++]=D;else z[H++]=mS|1,z[H++]=D&255;if(z[H++]=dS,z[H++]=W,X<0)z[H++]=0,H+=$.copy(z,H,0,A);else H+=$.copy(z,H,X,A);if(z[H++]=dS,z[H++]=Z,Y<0)z[H++]=0,$.copy(z,H,A);else $.copy(z,H,A+Y);return z}ax1.exports={derToJose:qg0,joseToDer:Lg0}});var MF=O((ex1)=>{Object.defineProperty(ex1,"__esModule",{value:!0});ex1.LRUCache=void 0;ex1.snakeToCamel=sx1;ex1.originalOrCamelOptions=Cg0;ex1.removeUndefinedValuesInObject=Mg0;ex1.isValidFile=Pg0;ex1.getWellKnownCertificateConfigFileLocation=Rg0;var Eg0=Z1("fs"),Vg0=Z1("os"),V11=Z1("path"),Ng0="certificate_config.json",tx1="gcloud";function sx1($){return $.replace(/([_][^_])/g,(F)=>F.slice(1).toUpperCase())}function Cg0($){function F(A){let J=$||{};return J[A]??J[sx1(A)]}return{get:F}}class ox1{capacity;#$=new Map;maxAge;constructor($){this.capacity=$.capacity,this.maxAge=$.maxAge}#F($,F){this.#$.delete($),this.#$.set($,{value:F,lastAccessed:Date.now()})}set($,F){this.#F($,F),this.#A()}get($){let F=this.#$.get($);if(!F)return;return this.#F($,F.value),this.#A(),F.value}#A(){let $=this.maxAge?Date.now()-this.maxAge:0,F=this.#$.entries().next();while(!F.done&&(this.#$.size>this.capacity||F.value[1].lastAccessed<$))this.#$.delete(F.value[0]),F=this.#$.entries().next()}}ex1.LRUCache=ox1;function Mg0($){return Object.entries($).forEach(([F,A])=>{if(A===void 0||A==="undefined")delete $[F]}),$}async function Pg0($){try{return(await Eg0.promises.lstat($)).isFile()}catch(F){return!1}}function Rg0(){let $=process.env.CLOUDSDK_CONFIG||(Ig0()?V11.join(process.env.APPDATA||"",tx1):V11.join(process.env.HOME||"",".config",tx1));return V11.join($,Ng0)}function Ig0(){return Vg0.platform().startsWith("win")}});var Fg1=O((j02,kg0)=>{kg0.exports={name:"google-auth-library",version:"10.5.0",author:"Google Inc.",description:"Google APIs Authentication Client Library for Node.js",engines:{node:">=18"},main:"./build/src/index.js",types:"./build/src/index.d.ts",repository:"googleapis/google-auth-library-nodejs.git",keywords:["google","api","google apis","client","client library"],dependencies:{"base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11",gaxios:"^7.0.0","gcp-metadata":"^8.0.0","google-logging-utils":"^1.0.0",gtoken:"^8.0.0",jws:"^4.0.0"},devDependencies:{"@types/base64-js":"^1.2.5","@types/jws":"^3.1.0","@types/mocha":"^10.0.10","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","assert-rejects":"^1.0.0",c8:"^10.0.0",codecov:"^3.0.2",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",keypair:"^1.0.4",mocha:"^11.1.0",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.5","null-loader":"^4.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","ts-loader":"^8.0.0",typescript:"5.8.2",webpack:"^5.21.2","webpack-cli":"^4.0.0"},files:["build/src","!build/src/**/*.map"],scripts:{test:"c8 mocha build/test",clean:"gts clean",prepare:"npm run compile",lint:"gts check --no-inline-config",compile:"tsc -p .",fix:"gts fix",pretest:"npm run compile -- --sourceMap",docs:"jsdoc -c .jsdoc.js","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000","presystem-test":"npm run compile -- --sourceMap",webpack:"webpack","browser-test":"karma start","docs-test":"echo 'disabled until linkinator is fixed'","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install"},license:"Apache-2.0"}});var N11=O((Xg1)=>{Object.defineProperty(Xg1,"__esModule",{value:!0});Xg1.USER_AGENT=Xg1.PRODUCT_NAME=Xg1.pkg=void 0;var Ag1=Fg1();Xg1.pkg=Ag1;var Jg1="google-api-nodejs-client";Xg1.PRODUCT_NAME=Jg1;var bg0=`${Jg1}/${Ag1.version}`;Xg1.USER_AGENT=bg0});var W5=O((Wg1)=>{Object.defineProperty(Wg1,"__esModule",{value:!0});Wg1.AuthClient=Wg1.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=Wg1.DEFAULT_UNIVERSE=void 0;var fg0=Z1("events"),C11=c9(),vg0=MF(),yg0=Rx(),M11=N11();Wg1.DEFAULT_UNIVERSE="googleapis.com";Wg1.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=300000;class H8 extends fg0.EventEmitter{apiKey;projectId;quotaProjectId;transporter;credentials={};eagerRefreshThresholdMillis=Wg1.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS;forceRefreshOnFailure=!1;universeDomain=Wg1.DEFAULT_UNIVERSE;static RequestMethodNameSymbol=Symbol("request method name");static RequestLogIdSymbol=Symbol("request log id");constructor($={}){super();let F=(0,vg0.originalOrCamelOptions)($);if(this.apiKey=$.apiKey,this.projectId=F.get("project_id")??null,this.quotaProjectId=F.get("quota_project_id"),this.credentials=F.get("credentials")??{},this.universeDomain=F.get("universe_domain")??Wg1.DEFAULT_UNIVERSE,this.transporter=$.transporter??new C11.Gaxios($.transporterOptions),F.get("useAuthRequestParameters")!==!1)this.transporter.interceptors.request.add(H8.DEFAULT_REQUEST_INTERCEPTOR),this.transporter.interceptors.response.add(H8.DEFAULT_RESPONSE_INTERCEPTOR);if($.eagerRefreshThresholdMillis)this.eagerRefreshThresholdMillis=$.eagerRefreshThresholdMillis;this.forceRefreshOnFailure=$.forceRefreshOnFailure??!1}fetch(...$){let F=$[0],A=$[1],J=void 0,X=new Headers;if(typeof F==="string")J=new URL(F);else if(F instanceof URL)J=F;else if(F&&F.url)J=new URL(F.url);if(F&&typeof F==="object"&&"headers"in F)C11.Gaxios.mergeHeaders(X,F.headers);if(A)C11.Gaxios.mergeHeaders(X,new Headers(A.headers));if(typeof F==="object"&&!(F instanceof URL))return this.request({...A,...F,headers:X,url:J});else return this.request({...A,headers:X,url:J})}setCredentials($){this.credentials=$}addSharedMetadataHeaders($){if(!$.has("x-goog-user-project")&&this.quotaProjectId)$.set("x-goog-user-project",this.quotaProjectId);return $}addUserProjectAndAuthHeaders($,F){let A=F.get("x-goog-user-project"),J=F.get("authorization");if(A)$.set("x-goog-user-project",A);if(J)$.set("authorization",J);return $}static log=(0,yg0.log)("auth");static DEFAULT_REQUEST_INTERCEPTOR={resolved:async($)=>{if(!$.headers.has("x-goog-api-client")){let A=process.version.replace(/^v/,"");$.headers.set("x-goog-api-client",`gl-node/${A}`)}let F=$.headers.get("User-Agent");if(!F)$.headers.set("User-Agent",M11.USER_AGENT);else if(!F.includes(`${M11.PRODUCT_NAME}/`))$.headers.set("User-Agent",`${F} ${M11.USER_AGENT}`);try{let A=$,J=A[H8.RequestMethodNameSymbol],X=`${Math.floor(Math.random()*1000)}`;A[H8.RequestLogIdSymbol]=X;let Y={url:$.url,headers:$.headers};if(J)H8.log.info("%s [%s] request %j",J,X,Y);else H8.log.info("[%s] request %j",X,Y)}catch(A){}return $}};static DEFAULT_RESPONSE_INTERCEPTOR={resolved:async($)=>{try{let F=$.config,A=F[H8.RequestMethodNameSymbol],J=F[H8.RequestLogIdSymbol];if(A)H8.log.info("%s [%s] response %j",A,J,$.data);else H8.log.info("[%s] response %j",J,$.data)}catch(F){}return $},rejected:async($)=>{try{let F=$.config,A=F[H8.RequestMethodNameSymbol],J=F[H8.RequestLogIdSymbol];if(A)H8.log.info("%s [%s] error %j",A,J,$.response?.data);else H8.log.error("[%s] error %j",J,$.response?.data)}catch(F){}throw $}};static setMethodName($,F){try{let A=$;A[H8.RequestMethodNameSymbol]=F}catch(A){}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}Wg1.AuthClient=H8});var R11=O((zg1)=>{Object.defineProperty(zg1,"__esModule",{value:!0});zg1.LoginTicket=void 0;class Gg1{envelope;payload;constructor($,F){this.envelope=$,this.payload=F}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let $=this.getPayload();if($&&$.sub)return $.sub;return null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}}zg1.LoginTicket=Gg1});var ZG=O((Bg1)=>{Object.defineProperty(Bg1,"__esModule",{value:!0});Bg1.OAuth2Client=Bg1.ClientAuthentication=Bg1.CertificateFormat=Bg1.CodeChallengeMethod=void 0;var Ug1=c9(),ug0=Z1("querystring"),hg0=Z1("stream"),mg0=E11(),Qg1=MF(),I11=wV(),vQ=W5(),dg0=R11(),Kg1;(function($){$.Plain="plain",$.S256="S256"})(Kg1||(Bg1.CodeChallengeMethod=Kg1={}));var qX;(function($){$.PEM="PEM",$.JWK="JWK"})(qX||(Bg1.CertificateFormat=qX={}));var qV;(function($){$.ClientSecretPost="ClientSecretPost",$.ClientSecretBasic="ClientSecretBasic",$.None="None"})(qV||(Bg1.ClientAuthentication=qV={}));class $$ extends vQ.AuthClient{redirectUri;certificateCache={};certificateExpiry=null;certificateCacheFormat=qX.PEM;refreshTokenPromises=new Map;endpoints;issuers;clientAuthentication;_clientId;_clientSecret;refreshHandler;constructor($={},F,A){super(typeof $==="object"?$:{});if(typeof $!=="object")$={clientId:$,clientSecret:F,redirectUri:A};this._clientId=$.clientId||$.client_id,this._clientSecret=$.clientSecret||$.client_secret,this.redirectUri=$.redirectUri||$.redirect_uris?.[0],this.endpoints={tokenInfoUrl:"https://oauth2.googleapis.com/tokeninfo",oauth2AuthBaseUrl:"https://accounts.google.com/o/oauth2/v2/auth",oauth2TokenUrl:"https://oauth2.googleapis.com/token",oauth2RevokeUrl:"https://oauth2.googleapis.com/revoke",oauth2FederatedSignonPemCertsUrl:"https://www.googleapis.com/oauth2/v1/certs",oauth2FederatedSignonJwkCertsUrl:"https://www.googleapis.com/oauth2/v3/certs",oauth2IapPublicKeyUrl:"https://www.gstatic.com/iap/verify/public_key",...$.endpoints},this.clientAuthentication=$.clientAuthentication||qV.ClientSecretPost,this.issuers=$.issuers||["accounts.google.com","https://accounts.google.com",this.universeDomain]}static GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";static CLOCK_SKEW_SECS_=300;static DEFAULT_MAX_TOKEN_LIFETIME_SECS_=86400;generateAuthUrl($={}){if($.code_challenge_method&&!$.code_challenge)throw Error("If a code_challenge_method is provided, code_challenge must be included.");if($.response_type=$.response_type||"code",$.client_id=$.client_id||this._clientId,$.redirect_uri=$.redirect_uri||this.redirectUri,Array.isArray($.scope))$.scope=$.scope.join(" ");return this.endpoints.oauth2AuthBaseUrl.toString()+"?"+ug0.stringify($)}generateCodeVerifier(){throw Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){let $=(0,I11.createCrypto)(),A=$.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),X=(await $.sha256DigestBase64(A)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:A,codeChallenge:X}}getToken($,F){let A=typeof $==="string"?{code:$}:$;if(F)this.getTokenAsync(A).then((J)=>F(null,J.tokens,J.res),(J)=>F(J,null,J.response));else return this.getTokenAsync(A)}async getTokenAsync($){let F=this.endpoints.oauth2TokenUrl.toString(),A=new Headers,J={client_id:$.client_id||this._clientId,code_verifier:$.codeVerifier,code:$.code,grant_type:"authorization_code",redirect_uri:$.redirect_uri||this.redirectUri};if(this.clientAuthentication===qV.ClientSecretBasic){let Z=Buffer.from(`${this._clientId}:${this._clientSecret}`);A.set("authorization",`Basic ${Z.toString("base64")}`)}if(this.clientAuthentication===qV.ClientSecretPost)J.client_secret=this._clientSecret;let X={...$$.RETRY_CONFIG,method:"POST",url:F,data:new URLSearchParams((0,Qg1.removeUndefinedValuesInObject)(J)),headers:A};vQ.AuthClient.setMethodName(X,"getTokenAsync");let Y=await this.transporter.request(X),W=Y.data;if(Y.data&&Y.data.expires_in)W.expiry_date=new Date().getTime()+Y.data.expires_in*1000,delete W.expires_in;return this.emit("tokens",W),{tokens:W,res:Y}}async refreshToken($){if(!$)return this.refreshTokenNoCache($);if(this.refreshTokenPromises.has($))return this.refreshTokenPromises.get($);let F=this.refreshTokenNoCache($).then((A)=>{return this.refreshTokenPromises.delete($),A},(A)=>{throw this.refreshTokenPromises.delete($),A});return this.refreshTokenPromises.set($,F),F}async refreshTokenNoCache($){if(!$)throw Error("No refresh token is set.");let F=this.endpoints.oauth2TokenUrl.toString(),A={refresh_token:$,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"},J;try{let Y={...$$.RETRY_CONFIG,method:"POST",url:F,data:new URLSearchParams((0,Qg1.removeUndefinedValuesInObject)(A))};vQ.AuthClient.setMethodName(Y,"refreshTokenNoCache"),J=await this.transporter.request(Y)}catch(Y){if(Y instanceof Ug1.GaxiosError&&Y.message==="invalid_grant"&&Y.response?.data&&/ReAuth/i.test(Y.response.data.error_description))Y.message=JSON.stringify(Y.response.data);throw Y}let X=J.data;if(J.data&&J.data.expires_in)X.expiry_date=new Date().getTime()+J.data.expires_in*1000,delete X.expires_in;return this.emit("tokens",X),{tokens:X,res:J}}refreshAccessToken($){if($)this.refreshAccessTokenAsync().then((F)=>$(null,F.credentials,F.res),$);else return this.refreshAccessTokenAsync()}async refreshAccessTokenAsync(){let $=await this.refreshToken(this.credentials.refresh_token),F=$.tokens;return F.refresh_token=this.credentials.refresh_token,this.credentials=F,{credentials:this.credentials,res:$.res}}getAccessToken($){if($)this.getAccessTokenAsync().then((F)=>$(null,F.token,F.res),$);else return this.getAccessTokenAsync()}async getAccessTokenAsync(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){let A=await this.processAndValidateRefreshHandler();if(A?.access_token)return this.setCredentials(A),{token:this.credentials.access_token}}else throw Error("No refresh token or refresh handler callback is set.");let F=await this.refreshAccessTokenAsync();if(!F.credentials||F.credentials&&!F.credentials.access_token)throw Error("Could not refresh access token.");return{token:F.credentials.access_token,res:F.res}}else return{token:this.credentials.access_token}}async getRequestHeaders($){return(await this.getRequestMetadataAsync($)).headers}async getRequestMetadataAsync($){let F=this.credentials;if(!F.access_token&&!F.refresh_token&&!this.apiKey&&!this.refreshHandler)throw Error("No access, refresh token, API key or refresh handler callback is set.");if(F.access_token&&!this.isTokenExpiring()){F.token_type=F.token_type||"Bearer";let W=new Headers({authorization:F.token_type+" "+F.access_token});return{headers:this.addSharedMetadataHeaders(W)}}if(this.refreshHandler){let W=await this.processAndValidateRefreshHandler();if(W?.access_token){this.setCredentials(W);let Z=new Headers({authorization:"Bearer "+this.credentials.access_token});return{headers:this.addSharedMetadataHeaders(Z)}}}if(this.apiKey)return{headers:new Headers({"X-Goog-Api-Key":this.apiKey})};let A=null,J=null;try{A=await this.refreshToken(F.refresh_token),J=A.tokens}catch(W){let Z=W;if(Z.response&&(Z.response.status===403||Z.response.status===404))Z.message=`Could not refresh access token: ${Z.message}`;throw Z}let X=this.credentials;X.token_type=X.token_type||"Bearer",J.refresh_token=X.refresh_token,this.credentials=J;let Y=new Headers({authorization:X.token_type+" "+J.access_token});return{headers:this.addSharedMetadataHeaders(Y),res:A.res}}static getRevokeTokenUrl($){return new $$().getRevokeTokenURL($).toString()}getRevokeTokenURL($){let F=new URL(this.endpoints.oauth2RevokeUrl);return F.searchParams.append("token",$),F}revokeToken($,F){let A={...$$.RETRY_CONFIG,url:this.getRevokeTokenURL($).toString(),method:"POST"};if(vQ.AuthClient.setMethodName(A,"revokeToken"),F)this.transporter.request(A).then((J)=>F(null,J),F);else return this.transporter.request(A)}revokeCredentials($){if($)this.revokeCredentialsAsync().then((F)=>$(null,F),$);else return this.revokeCredentialsAsync()}async revokeCredentialsAsync(){let $=this.credentials.access_token;if(this.credentials={},$)return this.revokeToken($);else throw Error("No access token to revoke.")}request($,F){if(F)this.requestAsync($).then((A)=>F(null,A),(A)=>{return F(A,A.response)});else return this.requestAsync($)}async requestAsync($,F=!1){try{let A=await this.getRequestMetadataAsync();if($.headers=Ug1.Gaxios.mergeHeaders($.headers),this.addUserProjectAndAuthHeaders($.headers,A.headers),this.apiKey)$.headers.set("X-Goog-Api-Key",this.apiKey);return await this.transporter.request($)}catch(A){let J=A.response;if(J){let X=J.status,Y=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),W=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,Z=J.config.data instanceof hg0.Readable,D=X===401||X===403;if(!F&&D&&!Z&&Y)return await this.refreshAccessTokenAsync(),this.requestAsync($,!0);else if(!F&&D&&!Z&&W){let G=await this.processAndValidateRefreshHandler();if(G?.access_token)this.setCredentials(G);return this.requestAsync($,!0)}}throw A}}verifyIdToken($,F){if(F&&typeof F!=="function")throw Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(F)this.verifyIdTokenAsync($).then((A)=>F(null,A),F);else return this.verifyIdTokenAsync($)}async verifyIdTokenAsync($){if(!$.idToken)throw Error("The verifyIdToken method requires an ID Token");let F=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync($.idToken,F.certs,$.audience,this.issuers,$.maxExpiry)}async getTokenInfo($){let{data:F}=await this.transporter.request({...$$.RETRY_CONFIG,method:"POST",headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8",authorization:`Bearer ${$}`},url:this.endpoints.tokenInfoUrl.toString()}),A=Object.assign({expiry_date:new Date().getTime()+F.expires_in*1000,scopes:F.scope.split(" ")},F);return delete A.expires_in,delete A.scope,A}getFederatedSignonCerts($){if($)this.getFederatedSignonCertsAsync().then((F)=>$(null,F.certs,F.res),$);else return this.getFederatedSignonCertsAsync()}async getFederatedSignonCertsAsync(){let $=new Date().getTime(),F=(0,I11.hasBrowserCrypto)()?qX.JWK:qX.PEM;if(this.certificateExpiry&&$<this.certificateExpiry.getTime()&&this.certificateCacheFormat===F)return{certs:this.certificateCache,format:F};let A,J;switch(F){case qX.PEM:J=this.endpoints.oauth2FederatedSignonPemCertsUrl.toString();break;case qX.JWK:J=this.endpoints.oauth2FederatedSignonJwkCertsUrl.toString();break;default:throw Error(`Unsupported certificate format ${F}`)}try{let D={...$$.RETRY_CONFIG,url:J};vQ.AuthClient.setMethodName(D,"getFederatedSignonCertsAsync"),A=await this.transporter.request(D)}catch(D){if(D instanceof Error)D.message=`Failed to retrieve verification certificates: ${D.message}`;throw D}let X=A?.headers.get("cache-control"),Y=-1;if(X){let D=/max-age=(?<maxAge>[0-9]+)/.exec(X)?.groups?.maxAge;if(D)Y=Number(D)*1000}let W={};switch(F){case qX.PEM:W=A.data;break;case qX.JWK:for(let D of A.data.keys)W[D.kid]=D;break;default:throw Error(`Unsupported certificate format ${F}`)}let Z=new Date;return this.certificateExpiry=Y===-1?null:new Date(Z.getTime()+Y),this.certificateCache=W,this.certificateCacheFormat=F,{certs:W,format:F,res:A}}getIapPublicKeys($){if($)this.getIapPublicKeysAsync().then((F)=>$(null,F.pubkeys,F.res),$);else return this.getIapPublicKeysAsync()}async getIapPublicKeysAsync(){let $,F=this.endpoints.oauth2IapPublicKeyUrl.toString();try{let A={...$$.RETRY_CONFIG,url:F};vQ.AuthClient.setMethodName(A,"getIapPublicKeysAsync"),$=await this.transporter.request(A)}catch(A){if(A instanceof Error)A.message=`Failed to retrieve verification certificates: ${A.message}`;throw A}return{pubkeys:$.data,res:$}}verifySignedJwtWithCerts(){throw Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync($,F,A,J,X){let Y=(0,I11.createCrypto)();if(!X)X=$$.DEFAULT_MAX_TOKEN_LIFETIME_SECS_;let W=$.split(".");if(W.length!==3)throw Error("Wrong number of segments in token: "+$);let Z=W[0]+"."+W[1],D=W[2],G,z;try{G=JSON.parse(Y.decodeBase64StringUtf8(W[0]))}catch(V){if(V instanceof Error)V.message=`Can't parse token envelope: ${W[0]}': ${V.message}`;throw V}if(!G)throw Error("Can't parse token envelope: "+W[0]);try{z=JSON.parse(Y.decodeBase64StringUtf8(W[1]))}catch(V){if(V instanceof Error)V.message=`Can't parse token payload '${W[0]}`;throw V}if(!z)throw Error("Can't parse token payload: "+W[1]);if(!Object.prototype.hasOwnProperty.call(F,G.kid))throw Error("No pem found for envelope: "+JSON.stringify(G));let H=F[G.kid];if(G.alg==="ES256")D=mg0.joseToDer(D,"ES256").toString("base64");if(!await Y.verify(H,Z,D))throw Error("Invalid token signature: "+$);if(!z.iat)throw Error("No issue time in token: "+JSON.stringify(z));if(!z.exp)throw Error("No expiration time in token: "+JSON.stringify(z));let Q=Number(z.iat);if(isNaN(Q))throw Error("iat field using invalid format");let B=Number(z.exp);if(isNaN(B))throw Error("exp field using invalid format");let q=new Date().getTime()/1000;if(B>=q+X)throw Error("Expiration time too far in future: "+JSON.stringify(z));let L=Q-$$.CLOCK_SKEW_SECS_,E=B+$$.CLOCK_SKEW_SECS_;if(q<L)throw Error("Token used too early, "+q+" < "+L+": "+JSON.stringify(z));if(q>E)throw Error("Token used too late, "+q+" > "+E+": "+JSON.stringify(z));if(J&&J.indexOf(z.iss)<0)throw Error("Invalid issuer, expected one of ["+J+"], but got "+z.iss);if(typeof A<"u"&&A!==null){let V=z.aud,R=!1;if(A.constructor===Array)R=A.indexOf(V)>-1;else R=V===A;if(!R)throw Error("Wrong recipient, payload audience != requiredAudience")}return new dg0.LoginTicket(G,z)}async processAndValidateRefreshHandler(){if(this.refreshHandler){let $=await this.refreshHandler();if(!$.access_token)throw Error("No access token is returned by the refreshHandler callback.");return $}return}isTokenExpiring(){let $=this.credentials.expiry_date;return $?$<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}}Bg1.OAuth2Client=$$});var T11=O((Eg1)=>{Object.defineProperty(Eg1,"__esModule",{value:!0});Eg1.Compute=void 0;var ig0=c9(),qg1=rG(),ng0=ZG();class Lg1 extends ng0.OAuth2Client{serviceAccountEmail;scopes;constructor($={}){super($);this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=$.serviceAccountEmail||"default",this.scopes=Array.isArray($.scopes)?$.scopes:$.scopes?[$.scopes]:[]}async refreshTokenNoCache(){let $=`service-accounts/${this.serviceAccountEmail}/token`,F;try{let J={property:$};if(this.scopes.length>0)J.params={scopes:this.scopes.join(",")};F=await qg1.instance(J)}catch(J){if(J instanceof ig0.GaxiosError)J.message=`Could not refresh access token: ${J.message}`,this.wrapError(J);throw J}let A=F;if(F&&F.expires_in)A.expiry_date=new Date().getTime()+F.expires_in*1000,delete A.expires_in;return this.emit("tokens",A),{tokens:A,res:null}}async fetchIdToken($){let F=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${$}`,A;try{let J={property:F};A=await qg1.instance(J)}catch(J){if(J instanceof Error)J.message=`Could not fetch ID token: ${J.message}`;throw J}return A}wrapError($){let F=$.response;if(F&&F.status){if($.status=F.status,F.status===403)$.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+$.message;else if(F.status===404)$.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+$.message}}}Eg1.Compute=Lg1});var j11=O((Cg1)=>{Object.defineProperty(Cg1,"__esModule",{value:!0});Cg1.IdTokenClient=void 0;var rg0=ZG();class Ng1 extends rg0.OAuth2Client{targetAudience;idTokenProvider;constructor($){super($);this.targetAudience=$.targetAudience,this.idTokenProvider=$.idTokenProvider}async getRequestMetadataAsync(){if(!this.credentials.id_token||!this.credentials.expiry_date||this.isTokenExpiring()){let F=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:F,expiry_date:this.getIdTokenExpiryDate(F)}}return{headers:new Headers({authorization:"Bearer "+this.credentials.id_token})}}getIdTokenExpiryDate($){let F=$.split(".")[1];if(F)return JSON.parse(Buffer.from(F,"base64").toString("ascii")).exp*1000}}Cg1.IdTokenClient=Ng1});var O11=O((Rg1)=>{Object.defineProperty(Rg1,"__esModule",{value:!0});Rg1.GCPEnv=void 0;Rg1.clear=ag0;Rg1.getEnv=tg0;var Pg1=rG(),gA;(function($){$.APP_ENGINE="APP_ENGINE",$.KUBERNETES_ENGINE="KUBERNETES_ENGINE",$.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",$.COMPUTE_ENGINE="COMPUTE_ENGINE",$.CLOUD_RUN="CLOUD_RUN",$.CLOUD_RUN_JOBS="CLOUD_RUN_JOBS",$.NONE="NONE"})(gA||(Rg1.GCPEnv=gA={}));var LV;function ag0(){LV=void 0}async function tg0(){if(LV)return LV;return LV=sg0(),LV}async function sg0(){let $=gA.NONE;if(og0())$=gA.APP_ENGINE;else if(eg0())$=gA.CLOUD_FUNCTIONS;else if(await Jf0())if(await Af0())$=gA.KUBERNETES_ENGINE;else if($f0())$=gA.CLOUD_RUN;else if(Ff0())$=gA.CLOUD_RUN_JOBS;else $=gA.COMPUTE_ENGINE;else $=gA.NONE;return $}function og0(){return!!(process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME)}function eg0(){return!!(process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET)}function $f0(){return!!process.env.K_CONFIGURATION}function Ff0(){return!!process.env.CLOUD_RUN_JOB}async function Af0(){try{return await Pg1.instance("attributes/cluster-name"),!0}catch($){return!1}}async function Jf0(){return Pg1.isAvailable()}});var S11=O((f02,Tg1)=>{var cS=fQ().Buffer,Wf0=Z1("stream"),Zf0=Z1("util");function lS($){if(this.buffer=null,this.writable=!0,this.readable=!0,!$)return this.buffer=cS.alloc(0),this;if(typeof $.pipe==="function")return this.buffer=cS.alloc(0),$.pipe(this),this;if($.length||typeof $==="object")return this.buffer=$,this.writable=!1,process.nextTick(function(){this.emit("end",$),this.readable=!1,this.emit("close")}.bind(this)),this;throw TypeError("Unexpected data type ("+typeof $+")")}Zf0.inherits(lS,Wf0);lS.prototype.write=function(F){this.buffer=cS.concat([this.buffer,cS.from(F)]),this.emit("data",F)};lS.prototype.end=function(F){if(F)this.write(F);this.emit("end",F),this.emit("close"),this.writable=!1,this.readable=!1};Tg1.exports=lS});var Og1=O((v02,jg1)=>{var EV=Z1("buffer").Buffer,_11=Z1("buffer").SlowBuffer;jg1.exports=pS;function pS($,F){if(!EV.isBuffer($)||!EV.isBuffer(F))return!1;if($.length!==F.length)return!1;var A=0;for(var J=0;J<$.length;J++)A|=$[J]^F[J];return A===0}pS.install=function(){EV.prototype.equal=_11.prototype.equal=function(F){return pS(this,F)}};var Df0=EV.prototype.equal,Gf0=_11.prototype.equal;pS.restore=function(){EV.prototype.equal=Df0,_11.prototype.equal=Gf0}});var g11=O((y02,yg1)=>{var uQ=fQ().Buffer,F$=Z1("crypto"),_g1=E11(),Sg1=Z1("util"),zf0=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,VV="secret must be a string or buffer",yQ="key must be a string or a buffer",Hf0="key must be a string, a buffer or an object",b11=typeof F$.createPublicKey==="function";if(b11)yQ+=" or a KeyObject",VV+="or a KeyObject";function kg1($){if(uQ.isBuffer($))return;if(typeof $==="string")return;if(!b11)throw PF(yQ);if(typeof $!=="object")throw PF(yQ);if(typeof $.type!=="string")throw PF(yQ);if(typeof $.asymmetricKeyType!=="string")throw PF(yQ);if(typeof $.export!=="function")throw PF(yQ)}function bg1($){if(uQ.isBuffer($))return;if(typeof $==="string")return;if(typeof $==="object")return;throw PF(Hf0)}function Uf0($){if(uQ.isBuffer($))return;if(typeof $==="string")return $;if(!b11)throw PF(VV);if(typeof $!=="object")throw PF(VV);if($.type!=="secret")throw PF(VV);if(typeof $.export!=="function")throw PF(VV)}function x11($){return $.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function xg1($){$=$.toString();var F=4-$.length%4;if(F!==4)for(var A=0;A<F;++A)$+="=";return $.replace(/\-/g,"+").replace(/_/g,"/")}function PF($){var F=[].slice.call(arguments,1),A=Sg1.format.bind(Sg1,$).apply(null,F);return TypeError(A)}function Qf0($){return uQ.isBuffer($)||typeof $==="string"}function NV($){if(!Qf0($))$=JSON.stringify($);return $}function gg1($){return function(A,J){Uf0(J),A=NV(A);var X=F$.createHmac("sha"+$,J),Y=(X.update(A),X.digest("base64"));return x11(Y)}}var k11,Kf0="timingSafeEqual"in F$?function(F,A){if(F.byteLength!==A.byteLength)return!1;return F$.timingSafeEqual(F,A)}:function(F,A){if(!k11)k11=Og1();return k11(F,A)};function Bf0($){return function(A,J,X){var Y=gg1($)(A,X);return Kf0(uQ.from(J),uQ.from(Y))}}function fg1($){return function(A,J){bg1(J),A=NV(A);var X=F$.createSign("RSA-SHA"+$),Y=(X.update(A),X.sign(J,"base64"));return x11(Y)}}function vg1($){return function(A,J,X){kg1(X),A=NV(A),J=xg1(J);var Y=F$.createVerify("RSA-SHA"+$);return Y.update(A),Y.verify(X,J,"base64")}}function wf0($){return function(A,J){bg1(J),A=NV(A);var X=F$.createSign("RSA-SHA"+$),Y=(X.update(A),X.sign({key:J,padding:F$.constants.RSA_PKCS1_PSS_PADDING,saltLength:F$.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return x11(Y)}}function qf0($){return function(A,J,X){kg1(X),A=NV(A),J=xg1(J);var Y=F$.createVerify("RSA-SHA"+$);return Y.update(A),Y.verify({key:X,padding:F$.constants.RSA_PKCS1_PSS_PADDING,saltLength:F$.constants.RSA_PSS_SALTLEN_DIGEST},J,"base64")}}function Lf0($){var F=fg1($);return function(){var J=F.apply(null,arguments);return J=_g1.derToJose(J,"ES"+$),J}}function Ef0($){var F=vg1($);return function(J,X,Y){X=_g1.joseToDer(X,"ES"+$).toString("base64");var W=F(J,X,Y);return W}}function Vf0(){return function(){return""}}function Nf0(){return function(F,A){return A===""}}yg1.exports=function(F){var A={hs:gg1,rs:fg1,ps:wf0,es:Lf0,none:Vf0},J={hs:Bf0,rs:vg1,ps:qf0,es:Ef0,none:Nf0},X=F.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!X)throw PF(zf0,F);var Y=(X[1]||X[3]).toLowerCase(),W=X[2];return{sign:A[Y](W),verify:J[Y](W)}}});var f11=O((u02,ug1)=>{var Cf0=Z1("buffer").Buffer;ug1.exports=function(F){if(typeof F==="string")return F;if(typeof F==="number"||Cf0.isBuffer(F))return F.toString();return JSON.stringify(F)}});var pg1=O((h02,lg1)=>{var Mf0=fQ().Buffer,hg1=S11(),Pf0=g11(),Rf0=Z1("stream"),mg1=f11(),v11=Z1("util");function dg1($,F){return Mf0.from($,F).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function If0($,F,A){A=A||"utf8";var J=dg1(mg1($),"binary"),X=dg1(mg1(F),A);return v11.format("%s.%s",J,X)}function cg1($){var{header:F,payload:A}=$,J=$.secret||$.privateKey,X=$.encoding,Y=Pf0(F.alg),W=If0(F,A,X),Z=Y.sign(W,J);return v11.format("%s.%s",W,Z)}function iS($){var F=$.secret;if(F=F==null?$.privateKey:F,F=F==null?$.key:F,/^hs/i.test($.header.alg)===!0&&F==null)throw TypeError("secret must be a string or buffer or a KeyObject");var A=new hg1(F);this.readable=!0,this.header=$.header,this.encoding=$.encoding,this.secret=this.privateKey=this.key=A,this.payload=new hg1($.payload),this.secret.once("close",function(){if(!this.payload.writable&&this.readable)this.sign()}.bind(this)),this.payload.once("close",function(){if(!this.secret.writable&&this.readable)this.sign()}.bind(this))}v11.inherits(iS,Rf0);iS.prototype.sign=function(){try{var F=cg1({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",F),this.emit("data",F),this.emit("end"),this.readable=!1,F}catch(A){this.readable=!1,this.emit("error",A),this.emit("close")}};iS.sign=cg1;lg1.exports=iS});var Ff1=O((m02,$f1)=>{var ng1=fQ().Buffer,ig1=S11(),Tf0=g11(),jf0=Z1("stream"),rg1=f11(),Of0=Z1("util"),Sf0=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function _f0($){return Object.prototype.toString.call($)==="[object Object]"}function kf0($){if(_f0($))return $;try{return JSON.parse($)}catch(F){return}}function ag1($){var F=$.split(".",1)[0];return kf0(ng1.from(F,"base64").toString("binary"))}function bf0($){return $.split(".",2).join(".")}function tg1($){return $.split(".")[2]}function xf0($,F){F=F||"utf8";var A=$.split(".")[1];return ng1.from(A,"base64").toString(F)}function sg1($){return Sf0.test($)&&!!ag1($)}function og1($,F,A){if(!F){var J=Error("Missing algorithm parameter for jws.verify");throw J.code="MISSING_ALGORITHM",J}$=rg1($);var X=tg1($),Y=bf0($),W=Tf0(F);return W.verify(Y,X,A)}function eg1($,F){if(F=F||{},$=rg1($),!sg1($))return null;var A=ag1($);if(!A)return null;var J=xf0($);if(A.typ==="JWT"||F.json)J=JSON.parse(J,F.encoding);return{header:A,payload:J,signature:tg1($)}}function hQ($){$=$||{};var F=$.secret;if(F=F==null?$.publicKey:F,F=F==null?$.key:F,/^hs/i.test($.algorithm)===!0&&F==null)throw TypeError("secret must be a string or buffer or a KeyObject");var A=new ig1(F);this.readable=!0,this.algorithm=$.algorithm,this.encoding=$.encoding,this.secret=this.publicKey=this.key=A,this.signature=new ig1($.signature),this.secret.once("close",function(){if(!this.signature.writable&&this.readable)this.verify()}.bind(this)),this.signature.once("close",function(){if(!this.secret.writable&&this.readable)this.verify()}.bind(this))}Of0.inherits(hQ,jf0);hQ.prototype.verify=function(){try{var F=og1(this.signature.buffer,this.algorithm,this.key.buffer),A=eg1(this.signature.buffer,this.encoding);return this.emit("done",F,A),this.emit("data",F),this.emit("end"),this.readable=!1,F}catch(J){this.readable=!1,this.emit("error",J),this.emit("close")}};hQ.decode=eg1;hQ.isValid=sg1;hQ.verify=og1;$f1.exports=hQ});var y11=O((ff0)=>{var Af1=pg1(),nS=Ff1(),gf0=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];ff0.ALGORITHMS=gf0;ff0.sign=Af1.sign;ff0.verify=nS.verify;ff0.decode=nS.decode;ff0.isValid=nS.isValid;ff0.createSign=function(F){return new Af1(F)};ff0.createVerify=function(F){return new nS(F)}});var Ef1=O((qf1)=>{Object.defineProperty(qf1,"__esModule",{value:!0});qf1.GoogleToken=void 0;var Jf1=rS(Z1("fs")),lf0=c9(),pf0=rS(y11()),if0=rS(Z1("path")),nf0=Z1("util");function rS($,F){if(typeof WeakMap=="function")var A=new WeakMap,J=new WeakMap;return(rS=function(Y,W){if(!W&&Y&&Y.__esModule)return Y;var Z,D,G={__proto__:null,default:Y};if(Y===null||LX(Y)!="object"&&typeof Y!="function")return G;if(Z=W?J:A){if(Z.has(Y))return Z.get(Y);Z.set(Y,G)}for(var z in Y)z!=="default"&&{}.hasOwnProperty.call(Y,z)&&((D=(Z=Object.defineProperty)&&Object.getOwnPropertyDescriptor(Y,z))&&(D.get||D.set)?Z(G,z,D):G[z]=Y[z]);return G})($,F)}function LX($){return LX=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},LX($)}function rf0($,F){Uf1($,F),F.add($)}function af0($,F,A){Uf1($,F),F.set($,A)}function Uf1($,F){if(F.has($))throw TypeError("Cannot initialize the same private elements twice on an object")}function Xf1($,F,A){return $.set(RF($,F),A),A}function Yf1($,F){return $.get(RF($,F))}function RF($,F,A){if(typeof $=="function"?$===F:$.has(F))return arguments.length<3?F:A;throw TypeError("Private element is not present on this object")}function Wf1($,F){for(var A=0;A<F.length;A++){var J=F[A];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty($,Bf1(J.key),J)}}function Qf1($,F,A){return F&&Wf1($.prototype,F),A&&Wf1($,A),Object.defineProperty($,"prototype",{writable:!1}),$}function Kf1($,F){if(!($ instanceof F))throw TypeError("Cannot call a class as a function")}function tf0($,F,A){return F=RV(F),sf0($,l11()?Reflect.construct(F,A||[],RV($).constructor):F.apply($,A))}function sf0($,F){if(F&&(LX(F)=="object"||typeof F=="function"))return F;if(F!==void 0)throw TypeError("Derived constructors may only return object or undefined");return of0($)}function of0($){if($===void 0)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function ef0($,F){if(typeof F!="function"&&F!==null)throw TypeError("Super expression must either be null or a function");$.prototype=Object.create(F&&F.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),Object.defineProperty($,"prototype",{writable:!1}),F&&PV($,F)}function u11($){var F=typeof Map=="function"?new Map:void 0;return u11=function(J){if(J===null||!Fv0(J))return J;if(typeof J!="function")throw TypeError("Super expression must either be null or a function");if(F!==void 0){if(F.has(J))return F.get(J);F.set(J,X)}function X(){return $v0(J,arguments,RV(this).constructor)}return X.prototype=Object.create(J.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),PV(X,J)},u11($)}function $v0($,F,A){if(l11())return Reflect.construct.apply(null,arguments);var J=[null];J.push.apply(J,F);var X=new($.bind.apply($,J));return A&&PV(X,A.prototype),X}function l11(){try{var $=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(F){}return(l11=function(){return!!$})()}function Fv0($){try{return Function.toString.call($).indexOf("[native code]")!==-1}catch(F){return typeof $=="function"}}function PV($,F){return PV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,J){return A.__proto__=J,A},PV($,F)}function RV($){return RV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(F){return F.__proto__||Object.getPrototypeOf(F)},RV($)}function Z5($,F,A){return(F=Bf1(F))in $?Object.defineProperty($,F,{value:A,enumerable:!0,configurable:!0,writable:!0}):$[F]=A,$}function Bf1($){var F=Av0($,"string");return LX(F)=="symbol"?F:F+""}function Av0($,F){if(LX($)!="object"||!$)return $;var A=$[Symbol.toPrimitive];if(A!==void 0){var J=A.call($,F||"default");if(LX(J)!="object")return J;throw TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)($)}function G5(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var $,F,A=typeof Symbol=="function"?Symbol:{},J=A.iterator||"@@iterator",X=A.toStringTag||"@@toStringTag";function Y(Q,B,q,L){var E=B&&B.prototype instanceof Z?B:Z,V=Object.create(E.prototype);return D5(V,"_invoke",function(R,N,S){var C,M,I,T=0,j=S||[],b=!1,g={p:0,n:0,v:$,a:f,f:f.bind($,4),d:function(s,n){return C=s,M=0,I=$,g.n=n,W}};function f(d,s){for(M=d,I=s,F=0;!b&&T&&!n&&F<j.length;F++){var n,L1=j[F],X1=g.p,M1=L1[2];d>3?(n=M1===s)&&(I=L1[(M=L1[4])?5:(M=3,3)],L1[4]=L1[5]=$):L1[0]<=X1&&((n=d<2&&X1<L1[1])?(M=0,g.v=s,g.n=L1[1]):X1<M1&&(n=d<3||L1[0]>s||s>M1)&&(L1[4]=d,L1[5]=s,g.n=M1,M=0))}if(n||d>1)return W;throw b=!0,s}return function(d,s,n){if(T>1)throw TypeError("Generator is already running");for(b&&s===1&&f(s,n),M=s,I=n;(F=M<2?$:I)||!b;){C||(M?M<3?(M>1&&(g.n=-1),f(M,I)):g.n=I:g.v=I);try{if(T=2,C){if(M||(d="next"),F=C[d]){if(!(F=F.call(C,I)))throw TypeError("iterator result is not an object");if(!F.done)return F;I=F.value,M<2&&(M=0)}else M===1&&(F=C.return)&&F.call(C),M<2&&(I=TypeError("The iterator does not provide a '"+d+"' method"),M=1);C=$}else if((F=(b=g.n<0)?I:R.call(N,g))!==W)break}catch(L1){C=$,M=1,I=L1}finally{T=1}}return{value:F,done:b}}}(Q,q,L),!0),V}var W={};function Z(){}function D(){}function G(){}F=Object.getPrototypeOf;var z=[][J]?F(F([][J]())):(D5(F={},J,function(){return this}),F),H=G.prototype=Z.prototype=Object.create(z);function U(Q){return Object.setPrototypeOf?Object.setPrototypeOf(Q,G):(Q.__proto__=G,D5(Q,X,"GeneratorFunction")),Q.prototype=Object.create(H),Q}return D.prototype=G,D5(H,"constructor",G),D5(G,"constructor",D),D.displayName="GeneratorFunction",D5(G,X,"GeneratorFunction"),D5(H),D5(H,X,"Generator"),D5(H,J,function(){return this}),D5(H,"toString",function(){return"[object Generator]"}),(G5=function(){return{w:Y,m:U}})()}function D5($,F,A,J){var X=Object.defineProperty;try{X({},"",{})}catch(Y){X=0}D5=function(W,Z,D,G){if(Z)X?X(W,Z,{value:D,enumerable:!G,configurable:!G,writable:!G}):W[Z]=D;else{var z=function(U,Q){D5(W,U,function(B){return this._invoke(U,Q,B)})};z("next",0),z("throw",1),z("return",2)}},D5($,F,A,J)}function Zf1($,F,A,J,X,Y,W){try{var Z=$[Y](W),D=Z.value}catch(G){return void A(G)}Z.done?F(D):Promise.resolve(D).then(J,X)}function mQ($){return function(){var F=this,A=arguments;return new Promise(function(J,X){var Y=$.apply(F,A);function W(D){Zf1(Y,J,X,W,Z,"next",D)}function Z(D){Zf1(Y,J,X,W,Z,"throw",D)}W(void 0)})}}var Df1=Jf1.readFile?(0,nf0.promisify)(Jf1.readFile):mQ(G5().m(function $(){return G5().w(function(F){while(!0)switch(F.n){case 0:throw new MV("use key rather than keyFile.","MISSING_CREDENTIALS");case 1:return F.a(2)}},$)})),Gf1="https://oauth2.googleapis.com/token",Jv0="https://oauth2.googleapis.com/revoke?token=",MV=function($){function F(A,J){var X;return Kf1(this,F),X=tf0(this,F,[A]),Z5(X,"code",void 0),X.code=J,X}return ef0(F,$),Qf1(F)}(u11(Error)),CV=new WeakMap,fA=new WeakSet,c02=qf1.GoogleToken=function(){function $(F){Kf1(this,$),rf0(this,fA),Z5(this,"expiresAt",void 0),Z5(this,"key",void 0),Z5(this,"keyFile",void 0),Z5(this,"iss",void 0),Z5(this,"sub",void 0),Z5(this,"scope",void 0),Z5(this,"rawToken",void 0),Z5(this,"tokenExpires",void 0),Z5(this,"email",void 0),Z5(this,"additionalClaims",void 0),Z5(this,"eagerRefreshThresholdMillis",void 0),Z5(this,"transporter",{request:function(J){return(0,lf0.request)(J)}}),af0(this,CV,void 0),RF(fA,this,wf1).call(this,F)}return Qf1($,[{key:"accessToken",get:function(){return this.rawToken?this.rawToken.access_token:void 0}},{key:"idToken",get:function(){return this.rawToken?this.rawToken.id_token:void 0}},{key:"tokenType",get:function(){return this.rawToken?this.rawToken.token_type:void 0}},{key:"refreshToken",get:function(){return this.rawToken?this.rawToken.refresh_token:void 0}},{key:"hasExpired",value:function(){var A=new Date().getTime();if(this.rawToken&&this.expiresAt)return A>=this.expiresAt;else return!0}},{key:"isTokenExpiring",value:function(){var A,J=new Date().getTime(),X=(A=this.eagerRefreshThresholdMillis)!==null&&A!==void 0?A:0;if(this.rawToken&&this.expiresAt)return this.expiresAt<=J+X;else return!0}},{key:"getToken",value:function(A){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(LX(A)==="object")J=A,A=void 0;if(J=Object.assign({forceRefresh:!1},J),A){var X=A;RF(fA,this,zf1).call(this,J).then(function(Y){return X(null,Y)},A);return}return RF(fA,this,zf1).call(this,J)}},{key:"getCredentials",value:function(){var F=mQ(G5().m(function J(X){var Y,W,Z,D,G,z,H;return G5().w(function(U){while(!0)switch(U.n){case 0:Y=if0.extname(X),H=Y,U.n=H===".json"?1:H===".der"?4:H===".crt"?4:H===".pem"?4:H===".p12"?6:H===".pfx"?6:7;break;case 1:return U.n=2,Df1(X,"utf8");case 2:if(W=U.v,Z=JSON.parse(W),D=Z.private_key,G=Z.client_email,!(!D||!G)){U.n=3;break}throw new MV("private_key and client_email are required.","MISSING_CREDENTIALS");case 3:return U.a(2,{privateKey:D,clientEmail:G});case 4:return U.n=5,Df1(X,"utf8");case 5:return z=U.v,U.a(2,{privateKey:z});case 6:throw new MV("*.p12 certificates are not supported after v6.1.2. Consider utilizing *.json format or converting *.p12 to *.pem using the OpenSSL CLI.","UNKNOWN_CERTIFICATE_TYPE");case 7:throw new MV("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, and *.pem.","UNKNOWN_CERTIFICATE_TYPE");case 8:return U.a(2)}},J)}));function A(J){return F.apply(this,arguments)}return A}()},{key:"revokeToken",value:function(A){if(A){RF(fA,this,Hf1).call(this).then(function(){return A()},A);return}return RF(fA,this,Hf1).call(this)}}])}();function zf1($){return h11.apply(this,arguments)}function h11(){return h11=mQ(G5().m(function $(F){return G5().w(function(A){while(!0)switch(A.n){case 0:if(!(Yf1(CV,this)&&!F.forceRefresh)){A.n=1;break}return A.a(2,Yf1(CV,this));case 1:return A.p=1,A.n=2,Xf1(CV,this,RF(fA,this,Xv0).call(this,F));case 2:return A.a(2,A.v);case 3:return A.p=3,Xf1(CV,this,void 0),A.f(3);case 4:return A.a(2)}},$,this,[[1,,3,4]])})),h11.apply(this,arguments)}function Xv0($){return m11.apply(this,arguments)}function m11(){return m11=mQ(G5().m(function $(F){var A;return G5().w(function(J){while(!0)switch(J.n){case 0:if(!(this.isTokenExpiring()===!1&&F.forceRefresh===!1)){J.n=1;break}return J.a(2,Promise.resolve(this.rawToken));case 1:if(!(!this.key&&!this.keyFile)){J.n=2;break}throw Error("No key or keyFile set.");case 2:if(!(!this.key&&this.keyFile)){J.n=4;break}return J.n=3,this.getCredentials(this.keyFile);case 3:if(A=J.v,this.key=A.privateKey,this.iss=A.clientEmail||this.iss,!A.clientEmail)RF(fA,this,Yv0).call(this);case 4:return J.a(2,RF(fA,this,Wv0).call(this))}},$,this)})),m11.apply(this,arguments)}function Yv0(){if(!this.iss)throw new MV("email is required.","MISSING_CREDENTIALS")}function Hf1(){return d11.apply(this,arguments)}function d11(){return d11=mQ(G5().m(function $(){var F;return G5().w(function(A){while(!0)switch(A.n){case 0:if(this.accessToken){A.n=1;break}throw Error("No token to revoke.");case 1:return F=Jv0+this.accessToken,A.n=2,this.transporter.request({url:F,retry:!0});case 2:RF(fA,this,wf1).call(this,{email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims});case 3:return A.a(2)}},$,this)})),d11.apply(this,arguments)}function wf1(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.keyFile=$.keyFile,this.key=$.key,this.rawToken=void 0,this.iss=$.email||$.iss,this.sub=$.sub,this.additionalClaims=$.additionalClaims,LX($.scope)==="object")this.scope=$.scope.join(" ");else this.scope=$.scope;if(this.eagerRefreshThresholdMillis=$.eagerRefreshThresholdMillis,$.transporter)this.transporter=$.transporter}function Wv0(){return c11.apply(this,arguments)}function c11(){return c11=mQ(G5().m(function $(){var F,A,J,X,Y,W,Z,D,G,z;return G5().w(function(H){while(!0)switch(H.n){case 0:return F=Math.floor(new Date().getTime()/1000),A=this.additionalClaims||{},J=Object.assign({iss:this.iss,scope:this.scope,aud:Gf1,exp:F+3600,iat:F,sub:this.sub},A),X=pf0.sign({header:{alg:"RS256"},payload:J,secret:this.key}),H.p=1,H.n=2,this.transporter.request({method:"POST",url:Gf1,data:new URLSearchParams({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:X}),responseType:"json",retryConfig:{httpMethodsToRetry:["POST"]}});case 2:return Y=H.v,this.rawToken=Y.data,this.expiresAt=Y.data.expires_in===null||Y.data.expires_in===void 0?void 0:(F+Y.data.expires_in)*1000,H.a(2,this.rawToken);case 3:if(H.p=3,z=H.v,this.rawToken=void 0,this.tokenExpires=void 0,D=z.response&&(W=z.response)!==null&&W!==void 0&&W.data?(Z=z.response)===null||Z===void 0?void 0:Z.data:{},D.error)G=D.error_description?": ".concat(D.error_description):"",z.message="".concat(D.error).concat(G);throw z;case 4:return H.a(2)}},$,this,[[1,3]])})),c11.apply(this,arguments)}});var i11=O((Nf1)=>{Object.defineProperty(Nf1,"__esModule",{value:!0});Nf1.JWTAccess=void 0;var Zv0=y11(),Dv0=MF(),Vf1={alg:"RS256",typ:"JWT"};class p11{email;key;keyId;projectId;eagerRefreshThresholdMillis;cache=new Dv0.LRUCache({capacity:500,maxAge:3600000});constructor($,F,A,J){this.email=$,this.key=F,this.keyId=A,this.eagerRefreshThresholdMillis=J??300000}getCachedKey($,F){let A=$;if(F&&Array.isArray(F)&&F.length)A=$?`${$}_${F.join("_")}`:`${F.join("_")}`;else if(typeof F==="string")A=$?`${$}_${F}`:F;if(!A)throw Error("Scopes or url must be provided");return A}getRequestHeaders($,F,A){let J=this.getCachedKey($,A),X=this.cache.get(J),Y=Date.now();if(X&&X.expiration-Y>this.eagerRefreshThresholdMillis)return new Headers(X.headers);let W=Math.floor(Date.now()/1000),Z=p11.getExpirationTime(W),D;if(Array.isArray(A))A=A.join(" ");if(A)D={iss:this.email,sub:this.email,scope:A,exp:Z,iat:W};else D={iss:this.email,sub:this.email,aud:$,exp:Z,iat:W};if(F){for(let Q in D)if(F[Q])throw Error(`The '${Q}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let G=this.keyId?{...Vf1,kid:this.keyId}:Vf1,z=Object.assign(D,F),H=Zv0.sign({header:G,payload:z,secret:this.key}),U=new Headers({authorization:`Bearer ${H}`});return this.cache.set(J,{expiration:Z*1000,headers:U}),U}static getExpirationTime($){return $+3600}fromJSON($){if(!$)throw Error("Must pass in a JSON object containing the service account auth settings.");if(!$.client_email)throw Error("The incoming JSON object does not contain a client_email field");if(!$.private_key)throw Error("The incoming JSON object does not contain a private_key field");this.email=$.client_email,this.key=$.private_key,this.keyId=$.private_key_id,this.projectId=$.project_id}fromStream($,F){if(F)this.fromStreamAsync($).then(()=>F(),F);else return this.fromStreamAsync($)}fromStreamAsync($){return new Promise((F,A)=>{if(!$)A(Error("Must pass in a stream containing the service account auth settings."));let J="";$.setEncoding("utf8").on("data",(X)=>J+=X).on("error",A).on("end",()=>{try{let X=JSON.parse(J);this.fromJSON(X),F()}catch(X){A(X)}})})}}Nf1.JWTAccess=p11});var r11=O((Pf1)=>{Object.defineProperty(Pf1,"__esModule",{value:!0});Pf1.JWT=void 0;var Mf1=Ef1(),Gv0=i11(),zv0=ZG(),aS=W5();class n11 extends zv0.OAuth2Client{email;keyFile;key;keyId;defaultScopes;scopes;scope;subject;gtoken;additionalClaims;useJWTAccessWithScope;defaultServicePath;access;constructor($={}){super($);this.email=$.email,this.keyFile=$.keyFile,this.key=$.key,this.keyId=$.keyId,this.scopes=$.scopes,this.subject=$.subject,this.additionalClaims=$.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped($){let F=new n11(this);return F.scopes=$,F}async getRequestMetadataAsync($){$=this.defaultServicePath?`https://${this.defaultServicePath}/`:$;let F=!this.hasUserScopes()&&$||this.useJWTAccessWithScope&&this.hasAnyScopes()||this.universeDomain!==aS.DEFAULT_UNIVERSE;if(this.subject&&this.universeDomain!==aS.DEFAULT_UNIVERSE)throw RangeError(`Service Account user is configured for the credential. Domain-wide delegation is not supported in universes other than ${aS.DEFAULT_UNIVERSE}`);if(!this.apiKey&&F)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:A}=await this.refreshToken();return{headers:this.addSharedMetadataHeaders(new Headers({authorization:`Bearer ${A.id_token}`}))}}else{if(!this.access)this.access=new Gv0.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis);let A;if(this.hasUserScopes())A=this.scopes;else if(!$)A=this.defaultScopes;let J=this.useJWTAccessWithScope||this.universeDomain!==aS.DEFAULT_UNIVERSE,X=await this.access.getRequestHeaders($??void 0,this.additionalClaims,J?A:void 0);return{headers:this.addSharedMetadataHeaders(X)}}else if(this.hasAnyScopes()||this.apiKey)return super.getRequestMetadataAsync($);else return{headers:new Headers}}async fetchIdToken($){let F=new Mf1.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:$},transporter:this.transporter});if(await F.getToken({forceRefresh:!0}),!F.idToken)throw Error("Unknown error: Failed to fetch ID token");return F.idToken}hasUserScopes(){if(!this.scopes)return!1;return this.scopes.length>0}hasAnyScopes(){if(this.scopes&&this.scopes.length>0)return!0;if(this.defaultScopes&&this.defaultScopes.length>0)return!0;return!1}authorize($){if($)this.authorizeAsync().then((F)=>$(null,F),$);else return this.authorizeAsync()}async authorizeAsync(){let $=await this.refreshToken();if(!$)throw Error("No result returned");return this.credentials=$.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,$.tokens}async refreshTokenNoCache(){let $=this.createGToken(),A={access_token:(await $.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:$.expiresAt,id_token:$.idToken};return this.emit("tokens",A),{res:null,tokens:A}}createGToken(){if(!this.gtoken)this.gtoken=new Mf1.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims,transporter:this.transporter});return this.gtoken}fromJSON($){if(!$)throw Error("Must pass in a JSON object containing the service account auth settings.");if(!$.client_email)throw Error("The incoming JSON object does not contain a client_email field");if(!$.private_key)throw Error("The incoming JSON object does not contain a private_key field");this.email=$.client_email,this.key=$.private_key,this.keyId=$.private_key_id,this.projectId=$.project_id,this.quotaProjectId=$.quota_project_id,this.universeDomain=$.universe_domain||this.universeDomain}fromStream($,F){if(F)this.fromStreamAsync($).then(()=>F(),F);else return this.fromStreamAsync($)}fromStreamAsync($){return new Promise((F,A)=>{if(!$)throw Error("Must pass in a stream containing the service account auth settings.");let J="";$.setEncoding("utf8").on("error",A).on("data",(X)=>J+=X).on("end",()=>{try{let X=JSON.parse(J);this.fromJSON(X),F()}catch(X){A(X)}})})}fromAPIKey($){if(typeof $!=="string")throw Error("Must provide an API Key string.");this.apiKey=$}async getCredentials(){if(this.key)return{private_key:this.key,client_email:this.email};else if(this.keyFile){let F=await this.createGToken().getCredentials(this.keyFile);return{private_key:F.privateKey,client_email:F.clientEmail}}throw Error("A key or a keyFile must be provided to getCredentials.")}}Pf1.JWT=n11});var a11=O((If1)=>{Object.defineProperty(If1,"__esModule",{value:!0});If1.UserRefreshClient=If1.USER_REFRESH_ACCOUNT_TYPE=void 0;var Hv0=ZG(),Uv0=W5();If1.USER_REFRESH_ACCOUNT_TYPE="authorized_user";class tS extends Hv0.OAuth2Client{_refreshToken;constructor($,F,A,J,X){let Y=$&&typeof $==="object"?$:{clientId:$,clientSecret:F,refreshToken:A,eagerRefreshThresholdMillis:J,forceRefreshOnFailure:X};super(Y);this._refreshToken=Y.refreshToken,this.credentials.refresh_token=Y.refreshToken}async refreshTokenNoCache(){return super.refreshTokenNoCache(this._refreshToken)}async fetchIdToken($){let F={...tS.RETRY_CONFIG,url:this.endpoints.oauth2TokenUrl,method:"POST",data:new URLSearchParams({client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token",refresh_token:this._refreshToken,target_audience:$})};return Uv0.AuthClient.setMethodName(F,"fetchIdToken"),(await this.transporter.request(F)).data.id_token}fromJSON($){if(!$)throw Error("Must pass in a JSON object containing the user refresh token");if($.type!=="authorized_user")throw Error('The incoming JSON object does not have the "authorized_user" type');if(!$.client_id)throw Error("The incoming JSON object does not contain a client_id field");if(!$.client_secret)throw Error("The incoming JSON object does not contain a client_secret field");if(!$.refresh_token)throw Error("The incoming JSON object does not contain a refresh_token field");this._clientId=$.client_id,this._clientSecret=$.client_secret,this._refreshToken=$.refresh_token,this.credentials.refresh_token=$.refresh_token,this.quotaProjectId=$.quota_project_id,this.universeDomain=$.universe_domain||this.universeDomain}fromStream($,F){if(F)this.fromStreamAsync($).then(()=>F(),F);else return this.fromStreamAsync($)}async fromStreamAsync($){return new Promise((F,A)=>{if(!$)return A(Error("Must pass in a stream containing the user refresh token."));let J="";$.setEncoding("utf8").on("error",A).on("data",(X)=>J+=X).on("end",()=>{try{let X=JSON.parse(J);return this.fromJSON(X),F()}catch(X){return A(X)}})})}static fromJSON($){let F=new tS;return F.fromJSON($),F}}If1.UserRefreshClient=tS});var t11=O((Of1)=>{Object.defineProperty(Of1,"__esModule",{value:!0});Of1.Impersonated=Of1.IMPERSONATED_ACCOUNT_TYPE=void 0;var jf1=ZG(),Kv0=c9(),Bv0=MF();Of1.IMPERSONATED_ACCOUNT_TYPE="impersonated_service_account";class IV extends jf1.OAuth2Client{sourceClient;targetPrincipal;targetScopes;delegates;lifetime;endpoint;constructor($={}){super($);if(this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=$.sourceClient??new jf1.OAuth2Client,this.targetPrincipal=$.targetPrincipal??"",this.delegates=$.delegates??[],this.targetScopes=$.targetScopes??[],this.lifetime=$.lifetime??3600,!(0,Bv0.originalOrCamelOptions)($).get("universe_domain"))this.universeDomain=this.sourceClient.universeDomain;else if(this.sourceClient.universeDomain!==this.universeDomain)throw RangeError(`Universe domain ${this.sourceClient.universeDomain} in source credentials does not match ${this.universeDomain} universe domain set for impersonated credentials.`);this.endpoint=$.endpoint??`https://iamcredentials.${this.universeDomain}`}async sign($){await this.sourceClient.getAccessToken();let F=`projects/-/serviceAccounts/${this.targetPrincipal}`,A=`${this.endpoint}/v1/${F}:signBlob`,J={delegates:this.delegates,payload:Buffer.from($).toString("base64")};return(await this.sourceClient.request({...IV.RETRY_CONFIG,url:A,data:J,method:"POST"})).data}getTargetPrincipal(){return this.targetPrincipal}async refreshToken(){try{await this.sourceClient.getAccessToken();let $="projects/-/serviceAccounts/"+this.targetPrincipal,F=`${this.endpoint}/v1/${$}:generateAccessToken`,A={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},J=await this.sourceClient.request({...IV.RETRY_CONFIG,url:F,data:A,method:"POST"}),X=J.data;return this.credentials.access_token=X.accessToken,this.credentials.expiry_date=Date.parse(X.expireTime),{tokens:this.credentials,res:J}}catch($){if(!($ instanceof Error))throw $;let F=0,A="";if($ instanceof Kv0.GaxiosError)F=$?.response?.data?.error?.status,A=$?.response?.data?.error?.message;if(F&&A)throw $.message=`${F}: unable to impersonate: ${A}`,$;else throw $.message=`unable to impersonate: ${$}`,$}}async fetchIdToken($,F){await this.sourceClient.getAccessToken();let A=`projects/-/serviceAccounts/${this.targetPrincipal}`,J=`${this.endpoint}/v1/${A}:generateIdToken`,X={delegates:this.delegates,audience:$,includeEmail:F?.includeEmail??!0,useEmailAzp:F?.includeEmail??!0};return(await this.sourceClient.request({...IV.RETRY_CONFIG,url:J,data:X,method:"POST"})).data.token}}Of1.Impersonated=IV});var s11=O((kf1)=>{Object.defineProperty(kf1,"__esModule",{value:!0});kf1.OAuthClientAuthHandler=void 0;kf1.getErrorFromOAuthErrorResponse=Ev0;var dQ=c9(),qv0=wV(),Lv0=["PUT","POST","PATCH"];class _f1{#$=(0,qv0.createCrypto)();#F;transporter;constructor($){if($&&"clientId"in $)this.#F=$,this.transporter=new dQ.Gaxios;else this.#F=$?.clientAuthentication,this.transporter=$?.transporter||new dQ.Gaxios}applyClientAuthenticationOptions($,F){if($.headers=dQ.Gaxios.mergeHeaders($.headers),this.injectAuthenticatedHeaders($,F),!F)this.injectAuthenticatedRequestBody($)}injectAuthenticatedHeaders($,F){if(F)$.headers=dQ.Gaxios.mergeHeaders($.headers,{authorization:`Bearer ${F}`});else if(this.#F?.confidentialClientType==="basic"){$.headers=dQ.Gaxios.mergeHeaders($.headers);let A=this.#F.clientId,J=this.#F.clientSecret||"",X=this.#$.encodeBase64StringUtf8(`${A}:${J}`);dQ.Gaxios.mergeHeaders($.headers,{authorization:`Basic ${X}`})}}injectAuthenticatedRequestBody($){if(this.#F?.confidentialClientType==="request-body"){let F=($.method||"GET").toUpperCase();if(!Lv0.includes(F))throw Error(`${F} HTTP method does not support ${this.#F.confidentialClientType} client authentication`);let J=new Headers($.headers).get("content-type");if(J?.startsWith("application/x-www-form-urlencoded")||$.data instanceof URLSearchParams){let X=new URLSearchParams($.data??"");X.append("client_id",this.#F.clientId),X.append("client_secret",this.#F.clientSecret||""),$.data=X}else if(J?.startsWith("application/json"))$.data=$.data||{},Object.assign($.data,{client_id:this.#F.clientId,client_secret:this.#F.clientSecret||""});else throw Error(`${J} content-types are not supported with ${this.#F.confidentialClientType} client authentication`)}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}kf1.OAuthClientAuthHandler=_f1;function Ev0($,F){let{error:A,error_description:J,error_uri:X}=$,Y=`Error code ${A}`;if(typeof J<"u")Y+=`: ${J}`;if(typeof X<"u")Y+=` - ${X}`;let W=Error(Y);if(F){let Z=Object.keys(F);if(F.stack)Z.push("stack");Z.forEach((D)=>{if(D!=="message")Object.defineProperty(W,D,{value:F[D],writable:!1,enumerable:!0})})}return W}});var sS=O((gf1)=>{Object.defineProperty(gf1,"__esModule",{value:!0});gf1.StsCredentials=void 0;var Nv0=c9(),Cv0=W5(),xf1=s11(),Mv0=MF();class o11 extends xf1.OAuthClientAuthHandler{#$;constructor($={tokenExchangeEndpoint:""},F){if(typeof $!=="object"||$ instanceof URL)$={tokenExchangeEndpoint:$,clientAuthentication:F};super($);this.#$=$.tokenExchangeEndpoint}async exchangeToken($,F,A){let J={grant_type:$.grantType,resource:$.resource,audience:$.audience,scope:$.scope?.join(" "),requested_token_type:$.requestedTokenType,subject_token:$.subjectToken,subject_token_type:$.subjectTokenType,actor_token:$.actingParty?.actorToken,actor_token_type:$.actingParty?.actorTokenType,options:A&&JSON.stringify(A)},X={...o11.RETRY_CONFIG,url:this.#$.toString(),method:"POST",headers:F,data:new URLSearchParams((0,Mv0.removeUndefinedValuesInObject)(J))};Cv0.AuthClient.setMethodName(X,"exchangeToken"),this.applyClientAuthenticationOptions(X);try{let Y=await this.transporter.request(X),W=Y.data;return W.res=Y,W}catch(Y){if(Y instanceof Nv0.GaxiosError&&Y.response)throw(0,xf1.getErrorFromOAuthErrorResponse)(Y.response.data,Y);throw Y}}}gf1.StsCredentials=o11});var PW=O((yf1)=>{Object.defineProperty(yf1,"__esModule",{value:!0});yf1.BaseExternalAccountClient=yf1.CLOUD_RESOURCE_MANAGER=yf1.EXTERNAL_ACCOUNT_TYPE=yf1.EXPIRATION_TIME_OFFSET=void 0;var Pv0=c9(),Rv0=Z1("stream"),e11=W5(),Iv0=sS(),vf1=MF(),Tv0=N11(),jv0="urn:ietf:params:oauth:grant-type:token-exchange",Ov0="urn:ietf:params:oauth:token-type:access_token",$01="https://www.googleapis.com/auth/cloud-platform",Sv0=3600;yf1.EXPIRATION_TIME_OFFSET=300000;yf1.EXTERNAL_ACCOUNT_TYPE="external_account";yf1.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";var _v0="//iam\\.googleapis\\.com/locations/[^/]+/workforcePools/[^/]+/providers/.+",kv0="https://sts.{universeDomain}/v1/token";class oS extends e11.AuthClient{scopes;projectNumber;audience;subjectTokenType;stsCredential;clientAuth;credentialSourceType;cachedAccessToken;serviceAccountImpersonationUrl;serviceAccountImpersonationLifetime;workforcePoolUserProject;configLifetimeRequested;tokenUrl;cloudResourceManagerURL;supplierContext;#$=null;constructor($){super($);let F=(0,vf1.originalOrCamelOptions)($),A=F.get("type");if(A&&A!==yf1.EXTERNAL_ACCOUNT_TYPE)throw Error(`Expected "${yf1.EXTERNAL_ACCOUNT_TYPE}" type but received "${$.type}"`);let J=F.get("client_id"),X=F.get("client_secret");this.tokenUrl=F.get("token_url")??kv0.replace("{universeDomain}",this.universeDomain);let Y=F.get("subject_token_type"),W=F.get("workforce_pool_user_project"),Z=F.get("service_account_impersonation_url"),D=F.get("service_account_impersonation"),G=(0,vf1.originalOrCamelOptions)(D).get("token_lifetime_seconds");if(this.cloudResourceManagerURL=new URL(F.get("cloud_resource_manager_url")||`https://cloudresourcemanager.${this.universeDomain}/v1/projects/`),J)this.clientAuth={confidentialClientType:"basic",clientId:J,clientSecret:X};this.stsCredential=new Iv0.StsCredentials({tokenExchangeEndpoint:this.tokenUrl,clientAuthentication:this.clientAuth}),this.scopes=F.get("scopes")||[$01],this.cachedAccessToken=null,this.audience=F.get("audience"),this.subjectTokenType=Y,this.workforcePoolUserProject=W;let z=new RegExp(_v0);if(this.workforcePoolUserProject&&!this.audience.match(z))throw Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");if(this.serviceAccountImpersonationUrl=Z,this.serviceAccountImpersonationLifetime=G,this.serviceAccountImpersonationLifetime)this.configLifetimeRequested=!0;else this.configLifetimeRequested=!1,this.serviceAccountImpersonationLifetime=Sv0;this.projectNumber=this.getProjectNumber(this.audience),this.supplierContext={audience:this.audience,subjectTokenType:this.subjectTokenType,transporter:this.transporter}}getServiceAccountEmail(){if(this.serviceAccountImpersonationUrl){if(this.serviceAccountImpersonationUrl.length>256)throw RangeError(`URL is too long: ${this.serviceAccountImpersonationUrl}`);return/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl)?.groups?.email||null}return null}setCredentials($){super.setCredentials($),this.cachedAccessToken=$}async getAccessToken(){if(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))await this.refreshAccessTokenAsync();return{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let $=await this.getAccessToken(),F=new Headers({authorization:`Bearer ${$.token}`});return this.addSharedMetadataHeaders(F)}request($,F){if(F)this.requestAsync($).then((A)=>F(null,A),(A)=>{return F(A,A.response)});else return this.requestAsync($)}async getProjectId(){let $=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;else if($){let F=await this.getRequestHeaders(),A={...oS.RETRY_CONFIG,headers:F,url:`${this.cloudResourceManagerURL.toString()}${$}`};e11.AuthClient.setMethodName(A,"getProjectId");let J=await this.transporter.request(A);return this.projectId=J.data.projectId,this.projectId}return null}async requestAsync($,F=!1){let A;try{let J=await this.getRequestHeaders();$.headers=Pv0.Gaxios.mergeHeaders($.headers),this.addUserProjectAndAuthHeaders($.headers,J),A=await this.transporter.request($)}catch(J){let X=J.response;if(X){let Y=X.status,W=X.config.data instanceof Rv0.Readable;if(!F&&(Y===401||Y===403)&&!W&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync($,!0)}throw J}return A}async refreshAccessTokenAsync(){this.#$=this.#$||this.#F();try{return await this.#$}finally{this.#$=null}}async#F(){let $=await this.retrieveSubjectToken(),F={grantType:jv0,audience:this.audience,requestedTokenType:Ov0,subjectToken:$,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[$01]:this.getScopesArray()},A=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,J=new Headers({"x-goog-api-client":this.getMetricsHeaderValue()}),X=await this.stsCredential.exchangeToken(F,J,A);if(this.serviceAccountImpersonationUrl)this.cachedAccessToken=await this.getImpersonatedAccessToken(X.access_token);else if(X.expires_in)this.cachedAccessToken={access_token:X.access_token,expiry_date:new Date().getTime()+X.expires_in*1000,res:X.res};else this.cachedAccessToken={access_token:X.access_token,res:X.res};return this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken}getProjectNumber($){let F=$.match(/\/projects\/([^/]+)/);if(!F)return null;return F[1]}async getImpersonatedAccessToken($){let F={...oS.RETRY_CONFIG,url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${$}`},data:{scope:this.getScopesArray(),lifetime:this.serviceAccountImpersonationLifetime+"s"}};e11.AuthClient.setMethodName(F,"getImpersonatedAccessToken");let A=await this.transporter.request(F),J=A.data;return{access_token:J.accessToken,expiry_date:new Date(J.expireTime).getTime(),res:A}}isExpired($){let F=new Date().getTime();return $.expiry_date?F>=$.expiry_date-this.eagerRefreshThresholdMillis:!1}getScopesArray(){if(typeof this.scopes==="string")return[this.scopes];return this.scopes||[$01]}getMetricsHeaderValue(){let $=process.version.replace(/^v/,""),F=this.serviceAccountImpersonationUrl!==void 0,A=this.credentialSourceType?this.credentialSourceType:"unknown";return`gl-node/${$} auth/${Tv0.pkg.version} google-byoid-sdk source/${A} sa-impersonation/${F} config-lifetime/${this.configLifetimeRequested}`}getTokenUrl(){return this.tokenUrl}}yf1.BaseExternalAccountClient=oS});var cf1=O((mf1)=>{Object.defineProperty(mf1,"__esModule",{value:!0});mf1.FileSubjectTokenSupplier=void 0;var A01=Z1("util"),J01=Z1("fs"),gv0=(0,A01.promisify)(J01.readFile??(()=>{})),fv0=(0,A01.promisify)(J01.realpath??(()=>{})),vv0=(0,A01.promisify)(J01.lstat??(()=>{}));class hf1{filePath;formatType;subjectTokenFieldName;constructor($){this.filePath=$.filePath,this.formatType=$.formatType,this.subjectTokenFieldName=$.subjectTokenFieldName}async getSubjectToken(){let $=this.filePath;try{if($=await fv0($),!(await vv0($)).isFile())throw Error()}catch(J){if(J instanceof Error)J.message=`The file at ${$} does not exist, or it is not a file. ${J.message}`;throw J}let F,A=await gv0($,{encoding:"utf8"});if(this.formatType==="text")F=A;else if(this.formatType==="json"&&this.subjectTokenFieldName)F=JSON.parse(A)[this.subjectTokenFieldName];if(!F)throw Error("Unable to parse the subject_token from the credential_source file");return F}}mf1.FileSubjectTokenSupplier=hf1});var nf1=O((pf1)=>{Object.defineProperty(pf1,"__esModule",{value:!0});pf1.UrlSubjectTokenSupplier=void 0;var yv0=W5();class lf1{url;headers;formatType;subjectTokenFieldName;additionalGaxiosOptions;constructor($){this.url=$.url,this.formatType=$.formatType,this.subjectTokenFieldName=$.subjectTokenFieldName,this.headers=$.headers,this.additionalGaxiosOptions=$.additionalGaxiosOptions}async getSubjectToken($){let F={...this.additionalGaxiosOptions,url:this.url,method:"GET",headers:this.headers};yv0.AuthClient.setMethodName(F,"getSubjectToken");let A;if(this.formatType==="text")A=(await $.transporter.request(F)).data;else if(this.formatType==="json"&&this.subjectTokenFieldName)A=(await $.transporter.request(F)).data[this.subjectTokenFieldName];if(!A)throw Error("Unable to parse the subject_token from the credential_source URL");return A}}pf1.UrlSubjectTokenSupplier=lf1});var sf1=O((af1)=>{Object.defineProperty(af1,"__esModule",{value:!0});af1.CertificateSubjectTokenSupplier=af1.InvalidConfigurationError=af1.CertificateSourceUnavailableError=af1.CERTIFICATE_CONFIGURATION_ENV_VARIABLE=void 0;var eS=MF(),$_=Z1("fs"),F_=Z1("crypto"),uv0=Z1("https");af1.CERTIFICATE_CONFIGURATION_ENV_VARIABLE="GOOGLE_API_CERTIFICATE_CONFIG";class EX extends Error{constructor($){super($);this.name="CertificateSourceUnavailableError"}}af1.CertificateSourceUnavailableError=EX;class IF extends Error{constructor($){super($);this.name="InvalidConfigurationError"}}af1.InvalidConfigurationError=IF;class rf1{certificateConfigPath;trustChainPath;cert;key;constructor($){if(!$.useDefaultCertificateConfig&&!$.certificateConfigLocation)throw new IF("Either `useDefaultCertificateConfig` must be true or a `certificateConfigLocation` must be provided.");if($.useDefaultCertificateConfig&&$.certificateConfigLocation)throw new IF("Both `useDefaultCertificateConfig` and `certificateConfigLocation` cannot be provided.");this.trustChainPath=$.trustChainPath,this.certificateConfigPath=$.certificateConfigLocation??""}async createMtlsHttpsAgent(){if(!this.key||!this.cert)throw new IF("Cannot create mTLS Agent with missing certificate or key");return new uv0.Agent({key:this.key,cert:this.cert})}async getSubjectToken(){this.certificateConfigPath=await this.#$();let{certPath:$,keyPath:F}=await this.#F();return{cert:this.cert,key:this.key}=await this.#A($,F),await this.#J(this.cert)}async#$(){let $=this.certificateConfigPath;if($){if(await(0,eS.isValidFile)($))return $;throw new EX(`Provided certificate config path is invalid: ${$}`)}let F=process.env[af1.CERTIFICATE_CONFIGURATION_ENV_VARIABLE];if(F){if(await(0,eS.isValidFile)(F))return F;throw new EX(`Path from environment variable "${af1.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" is invalid: ${F}`)}let A=(0,eS.getWellKnownCertificateConfigFileLocation)();if(await(0,eS.isValidFile)(A))return A;throw new EX(`Could not find certificate configuration file. Searched override path, the "${af1.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" env var, and the gcloud path (${A}).`)}async#F(){let $=this.certificateConfigPath,F;try{F=await $_.promises.readFile($,"utf8")}catch(A){throw new EX(`Failed to read certificate config file at: ${$}`)}try{let A=JSON.parse(F),J=A?.cert_configs?.workload?.cert_path,X=A?.cert_configs?.workload?.key_path;if(!J||!X)throw new IF(`Certificate config file (${$}) is missing required "cert_path" or "key_path" in the workload config.`);return{certPath:J,keyPath:X}}catch(A){if(A instanceof IF)throw A;throw new IF(`Failed to parse certificate config from ${$}: ${A.message}`)}}async#A($,F){let A,J;try{A=await $_.promises.readFile($),new F_.X509Certificate(A)}catch(X){let Y=X instanceof Error?X.message:String(X);throw new EX(`Failed to read certificate file at ${$}: ${Y}`)}try{J=await $_.promises.readFile(F),(0,F_.createPrivateKey)(J)}catch(X){let Y=X instanceof Error?X.message:String(X);throw new EX(`Failed to read private key file at ${F}: ${Y}`)}return{cert:A,key:J}}async#J($){let F=new F_.X509Certificate($);if(!this.trustChainPath)return JSON.stringify([F.raw.toString("base64")]);try{let X=((await $_.promises.readFile(this.trustChainPath,"utf8")).match(/-----BEGIN CERTIFICATE-----[^-]+-----END CERTIFICATE-----/g)??[]).map((Z,D)=>{try{return new F_.X509Certificate(Z)}catch(G){let z=G instanceof Error?G.message:String(G);throw new IF(`Failed to parse certificate at index ${D} in trust chain file ${this.trustChainPath}: ${z}`)}}),Y=X.findIndex((Z)=>F.raw.equals(Z.raw)),W;if(Y===-1)W=[F,...X];else if(Y===0)W=X;else throw new IF(`Leaf certificate exists in the trust chain but is not the first entry (found at index ${Y}).`);return JSON.stringify(W.map((Z)=>Z.raw.toString("base64")))}catch(A){if(A instanceof IF)throw A;let J=A instanceof Error?A.message:String(A);throw new EX(`Failed to process certificate chain from ${this.trustChainPath}: ${J}`)}}}af1.CertificateSubjectTokenSupplier=rf1});var W01=O(($v1)=>{Object.defineProperty($v1,"__esModule",{value:!0});$v1.IdentityPoolClient=void 0;var dv0=PW(),X01=MF(),cv0=cf1(),lv0=nf1(),of1=sf1(),pv0=sS(),ef1=c9();class Y01 extends dv0.BaseExternalAccountClient{subjectTokenSupplier;constructor($){super($);let F=(0,X01.originalOrCamelOptions)($),A=F.get("credential_source"),J=F.get("subject_token_supplier");if(!A&&!J)throw Error("A credential source or subject token supplier must be specified.");if(A&&J)throw Error("Only one of credential source or subject token supplier can be specified.");if(J)this.subjectTokenSupplier=J,this.credentialSourceType="programmatic";else{let X=(0,X01.originalOrCamelOptions)(A),Y=(0,X01.originalOrCamelOptions)(X.get("format")),W=Y.get("type")||"text",Z=Y.get("subject_token_field_name");if(W!=="json"&&W!=="text")throw Error(`Invalid credential_source format "${W}"`);if(W==="json"&&!Z)throw Error("Missing subject_token_field_name for JSON credential_source format");let D=X.get("file"),G=X.get("url"),z=X.get("certificate"),H=X.get("headers");if(D&&G||G&&z||D&&z)throw Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.');else if(D)this.credentialSourceType="file",this.subjectTokenSupplier=new cv0.FileSubjectTokenSupplier({filePath:D,formatType:W,subjectTokenFieldName:Z});else if(G)this.credentialSourceType="url",this.subjectTokenSupplier=new lv0.UrlSubjectTokenSupplier({url:G,formatType:W,subjectTokenFieldName:Z,headers:H,additionalGaxiosOptions:Y01.RETRY_CONFIG});else if(z){this.credentialSourceType="certificate";let U=new of1.CertificateSubjectTokenSupplier({useDefaultCertificateConfig:z.use_default_certificate_config,certificateConfigLocation:z.certificate_config_location,trustChainPath:z.trust_chain_path});this.subjectTokenSupplier=U}else throw Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.')}}async retrieveSubjectToken(){let $=await this.subjectTokenSupplier.getSubjectToken(this.supplierContext);if(this.subjectTokenSupplier instanceof of1.CertificateSubjectTokenSupplier){let F=await this.subjectTokenSupplier.createMtlsHttpsAgent();this.stsCredential=new pv0.StsCredentials({tokenExchangeEndpoint:this.getTokenUrl(),clientAuthentication:this.clientAuth,transporter:new ef1.Gaxios({agent:F})}),this.transporter=new ef1.Gaxios({...this.transporter.defaults||{},agent:F})}return $}}$v1.IdentityPoolClient=Y01});var Z01=O((Yv1)=>{Object.defineProperty(Yv1,"__esModule",{value:!0});Yv1.AwsRequestSigner=void 0;var J_=c9(),Jv1=wV(),Av1="AWS4-HMAC-SHA256",iv0="aws4_request";class Xv1{getCredentials;region;crypto;constructor($,F){this.getCredentials=$,this.region=F,this.crypto=(0,Jv1.createCrypto)()}async getRequestOptions($){if(!$.url)throw RangeError('"url" is required in "amzOptions"');let F=typeof $.data==="object"?JSON.stringify($.data):$.data,A=$.url,J=$.method||"GET",X=$.body||F,Y=$.headers,W=await this.getCredentials(),Z=new URL(A);if(typeof X!=="string"&&X!==void 0)throw TypeError(`'requestPayload' is expected to be a string if provided. Got: ${X}`);let D=await rv0({crypto:this.crypto,host:Z.host,canonicalUri:Z.pathname,canonicalQuerystring:Z.search.slice(1),method:J,region:this.region,securityCredentials:W,requestPayload:X,additionalAmzHeaders:Y}),G=J_.Gaxios.mergeHeaders(D.amzDate?{"x-amz-date":D.amzDate}:{},{authorization:D.authorizationHeader,host:Z.host},Y||{});if(W.token)J_.Gaxios.mergeHeaders(G,{"x-amz-security-token":W.token});let z={url:A,method:J,headers:G};if(X!==void 0)z.body=X;return z}}Yv1.AwsRequestSigner=Xv1;async function TV($,F,A){return await $.signWithHmacSha256(F,A)}async function nv0($,F,A,J,X){let Y=await TV($,`AWS4${F}`,A),W=await TV($,Y,J),Z=await TV($,W,X);return await TV($,Z,"aws4_request")}async function rv0($){let F=J_.Gaxios.mergeHeaders($.additionalAmzHeaders),A=$.requestPayload||"",J=$.host.split(".")[0],X=new Date,Y=X.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),W=X.toISOString().replace(/[-]/g,"").replace(/T.*/,"");if($.securityCredentials.token)F.set("x-amz-security-token",$.securityCredentials.token);let Z=J_.Gaxios.mergeHeaders({host:$.host},F.has("date")?{}:{"x-amz-date":Y},F),D="",G=[...Z.keys()].sort();G.forEach((V)=>{D+=`${V}:${Z.get(V)}
`});let z=G.join(";"),H=await $.crypto.sha256DigestHex(A),U=`${$.method.toUpperCase()}
${$.canonicalUri}
${$.canonicalQuerystring}
${D}
${z}
${H}`,Q=`${W}/${$.region}/${J}/${iv0}`,B=`${Av1}
${Y}
${Q}
`+await $.crypto.sha256DigestHex(U),q=await nv0($.crypto,$.securityCredentials.secretAccessKey,W,$.region,J),L=await TV($.crypto,q,B),E=`${Av1} Credential=${$.securityCredentials.accessKeyId}/${Q}, SignedHeaders=${z}, Signature=${(0,Jv1.fromArrayBufferToHex)(L)}`;return{amzDate:F.has("date")?void 0:Y,authorizationHeader:E,canonicalQuerystring:$.canonicalQuerystring}}});var zv1=O((Dv1)=>{Object.defineProperty(Dv1,"__esModule",{value:!0});Dv1.DefaultAwsSecurityCredentialsSupplier=void 0;var X_=W5();class Zv1{regionUrl;securityCredentialsUrl;imdsV2SessionTokenUrl;additionalGaxiosOptions;constructor($){this.regionUrl=$.regionUrl,this.securityCredentialsUrl=$.securityCredentialsUrl,this.imdsV2SessionTokenUrl=$.imdsV2SessionTokenUrl,this.additionalGaxiosOptions=$.additionalGaxiosOptions}async getAwsRegion($){if(this.#J)return this.#J;let F=new Headers;if(!this.#J&&this.imdsV2SessionTokenUrl)F.set("x-aws-ec2-metadata-token",await this.#$($.transporter));if(!this.regionUrl)throw RangeError('Unable to determine AWS region due to missing "options.credential_source.region_url"');let A={...this.additionalGaxiosOptions,url:this.regionUrl,method:"GET",headers:F};X_.AuthClient.setMethodName(A,"getAwsRegion");let J=await $.transporter.request(A);return J.data.substr(0,J.data.length-1)}async getAwsSecurityCredentials($){if(this.#X)return this.#X;let F=new Headers;if(this.imdsV2SessionTokenUrl)F.set("x-aws-ec2-metadata-token",await this.#$($.transporter));let A=await this.#F(F,$.transporter),J=await this.#A(A,F,$.transporter);return{accessKeyId:J.AccessKeyId,secretAccessKey:J.SecretAccessKey,token:J.Token}}async#$($){let F={...this.additionalGaxiosOptions,url:this.imdsV2SessionTokenUrl,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return X_.AuthClient.setMethodName(F,"#getImdsV2SessionToken"),(await $.request(F)).data}async#F($,F){if(!this.securityCredentialsUrl)throw Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let A={...this.additionalGaxiosOptions,url:this.securityCredentialsUrl,method:"GET",headers:$};return X_.AuthClient.setMethodName(A,"#getAwsRoleName"),(await F.request(A)).data}async#A($,F,A){let J={...this.additionalGaxiosOptions,url:`${this.securityCredentialsUrl}/${$}`,headers:F};return X_.AuthClient.setMethodName(J,"#retrieveAwsSecurityCredentials"),(await A.request(J)).data}get#J(){return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION||null}get#X(){if(process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY)return{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN};return null}}Dv1.DefaultAwsSecurityCredentialsSupplier=Zv1});var D01=O((Uv1)=>{Object.defineProperty(Uv1,"__esModule",{value:!0});Uv1.AwsClient=void 0;var av0=Z01(),tv0=PW(),sv0=zv1(),Hv1=MF(),ov0=c9();class Y_ extends tv0.BaseExternalAccountClient{environmentId;awsSecurityCredentialsSupplier;regionalCredVerificationUrl;awsRequestSigner;region;static#$="https://sts.{region}.amazonaws.com?Action=GetCallerIdentity&Version=2011-06-15";static AWS_EC2_METADATA_IPV4_ADDRESS="169.254.169.254";static AWS_EC2_METADATA_IPV6_ADDRESS="fd00:ec2::254";constructor($){super($);let F=(0,Hv1.originalOrCamelOptions)($),A=F.get("credential_source"),J=F.get("aws_security_credentials_supplier");if(!A&&!J)throw Error("A credential source or AWS security credentials supplier must be specified.");if(A&&J)throw Error("Only one of credential source or AWS security credentials supplier can be specified.");if(J)this.awsSecurityCredentialsSupplier=J,this.regionalCredVerificationUrl=Y_.#$,this.credentialSourceType="programmatic";else{let X=(0,Hv1.originalOrCamelOptions)(A);this.environmentId=X.get("environment_id");let Y=X.get("region_url"),W=X.get("url"),Z=X.get("imdsv2_session_token_url");this.awsSecurityCredentialsSupplier=new sv0.DefaultAwsSecurityCredentialsSupplier({regionUrl:Y,securityCredentialsUrl:W,imdsV2SessionTokenUrl:Z}),this.regionalCredVerificationUrl=X.get("regional_cred_verification_url"),this.credentialSourceType="aws",this.validateEnvironmentId()}this.awsRequestSigner=null,this.region=""}validateEnvironmentId(){let $=this.environmentId?.match(/^(aws)(\d+)$/);if(!$||!this.regionalCredVerificationUrl)throw Error('No valid AWS "credential_source" provided');else if(parseInt($[2],10)!==1)throw Error(`aws version "${$[2]}" is not supported in the current build.`)}async retrieveSubjectToken(){if(!this.awsRequestSigner)this.region=await this.awsSecurityCredentialsSupplier.getAwsRegion(this.supplierContext),this.awsRequestSigner=new av0.AwsRequestSigner(async()=>{return this.awsSecurityCredentialsSupplier.getAwsSecurityCredentials(this.supplierContext)},this.region);let $=await this.awsRequestSigner.getRequestOptions({...Y_.RETRY_CONFIG,url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),F=[];return ov0.Gaxios.mergeHeaders({"x-goog-cloud-target-resource":this.audience},$.headers).forEach((J,X)=>F.push({key:X,value:J})),encodeURIComponent(JSON.stringify({url:$.url,method:$.method,headers:F}))}}Uv1.AwsClient=Y_});var w01=O((wv1)=>{Object.defineProperty(wv1,"__esModule",{value:!0});wv1.InvalidSubjectTokenError=wv1.InvalidMessageFieldError=wv1.InvalidCodeFieldError=wv1.InvalidTokenTypeFieldError=wv1.InvalidExpirationTimeFieldError=wv1.InvalidSuccessFieldError=wv1.InvalidVersionFieldError=wv1.ExecutableResponseError=wv1.ExecutableResponse=void 0;var W_="urn:ietf:params:oauth:token-type:saml2",G01="urn:ietf:params:oauth:token-type:id_token",z01="urn:ietf:params:oauth:token-type:jwt";class Kv1{version;success;expirationTime;tokenType;errorCode;errorMessage;subjectToken;constructor($){if(!$.version)throw new H01("Executable response must contain a 'version' field.");if($.success===void 0)throw new U01("Executable response must contain a 'success' field.");if(this.version=$.version,this.success=$.success,this.success){if(this.expirationTime=$.expiration_time,this.tokenType=$.token_type,this.tokenType!==W_&&this.tokenType!==G01&&this.tokenType!==z01)throw new Q01(`Executable response must contain a 'token_type' field when successful and it must be one of ${G01}, ${z01}, or ${W_}.`);if(this.tokenType===W_){if(!$.saml_response)throw new Z_(`Executable response must contain a 'saml_response' field when token_type=${W_}.`);this.subjectToken=$.saml_response}else{if(!$.id_token)throw new Z_(`Executable response must contain a 'id_token' field when token_type=${G01} or ${z01}.`);this.subjectToken=$.id_token}}else{if(!$.code)throw new K01("Executable response must contain a 'code' field when unsuccessful.");if(!$.message)throw new B01("Executable response must contain a 'message' field when unsuccessful.");this.errorCode=$.code,this.errorMessage=$.message}}isValid(){return!this.isExpired()&&this.success}isExpired(){return this.expirationTime!==void 0&&this.expirationTime<Math.round(Date.now()/1000)}}wv1.ExecutableResponse=Kv1;class VX extends Error{constructor($){super($);Object.setPrototypeOf(this,new.target.prototype)}}wv1.ExecutableResponseError=VX;class H01 extends VX{}wv1.InvalidVersionFieldError=H01;class U01 extends VX{}wv1.InvalidSuccessFieldError=U01;class Bv1 extends VX{}wv1.InvalidExpirationTimeFieldError=Bv1;class Q01 extends VX{}wv1.InvalidTokenTypeFieldError=Q01;class K01 extends VX{}wv1.InvalidCodeFieldError=K01;class B01 extends VX{}wv1.InvalidMessageFieldError=B01;class Z_ extends VX{}wv1.InvalidSubjectTokenError=Z_});var V01=O((Lv1)=>{Object.defineProperty(Lv1,"__esModule",{value:!0});Lv1.PluggableAuthHandler=Lv1.ExecutableError=void 0;var DG=w01(),Zy0=Z1("child_process"),q01=Z1("fs");class L01 extends Error{code;constructor($,F){super(`The executable failed with exit code: ${F} and error message: ${$}.`);this.code=F,Object.setPrototypeOf(this,new.target.prototype)}}Lv1.ExecutableError=L01;class E01{commandComponents;timeoutMillis;outputFile;constructor($){if(!$.command)throw Error("No command provided.");if(this.commandComponents=E01.parseCommand($.command),this.timeoutMillis=$.timeoutMillis,!this.timeoutMillis)throw Error("No timeoutMillis provided.");this.outputFile=$.outputFile}retrieveResponseFromExecutable($){return new Promise((F,A)=>{let J=Zy0.spawn(this.commandComponents[0],this.commandComponents.slice(1),{env:{...process.env,...Object.fromEntries($)}}),X="";J.stdout.on("data",(W)=>{X+=W}),J.stderr.on("data",(W)=>{X+=W});let Y=setTimeout(()=>{return J.removeAllListeners(),J.kill(),A(Error("The executable failed to finish within the timeout specified."))},this.timeoutMillis);J.on("close",(W)=>{if(clearTimeout(Y),W===0)try{let Z=JSON.parse(X),D=new DG.ExecutableResponse(Z);return F(D)}catch(Z){if(Z instanceof DG.ExecutableResponseError)return A(Z);return A(new DG.ExecutableResponseError(`The executable returned an invalid response: ${X}`))}else return A(new L01(X,W.toString()))})})}async retrieveCachedResponse(){if(!this.outputFile||this.outputFile.length===0)return;let $;try{$=await q01.promises.realpath(this.outputFile)}catch{return}if(!(await q01.promises.lstat($)).isFile())return;let F=await q01.promises.readFile($,{encoding:"utf8"});if(F==="")return;try{let A=JSON.parse(F);if(new DG.ExecutableResponse(A).isValid())return new DG.ExecutableResponse(A);return}catch(A){if(A instanceof DG.ExecutableResponseError)throw A;throw new DG.ExecutableResponseError(`The output file contained an invalid response: ${F}`)}}static parseCommand($){let F=$.match(/(?:[^\s"]+|"[^"]*")+/g);if(!F)throw Error(`Provided command: "${$}" could not be parsed.`);for(let A=0;A<F.length;A++)if(F[A][0]==='"'&&F[A].slice(-1)==='"')F[A]=F[A].slice(1,-1);return F}}Lv1.PluggableAuthHandler=E01});var C01=O((N01)=>{Object.defineProperty(N01,"__esModule",{value:!0});N01.PluggableAuthClient=N01.ExecutableError=void 0;var Gy0=PW(),zy0=w01(),Vv1=V01(),Hy0=V01();Object.defineProperty(N01,"ExecutableError",{enumerable:!0,get:function(){return Hy0.ExecutableError}});var Uy0=30000,Nv1=5000,Cv1=120000,Qy0="GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES",Mv1=1;class Pv1 extends Gy0.BaseExternalAccountClient{command;timeoutMillis;outputFile;handler;constructor($){super($);if(!$.credential_source.executable)throw Error('No valid Pluggable Auth "credential_source" provided.');if(this.command=$.credential_source.executable.command,!this.command)throw Error('No valid Pluggable Auth "credential_source" provided.');if($.credential_source.executable.timeout_millis===void 0)this.timeoutMillis=Uy0;else if(this.timeoutMillis=$.credential_source.executable.timeout_millis,this.timeoutMillis<Nv1||this.timeoutMillis>Cv1)throw Error(`Timeout must be between ${Nv1} and ${Cv1} milliseconds.`);this.outputFile=$.credential_source.executable.output_file,this.handler=new Vv1.PluggableAuthHandler({command:this.command,timeoutMillis:this.timeoutMillis,outputFile:this.outputFile}),this.credentialSourceType="executable"}async retrieveSubjectToken(){if(process.env[Qy0]!=="1")throw Error("Pluggable Auth executables need to be explicitly allowed to run by setting the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment Variable to 1.");let $=void 0;if(this.outputFile)$=await this.handler.retrieveCachedResponse();if(!$){let F=new Map;if(F.set("GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE",this.audience),F.set("GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE",this.subjectTokenType),F.set("GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE","0"),this.outputFile)F.set("GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE",this.outputFile);let A=this.getServiceAccountEmail();if(A)F.set("GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL",A);$=await this.handler.retrieveResponseFromExecutable(F)}if($.version>Mv1)throw Error(`Version of executable is not currently supported, maximum supported version is ${Mv1}.`);if(!$.success)throw new Vv1.ExecutableError($.errorMessage,$.errorCode);if(this.outputFile){if(!$.expirationTime)throw new zy0.InvalidExpirationTimeFieldError("The executable response must contain the `expiration_time` field for successful responses when an output_file has been specified in the configuration.")}if($.isExpired())throw Error("Executable response is expired.");return $.subjectToken}}N01.PluggableAuthClient=Pv1});var M01=O((Tv1)=>{Object.defineProperty(Tv1,"__esModule",{value:!0});Tv1.ExternalAccountClient=void 0;var Ky0=PW(),By0=W01(),wy0=D01(),qy0=C01();class Iv1{constructor(){throw Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options), newPluggableAuthClientOptions, or via new GoogleAuth(options).getClient()")}static fromJSON($){if($&&$.type===Ky0.EXTERNAL_ACCOUNT_TYPE)if($.credential_source?.environment_id)return new wy0.AwsClient($);else if($.credential_source?.executable)return new qy0.PluggableAuthClient($);else return new By0.IdentityPoolClient($);else return null}}Tv1.ExternalAccountClient=Iv1});var R01=O((bv1)=>{Object.defineProperty(bv1,"__esModule",{value:!0});bv1.ExternalAccountAuthorizedUserClient=bv1.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=void 0;var Sv1=W5(),Ov1=s11(),_v1=c9(),Ly0=Z1("stream"),Ey0=PW();bv1.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE="external_account_authorized_user";var Vy0="https://sts.{universeDomain}/v1/oauthtoken";class P01 extends Ov1.OAuthClientAuthHandler{#$;constructor($){super($);this.#$=$.tokenRefreshEndpoint}async refreshToken($,F){let A={...P01.RETRY_CONFIG,url:this.#$,method:"POST",headers:F,data:new URLSearchParams({grant_type:"refresh_token",refresh_token:$})};Sv1.AuthClient.setMethodName(A,"refreshToken"),this.applyClientAuthenticationOptions(A);try{let J=await this.transporter.request(A),X=J.data;return X.res=J,X}catch(J){if(J instanceof _v1.GaxiosError&&J.response)throw(0,Ov1.getErrorFromOAuthErrorResponse)(J.response.data,J);throw J}}}class kv1 extends Sv1.AuthClient{cachedAccessToken;externalAccountAuthorizedUserHandler;refreshToken;constructor($){super($);if($.universe_domain)this.universeDomain=$.universe_domain;this.refreshToken=$.refresh_token;let F={confidentialClientType:"basic",clientId:$.client_id,clientSecret:$.client_secret};if(this.externalAccountAuthorizedUserHandler=new P01({tokenRefreshEndpoint:$.token_url??Vy0.replace("{universeDomain}",this.universeDomain),transporter:this.transporter,clientAuthentication:F}),this.cachedAccessToken=null,this.quotaProjectId=$.quota_project_id,typeof $?.eagerRefreshThresholdMillis!=="number")this.eagerRefreshThresholdMillis=Ey0.EXPIRATION_TIME_OFFSET;else this.eagerRefreshThresholdMillis=$.eagerRefreshThresholdMillis;this.forceRefreshOnFailure=!!$?.forceRefreshOnFailure}async getAccessToken(){if(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))await this.refreshAccessTokenAsync();return{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let $=await this.getAccessToken(),F=new Headers({authorization:`Bearer ${$.token}`});return this.addSharedMetadataHeaders(F)}request($,F){if(F)this.requestAsync($).then((A)=>F(null,A),(A)=>{return F(A,A.response)});else return this.requestAsync($)}async requestAsync($,F=!1){let A;try{let J=await this.getRequestHeaders();$.headers=_v1.Gaxios.mergeHeaders($.headers),this.addUserProjectAndAuthHeaders($.headers,J),A=await this.transporter.request($)}catch(J){let X=J.response;if(X){let Y=X.status,W=X.config.data instanceof Ly0.Readable;if(!F&&(Y===401||Y===403)&&!W&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync($,!0)}throw J}return A}async refreshAccessTokenAsync(){let $=await this.externalAccountAuthorizedUserHandler.refreshToken(this.refreshToken);if(this.cachedAccessToken={access_token:$.access_token,expiry_date:new Date().getTime()+$.expires_in*1000,res:$.res},$.refresh_token!==void 0)this.refreshToken=$.refresh_token;return this.cachedAccessToken}isExpired($){let F=new Date().getTime();return $.expiry_date?F>=$.expiry_date-this.eagerRefreshThresholdMillis:!1}}bv1.ExternalAccountAuthorizedUserClient=kv1});var mv1=O((uv1)=>{Object.defineProperty(uv1,"__esModule",{value:!0});uv1.GoogleAuth=uv1.GoogleAuthExceptionMessages=void 0;var Cy0=Z1("child_process"),jV=Z1("fs"),My0=c9(),OV=rG(),Py0=Z1("os"),I01=Z1("path"),Ry0=wV(),Iy0=T11(),Ty0=j11(),jy0=O11(),cQ=r11(),gv1=a11(),lQ=t11(),Oy0=M01(),SV=PW(),T01=W5(),fv1=R01(),vv1=MF();uv1.GoogleAuthExceptionMessages={API_KEY_WITH_CREDENTIALS:"API Keys and Credentials are mutually exclusive authentication methods and cannot be used together.",NO_PROJECT_ID_FOUND:`Unable to detect a Project Id in the current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`,NO_CREDENTIALS_FOUND:`Unable to find credentials in current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`,NO_ADC_FOUND:"Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.",NO_UNIVERSE_DOMAIN_FOUND:`Unable to detect a Universe Domain in the current environment.
To learn more about Universe Domain retrieval, visit: 
https://cloud.google.com/compute/docs/metadata/predefined-metadata-keys`};class yv1{checkIsGCE=void 0;useJWTAccessWithScope;defaultServicePath;get isGCE(){return this.checkIsGCE}_findProjectIdPromise;_cachedProjectId;jsonContent=null;apiKey;cachedCredential=null;#$=null;defaultScopes;keyFilename;scopes;clientOptions={};constructor($={}){if(this._cachedProjectId=$.projectId||null,this.cachedCredential=$.authClient||null,this.keyFilename=$.keyFilename||$.keyFile,this.scopes=$.scopes,this.clientOptions=$.clientOptions||{},this.jsonContent=$.credentials||null,this.apiKey=$.apiKey||this.clientOptions.apiKey||null,this.apiKey&&(this.jsonContent||this.clientOptions.credentials))throw RangeError(uv1.GoogleAuthExceptionMessages.API_KEY_WITH_CREDENTIALS);if($.universeDomain)this.clientOptions.universeDomain=$.universeDomain}setGapicJWTValues($){$.defaultServicePath=this.defaultServicePath,$.useJWTAccessWithScope=this.useJWTAccessWithScope,$.defaultScopes=this.defaultScopes}getProjectId($){if($)this.getProjectIdAsync().then((F)=>$(null,F),$);else return this.getProjectIdAsync()}async getProjectIdOptional(){try{return await this.getProjectId()}catch($){if($ instanceof Error&&$.message===uv1.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)return null;else throw $}}async findAndCacheProjectId(){let $=null;if($||=await this.getProductionProjectId(),$||=await this.getFileProjectId(),$||=await this.getDefaultServiceProjectId(),$||=await this.getGCEProjectId(),$||=await this.getExternalAccountClientProjectId(),$)return this._cachedProjectId=$,$;else throw Error(uv1.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)}async getProjectIdAsync(){if(this._cachedProjectId)return this._cachedProjectId;if(!this._findProjectIdPromise)this._findProjectIdPromise=this.findAndCacheProjectId();return this._findProjectIdPromise}async getUniverseDomainFromMetadataServer(){let $;try{$=await OV.universe("universe-domain"),$||=T01.DEFAULT_UNIVERSE}catch(F){if(F&&F?.response?.status===404)$=T01.DEFAULT_UNIVERSE;else throw F}return $}async getUniverseDomain(){let $=(0,vv1.originalOrCamelOptions)(this.clientOptions).get("universe_domain");try{$??=(await this.getClient()).universeDomain}catch{$??=T01.DEFAULT_UNIVERSE}return $}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault($={},F){let A;if(typeof $==="function")F=$;else A=$;if(F)this.getApplicationDefaultAsync(A).then((J)=>F(null,J.credential,J.projectId),F);else return this.getApplicationDefaultAsync(A)}async getApplicationDefaultAsync($={}){if(this.cachedCredential)return await this.#F(this.cachedCredential,null);let F;if(F=await this._tryGetApplicationCredentialsFromEnvironmentVariable($),F){if(F instanceof cQ.JWT)F.scopes=this.scopes;else if(F instanceof SV.BaseExternalAccountClient)F.scopes=this.getAnyScopes();return await this.#F(F)}if(F=await this._tryGetApplicationCredentialsFromWellKnownFile($),F){if(F instanceof cQ.JWT)F.scopes=this.scopes;else if(F instanceof SV.BaseExternalAccountClient)F.scopes=this.getAnyScopes();return await this.#F(F)}if(await this._checkIsGCE())return $.scopes=this.getAnyScopes(),await this.#F(new Iy0.Compute($));throw Error(uv1.GoogleAuthExceptionMessages.NO_ADC_FOUND)}async#F($,F=process.env.GOOGLE_CLOUD_QUOTA_PROJECT||null){let A=await this.getProjectIdOptional();if(F)$.quotaProjectId=F;return this.cachedCredential=$,{credential:$,projectId:A}}async _checkIsGCE(){if(this.checkIsGCE===void 0)this.checkIsGCE=OV.getGCPResidency()||await OV.isAvailable();return this.checkIsGCE}async _tryGetApplicationCredentialsFromEnvironmentVariable($){let F=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!F||F.length===0)return null;try{return this._getApplicationCredentialsFromFilePath(F,$)}catch(A){if(A instanceof Error)A.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${A.message}`;throw A}}async _tryGetApplicationCredentialsFromWellKnownFile($){let F=null;if(this._isWindows())F=process.env.APPDATA;else{let J=process.env.HOME;if(J)F=I01.join(J,".config")}if(F){if(F=I01.join(F,"gcloud","application_default_credentials.json"),!jV.existsSync(F))F=null}if(!F)return null;return await this._getApplicationCredentialsFromFilePath(F,$)}async _getApplicationCredentialsFromFilePath($,F={}){if(!$||$.length===0)throw Error("The file path is invalid.");try{if($=jV.realpathSync($),!jV.lstatSync($).isFile())throw Error()}catch(J){if(J instanceof Error)J.message=`The file at ${$} does not exist, or it is not a file. ${J.message}`;throw J}let A=jV.createReadStream($);return this.fromStream(A,F)}fromImpersonatedJSON($){if(!$)throw Error("Must pass in a JSON object containing an  impersonated refresh token");if($.type!==lQ.IMPERSONATED_ACCOUNT_TYPE)throw Error(`The incoming JSON object does not have the "${lQ.IMPERSONATED_ACCOUNT_TYPE}" type`);if(!$.source_credentials)throw Error("The incoming JSON object does not contain a source_credentials field");if(!$.service_account_impersonation_url)throw Error("The incoming JSON object does not contain a service_account_impersonation_url field");let F=this.fromJSON($.source_credentials);if($.service_account_impersonation_url?.length>256)throw RangeError(`Target principal is too long: ${$.service_account_impersonation_url}`);let A=/(?<target>[^/]+):(generateAccessToken|generateIdToken)$/.exec($.service_account_impersonation_url)?.groups?.target;if(!A)throw RangeError(`Cannot extract target principal from ${$.service_account_impersonation_url}`);let J=(this.scopes||$.scopes||this.defaultScopes)??[];return new lQ.Impersonated({...$,sourceClient:F,targetPrincipal:A,targetScopes:Array.isArray(J)?J:[J]})}fromJSON($,F={}){let A,J=(0,vv1.originalOrCamelOptions)(F).get("universe_domain");if($.type===gv1.USER_REFRESH_ACCOUNT_TYPE)A=new gv1.UserRefreshClient(F),A.fromJSON($);else if($.type===lQ.IMPERSONATED_ACCOUNT_TYPE)A=this.fromImpersonatedJSON($);else if($.type===SV.EXTERNAL_ACCOUNT_TYPE)A=Oy0.ExternalAccountClient.fromJSON({...$,...F}),A.scopes=this.getAnyScopes();else if($.type===fv1.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE)A=new fv1.ExternalAccountAuthorizedUserClient({...$,...F});else F.scopes=this.scopes,A=new cQ.JWT(F),this.setGapicJWTValues(A),A.fromJSON($);if(J)A.universeDomain=J;return A}_cacheClientFromJSON($,F){let A=this.fromJSON($,F);return this.jsonContent=$,this.cachedCredential=A,A}fromStream($,F={},A){let J={};if(typeof F==="function")A=F;else J=F;if(A)this.fromStreamAsync($,J).then((X)=>A(null,X),A);else return this.fromStreamAsync($,J)}fromStreamAsync($,F){return new Promise((A,J)=>{if(!$)throw Error("Must pass in a stream containing the Google auth settings.");let X=[];$.setEncoding("utf8").on("error",J).on("data",(Y)=>X.push(Y)).on("end",()=>{try{try{let Y=JSON.parse(X.join("")),W=this._cacheClientFromJSON(Y,F);return A(W)}catch(Y){if(!this.keyFilename)throw Y;let W=new cQ.JWT({...this.clientOptions,keyFile:this.keyFilename});return this.cachedCredential=W,this.setGapicJWTValues(W),A(W)}}catch(Y){return J(Y)}})})}fromAPIKey($,F={}){return new cQ.JWT({...F,apiKey:$})}_isWindows(){let $=Py0.platform();if($&&$.length>=3){if($.substring(0,3).toLowerCase()==="win")return!0}return!1}async getDefaultServiceProjectId(){return new Promise(($)=>{(0,Cy0.exec)("gcloud config config-helper --format json",(F,A)=>{if(!F&&A)try{let J=JSON.parse(A).configuration.properties.core.project;$(J);return}catch(J){}$(null)})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}async getFileProjectId(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let F=await this.getClient();if(F&&F.projectId)return F.projectId}let $=await this._tryGetApplicationCredentialsFromEnvironmentVariable();if($)return $.projectId;else return null}async getExternalAccountClientProjectId(){if(!this.jsonContent||this.jsonContent.type!==SV.EXTERNAL_ACCOUNT_TYPE)return null;return await(await this.getClient()).getProjectId()}async getGCEProjectId(){try{return await OV.project("project-id")}catch($){return null}}getCredentials($){if($)this.getCredentialsAsync().then((F)=>$(null,F),$);else return this.getCredentialsAsync()}async getCredentialsAsync(){let $=await this.getClient();if($ instanceof lQ.Impersonated)return{client_email:$.getTargetPrincipal()};if($ instanceof SV.BaseExternalAccountClient){let F=$.getServiceAccountEmail();if(F)return{client_email:F,universe_domain:$.universeDomain}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key,universe_domain:this.jsonContent.universe_domain};if(await this._checkIsGCE()){let[F,A]=await Promise.all([OV.instance("service-accounts/default/email"),this.getUniverseDomain()]);return{client_email:F,universe_domain:A}}throw Error(uv1.GoogleAuthExceptionMessages.NO_CREDENTIALS_FOUND)}async getClient(){if(this.cachedCredential)return this.cachedCredential;this.#$=this.#$||this.#A();try{return await this.#$}finally{this.#$=null}}async#A(){if(this.jsonContent)return this._cacheClientFromJSON(this.jsonContent,this.clientOptions);else if(this.keyFilename){let $=I01.resolve(this.keyFilename),F=jV.createReadStream($);return await this.fromStreamAsync(F,this.clientOptions)}else if(this.apiKey){let $=await this.fromAPIKey(this.apiKey,this.clientOptions);$.scopes=this.scopes;let{credential:F}=await this.#F($);return F}else{let{credential:$}=await this.getApplicationDefaultAsync(this.clientOptions);return $}}async getIdTokenClient($){let F=await this.getClient();if(!("fetchIdToken"in F))throw Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new Ty0.IdTokenClient({targetAudience:$,idTokenProvider:F})}async getAccessToken(){return(await(await this.getClient()).getAccessToken()).token}async getRequestHeaders($){return(await this.getClient()).getRequestHeaders($)}async authorizeRequest($={}){let F=$.url,J=await(await this.getClient()).getRequestHeaders(F);return $.headers=My0.Gaxios.mergeHeaders($.headers,J),$}async fetch(...$){return(await this.getClient()).fetch(...$)}async request($){return(await this.getClient()).request($)}getEnv(){return(0,jy0.getEnv)()}async sign($,F){let A=await this.getClient(),J=await this.getUniverseDomain();if(F=F||`https://iamcredentials.${J}/v1/projects/-/serviceAccounts/`,A instanceof lQ.Impersonated)return(await A.sign($)).signedBlob;let X=(0,Ry0.createCrypto)();if(A instanceof cQ.JWT&&A.key)return await X.sign(A.key,$);let Y=await this.getCredentials();if(!Y.client_email)throw Error("Cannot sign data without `client_email`.");return this.signBlob(X,Y.client_email,$,F)}async signBlob($,F,A,J){let X=new URL(J+`${F}:signBlob`);return(await this.request({method:"POST",url:X.href,data:{payload:$.encodeBase64StringUtf8(A)},retry:!0,retryConfig:{httpMethodsToRetry:["POST"]}})).data.signedBlob}}uv1.GoogleAuth=yv1});var pv1=O((cv1)=>{Object.defineProperty(cv1,"__esModule",{value:!0});cv1.IAMAuth=void 0;class dv1{selector;token;constructor($,F){this.selector=$,this.token=F,this.selector=$,this.token=F}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}}cv1.IAMAuth=dv1});var av1=O((nv1)=>{Object.defineProperty(nv1,"__esModule",{value:!0});nv1.DownscopedClient=nv1.EXPIRATION_TIME_OFFSET=nv1.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;var Sy0=c9(),_y0=Z1("stream"),j01=W5(),ky0=sS(),by0="urn:ietf:params:oauth:grant-type:token-exchange",xy0="urn:ietf:params:oauth:token-type:access_token",gy0="urn:ietf:params:oauth:token-type:access_token";nv1.MAX_ACCESS_BOUNDARY_RULES_COUNT=10;nv1.EXPIRATION_TIME_OFFSET=300000;class iv1 extends j01.AuthClient{authClient;credentialAccessBoundary;cachedDownscopedAccessToken;stsCredential;constructor($,F={accessBoundary:{accessBoundaryRules:[]}}){super($ instanceof j01.AuthClient?{}:$);if($ instanceof j01.AuthClient)this.authClient=$,this.credentialAccessBoundary=F;else this.authClient=$.authClient,this.credentialAccessBoundary=$.credentialAccessBoundary;if(this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length===0)throw Error("At least one access boundary rule needs to be defined.");else if(this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length>nv1.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw Error(`The provided access boundary has more than ${nv1.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(let A of this.credentialAccessBoundary.accessBoundary.accessBoundaryRules)if(A.availablePermissions.length===0)throw Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new ky0.StsCredentials({tokenExchangeEndpoint:`https://sts.${this.universeDomain}/v1/token`}),this.cachedDownscopedAccessToken=null}setCredentials($){if(!$.expiry_date)throw Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials($),this.cachedDownscopedAccessToken=$}async getAccessToken(){if(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))await this.refreshAccessTokenAsync();return{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}}async getRequestHeaders(){let $=await this.getAccessToken(),F=new Headers({authorization:`Bearer ${$.token}`});return this.addSharedMetadataHeaders(F)}request($,F){if(F)this.requestAsync($).then((A)=>F(null,A),(A)=>{return F(A,A.response)});else return this.requestAsync($)}async requestAsync($,F=!1){let A;try{let J=await this.getRequestHeaders();$.headers=Sy0.Gaxios.mergeHeaders($.headers),this.addUserProjectAndAuthHeaders($.headers,J),A=await this.transporter.request($)}catch(J){let X=J.response;if(X){let Y=X.status,W=X.config.data instanceof _y0.Readable;if(!F&&(Y===401||Y===403)&&!W&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync($,!0)}throw J}return A}async refreshAccessTokenAsync(){let $=(await this.authClient.getAccessToken()).token,F={grantType:by0,requestedTokenType:xy0,subjectToken:$,subjectTokenType:gy0},A=await this.stsCredential.exchangeToken(F,void 0,this.credentialAccessBoundary),J=this.authClient.credentials?.expiry_date||null,X=A.expires_in?new Date().getTime()+A.expires_in*1000:J;return this.cachedDownscopedAccessToken={access_token:A.access_token,expiry_date:X,res:A.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken}isExpired($){let F=new Date().getTime();return $.expiry_date?F>=$.expiry_date-this.eagerRefreshThresholdMillis:!1}}nv1.DownscopedClient=iv1});var ev1=O((sv1)=>{Object.defineProperty(sv1,"__esModule",{value:!0});sv1.PassThroughClient=void 0;var vy0=W5();class tv1 extends vy0.AuthClient{async request($){return this.transporter.request($)}async getAccessToken(){return{}}async getRequestHeaders(){return new Headers}}sv1.PassThroughClient=tv1});var Xy1=O((G2)=>{Object.defineProperty(G2,"__esModule",{value:!0});G2.GoogleAuth=G2.auth=G2.PassThroughClient=G2.ExternalAccountAuthorizedUserClient=G2.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=G2.ExecutableError=G2.PluggableAuthClient=G2.DownscopedClient=G2.BaseExternalAccountClient=G2.ExternalAccountClient=G2.IdentityPoolClient=G2.AwsRequestSigner=G2.AwsClient=G2.UserRefreshClient=G2.LoginTicket=G2.ClientAuthentication=G2.OAuth2Client=G2.CodeChallengeMethod=G2.Impersonated=G2.JWT=G2.JWTAccess=G2.IdTokenClient=G2.IAMAuth=G2.GCPEnv=G2.Compute=G2.DEFAULT_UNIVERSE=G2.AuthClient=G2.gaxios=G2.gcpMetadata=void 0;var $y1=mv1();Object.defineProperty(G2,"GoogleAuth",{enumerable:!0,get:function(){return $y1.GoogleAuth}});G2.gcpMetadata=rG();G2.gaxios=c9();var Fy1=W5();Object.defineProperty(G2,"AuthClient",{enumerable:!0,get:function(){return Fy1.AuthClient}});Object.defineProperty(G2,"DEFAULT_UNIVERSE",{enumerable:!0,get:function(){return Fy1.DEFAULT_UNIVERSE}});var yy0=T11();Object.defineProperty(G2,"Compute",{enumerable:!0,get:function(){return yy0.Compute}});var uy0=O11();Object.defineProperty(G2,"GCPEnv",{enumerable:!0,get:function(){return uy0.GCPEnv}});var hy0=pv1();Object.defineProperty(G2,"IAMAuth",{enumerable:!0,get:function(){return hy0.IAMAuth}});var my0=j11();Object.defineProperty(G2,"IdTokenClient",{enumerable:!0,get:function(){return my0.IdTokenClient}});var dy0=i11();Object.defineProperty(G2,"JWTAccess",{enumerable:!0,get:function(){return dy0.JWTAccess}});var cy0=r11();Object.defineProperty(G2,"JWT",{enumerable:!0,get:function(){return cy0.JWT}});var ly0=t11();Object.defineProperty(G2,"Impersonated",{enumerable:!0,get:function(){return ly0.Impersonated}});var S01=ZG();Object.defineProperty(G2,"CodeChallengeMethod",{enumerable:!0,get:function(){return S01.CodeChallengeMethod}});Object.defineProperty(G2,"OAuth2Client",{enumerable:!0,get:function(){return S01.OAuth2Client}});Object.defineProperty(G2,"ClientAuthentication",{enumerable:!0,get:function(){return S01.ClientAuthentication}});var py0=R11();Object.defineProperty(G2,"LoginTicket",{enumerable:!0,get:function(){return py0.LoginTicket}});var iy0=a11();Object.defineProperty(G2,"UserRefreshClient",{enumerable:!0,get:function(){return iy0.UserRefreshClient}});var ny0=D01();Object.defineProperty(G2,"AwsClient",{enumerable:!0,get:function(){return ny0.AwsClient}});var ry0=Z01();Object.defineProperty(G2,"AwsRequestSigner",{enumerable:!0,get:function(){return ry0.AwsRequestSigner}});var ay0=W01();Object.defineProperty(G2,"IdentityPoolClient",{enumerable:!0,get:function(){return ay0.IdentityPoolClient}});var ty0=M01();Object.defineProperty(G2,"ExternalAccountClient",{enumerable:!0,get:function(){return ty0.ExternalAccountClient}});var sy0=PW();Object.defineProperty(G2,"BaseExternalAccountClient",{enumerable:!0,get:function(){return sy0.BaseExternalAccountClient}});var oy0=av1();Object.defineProperty(G2,"DownscopedClient",{enumerable:!0,get:function(){return oy0.DownscopedClient}});var Ay1=C01();Object.defineProperty(G2,"PluggableAuthClient",{enumerable:!0,get:function(){return Ay1.PluggableAuthClient}});Object.defineProperty(G2,"ExecutableError",{enumerable:!0,get:function(){return Ay1.ExecutableError}});var Jy1=R01();Object.defineProperty(G2,"EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE",{enumerable:!0,get:function(){return Jy1.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE}});Object.defineProperty(G2,"ExternalAccountAuthorizedUserClient",{enumerable:!0,get:function(){return Jy1.ExternalAccountAuthorizedUserClient}});var ey0=ev1();Object.defineProperty(G2,"PassThroughClient",{enumerable:!0,get:function(){return ey0.PassThroughClient}});var $u0=new $y1.GoogleAuth;G2.auth=$u0});var Dm=l8(DY(),1);var tF={MONGO_URI:process.env.MONGO_URI,GEMINI_API_KEY:process.env.GEMINI_API_KEY,BETTER_AUTH_SECRET:process.env.BETTER_AUTH_SECRET,BETTER_AUTH_BASE_URL:process.env.BETTER_AUTH_BASE_URL,BETTER_AUTH_DOMAIN_URL:process.env.BETTER_AUTH_DOMAIN_URL,DODO_API_KEY:process.env.DODO_API_KEY,DODO_WEBHOOK_SECRET:process.env.DODO_WEBHOOK_SECRET,DODO_ENVIRONMENT:process.env.DODO_ENVIRONMENT,PRODUCT_ID_PREMIUM:process.env.PRODUCT_ID_PREMIUM,PRODUCT_ID_ELITE:process.env.PRODUCT_ID_ELITE},FN1={free:10,premium:30,elite:100},AN1={free:1,premium:20,elite:100};var Yw0={serverApi:{version:"1",strict:!0,deprecationErrors:!0}},JN1=async()=>{try{return await Dm.default.connect(tF.MONGO_URI,Yw0),console.log("Database Online"),Dm.default.connection.getClient()}catch($){console.error("Database failed",$),process.exit(1)}};var bw=Symbol.for("better-auth:global"),xw=null,Ww0={},Gm="1.4.16";function xZ(){if(!globalThis[bw])globalThis[bw]={version:Gm,epoch:1,context:Ww0},xw=globalThis[bw];if(xw=globalThis[bw],xw.version!==Gm)xw.version=Gm,xw.epoch++;return globalThis[bw]}function zm(){return xZ().version}var Zw0=import("async_hooks").then(($)=>$.AsyncLocalStorage).catch(($)=>{if("AsyncLocalStorage"in globalThis)return globalThis.AsyncLocalStorage;if(typeof window<"u")return null;throw console.warn("[better-auth] Warning: AsyncLocalStorage is not available in this environment. Some features may not work as expected."),console.warn("[better-auth] Please read more about this warning at https://better-auth.com/docs/installation#mount-handler"),console.warn("[better-auth] If you are using Cloudflare Workers, please see: https://developers.cloudflare.com/workers/configuration/compatibility-flags/#nodejs-compatibility-flag"),$});async function JH(){let $=await Zw0;if($===null)throw Error("getAsyncLocalStorage is only available in server code");else return $}var XN1=async()=>{let $=xZ();if(!$.context.endpointContextAsyncStorage){let F=await JH();$.context.endpointContextAsyncStorage=new F}return $.context.endpointContextAsyncStorage};async function EJ(){let $=(await XN1()).getStore();if(!$)throw Error("No auth context found. Please make sure you are calling this function within a `runWithEndpointContext` callback.");return $}async function gZ($,F){return(await XN1()).run($,F)}var Um=async()=>{let $=xZ();if(!$.context.requestStateAsyncStorage){let F=await JH();$.context.requestStateAsyncStorage=new F}return $.context.requestStateAsyncStorage};async function Qm(){return(await Um()).getStore()!==void 0}async function Hm(){let $=(await Um()).getStore();if(!$)throw Error("No request state found. Please make sure you are calling this function within a `runWithRequestState` callback.");return $}async function Km($,F){return(await Um()).run($,F)}function Bm($){let F=Object.freeze({});return{get ref(){return F},async get(){let A=await Hm();if(!A.has(F)){let J=await $();return A.set(F,J),J}return A.get(F)},async set(A){(await Hm()).set(F,A)}}}var wm=async()=>{let $=xZ();if(!$.context.adapterAsyncStorage){let F=await JH();$.context.adapterAsyncStorage=new F}return $.context.adapterAsyncStorage};var Q2=async($)=>{return wm().then((F)=>{return F.getStore()||$}).catch(()=>{return $})},qm=async($,F)=>{let A=!0;return wm().then((J)=>{return A=!0,J.run($,F)}).catch((J)=>{if(!A)return F();throw J})},gw=async($,F)=>{let A=!0;return wm().then((J)=>{return A=!0,$.transaction(async(X)=>{return J.run(X,F)})}).catch((J)=>{if(!A)return F();throw J})};var{get:YN1,set:Lm}=Bm(()=>null);hP();var YH=XH("a-z","0-9","A-Z","-_");function Em($,F){if(typeof $==="string")$=new TextEncoder().encode($);if(typeof F==="string")F=new TextEncoder().encode(F);let A=new Uint8Array($),J=new Uint8Array(F),X=A.length^J.length,Y=Math.max(A.length,J.length);for(let W=0;W<Y;W++)X|=(W<A.length?A[W]:0)^(W<J.length?J[W]:0);return X===0}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Dw0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function X3($,F=""){if(!Number.isSafeInteger($)||$<0){let A=F&&`"${F}" `;throw Error(`${A}expected integer >= 0, got ${$}`)}}function NJ($,F,A=""){let J=Dw0($),X=$?.length,Y=F!==void 0;if(!J||Y&&X!==F){let W=A&&`"${A}" `,Z=Y?` of length ${F}`:"",D=J?`length=${X}`:`type=${typeof $}`;throw Error(W+"expected Uint8Array"+Z+", got "+D)}return $}function fZ($){if(typeof $!=="function"||typeof $.create!=="function")throw Error("Hash must wrapped by utils.createHasher");X3($.outputLen),X3($.blockLen)}function WH($,F=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(F&&$.finished)throw Error("Hash#digest() has already been called")}function DN1($,F){NJ($,void 0,"digestInto() output");let A=F.outputLen;if($.length<A)throw Error('"digestInto() output" expected to be of length >='+A)}function mP($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function Y3(...$){for(let F=0;F<$.length;F++)$[F].fill(0)}function ZH($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function T$($,F){return $<<32-F|$>>>F}function C6($,F){return $<<F|$>>>32-F>>>0}var Gw0=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();function zw0($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function Hw0($){for(let F=0;F<$.length;F++)$[F]=zw0($[F]);return $}var Vm=Gw0?($)=>$:Hw0,Uw0=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")();var VJ={_0:48,_9:57,A:65,F:70,a:97,f:102};function ZN1($){if($>=VJ._0&&$<=VJ._9)return $-VJ._0;if($>=VJ.A&&$<=VJ.F)return $-(VJ.A-10);if($>=VJ.a&&$<=VJ.f)return $-(VJ.a-10);return}function GN1($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);if(Uw0)return Uint8Array.fromHex($);let F=$.length,A=F/2;if(F%2)throw Error("hex string expected, got unpadded hex of length "+F);let J=new Uint8Array(A);for(let X=0,Y=0;X<A;X++,Y+=2){let W=ZN1($.charCodeAt(Y)),Z=ZN1($.charCodeAt(Y+1));if(W===void 0||Z===void 0){let D=$[Y]+$[Y+1];throw Error('hex string expected, got non-hex character "'+D+'" at index '+Y)}J[X]=W*16+Z}return J}var Qw0=async()=>{};async function dP($,F,A){let J=Date.now();for(let X=0;X<$;X++){A(X);let Y=Date.now()-J;if(Y>=0&&Y<F)continue;await Qw0(),J+=Y}}function Kw0($){if(typeof $!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function Nm($,F=""){if(typeof $==="string")return Kw0($);return NJ($,void 0,F)}function cP($,F){if(F!==void 0&&{}.toString.call(F)!=="[object Object]")throw Error("options must be object or undefined");return Object.assign($,F)}function zN1($,F={}){let A=(X,Y)=>$(Y).update(X).digest(),J=$(void 0);return A.outputLen=J.outputLen,A.blockLen=J.blockLen,A.create=(X)=>$(X),Object.assign(A,F),Object.freeze(A)}var HN1=($)=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,$])});class Cm{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor($,F){if(fZ($),NJ(F,void 0,"key"),this.iHash=$.create(),typeof this.iHash.update!=="function")throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let A=this.blockLen,J=new Uint8Array(A);J.set(F.length>A?$.create().update(F).digest():F);for(let X=0;X<J.length;X++)J[X]^=54;this.iHash.update(J),this.oHash=$.create();for(let X=0;X<J.length;X++)J[X]^=106;this.oHash.update(J),Y3(J)}update($){return WH(this),this.iHash.update($),this}digestInto($){WH(this),NJ($,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||=Object.create(Object.getPrototypeOf(this),{});let{oHash:F,iHash:A,finished:J,destroyed:X,blockLen:Y,outputLen:W}=this;return $=$,$.finished=J,$.destroyed=X,$.blockLen=Y,$.outputLen=W,$.oHash=F._cloneInto($.oHash),$.iHash=A._cloneInto($.iHash),$}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}var DH=($,F,A)=>new Cm($,F).update(A).digest();DH.create=($,F)=>new Cm($,F);function Bw0($,F,A){if(fZ($),A===void 0)A=new Uint8Array($.outputLen);return DH($,A,F)}var Mm=Uint8Array.of(0),UN1=Uint8Array.of();function ww0($,F,A,J=32){fZ($),X3(J,"length");let X=$.outputLen;if(J>255*X)throw Error("Length must be <= 255*HashLen");let Y=Math.ceil(J/X);if(A===void 0)A=UN1;else NJ(A,void 0,"info");let W=new Uint8Array(Y*X),Z=DH.create($,F),D=Z._cloneInto(),G=new Uint8Array(Z.outputLen);for(let z=0;z<Y;z++)Mm[0]=z+1,D.update(z===0?UN1:G).update(A).update(Mm).digestInto(G),W.set(G,X*z),Z._cloneInto(D);return Z.destroy(),D.destroy(),Y3(G,Mm),W.slice(0,J)}var Pm=($,F,A,J,X)=>ww0($,Bw0($,F,A),J,X);function QN1($,F,A){return $&F^~$&A}function KN1($,F,A){return $&F^$&A^F&A}class lP{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor($,F,A,J){this.blockLen=$,this.outputLen=F,this.padOffset=A,this.isLE=J,this.buffer=new Uint8Array($),this.view=ZH(this.buffer)}update($){WH(this),NJ($);let{view:F,buffer:A,blockLen:J}=this,X=$.length;for(let Y=0;Y<X;){let W=Math.min(J-this.pos,X-Y);if(W===J){let Z=ZH($);for(;J<=X-Y;Y+=J)this.process(Z,Y);continue}if(A.set($.subarray(Y,Y+W),this.pos),this.pos+=W,Y+=W,this.pos===J)this.process(F,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){WH(this),DN1($,this),this.finished=!0;let{buffer:F,view:A,blockLen:J,isLE:X}=this,{pos:Y}=this;if(F[Y++]=128,Y3(this.buffer.subarray(Y)),this.padOffset>J-Y)this.process(A,0),Y=0;for(let z=Y;z<J;z++)F[z]=0;A.setBigUint64(J-8,BigInt(this.length*8),X),this.process(A,0);let W=ZH($),Z=this.outputLen;if(Z%4)throw Error("_sha2: outputLen must be aligned to 32bit");let D=Z/4,G=this.get();if(D>G.length)throw Error("_sha2: outputLen bigger than state");for(let z=0;z<D;z++)W.setUint32(4*z,G[z],X)}digest(){let{buffer:$,outputLen:F}=this;this.digestInto($);let A=$.slice(0,F);return this.destroy(),A}_cloneInto($){$||=new this.constructor,$.set(...this.get());let{blockLen:F,buffer:A,length:J,finished:X,destroyed:Y,pos:W}=this;if($.destroyed=Y,$.finished=X,$.length=J,$.pos=W,J%F)$.buffer.set(A);return $}clone(){return this._cloneInto()}}var CJ=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),MJ=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),$8=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),F8=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var pP=BigInt(4294967295),BN1=BigInt(32);function qw0($,F=!1){if(F)return{h:Number($&pP),l:Number($>>BN1&pP)};return{h:Number($>>BN1&pP)|0,l:Number($&pP)|0}}function wN1($,F=!1){let A=$.length,J=new Uint32Array(A),X=new Uint32Array(A);for(let Y=0;Y<A;Y++){let{h:W,l:Z}=qw0($[Y],F);[J[Y],X[Y]]=[W,Z]}return[J,X]}var Rm=($,F,A)=>$>>>A,Im=($,F,A)=>$<<32-A|F>>>A,vZ=($,F,A)=>$>>>A|F<<32-A,yZ=($,F,A)=>$<<32-A|F>>>A,fw=($,F,A)=>$<<64-A|F>>>A-32,vw=($,F,A)=>$>>>A-32|F<<64-A;function sF($,F,A,J){let X=(F>>>0)+(J>>>0);return{h:$+A+(X/4294967296|0)|0,l:X|0}}var qN1=($,F,A)=>($>>>0)+(F>>>0)+(A>>>0),LN1=($,F,A,J)=>F+A+J+($/4294967296|0)|0,EN1=($,F,A,J)=>($>>>0)+(F>>>0)+(A>>>0)+(J>>>0),VN1=($,F,A,J,X)=>F+A+J+X+($/4294967296|0)|0,NN1=($,F,A,J,X)=>($>>>0)+(F>>>0)+(A>>>0)+(J>>>0)+(X>>>0),CN1=($,F,A,J,X,Y)=>F+A+J+X+Y+($/4294967296|0)|0;var Ew0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),GY=new Uint32Array(64);class Tm extends lP{constructor($){super(64,$,8,!1)}get(){let{A:$,B:F,C:A,D:J,E:X,F:Y,G:W,H:Z}=this;return[$,F,A,J,X,Y,W,Z]}set($,F,A,J,X,Y,W,Z){this.A=$|0,this.B=F|0,this.C=A|0,this.D=J|0,this.E=X|0,this.F=Y|0,this.G=W|0,this.H=Z|0}process($,F){for(let z=0;z<16;z++,F+=4)GY[z]=$.getUint32(F,!1);for(let z=16;z<64;z++){let H=GY[z-15],U=GY[z-2],Q=T$(H,7)^T$(H,18)^H>>>3,B=T$(U,17)^T$(U,19)^U>>>10;GY[z]=B+GY[z-7]+Q+GY[z-16]|0}let{A,B:J,C:X,D:Y,E:W,F:Z,G:D,H:G}=this;for(let z=0;z<64;z++){let H=T$(W,6)^T$(W,11)^T$(W,25),U=G+H+QN1(W,Z,D)+Ew0[z]+GY[z]|0,B=(T$(A,2)^T$(A,13)^T$(A,22))+KN1(A,J,X)|0;G=D,D=Z,Z=W,W=Y+U|0,Y=X,X=J,J=A,A=U+B|0}A=A+this.A|0,J=J+this.B|0,X=X+this.C|0,Y=Y+this.D|0,W=W+this.E|0,Z=Z+this.F|0,D=D+this.G|0,G=G+this.H|0,this.set(A,J,X,Y,W,Z,D,G)}roundClean(){Y3(GY)}destroy(){this.set(0,0,0,0,0,0,0,0),Y3(this.buffer)}}class MN1 extends Tm{A=CJ[0]|0;B=CJ[1]|0;C=CJ[2]|0;D=CJ[3]|0;E=CJ[4]|0;F=CJ[5]|0;G=CJ[6]|0;H=CJ[7]|0;constructor(){super(32)}}class Vw0 extends Tm{A=MJ[0]|0;B=MJ[1]|0;C=MJ[2]|0;D=MJ[3]|0;E=MJ[4]|0;F=MJ[5]|0;G=MJ[6]|0;H=MJ[7]|0;constructor(){super(28)}}var PN1=(()=>wN1(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(($)=>BigInt($))))(),Nw0=(()=>PN1[0])(),Cw0=(()=>PN1[1])(),zY=new Uint32Array(80),HY=new Uint32Array(80);class yw extends lP{constructor($){super(128,$,16,!1)}get(){let{Ah:$,Al:F,Bh:A,Bl:J,Ch:X,Cl:Y,Dh:W,Dl:Z,Eh:D,El:G,Fh:z,Fl:H,Gh:U,Gl:Q,Hh:B,Hl:q}=this;return[$,F,A,J,X,Y,W,Z,D,G,z,H,U,Q,B,q]}set($,F,A,J,X,Y,W,Z,D,G,z,H,U,Q,B,q){this.Ah=$|0,this.Al=F|0,this.Bh=A|0,this.Bl=J|0,this.Ch=X|0,this.Cl=Y|0,this.Dh=W|0,this.Dl=Z|0,this.Eh=D|0,this.El=G|0,this.Fh=z|0,this.Fl=H|0,this.Gh=U|0,this.Gl=Q|0,this.Hh=B|0,this.Hl=q|0}process($,F){for(let V=0;V<16;V++,F+=4)zY[V]=$.getUint32(F),HY[V]=$.getUint32(F+=4);for(let V=16;V<80;V++){let R=zY[V-15]|0,N=HY[V-15]|0,S=vZ(R,N,1)^vZ(R,N,8)^Rm(R,N,7),C=yZ(R,N,1)^yZ(R,N,8)^Im(R,N,7),M=zY[V-2]|0,I=HY[V-2]|0,T=vZ(M,I,19)^fw(M,I,61)^Rm(M,I,6),j=yZ(M,I,19)^vw(M,I,61)^Im(M,I,6),b=EN1(C,j,HY[V-7],HY[V-16]),g=VN1(b,S,T,zY[V-7],zY[V-16]);zY[V]=g|0,HY[V]=b|0}let{Ah:A,Al:J,Bh:X,Bl:Y,Ch:W,Cl:Z,Dh:D,Dl:G,Eh:z,El:H,Fh:U,Fl:Q,Gh:B,Gl:q,Hh:L,Hl:E}=this;for(let V=0;V<80;V++){let R=vZ(z,H,14)^vZ(z,H,18)^fw(z,H,41),N=yZ(z,H,14)^yZ(z,H,18)^vw(z,H,41),S=z&U^~z&B,C=H&Q^~H&q,M=NN1(E,N,C,Cw0[V],HY[V]),I=CN1(M,L,R,S,Nw0[V],zY[V]),T=M|0,j=vZ(A,J,28)^fw(A,J,34)^fw(A,J,39),b=yZ(A,J,28)^vw(A,J,34)^vw(A,J,39),g=A&X^A&W^X&W,f=J&Y^J&Z^Y&Z;L=B|0,E=q|0,B=U|0,q=Q|0,U=z|0,Q=H|0,{h:z,l:H}=sF(D|0,G|0,I|0,T|0),D=W|0,G=Z|0,W=X|0,Z=Y|0,X=A|0,Y=J|0;let d=qN1(T,b,f);A=LN1(d,I,j,g),J=d|0}({h:A,l:J}=sF(this.Ah|0,this.Al|0,A|0,J|0)),{h:X,l:Y}=sF(this.Bh|0,this.Bl|0,X|0,Y|0),{h:W,l:Z}=sF(this.Ch|0,this.Cl|0,W|0,Z|0),{h:D,l:G}=sF(this.Dh|0,this.Dl|0,D|0,G|0),{h:z,l:H}=sF(this.Eh|0,this.El|0,z|0,H|0),{h:U,l:Q}=sF(this.Fh|0,this.Fl|0,U|0,Q|0),{h:B,l:q}=sF(this.Gh|0,this.Gl|0,B|0,q|0),{h:L,l:E}=sF(this.Hh|0,this.Hl|0,L|0,E|0),this.set(A,J,X,Y,W,Z,D,G,z,H,U,Q,B,q,L,E)}roundClean(){Y3(zY,HY)}destroy(){Y3(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Mw0 extends yw{Ah=F8[0]|0;Al=F8[1]|0;Bh=F8[2]|0;Bl=F8[3]|0;Ch=F8[4]|0;Cl=F8[5]|0;Dh=F8[6]|0;Dl=F8[7]|0;Eh=F8[8]|0;El=F8[9]|0;Fh=F8[10]|0;Fl=F8[11]|0;Gh=F8[12]|0;Gl=F8[13]|0;Hh=F8[14]|0;Hl=F8[15]|0;constructor(){super(64)}}class Pw0 extends yw{Ah=$8[0]|0;Al=$8[1]|0;Bh=$8[2]|0;Bl=$8[3]|0;Ch=$8[4]|0;Cl=$8[5]|0;Dh=$8[6]|0;Dl=$8[7]|0;Eh=$8[8]|0;El=$8[9]|0;Fh=$8[10]|0;Fl=$8[11]|0;Gh=$8[12]|0;Gl=$8[13]|0;Hh=$8[14]|0;Hl=$8[15]|0;constructor(){super(48)}}var R8=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),I8=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class Rw0 extends yw{Ah=R8[0]|0;Al=R8[1]|0;Bh=R8[2]|0;Bl=R8[3]|0;Ch=R8[4]|0;Cl=R8[5]|0;Dh=R8[6]|0;Dl=R8[7]|0;Eh=R8[8]|0;El=R8[9]|0;Fh=R8[10]|0;Fl=R8[11]|0;Gh=R8[12]|0;Gl=R8[13]|0;Hh=R8[14]|0;Hl=R8[15]|0;constructor(){super(28)}}class Iw0 extends yw{Ah=I8[0]|0;Al=I8[1]|0;Bh=I8[2]|0;Bl=I8[3]|0;Ch=I8[4]|0;Cl=I8[5]|0;Dh=I8[6]|0;Dl=I8[7]|0;Eh=I8[8]|0;El=I8[9]|0;Fh=I8[10]|0;Fl=I8[11]|0;Gh=I8[12]|0;Gl=I8[13]|0;Hh=I8[14]|0;Hl=I8[15]|0;constructor(){super(32)}}var GH=zN1(()=>new MN1,HN1(1));var uw={};l2(uw,{encode:()=>a2,decode:()=>T2});var uZ=new TextEncoder,A8=new TextDecoder;function M9(...$){let F=$.reduce((X,{length:Y})=>X+Y,0),A=new Uint8Array(F),J=0;for(let X of $)A.set(X,J),J+=X.length;return A}function jm($,F,A){if(F<0||F>=4294967296)throw RangeError(`value must be >= 0 and <= 4294967295. Received ${F}`);$.set([F>>>24,F>>>16,F>>>8,F&255],A)}function iP($){let F=Math.floor($/4294967296),A=$%4294967296,J=new Uint8Array(8);return jm(J,F,0),jm(J,A,4),J}function nP($){let F=new Uint8Array(4);return jm(F,$),F}function C4($){let F=new Uint8Array($.length);for(let A=0;A<$.length;A++){let J=$.charCodeAt(A);if(J>127)throw TypeError("non-ASCII string encountered in encode()");F[A]=J}return F}function RN1($){if(Uint8Array.prototype.toBase64)return $.toBase64();let F=32768,A=[];for(let J=0;J<$.length;J+=F)A.push(String.fromCharCode.apply(null,$.subarray(J,J+F)));return btoa(A.join(""))}function IN1($){if(Uint8Array.fromBase64)return Uint8Array.fromBase64($);let F=atob($),A=new Uint8Array(F.length);for(let J=0;J<F.length;J++)A[J]=F.charCodeAt(J);return A}function T2($){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof $==="string"?$:A8.decode($),{alphabet:"base64url"});let F=$;if(F instanceof Uint8Array)F=A8.decode(F);F=F.replace(/-/g,"+").replace(/_/g,"/");try{return IN1(F)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function a2($){let F=$;if(typeof F==="string")F=uZ.encode(F);if(Uint8Array.prototype.toBase64)return F.toBase64({alphabet:"base64url",omitPadding:!0});return RN1(F).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class P9 extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor($,F){super($,F);this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class T8 extends P9{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor($,F,A="unspecified",J="unspecified"){super($,{cause:{claim:A,reason:J,payload:F}});this.claim=A,this.reason=J,this.payload=F}}class zH extends P9{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor($,F,A="unspecified",J="unspecified"){super($,{cause:{claim:A,reason:J,payload:F}});this.claim=A,this.reason=J,this.payload=F}}class HH extends P9{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class c0 extends P9{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class hw extends P9{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor($="decryption operation failed",F){super($,F)}}class n1 extends P9{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class K2 extends P9{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class W3 extends P9{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class Om extends P9{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class rP extends P9{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class mw extends P9{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor($="no applicable key found in the JSON Web Key Set",F){super($,F)}}class Sm extends P9{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor($="multiple matching keys found in the JSON Web Key Set",F){super($,F)}}class _m extends P9{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor($="request timed out",F){super($,F)}}class km extends P9{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor($="signature verification failed",F){super($,F)}}function bm($){switch($){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new c0(`Unsupported JWE Algorithm: ${$}`)}}var TN1=($)=>crypto.getRandomValues(new Uint8Array(bm($)>>3));function aP($,F){if(F.length<<3!==bm($))throw new n1("Invalid Initialization Vector length")}function UH($,F){let A=$.byteLength<<3;if(A!==F)throw new n1(`Invalid Content Encryption Key length. Expected ${F} bits, got ${A} bits`)}var R9=($,F="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${F} must be ${$}`),oF=($,F)=>$.name===F;function tP($){return parseInt($.name.slice(4),10)}function Tw0($){switch($){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}function jN1($,F){if(F&&!$.usages.includes(F))throw TypeError(`CryptoKey does not support this operation, its usages must include ${F}.`)}function ON1($,F,A){switch(F){case"HS256":case"HS384":case"HS512":{if(!oF($.algorithm,"HMAC"))throw R9("HMAC");let J=parseInt(F.slice(2),10);if(tP($.algorithm.hash)!==J)throw R9(`SHA-${J}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!oF($.algorithm,"RSASSA-PKCS1-v1_5"))throw R9("RSASSA-PKCS1-v1_5");let J=parseInt(F.slice(2),10);if(tP($.algorithm.hash)!==J)throw R9(`SHA-${J}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!oF($.algorithm,"RSA-PSS"))throw R9("RSA-PSS");let J=parseInt(F.slice(2),10);if(tP($.algorithm.hash)!==J)throw R9(`SHA-${J}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!oF($.algorithm,"Ed25519"))throw R9("Ed25519");break}case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":{if(!oF($.algorithm,F))throw R9(F);break}case"ES256":case"ES384":case"ES512":{if(!oF($.algorithm,"ECDSA"))throw R9("ECDSA");let J=Tw0(F);if($.algorithm.namedCurve!==J)throw R9(J,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}jN1($,A)}function y3($,F,A){switch(F){case"A128GCM":case"A192GCM":case"A256GCM":{if(!oF($.algorithm,"AES-GCM"))throw R9("AES-GCM");let J=parseInt(F.slice(1,4),10);if($.algorithm.length!==J)throw R9(J,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!oF($.algorithm,"AES-KW"))throw R9("AES-KW");let J=parseInt(F.slice(1,4),10);if($.algorithm.length!==J)throw R9(J,"algorithm.length");break}case"ECDH":{switch($.algorithm.name){case"ECDH":case"X25519":break;default:throw R9("ECDH or X25519")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!oF($.algorithm,"PBKDF2"))throw R9("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!oF($.algorithm,"RSA-OAEP"))throw R9("RSA-OAEP");let J=parseInt(F.slice(9),10)||1;if(tP($.algorithm.hash)!==J)throw R9(`SHA-${J}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}jN1($,A)}function SN1($,F,...A){if(A=A.filter(Boolean),A.length>2){let J=A.pop();$+=`one of type ${A.join(", ")}, or ${J}.`}else if(A.length===2)$+=`one of type ${A[0]} or ${A[1]}.`;else $+=`of type ${A[0]}.`;if(F==null)$+=` Received ${F}`;else if(typeof F==="function"&&F.name)$+=` Received function ${F.name}`;else if(typeof F==="object"&&F!=null){if(F.constructor?.name)$+=` Received an instance of ${F.constructor.name}`}return $}var O5=($,...F)=>SN1("Key must be ",$,...F),xm=($,F,...A)=>SN1(`Key for the ${$} algorithm must be `,F,...A);function hZ($){if(!eF($))throw Error("CryptoKey instance expected")}var eF=($)=>{if($?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return $ instanceof CryptoKey}catch{return!1}},dw=($)=>$?.[Symbol.toStringTag]==="KeyObject",cw=($)=>eF($)||dw($);async function jw0($,F){if(!($ instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(F instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let A={name:"HMAC",hash:"SHA-256"},J=await crypto.subtle.generateKey(A,!1,["sign"]),X=new Uint8Array(await crypto.subtle.sign(A,J,$)),Y=new Uint8Array(await crypto.subtle.sign(A,J,F)),W=0,Z=-1;while(++Z<32)W|=X[Z]^Y[Z];return W===0}async function Ow0($,F,A,J,X,Y){if(!(F instanceof Uint8Array))throw TypeError(O5(F,"Uint8Array"));let W=parseInt($.slice(1,4),10),Z=await crypto.subtle.importKey("raw",F.subarray(W>>3),"AES-CBC",!1,["decrypt"]),D=await crypto.subtle.importKey("raw",F.subarray(0,W>>3),{hash:`SHA-${W<<1}`,name:"HMAC"},!1,["sign"]),G=M9(Y,J,A,iP(Y.length<<3)),z=new Uint8Array((await crypto.subtle.sign("HMAC",D,G)).slice(0,W>>3)),H;try{H=await jw0(X,z)}catch{}if(!H)throw new hw;let U;try{U=new Uint8Array(await crypto.subtle.decrypt({iv:J,name:"AES-CBC"},Z,A))}catch{}if(!U)throw new hw;return U}async function Sw0($,F,A,J,X,Y){let W;if(F instanceof Uint8Array)W=await crypto.subtle.importKey("raw",F,"AES-GCM",!1,["decrypt"]);else y3(F,$,"decrypt"),W=F;try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:Y,iv:J,name:"AES-GCM",tagLength:128},W,M9(A,X)))}catch{throw new hw}}async function sP($,F,A,J,X,Y){if(!eF(F)&&!(F instanceof Uint8Array))throw TypeError(O5(F,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!J)throw new n1("JWE Initialization Vector missing");if(!X)throw new n1("JWE Authentication Tag missing");switch(aP($,J),$){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":if(F instanceof Uint8Array)UH(F,parseInt($.slice(-3),10));return Ow0($,F,A,J,X,Y);case"A128GCM":case"A192GCM":case"A256GCM":if(F instanceof Uint8Array)UH(F,parseInt($.slice(1,4),10));return Sw0($,F,A,J,X,Y);default:throw new c0("Unsupported JWE Content Encryption Algorithm")}}function UY(...$){let F=$.filter(Boolean);if(F.length===0||F.length===1)return!0;let A;for(let J of F){let X=Object.keys(J);if(!A||A.size===0){A=new Set(X);continue}for(let Y of X){if(A.has(Y))return!1;A.add(Y)}}return!0}var _w0=($)=>typeof $==="object"&&$!==null;function g2($){if(!_w0($)||Object.prototype.toString.call($)!=="[object Object]")return!1;if(Object.getPrototypeOf($)===null)return!0;let F=$;while(Object.getPrototypeOf(F)!==null)F=Object.getPrototypeOf(F);return Object.getPrototypeOf($)===F}function _N1($,F){if($.algorithm.length!==parseInt(F.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${F}`)}function kN1($,F,A){if($ instanceof Uint8Array)return crypto.subtle.importKey("raw",$,"AES-KW",!0,[A]);return y3($,F,A),$}async function lw($,F,A){let J=await kN1(F,$,"wrapKey");_N1(J,$);let X=await crypto.subtle.importKey("raw",A,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",X,J,"AES-KW"))}async function pw($,F,A){let J=await kN1(F,$,"unwrapKey");_N1(J,$);let X=await crypto.subtle.unwrapKey("raw",A,J,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",X))}async function oP($,F){let A=`SHA-${$.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(A,F))}function fm($){return M9(nP($.length),$)}async function kw0($,F,A){let J=F>>3,X=32,Y=Math.ceil(J/32),W=new Uint8Array(Y*32);for(let Z=1;Z<=Y;Z++){let D=new Uint8Array(4+$.length+A.length);D.set(nP(Z),0),D.set($,4),D.set(A,4+$.length);let G=await oP("sha256",D);W.set(G,(Z-1)*32)}return W.slice(0,J)}async function eP($,F,A,J,X=new Uint8Array,Y=new Uint8Array){y3($,"ECDH"),y3(F,"ECDH","deriveBits");let W=fm(C4(A)),Z=fm(X),D=fm(Y),G=nP(J),z=new Uint8Array,H=M9(W,Z,D,G,z),U=new Uint8Array(await crypto.subtle.deriveBits({name:$.algorithm.name,public:$},F,bw0($)));return kw0(U,J,H)}function bw0($){if($.algorithm.name==="X25519")return 256;return Math.ceil(parseInt($.algorithm.namedCurve.slice(-3),10)/8)<<3}function $R($){switch($.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return $.algorithm.name==="X25519"}}function xw0($,F){if($ instanceof Uint8Array)return crypto.subtle.importKey("raw",$,"PBKDF2",!1,["deriveBits"]);return y3($,F,"deriveBits"),$}var gw0=($,F)=>M9(C4($),Uint8Array.of(0),F);async function xN1($,F,A,J){if(!($ instanceof Uint8Array)||$.length<8)throw new n1("PBES2 Salt Input must be 8 or more octets");let X=gw0(F,$),Y=parseInt(F.slice(13,16),10),W={hash:`SHA-${F.slice(8,11)}`,iterations:A,name:"PBKDF2",salt:X},Z=await xw0(J,F);return new Uint8Array(await crypto.subtle.deriveBits(W,Z,Y))}async function gN1($,F,A,J=2048,X=crypto.getRandomValues(new Uint8Array(16))){let Y=await xN1(X,$,J,F);return{encryptedKey:await lw($.slice(-6),Y,A),p2c:J,p2s:a2(X)}}async function fN1($,F,A,J,X){let Y=await xN1(X,$,J,F);return pw($.slice(-6),Y,A)}function mZ($,F){if($.startsWith("RS")||$.startsWith("PS")){let{modulusLength:A}=F.algorithm;if(typeof A!=="number"||A<2048)throw TypeError(`${$} requires key modulusLength to be 2048 bits or larger`)}}var yN1=($)=>{switch($){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new c0(`alg ${$} is not supported either by JOSE or your javascript runtime`)}};async function uN1($,F,A){return y3(F,$,"encrypt"),mZ($,F),new Uint8Array(await crypto.subtle.encrypt(yN1($),F,A))}async function hN1($,F,A){return y3(F,$,"decrypt"),mZ($,F),new Uint8Array(await crypto.subtle.decrypt(yN1($),F,A))}function iw($){switch($){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new c0(`Unsupported JWE Algorithm: ${$}`)}}var QY=($)=>crypto.getRandomValues(new Uint8Array(iw($)>>3));function fw0($){let F,A;switch($.kty){case"AKP":{switch($.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":F={name:$.alg},A=$.priv?["sign"]:["verify"];break;default:throw new c0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch($.alg){case"PS256":case"PS384":case"PS512":F={name:"RSA-PSS",hash:`SHA-${$.alg.slice(-3)}`},A=$.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":F={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${$.alg.slice(-3)}`},A=$.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":F={name:"RSA-OAEP",hash:`SHA-${parseInt($.alg.slice(-3),10)||1}`},A=$.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new c0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch($.alg){case"ES256":F={name:"ECDSA",namedCurve:"P-256"},A=$.d?["sign"]:["verify"];break;case"ES384":F={name:"ECDSA",namedCurve:"P-384"},A=$.d?["sign"]:["verify"];break;case"ES512":F={name:"ECDSA",namedCurve:"P-521"},A=$.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":F={name:"ECDH",namedCurve:$.crv},A=$.d?["deriveBits"]:[];break;default:throw new c0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch($.alg){case"Ed25519":case"EdDSA":F={name:"Ed25519"},A=$.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":F={name:$.crv},A=$.d?["deriveBits"]:[];break;default:throw new c0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new c0('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:F,keyUsages:A}}async function QH($){if(!$.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:F,keyUsages:A}=fw0($),J={...$};if(J.kty!=="AKP")delete J.alg;return delete J.use,crypto.subtle.importKey("jwk",J,F,$.ext??($.d||$.priv?!1:!0),$.key_ops??A)}async function j$($,F,A){if(!g2($))throw TypeError("JWK must be an object");let J;switch(F??=$.alg,J??=A?.extractable??$.ext,$.kty){case"oct":if(typeof $.k!=="string"||!$.k)throw TypeError('missing "k" (Key Value) Parameter value');return T2($.k);case"RSA":if("oth"in $&&$.oth!==void 0)throw new c0('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return QH({...$,alg:F,ext:J});case"AKP":{if(typeof $.alg!=="string"||!$.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(F!==void 0&&F!==$.alg)throw TypeError("JWK alg and alg option value mismatch");return QH({...$,ext:J})}case"EC":case"OKP":return QH({...$,alg:F,ext:J});default:throw new c0('Unsupported "kty" (Key Type) Parameter value')}}async function vw0($,F,A,J,X){if(!(A instanceof Uint8Array))throw TypeError(O5(A,"Uint8Array"));let Y=parseInt($.slice(1,4),10),W=await crypto.subtle.importKey("raw",A.subarray(Y>>3),"AES-CBC",!1,["encrypt"]),Z=await crypto.subtle.importKey("raw",A.subarray(0,Y>>3),{hash:`SHA-${Y<<1}`,name:"HMAC"},!1,["sign"]),D=new Uint8Array(await crypto.subtle.encrypt({iv:J,name:"AES-CBC"},W,F)),G=M9(X,J,D,iP(X.length<<3)),z=new Uint8Array((await crypto.subtle.sign("HMAC",Z,G)).slice(0,Y>>3));return{ciphertext:D,tag:z,iv:J}}async function yw0($,F,A,J,X){let Y;if(A instanceof Uint8Array)Y=await crypto.subtle.importKey("raw",A,"AES-GCM",!1,["encrypt"]);else y3(A,$,"encrypt"),Y=A;let W=new Uint8Array(await crypto.subtle.encrypt({additionalData:X,iv:J,name:"AES-GCM",tagLength:128},Y,F)),Z=W.slice(-16);return{ciphertext:W.slice(0,-16),tag:Z,iv:J}}async function FR($,F,A,J,X){if(!eF(A)&&!(A instanceof Uint8Array))throw TypeError(O5(A,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(J)aP($,J);else J=TN1($);switch($){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":if(A instanceof Uint8Array)UH(A,parseInt($.slice(-3),10));return vw0($,F,A,J,X);case"A128GCM":case"A192GCM":case"A256GCM":if(A instanceof Uint8Array)UH(A,parseInt($.slice(1,4),10));return yw0($,F,A,J,X);default:throw new c0("Unsupported JWE Content Encryption Algorithm")}}async function dN1($,F,A,J){let X=$.slice(0,7),Y=await FR(X,A,F,J,new Uint8Array);return{encryptedKey:Y.ciphertext,iv:a2(Y.iv),tag:a2(Y.tag)}}async function cN1($,F,A,J,X){let Y=$.slice(0,7);return sP(Y,F,A,J,X,new Uint8Array)}async function lN1($,F,A,J,X){switch($){case"dir":{if(A!==void 0)throw new n1("Encountered unexpected JWE Encrypted Key");return F}case"ECDH-ES":if(A!==void 0)throw new n1("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!g2(J.epk))throw new n1('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(hZ(F),!$R(F))throw new c0("ECDH with the provided key is not allowed or not supported by your javascript runtime");let Y=await j$(J.epk,$);hZ(Y);let W,Z;if(J.apu!==void 0){if(typeof J.apu!=="string")throw new n1('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{W=T2(J.apu)}catch{throw new n1("Failed to base64url decode the apu")}}if(J.apv!==void 0){if(typeof J.apv!=="string")throw new n1('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{Z=T2(J.apv)}catch{throw new n1("Failed to base64url decode the apv")}}let D=await eP(Y,F,$==="ECDH-ES"?J.enc:$,$==="ECDH-ES"?iw(J.enc):parseInt($.slice(-5,-2),10),W,Z);if($==="ECDH-ES")return D;if(A===void 0)throw new n1("JWE Encrypted Key missing");return pw($.slice(-6),D,A)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(A===void 0)throw new n1("JWE Encrypted Key missing");return hZ(F),hN1($,F,A)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(A===void 0)throw new n1("JWE Encrypted Key missing");if(typeof J.p2c!=="number")throw new n1('JOSE Header "p2c" (PBES2 Count) missing or invalid');let Y=X?.maxPBES2Count||1e4;if(J.p2c>Y)throw new n1('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof J.p2s!=="string")throw new n1('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let W;try{W=T2(J.p2s)}catch{throw new n1("Failed to base64url decode the p2s")}return fN1($,F,A,J.p2c,W)}case"A128KW":case"A192KW":case"A256KW":{if(A===void 0)throw new n1("JWE Encrypted Key missing");return pw($,F,A)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(A===void 0)throw new n1("JWE Encrypted Key missing");if(typeof J.iv!=="string")throw new n1('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof J.tag!=="string")throw new n1('JOSE Header "tag" (Authentication Tag) missing or invalid');let Y;try{Y=T2(J.iv)}catch{throw new n1("Failed to base64url decode the iv")}let W;try{W=T2(J.tag)}catch{throw new n1("Failed to base64url decode the tag")}return cN1($,F,A,Y,W)}default:throw new c0('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function KY($,F,A,J,X){if(X.crit!==void 0&&J?.crit===void 0)throw new $('"crit" (Critical) Header Parameter MUST be integrity protected');if(!J||J.crit===void 0)return new Set;if(!Array.isArray(J.crit)||J.crit.length===0||J.crit.some((W)=>typeof W!=="string"||W.length===0))throw new $('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let Y;if(A!==void 0)Y=new Map([...Object.entries(A),...F.entries()]);else Y=F;for(let W of J.crit){if(!Y.has(W))throw new c0(`Extension Header Parameter "${W}" is not recognized`);if(X[W]===void 0)throw new $(`Extension Header Parameter "${W}" is missing`);if(Y.get(W)&&J[W]===void 0)throw new $(`Extension Header Parameter "${W}" MUST be integrity protected`)}return new Set(J.crit)}function nw($,F){if(F!==void 0&&(!Array.isArray(F)||F.some((A)=>typeof A!=="string")))throw TypeError(`"${$}" option must be an array of strings`);if(!F)return;return new Set(F)}var dZ=($)=>g2($)&&typeof $.kty==="string",pN1=($)=>$.kty!=="oct"&&($.kty==="AKP"&&typeof $.priv==="string"||typeof $.d==="string"),iN1=($)=>$.kty!=="oct"&&$.d===void 0&&$.priv===void 0,nN1=($)=>$.kty==="oct"&&typeof $.k==="string";var KH,rN1=async($,F,A,J=!1)=>{KH||=new WeakMap;let X=KH.get($);if(X?.[A])return X[A];let Y=await QH({...F,alg:A});if(J)Object.freeze($);if(!X)KH.set($,{[A]:Y});else X[A]=Y;return Y},hw0=($,F)=>{KH||=new WeakMap;let A=KH.get($);if(A?.[F])return A[F];let J=$.type==="public",X=J?!0:!1,Y;if($.asymmetricKeyType==="x25519"){switch(F){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}Y=$.toCryptoKey($.asymmetricKeyType,X,J?[]:["deriveBits"])}if($.asymmetricKeyType==="ed25519"){if(F!=="EdDSA"&&F!=="Ed25519")throw TypeError("given KeyObject instance cannot be used for this algorithm");Y=$.toCryptoKey($.asymmetricKeyType,X,[J?"verify":"sign"])}switch($.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":{if(F!==$.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");Y=$.toCryptoKey($.asymmetricKeyType,X,[J?"verify":"sign"])}}if($.asymmetricKeyType==="rsa"){let W;switch(F){case"RSA-OAEP":W="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":W="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":W="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":W="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(F.startsWith("RSA-OAEP"))return $.toCryptoKey({name:"RSA-OAEP",hash:W},X,J?["encrypt"]:["decrypt"]);Y=$.toCryptoKey({name:F.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:W},X,[J?"verify":"sign"])}if($.asymmetricKeyType==="ec"){let Z=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get($.asymmetricKeyDetails?.namedCurve);if(!Z)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(F==="ES256"&&Z==="P-256")Y=$.toCryptoKey({name:"ECDSA",namedCurve:Z},X,[J?"verify":"sign"]);if(F==="ES384"&&Z==="P-384")Y=$.toCryptoKey({name:"ECDSA",namedCurve:Z},X,[J?"verify":"sign"]);if(F==="ES512"&&Z==="P-521")Y=$.toCryptoKey({name:"ECDSA",namedCurve:Z},X,[J?"verify":"sign"]);if(F.startsWith("ECDH-ES"))Y=$.toCryptoKey({name:"ECDH",namedCurve:Z},X,J?[]:["deriveBits"])}if(!Y)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(!A)KH.set($,{[F]:Y});else A[F]=Y;return Y};async function $A($,F){if($ instanceof Uint8Array)return $;if(eF($))return $;if(dw($)){if($.type==="secret")return $.export();if("toCryptoKey"in $&&typeof $.toCryptoKey==="function")try{return hw0($,F)}catch(J){if(J instanceof TypeError)throw J}let A=$.export({format:"jwk"});return rN1($,A,F)}if(dZ($)){if($.k)return T2($.k);return rN1($,$,F,!0)}throw Error("unreachable")}var BH=($)=>$?.[Symbol.toStringTag],vm=($,F,A)=>{if(F.use!==void 0){let J;switch(A){case"sign":case"verify":J="sig";break;case"encrypt":case"decrypt":J="enc";break}if(F.use!==J)throw TypeError(`Invalid key for this operation, its "use" must be "${J}" when present`)}if(F.alg!==void 0&&F.alg!==$)throw TypeError(`Invalid key for this operation, its "alg" must be "${$}" when present`);if(Array.isArray(F.key_ops)){let J;switch(!0){case(A==="sign"||A==="verify"):case $==="dir":case $.includes("CBC-HS"):J=A;break;case $.startsWith("PBES2"):J="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test($):if(!$.includes("GCM")&&$.endsWith("KW"))J=A==="encrypt"?"wrapKey":"unwrapKey";else J=A;break;case(A==="encrypt"&&$.startsWith("RSA")):J="wrapKey";break;case A==="decrypt":J=$.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(J&&F.key_ops?.includes?.(J)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${J}" when present`)}return!0},mw0=($,F,A)=>{if(F instanceof Uint8Array)return;if(dZ(F)){if(nN1(F)&&vm($,F,A))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!cw(F))throw TypeError(xm($,F,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(F.type!=="secret")throw TypeError(`${BH(F)} instances for symmetric algorithms must be of type "secret"`)},dw0=($,F,A)=>{if(dZ(F))switch(A){case"decrypt":case"sign":if(pN1(F)&&vm($,F,A))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if(iN1(F)&&vm($,F,A))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!cw(F))throw TypeError(xm($,F,"CryptoKey","KeyObject","JSON Web Key"));if(F.type==="secret")throw TypeError(`${BH(F)} instances for asymmetric algorithms must not be of type "secret"`);if(F.type==="public")switch(A){case"sign":throw TypeError(`${BH(F)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${BH(F)} instances for asymmetric algorithm decryption must be of type "private"`)}if(F.type==="private")switch(A){case"verify":throw TypeError(`${BH(F)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${BH(F)} instances for asymmetric algorithm encryption must be of type "public"`)}};function BY($,F,A){switch($.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":mw0($,F,A);break;default:dw0($,F,A)}}async function aN1($,F,A){if(!g2($))throw new n1("Flattened JWE must be an object");if($.protected===void 0&&$.header===void 0&&$.unprotected===void 0)throw new n1("JOSE Header missing");if($.iv!==void 0&&typeof $.iv!=="string")throw new n1("JWE Initialization Vector incorrect type");if(typeof $.ciphertext!=="string")throw new n1("JWE Ciphertext missing or incorrect type");if($.tag!==void 0&&typeof $.tag!=="string")throw new n1("JWE Authentication Tag incorrect type");if($.protected!==void 0&&typeof $.protected!=="string")throw new n1("JWE Protected Header incorrect type");if($.encrypted_key!==void 0&&typeof $.encrypted_key!=="string")throw new n1("JWE Encrypted Key incorrect type");if($.aad!==void 0&&typeof $.aad!=="string")throw new n1("JWE AAD incorrect type");if($.header!==void 0&&!g2($.header))throw new n1("JWE Shared Unprotected Header incorrect type");if($.unprotected!==void 0&&!g2($.unprotected))throw new n1("JWE Per-Recipient Unprotected Header incorrect type");let J;if($.protected)try{let N=T2($.protected);J=JSON.parse(A8.decode(N))}catch{throw new n1("JWE Protected Header is invalid")}if(!UY(J,$.header,$.unprotected))throw new n1("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let X={...J,...$.header,...$.unprotected};if(KY(n1,new Map,A?.crit,J,X),X.zip!==void 0)throw new c0('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:Y,enc:W}=X;if(typeof Y!=="string"||!Y)throw new n1("missing JWE Algorithm (alg) in JWE Header");if(typeof W!=="string"||!W)throw new n1("missing JWE Encryption Algorithm (enc) in JWE Header");let Z=A&&nw("keyManagementAlgorithms",A.keyManagementAlgorithms),D=A&&nw("contentEncryptionAlgorithms",A.contentEncryptionAlgorithms);if(Z&&!Z.has(Y)||!Z&&Y.startsWith("PBES2"))throw new HH('"alg" (Algorithm) Header Parameter value not allowed');if(D&&!D.has(W))throw new HH('"enc" (Encryption Algorithm) Header Parameter value not allowed');let G;if($.encrypted_key!==void 0)try{G=T2($.encrypted_key)}catch{throw new n1("Failed to base64url decode the encrypted_key")}let z=!1;if(typeof F==="function")F=await F(J,$),z=!0;BY(Y==="dir"?W:Y,F,"decrypt");let H=await $A(F,Y),U;try{U=await lN1(Y,H,G,X,A)}catch(N){if(N instanceof TypeError||N instanceof n1||N instanceof c0)throw N;U=QY(W)}let Q,B;if($.iv!==void 0)try{Q=T2($.iv)}catch{throw new n1("Failed to base64url decode the iv")}if($.tag!==void 0)try{B=T2($.tag)}catch{throw new n1("Failed to base64url decode the tag")}let q=$.protected!==void 0?C4($.protected):new Uint8Array,L;if($.aad!==void 0)L=M9(q,C4("."),C4($.aad));else L=q;let E;try{E=T2($.ciphertext)}catch{throw new n1("Failed to base64url decode the ciphertext")}let R={plaintext:await sP(W,U,E,Q,B,L)};if($.protected!==void 0)R.protectedHeader=J;if($.aad!==void 0)try{R.additionalAuthenticatedData=T2($.aad)}catch{throw new n1("Failed to base64url decode the aad")}if($.unprotected!==void 0)R.sharedUnprotectedHeader=$.unprotected;if($.header!==void 0)R.unprotectedHeader=$.header;if(z)return{...R,key:H};return R}async function tN1($,F,A){if($ instanceof Uint8Array)$=A8.decode($);if(typeof $!=="string")throw new n1("Compact JWE must be a string or Uint8Array");let{0:J,1:X,2:Y,3:W,4:Z,length:D}=$.split(".");if(D!==5)throw new n1("Invalid Compact JWE");let G=await aN1({ciphertext:W,iv:Y||void 0,protected:J,tag:Z||void 0,encrypted_key:X||void 0},F,A),z={plaintext:G.plaintext,protectedHeader:G.protectedHeader};if(typeof F==="function")return{...z,key:G.key};return z}var sN1=Symbol();async function oN1($){if(dw($))if($.type==="secret")$=$.export();else return $.export({format:"jwk"});if($ instanceof Uint8Array)return{kty:"oct",k:a2($)};if(!eF($))throw TypeError(O5($,"CryptoKey","KeyObject","Uint8Array"));if(!$.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:F,key_ops:A,alg:J,use:X,...Y}=await crypto.subtle.exportKey("jwk",$);if(Y.kty==="AKP")Y.alg=J;return Y}async function AR($){return oN1($)}async function eN1($,F,A,J,X={}){let Y,W,Z;switch($){case"dir":{Z=A;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(hZ(A),!$R(A))throw new c0("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:D,apv:G}=X,z;if(X.epk)z=await $A(X.epk,$);else z=(await crypto.subtle.generateKey(A.algorithm,!0,["deriveBits"])).privateKey;let{x:H,y:U,crv:Q,kty:B}=await AR(z),q=await eP(A,z,$==="ECDH-ES"?F:$,$==="ECDH-ES"?iw(F):parseInt($.slice(-5,-2),10),D,G);if(W={epk:{x:H,crv:Q,kty:B}},B==="EC")W.epk.y=U;if(D)W.apu=a2(D);if(G)W.apv=a2(G);if($==="ECDH-ES"){Z=q;break}Z=J||QY(F);let L=$.slice(-6);Y=await lw(L,q,Z);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{Z=J||QY(F),hZ(A),Y=await uN1($,A,Z);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{Z=J||QY(F);let{p2c:D,p2s:G}=X;({encryptedKey:Y,...W}=await gN1($,A,Z,D,G));break}case"A128KW":case"A192KW":case"A256KW":{Z=J||QY(F),Y=await lw($,A,Z);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{Z=J||QY(F);let{iv:D}=X;({encryptedKey:Y,...W}=await dN1($,A,Z,D));break}default:throw new c0('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:Z,encryptedKey:Y,parameters:W}}class ym{#$;#F;#A;#J;#X;#Z;#W;#Y;constructor($){if(!($ instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#$=$}setKeyManagementParameters($){if(this.#Y)throw TypeError("setKeyManagementParameters can only be called once");return this.#Y=$,this}setProtectedHeader($){if(this.#F)throw TypeError("setProtectedHeader can only be called once");return this.#F=$,this}setSharedUnprotectedHeader($){if(this.#A)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#A=$,this}setUnprotectedHeader($){if(this.#J)throw TypeError("setUnprotectedHeader can only be called once");return this.#J=$,this}setAdditionalAuthenticatedData($){return this.#X=$,this}setContentEncryptionKey($){if(this.#Z)throw TypeError("setContentEncryptionKey can only be called once");return this.#Z=$,this}setInitializationVector($){if(this.#W)throw TypeError("setInitializationVector can only be called once");return this.#W=$,this}async encrypt($,F){if(!this.#F&&!this.#J&&!this.#A)throw new n1("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!UY(this.#F,this.#J,this.#A))throw new n1("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let A={...this.#F,...this.#J,...this.#A};if(KY(n1,new Map,F?.crit,this.#F,A),A.zip!==void 0)throw new c0('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:J,enc:X}=A;if(typeof J!=="string"||!J)throw new n1('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof X!=="string"||!X)throw new n1('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let Y;if(this.#Z&&(J==="dir"||J==="ECDH-ES"))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${J}`);BY(J==="dir"?X:J,$,"encrypt");let W;{let q,L=await $A($,J);if({cek:W,encryptedKey:Y,parameters:q}=await eN1(J,X,L,this.#Z,this.#Y),q)if(F&&sN1 in F)if(!this.#J)this.setUnprotectedHeader(q);else this.#J={...this.#J,...q};else if(!this.#F)this.setProtectedHeader(q);else this.#F={...this.#F,...q}}let Z,D,G,z;if(this.#F)D=a2(JSON.stringify(this.#F)),G=C4(D);else D="",G=new Uint8Array;if(this.#X){z=a2(this.#X);let q=C4(z);Z=M9(G,C4("."),q)}else Z=G;let{ciphertext:H,tag:U,iv:Q}=await FR(X,this.#$,W,this.#W,Z),B={ciphertext:a2(H)};if(Q)B.iv=a2(Q);if(U)B.tag=a2(U);if(Y)B.encrypted_key=a2(Y);if(z)B.aad=z;if(this.#F)B.protected=D;if(this.#A)B.unprotected=this.#A;if(this.#J)B.header=this.#J;return B}}function JR($,F){let A=`SHA-${$.slice(-3)}`;switch($){case"HS256":case"HS384":case"HS512":return{hash:A,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:A,name:"RSA-PSS",saltLength:parseInt($.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:A,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:A,name:"ECDSA",namedCurve:F.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:$};default:throw new c0(`alg ${$} is not supported either by JOSE or your javascript runtime`)}}async function XR($,F,A){if(F instanceof Uint8Array){if(!$.startsWith("HS"))throw TypeError(O5(F,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",F,{hash:`SHA-${$.slice(-3)}`,name:"HMAC"},!1,[A])}return ON1(F,$,A),F}async function $C1($,F,A,J){let X=await XR($,F,"verify");mZ($,X);let Y=JR($,X.algorithm);try{return await crypto.subtle.verify(Y,X,A,J)}catch{return!1}}async function FC1($,F,A){if(!g2($))throw new K2("Flattened JWS must be an object");if($.protected===void 0&&$.header===void 0)throw new K2('Flattened JWS must have either of the "protected" or "header" members');if($.protected!==void 0&&typeof $.protected!=="string")throw new K2("JWS Protected Header incorrect type");if($.payload===void 0)throw new K2("JWS Payload missing");if(typeof $.signature!=="string")throw new K2("JWS Signature missing or incorrect type");if($.header!==void 0&&!g2($.header))throw new K2("JWS Unprotected Header incorrect type");let J={};if($.protected)try{let L=T2($.protected);J=JSON.parse(A8.decode(L))}catch{throw new K2("JWS Protected Header is invalid")}if(!UY(J,$.header))throw new K2("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let X={...J,...$.header},Y=KY(K2,new Map([["b64",!0]]),A?.crit,J,X),W=!0;if(Y.has("b64")){if(W=J.b64,typeof W!=="boolean")throw new K2('The "b64" (base64url-encode payload) Header Parameter must be a boolean')}let{alg:Z}=X;if(typeof Z!=="string"||!Z)throw new K2('JWS "alg" (Algorithm) Header Parameter missing or invalid');let D=A&&nw("algorithms",A.algorithms);if(D&&!D.has(Z))throw new HH('"alg" (Algorithm) Header Parameter value not allowed');if(W){if(typeof $.payload!=="string")throw new K2("JWS Payload must be a string")}else if(typeof $.payload!=="string"&&!($.payload instanceof Uint8Array))throw new K2("JWS Payload must be a string or an Uint8Array instance");let G=!1;if(typeof F==="function")F=await F(J,$),G=!0;BY(Z,F,"verify");let z=M9($.protected!==void 0?C4($.protected):new Uint8Array,C4("."),typeof $.payload==="string"?W?C4($.payload):uZ.encode($.payload):$.payload),H;try{H=T2($.signature)}catch{throw new K2("Failed to base64url decode the signature")}let U=await $A(F,Z);if(!await $C1(Z,U,H,z))throw new km;let B;if(W)try{B=T2($.payload)}catch{throw new K2("Failed to base64url decode the payload")}else if(typeof $.payload==="string")B=uZ.encode($.payload);else B=$.payload;let q={payload:B};if($.protected!==void 0)q.protectedHeader=J;if($.header!==void 0)q.unprotectedHeader=$.header;if(G)return{...q,key:U};return q}async function AC1($,F,A){if($ instanceof Uint8Array)$=A8.decode($);if(typeof $!=="string")throw new K2("Compact JWS must be a string or Uint8Array");let{0:J,1:X,2:Y,length:W}=$.split(".");if(W!==3)throw new K2("Invalid Compact JWS");let Z=await FC1({payload:X,protected:J,signature:Y},F,A),D={payload:Z.payload,protectedHeader:Z.protectedHeader};if(typeof F==="function")return{...D,key:Z.key};return D}var wY=($)=>Math.floor($.getTime()/1000),XC1=60,YC1=XC1*60,um=YC1*24,cw0=um*7,lw0=um*365.25,pw0=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function rw($){let F=pw0.exec($);if(!F||F[4]&&F[1])throw TypeError("Invalid time period format");let A=parseFloat(F[2]),J=F[3].toLowerCase(),X;switch(J){case"sec":case"secs":case"second":case"seconds":case"s":X=Math.round(A);break;case"minute":case"minutes":case"min":case"mins":case"m":X=Math.round(A*XC1);break;case"hour":case"hours":case"hr":case"hrs":case"h":X=Math.round(A*YC1);break;case"day":case"days":case"d":X=Math.round(A*um);break;case"week":case"weeks":case"w":X=Math.round(A*cw0);break;default:X=Math.round(A*lw0);break}if(F[1]==="-"||F[4]==="ago")return-X;return X}function cZ($,F){if(!Number.isFinite(F))throw TypeError(`Invalid ${$} input`);return F}var JC1=($)=>{if($.includes("/"))return $.toLowerCase();return`application/${$.toLowerCase()}`},iw0=($,F)=>{if(typeof $==="string")return F.includes($);if(Array.isArray($))return F.some(Set.prototype.has.bind(new Set($)));return!1};function YR($,F,A={}){let J;try{J=JSON.parse(A8.decode(F))}catch{}if(!g2(J))throw new W3("JWT Claims Set must be a top-level JSON object");let{typ:X}=A;if(X&&(typeof $.typ!=="string"||JC1($.typ)!==JC1(X)))throw new T8('unexpected "typ" JWT header value',J,"typ","check_failed");let{requiredClaims:Y=[],issuer:W,subject:Z,audience:D,maxTokenAge:G}=A,z=[...Y];if(G!==void 0)z.push("iat");if(D!==void 0)z.push("aud");if(Z!==void 0)z.push("sub");if(W!==void 0)z.push("iss");for(let B of new Set(z.reverse()))if(!(B in J))throw new T8(`missing required "${B}" claim`,J,B,"missing");if(W&&!(Array.isArray(W)?W:[W]).includes(J.iss))throw new T8('unexpected "iss" claim value',J,"iss","check_failed");if(Z&&J.sub!==Z)throw new T8('unexpected "sub" claim value',J,"sub","check_failed");if(D&&!iw0(J.aud,typeof D==="string"?[D]:D))throw new T8('unexpected "aud" claim value',J,"aud","check_failed");let H;switch(typeof A.clockTolerance){case"string":H=rw(A.clockTolerance);break;case"number":H=A.clockTolerance;break;case"undefined":H=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:U}=A,Q=wY(U||new Date);if((J.iat!==void 0||G)&&typeof J.iat!=="number")throw new T8('"iat" claim must be a number',J,"iat","invalid");if(J.nbf!==void 0){if(typeof J.nbf!=="number")throw new T8('"nbf" claim must be a number',J,"nbf","invalid");if(J.nbf>Q+H)throw new T8('"nbf" claim timestamp check failed',J,"nbf","check_failed")}if(J.exp!==void 0){if(typeof J.exp!=="number")throw new T8('"exp" claim must be a number',J,"exp","invalid");if(J.exp<=Q-H)throw new zH('"exp" claim timestamp check failed',J,"exp","check_failed")}if(G){let B=Q-J.iat,q=typeof G==="number"?G:rw(G);if(B-H>q)throw new zH('"iat" claim timestamp check failed (too far in the past)',J,"iat","check_failed");if(B<0-H)throw new T8('"iat" claim timestamp check failed (it should be in the past)',J,"iat","check_failed")}return J}class aw{#$;constructor($){if(!g2($))throw TypeError("JWT Claims Set MUST be an object");this.#$=structuredClone($)}data(){return uZ.encode(JSON.stringify(this.#$))}get iss(){return this.#$.iss}set iss($){this.#$.iss=$}get sub(){return this.#$.sub}set sub($){this.#$.sub=$}get aud(){return this.#$.aud}set aud($){this.#$.aud=$}set jti($){this.#$.jti=$}set nbf($){if(typeof $==="number")this.#$.nbf=cZ("setNotBefore",$);else if($ instanceof Date)this.#$.nbf=cZ("setNotBefore",wY($));else this.#$.nbf=wY(new Date)+rw($)}set exp($){if(typeof $==="number")this.#$.exp=cZ("setExpirationTime",$);else if($ instanceof Date)this.#$.exp=cZ("setExpirationTime",wY($));else this.#$.exp=wY(new Date)+rw($)}set iat($){if($===void 0)this.#$.iat=wY(new Date);else if($ instanceof Date)this.#$.iat=cZ("setIssuedAt",wY($));else if(typeof $==="string")this.#$.iat=cZ("setIssuedAt",wY(new Date)+rw($));else this.#$.iat=cZ("setIssuedAt",$)}}async function k7($,F,A){let J=await AC1($,F,A);if(J.protectedHeader.crit?.includes("b64")&&J.protectedHeader.b64===!1)throw new W3("JWTs MUST NOT use unencoded payload");let Y={payload:YR(J.protectedHeader,J.payload,A),protectedHeader:J.protectedHeader};if(typeof F==="function")return{...Y,key:J.key};return Y}async function hm($,F,A){let J=await tN1($,F,A),X=YR(J.protectedHeader,J.plaintext,A),{protectedHeader:Y}=J;if(Y.iss!==void 0&&Y.iss!==X.iss)throw new T8('replicated "iss" claim header parameter mismatch',X,"iss","mismatch");if(Y.sub!==void 0&&Y.sub!==X.sub)throw new T8('replicated "sub" claim header parameter mismatch',X,"sub","mismatch");if(Y.aud!==void 0&&JSON.stringify(Y.aud)!==JSON.stringify(X.aud))throw new T8('replicated "aud" claim header parameter mismatch',X,"aud","mismatch");let W={payload:X,protectedHeader:Y};if(typeof F==="function")return{...W,key:J.key};return W}class mm{#$;constructor($){this.#$=new ym($)}setContentEncryptionKey($){return this.#$.setContentEncryptionKey($),this}setInitializationVector($){return this.#$.setInitializationVector($),this}setProtectedHeader($){return this.#$.setProtectedHeader($),this}setKeyManagementParameters($){return this.#$.setKeyManagementParameters($),this}async encrypt($,F){let A=await this.#$.encrypt($,F);return[A.protected,A.encrypted_key,A.iv,A.ciphertext,A.tag].join(".")}}async function WC1($,F,A){let J=await XR($,F,"sign");mZ($,J);let X=await crypto.subtle.sign(JR($,J.algorithm),J,A);return new Uint8Array(X)}class dm{#$;#F;#A;constructor($){if(!($ instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#$=$}setProtectedHeader($){if(this.#F)throw TypeError("setProtectedHeader can only be called once");return this.#F=$,this}setUnprotectedHeader($){if(this.#A)throw TypeError("setUnprotectedHeader can only be called once");return this.#A=$,this}async sign($,F){if(!this.#F&&!this.#A)throw new K2("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!UY(this.#F,this.#A))throw new K2("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let A={...this.#F,...this.#A},J=KY(K2,new Map([["b64",!0]]),F?.crit,this.#F,A),X=!0;if(J.has("b64")){if(X=this.#F.b64,typeof X!=="boolean")throw new K2('The "b64" (base64url-encode payload) Header Parameter must be a boolean')}let{alg:Y}=A;if(typeof Y!=="string"||!Y)throw new K2('JWS "alg" (Algorithm) Header Parameter missing or invalid');BY(Y,$,"sign");let W,Z;if(X)W=a2(this.#$),Z=C4(W);else Z=this.#$,W="";let D,G;if(this.#F)D=a2(JSON.stringify(this.#F)),G=C4(D);else D="",G=new Uint8Array;let z=M9(G,C4("."),Z),H=await $A($,Y),U=await WC1(Y,H,z),Q={signature:a2(U),payload:W};if(this.#A)Q.header=this.#A;if(this.#F)Q.protected=D;return Q}}class cm{#$;constructor($){this.#$=new dm($)}setProtectedHeader($){return this.#$.setProtectedHeader($),this}async sign($,F){let A=await this.#$.sign($,F);if(A.payload===void 0)throw TypeError("use the flattened module for creating JWS with b64: false");return`${A.protected}.${A.payload}.${A.signature}`}}class WR{#$;#F;constructor($={}){this.#F=new aw($)}setIssuer($){return this.#F.iss=$,this}setSubject($){return this.#F.sub=$,this}setAudience($){return this.#F.aud=$,this}setJti($){return this.#F.jti=$,this}setNotBefore($){return this.#F.nbf=$,this}setExpirationTime($){return this.#F.exp=$,this}setIssuedAt($){return this.#F.iat=$,this}setProtectedHeader($){return this.#$=$,this}async sign($,F){let A=new cm(this.#F.data());if(A.setProtectedHeader(this.#$),Array.isArray(this.#$?.crit)&&this.#$.crit.includes("b64")&&this.#$.b64===!1)throw new W3("JWTs MUST NOT use unencoded payload");return A.sign($,F)}}class ZR{#$;#F;#A;#J;#X;#Z;#W;#Y;constructor($={}){this.#Y=new aw($)}setIssuer($){return this.#Y.iss=$,this}setSubject($){return this.#Y.sub=$,this}setAudience($){return this.#Y.aud=$,this}setJti($){return this.#Y.jti=$,this}setNotBefore($){return this.#Y.nbf=$,this}setExpirationTime($){return this.#Y.exp=$,this}setIssuedAt($){return this.#Y.iat=$,this}setProtectedHeader($){if(this.#J)throw TypeError("setProtectedHeader can only be called once");return this.#J=$,this}setKeyManagementParameters($){if(this.#A)throw TypeError("setKeyManagementParameters can only be called once");return this.#A=$,this}setContentEncryptionKey($){if(this.#$)throw TypeError("setContentEncryptionKey can only be called once");return this.#$=$,this}setInitializationVector($){if(this.#F)throw TypeError("setInitializationVector can only be called once");return this.#F=$,this}replicateIssuerAsHeader(){return this.#X=!0,this}replicateSubjectAsHeader(){return this.#Z=!0,this}replicateAudienceAsHeader(){return this.#W=!0,this}async encrypt($,F){let A=new mm(this.#Y.data());if(this.#J&&(this.#X||this.#Z||this.#W))this.#J={...this.#J,iss:this.#X?this.#Y.iss:void 0,sub:this.#Z?this.#Y.sub:void 0,aud:this.#W?this.#Y.aud:void 0};if(A.setProtectedHeader(this.#J),this.#F)A.setInitializationVector(this.#F);if(this.#$)A.setContentEncryptionKey(this.#$);if(this.#A)A.setKeyManagementParameters(this.#A);return A.encrypt($,F)}}var FA=($,F)=>{if(typeof $!=="string"||!$)throw new Om(`${F} missing or invalid`)};async function DR($,F){let A;if(dZ($))A=$;else if(cw($))A=await AR($);else throw TypeError(O5($,"CryptoKey","KeyObject","JSON Web Key"));if(F??="sha256",F!=="sha256"&&F!=="sha384"&&F!=="sha512")throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let J;switch(A.kty){case"AKP":FA(A.alg,'"alg" (Algorithm) Parameter'),FA(A.pub,'"pub" (Public key) Parameter'),J={alg:A.alg,kty:A.kty,pub:A.pub};break;case"EC":FA(A.crv,'"crv" (Curve) Parameter'),FA(A.x,'"x" (X Coordinate) Parameter'),FA(A.y,'"y" (Y Coordinate) Parameter'),J={crv:A.crv,kty:A.kty,x:A.x,y:A.y};break;case"OKP":FA(A.crv,'"crv" (Subtype of Key Pair) Parameter'),FA(A.x,'"x" (Public Key) Parameter'),J={crv:A.crv,kty:A.kty,x:A.x};break;case"RSA":FA(A.e,'"e" (Exponent) Parameter'),FA(A.n,'"n" (Modulus) Parameter'),J={e:A.e,kty:A.kty,n:A.n};break;case"oct":FA(A.k,'"k" (Key Value) Parameter'),J={k:A.k,kty:A.kty};break;default:throw new c0('"kty" (Key Type) Parameter missing or unsupported')}let X=C4(JSON.stringify(J));return a2(await oP(F,X))}function nw0($){switch(typeof $==="string"&&$.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";case"ML":return"AKP";default:throw new c0('Unsupported "alg" value for a JSON Web Key Set')}}function rw0($){return $&&typeof $==="object"&&Array.isArray($.keys)&&$.keys.every(aw0)}function aw0($){return g2($)}class DC1{#$;#F=new WeakMap;constructor($){if(!rw0($))throw new rP("JSON Web Key Set malformed");this.#$=structuredClone($)}jwks(){return this.#$}async getKey($,F){let{alg:A,kid:J}={...$,...F?.header},X=nw0(A),Y=this.#$.keys.filter((D)=>{let G=X===D.kty;if(G&&typeof J==="string")G=J===D.kid;if(G&&(typeof D.alg==="string"||X==="AKP"))G=A===D.alg;if(G&&typeof D.use==="string")G=D.use==="sig";if(G&&Array.isArray(D.key_ops))G=D.key_ops.includes("verify");if(G)switch(A){case"ES256":G=D.crv==="P-256";break;case"ES384":G=D.crv==="P-384";break;case"ES512":G=D.crv==="P-521";break;case"Ed25519":case"EdDSA":G=D.crv==="Ed25519";break}return G}),{0:W,length:Z}=Y;if(Z===0)throw new mw;if(Z!==1){let D=new Sm,G=this.#F;throw D[Symbol.asyncIterator]=async function*(){for(let z of Y)try{yield await ZC1(G,z,A)}catch{}},D}return ZC1(this.#F,W,A)}}async function ZC1($,F,A){let J=$.get(F)||$.set(F,{}).get(F);if(J[A]===void 0){let X=await j$({...F,ext:!0},A);if(X instanceof Uint8Array||X.type!=="public")throw new rP("JSON Web Key Set members must be public keys");J[A]=X}return J[A]}function lm($){let F=new DC1($),A=async(J,X)=>F.getKey(J,X);return Object.defineProperties(A,{jwks:{value:()=>structuredClone(F.jwks()),enumerable:!1,configurable:!1,writable:!1}}),A}function tw0(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}var pm;if(typeof navigator>"u"||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))pm="jose/v6.1.3";var GC1=Symbol();async function sw0($,F,A,J=fetch){let X=await J($,{method:"GET",signal:A,redirect:"manual",headers:F}).catch((Y)=>{if(Y.name==="TimeoutError")throw new _m;throw Y});if(X.status!==200)throw new P9("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await X.json()}catch{throw new P9("Failed to parse the JSON Web Key Set HTTP response as JSON")}}var GR=Symbol();function ow0($,F){if(typeof $!=="object"||$===null)return!1;if(!("uat"in $)||typeof $.uat!=="number"||Date.now()-$.uat>=F)return!1;if(!("jwks"in $)||!g2($.jwks)||!Array.isArray($.jwks.keys)||!Array.prototype.every.call($.jwks.keys,g2))return!1;return!0}class zC1{#$;#F;#A;#J;#X;#Z;#W;#Y;#D;#G;constructor($,F){if(!($ instanceof URL))throw TypeError("url must be an instance of URL");if(this.#$=new URL($.href),this.#F=typeof F?.timeoutDuration==="number"?F?.timeoutDuration:5000,this.#A=typeof F?.cooldownDuration==="number"?F?.cooldownDuration:30000,this.#J=typeof F?.cacheMaxAge==="number"?F?.cacheMaxAge:600000,this.#W=new Headers(F?.headers),pm&&!this.#W.has("User-Agent"))this.#W.set("User-Agent",pm);if(!this.#W.has("accept"))this.#W.set("accept","application/json"),this.#W.append("accept","application/jwk-set+json");if(this.#Y=F?.[GC1],F?.[GR]!==void 0){if(this.#G=F?.[GR],ow0(F?.[GR],this.#J))this.#X=this.#G.uat,this.#D=lm(this.#G.jwks)}}pendingFetch(){return!!this.#Z}coolingDown(){return typeof this.#X==="number"?Date.now()<this.#X+this.#A:!1}fresh(){return typeof this.#X==="number"?Date.now()<this.#X+this.#J:!1}jwks(){return this.#D?.jwks()}async getKey($,F){if(!this.#D||!this.fresh())await this.reload();try{return await this.#D($,F)}catch(A){if(A instanceof mw){if(this.coolingDown()===!1)return await this.reload(),this.#D($,F)}throw A}}async reload(){if(this.#Z&&tw0())this.#Z=void 0;this.#Z||=sw0(this.#$.href,this.#W,AbortSignal.timeout(this.#F),this.#Y).then(($)=>{if(this.#D=lm($),this.#G)this.#G.uat=Date.now(),this.#G.jwks=$;this.#X=Date.now(),this.#Z=void 0}).catch(($)=>{throw this.#Z=void 0,$}),await this.#Z}}function im($,F){let A=new zC1($,F),J=async(X,Y)=>A.getKey(X,Y);return Object.defineProperties(J,{coolingDown:{get:()=>A.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>A.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>A.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>A.pendingFetch(),enumerable:!0,configurable:!1},jwks:{value:()=>A.jwks(),enumerable:!0,configurable:!1,writable:!1}}),J}function lZ($){let F;if(typeof $==="string"){let A=$.split(".");if(A.length===3||A.length===5)[F]=A}else if(typeof $==="object"&&$)if("protected"in $)F=$.protected;else throw TypeError("Token does not contain a Protected Header");try{if(typeof F!=="string"||!F)throw Error();let A=JSON.parse(A8.decode(T2(F)));if(!g2(A))throw Error();return A}catch{throw TypeError("Invalid Token or Protected Header formatting")}}function W9($){if(typeof $!=="string")throw new W3("JWTs must use Compact JWS serialization, JWT must be a string");let{1:F,length:A}=$.split(".");if(A===5)throw new W3("Only JWTs using Compact JWS serialization can be decoded");if(A!==3)throw new W3("Invalid JWT");if(!F)throw new W3("JWTs must contain a payload");let J;try{J=T2(F)}catch{throw new W3("Failed to base64url decode the payload")}let X;try{X=JSON.parse(A8.decode(J))}catch{throw new W3("Failed to parse the decoded payload as JSON")}if(!g2(X))throw new W3("Invalid JWT Claims Set");return X}async function tw($,F,A=3600){return await new WR($).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1000)+A).sign(new TextEncoder().encode(F))}async function zR($,F){try{return(await k7($,new TextEncoder().encode(F))).payload}catch{return null}}var HC1=new Uint8Array([66,101,116,116,101,114,65,117,116,104,46,106,115,32,71,101,110,101,114,97,116,101,100,32,69,110,99,114,121,112,116,105,111,110,32,75,101,121]),ew0=()=>Date.now()/1000|0,UC1="dir",QC1="A256CBC-HS512";async function sw($,F,A,J=3600){let X=Pm(GH,new TextEncoder().encode(F),new TextEncoder().encode(A),HC1,64),Y=await DR({kty:"oct",k:uw.encode(X)},"sha256");return await new ZR($).setProtectedHeader({alg:UC1,enc:QC1,kid:Y}).setIssuedAt().setExpirationTime(ew0()+J).setJti(crypto.randomUUID()).encrypt(X)}async function wH($,F,A){if(!$)return null;try{let{payload:J}=await hm($,async({kid:X})=>{let Y=Pm(GH,new TextEncoder().encode(F),new TextEncoder().encode(A),HC1,64);if(X===void 0)return Y;if(X===await DR({kty:"oct",k:uw.encode(Y)},"sha256"))return Y;throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:[UC1],contentEncryptionAlgorithms:[QC1,"A256GCM"]});return J}catch{return null}}l6();var cH={encode:($)=>{if(typeof $==="string")$=new TextEncoder().encode($);if($.byteLength===0)return"";let F=new Uint8Array($),A="";for(let J of F)A+=J.toString(16).padStart(2,"0");return A},decode:($)=>{if(!$)return"";if(typeof $==="string"){if($.length%2!==0)throw Error("Invalid hexadecimal string");if(!new RegExp("^[0123456789abcdef]+$").test($))throw Error("Invalid hexadecimal string");let F=new Uint8Array($.length/2);for(let A=0;A<$.length;A+=2)F[A/2]=parseInt($.slice(A,A+2),16);return new TextDecoder().decode(F)}return new TextDecoder().decode($)}};function pE0($,F,A,J){fZ($);let X=cP({dkLen:32,asyncTick:10},J),{c:Y,dkLen:W,asyncTick:Z}=X;if(X3(Y,"c"),X3(W,"dkLen"),X3(Z,"asyncTick"),Y<1)throw Error("iterations (c) must be >= 1");let D=Nm(F,"password"),G=Nm(A,"salt"),z=new Uint8Array(W),H=DH.create($,D),U=H._cloneInto().update(G);return{c:Y,dkLen:W,asyncTick:Z,DK:z,PRF:H,PRFSalt:U}}function iE0($,F,A,J,X){if($.destroy(),F.destroy(),J)J.destroy();return Y3(X),A}function Fr($,F,A,J){let{c:X,dkLen:Y,DK:W,PRF:Z,PRFSalt:D}=pE0($,F,A,J),G,z=new Uint8Array(4),H=ZH(z),U=new Uint8Array(Z.outputLen);for(let Q=1,B=0;B<Y;Q++,B+=Z.outputLen){let q=W.subarray(B,B+Z.outputLen);H.setInt32(0,Q,!1),(G=D._cloneInto(G)).update(z).digestInto(U),q.set(U.subarray(0,q.length));for(let L=1;L<X;L++){Z._cloneInto(G).update(U).digestInto(U);for(let E=0;E<q.length;E++)q[E]^=U[E]}}return iE0(Z,D,W,G,U)}function WP1($,F,A,J,X,Y){let W=$[F++]^A[J++],Z=$[F++]^A[J++],D=$[F++]^A[J++],G=$[F++]^A[J++],z=$[F++]^A[J++],H=$[F++]^A[J++],U=$[F++]^A[J++],Q=$[F++]^A[J++],B=$[F++]^A[J++],q=$[F++]^A[J++],L=$[F++]^A[J++],E=$[F++]^A[J++],V=$[F++]^A[J++],R=$[F++]^A[J++],N=$[F++]^A[J++],S=$[F++]^A[J++],C=W,M=Z,I=D,T=G,j=z,b=H,g=U,f=Q,d=B,s=q,n=L,L1=E,X1=V,M1=R,g1=N,j1=S;for(let i1=0;i1<8;i1+=2)j^=C6(C+X1|0,7),d^=C6(j+C|0,9),X1^=C6(d+j|0,13),C^=C6(X1+d|0,18),s^=C6(b+M|0,7),M1^=C6(s+b|0,9),M^=C6(M1+s|0,13),b^=C6(M+M1|0,18),g1^=C6(n+g|0,7),I^=C6(g1+n|0,9),g^=C6(I+g1|0,13),n^=C6(g+I|0,18),T^=C6(j1+L1|0,7),f^=C6(T+j1|0,9),L1^=C6(f+T|0,13),j1^=C6(L1+f|0,18),M^=C6(C+T|0,7),I^=C6(M+C|0,9),T^=C6(I+M|0,13),C^=C6(T+I|0,18),g^=C6(b+j|0,7),f^=C6(g+b|0,9),j^=C6(f+g|0,13),b^=C6(j+f|0,18),L1^=C6(n+s|0,7),d^=C6(L1+n|0,9),s^=C6(d+L1|0,13),n^=C6(s+d|0,18),X1^=C6(j1+g1|0,7),M1^=C6(X1+j1|0,9),g1^=C6(M1+X1|0,13),j1^=C6(g1+M1|0,18);X[Y++]=W+C|0,X[Y++]=Z+M|0,X[Y++]=D+I|0,X[Y++]=G+T|0,X[Y++]=z+j|0,X[Y++]=H+b|0,X[Y++]=U+g|0,X[Y++]=Q+f|0,X[Y++]=B+d|0,X[Y++]=q+s|0,X[Y++]=L+n|0,X[Y++]=E+L1|0,X[Y++]=V+X1|0,X[Y++]=R+M1|0,X[Y++]=N+g1|0,X[Y++]=S+j1|0}function Ar($,F,A,J,X){let Y=J+0,W=J+16*X;for(let Z=0;Z<16;Z++)A[W+Z]=$[F+(2*X-1)*16+Z];for(let Z=0;Z<X;Z++,Y+=16,F+=16){if(WP1(A,W,$,F,A,Y),Z>0)W+=16;WP1(A,Y,$,F+=16,A,W)}}function nE0($,F,A){let J=cP({dkLen:32,asyncTick:10,maxmem:1073742848},A),{N:X,r:Y,p:W,dkLen:Z,asyncTick:D,maxmem:G,onProgress:z}=J;if(X3(X,"N"),X3(Y,"r"),X3(W,"p"),X3(Z,"dkLen"),X3(D,"asyncTick"),X3(G,"maxmem"),z!==void 0&&typeof z!=="function")throw Error("progressCb must be a function");let H=128*Y,U=H/4,Q=Math.pow(2,32);if(X<=1||(X&X-1)!==0||X>Q)throw Error('"N" expected a power of 2, and 2^1 <= N <= 2^32');if(W<1||W>(Q-1)*32/H)throw Error('"p" expected integer 1..((2^32 - 1) * 32) / (128 * r)');if(Z<1||Z>(Q-1)*32)throw Error('"dkLen" expected integer 1..(2^32 - 1) * 32');if(H*(X+W)>G)throw Error('"maxmem" limit was hit, expected 128*r*(N+p) <= "maxmem"='+G);let q=Fr(GH,$,F,{c:1,dkLen:H*W}),L=mP(q),E=mP(new Uint8Array(H*X)),V=mP(new Uint8Array(H)),R=()=>{};if(z){let N=2*X*W,S=Math.max(Math.floor(N/1e4),1),C=0;R=()=>{if(C++,z&&(!(C%S)||C===N))z(C/N)}}return{N:X,r:Y,p:W,dkLen:Z,blockSize32:U,V:E,B32:L,B:q,tmp:V,blockMixCb:R,asyncTick:D}}function rE0($,F,A,J,X){let Y=Fr(GH,$,A,{c:1,dkLen:F});return Y3(A,J,X),Y}async function ZP1($,F,A){let{N:J,r:X,p:Y,dkLen:W,blockSize32:Z,V:D,B32:G,B:z,tmp:H,blockMixCb:U,asyncTick:Q}=nE0($,F,A);Vm(G);for(let B=0;B<Y;B++){let q=Z*B;for(let E=0;E<Z;E++)D[E]=G[q+E];let L=0;await dP(J-1,Q,()=>{Ar(D,L,D,L+=Z,X),U()}),Ar(D,(J-1)*Z,G,q,X),U(),await dP(J,Q,()=>{let E=(G[q+Z-16]&J-1)>>>0;for(let V=0;V<Z;V++)H[V]=G[q+V]^D[E*Z+V];Ar(H,0,G,q,X),U()})}return Vm(G),rE0($,W,z,D,H)}var lH={N:16384,r:16,p:1,dkLen:64};async function DP1($,F){return await ZP1($.normalize("NFKC"),F,{N:lH.N,p:lH.p,r:lH.r,dkLen:lH.dkLen,maxmem:128*lH.N*lH.r*2})}var Jr=async($)=>{let F=cH.encode(crypto.getRandomValues(new Uint8Array(16))),A=await DP1($,F);return`${F}:${cH.encode(A)}`},Xr=async({hash:$,password:F})=>{let[A,J]=$.split(":");if(!A||!J)throw new o1("Invalid password hash");return Em(await DP1(F,A),GN1(J))};function x$(){let $=typeof globalThis<"u"&&globalThis.crypto;if($&&typeof $.subtle==="object"&&$.subtle!=null)return $.subtle;throw Error("crypto.subtle must be defined")}function CT($){return $?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"}function GP1($,F,A){let J="",X=0,Y=0;for(let W of $){X=X<<8|W,Y+=8;while(Y>=6)Y-=6,J+=F[X>>Y&63]}if(Y>0)J+=F[X<<6-Y&63];if(A){let W=(4-J.length%4)%4;J+="=".repeat(W)}return J}function zP1($,F){let A=new Map;for(let W=0;W<F.length;W++)A.set(F[W],W);let J=[],X=0,Y=0;for(let W of $){if(W==="=")break;let Z=A.get(W);if(Z===void 0)throw Error(`Invalid Base64 character: ${W}`);if(X=X<<6|Z,Y+=6,Y>=8)Y-=8,J.push(X>>Y&255)}return Uint8Array.from(J)}var j9={encode($,F={}){let A=CT(!1),J=typeof $==="string"?new TextEncoder().encode($):new Uint8Array($);return GP1(J,A,F.padding??!0)},decode($){if(typeof $!=="string")$=new TextDecoder().decode($);let F=$.includes("-")||$.includes("_"),A=CT(F);return zP1($,A)}},g$={encode($,F={}){let A=CT(!0),J=typeof $==="string"?new TextEncoder().encode($):new Uint8Array($);return GP1(J,A,F.padding??!0)},decode($){let F=$.includes("-")||$.includes("_"),A=CT(F);return zP1($,A)}};function UL($,F){return{digest:async(A)=>{let X=typeof A==="string"?new TextEncoder().encode(A):A,Y=await x$().digest($,X);if(F==="hex")return Array.from(new Uint8Array(Y)).map((D)=>D.toString(16).padStart(2,"0")).join("");if(F==="base64"||F==="base64url"||F==="base64urlnopad"){if(F.includes("url"))return g$.encode(Y,{padding:F!=="base64urlnopad"});return j9.encode(Y)}return Y}}}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function aE0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function MT($){if(typeof $!=="boolean")throw Error(`boolean expected, not ${$}`)}function QL($){if(!Number.isSafeInteger($)||$<0)throw Error("positive integer expected, got "+$)}function P4($,F,A=""){let J=aE0($),X=$?.length,Y=F!==void 0;if(!J||Y&&X!==F){let W=A&&`"${A}" `,Z=Y?` of length ${F}`:"",D=J?`length=${X}`:`type=${typeof $}`;throw Error(W+"expected Uint8Array"+Z+", got "+D)}return $}function Yr($,F=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(F&&$.finished)throw Error("Hash#digest() has already been called")}function UP1($,F){P4($,void 0,"output");let A=F.outputLen;if($.length<A)throw Error("digestInto() expects output buffer of length at least "+A)}function _J($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function kJ(...$){for(let F=0;F<$.length;F++)$[F].fill(0)}function tE0($){return new DataView($.buffer,$.byteOffset,$.byteLength)}var sE0=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)(),QP1=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")(),oE0=Array.from({length:256},($,F)=>F.toString(16).padStart(2,"0"));function Wr($){if(P4($),QP1)return $.toHex();let F="";for(let A=0;A<$.length;A++)F+=oE0[$[A]];return F}var SJ={_0:48,_9:57,A:65,F:70,a:97,f:102};function HP1($){if($>=SJ._0&&$<=SJ._9)return $-SJ._0;if($>=SJ.A&&$<=SJ.F)return $-(SJ.A-10);if($>=SJ.a&&$<=SJ.f)return $-(SJ.a-10);return}function KP1($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);if(QP1)return Uint8Array.fromHex($);let F=$.length,A=F/2;if(F%2)throw Error("hex string expected, got unpadded hex of length "+F);let J=new Uint8Array(A);for(let X=0,Y=0;X<A;X++,Y+=2){let W=HP1($.charCodeAt(Y)),Z=HP1($.charCodeAt(Y+1));if(W===void 0||Z===void 0){let D=$[Y]+$[Y+1];throw Error('hex string expected, got non-hex character "'+D+'" at index '+Y)}J[X]=W*16+Z}return J}function BP1($){if(typeof $!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function wP1(...$){let F=0;for(let J=0;J<$.length;J++){let X=$[J];P4(X),F+=X.length}let A=new Uint8Array(F);for(let J=0,X=0;J<$.length;J++){let Y=$[J];A.set(Y,X),X+=Y.length}return A}function qP1($,F){if(F==null||typeof F!=="object")throw Error("options must be defined");return Object.assign($,F)}function LP1($,F){if($.length!==F.length)return!1;let A=0;for(let J=0;J<$.length;J++)A|=$[J]^F[J];return A===0}var Zr=($,F)=>{function A(J,...X){if(P4(J,void 0,"key"),!sE0)throw Error("Non little-endian hardware is not yet supported");if($.nonceLength!==void 0){let z=X[0];P4(z,$.varSizeNonce?void 0:$.nonceLength,"nonce")}let Y=$.tagLength;if(Y&&X[1]!==void 0)P4(X[1],void 0,"AAD");let W=F(J,...X),Z=(z,H)=>{if(H!==void 0){if(z!==2)throw Error("cipher output not supported");P4(H,void 0,"output")}},D=!1;return{encrypt(z,H){if(D)throw Error("cannot encrypt() twice with same key + nonce");return D=!0,P4(z),Z(W.encrypt.length,H),W.encrypt(z,H)},decrypt(z,H){if(P4(z),Y&&z.length<Y)throw Error('"ciphertext" expected length bigger than tagLength='+Y);return Z(W.decrypt.length,H),W.decrypt(z,H)}}}return Object.assign(A,$),A};function Dr($,F,A=!0){if(F===void 0)return new Uint8Array($);if(F.length!==$)throw Error('"output" expected Uint8Array of length '+$+", got: "+F.length);if(A&&!eE0(F))throw Error("invalid output, must be aligned");return F}function EP1($,F,A){MT(A);let J=new Uint8Array(16),X=tE0(J);return X.setBigUint64(0,BigInt(F),A),X.setBigUint64(8,BigInt($),A),J}function eE0($){return $.byteOffset%4===0}function pH($){return Uint8Array.from($)}function VP1($=32){let F=typeof globalThis==="object"?globalThis.crypto:null;if(typeof F?.getRandomValues!=="function")throw Error("crypto.getRandomValues must be defined");return F.getRandomValues(new Uint8Array($))}function Gr($,F=VP1){let{nonceLength:A}=$;QL(A);let J=(X,Y)=>{let W=wP1(X,Y);return Y.fill(0),W};return(X,...Y)=>({encrypt(W){P4(W);let Z=F(A),D=$(X,Z,...Y).encrypt(W);if(D instanceof Promise)return D.then((G)=>J(Z,G));return J(Z,D)},decrypt(W){P4(W);let Z=W.subarray(0,A),D=W.subarray(A);return $(X,Z,...Y).decrypt(D)}})}var CP1=($)=>Uint8Array.from($.split(""),(F)=>F.charCodeAt(0)),$V0=CP1("expand 16-byte k"),FV0=CP1("expand 32-byte k"),AV0=_J($V0),JV0=_J(FV0);function p1($,F){return $<<F|$>>>32-F}function zr($){return $.byteOffset%4===0}var PT=64,XV0=16,MP1=4294967295,NP1=Uint32Array.of();function YV0($,F,A,J,X,Y,W,Z){let D=X.length,G=new Uint8Array(PT),z=_J(G),H=zr(X)&&zr(Y),U=H?_J(X):NP1,Q=H?_J(Y):NP1;for(let B=0;B<D;W++){if($(F,A,J,z,W,Z),W>=MP1)throw Error("arx: counter overflow");let q=Math.min(PT,D-B);if(H&&q===PT){let L=B/4;if(B%4!==0)throw Error("arx: invalid block position");for(let E=0,V;E<XV0;E++)V=L+E,Q[V]=U[V]^z[E];B+=PT;continue}for(let L=0,E;L<q;L++)E=B+L,Y[E]=X[E]^G[L];B+=q}}function Hr($,F){let{allowShortKeys:A,extendNonceFn:J,counterLength:X,counterRight:Y,rounds:W}=qP1({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},F);if(typeof $!=="function")throw Error("core must be a function");return QL(X),QL(W),MT(Y),MT(A),(Z,D,G,z,H=0)=>{P4(Z,void 0,"key"),P4(D,void 0,"nonce"),P4(G,void 0,"data");let U=G.length;if(z===void 0)z=new Uint8Array(U);if(P4(z,void 0,"output"),QL(H),H<0||H>=MP1)throw Error("arx: counter overflow");if(z.length<U)throw Error(`arx: output (${z.length}) is shorter than data (${U})`);let Q=[],B=Z.length,q,L;if(B===32)Q.push(q=pH(Z)),L=JV0;else if(B===16&&A)q=new Uint8Array(32),q.set(Z),q.set(Z,16),L=AV0,Q.push(q);else throw P4(Z,32,"arx key"),Error("invalid key size");if(!zr(D))Q.push(D=pH(D));let E=_J(q);if(J){if(D.length!==24)throw Error("arx: extended nonce must be 24 bytes");J(L,E,_J(D.subarray(0,16)),E),D=D.subarray(16)}let V=16-X;if(V!==D.length)throw Error(`arx: nonce must be ${V} or 16 bytes`);if(V!==12){let N=new Uint8Array(12);N.set(D,Y?0:12-D.length),D=N,Q.push(D)}let R=_J(D);return YV0($,L,E,R,G,z,H,W),kJ(...Q),z}}function J8($,F){return $[F++]&255|($[F++]&255)<<8}class PP1{blockLen=16;outputLen=16;buffer=new Uint8Array(16);r=new Uint16Array(10);h=new Uint16Array(10);pad=new Uint16Array(8);pos=0;finished=!1;constructor($){$=pH(P4($,32,"key"));let F=J8($,0),A=J8($,2),J=J8($,4),X=J8($,6),Y=J8($,8),W=J8($,10),Z=J8($,12),D=J8($,14);this.r[0]=F&8191,this.r[1]=(F>>>13|A<<3)&8191,this.r[2]=(A>>>10|J<<6)&7939,this.r[3]=(J>>>7|X<<9)&8191,this.r[4]=(X>>>4|Y<<12)&255,this.r[5]=Y>>>1&8190,this.r[6]=(Y>>>14|W<<2)&8191,this.r[7]=(W>>>11|Z<<5)&8065,this.r[8]=(Z>>>8|D<<8)&8191,this.r[9]=D>>>5&127;for(let G=0;G<8;G++)this.pad[G]=J8($,16+2*G)}process($,F,A=!1){let J=A?0:2048,{h:X,r:Y}=this,W=Y[0],Z=Y[1],D=Y[2],G=Y[3],z=Y[4],H=Y[5],U=Y[6],Q=Y[7],B=Y[8],q=Y[9],L=J8($,F+0),E=J8($,F+2),V=J8($,F+4),R=J8($,F+6),N=J8($,F+8),S=J8($,F+10),C=J8($,F+12),M=J8($,F+14),I=X[0]+(L&8191),T=X[1]+((L>>>13|E<<3)&8191),j=X[2]+((E>>>10|V<<6)&8191),b=X[3]+((V>>>7|R<<9)&8191),g=X[4]+((R>>>4|N<<12)&8191),f=X[5]+(N>>>1&8191),d=X[6]+((N>>>14|S<<2)&8191),s=X[7]+((S>>>11|C<<5)&8191),n=X[8]+((C>>>8|M<<8)&8191),L1=X[9]+(M>>>5|J),X1=0,M1=X1+I*W+T*(5*q)+j*(5*B)+b*(5*Q)+g*(5*U);X1=M1>>>13,M1&=8191,M1+=f*(5*H)+d*(5*z)+s*(5*G)+n*(5*D)+L1*(5*Z),X1+=M1>>>13,M1&=8191;let g1=X1+I*Z+T*W+j*(5*q)+b*(5*B)+g*(5*Q);X1=g1>>>13,g1&=8191,g1+=f*(5*U)+d*(5*H)+s*(5*z)+n*(5*G)+L1*(5*D),X1+=g1>>>13,g1&=8191;let j1=X1+I*D+T*Z+j*W+b*(5*q)+g*(5*B);X1=j1>>>13,j1&=8191,j1+=f*(5*Q)+d*(5*U)+s*(5*H)+n*(5*z)+L1*(5*G),X1+=j1>>>13,j1&=8191;let i1=X1+I*G+T*D+j*Z+b*W+g*(5*q);X1=i1>>>13,i1&=8191,i1+=f*(5*B)+d*(5*Q)+s*(5*U)+n*(5*H)+L1*(5*z),X1+=i1>>>13,i1&=8191;let K1=X1+I*z+T*G+j*D+b*Z+g*W;X1=K1>>>13,K1&=8191,K1+=f*(5*q)+d*(5*B)+s*(5*Q)+n*(5*U)+L1*(5*H),X1+=K1>>>13,K1&=8191;let l0=X1+I*H+T*z+j*G+b*D+g*Z;X1=l0>>>13,l0&=8191,l0+=f*W+d*(5*q)+s*(5*B)+n*(5*Q)+L1*(5*U),X1+=l0>>>13,l0&=8191;let I4=X1+I*U+T*H+j*z+b*G+g*D;X1=I4>>>13,I4&=8191,I4+=f*Z+d*W+s*(5*q)+n*(5*B)+L1*(5*Q),X1+=I4>>>13,I4&=8191;let T4=X1+I*Q+T*U+j*H+b*z+g*G;X1=T4>>>13,T4&=8191,T4+=f*D+d*Z+s*W+n*(5*q)+L1*(5*B),X1+=T4>>>13,T4&=8191;let b6=X1+I*B+T*Q+j*U+b*H+g*z;X1=b6>>>13,b6&=8191,b6+=f*G+d*D+s*Z+n*W+L1*(5*q),X1+=b6>>>13,b6&=8191;let c2=X1+I*q+T*B+j*Q+b*U+g*H;X1=c2>>>13,c2&=8191,c2+=f*z+d*G+s*D+n*Z+L1*W,X1+=c2>>>13,c2&=8191,X1=(X1<<2)+X1|0,X1=X1+M1|0,M1=X1&8191,X1=X1>>>13,g1+=X1,X[0]=M1,X[1]=g1,X[2]=j1,X[3]=i1,X[4]=K1,X[5]=l0,X[6]=I4,X[7]=T4,X[8]=b6,X[9]=c2}finalize(){let{h:$,pad:F}=this,A=new Uint16Array(10),J=$[1]>>>13;$[1]&=8191;for(let W=2;W<10;W++)$[W]+=J,J=$[W]>>>13,$[W]&=8191;$[0]+=J*5,J=$[0]>>>13,$[0]&=8191,$[1]+=J,J=$[1]>>>13,$[1]&=8191,$[2]+=J,A[0]=$[0]+5,J=A[0]>>>13,A[0]&=8191;for(let W=1;W<10;W++)A[W]=$[W]+J,J=A[W]>>>13,A[W]&=8191;A[9]-=8192;let X=(J^1)-1;for(let W=0;W<10;W++)A[W]&=X;X=~X;for(let W=0;W<10;W++)$[W]=$[W]&X|A[W];$[0]=($[0]|$[1]<<13)&65535,$[1]=($[1]>>>3|$[2]<<10)&65535,$[2]=($[2]>>>6|$[3]<<7)&65535,$[3]=($[3]>>>9|$[4]<<4)&65535,$[4]=($[4]>>>12|$[5]<<1|$[6]<<14)&65535,$[5]=($[6]>>>2|$[7]<<11)&65535,$[6]=($[7]>>>5|$[8]<<8)&65535,$[7]=($[8]>>>8|$[9]<<5)&65535;let Y=$[0]+F[0];$[0]=Y&65535;for(let W=1;W<8;W++)Y=($[W]+F[W]|0)+(Y>>>16)|0,$[W]=Y&65535;kJ(A)}update($){Yr(this),P4($),$=pH($);let{buffer:F,blockLen:A}=this,J=$.length;for(let X=0;X<J;){let Y=Math.min(A-this.pos,J-X);if(Y===A){for(;A<=J-X;X+=A)this.process($,X);continue}if(F.set($.subarray(X,X+Y),this.pos),this.pos+=Y,X+=Y,this.pos===A)this.process(F,0,!1),this.pos=0}return this}destroy(){kJ(this.h,this.r,this.buffer,this.pad)}digestInto($){Yr(this),UP1($,this),this.finished=!0;let{buffer:F,h:A}=this,{pos:J}=this;if(J){F[J++]=1;for(;J<16;J++)F[J]=0;this.process(F,0,!0)}this.finalize();let X=0;for(let Y=0;Y<8;Y++)$[X++]=A[Y]>>>0,$[X++]=A[Y]>>>8;return $}digest(){let{buffer:$,outputLen:F}=this;this.digestInto($);let A=$.slice(0,F);return this.destroy(),A}}function WV0($){let F=(J,X)=>$(X).update(J).digest(),A=$(new Uint8Array(32));return F.outputLen=A.outputLen,F.blockLen=A.blockLen,F.create=(J)=>$(J),F}var RP1=(()=>WV0(($)=>new PP1($)))();function jP1($,F,A,J,X,Y=20){let W=$[0],Z=$[1],D=$[2],G=$[3],z=F[0],H=F[1],U=F[2],Q=F[3],B=F[4],q=F[5],L=F[6],E=F[7],V=X,R=A[0],N=A[1],S=A[2],C=W,M=Z,I=D,T=G,j=z,b=H,g=U,f=Q,d=B,s=q,n=L,L1=E,X1=V,M1=R,g1=N,j1=S;for(let K1=0;K1<Y;K1+=2)C=C+j|0,X1=p1(X1^C,16),d=d+X1|0,j=p1(j^d,12),C=C+j|0,X1=p1(X1^C,8),d=d+X1|0,j=p1(j^d,7),M=M+b|0,M1=p1(M1^M,16),s=s+M1|0,b=p1(b^s,12),M=M+b|0,M1=p1(M1^M,8),s=s+M1|0,b=p1(b^s,7),I=I+g|0,g1=p1(g1^I,16),n=n+g1|0,g=p1(g^n,12),I=I+g|0,g1=p1(g1^I,8),n=n+g1|0,g=p1(g^n,7),T=T+f|0,j1=p1(j1^T,16),L1=L1+j1|0,f=p1(f^L1,12),T=T+f|0,j1=p1(j1^T,8),L1=L1+j1|0,f=p1(f^L1,7),C=C+b|0,j1=p1(j1^C,16),n=n+j1|0,b=p1(b^n,12),C=C+b|0,j1=p1(j1^C,8),n=n+j1|0,b=p1(b^n,7),M=M+g|0,X1=p1(X1^M,16),L1=L1+X1|0,g=p1(g^L1,12),M=M+g|0,X1=p1(X1^M,8),L1=L1+X1|0,g=p1(g^L1,7),I=I+f|0,M1=p1(M1^I,16),d=d+M1|0,f=p1(f^d,12),I=I+f|0,M1=p1(M1^I,8),d=d+M1|0,f=p1(f^d,7),T=T+j|0,g1=p1(g1^T,16),s=s+g1|0,j=p1(j^s,12),T=T+j|0,g1=p1(g1^T,8),s=s+g1|0,j=p1(j^s,7);let i1=0;J[i1++]=W+C|0,J[i1++]=Z+M|0,J[i1++]=D+I|0,J[i1++]=G+T|0,J[i1++]=z+j|0,J[i1++]=H+b|0,J[i1++]=U+g|0,J[i1++]=Q+f|0,J[i1++]=B+d|0,J[i1++]=q+s|0,J[i1++]=L+n|0,J[i1++]=E+L1|0,J[i1++]=V+X1|0,J[i1++]=R+M1|0,J[i1++]=N+g1|0,J[i1++]=S+j1|0}function ZV0($,F,A,J){let X=$[0],Y=$[1],W=$[2],Z=$[3],D=F[0],G=F[1],z=F[2],H=F[3],U=F[4],Q=F[5],B=F[6],q=F[7],L=A[0],E=A[1],V=A[2],R=A[3];for(let S=0;S<20;S+=2)X=X+D|0,L=p1(L^X,16),U=U+L|0,D=p1(D^U,12),X=X+D|0,L=p1(L^X,8),U=U+L|0,D=p1(D^U,7),Y=Y+G|0,E=p1(E^Y,16),Q=Q+E|0,G=p1(G^Q,12),Y=Y+G|0,E=p1(E^Y,8),Q=Q+E|0,G=p1(G^Q,7),W=W+z|0,V=p1(V^W,16),B=B+V|0,z=p1(z^B,12),W=W+z|0,V=p1(V^W,8),B=B+V|0,z=p1(z^B,7),Z=Z+H|0,R=p1(R^Z,16),q=q+R|0,H=p1(H^q,12),Z=Z+H|0,R=p1(R^Z,8),q=q+R|0,H=p1(H^q,7),X=X+G|0,R=p1(R^X,16),B=B+R|0,G=p1(G^B,12),X=X+G|0,R=p1(R^X,8),B=B+R|0,G=p1(G^B,7),Y=Y+z|0,L=p1(L^Y,16),q=q+L|0,z=p1(z^q,12),Y=Y+z|0,L=p1(L^Y,8),q=q+L|0,z=p1(z^q,7),W=W+H|0,E=p1(E^W,16),U=U+E|0,H=p1(H^U,12),W=W+H|0,E=p1(E^W,8),U=U+E|0,H=p1(H^U,7),Z=Z+D|0,V=p1(V^Z,16),Q=Q+V|0,D=p1(D^Q,12),Z=Z+D|0,V=p1(V^Z,8),Q=Q+V|0,D=p1(D^Q,7);let N=0;J[N++]=X,J[N++]=Y,J[N++]=W,J[N++]=Z,J[N++]=L,J[N++]=E,J[N++]=V,J[N++]=R}var DV0=Hr(jP1,{counterRight:!1,counterLength:4,allowShortKeys:!1}),GV0=Hr(jP1,{counterRight:!1,counterLength:8,extendNonceFn:ZV0,allowShortKeys:!1});var zV0=new Uint8Array(16),IP1=($,F)=>{$.update(F);let A=F.length%16;if(A)$.update(zV0.subarray(A))},HV0=new Uint8Array(32);function TP1($,F,A,J,X){if(X!==void 0)P4(X,void 0,"AAD");let Y=$(F,A,HV0),W=EP1(J.length,X?X.length:0,!0),Z=RP1.create(Y);if(X)IP1(Z,X);IP1(Z,J),Z.update(W);let D=Z.digest();return kJ(Y,W),D}var OP1=($)=>(F,A,J)=>{return{encrypt(Y,W){let Z=Y.length;W=Dr(Z+16,W,!1),W.set(Y);let D=W.subarray(0,-16);$(F,A,D,D,1);let G=TP1($,F,A,D,J);return W.set(G,Z),kJ(G),W},decrypt(Y,W){W=Dr(Y.length-16,W,!1);let Z=Y.subarray(0,-16),D=Y.subarray(-16),G=TP1($,F,A,Z,J);if(!LP1(D,G))throw Error("invalid tag");return W.set(Y.subarray(0,-16)),$(F,A,W,W,1),kJ(G),W}}},SF6=Zr({blockSize:64,nonceLength:12,tagLength:16},OP1(DV0)),Ur=Zr({blockSize:64,nonceLength:24,tagLength:16},OP1(GV0));var RT=async({key:$,data:F})=>{let A=await UL("SHA-256").digest($),J=BP1(F);return Wr(Gr(Ur)(new Uint8Array(A)).encrypt(J))},IT=async({key:$,data:F})=>{let A=await UL("SHA-256").digest($),J=KP1(F),X=Gr(Ur)(new Uint8Array(A));return new TextDecoder().decode(X.decrypt(J))};var WA=($,F="ms")=>{return new Date(Date.now()+(F==="sec"?$*1000:$))};Qr();var Kr={};l2(Kr,{verificationSchema:()=>xP1,userSchema:()=>bP1,sessionSchema:()=>kP1,rateLimitSchema:()=>_P1,getAuthTables:()=>l3,coreSchema:()=>ZA,accountSchema:()=>SP1});u4();var ZA=E0({id:N1(),createdAt:v7().default(()=>new Date),updatedAt:v7().default(()=>new Date)});u4();var SP1=ZA.extend({providerId:N1(),accountId:N1(),userId:u7.string(),accessToken:N1().nullish(),refreshToken:N1().nullish(),idToken:N1().nullish(),accessTokenExpiresAt:v7().nullish(),refreshTokenExpiresAt:v7().nullish(),scope:N1().nullish(),password:N1().nullish()});u4();var _P1=E0({key:N1(),count:f7(),lastRequest:f7()});u4();var kP1=ZA.extend({userId:u7.string(),expiresAt:v7(),token:N1(),ipAddress:N1().nullish(),userAgent:N1().nullish()});u4();var bP1=ZA.extend({email:N1().transform(($)=>$.toLowerCase()),emailVerified:Z9().default(!1),name:N1(),image:N1().nullish()});u4();var xP1=ZA.extend({value:N1(),expiresAt:v7(),identifier:N1()});function UV0(){let $=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");if($===void 0)return Object.isExtensible(Error);return Object.prototype.hasOwnProperty.call($,"writable")?$.writable:$.set!==void 0}function gP1($){let F=$.split(`
    at `);if(F.length<=1)return $;return F.splice(1,1),F.join(`
    at `)}function fP1($,F){class A extends ${#$;constructor(...J){if(UV0()){let Y=Error.stackTraceLimit;Error.stackTraceLimit=0;super(...J);Error.stackTraceLimit=Y}else super(...J);let X=Error().stack;if(X)this.#$=gP1(X.replace(/^Error/,this.name))}get errorStack(){return this.#$}}return Object.defineProperty(A.prototype,"constructor",{get(){return F},enumerable:!1,configurable:!0}),A}var vP1={OK:200,CREATED:201,ACCEPTED:202,NO_CONTENT:204,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,"I'M_A_TEAPOT":418,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511},yP1=class extends Error{constructor($="INTERNAL_SERVER_ERROR",F=void 0,A={},J=typeof $==="number"?$:vP1[$]){super(F?.message,F?.cause?{cause:F.cause}:void 0);this.status=$,this.body=F,this.headers=A,this.statusCode=J,this.name="APIError",this.status=$,this.headers=A,this.statusCode=J,this.body=F?{code:F?.message?.toUpperCase().replace(/ /g,"_").replace(/[^A-Z0-9_]/g,""),...F}:void 0}},KL=class extends yP1{constructor($,F){super(400,{message:$,code:"VALIDATION_ERROR"});this.message=$,this.issues=F,this.issues=F}},TT=class extends Error{constructor($){super($);this.name="BetterCallError"}},Y1=fP1(yP1,Error);var QV0=/^application\/([a-z0-9.+-]*\+)?json/i;async function uP1($,F){let A=$.headers.get("content-type")||"",J=A.toLowerCase();if(!$.body)return;if(F&&F.length>0){if(!F.some((X)=>{let Y=J.split(";")[0].trim(),W=X.toLowerCase().trim();return Y===W||Y.includes(W)})){if(!J)throw new Y1(415,{message:`Content-Type is required. Allowed types: ${F.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"});throw new Y1(415,{message:`Content-Type "${A}" is not allowed. Allowed types: ${F.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"})}}if(QV0.test(J))return await $.json();if(J.includes("application/x-www-form-urlencoded")){let X=await $.formData(),Y={};return X.forEach((W,Z)=>{Y[Z]=W.toString()}),Y}if(J.includes("multipart/form-data")){let X=await $.formData(),Y={};return X.forEach((W,Z)=>{Y[Z]=W}),Y}if(J.includes("text/plain"))return await $.text();if(J.includes("application/octet-stream"))return await $.arrayBuffer();if(J.includes("application/pdf")||J.includes("image/")||J.includes("video/"))return await $.blob();if(J.includes("application/stream")||$.body instanceof ReadableStream)return $.body;return await $.text()}function wD($){return $ instanceof Y1||$?.name==="APIError"}function hP1($){try{return $.includes("%")?decodeURIComponent($):$}catch{return $}}async function mP1($){try{return{data:await $,error:null}}catch(F){return{data:null,error:F}}}function jT($){return $ instanceof Request||Object.prototype.toString.call($)==="[object Request]"}function KV0($){if($===void 0)return!1;let F=typeof $;if(F==="string"||F==="number"||F==="boolean"||F===null)return!0;if(F!=="object")return!1;if(Array.isArray($))return!0;if($.buffer)return!1;return $.constructor&&$.constructor.name==="Object"||typeof $.toJSON==="function"}function BV0($,F,A){let J=0,X=new WeakMap;return JSON.stringify($,(W,Z)=>{if(typeof Z==="bigint")return Z.toString();if(typeof Z==="object"&&Z!==null){if(X.has(Z))return`[Circular ref-${X.get(Z)}]`;X.set(Z,J++)}if(F)return F(W,Z);return Z},A)}function wV0($){if(!$||typeof $!=="object")return!1;return"_flag"in $&&$._flag==="json"}function f$($,F){if($ instanceof Response){if(F?.headers instanceof Headers)F.headers.forEach((X,Y)=>{$.headers.set(Y,X)});return $}if(wV0($)){let{body:X,routerResponse:Y}=$;if(Y instanceof Response)return Y;let W=new Headers;if(Y?.headers){let Z=new Headers(Y.headers);for(let[D,G]of Z.entries())Z.set(D,G)}if($.headers)for(let[Z,D]of new Headers($.headers).entries())W.set(Z,D);if(F?.headers)for(let[Z,D]of new Headers(F.headers).entries())W.set(Z,D);return W.set("Content-Type","application/json"),new Response(JSON.stringify(X),{...Y,headers:W,status:$.status??F?.status??Y?.status,statusText:F?.statusText??Y?.statusText})}if(wD($))return f$($.body,{status:F?.status??$.statusCode,statusText:$.status.toString(),headers:F?.headers||$.headers});let A=$,J=new Headers(F?.headers);if(!$){if($===null)A=JSON.stringify(null);J.set("content-type","application/json")}else if(typeof $==="string")A=$,J.set("Content-Type","text/plain");else if($ instanceof ArrayBuffer||ArrayBuffer.isView($))A=$,J.set("Content-Type","application/octet-stream");else if($ instanceof Blob)A=$,J.set("Content-Type",$.type||"application/octet-stream");else if($ instanceof FormData)A=$;else if($ instanceof URLSearchParams)A=$,J.set("Content-Type","application/x-www-form-urlencoded");else if($ instanceof ReadableStream)A=$,J.set("Content-Type","application/octet-stream");else if(KV0($))A=BV0($),J.set("Content-Type","application/json");return new Response(A,{...F,headers:J})}var Br={name:"HMAC",hash:"SHA-256"},wr=async($)=>{let F=typeof $==="string"?new TextEncoder().encode($):$;return await x$().importKey("raw",F,Br,!1,["sign","verify"])},dP1=async($,F,A)=>{try{let J=atob($),X=new Uint8Array(J.length);for(let Y=0,W=J.length;Y<W;Y++)X[Y]=J.charCodeAt(Y);return await x$().verify(Br,A,X,new TextEncoder().encode(F))}catch(J){return!1}},qV0=async($,F)=>{let A=await wr(F),J=await x$().sign(Br.name,A,new TextEncoder().encode($));return btoa(String.fromCharCode(...new Uint8Array(J)))},cP1=async($,F)=>{let A=await qV0($,F);return $=`${$}.${A}`,$=encodeURIComponent($),$};var OT=($,F)=>{let A=$;if(F)if(F==="secure")A="__Secure-"+$;else if(F==="host")A="__Host-"+$;else return;return A};function qr($){if(typeof $!=="string")throw TypeError("argument str must be a string");let F=new Map,A=0;while(A<$.length){let J=$.indexOf("=",A);if(J===-1)break;let X=$.indexOf(";",A);if(X===-1)X=$.length;else if(X<J){A=$.lastIndexOf(";",J-1)+1;continue}let Y=$.slice(A,J).trim();if(!F.has(Y)){let W=$.slice(J+1,X).trim();if(W.codePointAt(0)===34)W=W.slice(1,-1);F.set(Y,hP1(W))}A=X+1}return F}var lP1=($,F,A={})=>{let J;if(A?.prefix==="secure")J=`${`__Secure-${$}`}=${F}`;else if(A?.prefix==="host")J=`${`__Host-${$}`}=${F}`;else J=`${$}=${F}`;if($.startsWith("__Secure-")&&!A.secure)A.secure=!0;if($.startsWith("__Host-")){if(!A.secure)A.secure=!0;if(A.path!=="/")A.path="/";if(A.domain)A.domain=void 0}if(A&&typeof A.maxAge==="number"&&A.maxAge>=0){if(A.maxAge>34560000)throw Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");J+=`; Max-Age=${Math.floor(A.maxAge)}`}if(A.domain&&A.prefix!=="host")J+=`; Domain=${A.domain}`;if(A.path)J+=`; Path=${A.path}`;if(A.expires){if(A.expires.getTime()-Date.now()>34560000000)throw Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");J+=`; Expires=${A.expires.toUTCString()}`}if(A.httpOnly)J+="; HttpOnly";if(A.secure)J+="; Secure";if(A.sameSite)J+=`; SameSite=${A.sameSite.charAt(0).toUpperCase()+A.sameSite.slice(1)}`;if(A.partitioned){if(!A.secure)A.secure=!0;J+="; Partitioned"}return J},Lr=($,F,A)=>{return F=encodeURIComponent(F),lP1($,F,A)},Er=async($,F,A,J)=>{return F=await cP1(F,A),lP1($,F,J)};async function iP1($,F={}){let A={body:F.body,query:F.query};if($.body){let J=await $.body["~standard"].validate(F.body);if(J.issues)return{data:null,error:pP1(J.issues,"body")};A.body=J.value}if($.query){let J=await $.query["~standard"].validate(F.query);if(J.issues)return{data:null,error:pP1(J.issues,"query")};A.query=J.value}if($.requireHeaders&&!F.headers)return{data:null,error:{message:"Headers is required",issues:[]}};if($.requireRequest&&!F.request)return{data:null,error:{message:"Request is required",issues:[]}};return{data:A,error:null}}function pP1($,F){return{message:$.map((A)=>{return`[${A.path?.length?`${F}.`+A.path.map((J)=>typeof J==="object"?J.key:J).join("."):F}] ${A.message}`}).join("; "),issues:$}}var BL=async($,{options:F,path:A})=>{let J=new Headers,X=void 0,{data:Y,error:W}=await iP1(F,$);if(W)throw new KL(W.message,W.issues);let Z="headers"in $?$.headers instanceof Headers?$.headers:new Headers($.headers):("request"in $)&&jT($.request)?$.request.headers:null,D=Z?.get("cookie"),G=D?qr(D):void 0,z={...$,body:Y.body,query:Y.query,path:$.path||A||"virtual:",context:"context"in $&&$.context?$.context:{},returned:void 0,headers:$?.headers,request:$?.request,params:"params"in $?$.params:void 0,method:$.method??(Array.isArray(F.method)?F.method[0]:F.method==="*"?"GET":F.method),setHeader:(H,U)=>{J.set(H,U)},getHeader:(H)=>{if(!Z)return null;return Z.get(H)},getCookie:(H,U)=>{let Q=OT(H,U);if(!Q)return null;return G?.get(Q)||null},getSignedCookie:async(H,U,Q)=>{let B=OT(H,Q);if(!B)return null;let q=G?.get(B);if(!q)return null;let L=q.lastIndexOf(".");if(L<1)return null;let E=q.substring(0,L),V=q.substring(L+1);if(V.length!==44||!V.endsWith("="))return null;return await dP1(V,E,await wr(U))?E:!1},setCookie:(H,U,Q)=>{let B=Lr(H,U,Q);return J.append("set-cookie",B),B},setSignedCookie:async(H,U,Q,B)=>{let q=await Er(H,U,Q,B);return J.append("set-cookie",q),q},redirect:(H)=>{return J.set("location",H),new Y1("FOUND",void 0,J)},error:(H,U,Q)=>{return new Y1(H,U,Q)},setStatus:(H)=>{X=H},json:(H,U)=>{if(!$.asResponse)return H;return{body:U?.body||H,routerResponse:U,_flag:"json"}},responseHeaders:J,get responseStatus(){return X}};for(let H of F.use||[]){let U=await H({...z,returnHeaders:!0,asResponse:!1});if(U.response)Object.assign(z.context,U.response);if(U.headers)U.headers.forEach((Q,B)=>{z.responseHeaders.set(B,Q)})}return z};function _Y($,F,A){let J=typeof $==="string"?$:void 0,X=typeof F==="object"?F:$,Y=typeof F==="function"?F:A;if((X.method==="GET"||X.method==="HEAD")&&X.body)throw new TT("Body is not allowed with GET or HEAD methods");if(J&&/\/{2,}/.test(J))throw new TT("Path cannot contain consecutive slashes");let W=async(...Z)=>{let D=Z[0]||{},{data:G,error:z}=await mP1(BL(D,{options:X,path:J}));if(z){if(!(z instanceof KL))throw z;if(X.onValidationError)await X.onValidationError({message:z.message,issues:z.issues});throw new Y1(400,{message:z.message,code:"VALIDATION_ERROR"})}let H=await Y(G).catch(async(B)=>{if(wD(B)){let q=X.onAPIError;if(q)await q(B);if(D.asResponse)return B}throw B}),U=G.responseHeaders,Q=G.responseStatus;return D.asResponse?f$(H,{headers:U,status:Q}):D.returnHeaders?D.returnStatus?{headers:U,response:H,status:Q}:{headers:U,response:H}:D.returnStatus?{response:H,status:Q}:H};return W.options=X,W.path=J,W}_Y.create=($)=>{return(F,A,J)=>{return _Y(F,{...A,use:[...A?.use||[],...$?.use||[]]},J)}};function kY($,F){let A=async(J)=>{let X=J,Y=typeof $==="function"?$:F,W=await BL(X,{options:typeof $==="function"?{}:$,path:"/"});if(!Y)throw Error("handler must be defined");let Z=await Y(W),D=W.responseHeaders;return X.returnHeaders?{headers:D,response:Z}:Z};return A.options=typeof $==="function"?{}:$,A}kY.create=($)=>{function F(A,J){if(typeof A==="function")return kY({use:$?.use},A);if(!J)throw Error("Middleware handler is required");return kY({...A,method:"*",use:[...$?.use||[],...A.use||[]]},J)}return F};u4();var Vr={};function aP1($){switch($.constructor.name){case"ZodString":return"string";case"ZodNumber":return"number";case"ZodBoolean":return"boolean";case"ZodObject":return"object";case"ZodArray":return"array";default:return"string"}}function nP1($){let F=[];if($.metadata?.openapi?.parameters)return F.push(...$.metadata.openapi.parameters),F;if($.query instanceof b$)Object.entries($.query.shape).forEach(([A,J])=>{if(J instanceof b$)F.push({name:A,in:"query",schema:{type:aP1(J),..."minLength"in J&&J.minLength?{minLength:J.minLength}:{},description:J.description}})});return F}function LV0($){if($.metadata?.openapi?.requestBody)return $.metadata.openapi.requestBody;if(!$.body)return;if($.body instanceof b$||$.body instanceof TJ){let F=$.body.shape;if(!F)return;let A={},J=[];return Object.entries(F).forEach(([X,Y])=>{if(Y instanceof b$){if(A[X]={type:aP1(Y),description:Y.description},!(Y instanceof TJ))J.push(X)}}),{required:$.body instanceof TJ?!1:$.body?!0:!1,content:{"application/json":{schema:{type:"object",properties:A,required:J}}}}}}function rP1($){return{"400":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},"401":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},"403":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},"404":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},"429":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},"500":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...$}}async function Nr($,F){let A={schemas:{}};return Object.entries($).forEach(([J,X])=>{let Y=X.options;if(!X.path||Y.metadata?.SERVER_ONLY)return;if(Y.method==="GET")Vr[X.path]={get:{tags:["Default",...Y.metadata?.openapi?.tags||[]],description:Y.metadata?.openapi?.description,operationId:Y.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:nP1(Y),responses:rP1(Y.metadata?.openapi?.responses)}};if(Y.method==="POST"){let W=LV0(Y);Vr[X.path]={post:{tags:["Default",...Y.metadata?.openapi?.tags||[]],description:Y.metadata?.openapi?.description,operationId:Y.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:nP1(Y),...W?{requestBody:W}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:rP1(Y.metadata?.openapi?.responses)}}}}),{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:A,security:[{apiKeyCookie:[]}],servers:[{url:F?.url}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:Vr}}var Cr=($,F)=>`<!doctype html>
<html>
  <head>
    <title>Scalar API Reference</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script
      id="api-reference"
      type="application/json">
    ${JSON.stringify($)}
    </script>
	 <script>
      var configuration = {
	  	favicon: ${F?.logo?`data:image/svg+xml;utf8,${encodeURIComponent(F.logo)}`:void 0} ,
	   	theme: ${F?.theme||"saturn"},
        metaData: {
			title: ${F?.title||"Open API Reference"},
			description: ${F?.description||"Better Call Open API"},
		}
      }
      document.getElementById('api-reference').dataset.configuration =
        JSON.stringify(configuration)
    </script>
	  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>
  </body>
</html>`;var ST=(()=>{let $=function(){};return $.prototype=Object.create(null),Object.freeze($.prototype),$})();function Rr(){return{root:{key:""},static:new ST}}function Ir($){let[F,...A]=$.split("/");return A[A.length-1]===""?A.slice(0,-1):A}function tP1($,F){let A=new ST;for(let[J,X]of F){let Y=J<0?$.slice(-(J+1)).join("/"):$[J];if(typeof X==="string")A[X]=Y;else{let W=Y.match(X);if(W)for(let Z in W.groups)A[Z]=W.groups[Z]}}return A}function Tr($,F="",A,J){if(F=F.toUpperCase(),A.charCodeAt(0)!==47)A=`/${A}`;A=A.replace(/\\:/g,"%3A");let X=Ir(A),Y=$.root,W=0,Z=[],D=[];for(let z=0;z<X.length;z++){let H=X[z];if(H.startsWith("**")){if(!Y.wildcard)Y.wildcard={key:"**"};Y=Y.wildcard,Z.push([-(z+1),H.split(":")[1]||"_",H.length===2]);break}if(H==="*"||H.includes(":")){if(!Y.param)Y.param={key:"*"};if(Y=Y.param,H==="*")Z.push([z,`_${W++}`,!0]);else if(H.includes(":",1)){let Q=EV0(H);D[z]=Q,Y.hasRegexParam=!0,Z.push([z,Q,!1])}else Z.push([z,H.slice(1),!1]);continue}if(H==="\\*")H=X[z]="*";else if(H==="\\*\\*")H=X[z]="**";let U=Y.static?.[H];if(U)Y=U;else{let Q={key:H};if(!Y.static)Y.static=new ST;Y.static[H]=Q,Y=Q}}let G=Z.length>0;if(!Y.methods)Y.methods=new ST;if(Y.methods[F]??=[],Y.methods[F].push({data:J||null,paramsRegexp:D,paramsMap:G?Z:void 0}),!G)$.static["/"+X.join("/")]=Y}function EV0($){let F=$.replace(/:(\w+)/g,(A,J)=>`(?<${J}>[^/]+)`).replace(/\./g,"\\.");return new RegExp(`^${F}$`)}function sP1($,F="",A,J){if(A.charCodeAt(A.length-1)===47)A=A.slice(0,-1);let X=$.static[A];if(X&&X.methods){let Z=X.methods[F]||X.methods[""];if(Z!==void 0)return Z[0]}let Y=Ir(A),W=Mr($,$.root,F,Y,0)?.[0];if(W===void 0)return;if(J?.params===!1)return W;return{data:W.data,params:W.paramsMap?tP1(Y,W.paramsMap):void 0}}function Mr($,F,A,J,X){if(X===J.length){if(F.methods){let W=F.methods[A]||F.methods[""];if(W)return W}if(F.param&&F.param.methods){let W=F.param.methods[A]||F.param.methods[""];if(W){let Z=W[0].paramsMap;if(Z?.[Z?.length-1]?.[2])return W}}if(F.wildcard&&F.wildcard.methods){let W=F.wildcard.methods[A]||F.wildcard.methods[""];if(W){let Z=W[0].paramsMap;if(Z?.[Z?.length-1]?.[2])return W}}return}let Y=J[X];if(F.static){let W=F.static[Y];if(W){let Z=Mr($,W,A,J,X+1);if(Z)return Z}}if(F.param){let W=Mr($,F.param,A,J,X+1);if(W){if(F.param.hasRegexParam){let Z=W.find((D)=>D.paramsRegexp[X]?.test(Y))||W.find((D)=>!D.paramsRegexp[X]);return Z?[Z]:void 0}return W}}if(F.wildcard&&F.wildcard.methods)return F.wildcard.methods[A]||F.wildcard.methods[""]}function oP1($,F="",A,J){if(A.charCodeAt(A.length-1)===47)A=A.slice(0,-1);let X=Ir(A),Y=Pr($,$.root,F,X,0);if(J?.params===!1)return Y;return Y.map((W)=>{return{data:W.data,params:W.paramsMap?tP1(X,W.paramsMap):void 0}})}function Pr($,F,A,J,X,Y=[]){let W=J[X];if(F.wildcard&&F.wildcard.methods){let D=F.wildcard.methods[A]||F.wildcard.methods[""];if(D)Y.push(...D)}if(F.param){if(Pr($,F.param,A,J,X+1,Y),X===J.length&&F.param.methods){let D=F.param.methods[A]||F.param.methods[""];if(D){let G=D[0].paramsMap;if(G?.[G?.length-1]?.[2])Y.push(...D)}}}let Z=F.static?.[W];if(Z)Pr($,Z,A,J,X+1,Y);if(X===J.length&&F.methods){let D=F.methods[A]||F.methods[""];if(D)Y.push(...D)}return Y}var jr=($,F)=>{if(!F?.openapi?.disabled){let Y={path:"/api/reference",...F?.openapi};$.openapi=_Y(Y.path,{method:"GET"},async(W)=>{let Z=await Nr($);return new Response(Cr(Z,Y.scalar),{headers:{"Content-Type":"text/html"}})})}let A=Rr(),J=Rr();for(let Y of Object.values($)){if(!Y.options||!Y.path)continue;if(Y.options?.metadata?.SERVER_ONLY)continue;let W=Array.isArray(Y.options?.method)?Y.options.method:[Y.options?.method];for(let Z of W)Tr(A,Z,Y.path,Y)}if(F?.routerMiddleware?.length)for(let{path:Y,middleware:W}of F.routerMiddleware)Tr(J,"*",Y,W);let X=async(Y)=>{let W=new URL(Y.url),Z=W.pathname,D=F?.basePath&&F.basePath!=="/"?Z.split(F.basePath).reduce((U,Q,B)=>{if(B!==0)if(B>1)U.push(`${F.basePath}${Q}`);else U.push(Q);return U},[]).join(""):W.pathname;if(!D?.length)return new Response(null,{status:404,statusText:"Not Found"});if(/\/{2,}/.test(D))return new Response(null,{status:404,statusText:"Not Found"});let G=sP1(A,Y.method,D);if(D.endsWith("/")!==G?.data?.path?.endsWith("/")&&!F?.skipTrailingSlashes)return new Response(null,{status:404,statusText:"Not Found"});if(!G?.data)return new Response(null,{status:404,statusText:"Not Found"});let z={};W.searchParams.forEach((U,Q)=>{if(Q in z)if(Array.isArray(z[Q]))z[Q].push(U);else z[Q]=[z[Q],U];else z[Q]=U});let H=G.data;try{let U=H.options.metadata?.allowedMediaTypes||F?.allowedMediaTypes,Q={path:D,method:Y.method,headers:Y.headers,params:G.params?JSON.parse(JSON.stringify(G.params)):{},request:Y,body:H.options.disableBody?void 0:await uP1(H.options.cloneRequest?Y.clone():Y,U),query:z,_flag:"router",asResponse:!0,context:F?.routerContext},B=oP1(J,"*",D);if(B?.length)for(let{data:q,params:L}of B){let E=await q({...Q,params:L,asResponse:!1});if(E instanceof Response)return E}return await H(Q)}catch(U){if(F?.onError)try{let Q=await F.onError(U);if(Q instanceof Response)return f$(Q)}catch(Q){if(wD(Q))return f$(Q);throw Q}if(F?.throwError)throw U;if(wD(U))return f$(U);return console.error("# SERVER_ERROR: ",U),new Response(null,{status:500,statusText:"Internal Server Error"})}};return{handler:async(Y)=>{let W=await F?.onRequest?.(Y);if(W instanceof Response)return W;let Z=await X(jT(W)?W:Y),D=await F?.onResponse?.(Z);if(D instanceof Response)return D;return Z},endpoints:$}};var Or=new WeakMap;function Sr($,F){let A=F.fields,J={};for(let X in $){let Y=A[X];if(!Y){J[X]=$[X];continue}if(Y.returned===!1&&X!=="id")continue;J[X]=$[X]}return J}function qD($,F,A){let J=`${F}:${A}`;if(!Or.has($))Or.set($,new Map);let X=Or.get($);if(X.has(J))return X.get(J);let Y=A==="output"?l3($)[F]?.fields??{}:{},W=F==="user"||F==="session"||F==="account"?$[F]?.additionalFields:void 0,Z={...Y,...W??{}};for(let D of $.plugins||[])if(D.schema&&D.schema[F])Z={...Z,...D.schema[F].fields};return X.set(J,Z),Z}function f2($,F){return Sr(F,{fields:qD($,"user","output")})}function H3($,F){return Sr(F,{fields:qD($,"session","output")})}function _T($,F){let{accessToken:A,refreshToken:J,idToken:X,accessTokenExpiresAt:Y,refreshTokenExpiresAt:W,password:Z,...D}=Sr(F,{fields:qD($,"account","output")});return D}function iH($,F){let A=F.action||"create",J=F.fields,X=Object.assign(Object.create(null),null);for(let Y in J){if(Y in $){if(J[Y].input===!1){if(J[Y].defaultValue!==void 0){if(A!=="update"){X[Y]=J[Y].defaultValue;continue}}if($[Y])throw new Y1("BAD_REQUEST",{message:`${Y} is not allowed to be set`});continue}if(J[Y].validator?.input&&$[Y]!==void 0){let W=J[Y].validator.input["~standard"].validate($[Y]);if(W instanceof Promise)throw new Y1("INTERNAL_SERVER_ERROR",{message:"Async validation is not supported for additional fields"});if("issues"in W&&W.issues)throw new Y1("BAD_REQUEST",{message:W.issues[0]?.message||"Validation Error"});X[Y]=W.value;continue}if(J[Y].transform?.input&&$[Y]!==void 0){X[Y]=J[Y].transform?.input($[Y]);continue}X[Y]=$[Y];continue}if(J[Y].defaultValue!==void 0&&A==="create"){if(typeof J[Y].defaultValue==="function"){X[Y]=J[Y].defaultValue();continue}X[Y]=J[Y].defaultValue;continue}if(J[Y].required&&A==="create")throw new Y1("BAD_REQUEST",{message:`${Y} is required`})}return X}function nH($,F={},A){return iH(F,{fields:qD($,"user","input"),action:A})}function eP1($,F){let A=qD($,"user","input");return iH(F||{},{fields:A})}function $R1($,F){return iH(F,{fields:qD($,"account","input")})}function kT($,F){return iH(F,{fields:qD($,"session","input")})}function FR1($,F){if(!F)return $;for(let A in F){let J=F[A]?.modelName;if(J)$[A].modelName=J;for(let X in $[A].fields){let Y=F[A]?.fields?.[X];if(!Y)continue;$[A].fields[X].fieldName=Y}}return $}c3();u4();var br=4096,kr=200,_r=br-kr;function VV0($){let F=$.headers?.get("cookie");if(!F)return{};let A={},J=F.split("; ");for(let X of J){let[Y,...W]=X.split("=");if(Y&&W.length>0)A[Y]=W.join("=")}return A}function AR1($){let F=$.split("."),A=F[F.length-1],J=parseInt(A||"0",10);return isNaN(J)?0:J}function NV0($,F){let A={},J=VV0(F);for(let[X,Y]of Object.entries(J))if(X.startsWith($))A[X]=Y;return A}function CV0($){return Object.keys($).sort((F,A)=>{return AR1(F)-AR1(A)}).map((F)=>$[F]).join("")}function MV0($,F,A,J){let X=Math.ceil(F.value.length/_r);if(X===1)return A[F.name]=F.value,[F];let Y=[];for(let W=0;W<X;W++){let Z=`${F.name}.${W}`,D=W*_r,G=F.value.substring(D,D+_r);Y.push({...F,name:Z,value:G}),A[Z]=G}return J.debug(`CHUNKING_${$.toUpperCase()}_COOKIE`,{message:`${$} cookie exceeds allowed ${br} bytes.`,emptyCookieSize:kr,valueSize:F.value.length,chunkCount:X,chunks:Y.map((W)=>W.value.length+kr)}),Y}function JR1($,F){let A={};for(let J in $)A[J]={name:J,value:"",attributes:{...F,maxAge:0}};return A}var XR1=($)=>(F,A,J)=>{let X=NV0(F,J),Y=J.context.logger;return{getValue(){return CV0(X)},hasChunks(){return Object.keys(X).length>0},chunk(W,Z){let D=JR1(X,A);for(let H in X)delete X[H];let G=D,z=MV0($,{name:F,value:W,attributes:{...A,...Z}},X,Y);for(let H of z)G[H.name]=H;return Object.values(G)},clean(){let W=JR1(X,A);for(let Z in X)delete X[Z];return Object.values(W)},setCookies(W){for(let Z of W)J.setCookie(Z.name,Z.value,Z.attributes)}}},xT=XR1("Session"),bT=XR1("Account");function gT($,F){let A=$.getCookie(F);if(A)return A;let J=[],X=$.headers?.get("cookie");if(!X)return null;let Y={},W=X.split("; ");for(let Z of W){let[D,...G]=Z.split("=");if(D&&G.length>0)Y[D]=G.join("=")}for(let[Z,D]of Object.entries(Y))if(Z.startsWith(F+".")){let G=Z.split(".").at(-1),z=parseInt(G||"0",10);if(!isNaN(z))J.push({index:z,value:D})}if(J.length>0)return J.sort((Z,D)=>Z.index-D.index),J.map((Z)=>Z.value).join("");return null}async function rH($,F){let A=$.context.authCookies.accountData,J={maxAge:300,...A.attributes},X=await sw(F,$.context.secret,"better-auth-account",J.maxAge);if(X.length>br){let Y=bT(A.name,J,$),W=Y.chunk(X,J);Y.setCookies(W)}else{let Y=bT(A.name,J,$);if(Y.hasChunks()){let W=Y.clean();Y.setCookies(W)}$.setCookie(A.name,X,J)}}async function fT($){let F=gT($,$.context.authCookies.accountData.name);if(F){let A=j2(await wH(F,$.context.secret,"better-auth-account"));if(A)return A}return null}var YR1=b5(E0({disableCookieCache:u7.boolean().meta({description:"Disable cookie cache and fetch session from database"}).optional(),disableRefresh:u7.boolean().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()}));var PV0=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)(?: (ago|from now))?$/i;function RV0($){let F=PV0.exec($);if(!F||F[4]&&F[1])throw TypeError(`Invalid time string format: "${$}". Use formats like "7d", "30m", "1 hour", etc.`);let A=parseFloat(F[2]),J=F[3].toLowerCase(),X;switch(J){case"years":case"year":case"yrs":case"yr":case"y":X=A*31557600000;break;case"months":case"month":case"mo":X=A*2592000000;break;case"weeks":case"week":case"w":X=A*604800000;break;case"days":case"day":case"d":X=A*86400000;break;case"hours":case"hour":case"hrs":case"hr":case"h":X=A*3600000;break;case"minutes":case"minute":case"mins":case"min":case"m":X=A*60000;break;case"seconds":case"second":case"secs":case"sec":case"s":X=A*1000;break;default:throw TypeError(`Unknown time unit: "${J}"`)}if(F[1]==="-"||F[4]==="ago")return-X;return X}function WR1($){return Math.round(RV0($)/1000)}var ZR1="__Secure-";c6();l6();c3();var xr=new Map,IV0=new TextEncoder,gr={decode:($,F="utf-8")=>{if(!xr.has(F))xr.set(F,new TextDecoder(F));return xr.get(F).decode($)},encode:IV0.encode};var vT=($="SHA-256",F="none")=>{let A={importKey:async(J,X)=>{return x$().importKey("raw",typeof J==="string"?new TextEncoder().encode(J):J,{name:"HMAC",hash:{name:$}},!1,[X])},sign:async(J,X)=>{if(typeof J==="string")J=await A.importKey(J,"sign");let Y=await x$().sign("HMAC",J,typeof X==="string"?new TextEncoder().encode(X):X);if(F==="hex")return cH.encode(Y);if(F==="base64"||F==="base64url"||F==="base64urlnopad")return g$.encode(Y,{padding:F!=="base64urlnopad"});return Y},verify:async(J,X,Y)=>{if(typeof J==="string")J=await A.importKey(J,"verify");if(F==="hex")Y=cH.decode(Y);if(F==="base64"||F==="base64url"||F==="base64urlnopad")Y=await j9.decode(Y);return x$().verify("HMAC",J,typeof Y==="string"?new TextEncoder().encode(Y):Y,typeof X==="string"?new TextEncoder().encode(X):X)}};return A};function fr($){let F=($.advanced?.useSecureCookies!==void 0?$.advanced?.useSecureCookies:$.baseURL!==void 0?$.baseURL.startsWith("https://")?!0:!1:SY)?ZR1:"",A=!!$.advanced?.crossSubDomainCookies?.enabled,J=A?$.advanced?.crossSubDomainCookies?.domain||($.baseURL?new URL($.baseURL).hostname:void 0):void 0;if(A&&!J)throw new o1("baseURL is required when crossSubdomainCookies are enabled");function X(Y,W={}){let Z=$.advanced?.cookiePrefix||"better-auth",D=$.advanced?.cookies?.[Y]?.name||`${Z}.${Y}`,G=$.advanced?.cookies?.[Y]?.attributes;return{name:`${F}${D}`,attributes:{secure:!!F,sameSite:"lax",path:"/",httpOnly:!0,...A?{domain:J}:{},...$.advanced?.defaultCookieAttributes,...W,...G}}}return X}function DR1($){let F=fr($),A=F("session_token",{maxAge:$.session?.expiresIn||WR1("7d")}),J=F("session_data",{maxAge:$.session?.cookieCache?.maxAge||300}),X=F("account_data",{maxAge:$.session?.cookieCache?.maxAge||300}),Y=F("dont_remember");return{sessionToken:{name:A.name,attributes:A.attributes},sessionData:{name:J.name,attributes:J.attributes},dontRememberToken:{name:Y.name,attributes:Y.attributes},accountData:{name:X.name,attributes:X.attributes}}}async function yT($,F,A){if($.context.options.session?.cookieCache?.enabled){let J=Object.entries(F.session).reduce((U,[Q,B])=>{let q=$.context.options.session?.additionalFields?.[Q];if(!q||q.returned!==!1)U[Q]=B;return U},{}),X=f2($.context.options,F.user),Y=$.context.options.session?.cookieCache?.version,W="1";if(Y){if(typeof Y==="string")W=Y;else if(typeof Y==="function"){let U=Y(F.session,F.user);W=U instanceof Promise?await U:U}}let Z={session:J,user:X,updatedAt:Date.now(),version:W},D={...$.context.authCookies.sessionData.attributes,maxAge:A?void 0:$.context.authCookies.sessionData.attributes.maxAge},G=WA(D.maxAge||60,"sec").getTime(),z=$.context.options.session?.cookieCache?.strategy||"compact",H;if(z==="jwe")H=await sw(Z,$.context.secret,"better-auth-session",D.maxAge||300);else if(z==="jwt")H=await tw(Z,$.context.secret,D.maxAge||300);else H=g$.encode(JSON.stringify({session:Z,expiresAt:G,signature:await vT("SHA-256","base64urlnopad").sign($.context.secret,JSON.stringify({...Z,expiresAt:G}))}),{padding:!1});if(H.length>4093){let U=xT($.context.authCookies.sessionData.name,D,$),Q=U.chunk(H,D);U.setCookies(Q)}else{let U=xT($.context.authCookies.sessionData.name,D,$);if(U.hasChunks()){let Q=U.clean();U.setCookies(Q)}$.setCookie($.context.authCookies.sessionData.name,H,D)}}}async function O9($,F,A,J){let X=await $.getSignedCookie($.context.authCookies.dontRememberToken.name,$.context.secret);A=A!==void 0?A:!!X;let Y=$.context.authCookies.sessionToken.attributes,W=A?void 0:$.context.sessionConfig.expiresIn;if(await $.setSignedCookie($.context.authCookies.sessionToken.name,F.session.token,$.context.secret,{...Y,maxAge:W,...J}),A)await $.setSignedCookie($.context.authCookies.dontRememberToken.name,"true",$.context.secret,$.context.authCookies.dontRememberToken.attributes);if(await yT($,F,A),$.context.setNewSession(F),$.context.options.secondaryStorage)await $.context.secondaryStorage?.set(F.session.token,JSON.stringify({user:F.user,session:F.session}),Math.floor((new Date(F.session.expiresAt).getTime()-Date.now())/1000))}function p3($,F){$.setCookie(F.name,"",{...F.attributes,maxAge:0})}function bY($,F){if(p3($,$.context.authCookies.sessionToken),p3($,$.context.authCookies.sessionData),$.context.options.account?.storeAccountCookie){p3($,$.context.authCookies.accountData);let X=bT($.context.authCookies.accountData.name,$.context.authCookies.accountData.attributes,$),Y=X.clean();X.setCookies(Y)}if($.context.oauthConfig.storeStateStrategy==="cookie")p3($,$.context.createAuthCookie("oauth_state"));let A=xT($.context.authCookies.sessionData.name,$.context.authCookies.sessionData.attributes,$),J=A.clean();if(A.setCookies(J),!F)p3($,$.context.authCookies.dontRememberToken)}u4();async function aH($,F,A){let J=$.body?.callbackURL||$.context.options.baseURL;if(!J)throw new Y1("BAD_REQUEST",{message:"callbackURL is required"});let X=YH(128),Y=YH(32),W=$.context.oauthConfig.storeStateStrategy,Z={...A?A:{},callbackURL:J,codeVerifier:X,errorURL:$.body?.errorCallbackURL,newUserURL:$.body?.newUserCallbackURL,link:F,expiresAt:Date.now()+600000,requestSignUp:$.body?.requestSignUp,state:Y};if(await Lm(Z),W==="cookie"){let H=await RT({key:$.context.secret,data:JSON.stringify(Z)}),U=$.context.createAuthCookie("oauth_state",{maxAge:600000});return $.setCookie(U.name,H,U.attributes),{state:Y,codeVerifier:X}}let D=$.context.createAuthCookie("state",{maxAge:300000});await $.setSignedCookie(D.name,Y,$.context.secret,D.attributes);let G=new Date;G.setMinutes(G.getMinutes()+10);let z=await $.context.internalAdapter.createVerificationValue({value:JSON.stringify(Z),identifier:Y,expiresAt:G});if(!z)throw $.context.logger.error("Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database"),new Y1("INTERNAL_SERVER_ERROR",{message:"Unable to create verification"});return{state:z.identifier,codeVerifier:X}}async function uT($){let F=$.query.state||$.body.state,A=$.context.oauthConfig.storeStateStrategy,J=AL({callbackURL:N1(),codeVerifier:N1(),errorURL:N1().optional(),newUserURL:N1().optional(),expiresAt:f7(),link:E0({email:N1(),userId:u7.string()}).optional(),requestSignUp:Z9().optional(),state:N1().optional()}),X,Y=$.context.oauthConfig?.skipStateCookieCheck;if(A==="cookie"){let W=$.context.createAuthCookie("oauth_state"),Z=$.getCookie(W.name);if(!Z){$.context.logger.error("State Mismatch. OAuth state cookie not found",{state:F});let D=$.context.options.onAPIError?.errorURL||`${$.context.baseURL}/error`;throw $.redirect(`${D}?error=please_restart_the_process`)}try{let D=await IT({key:$.context.secret,data:Z});X=J.parse(JSON.parse(D))}catch(D){$.context.logger.error("Failed to decrypt or parse OAuth state cookie",{error:D});let G=$.context.options.onAPIError?.errorURL||`${$.context.baseURL}/error`;throw $.redirect(`${G}?error=please_restart_the_process`)}if(!$.context.oauthConfig?.skipStateCookieCheck&&X.state&&X.state!==F){$.context.logger.error("State Mismatch. State parameter does not match",{expected:X.state,received:F});let D=$.context.options.onAPIError?.errorURL||`${$.context.baseURL}/error`;throw $.redirect(`${D}?error=state_mismatch`)}p3($,W)}else{let W=await $.context.internalAdapter.findVerificationValue(F);if(!W){$.context.logger.error("State Mismatch. Verification not found",{state:F});let G=$.context.options.onAPIError?.errorURL||`${$.context.baseURL}/error`;throw $.redirect(`${G}?error=please_restart_the_process`)}X=J.parse(JSON.parse(W.value));let Z=$.context.createAuthCookie("state"),D=await $.getSignedCookie(Z.name,$.context.secret);if(!Y&&(!D||D!==F)){let G=$.context.options.onAPIError?.errorURL||`${$.context.baseURL}/error`;throw $.redirect(`${G}?error=state_mismatch`)}p3($,Z),await $.context.internalAdapter.deleteVerificationValue(W.id)}if(!X.errorURL)X.errorURL=$.context.options.onAPIError?.errorURL||`${$.context.baseURL}/error`;if(X.expiresAt<Date.now()){let W=$.context.options.onAPIError?.errorURL||`${$.context.baseURL}/error`;throw $.redirect(`${W}?error=please_restart_the_process`)}if(X)await Lm(X);return X}var xY={scope:"server"};c3();c6();c3();var TV0="127.0.0.1";function wL($,F){if(F.advanced?.ipAddress?.disableIpTracking)return null;let A="headers"in $?$.headers:$,J=F.advanced?.ipAddress?.ipAddressHeaders||["x-forwarded-for"];for(let X of J){let Y="get"in A?A.get(X):A[X];if(typeof Y==="string"){let W=Y.split(",")[0].trim();if(an(W))return tn(W,{ipv6Subnet:F.advanced?.ipAddress?.ipv6Subnet})}}if(jJ()||BD())return TV0;return null}c6();l6();function jV0($){try{return(new URL($).pathname.replace(/\/+$/,"")||"/")!=="/"}catch{throw new o1(`Invalid base URL: ${$}. Please provide a valid base URL.`)}}function OV0($){try{let F=new URL($);if(F.protocol!=="http:"&&F.protocol!=="https:")throw new o1(`Invalid base URL: ${$}. URL must include 'http://' or 'https://'`)}catch(F){if(F instanceof o1)throw F;throw new o1(`Invalid base URL: ${$}. Please provide a valid base URL.`,{cause:F})}}function qL($,F="/api/auth"){if(OV0($),jV0($))return $;let A=$.replace(/\/+$/,"");if(!F||F==="/")return A;return F=F.startsWith("/")?F:`/${F}`,`${A}${F}`}function GR1($,F){if(!$||$.trim()==="")return!1;if(F==="proto")return $==="http"||$==="https";if(F==="host"){if([/\.\./,/\0/,/[\s]/,/^[.]/,/[<>'"]/,/javascript:/i,/file:/i,/data:/i].some((A)=>A.test($)))return!1;return/^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*(:[0-9]{1,5})?$/.test($)||/^(\d{1,3}\.){3}\d{1,3}(:[0-9]{1,5})?$/.test($)||/^\[[0-9a-fA-F:]+\](:[0-9]{1,5})?$/.test($)||/^localhost(:[0-9]{1,5})?$/i.test($)}return!1}function tH($,F,A,J,X){if($)return qL($,F);if(J!==!1){let Z=X6.BETTER_AUTH_URL||X6.NEXT_PUBLIC_BETTER_AUTH_URL||X6.PUBLIC_BETTER_AUTH_URL||X6.NUXT_PUBLIC_BETTER_AUTH_URL||X6.NUXT_PUBLIC_AUTH_URL||(X6.BASE_URL!=="/"?X6.BASE_URL:void 0);if(Z)return qL(Z,F)}let Y=A?.headers.get("x-forwarded-host"),W=A?.headers.get("x-forwarded-proto");if(Y&&W&&X){if(GR1(W,"proto")&&GR1(Y,"host"))try{return qL(`${W}://${Y}`,F)}catch(Z){}}if(A){let Z=sH(A.url);if(!Z)throw new o1("Could not get origin from request. Please provide a valid base URL.");return qL(Z,F)}if(typeof window<"u"&&window.location)return qL(window.location.origin,F)}function sH($){try{let F=new URL($);return F.origin==="null"?null:F.origin}catch{return null}}function zR1($){try{return new URL($).protocol}catch{return null}}function HR1($){try{return new URL($).host}catch{return null}}function vr($){if($==="-"||$==="^"||$==="$"||$==="+"||$==="."||$==="("||$===")"||$==="|"||$==="["||$==="]"||$==="{"||$==="}"||$==="*"||$==="?"||$==="\\")return`\\${$}`;else return $}function SV0($){let F="";for(let A=0;A<$.length;A++)F+=vr($[A]);return F}function UR1($,F=!0){if(Array.isArray($))return`(?:${$.map((G)=>`^${UR1(G,F)}$`).join("|")})`;let A="",J="",X=".";if(F===!0)A="/",J="[/\\\\]",X="[^/\\\\]";else if(F)if(A=F,J=SV0(A),J.length>1)J=`(?:${J})`,X=`((?!${J}).)`;else X=`[^${J}]`;let Y=F?`${J}+?`:"",W=F?`${J}*?`:"",Z=F?$.split(A):[$],D="";for(let G=0;G<Z.length;G++){let z=Z[G],H=Z[G+1],U="";if(!z&&G>0)continue;if(F)if(G===Z.length-1)U=W;else if(H!=="**")U=Y;else U="";if(F&&z==="**"){if(U)D+=G===0?"":U,D+=`(?:${X}*?${U})*?`;continue}for(let Q=0;Q<z.length;Q++){let B=z[Q];if(B==="\\"){if(Q<z.length-1)D+=vr(z[Q+1]),Q++}else if(B==="?")D+=X;else if(B==="*")D+=`${X}*?`;else D+=vr(B)}D+=U}return D}function _V0($,F){if(typeof F!=="string")throw TypeError(`Sample must be a string, but ${typeof F} given`);return $.test(F)}function LL($,F){if(typeof $!=="string"&&!Array.isArray($))throw TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof $} given`);if(typeof F==="string"||typeof F==="boolean")F={separator:F};if(arguments.length===2&&!(typeof F>"u"||typeof F==="object"&&F!==null&&!Array.isArray(F)))throw TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof F} given`);if(F=F||{},F.separator==="\\")throw Error("\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead");let A=UR1($,F.separator),J=new RegExp(`^${A}$`,F.flags),X=_V0.bind(null,J);return X.options=F,X.pattern=$,X.regexp=J,X}var hT=($,F,A)=>{if($.startsWith("/")){if(A?.allowRelativePaths)return $.startsWith("/")&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test($);return!1}if(F.includes("*")||F.includes("?")){if(F.includes("://"))return LL(F)(sH($)||$);let X=HR1($);if(!X)return!1;return LL(F)(X)}let J=zR1($);return J==="http:"||J==="https:"||!J?F===sH($):$.startsWith(F)};l6();c3();var yr=kY(async()=>{return{}}),DA=kY.create({use:[yr,kY(async()=>{return{}})]}),QR1=[yr];function b0($,F,A){let J=typeof $==="string"?$:void 0,X=typeof F==="object"?F:$,Y=typeof F==="function"?F:A;if(J)return _Y(J,{...X,use:[...X?.use||[],...QR1]},async(W)=>gZ(W,()=>Y(W)));return _Y({...X,use:[...X?.use||[],...QR1]},async(W)=>gZ(W,()=>Y(W)))}function KR1($){return $.context.skipOriginCheck&&$.context.options.advanced?.disableCSRFCheck===void 0}var kV0=ow(function(){},"disableOriginCheck: true currently also disables CSRF checks. In a future version, disableOriginCheck will ONLY disable URL validation. To keep CSRF disabled, add disableCSRFCheck: true to your config."),hr=DA(async($)=>{if($.request?.method==="GET"||$.request?.method==="OPTIONS"||$.request?.method==="HEAD"||!$.request)return;if(await ur($),$.context.skipOriginCheck)return;let{body:F,query:A}=$,J=F?.callbackURL||A?.callbackURL,X=F?.redirectTo,Y=F?.errorCallbackURL,W=F?.newUserCallbackURL,Z=(D,G)=>{if(!D)return;if(!$.context.isTrustedOrigin(D,{allowRelativePaths:G!=="origin"}))throw $.context.logger.error(`Invalid ${G}: ${D}`),$.context.logger.info(`If it's a valid URL, please add ${D} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${$.context.trustedOrigins}`),new Y1("FORBIDDEN",{message:`Invalid ${G}`})};J&&Z(J,"callbackURL"),X&&Z(X,"redirectURL"),Y&&Z(Y,"errorCallbackURL"),W&&Z(W,"newUserCallbackURL")}),gY=($)=>DA(async(F)=>{if(!F.request)return;if(F.context.skipOriginCheck)return;let A=$(F),J=(Y,W)=>{if(!Y)return;if(!F.context.isTrustedOrigin(Y,{allowRelativePaths:W!=="origin"}))throw F.context.logger.error(`Invalid ${W}: ${Y}`),F.context.logger.info(`If it's a valid URL, please add ${Y} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${F.context.trustedOrigins}`),new Y1("FORBIDDEN",{message:`Invalid ${W}`})},X=Array.isArray(A)?A:[A];for(let Y of X)J(Y,"callbackURL")});async function ur($,F=!1){let A=$.request?.headers;if(!A||!$.request)return;let J=A.get("origin")||A.get("referer")||"",X=A.has("cookie");if($.context.skipCSRFCheck)return;if(KR1($)){$.context.options.advanced?.disableOriginCheck===!0&&kV0();return}if(!(F||X))return;if(!J||J==="null")throw new Y1("FORBIDDEN",{message:c1.MISSING_OR_NULL_ORIGIN});let Y=Array.isArray($.context.options.trustedOrigins)?$.context.trustedOrigins:[...$.context.trustedOrigins,...(await $.context.options.trustedOrigins?.($.request))?.filter((W)=>Boolean(W))||[]];if(!Y.some((W)=>hT(J,W)))throw $.context.logger.error(`Invalid origin: ${J}`),$.context.logger.info(`If it's a valid URL, please add ${J} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${Y}`),new Y1("FORBIDDEN",{message:"Invalid origin"})}var oH=DA(async($)=>{if(!$.request)return;await bV0($)});async function bV0($){let F=$.request;if(!F)return;if($.context.skipCSRFCheck)return;if(KR1($))return;let A=F.headers;if(A.has("cookie"))return await ur($);let J=A.get("Sec-Fetch-Site"),X=A.get("Sec-Fetch-Mode"),Y=A.get("Sec-Fetch-Dest");if(Boolean(J&&J.trim()||X&&X.trim()||Y&&Y.trim())){if(J==="cross-site"&&X==="navigate")throw $.context.logger.error("Blocked cross-site navigation login attempt (CSRF protection)",{secFetchSite:J,secFetchMode:X,secFetchDest:Y}),new Y1("FORBIDDEN",{message:c1.CROSS_SITE_NAVIGATION_LOGIN_BLOCKED});return await ur($,!0)}}c3();function xV0($,F,A){let J=Date.now(),X=F*1000;return J-A.lastRequest<X&&A.count>=$}function gV0($){return new Response(JSON.stringify({message:"Too many requests. Please try again later."}),{status:429,statusText:"Too Many Requests",headers:{"X-Retry-After":$.toString()}})}function fV0($,F){let A=Date.now(),J=F*1000;return Math.ceil(($+J-A)/1000)}function vV0($){let A=$.adapter;return{get:async(J)=>{let X=(await A.findMany({model:"rateLimit",where:[{field:"key",value:J}]}))[0];if(typeof X?.lastRequest==="bigint")X.lastRequest=Number(X.lastRequest);return X},set:async(J,X,Y)=>{try{if(Y)await A.updateMany({model:"rateLimit",where:[{field:"key",value:J}],update:{count:X.count,lastRequest:X.lastRequest}});else await A.create({model:"rateLimit",data:{key:J,count:X.count,lastRequest:X.lastRequest}})}catch(W){$.logger.error("Error setting rate limit",W)}}}}var mr=new Map;function yV0($,F){if($.options.rateLimit?.customStorage)return $.options.rateLimit.customStorage;let A=$.rateLimit.storage;if(A==="secondary-storage")return{get:async(J)=>{let X=await $.options.secondaryStorage?.get(J);return X?j2(X):void 0},set:async(J,X,Y)=>{let W=F?.window??$.options.rateLimit?.window??10;await $.options.secondaryStorage?.set?.(J,JSON.stringify(X),W)}};else if(A==="memory")return{async get(J){let X=mr.get(J);if(!X)return;if(Date.now()>=X.expiresAt){mr.delete(J);return}return X.data},async set(J,X,Y){let W=F?.window??$.options.rateLimit?.window??10,Z=Date.now()+W*1000;mr.set(J,{data:X,expiresAt:Z})}};return vV0($)}async function BR1($,F){if(!F.rateLimit.enabled)return;let A=new URL($.url).pathname.replace(F.options.basePath||"/api/auth","").replace(/\/+$/,""),J=F.rateLimit.window,X=F.rateLimit.max,Y=wL($,F.options);if(!Y)return;let W=sn(Y,A),Z=uV0().find((H)=>H.pathMatcher(A));if(Z)J=Z.window,X=Z.max;for(let H of F.options.plugins||[])if(H.rateLimit){let U=H.rateLimit.find((Q)=>Q.pathMatcher(A));if(U){J=U.window,X=U.max;break}}if(F.rateLimit.customRules){let H=Object.keys(F.rateLimit.customRules).find((U)=>{if(U.includes("*"))return LL(U)(A);return U===A});if(H){let U=F.rateLimit.customRules[H],Q=typeof U==="function"?await U($):U;if(Q)J=Q.window,X=Q.max;if(Q===!1)return}}let D=yV0(F,{window:J}),G=await D.get(W),z=Date.now();if(!G)await D.set(W,{key:W,count:1,lastRequest:z});else{let H=z-G.lastRequest;if(xV0(X,J,G))return gV0(fV0(G.lastRequest,J));else if(H>J*1000)await D.set(W,{...G,count:1,lastRequest:z},!0);else await D.set(W,{...G,count:G.count+1,lastRequest:z},!0)}}function uV0(){return[{pathMatcher($){return $.startsWith("/sign-in")||$.startsWith("/sign-up")||$.startsWith("/change-password")||$.startsWith("/change-email")},window:10,max:3}]}var{defineProperty:EL,getOwnPropertyDescriptor:hV0,getOwnPropertyNames:mV0}=Object,dV0=Object.prototype.hasOwnProperty,qR1=($,F)=>{let A={};for(var J in $)EL(A,J,{get:$[J],enumerable:!0});if(F)EL(A,Symbol.toStringTag,{value:"Module"});return A},wR1=($,F,A,J)=>{if(F&&typeof F==="object"||typeof F==="function"){for(var X=mV0(F),Y=0,W=X.length,Z;Y<W;Y++)if(Z=X[Y],!dV0.call($,Z)&&Z!==A)EL($,Z,{get:((D)=>F[D]).bind(null,Z),enumerable:!(J=hV0(F,Z))||J.enumerable})}return $},LR1=($,F,A,J)=>{if(J)EL($,Symbol.toStringTag,{value:"Module"}),A&&EL(A,Symbol.toStringTag,{value:"Module"});wR1($,F,"default"),A&&wR1(A,F,"default")};c6();async function cT($,F){let A;if(!$.database){let J=l3($),X=Object.keys(J).reduce((W,Z)=>{return W[Z]=[],W},{}),{memoryAdapter:Y}=await Promise.resolve().then(() => (MR1(),CR1));A=Y(X)($)}else if(typeof $.database==="function")A=$.database($);else A=await F($);if(!A.transaction)$0.warn("Adapter does not correctly implement transaction function, patching it automatically. Please update your adapter implementation."),A.transaction=async(J)=>{return J(A)};return A}l6();async function zO($){return cT($,async(F)=>{let{createKyselyAdapter:A}=await Promise.resolve().then(() => (ls(),cs)),{kysely:J,databaseType:X,transaction:Y}=await A(F);if(!J)throw new o1("Failed to initialize database adapter");let{kyselyAdapter:W}=await Promise.resolve().then(() => (ls(),cs));return W(J,{type:X||"sqlite",debugLogs:F.database&&"debugLogs"in F.database?F.database.debugLogs:!1,transaction:Y})(F)})}var Fj1=($,F)=>{return{type:$,...F}};function Aj1($,F){let A=F.id?{id:F.id}:{};for(let J in $){let X=$[J],Y=F[J];if(Y===void 0)continue;A[X.fieldName||J]=Y}return A}function Jj1($,F){if(!F)return null;let A={id:F.id};for(let[J,X]of Object.entries($))A[J]=F[X.fieldName||J];return A}function HO($,F){let A=F.hooks;async function J(D,G,z){let H=await EJ().catch(()=>null),U=D;for(let q of A||[]){let L=q[G]?.create?.before;if(L){let E=await L(U,H);if(E===!1)return null;if(typeof E==="object"&&"data"in E)U={...U,...E.data}}}let Q=z?await z.fn(U):null,B=!z||z.executeMainFn?await(await Q2($)).create({model:G,data:U,forceAllowId:!0}):Q;for(let q of A||[]){let L=q[G]?.create?.after;if(L)await L(B,H)}return B}async function X(D,G,z,H){let U=await EJ().catch(()=>null),Q=D;for(let L of A||[]){let E=L[z]?.update?.before;if(E){let V=await E(D,U);if(V===!1)return null;if(typeof V==="object"&&"data"in V)Q={...Q,...V.data}}}let B=H?await H.fn(Q):null,q=!H||H.executeMainFn?await(await Q2($)).update({model:z,update:Q,where:G}):B;for(let L of A||[]){let E=L[z]?.update?.after;if(E)await E(q,U)}return q}async function Y(D,G,z,H){let U=await EJ().catch(()=>null),Q=D;for(let L of A||[]){let E=L[z]?.update?.before;if(E){let V=await E(D,U);if(V===!1)return null;if(typeof V==="object"&&"data"in V)Q={...Q,...V.data}}}let B=H?await H.fn(Q):null,q=!H||H.executeMainFn?await(await Q2($)).updateMany({model:z,update:Q,where:G}):B;for(let L of A||[]){let E=L[z]?.update?.after;if(E)await E(q,U)}return q}async function W(D,G,z){let H=await EJ().catch(()=>null),U=null;try{U=(await(await Q2($)).findMany({model:G,where:D,limit:1}))[0]||null}catch{}if(U)for(let q of A||[]){let L=q[G]?.delete?.before;if(L){if(await L(U,H)===!1)return null}}let Q=z?await z.fn(D):null,B=!z||z.executeMainFn?await(await Q2($)).delete({model:G,where:D}):Q;if(U)for(let q of A||[]){let L=q[G]?.delete?.after;if(L)await L(U,H)}return B}async function Z(D,G,z){let H=await EJ().catch(()=>null),U=[];try{U=await(await Q2($)).findMany({model:G,where:D})}catch{}for(let q of U)for(let L of A||[]){let E=L[G]?.delete?.before;if(E){if(await E(q,H)===!1)return null}}let Q=z?await z.fn(D):null,B=!z||z.executeMainFn?await(await Q2($)).deleteMany({model:G,where:D}):Q;for(let q of U)for(let L of A||[]){let E=L[G]?.delete?.after;if(E)await E(q,H)}return B}return{createWithHooks:J,updateWithHooks:X,updateManyWithHooks:Y,deleteWithHooks:W,deleteManyWithHooks:Z}}c3();var mU=($,F)=>{let{logger:A,options:J}=F,X=J.secondaryStorage,Y=J.session?.expiresIn||604800,{createWithHooks:W,updateWithHooks:Z,updateManyWithHooks:D,deleteWithHooks:G,deleteManyWithHooks:z}=HO($,F);async function H(U){if(!X)return;let Q=await X.get(`active-sessions-${U.id}`);if(!Q)return;let B=Date.now(),q=(j2(Q)||[]).filter((L)=>L.expiresAt>B);await Promise.all(q.map(async({token:L})=>{let E=await X.get(L);if(!E)return;let V=j2(E);if(!V)return;let R=Math.max(Math.floor(new Date(V.session.expiresAt).getTime()-B)/1000,0);await X.set(L,JSON.stringify({session:V.session,user:U}),Math.floor(R))}))}return{createOAuthUser:async(U,Q)=>{return gw($,async()=>{let B=await W({createdAt:new Date,updatedAt:new Date,...U},"user",void 0);return{user:B,account:await W({...Q,userId:B.id,createdAt:new Date,updatedAt:new Date},"account",void 0)}})},createUser:async(U)=>{return await W({createdAt:new Date,updatedAt:new Date,...U,email:U.email?.toLowerCase()},"user",void 0)},createAccount:async(U)=>{return await W({createdAt:new Date,updatedAt:new Date,...U},"account",void 0)},listSessions:async(U)=>{if(X){let Q=await X.get(`active-sessions-${U}`);if(!Q)return[];let B=j2(Q)||[],q=Date.now(),L=new Set,E=[];for(let{token:V,expiresAt:R}of B){if(R<=q||L.has(V))continue;L.add(V);let N=await X.get(V);if(!N)continue;let S=j2(N);if(!S)continue;E.push(H3(F.options,{...S.session,expiresAt:new Date(S.session.expiresAt)}))}return E}return await(await Q2($)).findMany({model:"session",where:[{field:"userId",value:U}]})},listUsers:async(U,Q,B,q)=>{return await(await Q2($)).findMany({model:"user",limit:U,offset:Q,sortBy:B,where:q})},countTotalUsers:async(U)=>{let Q=await(await Q2($)).count({model:"user",where:U});if(typeof Q==="string")return parseInt(Q);return Q},deleteUser:async(U)=>{if(!X||J.session?.storeSessionInDatabase)await z([{field:"userId",value:U}],"session",void 0);await z([{field:"userId",value:U}],"account",void 0),await G([{field:"id",value:U}],"user",void 0)},createSession:async(U,Q,B,q)=>{let L=await EJ().catch(()=>null),E=L?.headers||L?.request?.headers,{id:V,...R}=B||{},N=kT(L?.context.options??J,{}),S={ipAddress:L?.request||L?.headers?wL(L?.request||L?.headers,L?.context.options)||"":"",userAgent:E?.get("user-agent")||"",...R,expiresAt:Q?WA(86400,"sec"):WA(Y,"sec"),userId:U,token:S5(32),createdAt:new Date,updatedAt:new Date,...N,...q?R:{}};return await W(S,"session",X?{fn:async(C)=>{let M=await X.get(`active-sessions-${U}`),I=[],T=Date.now();if(M)I=j2(M)||[],I=I.filter((s)=>s.expiresAt>T&&s.token!==S.token);let j=[...I,{token:S.token,expiresAt:S.expiresAt.getTime()}].sort((s,n)=>s.expiresAt-n.expiresAt),b=j.at(-1)?.expiresAt??S.expiresAt.getTime(),g=Math.max(Math.floor((b-T)/1000),0);if(g>0)await X.set(`active-sessions-${U}`,JSON.stringify(j),g);let f=await $.findOne({model:"user",where:[{field:"id",value:U}]}),d=Math.max(Math.floor((S.expiresAt.getTime()-T)/1000),0);if(d>0)await X.set(S.token,JSON.stringify({session:C,user:f}),d);return C},executeMainFn:J.session?.storeSessionInDatabase}:void 0)},findSession:async(U)=>{if(X){let L=await X.get(U);if(!L&&!J.session?.storeSessionInDatabase)return null;if(L){let E=j2(L);if(!E)return null;return{session:H3(F.options,{...E.session,expiresAt:new Date(E.session.expiresAt),createdAt:new Date(E.session.createdAt),updatedAt:new Date(E.session.updatedAt)}),user:f2(F.options,{...E.user,createdAt:new Date(E.user.createdAt),updatedAt:new Date(E.user.updatedAt)})}}}let Q=await(await Q2($)).findOne({model:"session",where:[{value:U,field:"token"}],join:{user:!0}});if(!Q)return null;let{user:B,...q}=Q;if(!B)return null;return{session:H3(F.options,q),user:f2(F.options,B)}},findSessions:async(U)=>{if(X){let B=[];for(let q of U){let L=await X.get(q);if(L){let E=j2(L);if(!E)return[];let V={session:{...E.session,expiresAt:new Date(E.session.expiresAt)},user:{...E.user,createdAt:new Date(E.user.createdAt),updatedAt:new Date(E.user.updatedAt)}};B.push(V)}}return B}let Q=await(await Q2($)).findMany({model:"session",where:[{field:"token",value:U,operator:"in"}],join:{user:!0}});if(!Q.length)return[];if(Q.some((B)=>!B.user))return[];return Q.map((B)=>{let{user:q,...L}=B;return{session:L,user:q}})},updateSession:async(U,Q)=>{return await Z(Q,[{field:"token",value:U}],"session",X?{async fn(B){let q=await X.get(U);if(!q)return null;let L=j2(q);if(!L)return null;let E={...L.session,...B,expiresAt:new Date(B.expiresAt??L.session.expiresAt),createdAt:new Date(L.session.createdAt),updatedAt:new Date(B.updatedAt??L.session.updatedAt)},V=H3(F.options,E),R=Date.now(),N=new Date(V.expiresAt).getTime(),S=Math.max(Math.floor((N-R)/1000),0);if(S>0){await X.set(U,JSON.stringify({session:V,user:L.user}),S);let C=`active-sessions-${V.userId}`,M=await X.get(C),I=(M?j2(M)||[]:[]).filter((j)=>j.token!==U&&j.expiresAt>R).concat([{token:U,expiresAt:N}]).sort((j,b)=>j.expiresAt-b.expiresAt),T=I.at(-1)?.expiresAt;if(T&&T>R)await X.set(C,JSON.stringify(I),Math.floor((T-R)/1000));else await X.delete(C)}return V},executeMainFn:J.session?.storeSessionInDatabase}:void 0)},deleteSession:async(U)=>{if(X){let Q=await X.get(U);if(Q){let{session:B}=j2(Q)??{};if(!B){A.error("Session not found in secondary storage");return}let q=B.userId,L=await X.get(`active-sessions-${q}`);if(L){let E=j2(L)||[],V=Date.now(),R=E.filter((S)=>S.expiresAt>V&&S.token!==U),N=R.sort((S,C)=>S.expiresAt-C.expiresAt).at(-1)?.expiresAt;if(R.length>0&&N&&N>Date.now())await X.set(`active-sessions-${q}`,JSON.stringify(R),Math.floor((N-V)/1000));else await X.delete(`active-sessions-${q}`)}else A.error("Active sessions list not found in secondary storage")}if(await X.delete(U),!J.session?.storeSessionInDatabase||F.options.session?.preserveSessionInDatabase)return}await G([{field:"token",value:U}],"session",void 0)},deleteAccounts:async(U)=>{await z([{field:"userId",value:U}],"account",void 0)},deleteAccount:async(U)=>{await G([{field:"id",value:U}],"account",void 0)},deleteSessions:async(U)=>{if(X){if(typeof U==="string"){let Q=await X.get(`active-sessions-${U}`),B=Q?j2(Q):[];if(!B)return;for(let q of B)await X.delete(q.token);await X.delete(`active-sessions-${U}`)}else for(let Q of U)if(await X.get(Q))await X.delete(Q);if(!J.session?.storeSessionInDatabase||F.options.session?.preserveSessionInDatabase)return}await z([{field:Array.isArray(U)?"token":"userId",value:U,operator:Array.isArray(U)?"in":void 0}],"session",void 0)},findOAuthUser:async(U,Q,B)=>{let q=await(await Q2($)).findOne({model:"account",where:[{value:Q,field:"accountId"},{value:B,field:"providerId"}],join:{user:!0}});if(q)if(q.user)return{user:q.user,linkedAccount:q,accounts:[q]};else{let L=await(await Q2($)).findOne({model:"user",where:[{value:U.toLowerCase(),field:"email"}]});if(L)return{user:L,linkedAccount:q,accounts:[q]};return null}else{let L=await(await Q2($)).findOne({model:"user",where:[{value:U.toLowerCase(),field:"email"}]});if(L)return{user:L,linkedAccount:null,accounts:await(await Q2($)).findMany({model:"account",where:[{value:L.id,field:"userId"}]})||[]};else return null}},findUserByEmail:async(U,Q)=>{let B=await(await Q2($)).findOne({model:"user",where:[{value:U.toLowerCase(),field:"email"}],join:{...Q?.includeAccounts?{account:!0}:{}}});if(!B)return null;let{account:q,...L}=B;return{user:L,accounts:q??[]}},findUserById:async(U)=>{if(!U)return null;return await(await Q2($)).findOne({model:"user",where:[{field:"id",value:U}]})},linkAccount:async(U)=>{return await W({createdAt:new Date,updatedAt:new Date,...U},"account",void 0)},updateUser:async(U,Q)=>{let B=await Z(Q,[{field:"id",value:U}],"user",void 0);return await H(B),B},updateUserByEmail:async(U,Q)=>{let B=await Z(Q,[{field:"email",value:U.toLowerCase()}],"user",void 0);return await H(B),B},updatePassword:async(U,Q)=>{await D({password:Q},[{field:"userId",value:U},{field:"providerId",value:"credential"}],"account",void 0)},findAccounts:async(U)=>{return await(await Q2($)).findMany({model:"account",where:[{field:"userId",value:U}]})},findAccount:async(U)=>{return await(await Q2($)).findOne({model:"account",where:[{field:"accountId",value:U}]})},findAccountByProviderId:async(U,Q)=>{return await(await Q2($)).findOne({model:"account",where:[{field:"accountId",value:U},{field:"providerId",value:Q}]})},findAccountByUserId:async(U)=>{return await(await Q2($)).findMany({model:"account",where:[{field:"userId",value:U}]})},updateAccount:async(U,Q)=>{return await Z(Q,[{field:"id",value:U}],"account",void 0)},createVerificationValue:async(U)=>{return await W({createdAt:new Date,updatedAt:new Date,...U},"verification",void 0)},findVerificationValue:async(U)=>{let Q=await(await Q2($)).findMany({model:"verification",where:[{field:"identifier",value:U}],sortBy:{field:"createdAt",direction:"desc"},limit:1});if(!J.verification?.disableCleanup)await z([{field:"expiresAt",value:new Date,operator:"lt"}],"verification",void 0);return Q[0]},deleteVerificationValue:async(U)=>{await G([{field:"id",value:U}],"verification",void 0)},deleteVerificationByIdentifier:async(U)=>{await G([{field:"identifier",value:U}],"verification",void 0)},updateVerificationValue:async(U,Q)=>{return await Z(Q,[{field:"id",value:U}],"verification",void 0)}}};u4();function Xj1({fields:$,isClientSide:F}){let A=Object.keys($).reduce((J,X)=>{let Y=$[X];if(!Y)return J;if(F&&Y.input===!1)return J;let W;if(Y.type==="json")W=mH?mH():d3();else if(Y.type==="string[]"||Y.type==="number[]")W=y7(Y.type==="string[]"?N1():f7());else if(Array.isArray(Y.type))W=d3();else W=y4[Y.type]();if(Y?.required===!1)W=W.optional();if(Y?.returned===!1)return J;return{...J,[X]:W}},{});return E0(A)}function UO($){let F=(0,ps.getAuthTables)($),A={};for(let J in F){let X=F[J],Y=X.fields,W={};if(Object.entries(Y).forEach(([Z,D])=>{if(W[D.fieldName||Z]=D,D.references){let G=F[D.references.model];if(G)W[D.fieldName||Z].references={...D.references,model:G.modelName,field:D.references.field}}}),A[X.modelName]){A[X.modelName].fields={...A[X.modelName].fields,...W};continue}A[X.modelName]={fields:W,order:X.order||1/0}}return A}GO();c6();uU();PL();var HC0={postgres:{string:["character varying","varchar","text","uuid"],number:["int4","integer","bigint","smallint","numeric","real","double precision"],boolean:["bool","boolean"],date:["timestamptz","timestamp","date"],json:["json","jsonb"]},mysql:{string:["varchar","text","uuid"],number:["integer","int","bigint","smallint","decimal","float","double"],boolean:["boolean","tinyint"],date:["timestamp","datetime","date"],json:["json"]},sqlite:{string:["TEXT"],number:["INTEGER","REAL"],boolean:["INTEGER","BOOLEAN"],date:["DATE","INTEGER"],json:["TEXT"]},mssql:{string:["varchar","nvarchar","uniqueidentifier"],number:["int","bigint","smallint","decimal","float","double"],boolean:["bit","smallint"],date:["datetime2","date","datetime"],json:["varchar","nvarchar"]}};function is($,F,A){function J(Y){return Y.toLowerCase().split("(")[0].trim()}if(F==="string[]"||F==="number[]")return $.toLowerCase().includes("json");let X=HC0[A];return(Array.isArray(F)?X.string.map((Y)=>Y.toLowerCase()):X[F].map((Y)=>Y.toLowerCase())).includes(J($))}async function UC0($){try{let F=await _0`SHOW search_path`.execute($);if(F.rows[0]?.search_path)return F.rows[0].search_path.split(",").map((A)=>A.trim()).map((A)=>A.replace(/^["']|["']$/g,"")).filter((A)=>!A.startsWith("$"))[0]||"public"}catch{}return"public"}async function QO($){let F=UO($),A=OJ($.logger),{kysely:J,databaseType:X}=await DO($);if(!X)A.warn("Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this."),X="sqlite";if(!J)A.error("Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter."),process.exit(1);let Y="public";if(X==="postgres"){Y=await UC0(J),A.debug(`PostgreSQL migration: Using schema '${Y}' (from search_path)`);try{if(!(await _0`
				SELECT schema_name 
				FROM information_schema.schemata 
				WHERE schema_name = ${Y}
			`.execute(J)).rows[0])A.warn(`Schema '${Y}' does not exist. Tables will be inspected from available schemas. Consider creating the schema first or checking your database configuration.`)}catch(N){A.debug(`Could not verify schema existence: ${N instanceof Error?N.message:String(N)}`)}}let W=await J.introspection.getTables(),Z=W;if(X==="postgres")try{let N=await _0`
				SELECT table_name 
				FROM information_schema.tables 
				WHERE table_schema = ${Y}
				AND table_type = 'BASE TABLE'
			`.execute(J),S=new Set(N.rows.map((C)=>C.table_name));Z=W.filter((C)=>C.schema===Y&&S.has(C.name)),A.debug(`Found ${Z.length} table(s) in schema '${Y}': ${Z.map((C)=>C.name).join(", ")||"(none)"}`)}catch(N){A.warn(`Could not filter tables by schema. Using all discovered tables. Error: ${N instanceof Error?N.message:String(N)}`)}let D=[],G=[];for(let[N,S]of Object.entries(F)){let C=Z.find((I)=>I.name===N);if(!C){let I=D.findIndex((b)=>b.table===N),T={table:N,fields:S.fields,order:S.order||1/0},j=D.findIndex((b)=>(b.order||1/0)>T.order);if(j===-1)if(I===-1)D.push(T);else D[I].fields={...D[I].fields,...S.fields};else D.splice(j,0,T);continue}let M={};for(let[I,T]of Object.entries(S.fields)){let j=C.columns.find((b)=>b.name===I);if(!j){M[I]=T;continue}if(is(j.dataType,T.type,X))continue;else A.warn(`Field ${I} in table ${N} has a different type in the database. Expected ${T.type} but got ${j.dataType}.`)}if(Object.keys(M).length>0)G.push({table:N,fields:M,order:S.order||1/0})}let z=[],H=$.advanced?.database?.generateId==="uuid",U=$.advanced?.database?.useNumberId||$.advanced?.database?.generateId==="serial";function Q(N,S){let C=N.type,M=X||"sqlite",I={string:{sqlite:"text",postgres:"text",mysql:N.unique?"varchar(255)":N.references?"varchar(36)":N.sortable?"varchar(255)":N.index?"varchar(255)":"text",mssql:N.unique||N.sortable?"varchar(255)":N.references?"varchar(36)":"varchar(8000)"},boolean:{sqlite:"integer",postgres:"boolean",mysql:"boolean",mssql:"smallint"},number:{sqlite:N.bigint?"bigint":"integer",postgres:N.bigint?"bigint":"integer",mysql:N.bigint?"bigint":"integer",mssql:N.bigint?"bigint":"integer"},date:{sqlite:"date",postgres:"timestamptz",mysql:"timestamp(3)",mssql:_0`datetime2(3)`},json:{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},id:{postgres:U?_0`integer GENERATED BY DEFAULT AS IDENTITY`:H?"uuid":"text",mysql:U?"integer":H?"varchar(36)":"varchar(36)",mssql:U?"integer":H?"varchar(36)":"varchar(36)",sqlite:U?"integer":"text"},foreignKeyId:{postgres:U?"integer":H?"uuid":"text",mysql:U?"integer":H?"varchar(36)":"varchar(36)",mssql:U?"integer":H?"varchar(36)":"varchar(36)",sqlite:U?"integer":"text"},"string[]":{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},"number[]":{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"}};if(S==="id"||N.references?.field==="id"){if(S==="id")return I.id[M];return I.foreignKeyId[M]}if(Array.isArray(C))return"text";if(!(C in I))throw Error(`Unsupported field type '${String(C)}' for field '${S}'. Allowed types are: string, number, boolean, date, string[], number[]. If you need to store structured data, store it as a JSON string (type: "string") or split it into primitive fields. See https://better-auth.com/docs/advanced/schema#additional-fields`);return I[C][M]}let B=ML({schema:l3($),usePlural:!1}),q=CL({schema:l3($),usePlural:!1});function L(N,S){try{return`${B(N)}.${q({model:N,field:S})}`}catch{return`${N}.${S}`}}if(G.length)for(let N of G)for(let[S,C]of Object.entries(N.fields)){let M=Q(C,S),I=J.schema.alterTable(N.table);if(C.index){let j=J.schema.alterTable(N.table).addIndex(`${N.table}_${S}_idx`);z.push(j)}let T=I.addColumn(S,M,(j)=>{if(j=C.required!==!1?j.notNull():j,C.references)j=j.references(L(C.references.model,C.references.field)).onDelete(C.references.onDelete||"cascade");if(C.unique)j=j.unique();if(C.type==="date"&&typeof C.defaultValue==="function"&&(X==="postgres"||X==="mysql"||X==="mssql"))if(X==="mysql")j=j.defaultTo(_0`CURRENT_TIMESTAMP(3)`);else j=j.defaultTo(_0`CURRENT_TIMESTAMP`);return j});z.push(T)}let E=[];if($.advanced?.database?.useNumberId)A.warn("`useNumberId` is deprecated. Please use `generateId` with `serial` instead.");if(D.length)for(let N of D){let S=Q({type:U?"number":"string"},"id"),C=J.schema.createTable(N.table).addColumn("id",S,(M)=>{if(U){if(X==="postgres")return M.primaryKey().notNull();else if(X==="sqlite")return M.primaryKey().notNull();else if(X==="mssql")return M.identity().primaryKey().notNull();return M.autoIncrement().primaryKey().notNull()}if(H){if(X==="postgres")return M.primaryKey().defaultTo(_0`pg_catalog.gen_random_uuid()`).notNull();return M.primaryKey().notNull()}return M.primaryKey().notNull()});for(let[M,I]of Object.entries(N.fields)){let T=Q(I,M);if(C=C.addColumn(M,T,(j)=>{if(j=I.required!==!1?j.notNull():j,I.references)j=j.references(L(I.references.model,I.references.field)).onDelete(I.references.onDelete||"cascade");if(I.unique)j=j.unique();if(I.type==="date"&&typeof I.defaultValue==="function"&&(X==="postgres"||X==="mysql"||X==="mssql"))if(X==="mysql")j=j.defaultTo(_0`CURRENT_TIMESTAMP(3)`);else j=j.defaultTo(_0`CURRENT_TIMESTAMP`);return j}),I.index){let j=J.schema.createIndex(`${N.table}_${M}_${I.unique?"uidx":"idx"}`).on(N.table).columns([M]);E.push(I.unique?j.unique():j)}}z.push(C)}if(E.length)for(let N of E)z.push(N);async function V(){for(let N of z)await N.execute()}async function R(){return z.map((N)=>N.compile().sql).join(`;

`)+";"}return{toBeCreated:D,toBeAdded:G,runMigrations:V,compileMigrations:R}}var ps=qR1({convertFromDB:()=>Jj1,convertToDB:()=>Aj1,createFieldAttribute:()=>Fj1,createInternalAdapter:()=>mU,getAdapter:()=>zO,getBaseAdapter:()=>cT,getMigrations:()=>QO,getSchema:()=>UO,getWithHooks:()=>HO,matchType:()=>is,mergeSchema:()=>FR1,parseAccountInput:()=>$R1,parseAccountOutput:()=>_T,parseAdditionalUserInput:()=>eP1,parseInputData:()=>iH,parseSessionInput:()=>kT,parseSessionOutput:()=>H3,parseUserInput:()=>nH,parseUserOutput:()=>f2,toZodSchema:()=>Xj1});LR1(ps,Kr);l6();c3();u4();var KO=()=>b0("/get-session",{method:"GET",operationId:"getSession",query:YR1,requireHeaders:!0,metadata:{openapi:{operationId:"getSession",description:"Get the current session",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",nullable:!0,properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}},required:["session","user"]}}}}}}}},async($)=>{try{let F=await $.getSignedCookie($.context.authCookies.sessionToken.name,$.context.secret);if(!F)return null;let A=gT($,$.context.authCookies.sessionData.name),J=null;if(A){let z=$.context.options.session?.cookieCache?.strategy||"compact";if(z==="jwe"){let H=await wH(A,$.context.secret,"better-auth-session");if(H&&H.session&&H.user)J={session:{session:H.session,user:H.user,updatedAt:H.updatedAt,version:H.version},expiresAt:H.exp?H.exp*1000:Date.now()};else return p3($,$.context.authCookies.sessionData),$.json(null)}else if(z==="jwt"){let H=await zR(A,$.context.secret);if(H&&H.session&&H.user)J={session:{session:H.session,user:H.user,updatedAt:H.updatedAt,version:H.version},expiresAt:H.exp?H.exp*1000:Date.now()};else return p3($,$.context.authCookies.sessionData),$.json(null)}else{let H=j2(gr.decode(g$.decode(A)));if(H)if(await vT("SHA-256","base64urlnopad").verify($.context.secret,JSON.stringify({...H.session,expiresAt:H.expiresAt}),H.signature))J=H;else return p3($,$.context.authCookies.sessionData),$.json(null)}}let X=await $.getSignedCookie($.context.authCookies.dontRememberToken.name,$.context.secret);if(J?.session&&$.context.options.session?.cookieCache?.enabled&&!$.query?.disableCookieCache){let z=J.session,H=$.context.options.session?.cookieCache?.version,U="1";if(H){if(typeof H==="string")U=H;else if(typeof H==="function"){let Q=H(z.session,z.user);U=Q instanceof Promise?await Q:Q}}if((z.version||"1")!==U)p3($,$.context.authCookies.sessionData);else{let Q=new Date(z.session.expiresAt);if(J.expiresAt<Date.now()||Q<new Date)p3($,$.context.authCookies.sessionData);else{let B=$.context.sessionConfig.cookieRefreshCache;if(B===!1){$.context.session=z;let E=H3($.context.options,{...z.session,expiresAt:new Date(z.session.expiresAt),createdAt:new Date(z.session.createdAt),updatedAt:new Date(z.session.updatedAt)}),V=f2($.context.options,{...z.user,createdAt:new Date(z.user.createdAt),updatedAt:new Date(z.user.updatedAt)});return $.json({session:E,user:V})}if(J.expiresAt-Date.now()<B.updateAge*1000){let E=WA($.context.options.session?.cookieCache?.maxAge||300,"sec"),V={session:{...z.session,expiresAt:E},user:z.user,updatedAt:Date.now()};await yT($,V,!1);let R=H3($.context.options,{...V.session,expiresAt:new Date(V.session.expiresAt),createdAt:new Date(V.session.createdAt),updatedAt:new Date(V.session.updatedAt)}),N=f2($.context.options,{...V.user,createdAt:new Date(V.user.createdAt),updatedAt:new Date(V.user.updatedAt)});return $.context.session={session:R,user:N},$.json({session:R,user:N})}let q=H3($.context.options,{...z.session,expiresAt:new Date(z.session.expiresAt),createdAt:new Date(z.session.createdAt),updatedAt:new Date(z.session.updatedAt)}),L=f2($.context.options,{...z.user,createdAt:new Date(z.user.createdAt),updatedAt:new Date(z.user.updatedAt)});return $.context.session={session:q,user:L},$.json({session:q,user:L})}}}let Y=await $.context.internalAdapter.findSession(F);if($.context.session=Y,!Y||Y.session.expiresAt<new Date){if(bY($),Y)await $.context.internalAdapter.deleteSession(Y.session.token);return $.json(null)}if(X||$.query?.disableRefresh){let z=H3($.context.options,Y.session),H=f2($.context.options,Y.user);return $.json({session:z,user:H})}let W=$.context.sessionConfig.expiresIn,Z=$.context.sessionConfig.updateAge;if(Y.session.expiresAt.valueOf()-W*1000+Z*1000<=Date.now()&&(!$.query?.disableRefresh||!$.context.options.session?.disableSessionRefresh)){let z=await $.context.internalAdapter.updateSession(Y.session.token,{expiresAt:WA($.context.sessionConfig.expiresIn,"sec"),updatedAt:new Date});if(!z)return bY($),$.json(null,{status:401});let H=(z.expiresAt.valueOf()-Date.now())/1000;await O9($,{session:z,user:Y.user},!1,{maxAge:H});let U=H3($.context.options,z),Q=f2($.context.options,Y.user);return $.json({session:U,user:Q})}await yT($,Y,!!X);let D=H3($.context.options,Y.session),G=f2($.context.options,Y.user);return $.json({session:D,user:G})}catch(F){throw $.context.logger.error("INTERNAL_SERVER_ERROR",F),new Y1("INTERNAL_SERVER_ERROR",{message:c1.FAILED_TO_GET_SESSION})}}),w3=async($,F)=>{if($.context.session)return $.context.session;let A=await KO()({...$,asResponse:!1,headers:$.headers,returnHeaders:!1,returnStatus:!1,query:{...F,...$.query}}).catch((J)=>{return null});return $.context.session=A,A},aJ=DA(async($)=>{let F=await w3($);if(!F?.session)throw new Y1("UNAUTHORIZED");return{session:F}}),d5=DA(async($)=>{let F=await w3($,{disableCookieCache:!0});if(!F?.session)throw new Y1("UNAUTHORIZED");return{session:F}}),Yj1=DA(async($)=>{let F=await w3($);if(!F?.session&&($.request||$.headers))throw new Y1("UNAUTHORIZED");return{session:F}}),BO=DA(async($)=>{let F=await w3($);if(!F?.session)throw new Y1("UNAUTHORIZED");if($.context.sessionConfig.freshAge===0)return{session:F};let A=$.context.sessionConfig.freshAge,J=new Date(F.session.updatedAt||F.session.createdAt).getTime();if(!(Date.now()-J<A*1000))throw new Y1("FORBIDDEN",{message:"Session is not fresh"});return{session:F}}),ns=()=>b0("/list-sessions",{method:"GET",operationId:"listUserSessions",use:[aJ],requireHeaders:!0,metadata:{openapi:{operationId:"listUserSessions",description:"List all active sessions for the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}},async($)=>{try{let F=(await $.context.internalAdapter.listSessions($.context.session.user.id)).filter((A)=>{return A.expiresAt>new Date});return $.json(F.map((A)=>H3($.context.options,A)))}catch(F){throw $.context.logger.error(F),$.error("INTERNAL_SERVER_ERROR")}}),as=b0("/revoke-session",{method:"POST",body:E0({token:N1().meta({description:"The token to revoke"})}),use:[d5],requireHeaders:!0,metadata:{openapi:{description:"Revoke a single session",requestBody:{content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"The token to revoke"}},required:["token"]}}}},responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the session was revoked successfully"}},required:["status"]}}}}}}}},async($)=>{let F=$.body.token;if((await $.context.internalAdapter.findSession(F))?.session.userId===$.context.session.user.id)try{await $.context.internalAdapter.deleteSession(F)}catch(A){throw $.context.logger.error(A&&typeof A==="object"&&"name"in A?A.name:"",A),new Y1("INTERNAL_SERVER_ERROR")}return $.json({status:!0})}),ts=b0("/revoke-sessions",{method:"POST",use:[d5],requireHeaders:!0,metadata:{openapi:{description:"Revoke all sessions for the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all sessions were revoked successfully"}},required:["status"]}}}}}}}},async($)=>{try{await $.context.internalAdapter.deleteSessions($.context.session.user.id)}catch(F){throw $.context.logger.error(F&&typeof F==="object"&&"name"in F?F.name:"",F),new Y1("INTERNAL_SERVER_ERROR")}return $.json({status:!0})}),ss=b0("/revoke-other-sessions",{method:"POST",requireHeaders:!0,use:[d5],metadata:{openapi:{description:"Revoke all other sessions for the user except the current one",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all other sessions were revoked successfully"}},required:["status"]}}}}}}}},async($)=>{let F=$.context.session;if(!F.user)throw new Y1("UNAUTHORIZED");let A=(await $.context.internalAdapter.listSessions(F.user.id)).filter((J)=>{return J.expiresAt>new Date}).filter((J)=>J.token!==$.context.session.session.token);return await Promise.all(A.map((J)=>$.context.internalAdapter.deleteSession(J.token))),$.json({status:!0})});function wO($,F){if(!$)return $;if(F.options.account?.encryptOAuthTokens)return IT({key:F.secret,data:$});return $}function z9($,F){if(F.options.account?.encryptOAuthTokens&&$)return RT({key:F.secret,data:$});return $}l6();u4();function BE($){let F=(A)=>{return new Date(new Date().getTime()+A*1000)};return{tokenType:$.token_type,accessToken:$.access_token,refreshToken:$.refresh_token,accessTokenExpiresAt:$.expires_in?F($.expires_in):void 0,refreshTokenExpiresAt:$.refresh_token_expires_in?F($.refresh_token_expires_in):void 0,scopes:$?.scope?typeof $.scope==="string"?$.scope.split(" "):$.scope:[],idToken:$.id_token,raw:$}}async function wE($){let F=new TextEncoder().encode($),A=await crypto.subtle.digest("SHA-256",F);return g$.encode(new Uint8Array(A),{padding:!1})}async function F0({id:$,options:F,authorizationEndpoint:A,state:J,codeVerifier:X,scopes:Y,claims:W,redirectURI:Z,duration:D,prompt:G,accessType:z,responseType:H,display:U,loginHint:Q,hd:B,responseMode:q,additionalParams:L,scopeJoiner:E}){let V=new URL(F.authorizationEndpoint||A);V.searchParams.set("response_type",H||"code");let R=Array.isArray(F.clientId)?F.clientId[0]:F.clientId;if(V.searchParams.set("client_id",R),V.searchParams.set("state",J),Y)V.searchParams.set("scope",Y.join(E||" "));if(V.searchParams.set("redirect_uri",F.redirectURI||Z),D&&V.searchParams.set("duration",D),U&&V.searchParams.set("display",U),Q&&V.searchParams.set("login_hint",Q),G&&V.searchParams.set("prompt",G),B&&V.searchParams.set("hd",B),z&&V.searchParams.set("access_type",z),q&&V.searchParams.set("response_mode",q),X){let N=await wE(X);V.searchParams.set("code_challenge_method","S256"),V.searchParams.set("code_challenge",N)}if(W){let N=W.reduce((S,C)=>{return S[C]=null,S},{});V.searchParams.set("claims",JSON.stringify({id_token:{email:null,email_verified:null,...N}}))}if(L)Object.entries(L).forEach(([N,S])=>{V.searchParams.set(N,S)});return V}var{defineProperty:QC0,defineProperties:KC0,getOwnPropertyDescriptors:BC0,getOwnPropertySymbols:Wj1}=Object,wC0=Object.prototype.hasOwnProperty,qC0=Object.prototype.propertyIsEnumerable,Zj1=($,F,A)=>(F in $)?QC0($,F,{enumerable:!0,configurable:!0,writable:!0,value:A}):$[F]=A,fD=($,F)=>{for(var A in F||(F={}))if(wC0.call(F,A))Zj1($,A,F[A]);if(Wj1){for(var A of Wj1(F))if(qC0.call(F,A))Zj1($,A,F[A])}return $},vD=($,F)=>KC0($,BC0(F)),LC0=class extends Error{constructor($,F,A){super(F||$.toString(),{cause:A});this.status=$,this.statusText=F,this.error=A,Error.captureStackTrace(this,this.constructor)}},EC0=async($,F)=>{var A,J,X,Y,W,Z;let D=F||{},G={onRequest:[F==null?void 0:F.onRequest],onResponse:[F==null?void 0:F.onResponse],onSuccess:[F==null?void 0:F.onSuccess],onError:[F==null?void 0:F.onError],onRetry:[F==null?void 0:F.onRetry]};if(!F||!(F==null?void 0:F.plugins))return{url:$,options:D,hooks:G};for(let z of(F==null?void 0:F.plugins)||[]){if(z.init){let H=await((A=z.init)==null?void 0:A.call(z,$.toString(),F));D=H.options||D,$=H.url}G.onRequest.push((J=z.hooks)==null?void 0:J.onRequest),G.onResponse.push((X=z.hooks)==null?void 0:X.onResponse),G.onSuccess.push((Y=z.hooks)==null?void 0:Y.onSuccess),G.onError.push((W=z.hooks)==null?void 0:W.onError),G.onRetry.push((Z=z.hooks)==null?void 0:Z.onRetry)}return{url:$,options:D,hooks:G}},Dj1=class{constructor($){this.options=$}shouldAttemptRetry($,F){if(this.options.shouldRetry)return Promise.resolve($<this.options.attempts&&this.options.shouldRetry(F));return Promise.resolve($<this.options.attempts)}getDelay(){return this.options.delay}},VC0=class{constructor($){this.options=$}shouldAttemptRetry($,F){if(this.options.shouldRetry)return Promise.resolve($<this.options.attempts&&this.options.shouldRetry(F));return Promise.resolve($<this.options.attempts)}getDelay($){return Math.min(this.options.maxDelay,this.options.baseDelay*2**$)}};function NC0($){if(typeof $==="number")return new Dj1({type:"linear",attempts:$,delay:1000});switch($.type){case"linear":return new Dj1($);case"exponential":return new VC0($);default:throw Error("Invalid retry strategy")}}var CC0=async($)=>{let F={},A=async(J)=>typeof J==="function"?await J():J;if($==null?void 0:$.auth){if($.auth.type==="Bearer"){let J=await A($.auth.token);if(!J)return F;F.authorization=`Bearer ${J}`}else if($.auth.type==="Basic"){let[J,X]=await Promise.all([A($.auth.username),A($.auth.password)]);if(!J||!X)return F;F.authorization=`Basic ${btoa(`${J}:${X}`)}`}else if($.auth.type==="Custom"){let[J,X]=await Promise.all([A($.auth.prefix),A($.auth.value)]);if(!X)return F;F.authorization=`${J!=null?J:""} ${X}`}}return F},MC0=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function PC0($){let F=$.headers.get("content-type"),A=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!F)return"json";let J=F.split(";").shift()||"";if(MC0.test(J))return"json";if(A.has(J)||J.startsWith("text/"))return"text";return"blob"}function RC0($){try{return JSON.parse($),!0}catch(F){return!1}}function os($){if($===void 0)return!1;let F=typeof $;if(F==="string"||F==="number"||F==="boolean"||F===null)return!0;if(F!=="object")return!1;if(Array.isArray($))return!0;if($.buffer)return!1;return $.constructor&&$.constructor.name==="Object"||typeof $.toJSON==="function"}function Gj1($){try{return JSON.parse($)}catch(F){return $}}function zj1($){return typeof $==="function"}function IC0($){if($==null?void 0:$.customFetchImpl)return $.customFetchImpl;if(typeof globalThis<"u"&&zj1(globalThis.fetch))return globalThis.fetch;if(typeof window<"u"&&zj1(window.fetch))return window.fetch;throw Error("No fetch implementation found")}async function TC0($){let F=new Headers($==null?void 0:$.headers),A=await CC0($);for(let[J,X]of Object.entries(A||{}))F.set(J,X);if(!F.has("content-type")){let J=jC0($==null?void 0:$.body);if(J)F.set("content-type",J)}return F}function jC0($){if(os($))return"application/json";return null}function OC0($){if(!($==null?void 0:$.body))return null;let F=new Headers($==null?void 0:$.headers);if(os($.body)&&!F.has("content-type")){for(let[A,J]of Object.entries($==null?void 0:$.body))if(J instanceof Date)$.body[A]=J.toISOString();return JSON.stringify($.body)}if(F.has("content-type")&&F.get("content-type")==="application/x-www-form-urlencoded"){if(os($.body))return new URLSearchParams($.body).toString();return $.body}return $.body}function SC0($,F){var A;if(F==null?void 0:F.method)return F.method.toUpperCase();if($.startsWith("@")){let J=(A=$.split("@")[1])==null?void 0:A.split("/")[0];if(!Hj1.includes(J))return(F==null?void 0:F.body)?"POST":"GET";return J.toUpperCase()}return(F==null?void 0:F.body)?"POST":"GET"}function _C0($,F){let A;if(!($==null?void 0:$.signal)&&($==null?void 0:$.timeout))A=setTimeout(()=>F==null?void 0:F.abort(),$==null?void 0:$.timeout);return{abortTimeout:A,clearTimeout:()=>{if(A)clearTimeout(A)}}}var kC0=class $ extends Error{constructor(F,A){super(A||JSON.stringify(F,null,2));this.issues=F,Object.setPrototypeOf(this,$.prototype)}};async function bC0($,F){let A=await $["~standard"].validate(F);if(A.issues)throw new kC0(A.issues);return A.value}var Hj1=["get","post","put","patch","delete"];function xC0($,F){let{baseURL:A,params:J,query:X}=F||{query:{},params:{},baseURL:""},Y=$.startsWith("http")?$.split("/").slice(0,3).join("/"):A||"";if($.startsWith("@")){let H=$.toString().split("@")[1].split("/")[0];if(Hj1.includes(H))$=$.replace(`@${H}/`,"/")}if(!Y.endsWith("/"))Y+="/";let[W,Z]=$.replace(Y,"").split("?"),D=new URLSearchParams(Z);for(let[H,U]of Object.entries(X||{})){if(U==null)continue;let Q;if(typeof U==="string")Q=U;else if(Array.isArray(U)){for(let B of U)D.append(H,B);continue}else Q=JSON.stringify(U);D.set(H,Q)}if(J)if(Array.isArray(J)){let H=W.split("/").filter((U)=>U.startsWith(":"));for(let[U,Q]of H.entries()){let B=J[U];W=W.replace(Q,B)}}else for(let[H,U]of Object.entries(J))W=W.replace(`:${H}`,String(U));if(W=W.split("/").map(encodeURIComponent).join("/"),W.startsWith("/"))W=W.slice(1);let G=D.toString();if(G=G.length>0?`?${G}`.replace(/\+/g,"%20"):"",!Y.startsWith("http"))return`${Y}${W}${G}`;return new URL(`${W}${G}`,Y)}var v1=async($,F)=>{var A,J,X,Y,W,Z,D,G;let{hooks:z,url:H,options:U}=await EC0($,F),Q=IC0(U),B=new AbortController,q=(A=U.signal)!=null?A:B.signal,L=xC0(H,U),E=OC0(U),V=await TC0(U),R=SC0(H,U),N=vD(fD({},U),{url:L,headers:V,body:E,method:R,signal:q});for(let f of z.onRequest)if(f){let d=await f(N);if(typeof d==="object"&&d!==null)N=d}if("pipeTo"in N&&typeof N.pipeTo==="function"||typeof((J=F==null?void 0:F.body)==null?void 0:J.pipe)==="function"){if(!("duplex"in N))N.duplex="half"}let{clearTimeout:S}=_C0(U,B),C=await Q(N.url,N);S();let M={response:C,request:N};for(let f of z.onResponse)if(f){let d=await f(vD(fD({},M),{response:((X=F==null?void 0:F.hookOptions)==null?void 0:X.cloneResponse)?C.clone():C}));if(d instanceof Response)C=d;else if(typeof d==="object"&&d!==null)C=d.response}if(C.ok){if(N.method==="HEAD")return{data:"",error:null};let d=PC0(C),s={data:null,response:C,request:N};if(d==="json"||d==="text"){let n=await C.text(),L1=(Y=N.jsonParser)!=null?Y:Gj1;s.data=await L1(n)}else s.data=await C[d]();if(N==null?void 0:N.output){if(N.output&&!N.disableValidation)s.data=await bC0(N.output,s.data)}for(let n of z.onSuccess)if(n)await n(vD(fD({},s),{response:((W=F==null?void 0:F.hookOptions)==null?void 0:W.cloneResponse)?C.clone():C}));if(F==null?void 0:F.throw)return s.data;return{data:s.data,error:null}}let I=(Z=F==null?void 0:F.jsonParser)!=null?Z:Gj1,T=await C.text(),j=RC0(T),b=j?await I(T):null,g={response:C,responseText:T,request:N,error:vD(fD({},b),{status:C.status,statusText:C.statusText})};for(let f of z.onError)if(f)await f(vD(fD({},g),{response:((D=F==null?void 0:F.hookOptions)==null?void 0:D.cloneResponse)?C.clone():C}));if(F==null?void 0:F.retry){let f=NC0(F.retry),d=(G=F.retryAttempt)!=null?G:0;if(await f.shouldAttemptRetry(d,C)){for(let n of z.onRetry)if(n)await n(M);let s=f.getDelay(d);return await new Promise((n)=>setTimeout(n,s)),await v1($,vD(fD({},F),{retryAttempt:d+1}))}}if(F==null?void 0:F.throw)throw new LC0(C.status,C.statusText,j?b:T);return{data:null,error:vD(fD({},b),{status:C.status,statusText:C.statusText})}};function Uj1({refreshToken:$,options:F,authentication:A,extraParams:J,resource:X}){let Y=new URLSearchParams,W={"content-type":"application/x-www-form-urlencoded",accept:"application/json"};if(Y.set("grant_type","refresh_token"),Y.set("refresh_token",$),A==="basic"){let Z=Array.isArray(F.clientId)?F.clientId[0]:F.clientId;if(Z)W.authorization="Basic "+j9.encode(`${Z}:${F.clientSecret??""}`);else W.authorization="Basic "+j9.encode(`:${F.clientSecret??""}`)}else{let Z=Array.isArray(F.clientId)?F.clientId[0]:F.clientId;if(Y.set("client_id",Z),F.clientSecret)Y.set("client_secret",F.clientSecret)}if(X)if(typeof X==="string")Y.append("resource",X);else for(let Z of X)Y.append("resource",Z);if(J)for(let[Z,D]of Object.entries(J))Y.set(Z,D);return{body:Y,headers:W}}async function r1({refreshToken:$,options:F,tokenEndpoint:A,authentication:J,extraParams:X}){let{body:Y,headers:W}=Uj1({refreshToken:$,options:F,authentication:J,extraParams:X}),{data:Z,error:D}=await v1(A,{method:"POST",body:Y,headers:W});if(D)throw D;let G={accessToken:Z.access_token,refreshToken:Z.refresh_token,tokenType:Z.token_type,scopes:Z.scope?.split(" "),idToken:Z.id_token};if(Z.expires_in){let z=new Date;G.accessTokenExpiresAt=new Date(z.getTime()+Z.expires_in*1000)}return G}z3();c6();function Qj1({code:$,codeVerifier:F,redirectURI:A,options:J,authentication:X,deviceId:Y,headers:W,additionalParams:Z={},resource:D}){let G=new URLSearchParams,z={"content-type":"application/x-www-form-urlencoded",accept:"application/json",...W};if(G.set("grant_type","authorization_code"),G.set("code",$),F&&G.set("code_verifier",F),J.clientKey&&G.set("client_key",J.clientKey),Y&&G.set("device_id",Y),G.set("redirect_uri",J.redirectURI||A),D)if(typeof D==="string")G.append("resource",D);else for(let H of D)G.append("resource",H);if(X==="basic"){let H=Array.isArray(J.clientId)?J.clientId[0]:J.clientId;z.authorization=`Basic ${j9.encode(`${H}:${J.clientSecret??""}`)}`}else{let H=Array.isArray(J.clientId)?J.clientId[0]:J.clientId;if(G.set("client_id",H),J.clientSecret)G.set("client_secret",J.clientSecret)}for(let[H,U]of Object.entries(Z))if(!G.has(H))G.append(H,U);return{body:G,headers:z}}async function a1({code:$,codeVerifier:F,redirectURI:A,options:J,tokenEndpoint:X,authentication:Y,deviceId:W,headers:Z,additionalParams:D={},resource:G}){let{body:z,headers:H}=Qj1({code:$,codeVerifier:F,redirectURI:A,options:J,authentication:Y,deviceId:W,headers:Z,additionalParams:D,resource:G}),{data:U,error:Q}=await v1(X,{method:"POST",body:z,headers:H});if(Q)throw Q;return BE(U)}var Kj1=($)=>{return{id:"apple",name:"Apple",async createAuthorizationURL({state:A,scopes:J,redirectURI:X}){let Y=$.disableDefaultScope?[]:["email","name"];if($.scope)Y.push(...$.scope);if(J)Y.push(...J);return await F0({id:"apple",options:$,authorizationEndpoint:"https://appleid.apple.com/auth/authorize",scopes:Y,state:A,redirectURI:X,responseMode:"form_post",responseType:"code id_token"})},validateAuthorizationCode:async({code:A,codeVerifier:J,redirectURI:X})=>{return a1({code:A,codeVerifier:J,redirectURI:X,options:$,tokenEndpoint:"https://appleid.apple.com/auth/token"})},async verifyIdToken(A,J){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(A,J);let{kid:X,alg:Y}=lZ(A);if(!X||!Y)return!1;let{payload:W}=await k7(A,await Bj1(X),{algorithms:[Y],issuer:"https://appleid.apple.com",audience:$.audience&&$.audience.length?$.audience:$.appBundleIdentifier?$.appBundleIdentifier:$.clientId,maxTokenAge:"1h"});if(["email_verified","is_private_email"].forEach((Z)=>{if(W[Z]!==void 0)W[Z]=Boolean(W[Z])}),J&&W.nonce!==J)return!1;return!!W},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(A)=>{return r1({refreshToken:A,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://appleid.apple.com/auth/token"})},async getUserInfo(A){if($.getUserInfo)return $.getUserInfo(A);if(!A.idToken)return null;let J=W9(A.idToken);if(!J)return null;let X=A.user?`${A.user.name?.firstName} ${A.user.name?.lastName}`:J.name||J.email,Y=typeof J.email_verified==="boolean"?J.email_verified:J.email_verified==="true",W={...J,name:X},Z=await $.mapProfileToUser?.(W);return{user:{id:J.sub,name:W.name,emailVerified:Y,email:J.email,...Z},data:W}},options:$}},Bj1=async($)=>{let{data:F}=await v1("https://appleid.apple.com/auth/keys");if(!F?.keys)throw new Y1("BAD_REQUEST",{message:"Keys not found"});let A=F.keys.find((J)=>J.kid===$);if(!A)throw Error(`JWK with kid ${$} not found`);return await j$(A,A.alg)};z3();c6();l6();var wj1=($)=>{return{id:"atlassian",name:"Atlassian",async createAuthorizationURL({state:F,scopes:A,codeVerifier:J,redirectURI:X}){if(!$.clientId||!$.clientSecret)throw $0.error("Client Id and Secret are required for Atlassian"),new o1("CLIENT_ID_AND_SECRET_REQUIRED");if(!J)throw new o1("codeVerifier is required for Atlassian");let Y=$.disableDefaultScope?[]:["read:jira-user","offline_access"];if($.scope)Y.push(...$.scope);if(A)Y.push(...A);return F0({id:"atlassian",options:$,authorizationEndpoint:"https://auth.atlassian.com/authorize",scopes:Y,state:F,codeVerifier:J,redirectURI:X,additionalParams:{audience:"api.atlassian.com"},prompt:$.prompt})},validateAuthorizationCode:async({code:F,codeVerifier:A,redirectURI:J})=>{return a1({code:F,codeVerifier:A,redirectURI:J,options:$,tokenEndpoint:"https://auth.atlassian.com/oauth/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientId:$.clientId,clientSecret:$.clientSecret},tokenEndpoint:"https://auth.atlassian.com/oauth/token"})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);if(!F.accessToken)return null;try{let{data:A}=await v1("https://api.atlassian.com/me",{headers:{Authorization:`Bearer ${F.accessToken}`}});if(!A)return null;let J=await $.mapProfileToUser?.(A);return{user:{id:A.account_id,name:A.name,email:A.email,image:A.picture,emailVerified:!1,...J},data:A}}catch(A){return $0.error("Failed to fetch user info from Figma:",A),null}},options:$}};z3();c6();l6();var qj1=($)=>{if(!$.domain||!$.region||!$.userPoolId)throw $0.error("Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options."),new o1("DOMAIN_AND_REGION_REQUIRED");let F=$.domain.replace(/^https?:\/\//,""),A=`https://${F}/oauth2/authorize`,J=`https://${F}/oauth2/token`,X=`https://${F}/oauth2/userinfo`;return{id:"cognito",name:"Cognito",async createAuthorizationURL({state:Y,scopes:W,codeVerifier:Z,redirectURI:D}){if(!$.clientId)throw $0.error("ClientId is required for Amazon Cognito. Make sure to provide them in the options."),new o1("CLIENT_ID_AND_SECRET_REQUIRED");if($.requireClientSecret&&!$.clientSecret)throw $0.error("Client Secret is required when requireClientSecret is true. Make sure to provide it in the options."),new o1("CLIENT_SECRET_REQUIRED");let G=$.disableDefaultScope?[]:["openid","profile","email"];if($.scope)G.push(...$.scope);if(W)G.push(...W);let z=await F0({id:"cognito",options:{...$},authorizationEndpoint:A,scopes:G,state:Y,codeVerifier:Z,redirectURI:D,prompt:$.prompt}),H=z.searchParams.get("scope");if(H){z.searchParams.delete("scope");let U=encodeURIComponent(H),Q=z.toString(),B=Q.includes("?")?"&":"?";return new URL(`${Q}${B}scope=${U}`)}return z},validateAuthorizationCode:async({code:Y,codeVerifier:W,redirectURI:Z})=>{return a1({code:Y,codeVerifier:W,redirectURI:Z,options:$,tokenEndpoint:J})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Y)=>{return r1({refreshToken:Y,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:J})},async verifyIdToken(Y,W){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(Y,W);try{let{kid:Z,alg:D}=lZ(Y);if(!Z||!D)return!1;let G=await Lj1(Z,$.region,$.userPoolId),z=`https://cognito-idp.${$.region}.amazonaws.com/${$.userPoolId}`,{payload:H}=await k7(Y,G,{algorithms:[D],issuer:z,audience:$.clientId,maxTokenAge:"1h"});if(W&&H.nonce!==W)return!1;return!0}catch(Z){return $0.error("Failed to verify ID token:",Z),!1}},async getUserInfo(Y){if($.getUserInfo)return $.getUserInfo(Y);if(Y.idToken)try{let W=W9(Y.idToken);if(!W)return null;let Z=W.name||W.given_name||W.username||W.email,D={...W,name:Z},G=await $.mapProfileToUser?.(D);return{user:{id:W.sub,name:D.name,email:W.email,image:W.picture,emailVerified:W.email_verified,...G},data:D}}catch(W){$0.error("Failed to decode ID token:",W)}if(Y.accessToken)try{let{data:W}=await v1(X,{headers:{Authorization:`Bearer ${Y.accessToken}`}});if(W){let Z=await $.mapProfileToUser?.(W);return{user:{id:W.sub,name:W.name||W.given_name||W.username,email:W.email,image:W.picture,emailVerified:W.email_verified,...Z},data:W}}}catch(W){$0.error("Failed to fetch user info from Cognito:",W)}return null},options:$}},Lj1=async($,F,A)=>{let J=`https://cognito-idp.${F}.amazonaws.com/${A}/.well-known/jwks.json`;try{let{data:X}=await v1(J);if(!X?.keys)throw new Y1("BAD_REQUEST",{message:"Keys not found"});let Y=X.keys.find((W)=>W.kid===$);if(!Y)throw Error(`JWK with kid ${$} not found`);return await j$(Y,Y.alg)}catch(X){throw $0.error("Failed to fetch Cognito public key:",X),X}};var Ej1=($)=>{return{id:"discord",name:"Discord",createAuthorizationURL({state:F,scopes:A,redirectURI:J}){let X=$.disableDefaultScope?[]:["identify","email"];if(A)X.push(...A);if($.scope)X.push(...$.scope);let Y=X.includes("bot")&&$.permissions!==void 0?`&permissions=${$.permissions}`:"";return new URL(`https://discord.com/api/oauth2/authorize?scope=${X.join("+")}&response_type=code&client_id=${$.clientId}&redirect_uri=${encodeURIComponent($.redirectURI||J)}&state=${F}&prompt=${$.prompt||"none"}${Y}`)},validateAuthorizationCode:async({code:F,redirectURI:A})=>{return a1({code:F,redirectURI:A,options:$,tokenEndpoint:"https://discord.com/api/oauth2/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://discord.com/api/oauth2/token"})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);let{data:A,error:J}=await v1("https://discord.com/api/users/@me",{headers:{authorization:`Bearer ${F.accessToken}`}});if(J)return null;if(A.avatar===null)A.image_url=`https://cdn.discordapp.com/embed/avatars/${A.discriminator==="0"?Number(BigInt(A.id)>>BigInt(22))%6:parseInt(A.discriminator)%5}.png`;else{let Y=A.avatar.startsWith("a_")?"gif":"png";A.image_url=`https://cdn.discordapp.com/avatars/${A.id}/${A.avatar}.${Y}`}let X=await $.mapProfileToUser?.(A);return{user:{id:A.id,name:A.global_name||A.username||"",email:A.email,emailVerified:A.verified,image:A.image_url,...X},data:A}},options:$}};var Vj1=($)=>{return{id:"dropbox",name:"Dropbox",createAuthorizationURL:async({state:A,scopes:J,codeVerifier:X,redirectURI:Y})=>{let W=$.disableDefaultScope?[]:["account_info.read"];if($.scope)W.push(...$.scope);if(J)W.push(...J);let Z={};if($.accessType)Z.token_access_type=$.accessType;return await F0({id:"dropbox",options:$,authorizationEndpoint:"https://www.dropbox.com/oauth2/authorize",scopes:W,state:A,redirectURI:Y,codeVerifier:X,additionalParams:Z})},validateAuthorizationCode:async({code:A,codeVerifier:J,redirectURI:X})=>{return await a1({code:A,codeVerifier:J,redirectURI:X,options:$,tokenEndpoint:"https://api.dropboxapi.com/oauth2/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(A)=>{return r1({refreshToken:A,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://api.dropbox.com/oauth2/token"})},async getUserInfo(A){if($.getUserInfo)return $.getUserInfo(A);let{data:J,error:X}=await v1("https://api.dropboxapi.com/2/users/get_current_account",{method:"POST",headers:{Authorization:`Bearer ${A.accessToken}`}});if(X)return null;let Y=await $.mapProfileToUser?.(J);return{user:{id:J.account_id,name:J.name?.display_name,email:J.email,emailVerified:J.email_verified||!1,image:J.profile_photo_url,...Y},data:J}},options:$}};var Nj1=($)=>{return{id:"facebook",name:"Facebook",async createAuthorizationURL({state:F,scopes:A,redirectURI:J,loginHint:X}){let Y=$.disableDefaultScope?[]:["email","public_profile"];if($.scope)Y.push(...$.scope);if(A)Y.push(...A);return await F0({id:"facebook",options:$,authorizationEndpoint:"https://www.facebook.com/v21.0/dialog/oauth",scopes:Y,state:F,redirectURI:J,loginHint:X,additionalParams:$.configId?{config_id:$.configId}:{}})},validateAuthorizationCode:async({code:F,redirectURI:A})=>{return a1({code:F,redirectURI:A,options:$,tokenEndpoint:"https://graph.facebook.com/oauth/access_token"})},async verifyIdToken(F,A){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(F,A);if(F.split(".").length===3)try{let{payload:J}=await k7(F,im(new URL("https://limited.facebook.com/.well-known/oauth/openid/jwks/")),{algorithms:["RS256"],audience:$.clientId,issuer:"https://www.facebook.com"});if(A&&J.nonce!==A)return!1;return!!J}catch{return!1}return!0},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://graph.facebook.com/v18.0/oauth/access_token"})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);if(F.idToken&&F.idToken.split(".").length===3){let Y=W9(F.idToken),W={id:Y.sub,name:Y.name,email:Y.email,picture:{data:{url:Y.picture,height:100,width:100,is_silhouette:!1}}},Z=await $.mapProfileToUser?.({...W,email_verified:!1});return{user:{...W,emailVerified:!1,...Z},data:Y}}let{data:A,error:J}=await v1("https://graph.facebook.com/me?fields="+["id","name","email","picture",...$?.fields||[]].join(","),{auth:{type:"Bearer",token:F.accessToken}});if(J)return null;let X=await $.mapProfileToUser?.(A);return{user:{id:A.id,name:A.name,email:A.email,image:A.picture.data.url,emailVerified:A.email_verified,...X},data:A}},options:$}};z3();c6();l6();var Cj1=($)=>{return{id:"figma",name:"Figma",async createAuthorizationURL({state:F,scopes:A,codeVerifier:J,redirectURI:X}){if(!$.clientId||!$.clientSecret)throw $0.error("Client Id and Client Secret are required for Figma. Make sure to provide them in the options."),new o1("CLIENT_ID_AND_SECRET_REQUIRED");if(!J)throw new o1("codeVerifier is required for Figma");let Y=$.disableDefaultScope?[]:["current_user:read"];if($.scope)Y.push(...$.scope);if(A)Y.push(...A);return await F0({id:"figma",options:$,authorizationEndpoint:"https://www.figma.com/oauth",scopes:Y,state:F,codeVerifier:J,redirectURI:X})},validateAuthorizationCode:async({code:F,codeVerifier:A,redirectURI:J})=>{return a1({code:F,codeVerifier:A,redirectURI:J,options:$,tokenEndpoint:"https://api.figma.com/v1/oauth/token",authentication:"basic"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://api.figma.com/v1/oauth/token",authentication:"basic"})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);try{let{data:A}=await v1("https://api.figma.com/v1/me",{headers:{Authorization:`Bearer ${F.accessToken}`}});if(!A)return $0.error("Failed to fetch user from Figma"),null;let J=await $.mapProfileToUser?.(A);return{user:{id:A.id,name:A.handle,email:A.email,image:A.img_url,emailVerified:!1,...J},data:A}}catch(A){return $0.error("Failed to fetch user info from Figma:",A),null}},options:$}};var Mj1=($)=>{return{id:"github",name:"GitHub",createAuthorizationURL({state:A,scopes:J,loginHint:X,codeVerifier:Y,redirectURI:W}){let Z=$.disableDefaultScope?[]:["read:user","user:email"];if($.scope)Z.push(...$.scope);if(J)Z.push(...J);return F0({id:"github",options:$,authorizationEndpoint:"https://github.com/login/oauth/authorize",scopes:Z,state:A,codeVerifier:Y,redirectURI:W,loginHint:X,prompt:$.prompt})},validateAuthorizationCode:async({code:A,codeVerifier:J,redirectURI:X})=>{return a1({code:A,codeVerifier:J,redirectURI:X,options:$,tokenEndpoint:"https://github.com/login/oauth/access_token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(A)=>{return r1({refreshToken:A,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://github.com/login/oauth/access_token"})},async getUserInfo(A){if($.getUserInfo)return $.getUserInfo(A);let{data:J,error:X}=await v1("https://api.github.com/user",{headers:{"User-Agent":"better-auth",authorization:`Bearer ${A.accessToken}`}});if(X)return null;let{data:Y}=await v1("https://api.github.com/user/emails",{headers:{Authorization:`Bearer ${A.accessToken}`,"User-Agent":"better-auth"}});if(!J.email&&Y)J.email=(Y.find((D)=>D.primary)??Y[0])?.email;let W=Y?.find((D)=>D.email===J.email)?.verified??!1,Z=await $.mapProfileToUser?.(J);return{user:{id:J.id,name:J.name||J.login,email:J.email,image:J.avatar_url,emailVerified:W,...Z},data:J}},options:$}};var es=($="")=>{return $.split("://").map((F)=>F.replace(/\/{2,}/g,"/")).join("://")},gC0=($)=>{let F=$||"https://gitlab.com";return{authorizationEndpoint:es(`${F}/oauth/authorize`),tokenEndpoint:es(`${F}/oauth/token`),userinfoEndpoint:es(`${F}/api/v4/user`)}},Pj1=($)=>{let{authorizationEndpoint:F,tokenEndpoint:A,userinfoEndpoint:J}=gC0($.issuer),X="gitlab";return{id:"gitlab",name:"Gitlab",createAuthorizationURL:async({state:Y,scopes:W,codeVerifier:Z,loginHint:D,redirectURI:G})=>{let z=$.disableDefaultScope?[]:["read_user"];if($.scope)z.push(...$.scope);if(W)z.push(...W);return await F0({id:"gitlab",options:$,authorizationEndpoint:F,scopes:z,state:Y,redirectURI:G,codeVerifier:Z,loginHint:D})},validateAuthorizationCode:async({code:Y,redirectURI:W,codeVerifier:Z})=>{return a1({code:Y,redirectURI:W,options:$,codeVerifier:Z,tokenEndpoint:A})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Y)=>{return r1({refreshToken:Y,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:A})},async getUserInfo(Y){if($.getUserInfo)return $.getUserInfo(Y);let{data:W,error:Z}=await v1(J,{headers:{authorization:`Bearer ${Y.accessToken}`}});if(Z||W.state!=="active"||W.locked)return null;let D=await $.mapProfileToUser?.(W);return{user:{id:W.id,name:W.name??W.username,email:W.email,image:W.avatar_url,emailVerified:W.email_verified??!1,...D},data:W}},options:$}};z3();c6();l6();var Rj1=($)=>{return{id:"google",name:"Google",async createAuthorizationURL({state:F,scopes:A,codeVerifier:J,redirectURI:X,loginHint:Y,display:W}){if(!$.clientId||!$.clientSecret)throw $0.error("Client Id and Client Secret is required for Google. Make sure to provide them in the options."),new o1("CLIENT_ID_AND_SECRET_REQUIRED");if(!J)throw new o1("codeVerifier is required for Google");let Z=$.disableDefaultScope?[]:["email","profile","openid"];if($.scope)Z.push(...$.scope);if(A)Z.push(...A);return await F0({id:"google",options:$,authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",scopes:Z,state:F,codeVerifier:J,redirectURI:X,prompt:$.prompt,accessType:$.accessType,display:W||$.display,loginHint:Y,hd:$.hd,additionalParams:{include_granted_scopes:"true"}})},validateAuthorizationCode:async({code:F,codeVerifier:A,redirectURI:J})=>{return a1({code:F,codeVerifier:A,redirectURI:J,options:$,tokenEndpoint:"https://oauth2.googleapis.com/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://www.googleapis.com/oauth2/v4/token"})},async verifyIdToken(F,A){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(F,A);let{kid:J,alg:X}=lZ(F);if(!J||!X)return!1;let{payload:Y}=await k7(F,await Ij1(J),{algorithms:[X],issuer:["https://accounts.google.com","accounts.google.com"],audience:$.clientId,maxTokenAge:"1h"});if(A&&Y.nonce!==A)return!1;return!0},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);if(!F.idToken)return null;let A=W9(F.idToken),J=await $.mapProfileToUser?.(A);return{user:{id:A.sub,name:A.name,email:A.email,image:A.picture,emailVerified:A.email_verified,...J},data:A}},options:$}},Ij1=async($)=>{let{data:F}=await v1("https://www.googleapis.com/oauth2/v3/certs");if(!F?.keys)throw new Y1("BAD_REQUEST",{message:"Keys not found"});let A=F.keys.find((J)=>J.kid===$);if(!A)throw Error(`JWK with kid ${$} not found`);return await j$(A,A.alg)};var Tj1=($)=>{return{id:"huggingface",name:"Hugging Face",createAuthorizationURL({state:F,scopes:A,codeVerifier:J,redirectURI:X}){let Y=$.disableDefaultScope?[]:["openid","profile","email"];if($.scope)Y.push(...$.scope);if(A)Y.push(...A);return F0({id:"huggingface",options:$,authorizationEndpoint:"https://huggingface.co/oauth/authorize",scopes:Y,state:F,codeVerifier:J,redirectURI:X})},validateAuthorizationCode:async({code:F,codeVerifier:A,redirectURI:J})=>{return a1({code:F,codeVerifier:A,redirectURI:J,options:$,tokenEndpoint:"https://huggingface.co/oauth/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://huggingface.co/oauth/token"})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);let{data:A,error:J}=await v1("https://huggingface.co/oauth/userinfo",{method:"GET",headers:{Authorization:`Bearer ${F.accessToken}`}});if(J)return null;let X=await $.mapProfileToUser?.(A);return{user:{id:A.sub,name:A.name||A.preferred_username,email:A.email,image:A.picture,emailVerified:A.email_verified??!1,...X},data:A}},options:$}};var jj1=($)=>{return{id:"kakao",name:"Kakao",createAuthorizationURL({state:F,scopes:A,redirectURI:J}){let X=$.disableDefaultScope?[]:["account_email","profile_image","profile_nickname"];if($.scope)X.push(...$.scope);if(A)X.push(...A);return F0({id:"kakao",options:$,authorizationEndpoint:"https://kauth.kakao.com/oauth/authorize",scopes:X,state:F,redirectURI:J})},validateAuthorizationCode:async({code:F,redirectURI:A})=>{return a1({code:F,redirectURI:A,options:$,tokenEndpoint:"https://kauth.kakao.com/oauth/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://kauth.kakao.com/oauth/token"})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);let{data:A,error:J}=await v1("https://kapi.kakao.com/v2/user/me",{headers:{Authorization:`Bearer ${F.accessToken}`}});if(J||!A)return null;let X=await $.mapProfileToUser?.(A),Y=A.kakao_account||{},W=Y.profile||{};return{user:{id:String(A.id),name:W.nickname||Y.name||void 0,email:Y.email,image:W.profile_image_url||W.thumbnail_image_url,emailVerified:!!Y.is_email_valid&&!!Y.is_email_verified,...X},data:A}},options:$}};var Oj1=($)=>{return{id:"kick",name:"Kick",createAuthorizationURL({state:F,scopes:A,redirectURI:J,codeVerifier:X}){let Y=$.disableDefaultScope?[]:["user:read"];if($.scope)Y.push(...$.scope);if(A)Y.push(...A);return F0({id:"kick",redirectURI:J,options:$,authorizationEndpoint:"https://id.kick.com/oauth/authorize",scopes:Y,codeVerifier:X,state:F})},async validateAuthorizationCode({code:F,redirectURI:A,codeVerifier:J}){return a1({code:F,redirectURI:A,options:$,tokenEndpoint:"https://id.kick.com/oauth/token",codeVerifier:J})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientId:$.clientId,clientSecret:$.clientSecret},tokenEndpoint:"https://id.kick.com/oauth/token"})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);let{data:A,error:J}=await v1("https://api.kick.com/public/v1/users",{method:"GET",headers:{Authorization:`Bearer ${F.accessToken}`}});if(J)return null;let X=A.data[0],Y=await $.mapProfileToUser?.(X);return{user:{id:X.user_id,name:X.name,email:X.email,image:X.profile_picture,emailVerified:!1,...Y},data:X}},options:$}};var Sj1=($)=>{return{id:"line",name:"LINE",async createAuthorizationURL({state:Y,scopes:W,codeVerifier:Z,redirectURI:D,loginHint:G}){let z=$.disableDefaultScope?[]:["openid","profile","email"];if($.scope)z.push(...$.scope);if(W)z.push(...W);return await F0({id:"line",options:$,authorizationEndpoint:"https://access.line.me/oauth2/v2.1/authorize",scopes:z,state:Y,codeVerifier:Z,redirectURI:D,loginHint:G})},validateAuthorizationCode:async({code:Y,codeVerifier:W,redirectURI:Z})=>{return a1({code:Y,codeVerifier:W,redirectURI:Z,options:$,tokenEndpoint:"https://api.line.me/oauth2/v2.1/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Y)=>{return r1({refreshToken:Y,options:{clientId:$.clientId,clientSecret:$.clientSecret},tokenEndpoint:"https://api.line.me/oauth2/v2.1/token"})},async verifyIdToken(Y,W){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(Y,W);let Z=new URLSearchParams;if(Z.set("id_token",Y),Z.set("client_id",$.clientId),W)Z.set("nonce",W);let{data:D,error:G}=await v1("https://api.line.me/oauth2/v2.1/verify",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:Z});if(G||!D)return!1;if(D.aud!==$.clientId)return!1;if(D.nonce&&D.nonce!==W)return!1;return!0},async getUserInfo(Y){if($.getUserInfo)return $.getUserInfo(Y);let W=null;if(Y.idToken)try{W=W9(Y.idToken)}catch{}if(!W){let{data:H}=await v1("https://api.line.me/oauth2/v2.1/userinfo",{headers:{authorization:`Bearer ${Y.accessToken}`}});W=H||null}if(!W)return null;let Z=await $.mapProfileToUser?.(W),D=W.sub||W.userId,G=W.name||W.displayName,z=W.picture||W.pictureUrl||void 0;return{user:{id:D,name:G,email:W.email,image:z,emailVerified:!1,...Z},data:W}},options:$}};var _j1=($)=>{return{id:"linear",name:"Linear",createAuthorizationURL({state:A,scopes:J,loginHint:X,redirectURI:Y}){let W=$.disableDefaultScope?[]:["read"];if($.scope)W.push(...$.scope);if(J)W.push(...J);return F0({id:"linear",options:$,authorizationEndpoint:"https://linear.app/oauth/authorize",scopes:W,state:A,redirectURI:Y,loginHint:X})},validateAuthorizationCode:async({code:A,redirectURI:J})=>{return a1({code:A,redirectURI:J,options:$,tokenEndpoint:"https://api.linear.app/oauth/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(A)=>{return r1({refreshToken:A,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://api.linear.app/oauth/token"})},async getUserInfo(A){if($.getUserInfo)return $.getUserInfo(A);let{data:J,error:X}=await v1("https://api.linear.app/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A.accessToken}`},body:JSON.stringify({query:`
							query {
								viewer {
									id
									name
									email
									avatarUrl
									active
									createdAt
									updatedAt
								}
							}
						`})});if(X||!J?.data?.viewer)return null;let Y=J.data.viewer,W=await $.mapProfileToUser?.(Y);return{user:{id:J.data.viewer.id,name:J.data.viewer.name,email:J.data.viewer.email,image:J.data.viewer.avatarUrl,emailVerified:!1,...W},data:Y}},options:$}};var kj1=($)=>{return{id:"linkedin",name:"Linkedin",createAuthorizationURL:async({state:J,scopes:X,redirectURI:Y,loginHint:W})=>{let Z=$.disableDefaultScope?[]:["profile","email","openid"];if($.scope)Z.push(...$.scope);if(X)Z.push(...X);return await F0({id:"linkedin",options:$,authorizationEndpoint:"https://www.linkedin.com/oauth/v2/authorization",scopes:Z,state:J,loginHint:W,redirectURI:Y})},validateAuthorizationCode:async({code:J,redirectURI:X})=>{return await a1({code:J,redirectURI:X,options:$,tokenEndpoint:"https://www.linkedin.com/oauth/v2/accessToken"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return r1({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://www.linkedin.com/oauth/v2/accessToken"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:X,error:Y}=await v1("https://api.linkedin.com/v2/userinfo",{method:"GET",headers:{Authorization:`Bearer ${J.accessToken}`}});if(Y)return null;let W=await $.mapProfileToUser?.(X);return{user:{id:X.sub,name:X.name,email:X.email,emailVerified:X.email_verified||!1,image:X.picture,...W},data:X}},options:$}};z3();c6();var bj1=($)=>{let F=$.tenantId||"common",A=$.authority||"https://login.microsoftonline.com",J=`${A}/${F}/oauth2/v2.0/authorize`,X=`${A}/${F}/oauth2/v2.0/token`;return{id:"microsoft",name:"Microsoft EntraID",createAuthorizationURL(Y){let W=$.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];if($.scope)W.push(...$.scope);if(Y.scopes)W.push(...Y.scopes);return F0({id:"microsoft",options:$,authorizationEndpoint:J,state:Y.state,codeVerifier:Y.codeVerifier,scopes:W,redirectURI:Y.redirectURI,prompt:$.prompt,loginHint:Y.loginHint})},validateAuthorizationCode({code:Y,codeVerifier:W,redirectURI:Z}){return a1({code:Y,codeVerifier:W,redirectURI:Z,options:$,tokenEndpoint:X})},async getUserInfo(Y){if($.getUserInfo)return $.getUserInfo(Y);if(!Y.idToken)return null;let W=W9(Y.idToken),Z=$.profilePhotoSize||48;await v1(`https://graph.microsoft.com/v1.0/me/photos/${Z}x${Z}/$value`,{headers:{Authorization:`Bearer ${Y.accessToken}`},async onResponse(z){if($.disableProfilePhoto||!z.response.ok)return;try{let H=await z.response.clone().arrayBuffer();W.picture=`data:image/jpeg;base64, ${j9.encode(H)}`}catch(H){$0.error(H&&typeof H==="object"&&"name"in H?H.name:"",H)}}});let D=await $.mapProfileToUser?.(W),G=W.email_verified!==void 0?W.email_verified:W.email&&(W.verified_primary_email?.includes(W.email)||W.verified_secondary_email?.includes(W.email))?!0:!1;return{user:{id:W.sub,name:W.name,email:W.email,image:W.picture,emailVerified:G,...D},data:W}},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Y)=>{let W=$.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];if($.scope)W.push(...$.scope);return r1({refreshToken:Y,options:{clientId:$.clientId,clientSecret:$.clientSecret},extraParams:{scope:W.join(" ")},tokenEndpoint:X})},options:$}};var xj1=($)=>{return{id:"naver",name:"Naver",createAuthorizationURL({state:F,scopes:A,redirectURI:J}){let X=$.disableDefaultScope?[]:["profile","email"];if($.scope)X.push(...$.scope);if(A)X.push(...A);return F0({id:"naver",options:$,authorizationEndpoint:"https://nid.naver.com/oauth2.0/authorize",scopes:X,state:F,redirectURI:J})},validateAuthorizationCode:async({code:F,redirectURI:A})=>{return a1({code:F,redirectURI:A,options:$,tokenEndpoint:"https://nid.naver.com/oauth2.0/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://nid.naver.com/oauth2.0/token"})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);let{data:A,error:J}=await v1("https://openapi.naver.com/v1/nid/me",{headers:{Authorization:`Bearer ${F.accessToken}`}});if(J||!A||A.resultcode!=="00")return null;let X=await $.mapProfileToUser?.(A),Y=A.response||{};return{user:{id:Y.id,name:Y.name||Y.nickname,email:Y.email,image:Y.profile_image,emailVerified:!1,...X},data:A}},options:$}};var gj1=($)=>{return{id:"notion",name:"Notion",createAuthorizationURL({state:A,scopes:J,loginHint:X,redirectURI:Y}){let W=$.disableDefaultScope?[]:[];if($.scope)W.push(...$.scope);if(J)W.push(...J);return F0({id:"notion",options:$,authorizationEndpoint:"https://api.notion.com/v1/oauth/authorize",scopes:W,state:A,redirectURI:Y,loginHint:X,additionalParams:{owner:"user"}})},validateAuthorizationCode:async({code:A,redirectURI:J})=>{return a1({code:A,redirectURI:J,options:$,tokenEndpoint:"https://api.notion.com/v1/oauth/token",authentication:"basic"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(A)=>{return r1({refreshToken:A,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://api.notion.com/v1/oauth/token"})},async getUserInfo(A){if($.getUserInfo)return $.getUserInfo(A);let{data:J,error:X}=await v1("https://api.notion.com/v1/users/me",{headers:{Authorization:`Bearer ${A.accessToken}`,"Notion-Version":"2022-06-28"}});if(X||!J)return null;let Y=J.bot?.owner?.user;if(!Y)return null;let W=await $.mapProfileToUser?.(Y);return{user:{id:Y.id,name:Y.name||"Notion User",email:Y.person?.email||null,image:Y.avatar_url,emailVerified:!1,...W},data:Y}},options:$}};z3();c6();l6();var fj1=($)=>{let F=$.issuer||"https://idp.paybin.io",A=`${F}/oauth2/authorize`,J=`${F}/oauth2/token`;return{id:"paybin",name:"Paybin",async createAuthorizationURL({state:X,scopes:Y,codeVerifier:W,redirectURI:Z,loginHint:D}){if(!$.clientId||!$.clientSecret)throw $0.error("Client Id and Client Secret is required for Paybin. Make sure to provide them in the options."),new o1("CLIENT_ID_AND_SECRET_REQUIRED");if(!W)throw new o1("codeVerifier is required for Paybin");let G=$.disableDefaultScope?[]:["openid","email","profile"];if($.scope)G.push(...$.scope);if(Y)G.push(...Y);return await F0({id:"paybin",options:$,authorizationEndpoint:A,scopes:G,state:X,codeVerifier:W,redirectURI:Z,prompt:$.prompt,loginHint:D})},validateAuthorizationCode:async({code:X,codeVerifier:Y,redirectURI:W})=>{return a1({code:X,codeVerifier:Y,redirectURI:W,options:$,tokenEndpoint:J})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(X)=>{return r1({refreshToken:X,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:J})},async getUserInfo(X){if($.getUserInfo)return $.getUserInfo(X);if(!X.idToken)return null;let Y=W9(X.idToken),W=await $.mapProfileToUser?.(Y);return{user:{id:Y.sub,name:Y.name||Y.preferred_username||(Y.email?Y.email.split("@")[0]:"User")||"User",email:Y.email,image:Y.picture,emailVerified:Y.email_verified||!1,...W},data:Y}},options:$}};z3();c6();l6();var vj1=($)=>{let F=($.environment||"sandbox")==="sandbox",A=F?"https://www.sandbox.paypal.com/signin/authorize":"https://www.paypal.com/signin/authorize",J=F?"https://api-m.sandbox.paypal.com/v1/oauth2/token":"https://api-m.paypal.com/v1/oauth2/token",X=F?"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo":"https://api-m.paypal.com/v1/identity/oauth2/userinfo";return{id:"paypal",name:"PayPal",async createAuthorizationURL({state:Y,codeVerifier:W,redirectURI:Z}){if(!$.clientId||!$.clientSecret)throw $0.error("Client Id and Client Secret is required for PayPal. Make sure to provide them in the options."),new o1("CLIENT_ID_AND_SECRET_REQUIRED");return await F0({id:"paypal",options:$,authorizationEndpoint:A,scopes:[],state:Y,codeVerifier:W,redirectURI:Z,prompt:$.prompt})},validateAuthorizationCode:async({code:Y,redirectURI:W})=>{let Z=j9.encode(`${$.clientId}:${$.clientSecret}`);try{let D=await v1(J,{method:"POST",headers:{Authorization:`Basic ${Z}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:Y,redirect_uri:W}).toString()});if(!D.data)throw new o1("FAILED_TO_GET_ACCESS_TOKEN");let G=D.data;return{accessToken:G.access_token,refreshToken:G.refresh_token,accessTokenExpiresAt:G.expires_in?new Date(Date.now()+G.expires_in*1000):void 0,idToken:G.id_token}}catch(D){throw $0.error("PayPal token exchange failed:",D),new o1("FAILED_TO_GET_ACCESS_TOKEN")}},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Y)=>{let W=j9.encode(`${$.clientId}:${$.clientSecret}`);try{let Z=await v1(J,{method:"POST",headers:{Authorization:`Basic ${W}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:Y}).toString()});if(!Z.data)throw new o1("FAILED_TO_REFRESH_ACCESS_TOKEN");let D=Z.data;return{accessToken:D.access_token,refreshToken:D.refresh_token,accessTokenExpiresAt:D.expires_in?new Date(Date.now()+D.expires_in*1000):void 0}}catch(Z){throw $0.error("PayPal token refresh failed:",Z),new o1("FAILED_TO_REFRESH_ACCESS_TOKEN")}},async verifyIdToken(Y,W){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(Y,W);try{return!!W9(Y).sub}catch(Z){return $0.error("Failed to verify PayPal ID token:",Z),!1}},async getUserInfo(Y){if($.getUserInfo)return $.getUserInfo(Y);if(!Y.accessToken)return $0.error("Access token is required to fetch PayPal user info"),null;try{let W=await v1(`${X}?schema=paypalv1.1`,{headers:{Authorization:`Bearer ${Y.accessToken}`,Accept:"application/json"}});if(!W.data)return $0.error("Failed to fetch user info from PayPal"),null;let Z=W.data,D=await $.mapProfileToUser?.(Z);return{user:{id:Z.user_id,name:Z.name,email:Z.email,image:Z.picture,emailVerified:Z.email_verified,...D},data:Z}}catch(W){return $0.error("Failed to fetch user info from PayPal:",W),null}},options:$}};var yj1=($)=>{return{id:"polar",name:"Polar",createAuthorizationURL({state:F,scopes:A,codeVerifier:J,redirectURI:X}){let Y=$.disableDefaultScope?[]:["openid","profile","email"];if($.scope)Y.push(...$.scope);if(A)Y.push(...A);return F0({id:"polar",options:$,authorizationEndpoint:"https://polar.sh/oauth2/authorize",scopes:Y,state:F,codeVerifier:J,redirectURI:X,prompt:$.prompt})},validateAuthorizationCode:async({code:F,codeVerifier:A,redirectURI:J})=>{return a1({code:F,codeVerifier:A,redirectURI:J,options:$,tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);let{data:A,error:J}=await v1("https://api.polar.sh/v1/oauth2/userinfo",{headers:{Authorization:`Bearer ${F.accessToken}`}});if(J)return null;let X=await $.mapProfileToUser?.(A);return{user:{id:A.id,name:A.public_name||A.username,email:A.email,image:A.avatar_url,emailVerified:A.email_verified??!1,...X},data:A}},options:$}};var uj1=($)=>{return{id:"reddit",name:"Reddit",createAuthorizationURL({state:F,scopes:A,redirectURI:J}){let X=$.disableDefaultScope?[]:["identity"];if($.scope)X.push(...$.scope);if(A)X.push(...A);return F0({id:"reddit",options:$,authorizationEndpoint:"https://www.reddit.com/api/v1/authorize",scopes:X,state:F,redirectURI:J,duration:$.duration})},validateAuthorizationCode:async({code:F,redirectURI:A})=>{let J=new URLSearchParams({grant_type:"authorization_code",code:F,redirect_uri:$.redirectURI||A}),{data:X,error:Y}=await v1("https://www.reddit.com/api/v1/access_token",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded",accept:"text/plain","user-agent":"better-auth",Authorization:`Basic ${j9.encode(`${$.clientId}:${$.clientSecret}`)}`},body:J.toString()});if(Y)throw Y;return BE(X)},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},authentication:"basic",tokenEndpoint:"https://www.reddit.com/api/v1/access_token"})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);let{data:A,error:J}=await v1("https://oauth.reddit.com/api/v1/me",{headers:{Authorization:`Bearer ${F.accessToken}`,"User-Agent":"better-auth"}});if(J)return null;let X=await $.mapProfileToUser?.(A);return{user:{id:A.id,name:A.name,email:A.oauth_client_id,emailVerified:A.has_verified_email,image:A.icon_img?.split("?")[0],...X},data:A}},options:$}};var hj1=($)=>{return{id:"roblox",name:"Roblox",createAuthorizationURL({state:F,scopes:A,redirectURI:J}){let X=$.disableDefaultScope?[]:["openid","profile"];if($.scope)X.push(...$.scope);if(A)X.push(...A);return new URL(`https://apis.roblox.com/oauth/v1/authorize?scope=${X.join("+")}&response_type=code&client_id=${$.clientId}&redirect_uri=${encodeURIComponent($.redirectURI||J)}&state=${F}&prompt=${$.prompt||"select_account consent"}`)},validateAuthorizationCode:async({code:F,redirectURI:A})=>{return a1({code:F,redirectURI:$.redirectURI||A,options:$,tokenEndpoint:"https://apis.roblox.com/oauth/v1/token",authentication:"post"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://apis.roblox.com/oauth/v1/token"})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);let{data:A,error:J}=await v1("https://apis.roblox.com/oauth/v1/userinfo",{headers:{authorization:`Bearer ${F.accessToken}`}});if(J)return null;let X=await $.mapProfileToUser?.(A);return{user:{id:A.sub,name:A.nickname||A.preferred_username||"",image:A.picture,email:A.preferred_username||null,emailVerified:!1,...X},data:{...A}}},options:$}};z3();c6();l6();var mj1=($)=>{let F=($.environment??"production")==="sandbox",A=$.loginUrl?`https://${$.loginUrl}/services/oauth2/authorize`:F?"https://test.salesforce.com/services/oauth2/authorize":"https://login.salesforce.com/services/oauth2/authorize",J=$.loginUrl?`https://${$.loginUrl}/services/oauth2/token`:F?"https://test.salesforce.com/services/oauth2/token":"https://login.salesforce.com/services/oauth2/token",X=$.loginUrl?`https://${$.loginUrl}/services/oauth2/userinfo`:F?"https://test.salesforce.com/services/oauth2/userinfo":"https://login.salesforce.com/services/oauth2/userinfo";return{id:"salesforce",name:"Salesforce",async createAuthorizationURL({state:Y,scopes:W,codeVerifier:Z,redirectURI:D}){if(!$.clientId||!$.clientSecret)throw $0.error("Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options."),new o1("CLIENT_ID_AND_SECRET_REQUIRED");if(!Z)throw new o1("codeVerifier is required for Salesforce");let G=$.disableDefaultScope?[]:["openid","email","profile"];if($.scope)G.push(...$.scope);if(W)G.push(...W);return F0({id:"salesforce",options:$,authorizationEndpoint:A,scopes:G,state:Y,codeVerifier:Z,redirectURI:$.redirectURI||D})},validateAuthorizationCode:async({code:Y,codeVerifier:W,redirectURI:Z})=>{return a1({code:Y,codeVerifier:W,redirectURI:$.redirectURI||Z,options:$,tokenEndpoint:J})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Y)=>{return r1({refreshToken:Y,options:{clientId:$.clientId,clientSecret:$.clientSecret},tokenEndpoint:J})},async getUserInfo(Y){if($.getUserInfo)return $.getUserInfo(Y);try{let{data:W}=await v1(X,{headers:{Authorization:`Bearer ${Y.accessToken}`}});if(!W)return $0.error("Failed to fetch user info from Salesforce"),null;let Z=await $.mapProfileToUser?.(W);return{user:{id:W.user_id,name:W.name,email:W.email,image:W.photos?.picture||W.photos?.thumbnail,emailVerified:W.email_verified??!1,...Z},data:W}}catch(W){return $0.error("Failed to fetch user info from Salesforce:",W),null}},options:$}};var dj1=($)=>{return{id:"slack",name:"Slack",createAuthorizationURL({state:F,scopes:A,redirectURI:J}){let X=$.disableDefaultScope?[]:["openid","profile","email"];if(A)X.push(...A);if($.scope)X.push(...$.scope);let Y=new URL("https://slack.com/openid/connect/authorize");return Y.searchParams.set("scope",X.join(" ")),Y.searchParams.set("response_type","code"),Y.searchParams.set("client_id",$.clientId),Y.searchParams.set("redirect_uri",$.redirectURI||J),Y.searchParams.set("state",F),Y},validateAuthorizationCode:async({code:F,redirectURI:A})=>{return a1({code:F,redirectURI:A,options:$,tokenEndpoint:"https://slack.com/api/openid.connect.token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://slack.com/api/openid.connect.token"})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);let{data:A,error:J}=await v1("https://slack.com/api/openid.connect.userInfo",{headers:{authorization:`Bearer ${F.accessToken}`}});if(J)return null;let X=await $.mapProfileToUser?.(A);return{user:{id:A["https://slack.com/user_id"],name:A.name||"",email:A.email,emailVerified:A.email_verified,image:A.picture||A["https://slack.com/user_image_512"],...X},data:A}},options:$}};var cj1=($)=>{return{id:"spotify",name:"Spotify",createAuthorizationURL({state:F,scopes:A,codeVerifier:J,redirectURI:X}){let Y=$.disableDefaultScope?[]:["user-read-email"];if($.scope)Y.push(...$.scope);if(A)Y.push(...A);return F0({id:"spotify",options:$,authorizationEndpoint:"https://accounts.spotify.com/authorize",scopes:Y,state:F,codeVerifier:J,redirectURI:X})},validateAuthorizationCode:async({code:F,codeVerifier:A,redirectURI:J})=>{return a1({code:F,codeVerifier:A,redirectURI:J,options:$,tokenEndpoint:"https://accounts.spotify.com/api/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://accounts.spotify.com/api/token"})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);let{data:A,error:J}=await v1("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:`Bearer ${F.accessToken}`}});if(J)return null;let X=await $.mapProfileToUser?.(A);return{user:{id:A.id,name:A.display_name,email:A.email,image:A.images[0]?.url,emailVerified:!1,...X},data:A}},options:$}};var lj1=($)=>{return{id:"tiktok",name:"TikTok",createAuthorizationURL({state:F,scopes:A,redirectURI:J}){let X=$.disableDefaultScope?[]:["user.info.profile"];if($.scope)X.push(...$.scope);if(A)X.push(...A);return new URL(`https://www.tiktok.com/v2/auth/authorize?scope=${X.join(",")}&response_type=code&client_key=${$.clientKey}&redirect_uri=${encodeURIComponent($.redirectURI||J)}&state=${F}`)},validateAuthorizationCode:async({code:F,redirectURI:A})=>{return a1({code:F,redirectURI:$.redirectURI||A,options:{clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientSecret:$.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/",authentication:"post",extraParams:{client_key:$.clientKey}})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);let{data:A,error:J}=await v1(`https://open.tiktokapis.com/v2/user/info/?fields=${["open_id","avatar_large_url","display_name","username"].join(",")}`,{headers:{authorization:`Bearer ${F.accessToken}`}});if(J)return null;return{user:{email:A.data.user.email||A.data.user.username,id:A.data.user.open_id,name:A.data.user.display_name||A.data.user.username,image:A.data.user.avatar_large_url,emailVerified:!1},data:A}},options:$}};z3();c6();var pj1=($)=>{return{id:"twitch",name:"Twitch",createAuthorizationURL({state:F,scopes:A,redirectURI:J}){let X=$.disableDefaultScope?[]:["user:read:email","openid"];if($.scope)X.push(...$.scope);if(A)X.push(...A);return F0({id:"twitch",redirectURI:J,options:$,authorizationEndpoint:"https://id.twitch.tv/oauth2/authorize",scopes:X,state:F,claims:$.claims||["email","email_verified","preferred_username","picture"]})},validateAuthorizationCode:async({code:F,redirectURI:A})=>{return a1({code:F,redirectURI:A,options:$,tokenEndpoint:"https://id.twitch.tv/oauth2/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://id.twitch.tv/oauth2/token"})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);let A=F.idToken;if(!A)return $0.error("No idToken found in token"),null;let J=W9(A),X=await $.mapProfileToUser?.(J);return{user:{id:J.sub,name:J.preferred_username,email:J.email,image:J.picture,emailVerified:J.email_verified,...X},data:J}},options:$}};var ij1=($)=>{return{id:"twitter",name:"Twitter",createAuthorizationURL(F){let A=$.disableDefaultScope?[]:["users.read","tweet.read","offline.access","users.email"];if($.scope)A.push(...$.scope);if(F.scopes)A.push(...F.scopes);return F0({id:"twitter",options:$,authorizationEndpoint:"https://x.com/i/oauth2/authorize",scopes:A,state:F.state,codeVerifier:F.codeVerifier,redirectURI:F.redirectURI})},validateAuthorizationCode:async({code:F,codeVerifier:A,redirectURI:J})=>{return a1({code:F,codeVerifier:A,authentication:"basic",redirectURI:J,options:$,tokenEndpoint:"https://api.x.com/2/oauth2/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},authentication:"basic",tokenEndpoint:"https://api.x.com/2/oauth2/token"})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);let{data:A,error:J}=await v1("https://api.x.com/2/users/me?user.fields=profile_image_url",{method:"GET",headers:{Authorization:`Bearer ${F.accessToken}`}});if(J)return null;let{data:X,error:Y}=await v1("https://api.x.com/2/users/me?user.fields=confirmed_email",{method:"GET",headers:{Authorization:`Bearer ${F.accessToken}`}}),W=!1;if(!Y&&X?.data?.confirmed_email)A.data.email=X.data.confirmed_email,W=!0;let Z=await $.mapProfileToUser?.(A);return{user:{id:A.data.id,name:A.data.name,email:A.data.email||A.data.username||null,image:A.data.profile_image_url,emailVerified:W,...Z},data:A}},options:$}};l6();var nj1=($)=>{return{id:"vercel",name:"Vercel",createAuthorizationURL({state:F,scopes:A,codeVerifier:J,redirectURI:X}){if(!J)throw new o1("codeVerifier is required for Vercel");let Y=void 0;if($.scope!==void 0||A!==void 0){if(Y=[],$.scope)Y.push(...$.scope);if(A)Y.push(...A)}return F0({id:"vercel",options:$,authorizationEndpoint:"https://vercel.com/oauth/authorize",scopes:Y,state:F,codeVerifier:J,redirectURI:X})},validateAuthorizationCode:async({code:F,codeVerifier:A,redirectURI:J})=>{return a1({code:F,codeVerifier:A,redirectURI:J,options:$,tokenEndpoint:"https://api.vercel.com/login/oauth/token"})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);let{data:A,error:J}=await v1("https://api.vercel.com/login/oauth/userinfo",{headers:{Authorization:`Bearer ${F.accessToken}`}});if(J||!A)return null;let X=await $.mapProfileToUser?.(A);return{user:{id:A.sub,name:A.name??A.preferred_username,email:A.email,image:A.picture,emailVerified:A.email_verified??!1,...X},data:A}},options:$}};var rj1=($)=>{return{id:"vk",name:"VK",async createAuthorizationURL({state:F,scopes:A,codeVerifier:J,redirectURI:X}){let Y=$.disableDefaultScope?[]:["email","phone"];if($.scope)Y.push(...$.scope);if(A)Y.push(...A);return F0({id:"vk",options:$,authorizationEndpoint:"https://id.vk.com/authorize",scopes:Y,state:F,redirectURI:X,codeVerifier:J})},validateAuthorizationCode:async({code:F,codeVerifier:A,redirectURI:J,deviceId:X})=>{return a1({code:F,codeVerifier:A,redirectURI:$.redirectURI||J,options:$,deviceId:X,tokenEndpoint:"https://id.vk.com/oauth2/auth"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(F)=>{return r1({refreshToken:F,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://id.vk.com/oauth2/auth"})},async getUserInfo(F){if($.getUserInfo)return $.getUserInfo(F);if(!F.accessToken)return null;let A=new URLSearchParams({access_token:F.accessToken,client_id:$.clientId}).toString(),{data:J,error:X}=await v1("https://id.vk.com/oauth2/user_info",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:A});if(X)return null;let Y=await $.mapProfileToUser?.(J);if(!J.user.email&&!Y?.email)return null;return{user:{id:J.user.user_id,first_name:J.user.first_name,last_name:J.user.last_name,email:J.user.email,image:J.user.avatar,emailVerified:!1,birthday:J.user.birthday,sex:J.user.sex,name:`${J.user.first_name} ${J.user.last_name}`,...Y},data:J}},options:$}};var aj1=($)=>{let F={pkce:!0,...$};return{id:"zoom",name:"Zoom",createAuthorizationURL:async({state:A,redirectURI:J,codeVerifier:X})=>{let Y=new URLSearchParams({response_type:"code",redirect_uri:F.redirectURI?F.redirectURI:J,client_id:F.clientId,state:A});if(F.pkce){let Z=await wE(X);Y.set("code_challenge_method","S256"),Y.set("code_challenge",Z)}let W=new URL("https://zoom.us/oauth/authorize");return W.search=Y.toString(),W},validateAuthorizationCode:async({code:A,redirectURI:J,codeVerifier:X})=>{return a1({code:A,redirectURI:F.redirectURI||J,codeVerifier:X,options:F,tokenEndpoint:"https://zoom.us/oauth/token",authentication:"post"})},refreshAccessToken:F.refreshAccessToken?F.refreshAccessToken:async(A)=>r1({refreshToken:A,options:{clientId:F.clientId,clientKey:F.clientKey,clientSecret:F.clientSecret},tokenEndpoint:"https://zoom.us/oauth/token"}),async getUserInfo(A){if(F.getUserInfo)return F.getUserInfo(A);let{data:J,error:X}=await v1("https://api.zoom.us/v2/users/me",{headers:{authorization:`Bearer ${A.accessToken}`}});if(X)return null;let Y=await F.mapProfileToUser?.(J);return{user:{id:J.id,name:J.display_name,image:J.pic_url,email:J.email,emailVerified:Boolean(J.verified),...Y},data:{...J}}}}};u4();var $o={apple:Kj1,atlassian:wj1,cognito:qj1,discord:Ej1,facebook:Nj1,figma:Cj1,github:Mj1,microsoft:bj1,google:Rj1,huggingface:Tj1,slack:dj1,spotify:cj1,twitch:pj1,twitter:ij1,dropbox:Vj1,kick:Oj1,linear:_j1,linkedin:kj1,gitlab:Pj1,tiktok:lj1,reddit:uj1,roblox:hj1,salesforce:mj1,vk:rj1,zoom:aj1,notion:gj1,kakao:jj1,naver:xj1,line:Sj1,paybin:fj1,paypal:vj1,polar:yj1,vercel:nj1},fC0=Object.keys($o),qO=KD(fC0).or(N1());var Fo=b0("/list-accounts",{method:"GET",use:[aJ],metadata:{openapi:{operationId:"listUserAccounts",description:"List all accounts linked to the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string"},providerId:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"},accountId:{type:"string"},userId:{type:"string"},scopes:{type:"array",items:{type:"string"}}},required:["id","providerId","createdAt","updatedAt","accountId","userId","scopes"]}}}}}}}}},async($)=>{let F=$.context.session,A=await $.context.internalAdapter.findAccounts(F.user.id);return $.json(A.map((J)=>{let{scope:X,...Y}=_T($.context.options,J);return{...Y,scopes:X?.split(",")||[]}}))}),Ao=b0("/link-social",{method:"POST",requireHeaders:!0,body:E0({callbackURL:N1().meta({description:"The URL to redirect to after the user has signed in"}).optional(),provider:qO,idToken:E0({token:N1(),nonce:N1().optional(),accessToken:N1().optional(),refreshToken:N1().optional(),scopes:y7(N1()).optional()}).optional(),requestSignUp:Z9().optional(),scopes:y7(N1()).meta({description:"Additional scopes to request from the provider"}).optional(),errorCallbackURL:N1().meta({description:"The URL to redirect to if there is an error during the link process"}).optional(),disableRedirect:Z9().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),additionalData:x5(N1(),d3()).optional()}),use:[aJ],metadata:{openapi:{description:"Link a social account to the user",operationId:"linkSocialAccount",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string",description:"The authorization URL to redirect the user to"},redirect:{type:"boolean",description:"Indicates if the user should be redirected to the authorization URL"},status:{type:"boolean"}},required:["redirect"]}}}}}}}},async($)=>{let F=$.context.session,A=$.context.socialProviders.find((Y)=>Y.id===$.body.provider);if(!A)throw $.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:$.body.provider}),new Y1("NOT_FOUND",{message:c1.PROVIDER_NOT_FOUND});if($.body.idToken){if(!A.verifyIdToken)throw $.context.logger.error("Provider does not support id token verification",{provider:$.body.provider}),new Y1("NOT_FOUND",{message:c1.ID_TOKEN_NOT_SUPPORTED});let{token:Y,nonce:W}=$.body.idToken;if(!await A.verifyIdToken(Y,W))throw $.context.logger.error("Invalid id token",{provider:$.body.provider}),new Y1("UNAUTHORIZED",{message:c1.INVALID_TOKEN});let Z=await A.getUserInfo({idToken:Y,accessToken:$.body.idToken.accessToken,refreshToken:$.body.idToken.refreshToken});if(!Z||!Z?.user)throw $.context.logger.error("Failed to get user info",{provider:$.body.provider}),new Y1("UNAUTHORIZED",{message:c1.FAILED_TO_GET_USER_INFO});let D=String(Z.user.id);if(!Z.user.email)throw $.context.logger.error("User email not found",{provider:$.body.provider}),new Y1("UNAUTHORIZED",{message:c1.USER_EMAIL_NOT_FOUND});if((await $.context.internalAdapter.findAccounts(F.user.id)).find((G)=>G.providerId===A.id&&G.accountId===D))return $.json({url:"",status:!0,redirect:!1});if(!$.context.options.account?.accountLinking?.trustedProviders?.includes(A.id)&&!Z.user.emailVerified||$.context.options.account?.accountLinking?.enabled===!1)throw new Y1("UNAUTHORIZED",{message:"Account not linked - linking not allowed"});if(Z.user.email!==F.user.email&&$.context.options.account?.accountLinking?.allowDifferentEmails!==!0)throw new Y1("UNAUTHORIZED",{message:"Account not linked - different emails not allowed"});try{await $.context.internalAdapter.createAccount({userId:F.user.id,providerId:A.id,accountId:D,accessToken:$.body.idToken.accessToken,idToken:Y,refreshToken:$.body.idToken.refreshToken,scope:$.body.idToken.scopes?.join(",")})}catch{throw new Y1("EXPECTATION_FAILED",{message:"Account not linked - unable to create account"})}if($.context.options.account?.accountLinking?.updateUserInfoOnLink===!0)try{await $.context.internalAdapter.updateUser(F.user.id,{name:Z.user?.name,image:Z.user?.image})}catch(G){console.warn("Could not update user - "+G.toString())}return $.json({url:"",status:!0,redirect:!1})}let J=await aH($,{userId:F.user.id,email:F.user.email},$.body.additionalData),X=await A.createAuthorizationURL({state:J.state,codeVerifier:J.codeVerifier,redirectURI:`${$.context.baseURL}/callback/${A.id}`,scopes:$.body.scopes});if(!$.body.disableRedirect)$.setHeader("Location",X.toString());return $.json({url:X.toString(),redirect:!$.body.disableRedirect})}),Jo=b0("/unlink-account",{method:"POST",body:E0({providerId:N1(),accountId:N1().optional()}),use:[BO],metadata:{openapi:{description:"Unlink an account",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async($)=>{let{providerId:F,accountId:A}=$.body,J=await $.context.internalAdapter.findAccounts($.context.session.user.id);if(J.length===1&&!$.context.options.account?.accountLinking?.allowUnlinkingAll)throw new Y1("BAD_REQUEST",{message:c1.FAILED_TO_UNLINK_LAST_ACCOUNT});let X=J.find((Y)=>A?Y.accountId===A&&Y.providerId===F:Y.providerId===F);if(!X)throw new Y1("BAD_REQUEST",{message:c1.ACCOUNT_NOT_FOUND});return await $.context.internalAdapter.deleteAccount(X.id),$.json({status:!0})}),LO=b0("/get-access-token",{method:"POST",body:E0({providerId:N1().meta({description:"The provider ID for the OAuth provider"}),accountId:N1().meta({description:"The account ID associated with the refresh token"}).optional(),userId:N1().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Get a valid access token, doing a refresh if needed",responses:{200:{description:"A Valid access token",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async($)=>{let{providerId:F,accountId:A,userId:J}=$.body||{},X=$.request,Y=await w3($);if(X&&!Y)throw $.error("UNAUTHORIZED");let W=Y?.user?.id||J;if(!W)throw $.error("UNAUTHORIZED");if(!$.context.socialProviders.find((z)=>z.id===F))throw new Y1("BAD_REQUEST",{message:`Provider ${F} is not supported.`});let Z=await fT($),D=void 0;if(Z&&F===Z.providerId&&(!A||Z.id===A))D=Z;else D=(await $.context.internalAdapter.findAccounts(W)).find((z)=>A?z.id===A&&z.providerId===F:z.providerId===F);if(!D)throw new Y1("BAD_REQUEST",{message:"Account not found"});let G=$.context.socialProviders.find((z)=>z.id===F);if(!G)throw new Y1("BAD_REQUEST",{message:`Provider ${F} not found.`});try{let z=null,H=D.accessTokenExpiresAt&&new Date(D.accessTokenExpiresAt).getTime()-Date.now()<5000;if(D.refreshToken&&H&&G.refreshAccessToken){let B=await wO(D.refreshToken,$.context);z=await G.refreshAccessToken(B);let q={accessToken:await z9(z.accessToken,$.context),accessTokenExpiresAt:z.accessTokenExpiresAt,refreshToken:await z9(z.refreshToken,$.context),refreshTokenExpiresAt:z.refreshTokenExpiresAt},L=null;if(D.id)L=await $.context.internalAdapter.updateAccount(D.id,q);if($.context.options.account?.storeAccountCookie)await rH($,{...D,...L??q})}let U=(()=>{if(z?.accessTokenExpiresAt){if(typeof z.accessTokenExpiresAt==="string")return new Date(z.accessTokenExpiresAt);return z.accessTokenExpiresAt}if(D.accessTokenExpiresAt){if(typeof D.accessTokenExpiresAt==="string")return new Date(D.accessTokenExpiresAt);return D.accessTokenExpiresAt}})(),Q={accessToken:z?.accessToken??await wO(D.accessToken??"",$.context),accessTokenExpiresAt:U,scopes:D.scope?.split(",")??[],idToken:z?.idToken??D.idToken??void 0};return $.json(Q)}catch(z){throw new Y1("BAD_REQUEST",{message:"Failed to get a valid access token",cause:z})}}),Xo=b0("/refresh-token",{method:"POST",body:E0({providerId:N1().meta({description:"The provider ID for the OAuth provider"}),accountId:N1().meta({description:"The account ID associated with the refresh token"}).optional(),userId:N1().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Refresh the access token using a refresh token",responses:{200:{description:"Access token refreshed successfully",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async($)=>{let{providerId:F,accountId:A,userId:J}=$.body,X=$.request,Y=await w3($);if(X&&!Y)throw $.error("UNAUTHORIZED");let W=Y?.user?.id||J;if(!W)throw new Y1("BAD_REQUEST",{message:"Either userId or session is required"});let Z=$.context.socialProviders.find((H)=>H.id===F);if(!Z)throw new Y1("BAD_REQUEST",{message:`Provider ${F} not found.`});if(!Z.refreshAccessToken)throw new Y1("BAD_REQUEST",{message:`Provider ${F} does not support token refreshing.`});let D=void 0,G=await fT($);if(G&&(!F||F===G?.providerId))D=G;else D=(await $.context.internalAdapter.findAccounts(W)).find((H)=>A?H.id===A&&H.providerId===F:H.providerId===F);if(!D)throw new Y1("BAD_REQUEST",{message:"Account not found"});let z=void 0;if(G&&F===G.providerId)z=G.refreshToken??void 0;else z=D.refreshToken??void 0;if(!z)throw new Y1("BAD_REQUEST",{message:"Refresh token not found"});try{let H=await wO(z,$.context),U=await Z.refreshAccessToken(H);if(D.id){let Q={...D||{},accessToken:await z9(U.accessToken,$.context),refreshToken:await z9(U.refreshToken,$.context),accessTokenExpiresAt:U.accessTokenExpiresAt,refreshTokenExpiresAt:U.refreshTokenExpiresAt,scope:U.scopes?.join(",")||D.scope,idToken:U.idToken||D.idToken};await $.context.internalAdapter.updateAccount(D.id,Q)}if(G&&F===G.providerId&&$.context.options.account?.storeAccountCookie)await rH($,{...G,accessToken:await z9(U.accessToken,$.context),refreshToken:await z9(U.refreshToken,$.context),accessTokenExpiresAt:U.accessTokenExpiresAt,refreshTokenExpiresAt:U.refreshTokenExpiresAt,scope:U.scopes?.join(",")||G.scope,idToken:U.idToken||G.idToken});return $.json({accessToken:U.accessToken,refreshToken:U.refreshToken,accessTokenExpiresAt:U.accessTokenExpiresAt,refreshTokenExpiresAt:U.refreshTokenExpiresAt,scope:U.scopes?.join(",")||D.scope,idToken:U.idToken||D.idToken,providerId:D.providerId,accountId:D.accountId})}catch(H){throw new Y1("BAD_REQUEST",{message:"Failed to refresh access token",cause:H})}}),vC0=b5(E0({accountId:N1().meta({description:"The provider given account id for which to get the account info"}).optional()})),Yo=b0("/account-info",{method:"GET",use:[aJ],metadata:{openapi:{description:"Get the account info provided by the provider",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string"},name:{type:"string"},email:{type:"string"},image:{type:"string"},emailVerified:{type:"boolean"}},required:["id","emailVerified"]},data:{type:"object",properties:{},additionalProperties:!0}},required:["user","data"],additionalProperties:!1}}}}}}},query:vC0},async($)=>{let F=$.query?.accountId,A=void 0;if(!F){if($.context.options.account?.storeAccountCookie){let W=await fT($);if(W)A=W}}else{let W=await $.context.internalAdapter.findAccount(F);if(W)A=W}if(!A||A.userId!==$.context.session.user.id)throw new Y1("BAD_REQUEST",{message:"Account not found"});let J=$.context.socialProviders.find((W)=>W.id===A.providerId);if(!J)throw new Y1("INTERNAL_SERVER_ERROR",{message:`Provider account provider is ${A.providerId} but it is not configured`});let X=await LO({...$,method:"POST",body:{accountId:A.id,providerId:A.providerId},returnHeaders:!1,returnStatus:!1});if(!X.accessToken)throw new Y1("BAD_REQUEST",{message:"Access token not found"});let Y=await J.getUserInfo({...X,accessToken:X.accessToken});return $.json(Y)});l6();u4();async function f8($,F,A,J=3600,X){return await tw({email:F.toLowerCase(),updateTo:A,...X},$,J)}async function EO($,F){if(!$.context.options.emailVerification?.sendVerificationEmail)throw $.context.logger.error("Verification email isn't enabled."),new Y1("BAD_REQUEST",{message:"Verification email isn't enabled"});let A=await f8($.context.secret,F.email,void 0,$.context.options.emailVerification?.expiresIn),J=$.body.callbackURL?encodeURIComponent($.body.callbackURL):encodeURIComponent("/"),X=`${$.context.baseURL}/verify-email?token=${A}&callbackURL=${J}`;await $.context.runInBackgroundOrAwait($.context.options.emailVerification.sendVerificationEmail({user:F,url:X,token:A},$.request))}var Wo=b0("/send-verification-email",{method:"POST",operationId:"sendVerificationEmail",body:E0({email:G3().meta({description:"The email to send the verification email to"}),callbackURL:N1().meta({description:"The URL to use for email verification callback"}).optional()}),metadata:{openapi:{operationId:"sendVerificationEmail",description:"Send a verification email to the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{email:{type:"string",description:"The email to send the verification email to",example:"user@example.com"},callbackURL:{type:"string",description:"The URL to use for email verification callback",example:"https://example.com/callback",nullable:!0}},required:["email"]}}}},responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the email was sent successfully",example:!0}}}}}},"400":{description:"Bad Request",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Error message",example:"Verification email isn't enabled"}}}}}}}}}},async($)=>{if(!$.context.options.emailVerification?.sendVerificationEmail)throw $.context.logger.error("Verification email isn't enabled."),new Y1("BAD_REQUEST",{message:"Verification email isn't enabled"});let{email:F}=$.body,A=await w3($);if(!A){let J=await $.context.internalAdapter.findUserByEmail(F);if(!J)return await f8($.context.secret,F,void 0,$.context.options.emailVerification?.expiresIn),$.json({status:!0});return await EO($,J.user),$.json({status:!0})}if(A?.user.email!==F)throw new Y1("BAD_REQUEST",{message:c1.EMAIL_MISMATCH});if(A?.user.emailVerified)throw new Y1("BAD_REQUEST",{message:c1.EMAIL_ALREADY_VERIFIED});return await EO($,A.user),$.json({status:!0})}),Zo=b0("/verify-email",{method:"GET",operationId:"verifyEmail",query:E0({token:N1().meta({description:"The token to verify the email"}),callbackURL:N1().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[gY(($)=>$.query.callbackURL)],metadata:{openapi:{description:"Verify the email of the user",parameters:[{name:"token",in:"query",description:"The token to verify the email",required:!0,schema:{type:"string"}},{name:"callbackURL",in:"query",description:"The URL to redirect to after email verification",required:!1,schema:{type:"string"}}],responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the email was verified successfully"}},required:["user","status"]}}}}}}}},async($)=>{function F(Z){if($.query.callbackURL){if($.query.callbackURL.includes("?"))throw $.redirect(`${$.query.callbackURL}&error=${Z}`);throw $.redirect(`${$.query.callbackURL}?error=${Z}`)}throw new Y1("UNAUTHORIZED",{message:Z})}let{token:A}=$.query,J;try{J=await k7(A,new TextEncoder().encode($.context.secret),{algorithms:["HS256"]})}catch(Z){if(Z instanceof zH)return F("token_expired");return F("invalid_token")}let X=E0({email:G3(),updateTo:N1().optional(),requestType:N1().optional()}).parse(J.payload),Y=await $.context.internalAdapter.findUserByEmail(X.email);if(!Y)return F("user_not_found");if(X.updateTo){let Z=await w3($);if(Z&&Z.user.email!==X.email)return F("unauthorized");switch(X.requestType){case"change-email-confirmation":{let D=await f8($.context.secret,X.email,X.updateTo,$.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),G=$.query.callbackURL?encodeURIComponent($.query.callbackURL):encodeURIComponent("/"),z=`${$.context.baseURL}/verify-email?token=${D}&callbackURL=${G}`;if($.context.options.emailVerification?.sendVerificationEmail)await $.context.runInBackgroundOrAwait($.context.options.emailVerification.sendVerificationEmail({user:{...Y.user,email:X.updateTo},url:z,token:D},$.request));if($.query.callbackURL)throw $.redirect($.query.callbackURL);return $.json({status:!0})}case"change-email-verification":{let D=Z;if(!D){let z=await $.context.internalAdapter.createSession(Y.user.id);if(!z)throw new Y1("INTERNAL_SERVER_ERROR",{message:c1.FAILED_TO_CREATE_SESSION});D={session:z,user:Y.user}}if($.context.options.emailVerification?.onEmailVerification)await $.context.options.emailVerification.onEmailVerification(Y.user,$.request);let G=await $.context.internalAdapter.updateUserByEmail(X.email,{email:X.updateTo,emailVerified:!0});if($.context.options.emailVerification?.afterEmailVerification)await $.context.options.emailVerification.afterEmailVerification(G,$.request);if(await O9($,{session:D.session,user:{...D.user,email:X.updateTo,emailVerified:!0}}),$.query.callbackURL)throw $.redirect($.query.callbackURL);return $.json({status:!0,user:f2($.context.options,G)})}default:{let D=Z;if(!D){let U=await $.context.internalAdapter.createSession(Y.user.id);if(!U)throw new Y1("INTERNAL_SERVER_ERROR",{message:c1.FAILED_TO_CREATE_SESSION});D={session:U,user:Y.user}}let G=await $.context.internalAdapter.updateUserByEmail(X.email,{email:X.updateTo,emailVerified:!1}),z=await f8($.context.secret,X.updateTo),H=$.query.callbackURL?encodeURIComponent($.query.callbackURL):encodeURIComponent("/");if($.context.options.emailVerification?.sendVerificationEmail)await $.context.runInBackgroundOrAwait($.context.options.emailVerification.sendVerificationEmail({user:G,url:`${$.context.baseURL}/verify-email?token=${z}&callbackURL=${H}`,token:z},$.request));if(await O9($,{session:D.session,user:{...D.user,email:X.updateTo,emailVerified:!1}}),$.query.callbackURL)throw $.redirect($.query.callbackURL);return $.json({status:!0,user:f2($.context.options,G)})}}}if(Y.user.emailVerified){if($.query.callbackURL)throw $.redirect($.query.callbackURL);return $.json({status:!0,user:null})}if($.context.options.emailVerification?.beforeEmailVerification)await $.context.options.emailVerification.beforeEmailVerification(Y.user,$.request);if($.context.options.emailVerification?.onEmailVerification)await $.context.options.emailVerification.onEmailVerification(Y.user,$.request);let W=await $.context.internalAdapter.updateUserByEmail(X.email,{emailVerified:!0});if($.context.options.emailVerification?.afterEmailVerification)await $.context.options.emailVerification.afterEmailVerification(W,$.request);if($.context.options.emailVerification?.autoSignInAfterVerification){let Z=await w3($);if(!Z||Z.user.email!==X.email){let D=await $.context.internalAdapter.createSession(Y.user.id);if(!D)throw new Y1("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});await O9($,{session:D,user:{...Y.user,emailVerified:!0}})}else await O9($,{session:Z.session,user:{...Z.user,emailVerified:!0}})}if($.query.callbackURL)throw $.redirect($.query.callbackURL);return $.json({status:!0,user:null})});c6();async function VO($,F){let{userInfo:A,account:J,callbackURL:X,disableSignUp:Y,overrideUserInfo:W}=F,Z=await $.context.internalAdapter.findOAuthUser(A.email.toLowerCase(),J.accountId,J.providerId).catch((H)=>{$0.error(`Better auth was unable to query your database.
Error: `,H);let U=$.context.options.onAPIError?.errorURL||`${$.context.baseURL}/error`;throw $.redirect(`${U}?error=internal_server_error`)}),D=Z?.user,G=!D;if(Z){let H=Z.linkedAccount??Z.accounts.find((U)=>U.providerId===J.providerId&&U.accountId===J.accountId);if(!H){let U=$.context.options.account?.accountLinking?.trustedProviders;if(!(F.isTrustedProvider||U?.includes(J.providerId))&&!A.emailVerified||$.context.options.account?.accountLinking?.enabled===!1){if(BD())$0.warn(`User already exist but account isn't linked to ${J.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`);return{error:"account not linked",data:null}}try{await $.context.internalAdapter.linkAccount({providerId:J.providerId,accountId:A.id.toString(),userId:Z.user.id,accessToken:await z9(J.accessToken,$.context),refreshToken:await z9(J.refreshToken,$.context),idToken:J.idToken,accessTokenExpiresAt:J.accessTokenExpiresAt,refreshTokenExpiresAt:J.refreshTokenExpiresAt,scope:J.scope})}catch(Q){return $0.error("Unable to link account",Q),{error:"unable to link account",data:null}}if(A.emailVerified&&!Z.user.emailVerified&&A.email.toLowerCase()===Z.user.email)await $.context.internalAdapter.updateUser(Z.user.id,{emailVerified:!0})}else{let U=$.context.options.account?.updateAccountOnSignIn!==!1?Object.fromEntries(Object.entries({idToken:J.idToken,accessToken:await z9(J.accessToken,$.context),refreshToken:await z9(J.refreshToken,$.context),accessTokenExpiresAt:J.accessTokenExpiresAt,refreshTokenExpiresAt:J.refreshTokenExpiresAt,scope:J.scope}).filter(([Q,B])=>B!==void 0)):{};if($.context.options.account?.storeAccountCookie)await rH($,{...H,...U});if(Object.keys(U).length>0)await $.context.internalAdapter.updateAccount(H.id,U);if(A.emailVerified&&!Z.user.emailVerified&&A.email.toLowerCase()===Z.user.email)await $.context.internalAdapter.updateUser(Z.user.id,{emailVerified:!0})}if(W){let{id:U,...Q}=A;D=await $.context.internalAdapter.updateUser(Z.user.id,{...Q,email:A.email.toLowerCase(),emailVerified:A.email.toLowerCase()===Z.user.email?Z.user.emailVerified||A.emailVerified:A.emailVerified})}}else{if(Y)return{error:"signup disabled",data:null,isRegister:!1};try{let{id:H,...U}=A,Q={accessToken:await z9(J.accessToken,$.context),refreshToken:await z9(J.refreshToken,$.context),idToken:J.idToken,accessTokenExpiresAt:J.accessTokenExpiresAt,refreshTokenExpiresAt:J.refreshTokenExpiresAt,scope:J.scope,providerId:J.providerId,accountId:A.id.toString()},{user:B,account:q}=await $.context.internalAdapter.createOAuthUser({...U,email:A.email.toLowerCase()},Q);if(D=B,$.context.options.account?.storeAccountCookie)await rH($,q);if(!A.emailVerified&&D&&$.context.options.emailVerification?.sendOnSignUp&&$.context.options.emailVerification?.sendVerificationEmail){let L=await f8($.context.secret,D.email,void 0,$.context.options.emailVerification?.expiresIn),E=`${$.context.baseURL}/verify-email?token=${L}&callbackURL=${X}`;await $.context.runInBackgroundOrAwait($.context.options.emailVerification.sendVerificationEmail({user:D,url:E,token:L},$.request))}}catch(H){if($0.error(H),H instanceof Y1)return{error:H.message,data:null,isRegister:!1};return{error:"unable to create user",data:null,isRegister:!1}}}if(!D)return{error:"unable to create user",data:null,isRegister:!1};let z=await $.context.internalAdapter.createSession(D.id);if(!z)return{error:"unable to create session",data:null,isRegister:!1};return{data:{session:z,user:D},error:null,isRegister:G}}c3();u4();var yD=E0({code:N1().optional(),error:N1().optional(),device_id:N1().optional(),error_description:N1().optional(),state:N1().optional(),user:N1().optional()}),Do=b0("/callback/:id",{method:["GET","POST"],operationId:"handleOAuthCallback",body:yD.optional(),query:yD.optional(),metadata:{...xY,allowedMediaTypes:["application/x-www-form-urlencoded","application/json"]}},async($)=>{let F,A=$.context.options.onAPIError?.errorURL||`${$.context.baseURL}/error`;if($.method==="POST"){let M=$.body?yD.parse($.body):{},I=$.query?yD.parse($.query):{},T=yD.parse({...M,...I}),j=new URLSearchParams;for(let[g,f]of Object.entries(T))if(f!==void 0&&f!==null)j.set(g,String(f));let b=`${$.context.baseURL}/callback/${$.params.id}?${j.toString()}`;throw $.redirect(b)}try{if($.method==="GET")F=yD.parse($.query);else if($.method==="POST")F=yD.parse($.body);else throw Error("Unsupported method")}catch(M){throw $.context.logger.error("INVALID_CALLBACK_REQUEST",M),$.redirect(`${A}?error=invalid_callback_request`)}let{code:J,error:X,state:Y,error_description:W,device_id:Z}=F;if(!Y){$.context.logger.error("State not found",X);let M=`${A}${A.includes("?")?"&":"?"}state=state_not_found`;throw $.redirect(M)}let{codeVerifier:D,callbackURL:G,link:z,errorURL:H,newUserURL:U,requestSignUp:Q}=await uT($);function B(M,I){let T=H??A,j=new URLSearchParams({error:M});if(I)j.set("error_description",I);let b=`${T}${T.includes("?")?"&":"?"}${j.toString()}`;throw $.redirect(b)}if(X)B(X,W);if(!J)throw $.context.logger.error("Code not found"),B("no_code");let q=$.context.socialProviders.find((M)=>M.id===$.params.id);if(!q)throw $.context.logger.error("Oauth provider with id",$.params.id,"not found"),B("oauth_provider_not_found");let L;try{L=await q.validateAuthorizationCode({code:J,codeVerifier:D,deviceId:Z,redirectURI:`${$.context.baseURL}/callback/${q.id}`})}catch(M){throw $.context.logger.error("",M),B("invalid_code")}let E=await q.getUserInfo({...L,user:$.body?.user?j2($.body.user):void 0}).then((M)=>M?.user);if(!E)return $.context.logger.error("Unable to get user info"),B("unable_to_get_user_info");if(!G)throw $.context.logger.error("No callback URL found"),B("no_callback_url");if(z){if(!$.context.options.account?.accountLinking?.trustedProviders?.includes(q.id)&&!E.emailVerified||$.context.options.account?.accountLinking?.enabled===!1)return $.context.logger.error("Unable to link account - untrusted provider"),B("unable_to_link_account");if(E.email!==z.email&&$.context.options.account?.accountLinking?.allowDifferentEmails!==!0)return B("email_doesn't_match");let M=await $.context.internalAdapter.findAccount(String(E.id));if(M){if(M.userId.toString()!==z.userId.toString())return B("account_already_linked_to_different_user");let T=Object.fromEntries(Object.entries({accessToken:await z9(L.accessToken,$.context),refreshToken:await z9(L.refreshToken,$.context),idToken:L.idToken,accessTokenExpiresAt:L.accessTokenExpiresAt,refreshTokenExpiresAt:L.refreshTokenExpiresAt,scope:L.scopes?.join(",")}).filter(([j,b])=>b!==void 0));await $.context.internalAdapter.updateAccount(M.id,T)}else if(!await $.context.internalAdapter.createAccount({userId:z.userId,providerId:q.id,accountId:String(E.id),...L,accessToken:await z9(L.accessToken,$.context),refreshToken:await z9(L.refreshToken,$.context),scope:L.scopes?.join(",")}))return B("unable_to_link_account");let I;try{I=G.toString()}catch{I=G}throw $.redirect(I)}if(!E.email)return $.context.logger.error("Provider did not return email. This could be due to misconfiguration in the provider settings."),B("email_not_found");let V={providerId:q.id,accountId:String(E.id),...L,scope:L.scopes?.join(",")},R=await VO($,{userInfo:{...E,id:String(E.id),email:E.email,name:E.name||E.email},account:V,callbackURL:G,disableSignUp:q.disableImplicitSignUp&&!Q||q.options?.disableSignUp,overrideUserInfo:q.options?.overrideUserInfoOnSignIn});if(R.error)return $.context.logger.error(R.error.split(" ").join("_")),B(R.error.split(" ").join("_"));let{session:N,user:S}=R.data;await O9($,{session:N,user:S});let C;try{C=(R.isRegister?U||G:G).toString()}catch{C=R.isRegister?U||G:G}throw $.redirect(C)});c6();function tj1($){return $.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/&(?!amp;|lt;|gt;|quot;|#39;|#x[0-9a-fA-F]+;|#[0-9]+;)/g,"&amp;")}var yC0=($,F="Unknown",A=null)=>{let J=$.onAPIError?.customizeDefaultErrorPage;return`<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Error</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: ${J?.font?.defaultFamily||"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif"};
        background: ${J?.colors?.background||"var(--background)"};
        color: var(--foreground);
        margin: 0;
      }
      :root,
      :host {
        --spacing: 0.25rem;
        --container-md: 28rem;
        --text-sm: ${J?.size?.textSm||"0.875rem"};
        --text-sm--line-height: calc(1.25 / 0.875);
        --text-2xl: ${J?.size?.text2xl||"1.5rem"};
        --text-2xl--line-height: calc(2 / 1.5);
        --text-4xl: ${J?.size?.text4xl||"2.25rem"};
        --text-4xl--line-height: calc(2.5 / 2.25);
        --text-6xl: ${J?.size?.text6xl||"3rem"};
        --text-6xl--line-height: 1;
        --font-weight-medium: 500;
        --font-weight-semibold: 600;
        --font-weight-bold: 700;
        --default-transition-duration: 150ms;
        --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        --radius: ${J?.size?.radiusSm||"0.625rem"};
        --default-mono-font-family: ${J?.font?.monoFamily||"var(--font-geist-mono)"};
        --primary: ${J?.colors?.primary||"black"};
        --primary-foreground: ${J?.colors?.primaryForeground||"white"};
        --background: ${J?.colors?.background||"white"};
        --foreground: ${J?.colors?.foreground||"oklch(0.271 0 0)"};
        --border: ${J?.colors?.border||"oklch(0.89 0 0)"};
        --destructive: ${J?.colors?.destructive||"oklch(0.55 0.15 25.723)"};
        --muted-foreground: ${J?.colors?.mutedForeground||"oklch(0.545 0 0)"};
        --corner-border: ${J?.colors?.cornerBorder||"#404040"};
      }

      button, .btn {
        cursor: pointer;
        background: none;
        border: none;
        color: inherit;
        font: inherit;
        transition: all var(--default-transition-duration)
          var(--default-transition-timing-function);
      }
      button:hover, .btn:hover {
        opacity: 0.8;
      }

      @media (prefers-color-scheme: dark) {
        :root,
        :host {
          --primary: ${J?.colors?.primary||"white"};
          --primary-foreground: ${J?.colors?.primaryForeground||"black"};
          --background: ${J?.colors?.background||"oklch(0.15 0 0)"};
          --foreground: ${J?.colors?.foreground||"oklch(0.98 0 0)"};
          --border: ${J?.colors?.border||"oklch(0.27 0 0)"};
          --destructive: ${J?.colors?.destructive||"oklch(0.65 0.15 25.723)"};
          --muted-foreground: ${J?.colors?.mutedForeground||"oklch(0.65 0 0)"};
          --corner-border: ${J?.colors?.cornerBorder||"#a0a0a0"};
        }
      }
      @media (max-width: 640px) {
        :root, :host {
          --text-6xl: 2.5rem;
          --text-2xl: 1.25rem;
          --text-sm: 0.8125rem;
        }
      }
      @media (max-width: 480px) {
        :root, :host {
          --text-6xl: 2rem;
          --text-2xl: 1.125rem;
        }
      }
    </style>
  </head>
  <body style="width: 100vw; min-height: 100vh; overflow-x: hidden; overflow-y: auto;">
    <div
        style="
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            position: relative;
            width: 100%;
            min-height: 100vh;
            padding: 1rem;
        "
        >
${J?.disableBackgroundGrid?"":`
      <div
        style="
          position: absolute;
          inset: 0;
          background-image: linear-gradient(to right, ${J?.colors?.gridColor||"var(--border)"} 1px, transparent 1px),
            linear-gradient(to bottom, ${J?.colors?.gridColor||"var(--border)"} 1px, transparent 1px);
          background-size: 40px 40px;
          opacity: 0.6;
          pointer-events: none;
          width: 100vw;
          height: 100vh;
        "
      ></div>
      <div
        style="
          position: absolute;
          inset: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          background: ${J?.colors?.background||"var(--background)"};
          mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          -webkit-mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          pointer-events: none;
        "
      ></div>
`}

<div
  style="
    position: relative;
    z-index: 10;
    border: 2px solid var(--border);
    background: ${J?.colors?.cardBackground||"var(--background)"};
    padding: 1.5rem;
    max-width: 42rem;
    width: 100%;
  "
>
    ${J?.disableCornerDecorations?"":`
        <!-- Corner decorations -->
        <div
          style="
            position: absolute;
            top: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            top: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>
  
        <div
          style="
            position: absolute;
            bottom: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>`}

        <div style="text-align: center; margin-bottom: 1.5rem;">
          <div style="margin-bottom: 1.5rem;">
            <div
              style="
                display: inline-block;
                border: 2px solid ${J?.disableTitleBorder?"transparent":J?.colors?.titleBorder||"var(--destructive)"};
                padding: 0.375rem 1rem;
              "
            >
              <h1
                style="
                  font-size: var(--text-6xl);
                  font-weight: var(--font-weight-semibold);
                  color: ${J?.colors?.titleColor||"var(--foreground)"};
                  letter-spacing: -0.02em;
                  margin: 0;
                "
              >
                ERROR
              </h1>
            </div>
            <div
              style="
                height: 2px;
                background-color: var(--border);
                width: calc(100% + 3rem);
                margin-left: -1.5rem;
                margin-top: 1.5rem;
              "
            ></div>
          </div>

          <h2
            style="
              font-size: var(--text-2xl);
              font-weight: var(--font-weight-semibold);
              color: var(--foreground);
              margin: 0 0 1rem;
            "
          >
            Something went wrong
          </h2>

          <div
            style="
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                border: 2px solid var(--border);
                background-color: var(--muted);
                padding: 0.375rem 0.75rem;
                margin: 0 0 1rem;
                flex-wrap: wrap;
                justify-content: center;
            "
            >
            <span
                style="
                font-size: 0.75rem;
                color: var(--muted-foreground);
                font-weight: var(--font-weight-semibold);
                "
            >
                CODE:
            </span>
            <span
                style="
                font-size: var(--text-sm);
                font-family: var(--default-mono-font-family, monospace);
                color: var(--foreground);
                word-break: break-all;
                "
            >
                ${tj1(F)}
            </span>
            </div>

          <p
            style="
              color: var(--muted-foreground);
              max-width: 28rem;
              margin: 0 auto;
              font-size: var(--text-sm);
              line-height: 1.5;
              text-wrap: pretty;
            "
          >
            ${!A?`We encountered an unexpected error. Please try again or return to the home page. If you're a developer, you can find more information about the error <a href='https://better-auth.com/docs/errors/${encodeURIComponent(F)}' target='_blank' rel="noopener noreferrer" style='color: var(--foreground); text-decoration: underline;'>here</a>.`:A}
          </p>
        </div>

        <div
          style="
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
          "
        >
          <a
            href="/"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: var(--primary);
                color: var(--primary-foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Go Home
            </div>
          </a>
          <a
            href="https://better-auth.com/docs/errors/${encodeURIComponent(F)}?askai=${encodeURIComponent(`What does the error code ${F} mean?`)}"
            target="_blank"
            rel="noopener noreferrer"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: transparent;
                color: var(--foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Ask AI
            </div>
          </a>
        </div>
      </div>
    </div>
  </body>
</html>`},Go=b0("/error",{method:"GET",metadata:{...xY,openapi:{description:"Displays an error page",responses:{"200":{description:"Success",content:{"text/html":{schema:{type:"string",description:"The HTML content of the error page"}}}}}}}},async($)=>{let F=new URL($.request?.url||""),A=F.searchParams.get("error")||"UNKNOWN",J=F.searchParams.get("error_description")||null,X=/^[\'A-Za-z0-9_-]+$/.test(A||"")?A:"UNKNOWN",Y=J?tj1(J):null,W=new URLSearchParams;if(W.set("error",X),J)W.set("error_description",J);let Z=$.context.options,D=Z.onAPIError?.errorURL;if(D)return new Response(null,{status:302,headers:{Location:`${D}${D.includes("?")?"&":"?"}${W.toString()}`}});if(SY&&!Z.onAPIError?.customizeDefaultErrorPage)return new Response(null,{status:302,headers:{Location:`/?${W.toString()}`}});return new Response(yC0($.context.options,X,Y),{headers:{"Content-Type":"text/html"}})});var zo=b0("/ok",{method:"GET",metadata:{...xY,openapi:{description:"Check if the API is working",responses:{"200":{description:"API is working",content:{"application/json":{schema:{type:"object",properties:{ok:{type:"boolean",description:"Indicates if the API is working"}},required:["ok"]}}}}}}}},async($)=>{return $.json({ok:!0})});async function sj1($,F){let A=(await $.context.internalAdapter.findAccounts(F.userId))?.find((X)=>X.providerId==="credential"),J=A?.password;if(!A||!J)return!1;return await $.context.password.verify({hash:J,password:F.password})}async function oj1($,F){let A=(await F.context.internalAdapter.findAccounts($))?.find((X)=>X.providerId==="credential"),J=A?.password;if(!A||!J||!F.body.password)throw new Y1("BAD_REQUEST",{message:"No password credential found"});if(!await F.context.password.verify({hash:J,password:F.body.password}))throw new Y1("BAD_REQUEST",{message:"Invalid password"});return!0}l6();u4();function ej1($,F,A){let J=F?new URL(F,$.baseURL):new URL(`${$.baseURL}/error`);if(A)Object.entries(A).forEach(([X,Y])=>J.searchParams.set(X,Y));return J.href}function uC0($,F,A){let J=new URL(F,$.baseURL);if(A)Object.entries(A).forEach(([X,Y])=>J.searchParams.set(X,Y));return J.href}var Ho=b0("/request-password-reset",{method:"POST",body:E0({email:G3().meta({description:"The email address of the user to send a password reset email to"}),redirectTo:N1().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{operationId:"requestPasswordReset",description:"Send a password reset email to the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async($)=>{if(!$.context.options.emailAndPassword?.sendResetPassword)throw $.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new Y1("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:F,redirectTo:A}=$.body,J=await $.context.internalAdapter.findUserByEmail(F,{includeAccounts:!0});if(!J)return S5(24),await $.context.internalAdapter.findVerificationValue("dummy-verification-token"),$.context.logger.error("Reset Password: User not found",{email:F}),$.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let X=WA($.context.options.emailAndPassword.resetPasswordTokenExpiresIn||3600,"sec"),Y=S5(24);await $.context.internalAdapter.createVerificationValue({value:J.user.id,identifier:`reset-password:${Y}`,expiresAt:X});let W=A?encodeURIComponent(A):"",Z=`${$.context.baseURL}/reset-password/${Y}?callbackURL=${W}`;return await $.context.runInBackgroundOrAwait($.context.options.emailAndPassword.sendResetPassword({user:J.user,url:Z,token:Y},$.request)),$.json({status:!0,message:"If this email exists in our system, check your email for the reset link"})}),Uo=b0("/reset-password/:token",{method:"GET",operationId:"forgetPasswordCallback",query:E0({callbackURL:N1().meta({description:"The URL to redirect the user to reset their password"})}),use:[gY(($)=>$.query.callbackURL)],metadata:{openapi:{operationId:"resetPasswordCallback",description:"Redirects the user to the callback URL with the token",parameters:[{name:"token",in:"path",required:!0,description:"The token to reset the password",schema:{type:"string"}},{name:"callbackURL",in:"query",required:!0,description:"The URL to redirect the user to reset their password",schema:{type:"string"}}],responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}}}}}}}}}},async($)=>{let{token:F}=$.params,{callbackURL:A}=$.query;if(!F||!A)throw $.redirect(ej1($.context,A,{error:"INVALID_TOKEN"}));let J=await $.context.internalAdapter.findVerificationValue(`reset-password:${F}`);if(!J||J.expiresAt<new Date)throw $.redirect(ej1($.context,A,{error:"INVALID_TOKEN"}));throw $.redirect(uC0($.context,A,{token:F}))}),Qo=b0("/reset-password",{method:"POST",operationId:"resetPassword",query:E0({token:N1().optional()}).optional(),body:E0({newPassword:N1().meta({description:"The new password to set"}),token:N1().meta({description:"The token to reset the password"}).optional()}),metadata:{openapi:{operationId:"resetPassword",description:"Reset the password for a user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async($)=>{let F=$.body.token||$.query?.token;if(!F)throw new Y1("BAD_REQUEST",{message:c1.INVALID_TOKEN});let{newPassword:A}=$.body,J=$.context.password?.config.minPasswordLength,X=$.context.password?.config.maxPasswordLength;if(A.length<J)throw new Y1("BAD_REQUEST",{message:c1.PASSWORD_TOO_SHORT});if(A.length>X)throw new Y1("BAD_REQUEST",{message:c1.PASSWORD_TOO_LONG});let Y=`reset-password:${F}`,W=await $.context.internalAdapter.findVerificationValue(Y);if(!W||W.expiresAt<new Date)throw new Y1("BAD_REQUEST",{message:c1.INVALID_TOKEN});let Z=W.value,D=await $.context.password.hash(A);if(!(await $.context.internalAdapter.findAccounts(Z)).find((G)=>G.providerId==="credential"))await $.context.internalAdapter.createAccount({userId:Z,providerId:"credential",password:D,accountId:Z});else await $.context.internalAdapter.updatePassword(Z,D);if(await $.context.internalAdapter.deleteVerificationValue(W.id),$.context.options.emailAndPassword?.onPasswordReset){let G=await $.context.internalAdapter.findUserById(Z);if(G)await $.context.options.emailAndPassword.onPasswordReset({user:G},$.request)}if($.context.options.emailAndPassword?.revokeSessionsOnPasswordReset)await $.context.internalAdapter.deleteSessions(Z);return $.json({status:!0})}),Ko=b0("/verify-password",{method:"POST",body:E0({password:N1().meta({description:"The password to verify"})}),metadata:{scope:"server",openapi:{operationId:"verifyPassword",description:"Verify the current user's password",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}},use:[d5]},async($)=>{let{password:F}=$.body,A=$.context.session;if(!await sj1($,{password:F,userId:A.user.id}))throw new Y1("BAD_REQUEST",{message:c1.INVALID_PASSWORD});return $.json({status:!0})});l6();u4();var hC0=E0({callbackURL:N1().meta({description:"Callback URL to redirect to after the user has signed in"}).optional(),newUserCallbackURL:N1().optional(),errorCallbackURL:N1().meta({description:"Callback URL to redirect to if an error happens"}).optional(),provider:qO,disableRedirect:Z9().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),idToken:b5(E0({token:N1().meta({description:"ID token from the provider"}),nonce:N1().meta({description:"Nonce used to generate the token"}).optional(),accessToken:N1().meta({description:"Access token from the provider"}).optional(),refreshToken:N1().meta({description:"Refresh token from the provider"}).optional(),expiresAt:f7().meta({description:"Expiry date of the token"}).optional()})),scopes:y7(N1()).meta({description:"Array of scopes to request from the provider. This will override the default scopes passed."}).optional(),requestSignUp:Z9().meta({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider"}).optional(),loginHint:N1().meta({description:"The login hint to use for the authorization code request"}).optional(),additionalData:x5(N1(),d3()).optional().meta({description:"Additional data to be passed through the OAuth flow"})}),Bo=()=>b0("/sign-in/social",{method:"POST",operationId:"socialSignIn",body:hC0,metadata:{$Infer:{body:{},returned:{}},openapi:{description:"Sign in with a social provider",operationId:"socialSignIn",responses:{"200":{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{token:{type:"string"},user:{type:"object",$ref:"#/components/schemas/User"},url:{type:"string"},redirect:{type:"boolean",enum:[!1]}},required:["redirect","token","user"]}}}}}}}},async($)=>{let F=$.context.socialProviders.find((Y)=>Y.id===$.body.provider);if(!F)throw $.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:$.body.provider}),new Y1("NOT_FOUND",{message:c1.PROVIDER_NOT_FOUND});if($.body.idToken){if(!F.verifyIdToken)throw $.context.logger.error("Provider does not support id token verification",{provider:$.body.provider}),new Y1("NOT_FOUND",{message:c1.ID_TOKEN_NOT_SUPPORTED});let{token:Y,nonce:W}=$.body.idToken;if(!await F.verifyIdToken(Y,W))throw $.context.logger.error("Invalid id token",{provider:$.body.provider}),new Y1("UNAUTHORIZED",{message:c1.INVALID_TOKEN});let Z=await F.getUserInfo({idToken:Y,accessToken:$.body.idToken.accessToken,refreshToken:$.body.idToken.refreshToken});if(!Z||!Z?.user)throw $.context.logger.error("Failed to get user info",{provider:$.body.provider}),new Y1("UNAUTHORIZED",{message:c1.FAILED_TO_GET_USER_INFO});if(!Z.user.email)throw $.context.logger.error("User email not found",{provider:$.body.provider}),new Y1("UNAUTHORIZED",{message:c1.USER_EMAIL_NOT_FOUND});let D=await VO($,{userInfo:{...Z.user,email:Z.user.email,id:String(Z.user.id),name:Z.user.name||"",image:Z.user.image,emailVerified:Z.user.emailVerified||!1},account:{providerId:F.id,accountId:String(Z.user.id),accessToken:$.body.idToken.accessToken},callbackURL:$.body.callbackURL,disableSignUp:F.disableImplicitSignUp&&!$.body.requestSignUp||F.disableSignUp});if(D.error)throw new Y1("UNAUTHORIZED",{message:D.error});return await O9($,D.data),$.json({redirect:!1,token:D.data.session.token,url:void 0,user:f2($.context.options,D.data.user)})}let{codeVerifier:A,state:J}=await aH($,void 0,$.body.additionalData),X=await F.createAuthorizationURL({state:J,codeVerifier:A,redirectURI:`${$.context.baseURL}/callback/${F.id}`,scopes:$.body.scopes,loginHint:$.body.loginHint});if(!$.body.disableRedirect)$.setHeader("Location",X.toString());return $.json({url:X.toString(),redirect:!$.body.disableRedirect})}),wo=()=>b0("/sign-in/email",{method:"POST",operationId:"signInEmail",use:[oH],body:E0({email:N1().meta({description:"Email of the user"}),password:N1().meta({description:"Password of the user"}),callbackURL:N1().meta({description:"Callback URL to use as a redirect for email verification"}).optional(),rememberMe:Z9().meta({description:"If this is false, the session will not be remembered. Default is `true`."}).default(!0).optional()}),metadata:{allowedMediaTypes:["application/x-www-form-urlencoded","application/json"],$Infer:{body:{},returned:{}},openapi:{operationId:"signInEmail",description:"Sign in with email and password",responses:{"200":{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token"},url:{type:"string",nullable:!0},user:{type:"object",$ref:"#/components/schemas/User"}},required:["redirect","token","user"]}}}}}}}},async($)=>{if(!$.context.options?.emailAndPassword?.enabled)throw $.context.logger.error("Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!"),new Y1("BAD_REQUEST",{message:"Email and password is not enabled"});let{email:F,password:A}=$.body;if(!G3().safeParse(F).success)throw new Y1("BAD_REQUEST",{message:c1.INVALID_EMAIL});let J=await $.context.internalAdapter.findUserByEmail(F,{includeAccounts:!0});if(!J)throw await $.context.password.hash(A),$.context.logger.error("User not found",{email:F}),new Y1("UNAUTHORIZED",{message:c1.INVALID_EMAIL_OR_PASSWORD});let X=J.accounts.find((Z)=>Z.providerId==="credential");if(!X)throw await $.context.password.hash(A),$.context.logger.error("Credential account not found",{email:F}),new Y1("UNAUTHORIZED",{message:c1.INVALID_EMAIL_OR_PASSWORD});let Y=X?.password;if(!Y)throw await $.context.password.hash(A),$.context.logger.error("Password not found",{email:F}),new Y1("UNAUTHORIZED",{message:c1.INVALID_EMAIL_OR_PASSWORD});if(!await $.context.password.verify({hash:Y,password:A}))throw $.context.logger.error("Invalid password"),new Y1("UNAUTHORIZED",{message:c1.INVALID_EMAIL_OR_PASSWORD});if($.context.options?.emailAndPassword?.requireEmailVerification&&!J.user.emailVerified){if(!$.context.options?.emailVerification?.sendVerificationEmail)throw new Y1("FORBIDDEN",{message:c1.EMAIL_NOT_VERIFIED});if($.context.options?.emailVerification?.sendOnSignIn){let Z=await f8($.context.secret,J.user.email,void 0,$.context.options.emailVerification?.expiresIn),D=$.body.callbackURL?encodeURIComponent($.body.callbackURL):encodeURIComponent("/"),G=`${$.context.baseURL}/verify-email?token=${Z}&callbackURL=${D}`;await $.context.runInBackgroundOrAwait($.context.options.emailVerification.sendVerificationEmail({user:J.user,url:G,token:Z},$.request))}throw new Y1("FORBIDDEN",{message:c1.EMAIL_NOT_VERIFIED})}let W=await $.context.internalAdapter.createSession(J.user.id,$.body.rememberMe===!1);if(!W)throw $.context.logger.error("Failed to create session"),new Y1("UNAUTHORIZED",{message:c1.FAILED_TO_CREATE_SESSION});if(await O9($,{session:W,user:J.user},$.body.rememberMe===!1),$.body.callbackURL)$.setHeader("Location",$.body.callbackURL);return $.json({redirect:!!$.body.callbackURL,token:W.token,url:$.body.callbackURL,user:f2($.context.options,J.user)})});var qo=b0("/sign-out",{method:"POST",operationId:"signOut",requireHeaders:!0,metadata:{openapi:{operationId:"signOut",description:"Sign out the current user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async($)=>{let F=await $.getSignedCookie($.context.authCookies.sessionToken.name,$.context.secret);if(F)try{await $.context.internalAdapter.deleteSession(F)}catch(A){$.context.logger.error("Failed to delete session from database",A)}return bY($),$.json({success:!0})});c6();l6();u4();var mC0=E0({name:N1(),email:G3(),password:N1().nonempty(),image:N1().optional(),callbackURL:N1().optional(),rememberMe:Z9().optional()}).and(x5(N1(),d3())),Lo=()=>b0("/sign-up/email",{method:"POST",operationId:"signUpWithEmailAndPassword",use:[oH],body:mC0,metadata:{allowedMediaTypes:["application/x-www-form-urlencoded","application/json"],$Infer:{body:{},returned:{}},openapi:{operationId:"signUpWithEmailAndPassword",description:"Sign up a user using email and password",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},email:{type:"string",description:"The email of the user"},password:{type:"string",description:"The password of the user"},image:{type:"string",description:"The profile image URL of the user"},callbackURL:{type:"string",description:"The URL to use for email verification callback"},rememberMe:{type:"boolean",description:"If this is false, the session will not be remembered. Default is `true`."}},required:["name","email","password"]}}}},responses:{"200":{description:"Successfully created user",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"Authentication token for the session"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}},"422":{description:"Unprocessable Entity. User already exists or failed to create user.",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async($)=>{return gw($.context.adapter,async()=>{if(!$.context.options.emailAndPassword?.enabled||$.context.options.emailAndPassword?.disableSignUp)throw new Y1("BAD_REQUEST",{message:"Email and password sign up is not enabled"});let F=$.body,{name:A,email:J,password:X,image:Y,callbackURL:W,rememberMe:Z,...D}=F;if(!G3().safeParse(J).success)throw new Y1("BAD_REQUEST",{message:c1.INVALID_EMAIL});if(!X||typeof X!=="string")throw new Y1("BAD_REQUEST",{message:c1.INVALID_PASSWORD});let G=$.context.password.config.minPasswordLength;if(X.length<G)throw $.context.logger.error("Password is too short"),new Y1("BAD_REQUEST",{message:c1.PASSWORD_TOO_SHORT});let z=$.context.password.config.maxPasswordLength;if(X.length>z)throw $.context.logger.error("Password is too long"),new Y1("BAD_REQUEST",{message:c1.PASSWORD_TOO_LONG});if((await $.context.internalAdapter.findUserByEmail(J))?.user)throw $.context.logger.info(`Sign-up attempt for existing email: ${J}`),new Y1("UNPROCESSABLE_ENTITY",{message:c1.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let H=await $.context.password.hash(X),U;try{let B=nH($.context.options,D,"create");if(U=await $.context.internalAdapter.createUser({email:J.toLowerCase(),name:A,image:Y,...B,emailVerified:!1}),!U)throw new Y1("BAD_REQUEST",{message:c1.FAILED_TO_CREATE_USER})}catch(B){if(BD())$.context.logger.error("Failed to create user",B);if(B instanceof Y1)throw B;throw $.context.logger?.error("Failed to create user",B),new Y1("UNPROCESSABLE_ENTITY",{message:c1.FAILED_TO_CREATE_USER})}if(!U)throw new Y1("UNPROCESSABLE_ENTITY",{message:c1.FAILED_TO_CREATE_USER});if(await $.context.internalAdapter.linkAccount({userId:U.id,providerId:"credential",accountId:U.id,password:H}),$.context.options.emailVerification?.sendOnSignUp||$.context.options.emailAndPassword.requireEmailVerification){let B=await f8($.context.secret,U.email,void 0,$.context.options.emailVerification?.expiresIn),q=F.callbackURL?encodeURIComponent(F.callbackURL):encodeURIComponent("/"),L=`${$.context.baseURL}/verify-email?token=${B}&callbackURL=${q}`;if($.context.options.emailVerification?.sendVerificationEmail)await $.context.runInBackgroundOrAwait($.context.options.emailVerification.sendVerificationEmail({user:U,url:L,token:B},$.request))}if($.context.options.emailAndPassword.autoSignIn===!1||$.context.options.emailAndPassword.requireEmailVerification)return $.json({token:null,user:f2($.context.options,U)});let Q=await $.context.internalAdapter.createSession(U.id,Z===!1);if(!Q)throw new Y1("BAD_REQUEST",{message:c1.FAILED_TO_CREATE_SESSION});return await O9($,{session:Q,user:U},Z===!1),$.json({token:Q.token,user:f2($.context.options,U)})})});l6();u4();var dC0=x5(N1().meta({description:"Field name must be a string"}),d3()),Eo=()=>b0("/update-user",{method:"POST",operationId:"updateUser",body:dC0,use:[aJ],metadata:{$Infer:{body:{}},openapi:{operationId:"updateUser",description:"Update the current user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},image:{type:"string",description:"The image of the user",nullable:!0}}}}}},responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"}}}}}}}}}},async($)=>{let F=$.body;if(typeof F!=="object"||Array.isArray(F))throw new Y1("BAD_REQUEST",{message:"Body must be an object"});if(F.email)throw new Y1("BAD_REQUEST",{message:c1.EMAIL_CAN_NOT_BE_UPDATED});let{name:A,image:J,...X}=F,Y=$.context.session,W=nH($.context.options,X,"update");if(J===void 0&&A===void 0&&Object.keys(W).length===0)throw new Y1("BAD_REQUEST",{message:"No fields to update"});let Z=await $.context.internalAdapter.updateUser(Y.user.id,{name:A,image:J,...W})??{...Y.user,...A!==void 0&&{name:A},...J!==void 0&&{image:J},...W};return await O9($,{session:Y.session,user:Z}),$.json({status:!0})}),Vo=b0("/change-password",{method:"POST",operationId:"changePassword",body:E0({newPassword:N1().meta({description:"The new password to set"}),currentPassword:N1().meta({description:"The current password is required"}),revokeOtherSessions:Z9().meta({description:"Must be a boolean value"}).optional()}),use:[d5],metadata:{openapi:{operationId:"changePassword",description:"Change the password of the user",responses:{"200":{description:"Password successfully changed",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"New session token if other sessions were revoked"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}}}}}},async($)=>{let{newPassword:F,currentPassword:A,revokeOtherSessions:J}=$.body,X=$.context.session,Y=$.context.password.config.minPasswordLength;if(F.length<Y)throw $.context.logger.error("Password is too short"),new Y1("BAD_REQUEST",{message:c1.PASSWORD_TOO_SHORT});let W=$.context.password.config.maxPasswordLength;if(F.length>W)throw $.context.logger.error("Password is too long"),new Y1("BAD_REQUEST",{message:c1.PASSWORD_TOO_LONG});let Z=(await $.context.internalAdapter.findAccounts(X.user.id)).find((z)=>z.providerId==="credential"&&z.password);if(!Z||!Z.password)throw new Y1("BAD_REQUEST",{message:c1.CREDENTIAL_ACCOUNT_NOT_FOUND});let D=await $.context.password.hash(F);if(!await $.context.password.verify({hash:Z.password,password:A}))throw new Y1("BAD_REQUEST",{message:c1.INVALID_PASSWORD});await $.context.internalAdapter.updateAccount(Z.id,{password:D});let G=null;if(J){await $.context.internalAdapter.deleteSessions(X.user.id);let z=await $.context.internalAdapter.createSession(X.user.id);if(!z)throw new Y1("INTERNAL_SERVER_ERROR",{message:c1.FAILED_TO_GET_SESSION});await O9($,{session:z,user:X.user}),G=z.token}return $.json({token:G,user:f2($.context.options,X.user)})}),No=b0({method:"POST",body:E0({newPassword:N1().meta({description:"The new password to set is required"})}),use:[d5]},async($)=>{let{newPassword:F}=$.body,A=$.context.session,J=$.context.password.config.minPasswordLength;if(F.length<J)throw $.context.logger.error("Password is too short"),new Y1("BAD_REQUEST",{message:c1.PASSWORD_TOO_SHORT});let X=$.context.password.config.maxPasswordLength;if(F.length>X)throw $.context.logger.error("Password is too long"),new Y1("BAD_REQUEST",{message:c1.PASSWORD_TOO_LONG});let Y=(await $.context.internalAdapter.findAccounts(A.user.id)).find((Z)=>Z.providerId==="credential"&&Z.password),W=await $.context.password.hash(F);if(!Y)return await $.context.internalAdapter.linkAccount({userId:A.user.id,providerId:"credential",accountId:A.user.id,password:W}),$.json({status:!0});throw new Y1("BAD_REQUEST",{message:"user already has a password"})}),Co=b0("/delete-user",{method:"POST",use:[d5],body:E0({callbackURL:N1().meta({description:"The callback URL to redirect to after the user is deleted"}).optional(),password:N1().meta({description:"The password of the user is required to delete the user"}).optional(),token:N1().meta({description:"The token to delete the user is required"}).optional()}),metadata:{openapi:{operationId:"deleteUser",description:"Delete the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{callbackURL:{type:"string",description:"The callback URL to redirect to after the user is deleted"},password:{type:"string",description:"The user's password. Required if session is not fresh"},token:{type:"string",description:"The deletion verification token"}}}}}},responses:{"200":{description:"User deletion processed successfully",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the operation was successful"},message:{type:"string",enum:["User deleted","Verification email sent"],description:"Status message of the deletion process"}},required:["success","message"]}}}}}}}},async($)=>{if(!$.context.options.user?.deleteUser?.enabled)throw $.context.logger.error("Delete user is disabled. Enable it in the options"),new Y1("NOT_FOUND");let F=$.context.session;if($.body.password){let X=(await $.context.internalAdapter.findAccounts(F.user.id)).find((Y)=>Y.providerId==="credential"&&Y.password);if(!X||!X.password)throw new Y1("BAD_REQUEST",{message:c1.CREDENTIAL_ACCOUNT_NOT_FOUND});if(!await $.context.password.verify({hash:X.password,password:$.body.password}))throw new Y1("BAD_REQUEST",{message:c1.INVALID_PASSWORD})}if($.body.token)return await NO({...$,query:{token:$.body.token}}),$.json({success:!0,message:"User deleted"});if($.context.options.user.deleteUser?.sendDeleteAccountVerification){let X=YH(32,"0-9","a-z");await $.context.internalAdapter.createVerificationValue({value:F.user.id,identifier:`delete-account-${X}`,expiresAt:new Date(Date.now()+($.context.options.user.deleteUser?.deleteTokenExpiresIn||86400)*1000)});let Y=`${$.context.baseURL}/delete-user/callback?token=${X}&callbackURL=${$.body.callbackURL||"/"}`;return await $.context.runInBackgroundOrAwait($.context.options.user.deleteUser.sendDeleteAccountVerification({user:F.user,url:Y,token:X},$.request)),$.json({success:!0,message:"Verification email sent"})}if(!$.body.password&&$.context.sessionConfig.freshAge!==0){let X=new Date(F.session.createdAt).getTime(),Y=$.context.sessionConfig.freshAge*1000;if(Date.now()-X>Y*1000)throw new Y1("BAD_REQUEST",{message:c1.SESSION_EXPIRED})}let A=$.context.options.user.deleteUser?.beforeDelete;if(A)await A(F.user,$.request);await $.context.internalAdapter.deleteUser(F.user.id),await $.context.internalAdapter.deleteSessions(F.user.id),bY($);let J=$.context.options.user.deleteUser?.afterDelete;if(J)await J(F.user,$.request);return $.json({success:!0,message:"User deleted"})}),NO=b0("/delete-user/callback",{method:"GET",query:E0({token:N1().meta({description:"The token to verify the deletion request"}),callbackURL:N1().meta({description:"The URL to redirect to after deletion"}).optional()}),use:[gY(($)=>$.query.callbackURL)],metadata:{openapi:{description:"Callback to complete user deletion with verification token",responses:{"200":{description:"User successfully deleted",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the deletion was successful"},message:{type:"string",enum:["User deleted"],description:"Confirmation message"}},required:["success","message"]}}}}}}}},async($)=>{if(!$.context.options.user?.deleteUser?.enabled)throw $.context.logger.error("Delete user is disabled. Enable it in the options"),new Y1("NOT_FOUND");let F=await w3($);if(!F)throw new Y1("NOT_FOUND",{message:c1.FAILED_TO_GET_USER_INFO});let A=await $.context.internalAdapter.findVerificationValue(`delete-account-${$.query.token}`);if(!A||A.expiresAt<new Date)throw new Y1("NOT_FOUND",{message:c1.INVALID_TOKEN});if(A.value!==F.user.id)throw new Y1("NOT_FOUND",{message:c1.INVALID_TOKEN});let J=$.context.options.user.deleteUser?.beforeDelete;if(J)await J(F.user,$.request);await $.context.internalAdapter.deleteUser(F.user.id),await $.context.internalAdapter.deleteSessions(F.user.id),await $.context.internalAdapter.deleteAccounts(F.user.id),await $.context.internalAdapter.deleteVerificationValue(A.id),bY($);let X=$.context.options.user.deleteUser?.afterDelete;if(X)await X(F.user,$.request);if($.query.callbackURL)throw $.redirect($.query.callbackURL||"/");return $.json({success:!0,message:"User deleted"})}),Mo=b0("/change-email",{method:"POST",body:E0({newEmail:G3().meta({description:"The new email address to set must be a valid email address"}),callbackURL:N1().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[d5],metadata:{openapi:{operationId:"changeEmail",responses:{"200":{description:"Email change request processed successfully",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the request was successful"},message:{type:"string",enum:["Email updated","Verification email sent"],description:"Status message of the email change process",nullable:!0}},required:["status"]}}}},"422":{description:"Unprocessable Entity. Email already exists",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async($)=>{if(!$.context.options.user?.changeEmail?.enabled)throw $.context.logger.error("Change email is disabled."),new Y1("BAD_REQUEST",{message:"Change email is disabled"});let F=$.body.newEmail.toLowerCase();if(F===$.context.session.user.email)throw $.context.logger.error("Email is the same"),new Y1("BAD_REQUEST",{message:"Email is the same"});if(await $.context.internalAdapter.findUserByEmail(F))throw $.context.logger.error("Email already exists"),new Y1("UNPROCESSABLE_ENTITY",{message:c1.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});if($.context.session.user.emailVerified!==!0&&$.context.options.user.changeEmail.updateEmailWithoutVerification){if(await $.context.internalAdapter.updateUserByEmail($.context.session.user.email,{email:F}),await O9($,{session:$.context.session.session,user:{...$.context.session.user,email:F}}),$.context.options.emailVerification?.sendVerificationEmail){let X=await f8($.context.secret,F,void 0,$.context.options.emailVerification?.expiresIn),Y=`${$.context.baseURL}/verify-email?token=${X}&callbackURL=${$.body.callbackURL||"/"}`;await $.context.runInBackgroundOrAwait($.context.options.emailVerification.sendVerificationEmail({user:{...$.context.session.user,email:F},url:Y,token:X},$.request))}return $.json({status:!0})}if($.context.session.user.emailVerified&&($.context.options.user.changeEmail.sendChangeEmailConfirmation||$.context.options.user.changeEmail.sendChangeEmailVerification)){let X=await f8($.context.secret,$.context.session.user.email,F,$.context.options.emailVerification?.expiresIn,{requestType:"change-email-confirmation"}),Y=`${$.context.baseURL}/verify-email?token=${X}&callbackURL=${$.body.callbackURL||"/"}`,W=$.context.options.user.changeEmail.sendChangeEmailConfirmation||$.context.options.user.changeEmail.sendChangeEmailVerification;if(W)await $.context.runInBackgroundOrAwait(W({user:$.context.session.user,newEmail:F,url:Y,token:X},$.request));return $.json({status:!0})}if(!$.context.options.emailVerification?.sendVerificationEmail)throw $.context.logger.error("Verification email isn't enabled."),new Y1("BAD_REQUEST",{message:"Verification email isn't enabled"});let A=await f8($.context.secret,$.context.session.user.email,F,$.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),J=`${$.context.baseURL}/verify-email?token=${A}&callbackURL=${$.body.callbackURL||"/"}`;return await $.context.runInBackgroundOrAwait($.context.options.emailVerification.sendVerificationEmail({user:{...$.context.session.user,email:F},url:J,token:A},$.request)),$.json({status:!0})});c6();function Po($){if($===null||typeof $!=="object")return!1;let F=Object.getPrototypeOf($);if(F!==null&&F!==Object.prototype&&Object.getPrototypeOf(F)!==null)return!1;if(Symbol.iterator in $)return!1;if(Symbol.toStringTag in $)return Object.prototype.toString.call($)==="[object Module]";return!0}function Ro($,F,A=".",J){if(!Po(F))return Ro($,{},A,J);let X=Object.assign({},F);for(let Y in $){if(Y==="__proto__"||Y==="constructor")continue;let W=$[Y];if(W===null||W===void 0)continue;if(J&&J(X,Y,W,A))continue;if(Array.isArray(W)&&Array.isArray(X[Y]))X[Y]=[...W,...X[Y]];else if(Po(W)&&Po(X[Y]))X[Y]=Ro(W,X[Y],(A?`${A}.`:"")+Y.toString(),J);else X[Y]=W}return X}function qE($){return(...F)=>F.reduce((A,J)=>Ro(A,J,"",$),{})}var CO=qE(),gf6=qE(($,F,A)=>{if($[F]!==void 0&&typeof A==="function")return $[F]=A($[F]),!0}),ff6=qE(($,F,A)=>{if(Array.isArray($[F])&&typeof A==="function")return $[F]=A($[F]),!0});var $O1=qE(($,F,A)=>{if(Array.isArray($[F])&&Array.isArray(A))return $[F]=A,!0}),Io=new WeakMap;function FO1($,F){let A={};for(let[J,X]of Object.entries($))A[J]=async(Y)=>{let W=async()=>{let Z=await F,D={...Y,context:{...Z,returned:void 0,responseHeaders:void 0,session:null},path:X.path,headers:Y?.headers?new Headers(Y?.headers):void 0};return gZ(D,async()=>{let{beforeHooks:G,afterHooks:z}=pC0(Z),H=await cC0(D,G);if("context"in H&&H.context&&typeof H.context==="object"){let{headers:B,...q}=H.context;if(B)B.forEach((L,E)=>{D.headers.set(E,L)});D=$O1(q,D)}else if(H)return Y?.asResponse?f$(H,{headers:Y?.headers}):Y?.returnHeaders?{headers:Y?.headers,response:H}:H;D.asResponse=!1,D.returnHeaders=!0,D.returnStatus=!0;let U=await gZ(D,()=>X(D)).catch((B)=>{if(B instanceof Y1)return{response:B,status:B.statusCode,headers:B.headers?new Headers(B.headers):null};throw B});if(U&&U instanceof Response)return U;D.context.returned=U.response,D.context.responseHeaders=U.headers;let Q=await lC0(D,z);if(Q.response)U.response=Q.response;if(U.response instanceof Y1&&dH(Z.logger.level,"debug"))U.response.stack=U.response.errorStack;if(U.response instanceof Y1&&!Y?.asResponse)throw U.response;return Y?.asResponse?f$(U.response,{headers:U.headers,status:U.status}):Y?.returnHeaders?Y?.returnStatus?{headers:U.headers,response:U.response,status:U.status}:{headers:U.headers,response:U.response}:Y?.returnStatus?{response:U.response,status:U.status}:U.response})};if(await Qm())return W();else return Km(new WeakMap,W)},A[J].path=X.path,A[J].options=X.options;return A}async function cC0($,F){let A={};for(let J of F){let X=!1;try{X=J.matcher($)}catch(Y){let W=Io.get(J.handler)??"unknown";throw $.context.logger.error(`An error occurred during ${W} hook matcher execution:`,Y),new Y1("INTERNAL_SERVER_ERROR",{message:"An error occurred during hook matcher execution. Check the logs for more details."})}if(X){let Y=await J.handler({...$,returnHeaders:!1}).catch((W)=>{if(W instanceof Y1&&dH($.context.logger.level,"debug"))W.stack=W.errorStack;throw W});if(Y&&typeof Y==="object"){if("context"in Y&&typeof Y.context==="object"){let{headers:W,...Z}=Y.context;if(W instanceof Headers)if(A.headers)W.forEach((D,G)=>{A.headers?.set(G,D)});else A.headers=W;A=$O1(Z,A);continue}return Y}}}return{context:A}}async function lC0($,F){for(let A of F)if(A.matcher($)){let J=await A.handler($).catch((X)=>{if(X instanceof Y1){if(dH($.context.logger.level,"debug"))X.stack=X.errorStack;return{response:X,headers:X.headers?new Headers(X.headers):null}}throw X});if(J.headers)J.headers.forEach((X,Y)=>{if(!$.context.responseHeaders)$.context.responseHeaders=new Headers({[Y]:X});else if(Y.toLowerCase()==="set-cookie")$.context.responseHeaders.append(Y,X);else $.context.responseHeaders.set(Y,X)});if(J.response)$.context.returned=J.response}return{response:$.context.returned,headers:$.context.responseHeaders}}function pC0($){let F=$.options.plugins||[],A=[],J=[],X=$.options.hooks?.before;if(X)Io.set(X,"user"),A.push({matcher:()=>!0,handler:X});let Y=$.options.hooks?.after;if(Y)Io.set(Y,"user"),J.push({matcher:()=>!0,handler:Y});let W=F.filter((D)=>D.hooks?.before).map((D)=>D.hooks?.before).flat(),Z=F.filter((D)=>D.hooks?.after).map((D)=>D.hooks?.after).flat();if(W.length)A.push(...W);if(Z.length)J.push(...Z);return{beforeHooks:A,afterHooks:J}}c6();function AO1($,F){let A=new Map;$.plugins?.forEach((X)=>{if(X.endpoints){for(let[Y,W]of Object.entries(X.endpoints))if(W&&"path"in W&&typeof W.path==="string"){let Z=W.path,D=[];if(W.options&&"method"in W.options){if(Array.isArray(W.options.method))D=W.options.method;else if(typeof W.options.method==="string")D=[W.options.method]}if(D.length===0)D=["*"];if(!A.has(Z))A.set(Z,[]);A.get(Z).push({pluginId:X.id,endpointKey:Y,methods:D})}}});let J=[];for(let[X,Y]of A.entries())if(Y.length>1){let W=new Map,Z=!1;for(let D of Y)for(let G of D.methods){if(!W.has(G))W.set(G,[]);if(W.get(G).push(D.pluginId),W.get(G).length>1)Z=!0;if(G==="*"&&Y.length>1)Z=!0;else if(G!=="*"&&W.has("*"))Z=!0}if(Z){let D=[...new Set(Y.map((z)=>z.pluginId))],G=[];for(let[z,H]of W.entries())if(H.length>1||z==="*"&&Y.length>1||z!=="*"&&W.has("*"))G.push(z);J.push({path:X,plugins:D,conflictingMethods:G})}}if(J.length>0){let X=J.map((Y)=>`  - "${Y.path}" [${Y.conflictingMethods.join(", ")}] used by plugins: ${Y.plugins.join(", ")}`).join(`
`);F.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:
${X}

To resolve this, you can:
	1. Use only one of the conflicting plugins
	2. Configure the plugins to use different paths (if supported)
	3. Ensure plugins use different HTTP methods for the same path
`)}}function To($,F){let A=F.plugins?.reduce((X,Y)=>{return{...X,...Y.endpoints}},{})??{},J=F.plugins?.map((X)=>X.middlewares?.map((Y)=>{let W=async(Z)=>{let D=await $;return Y.middleware({...Z,context:{...D,...Z.context}})};return W.options=Y.middleware.options,{path:Y.path,middleware:W}})).filter((X)=>X!==void 0).flat()||[];return{api:FO1({signInSocial:Bo(),callbackOAuth:Do,getSession:KO(),signOut:qo,signUpEmail:Lo(),signInEmail:wo(),resetPassword:Qo,verifyPassword:Ko,verifyEmail:Zo,sendVerificationEmail:Wo,changeEmail:Mo,changePassword:Vo,setPassword:No,updateUser:Eo(),deleteUser:Co,requestPasswordReset:Ho,requestPasswordResetCallback:Uo,listSessions:ns(),revokeSession:as,revokeSessions:ts,revokeOtherSessions:ss,linkSocialAccount:Ao,listUserAccounts:Fo,deleteUserCallback:NO,unlinkAccount:Jo,refreshToken:Xo,getAccessToken:LO,accountInfo:Yo,...A,ok:zo,error:Go},$),middlewares:J}}var JO1=($,F)=>{let{api:A,middlewares:J}=To($,F),X=new URL($.baseURL).pathname;return jr(A,{routerContext:$,openapi:{disabled:!0},basePath:X,routerMiddleware:[{path:"/**",middleware:hr},...J],allowedMediaTypes:["application/json"],skipTrailingSlashes:F.advanced?.skipTrailingSlashes??!1,async onRequest(Y){let W=$.options.disabledPaths||[],Z=new URL(Y.url).pathname.replace(/\/+$/,"")||"/",D=X==="/"?Z:Z.startsWith(X)?Z.slice(X.length).replace(/\/+$/,"")||"/":Z;if(W.includes(D))return new Response("Not Found",{status:404});let G=Y;for(let H of $.options.plugins||[])if(H.onRequest){let U=await H.onRequest(G,$);if(U&&"response"in U)return U.response;if(U&&"request"in U)G=U.request}let z=await BR1(G,$);if(z)return z;return G},async onResponse(Y){for(let W of $.options.plugins||[])if(W.onResponse){let Z=await W.onResponse(Y,$);if(Z)return Z.response}return Y},onError(Y){if(Y instanceof Y1&&Y.status==="FOUND")return;if(F.onAPIError?.throw)throw Y;if(F.onAPIError?.onError){F.onAPIError.onError(Y,$);return}let W=F.logger?.level,Z=W==="error"||W==="warn"||W==="debug"?$0:void 0;if(F.logger?.disabled!==!0){if(Y&&typeof Y==="object"&&"message"in Y&&typeof Y.message==="string"){if(Y.message.includes("no column")||Y.message.includes("column")||Y.message.includes("relation")||Y.message.includes("table")||Y.message.includes("does not exist")){$.logger?.error(Y.message);return}}if(Y instanceof Y1){if(Y.status==="INTERNAL_SERVER_ERROR")$.logger.error(Y.status,Y);Z?.error(Y.message)}else $.logger?.error(Y&&typeof Y==="object"&&"name"in Y?Y.name:"",Y)}}})};GO();var jo="better-auth-secret-12345678901234567890";function MO($){return!!$&&(typeof $==="object"||typeof $==="function")&&typeof $.then==="function"}c6();async function XO1($){let F=$.options,A=F.plugins||[],J=$,X=[];for(let Y of A)if(Y.init){let W=Y.init(J),Z;if(MO(W))Z=await W;else Z=W;if(typeof Z==="object"){if(Z.options){let{databaseHooks:D,...G}=Z.options;if(D)X.push(D);F=CO(F,G)}if(Z.context)J={...J,...Z.context}}}return X.push(F.databaseHooks),J.internalAdapter=mU(J.adapter,{options:F,logger:J.logger,hooks:X.filter((Y)=>Y!==void 0),generateId:J.generateId}),J.options=F,{context:J}}function YO1($){let F=[];if($.advanced?.crossSubDomainCookies?.enabled);return F}async function PO($,F){let A=tH($.baseURL,$.basePath),J=A?[new URL(A).origin]:[];if($.trustedOrigins){if(Array.isArray($.trustedOrigins))J.push(...$.trustedOrigins);if(typeof $.trustedOrigins==="function"){let Y=await $.trustedOrigins(F);J.push(...Y)}}let X=X6.BETTER_AUTH_TRUSTED_ORIGINS;if(X)J.push(...X.split(","));return J.filter((Y)=>Boolean(Y))}c6();l6();c3();c6();hP();function zO1($,F){return{database:F?.database,adapter:F?.adapter,emailVerification:{sendVerificationEmail:!!$.emailVerification?.sendVerificationEmail,sendOnSignUp:!!$.emailVerification?.sendOnSignUp,sendOnSignIn:!!$.emailVerification?.sendOnSignIn,autoSignInAfterVerification:!!$.emailVerification?.autoSignInAfterVerification,expiresIn:$.emailVerification?.expiresIn,onEmailVerification:!!$.emailVerification?.onEmailVerification,afterEmailVerification:!!$.emailVerification?.afterEmailVerification},emailAndPassword:{enabled:!!$.emailAndPassword?.enabled,disableSignUp:!!$.emailAndPassword?.disableSignUp,requireEmailVerification:!!$.emailAndPassword?.requireEmailVerification,maxPasswordLength:$.emailAndPassword?.maxPasswordLength,minPasswordLength:$.emailAndPassword?.minPasswordLength,sendResetPassword:!!$.emailAndPassword?.sendResetPassword,resetPasswordTokenExpiresIn:$.emailAndPassword?.resetPasswordTokenExpiresIn,onPasswordReset:!!$.emailAndPassword?.onPasswordReset,password:{hash:!!$.emailAndPassword?.password?.hash,verify:!!$.emailAndPassword?.password?.verify},autoSignIn:!!$.emailAndPassword?.autoSignIn,revokeSessionsOnPasswordReset:!!$.emailAndPassword?.revokeSessionsOnPasswordReset},socialProviders:Object.keys($.socialProviders||{}).map((A)=>{let J=$.socialProviders?.[A];if(!J)return{};return{id:A,mapProfileToUser:!!J.mapProfileToUser,disableDefaultScope:!!J.disableDefaultScope,disableIdTokenSignIn:!!J.disableIdTokenSignIn,disableImplicitSignUp:J.disableImplicitSignUp,disableSignUp:J.disableSignUp,getUserInfo:!!J.getUserInfo,overrideUserInfoOnSignIn:!!J.overrideUserInfoOnSignIn,prompt:J.prompt,verifyIdToken:!!J.verifyIdToken,scope:J.scope,refreshAccessToken:!!J.refreshAccessToken}}),plugins:$.plugins?.map((A)=>A.id.toString()),user:{modelName:$.user?.modelName,fields:$.user?.fields,additionalFields:$.user?.additionalFields,changeEmail:{enabled:$.user?.changeEmail?.enabled,sendChangeEmailVerification:!!$.user?.changeEmail?.sendChangeEmailVerification}},verification:{modelName:$.verification?.modelName,disableCleanup:$.verification?.disableCleanup,fields:$.verification?.fields},session:{modelName:$.session?.modelName,additionalFields:$.session?.additionalFields,cookieCache:{enabled:$.session?.cookieCache?.enabled,maxAge:$.session?.cookieCache?.maxAge,strategy:$.session?.cookieCache?.strategy},disableSessionRefresh:$.session?.disableSessionRefresh,expiresIn:$.session?.expiresIn,fields:$.session?.fields,freshAge:$.session?.freshAge,preserveSessionInDatabase:$.session?.preserveSessionInDatabase,storeSessionInDatabase:$.session?.storeSessionInDatabase,updateAge:$.session?.updateAge},account:{modelName:$.account?.modelName,fields:$.account?.fields,encryptOAuthTokens:$.account?.encryptOAuthTokens,updateAccountOnSignIn:$.account?.updateAccountOnSignIn,accountLinking:{enabled:$.account?.accountLinking?.enabled,trustedProviders:$.account?.accountLinking?.trustedProviders,updateUserInfoOnLink:$.account?.accountLinking?.updateUserInfoOnLink,allowUnlinkingAll:$.account?.accountLinking?.allowUnlinkingAll}},hooks:{after:!!$.hooks?.after,before:!!$.hooks?.before},secondaryStorage:!!$.secondaryStorage,advanced:{cookiePrefix:!!$.advanced?.cookiePrefix,cookies:!!$.advanced?.cookies,crossSubDomainCookies:{domain:!!$.advanced?.crossSubDomainCookies?.domain,enabled:$.advanced?.crossSubDomainCookies?.enabled,additionalCookies:$.advanced?.crossSubDomainCookies?.additionalCookies},database:{useNumberId:!!$.advanced?.database?.useNumberId||$.advanced?.database?.generateId==="serial",generateId:$.advanced?.database?.generateId,defaultFindManyLimit:$.advanced?.database?.defaultFindManyLimit},useSecureCookies:$.advanced?.useSecureCookies,ipAddress:{disableIpTracking:$.advanced?.ipAddress?.disableIpTracking,ipAddressHeaders:$.advanced?.ipAddress?.ipAddressHeaders},disableCSRFCheck:$.advanced?.disableCSRFCheck,cookieAttributes:{expires:$.advanced?.defaultCookieAttributes?.expires,secure:$.advanced?.defaultCookieAttributes?.secure,sameSite:$.advanced?.defaultCookieAttributes?.sameSite,domain:!!$.advanced?.defaultCookieAttributes?.domain,path:$.advanced?.defaultCookieAttributes?.path,httpOnly:$.advanced?.defaultCookieAttributes?.httpOnly}},trustedOrigins:$.trustedOrigins?.length,rateLimit:{storage:$.rateLimit?.storage,modelName:$.rateLimit?.modelName,window:$.rateLimit?.window,customStorage:!!$.rateLimit?.customStorage,enabled:$.rateLimit?.enabled,max:$.rateLimit?.max},onAPIError:{errorURL:$.onAPIError?.errorURL,onError:!!$.onAPIError?.onError,throw:$.onAPIError?.throw},logger:{disabled:$.logger?.disabled,level:$.logger?.level,log:!!$.logger?.log},databaseHooks:{user:{create:{after:!!$.databaseHooks?.user?.create?.after,before:!!$.databaseHooks?.user?.create?.before},update:{after:!!$.databaseHooks?.user?.update?.after,before:!!$.databaseHooks?.user?.update?.before}},session:{create:{after:!!$.databaseHooks?.session?.create?.after,before:!!$.databaseHooks?.session?.create?.before},update:{after:!!$.databaseHooks?.session?.update?.after,before:!!$.databaseHooks?.session?.update?.before}},account:{create:{after:!!$.databaseHooks?.account?.create?.after,before:!!$.databaseHooks?.account?.create?.before},update:{after:!!$.databaseHooks?.account?.update?.after,before:!!$.databaseHooks?.account?.update?.before}},verification:{create:{after:!!$.databaseHooks?.verification?.create?.after,before:!!$.databaseHooks?.verification?.create?.before},update:{after:!!$.databaseHooks?.verification?.update?.after,before:!!$.databaseHooks?.verification?.update?.before}}}}}var XW;async function HO1(){if(XW)return XW;try{let $=typeof process<"u"&&typeof process.cwd==="function"?process.cwd():"";if(!$)return;let F=(Y)=>Function("mm","return import(mm)")(Y),[{default:A},{default:J}]=await Promise.all([F("fs/promises"),F("path")]),X=await A.readFile(J.join($,"package.json"),"utf-8");return XW=JSON.parse(X),XW}catch{}}async function UO1($){if(XW)return XW.dependencies?.[$]||XW.devDependencies?.[$]||XW.peerDependencies?.[$];try{let F=typeof process<"u"&&typeof process.cwd==="function"?process.cwd():"";if(!F)throw Error("no-cwd");let A=(Z)=>Function("mm","return import(mm)")(Z),[{default:J},{default:X}]=await Promise.all([A("fs/promises"),A("path")]),Y=X.join(F,"node_modules",$,"package.json"),W=await J.readFile(Y,"utf-8");return JSON.parse(W).version||await WO1($)||void 0}catch{}return await WO1($)}async function WO1($){let F=await HO1();if(!F)return;return{...F.dependencies,...F.devDependencies,...F.peerDependencies}[$]}async function iC0(){return(await HO1())?.name}var nC0={pg:"postgresql",mysql:"mysql",mariadb:"mariadb",sqlite3:"sqlite","better-sqlite3":"sqlite","@prisma/client":"prisma",mongoose:"mongodb",mongodb:"mongodb","drizzle-orm":"drizzle"};async function rC0(){for(let[$,F]of Object.entries(nC0)){let A=await UO1($);if(A)return{name:F,version:A}}}var aC0={next:"next",nuxt:"nuxt","@remix-run/server-runtime":"remix",astro:"astro","@sveltejs/kit":"sveltekit","solid-start":"solid-start","tanstack-start":"tanstack-start",hono:"hono",express:"express",elysia:"elysia",expo:"expo"};async function tC0(){for(let[$,F]of Object.entries(aC0)){let A=await UO1($);if(A)return{name:F,version:A}}}function sC0(){let $=X6.npm_config_user_agent;if(!$)return;let F=$.split(" ")[0],A=F.lastIndexOf("/"),J=F.substring(0,A);return{name:J==="npminstall"?"cnpm":J,version:F.substring(A+1)}}var dU=($)=>{return Function("mm","return import(mm)")($)};function uD(){let $=(...F)=>F.some((A)=>Boolean(X6[A]));if($("CF_PAGES","CF_PAGES_URL","CF_ACCOUNT_ID")||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers")return"cloudflare";if($("VERCEL","VERCEL_URL","VERCEL_ENV"))return"vercel";if($("NETLIFY","NETLIFY_URL"))return"netlify";if($("RENDER","RENDER_URL","RENDER_INTERNAL_HOSTNAME","RENDER_SERVICE_ID"))return"render";if($("AWS_LAMBDA_FUNCTION_NAME","AWS_EXECUTION_ENV","LAMBDA_TASK_ROOT"))return"aws";if($("GOOGLE_CLOUD_FUNCTION_NAME","GOOGLE_CLOUD_PROJECT","GCP_PROJECT","K_SERVICE"))return"gcp";if($("AZURE_FUNCTION_NAME","FUNCTIONS_WORKER_RUNTIME","WEBSITE_INSTANCE_ID","WEBSITE_SITE_NAME"))return"azure";if($("DENO_DEPLOYMENT_ID","DENO_REGION"))return"deno-deploy";if($("FLY_APP_NAME","FLY_REGION","FLY_ALLOC_ID"))return"fly-io";if($("RAILWAY_STATIC_URL","RAILWAY_ENVIRONMENT_NAME"))return"railway";if($("DYNO","HEROKU_APP_NAME"))return"heroku";if($("DO_DEPLOYMENT_ID","DO_APP_NAME","DIGITALOCEAN"))return"digitalocean";if($("KOYEB","KOYEB_DEPLOYMENT_ID","KOYEB_APP_NAME"))return"koyeb";return null}async function oC0(){try{if(uD()==="cloudflare")return"cloudflare";let $=await dU("os"),F=$.cpus();return{deploymentVendor:uD(),systemPlatform:$.platform(),systemRelease:$.release(),systemArchitecture:$.arch(),cpuCount:F.length,cpuModel:F.length?F[0].model:null,cpuSpeed:F.length?F[0].speed:null,memory:$.totalmem(),isWSL:await FM0(),isDocker:await QO1(),isTTY:typeof process<"u"&&process.stdout?process.stdout.isTTY:null}}catch{return{systemPlatform:null,systemRelease:null,systemArchitecture:null,cpuCount:null,cpuModel:null,cpuSpeed:null,memory:null,isWSL:null,isDocker:null,isTTY:null}}}var Oo;async function eC0(){if(uD()==="cloudflare")return!1;try{return(await dU("fs")).statSync("/.dockerenv"),!0}catch{return!1}}async function $M0(){if(uD()==="cloudflare")return!1;try{return(await dU("fs")).readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}async function QO1(){if(uD()==="cloudflare")return!1;if(Oo===void 0)Oo=await eC0()||await $M0();return Oo}async function FM0(){try{if(uD()==="cloudflare")return!1;if(typeof process>"u"||process?.platform!=="linux")return!1;let $=await dU("fs");if((await dU("os")).release().toLowerCase().includes("microsoft")){if(await ZO1())return!1;return!0}return $.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!await ZO1():!1}catch{return!1}}var So,AM0=async()=>{if(uD()==="cloudflare")return!1;try{return(await dU("fs")).statSync("/run/.containerenv"),!0}catch{return!1}};async function ZO1(){if(So===void 0)So=await AM0()||await QO1();return So}function JM0(){return X6.CI!=="false"&&(("BUILD_ID"in X6)||("BUILD_NUMBER"in X6)||("CI"in X6)||("CI_APP_ID"in X6)||("CI_BUILD_ID"in X6)||("CI_BUILD_NUMBER"in X6)||("CI_NAME"in X6)||("CONTINUOUS_INTEGRATION"in X6)||("RUN_ID"in X6))}function XM0(){if(typeof Deno<"u")return{name:"deno",version:Deno?.version?.deno??null};if(typeof Bun<"u")return{name:"bun",version:Bun?.version??null};if(typeof process<"u"&&process?.versions?.node)return{name:"node",version:process.versions.node??null};return{name:"edge",version:null}}function YM0(){return j6("NODE_ENV")==="production"?"production":JM0()?"ci":jJ()?"test":"development"}async function DO1($){let F=await UL("SHA-256").digest($);return j9.encode(F)}var WM0=($)=>{return XH("a-z","A-Z","0-9")($||32)},JW=null;async function GO1($){if(JW)return JW;let F=await iC0();if(F)return JW=await DO1($?$+F:F),JW;if($)return JW=await DO1($),JW;return JW=WM0(32),JW}async function _o($,F){let A=$.telemetry?.debug||ET("BETTER_AUTH_TELEMETRY_DEBUG",!1),J=on.BETTER_AUTH_TELEMETRY_ENDPOINT,X=async(D)=>{if(F?.customTrack)await F.customTrack(D).catch($0.error);else if(A)$0.info("telemetry event",JSON.stringify(D,null,2));else await v1(J,{method:"POST",body:D}).catch($0.error)},W=await(async()=>{let D=$.telemetry?.enabled!==void 0?$.telemetry.enabled:!1;return(ET("BETTER_AUTH_TELEMETRY",!1)||D)&&(F?.skipTestCheck||!jJ())})(),Z;if(W)Z=await GO1($.baseURL),X({type:"init",payload:{config:zO1($,F),runtime:XM0(),database:await rC0(),framework:await tC0(),environment:YM0(),systemInfo:await oC0(),packageManager:sC0()},anonymousId:Z});return{publish:async(D)=>{if(!W)return;if(!Z)Z=await GO1($.baseURL);await X({type:D.type,payload:D.payload,anonymousId:Z})}}}function ZM0($){let F=new Set($).size;if(F===0)return 0;return Math.log2(Math.pow(F,$.length))}function DM0($,F){let A=$===jo;if(jJ())return;if(A&&SY)throw new o1("You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config.");if(!$)throw new o1("BETTER_AUTH_SECRET is missing. Set it in your environment or pass `secret` to betterAuth({ secret }).");if($.length<32)F.warn("[better-auth] Warning: your BETTER_AUTH_SECRET should be at least 32 characters long for adequate security. Generate one with `npx @better-auth/cli secret` or `openssl rand -base64 32`.");if(ZM0($)<120)F.warn("[better-auth] Warning: your BETTER_AUTH_SECRET appears low-entropy. Use a randomly generated secret for production.")}async function KO1($,F,A){if(!F.database)F=CO(F,{session:{cookieCache:{enabled:!0,strategy:"jwe",refreshCache:!0}},account:{storeStateStrategy:"cookie",storeAccountCookie:!0}});let J=F.plugins||[],X=YO1(F),Y=OJ(F.logger),W=tH(F.baseURL,F.basePath);if(!W)Y.warn("[better-auth] Base URL could not be determined. Please set a valid base URL using the baseURL config option or the BETTER_AUTH_BASE_URL environment variable. Without this, callbacks and redirects may not work correctly.");let Z=F.secret||X6.BETTER_AUTH_SECRET||X6.AUTH_SECRET||jo;DM0(Z,Y),F={...F,secret:Z,baseURL:W?new URL(W).origin:"",basePath:F.basePath||"/api/auth",plugins:J.concat(X)},AO1(F,Y);let D=DR1(F),G=l3(F),z=Object.entries(F.socialProviders||{}).map(([q,L])=>{if(L==null)return null;if(L.enabled===!1)return null;if(!L.clientId)Y.warn(`Social provider ${q} is missing clientId or clientSecret`);let E=$o[q](L);return E.disableImplicitSignUp=L.disableImplicitSignUp,E}).filter((q)=>q!==null),H=({model:q,size:L})=>{if(typeof F.advanced?.generateId==="function")return F.advanced.generateId({model:q,size:L});if(typeof F?.advanced?.database?.generateId==="function")return F.advanced.database.generateId({model:q,size:L});return S5(L)},{publish:U}=await _o(F,{adapter:$.id,database:typeof F.database==="function"?"adapter":A(F.database)}),Q=XO1({appName:F.appName||"Better Auth",baseURL:W||"",version:zm(),socialProviders:z,options:F,oauthConfig:{storeStateStrategy:F.account?.storeStateStrategy||(F.database?"database":"cookie"),skipStateCookieCheck:!!F.account?.skipStateCookieCheck},tables:G,trustedOrigins:await PO(F),isTrustedOrigin(q,L){return this.trustedOrigins.some((E)=>hT(q,E,L))},sessionConfig:{updateAge:F.session?.updateAge!==void 0?F.session.updateAge:86400,expiresIn:F.session?.expiresIn||604800,freshAge:F.session?.freshAge===void 0?86400:F.session.freshAge,cookieRefreshCache:(()=>{let q=F.session?.cookieCache?.refreshCache,L=F.session?.cookieCache?.maxAge||300;if((!!F.database||!!F.secondaryStorage)&&q)return Y.warn("[better-auth] `session.cookieCache.refreshCache` is enabled while `database` or `secondaryStorage` is configured. `refreshCache` is meant for stateless (DB-less) setups. Disabling `refreshCache` \u2014 remove it from your config to silence this warning."),!1;if(q===!1||q===void 0)return!1;if(q===!0)return{enabled:!0,updateAge:Math.floor(L*0.2)};return{enabled:!0,updateAge:q.updateAge!==void 0?q.updateAge:Math.floor(L*0.2)}})()},secret:Z,rateLimit:{...F.rateLimit,enabled:F.rateLimit?.enabled??SY,window:F.rateLimit?.window||10,max:F.rateLimit?.max||100,storage:F.rateLimit?.storage||(F.secondaryStorage?"secondary-storage":"memory")},authCookies:D,logger:Y,generateId:H,session:null,secondaryStorage:F.secondaryStorage,password:{hash:F.emailAndPassword?.password?.hash||Jr,verify:F.emailAndPassword?.password?.verify||Xr,config:{minPasswordLength:F.emailAndPassword?.minPasswordLength||8,maxPasswordLength:F.emailAndPassword?.maxPasswordLength||128},checkPassword:oj1},setNewSession(q){this.newSession=q},newSession:null,adapter:$,internalAdapter:mU($,{options:F,logger:Y,hooks:F.databaseHooks?[F.databaseHooks]:[],generateId:H}),createAuthCookie:fr(F),async runMigrations(){throw new o1("runMigrations will be set by the specific init implementation")},publishTelemetry:U,skipCSRFCheck:!!F.advanced?.disableCSRFCheck,skipOriginCheck:F.advanced?.disableOriginCheck!==void 0?F.advanced.disableOriginCheck:jJ()?!0:!1,runInBackground:F.advanced?.backgroundTasks?.handler??((q)=>{q.catch(()=>{})}),async runInBackgroundOrAwait(q){try{if(F.advanced?.backgroundTasks?.handler){if(q instanceof Promise)F.advanced.backgroundTasks.handler(q.catch((L)=>{Y.error("Failed to run background task:",L)}))}else await q}catch(L){Y.error("Failed to run background task:",L)}},getPlugin:(q)=>F.plugins.find((L)=>L.id===q)??null}),B;if(MO(Q))({context:B}=await Q);else({context:B}=Q);if(typeof B.options.emailVerification?.onEmailVerification==="function")B.options.emailVerification.onEmailVerification=ow(B.options.emailVerification.onEmailVerification,"Use `afterEmailVerification` instead. This will be removed in 1.5",B.logger);return B}l6();var BO1=async($)=>{let F=await zO($),J=await KO1(F,$,(X)=>hU(X)||"unknown");return J.runMigrations=async function(){if(!$.database||"updateMany"in $.database)throw new o1("Database is not provided or it's an adapter. Migrations are only supported with a database instance.");let{runMigrations:X}=await QO($);await X()},J};l6();var wO1=($,F)=>{let A=F($),{api:J}=To(A,$);return{handler:async(X)=>{let Y=await A,W=Y.options.basePath||"/api/auth";if(!Y.options.baseURL){let D=tH(void 0,W,X,void 0,Y.options.advanced?.trustedProxyHeaders);if(D)Y.baseURL=D,Y.options.baseURL=sH(Y.baseURL)||void 0;else throw new o1("Could not get base URL from request. Please provide a valid base URL.")}Y.trustedOrigins=await PO(Y.options,X);let{handler:Z}=JO1(Y,$);return qm(Y.adapter,()=>Z(X))},api:J,options:$,$context:A,$ERROR_CODES:{...$.plugins?.reduce((X,Y)=>{if(Y.$ERROR_CODES)return{...X,...Y.$ERROR_CODES};return X},{}),...c1}}};var ko=($)=>{return wO1($,BO1)};c6();l6();c3();PL();var AF=l8(iA(),1),bo=class extends Error{constructor($,F){super(F);this.code=$,this.name="MongoAdapterError"}},go=($,F)=>{let A,J=(Z)=>{let D=Z.advanced?.database?.generateId;if(typeof D==="function")return D},X=(Z,D)=>({getFieldAttributes:G,getFieldName:z,schema:H,getDefaultModelName:U,options:Q})=>{let B=J(Q);function q({field:E,value:V,model:R}){if(B)return V;if(R=U(R),E==="id"||E==="_id"||H[R].fields[E]?.references?.field==="id"){if(V===null||V===void 0)return V;if(typeof V!=="string"){if(V instanceof AF.ObjectId)return V;if(Array.isArray(V))return V.map((N)=>{if(N===null||N===void 0)return N;if(typeof N==="string")try{return new AF.ObjectId(N)}catch{return N}if(N instanceof AF.ObjectId)return N;throw new bo("INVALID_ID","Invalid id value")});throw new bo("INVALID_ID","Invalid id value")}try{return new AF.ObjectId(V)}catch{return V}}return V}function L({where:E,model:V}){if(!E.length)return{};let R=E.map((M)=>{let{field:I,value:T,operator:j="eq",connector:b="AND"}=M,g,f=z({model:V,field:I});if(f==="id")f="_id";switch(j.toLowerCase()){case"eq":g={[f]:q({field:f,value:T,model:V})};break;case"in":g={[f]:{$in:Array.isArray(T)?T.map((d)=>q({field:f,value:d,model:V})):[q({field:f,value:T,model:V})]}};break;case"not_in":g={[f]:{$nin:Array.isArray(T)?T.map((d)=>q({field:f,value:d,model:V})):[q({field:f,value:T,model:V})]}};break;case"gt":g={[f]:{$gt:q({field:f,value:T,model:V})}};break;case"gte":g={[f]:{$gte:q({field:f,value:T,model:V})}};break;case"lt":g={[f]:{$lt:q({field:f,value:T,model:V})}};break;case"lte":g={[f]:{$lte:q({field:f,value:T,model:V})}};break;case"ne":g={[f]:{$ne:q({field:f,value:T,model:V})}};break;case"contains":g={[f]:{$regex:`.*${xo(T)}.*`}};break;case"starts_with":g={[f]:{$regex:`^${xo(T)}`}};break;case"ends_with":g={[f]:{$regex:`${xo(T)}$`}};break;default:throw new bo("UNSUPPORTED_OPERATOR",`Unsupported operator: ${j}`)}return{condition:g,connector:b}});if(R.length===1)return R[0].condition;let N=R.filter((M)=>M.connector==="AND").map((M)=>M.condition),S=R.filter((M)=>M.connector==="OR").map((M)=>M.condition),C={};if(N.length)C={...C,$and:N};if(S.length)C={...C,$or:S};return C}return{async create({model:E,data:V}){return{_id:(await Z.collection(E).insertOne(V,{session:D})).insertedId.toString(),...V}},async findOne({model:E,where:V,select:R,join:N}){let S=[V?{$match:L({where:V,model:E})}:{$match:{}}];if(N)for(let[M,I]of Object.entries(N)){let T=z({field:I.on.from,model:E}),j=z({field:I.on.to,model:M}),b=T==="id"?"_id":T,g=j==="id"?"_id":j,f=H[U(M)]?.fields[I.on.to]?.unique===!0,d=!f&&I.limit!==void 0,s=I.limit??Q.advanced?.database?.defaultFindManyLimit??100;if(d&&s>0){let n=`$${g}`;S.push({$lookup:{from:M,let:{localFieldValue:`$${b}`},pipeline:[{$match:{$expr:{$eq:[n,"$$localFieldValue"]}}},{$limit:s}],as:M}})}else S.push({$lookup:{from:M,localField:b,foreignField:g,as:M}});if(f)S.push({$unwind:{path:`$${M}`,preserveNullAndEmptyArrays:!0}})}if(R){let M={};if(R.forEach((I)=>{M[z({field:I,model:E})]=1}),N)for(let I of Object.keys(N))M[I]=1;S.push({$project:M})}S.push({$limit:1});let C=await Z.collection(E).aggregate(S,{session:D}).toArray();if(!C||C.length===0)return null;return C[0]},async findMany({model:E,where:V,limit:R,offset:N,sortBy:S,join:C}){let M=[V?{$match:L({where:V,model:E})}:{$match:{}}];if(C)for(let[I,T]of Object.entries(C)){let j=z({field:T.on.from,model:E}),b=z({field:T.on.to,model:I}),g=j==="id"?"_id":j,f=b==="id"?"_id":b,d=G({model:I,field:T.on.to})?.unique===!0,s=T.relation!=="one-to-one"&&T.limit!==void 0,n=T.limit??Q.advanced?.database?.defaultFindManyLimit??100;if(s&&n>0){let L1=`$${f}`;M.push({$lookup:{from:I,let:{localFieldValue:`$${g}`},pipeline:[{$match:{$expr:{$eq:[L1,"$$localFieldValue"]}}},{$limit:n}],as:I}})}else M.push({$lookup:{from:I,localField:g,foreignField:f,as:I}});if(d)M.push({$unwind:{path:`$${I}`,preserveNullAndEmptyArrays:!0}})}if(S)M.push({$sort:{[z({field:S.field,model:E})]:S.direction==="desc"?-1:1}});if(N)M.push({$skip:N});if(R)M.push({$limit:R});return await Z.collection(E).aggregate(M,{session:D}).toArray()},async count({model:E,where:V}){let R=[V?{$match:L({where:V,model:E})}:{$match:{}},{$count:"total"}],N=await Z.collection(E).aggregate(R,{session:D}).toArray();if(!N||N.length===0)return 0;return N[0]?.total??0},async update({model:E,where:V,update:R}){let N=L({where:V,model:E}),S=(await Z.collection(E).findOneAndUpdate(N,{$set:R},{session:D,returnDocument:"after",includeResultMetadata:!0}))?.value??null;if(!S)return null;return S},async updateMany({model:E,where:V,update:R}){let N=L({where:V,model:E});return(await Z.collection(E).updateMany(N,{$set:R},{session:D})).modifiedCount},async delete({model:E,where:V}){let R=L({where:V,model:E});await Z.collection(E).deleteOne(R,{session:D})},async deleteMany({model:E,where:V}){let R=L({where:V,model:E});return(await Z.collection(E).deleteMany(R,{session:D})).deletedCount}}},Y=null,W=null;return W={config:{adapterId:"mongodb-adapter",adapterName:"MongoDB Adapter",usePlural:F?.usePlural??!1,debugLogs:F?.debugLogs??!1,mapKeysTransformInput:{id:"_id"},mapKeysTransformOutput:{_id:"id"},supportsArrays:!0,supportsNumericIds:!1,transaction:F?.client&&(F?.transaction??!0)?async(Z)=>{if(!F.client)return Z(Y(A));let D=F.client.startSession();try{D.startTransaction();let G=await Z(bJ({config:W.config,adapter:X($,D)})(A));return await D.commitTransaction(),G}catch(G){throw await D.abortTransaction(),G}finally{await D.endSession()}}:!1,customTransformInput({action:Z,data:D,field:G,fieldAttributes:z,schema:H,model:U,options:Q}){let B=J(Q);if(G==="_id"||z.references?.field==="id"){if(B)return D;if(Z!=="create")return D;if(Array.isArray(D))return D.map((q)=>{if(typeof q==="string")try{return new AF.ObjectId(q)}catch{return q}return q});if(typeof D==="string")try{return new AF.ObjectId(D)}catch{return D}if(z?.references?.field==="id"&&!z?.required&&D===null)return null;return new AF.ObjectId}return D},customTransformOutput({data:Z,field:D,fieldAttributes:G}){if(D==="id"||G.references?.field==="id"){if(Z instanceof AF.ObjectId)return Z.toHexString();if(Array.isArray(Z))return Z.map((z)=>{if(z instanceof AF.ObjectId)return z.toHexString();return z});return Z}return Z},customIdGenerator(){return new AF.ObjectId().toString()}},adapter:X($)},Y=bJ(W),(Z)=>{return A=Z,Y(Z)}};function xo($,F=256){if(typeof $!=="string")return"";return $.slice(0,F).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var RO=l8(DY(),1),GM0=new RO.Schema({user_id:{type:String,ref:"User"},name:String,goal:String,created_at:{type:Date,default:Date.now},streak:{type:Number,default:0},last_completed_date:String}),D2=RO.default.model("Workspace",GM0);var cU=null,qO1=($)=>{if(cU)return cU;return console.log(tF.BETTER_AUTH_BASE_URL),cU=ko({secret:tF.BETTER_AUTH_SECRET,baseURL:tF.BETTER_AUTH_BASE_URL,logger:{disabled:!1,disableColors:!1,level:"error",log:(F,A,...J)=>{console.log(`[${F}] ${A}`,...J)}},trustedOrigins:[tF.BETTER_AUTH_DOMAIN_URL,"http://localhost:3000","http://localhost:5173"],database:go($.db(),$),emailAndPassword:{enabled:!0,disableSignUp:!1,requireEmailVerification:!1,minPasswordLength:8,maxPasswordLength:128,autoSignIn:!0},advanced:{defaultCookieAttributes:{httpOnly:!0,secure:!0,sameSite:"none",partitioned:!0}},user:{additionalFields:{first_name:{type:"string",required:!1},last_name:{type:"string",required:!1},subscription_tier:{type:"string",defaultValue:"free"},workspace_limit:{type:"number",defaultValue:1},ai_generation_limit:{type:"number",defaultValue:10},is_premium:{type:"boolean",defaultValue:!1}}},databaseHooks:{user:{create:{after:async(F)=>{try{await D2.create({user_id:F.id,name:"My Workspace",goal:"My goal"})}catch(A){console.error("Error in creating hooks",A)}}}}}}),cU},LO1=()=>{if(!cU)throw Error("Auth not initialised");return cU};var v8={};l2(v8,{IsUndefined:()=>c4,IsUint8Array:()=>sJ,IsSymbol:()=>ho,IsString:()=>V2,IsRegExp:()=>EE,IsObject:()=>n6,IsNumber:()=>t7,IsNull:()=>uo,IsIterator:()=>yo,IsFunction:()=>vo,IsDate:()=>hD,IsBoolean:()=>tJ,IsBigInt:()=>LE,IsAsyncIterator:()=>fo,IsArray:()=>d4,HasPropertyKey:()=>IO});function IO($,F){return F in $}function fo($){return n6($)&&!d4($)&&!sJ($)&&Symbol.asyncIterator in $}function d4($){return Array.isArray($)}function LE($){return typeof $==="bigint"}function tJ($){return typeof $==="boolean"}function hD($){return $ instanceof globalThis.Date}function vo($){return typeof $==="function"}function yo($){return n6($)&&!d4($)&&!sJ($)&&Symbol.iterator in $}function uo($){return $===null}function t7($){return typeof $==="number"}function n6($){return typeof $==="object"&&$!==null}function EE($){return $ instanceof globalThis.RegExp}function V2($){return typeof $==="string"}function ho($){return typeof $==="symbol"}function sJ($){return $ instanceof globalThis.Uint8Array}function c4($){return $===void 0}function zM0($){return $.map((F)=>TO(F))}function HM0($){return new Date($.getTime())}function UM0($){return new Uint8Array($)}function QM0($){return new RegExp($.source,$.flags)}function KM0($){let F={};for(let A of Object.getOwnPropertyNames($))F[A]=TO($[A]);for(let A of Object.getOwnPropertySymbols($))F[A]=TO($[A]);return F}function TO($){return d4($)?zM0($):hD($)?HM0($):sJ($)?UM0($):EE($)?QM0($):n6($)?KM0($):$}function y2($){return TO($)}function lU($,F){return F===void 0?y2($):y2({...F,...$})}function jO($){return R0($)&&globalThis.Symbol.asyncIterator in $}function OO($){return R0($)&&globalThis.Symbol.iterator in $}function mo($){return R0($)&&(globalThis.Object.getPrototypeOf($)===Object.prototype||globalThis.Object.getPrototypeOf($)===null)}function SO($){return $ instanceof globalThis.Promise}function q3($){return $ instanceof Date&&globalThis.Number.isFinite($.getTime())}function EO1($){return $ instanceof globalThis.Map}function VO1($){return $ instanceof globalThis.Set}function c5($){return globalThis.ArrayBuffer.isView($)}function pU($){return $ instanceof globalThis.Uint8Array}function Q0($,F){return F in $}function R0($){return $!==null&&typeof $==="object"}function D0($){return globalThis.Array.isArray($)&&!globalThis.ArrayBuffer.isView($)}function u2($){return $===void 0}function oJ($){return $===null}function EA($){return typeof $==="boolean"}function A0($){return typeof $==="number"}function _O($){return globalThis.Number.isInteger($)}function D8($){return typeof $==="bigint"}function W6($){return typeof $==="string"}function YW($){return typeof $==="function"}function eJ($){return typeof $==="symbol"}function s7($){return D8($)||EA($)||oJ($)||A0($)||W6($)||eJ($)||u2($)}var O2;(function($){$.InstanceMode="default",$.ExactOptionalPropertyTypes=!1,$.AllowArrayObject=!1,$.AllowNaN=!1,$.AllowNullVoid=!1;function F(W,Z){return $.ExactOptionalPropertyTypes?Z in W:W[Z]!==void 0}$.IsExactOptionalProperty=F;function A(W){let Z=R0(W);return $.AllowArrayObject?Z:Z&&!D0(W)}$.IsObjectLike=A;function J(W){return A(W)&&!(W instanceof Date)&&!(W instanceof Uint8Array)}$.IsRecordLike=J;function X(W){return $.AllowNaN?A0(W):Number.isFinite(W)}$.IsNumberLike=X;function Y(W){let Z=u2(W);return $.AllowNullVoid?Z||W===null:Z}$.IsVoidLike=Y})(O2||(O2={}));function BM0($){return globalThis.Object.freeze($).map((F)=>VE(F))}function wM0($){return $}function qM0($){return $}function LM0($){return $}function EM0($){let F={};for(let A of Object.getOwnPropertyNames($))F[A]=VE($[A]);for(let A of Object.getOwnPropertySymbols($))F[A]=VE($[A]);return globalThis.Object.freeze(F)}function VE($){return d4($)?BM0($):hD($)?wM0($):sJ($)?qM0($):EE($)?LM0($):n6($)?EM0($):$}function U1($,F){let A=F!==void 0?{...F,...$}:$;switch(O2.InstanceMode){case"freeze":return VE(A);case"clone":return y2(A);default:return A}}class z0 extends Error{constructor($){super($)}}var S2=Symbol.for("TypeBox.Transform"),JF=Symbol.for("TypeBox.Readonly"),H9=Symbol.for("TypeBox.Optional"),l5=Symbol.for("TypeBox.Hint"),a=Symbol.for("TypeBox.Kind");function iU($){return n6($)&&$[JF]==="Readonly"}function $7($){return n6($)&&$[H9]==="Optional"}function co($){return o0($,"Any")}function lo($){return o0($,"Argument")}function XF($){return o0($,"Array")}function mD($){return o0($,"AsyncIterator")}function dD($){return o0($,"BigInt")}function $X($){return o0($,"Boolean")}function YF($){return o0($,"Computed")}function WF($){return o0($,"Constructor")}function VM0($){return o0($,"Date")}function ZF($){return o0($,"Function")}function DF($){return o0($,"Integer")}function z4($){return o0($,"Intersect")}function cD($){return o0($,"Iterator")}function o0($,F){return n6($)&&a in $&&$[a]===F}function kO($){return tJ($)||t7($)||V2($)}function o7($){return o0($,"Literal")}function e7($){return o0($,"MappedKey")}function h2($){return o0($,"MappedResult")}function WW($){return o0($,"Never")}function NM0($){return o0($,"Not")}function NE($){return o0($,"Null")}function GF($){return o0($,"Number")}function l4($){return o0($,"Object")}function lD($){return o0($,"Promise")}function pD($){return o0($,"Record")}function R4($){return o0($,"Ref")}function po($){return o0($,"RegExp")}function FX($){return o0($,"String")}function CE($){return o0($,"Symbol")}function $5($){return o0($,"TemplateLiteral")}function CM0($){return o0($,"This")}function P6($){return n6($)&&S2 in $}function F5($){return o0($,"Tuple")}function AX($){return o0($,"Undefined")}function Z6($){return o0($,"Union")}function MM0($){return o0($,"Uint8Array")}function PM0($){return o0($,"Unknown")}function RM0($){return o0($,"Unsafe")}function IM0($){return o0($,"Void")}function ZW($){return n6($)&&a in $&&V2($[a])}function $4($){return co($)||lo($)||XF($)||$X($)||dD($)||mD($)||YF($)||WF($)||VM0($)||ZF($)||DF($)||z4($)||cD($)||o7($)||e7($)||h2($)||WW($)||NM0($)||NE($)||GF($)||l4($)||lD($)||pD($)||R4($)||po($)||FX($)||CE($)||$5($)||CM0($)||F5($)||AX($)||Z6($)||MM0($)||PM0($)||RM0($)||IM0($)||ZW($)}var t={};l2(t,{TypeGuardUnknownTypeError:()=>NO1,IsVoid:()=>DS1,IsUnsafe:()=>ZS1,IsUnknown:()=>WS1,IsUnionLiteral:()=>gM0,IsUnion:()=>ro,IsUndefined:()=>XS1,IsUint8Array:()=>YS1,IsTuple:()=>JS1,IsTransform:()=>AS1,IsThis:()=>FS1,IsTemplateLiteral:()=>$S1,IsSymbol:()=>eO1,IsString:()=>oO1,IsSchema:()=>m2,IsRegExp:()=>sO1,IsRef:()=>tO1,IsRecursive:()=>xM0,IsRecord:()=>aO1,IsReadonly:()=>SM0,IsProperties:()=>bO,IsPromise:()=>rO1,IsOptional:()=>_M0,IsObject:()=>nO1,IsNumber:()=>iO1,IsNull:()=>pO1,IsNot:()=>lO1,IsNever:()=>cO1,IsMappedResult:()=>dO1,IsMappedKey:()=>mO1,IsLiteralValue:()=>hO1,IsLiteralString:()=>yO1,IsLiteralNumber:()=>uO1,IsLiteralBoolean:()=>bM0,IsLiteral:()=>PE,IsKindOf:()=>p0,IsKind:()=>GS1,IsIterator:()=>vO1,IsIntersect:()=>fO1,IsInteger:()=>gO1,IsImport:()=>kM0,IsFunction:()=>xO1,IsDate:()=>bO1,IsConstructor:()=>kO1,IsComputed:()=>_O1,IsBoolean:()=>SO1,IsBigInt:()=>OO1,IsAsyncIterator:()=>jO1,IsArray:()=>TO1,IsArgument:()=>IO1,IsAny:()=>RO1});class NO1 extends z0{}var TM0=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function CO1($){try{return new RegExp($),!0}catch{return!1}}function io($){if(!V2($))return!1;for(let F=0;F<$.length;F++){let A=$.charCodeAt(F);if(A>=7&&A<=13||A===27||A===127)return!1}return!0}function MO1($){return no($)||m2($)}function ME($){return c4($)||LE($)}function N2($){return c4($)||t7($)}function no($){return c4($)||tJ($)}function r6($){return c4($)||V2($)}function jM0($){return c4($)||V2($)&&io($)&&CO1($)}function OM0($){return c4($)||V2($)&&io($)}function PO1($){return c4($)||m2($)}function SM0($){return n6($)&&$[JF]==="Readonly"}function _M0($){return n6($)&&$[H9]==="Optional"}function RO1($){return p0($,"Any")&&r6($.$id)}function IO1($){return p0($,"Argument")&&t7($.index)}function TO1($){return p0($,"Array")&&$.type==="array"&&r6($.$id)&&m2($.items)&&N2($.minItems)&&N2($.maxItems)&&no($.uniqueItems)&&PO1($.contains)&&N2($.minContains)&&N2($.maxContains)}function jO1($){return p0($,"AsyncIterator")&&$.type==="AsyncIterator"&&r6($.$id)&&m2($.items)}function OO1($){return p0($,"BigInt")&&$.type==="bigint"&&r6($.$id)&&ME($.exclusiveMaximum)&&ME($.exclusiveMinimum)&&ME($.maximum)&&ME($.minimum)&&ME($.multipleOf)}function SO1($){return p0($,"Boolean")&&$.type==="boolean"&&r6($.$id)}function _O1($){return p0($,"Computed")&&V2($.target)&&d4($.parameters)&&$.parameters.every((F)=>m2(F))}function kO1($){return p0($,"Constructor")&&$.type==="Constructor"&&r6($.$id)&&d4($.parameters)&&$.parameters.every((F)=>m2(F))&&m2($.returns)}function bO1($){return p0($,"Date")&&$.type==="Date"&&r6($.$id)&&N2($.exclusiveMaximumTimestamp)&&N2($.exclusiveMinimumTimestamp)&&N2($.maximumTimestamp)&&N2($.minimumTimestamp)&&N2($.multipleOfTimestamp)}function xO1($){return p0($,"Function")&&$.type==="Function"&&r6($.$id)&&d4($.parameters)&&$.parameters.every((F)=>m2(F))&&m2($.returns)}function kM0($){return p0($,"Import")&&IO($,"$defs")&&n6($.$defs)&&bO($.$defs)&&IO($,"$ref")&&V2($.$ref)&&$.$ref in $.$defs}function gO1($){return p0($,"Integer")&&$.type==="integer"&&r6($.$id)&&N2($.exclusiveMaximum)&&N2($.exclusiveMinimum)&&N2($.maximum)&&N2($.minimum)&&N2($.multipleOf)}function bO($){return n6($)&&Object.entries($).every(([F,A])=>io(F)&&m2(A))}function fO1($){return p0($,"Intersect")&&(V2($.type)&&$.type!=="object"?!1:!0)&&d4($.allOf)&&$.allOf.every((F)=>m2(F)&&!AS1(F))&&r6($.type)&&(no($.unevaluatedProperties)||PO1($.unevaluatedProperties))&&r6($.$id)}function vO1($){return p0($,"Iterator")&&$.type==="Iterator"&&r6($.$id)&&m2($.items)}function p0($,F){return n6($)&&a in $&&$[a]===F}function yO1($){return PE($)&&V2($.const)}function uO1($){return PE($)&&t7($.const)}function bM0($){return PE($)&&tJ($.const)}function PE($){return p0($,"Literal")&&r6($.$id)&&hO1($.const)}function hO1($){return tJ($)||t7($)||V2($)}function mO1($){return p0($,"MappedKey")&&d4($.keys)&&$.keys.every((F)=>t7(F)||V2(F))}function dO1($){return p0($,"MappedResult")&&bO($.properties)}function cO1($){return p0($,"Never")&&n6($.not)&&Object.getOwnPropertyNames($.not).length===0}function lO1($){return p0($,"Not")&&m2($.not)}function pO1($){return p0($,"Null")&&$.type==="null"&&r6($.$id)}function iO1($){return p0($,"Number")&&$.type==="number"&&r6($.$id)&&N2($.exclusiveMaximum)&&N2($.exclusiveMinimum)&&N2($.maximum)&&N2($.minimum)&&N2($.multipleOf)}function nO1($){return p0($,"Object")&&$.type==="object"&&r6($.$id)&&bO($.properties)&&MO1($.additionalProperties)&&N2($.minProperties)&&N2($.maxProperties)}function rO1($){return p0($,"Promise")&&$.type==="Promise"&&r6($.$id)&&m2($.item)}function aO1($){return p0($,"Record")&&$.type==="object"&&r6($.$id)&&MO1($.additionalProperties)&&n6($.patternProperties)&&((F)=>{let A=Object.getOwnPropertyNames(F.patternProperties);return A.length===1&&CO1(A[0])&&n6(F.patternProperties)&&m2(F.patternProperties[A[0]])})($)}function xM0($){return n6($)&&l5 in $&&$[l5]==="Recursive"}function tO1($){return p0($,"Ref")&&r6($.$id)&&V2($.$ref)}function sO1($){return p0($,"RegExp")&&r6($.$id)&&V2($.source)&&V2($.flags)&&N2($.maxLength)&&N2($.minLength)}function oO1($){return p0($,"String")&&$.type==="string"&&r6($.$id)&&N2($.minLength)&&N2($.maxLength)&&jM0($.pattern)&&OM0($.format)}function eO1($){return p0($,"Symbol")&&$.type==="symbol"&&r6($.$id)}function $S1($){return p0($,"TemplateLiteral")&&$.type==="string"&&V2($.pattern)&&$.pattern[0]==="^"&&$.pattern[$.pattern.length-1]==="$"}function FS1($){return p0($,"This")&&r6($.$id)&&V2($.$ref)}function AS1($){return n6($)&&S2 in $}function JS1($){return p0($,"Tuple")&&$.type==="array"&&r6($.$id)&&t7($.minItems)&&t7($.maxItems)&&$.minItems===$.maxItems&&(c4($.items)&&c4($.additionalItems)&&$.minItems===0||d4($.items)&&$.items.every((F)=>m2(F)))}function XS1($){return p0($,"Undefined")&&$.type==="undefined"&&r6($.$id)}function gM0($){return ro($)&&$.anyOf.every((F)=>yO1(F)||uO1(F))}function ro($){return p0($,"Union")&&r6($.$id)&&n6($)&&d4($.anyOf)&&$.anyOf.every((F)=>m2(F))}function YS1($){return p0($,"Uint8Array")&&$.type==="Uint8Array"&&r6($.$id)&&N2($.minByteLength)&&N2($.maxByteLength)}function WS1($){return p0($,"Unknown")&&r6($.$id)}function ZS1($){return p0($,"Unsafe")}function DS1($){return p0($,"Void")&&$.type==="void"&&r6($.$id)}function GS1($){return n6($)&&a in $&&V2($[a])&&!TM0.includes($[a])}function m2($){return n6($)&&(RO1($)||IO1($)||TO1($)||SO1($)||OO1($)||jO1($)||_O1($)||kO1($)||bO1($)||xO1($)||gO1($)||fO1($)||vO1($)||PE($)||mO1($)||dO1($)||cO1($)||lO1($)||pO1($)||iO1($)||nO1($)||rO1($)||aO1($)||tO1($)||sO1($)||oO1($)||eO1($)||$S1($)||FS1($)||JS1($)||XS1($)||ro($)||YS1($)||WS1($)||ZS1($)||DS1($)||GS1($))}var zS1="(true|false)",xO="(0|[1-9][0-9]*)",HS1="(.*)";var DW="^(0|[1-9][0-9]*)$",GW="^(.*)$",US1="^(?!.*)$";var v6={};l2(v6,{Set:()=>hM0,Has:()=>uM0,Get:()=>mM0,Entries:()=>fM0,Delete:()=>yM0,Clear:()=>vM0});var nU=new Map;function fM0(){return new Map(nU)}function vM0(){return nU.clear()}function yM0($){return nU.delete($)}function uM0($){return nU.has($)}function hM0($,F){nU.set($,F)}function mM0($){return nU.get($)}var U9={};l2(U9,{Set:()=>iM0,Has:()=>pM0,Get:()=>nM0,Entries:()=>dM0,Delete:()=>lM0,Clear:()=>cM0});var rU=new Map;function dM0(){return new Map(rU)}function cM0(){return rU.clear()}function lM0($){return rU.delete($)}function pM0($){return rU.has($)}function iM0($,F){rU.set($,F)}function nM0($){return rU.get($)}function QS1($,F){return $.includes(F)}function KS1($){return[...new Set($)]}function rM0($,F){return $.filter((A)=>F.includes(A))}function aM0($,F){return $.reduce((A,J)=>{return rM0(A,J)},F)}function BS1($){return $.length===1?$[0]:$.length>1?aM0($.slice(1),$[0]):[]}function wS1($){let F=[];for(let A of $)F.push(...A);return F}function zW($){return U1({[a]:"Any"},$)}function aU($,F){return U1({[a]:"Array",type:"array",items:$},F)}function qS1($){return U1({[a]:"Argument",index:$})}function tU($,F){return U1({[a]:"AsyncIterator",type:"AsyncIterator",items:$},F)}function _2($,F,A){return U1({[a]:"Computed",target:$,parameters:F},A)}function tM0($,F){let{[F]:A,...J}=$;return J}function H4($,F){return F.reduce((A,J)=>tM0(A,J),$)}function g0($){return U1({[a]:"Never",not:{}},$)}function B6($){return U1({[a]:"MappedResult",properties:$})}function sU($,F,A){return U1({[a]:"Constructor",type:"Constructor",parameters:$,returns:F},A)}function VA($,F,A){return U1({[a]:"Function",type:"Function",parameters:$,returns:F},A)}function RE($,F){return U1({[a]:"Union",anyOf:$},F)}function sM0($){return $.some((F)=>$7(F))}function LS1($){return $.map((F)=>$7(F)?oM0(F):F)}function oM0($){return H4($,[H9])}function eM0($,F){return sM0($)?y8(RE(LS1($),F)):RE(LS1($),F)}function NA($,F){return $.length===1?U1($[0],F):$.length===0?g0(F):eM0($,F)}function R6($,F){return $.length===0?g0(F):$.length===1?U1($[0],F):RE($,F)}class ao extends z0{}function $P0($){return $.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}function to($,F,A){return $[F]===A&&$.charCodeAt(F-1)!==92}function XX($,F){return to($,F,"(")}function IE($,F){return to($,F,")")}function ES1($,F){return to($,F,"|")}function FP0($){if(!(XX($,0)&&IE($,$.length-1)))return!1;let F=0;for(let A=0;A<$.length;A++){if(XX($,A))F+=1;if(IE($,A))F-=1;if(F===0&&A!==$.length-1)return!1}return!0}function AP0($){return $.slice(1,$.length-1)}function JP0($){let F=0;for(let A=0;A<$.length;A++){if(XX($,A))F+=1;if(IE($,A))F-=1;if(ES1($,A)&&F===0)return!0}return!1}function XP0($){for(let F=0;F<$.length;F++)if(XX($,F))return!0;return!1}function YP0($){let[F,A]=[0,0],J=[];for(let Y=0;Y<$.length;Y++){if(XX($,Y))F+=1;if(IE($,Y))F-=1;if(ES1($,Y)&&F===0){let W=$.slice(A,Y);if(W.length>0)J.push(oU(W));A=Y+1}}let X=$.slice(A);if(X.length>0)J.push(oU(X));if(J.length===0)return{type:"const",const:""};if(J.length===1)return J[0];return{type:"or",expr:J}}function WP0($){function F(X,Y){if(!XX(X,Y))throw new ao("TemplateLiteralParser: Index must point to open parens");let W=0;for(let Z=Y;Z<X.length;Z++){if(XX(X,Z))W+=1;if(IE(X,Z))W-=1;if(W===0)return[Y,Z]}throw new ao("TemplateLiteralParser: Unclosed group parens in expression")}function A(X,Y){for(let W=Y;W<X.length;W++)if(XX(X,W))return[Y,W];return[Y,X.length]}let J=[];for(let X=0;X<$.length;X++)if(XX($,X)){let[Y,W]=F($,X),Z=$.slice(Y,W+1);J.push(oU(Z)),X=W}else{let[Y,W]=A($,X),Z=$.slice(Y,W);if(Z.length>0)J.push(oU(Z));X=W-1}return J.length===0?{type:"const",const:""}:J.length===1?J[0]:{type:"and",expr:J}}function oU($){return FP0($)?oU(AP0($)):JP0($)?YP0($):XP0($)?WP0($):{type:"const",const:$P0($)}}function eU($){return oU($.slice(1,$.length-1))}class VS1 extends z0{}function ZP0($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="0"&&$.expr[1].type==="const"&&$.expr[1].const==="[1-9][0-9]*"}function DP0($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="true"&&$.expr[1].type==="const"&&$.expr[1].const==="false"}function GP0($){return $.type==="const"&&$.const===".*"}function iD($){return ZP0($)||GP0($)?!1:DP0($)?!0:$.type==="and"?$.expr.every((F)=>iD(F)):$.type==="or"?$.expr.every((F)=>iD(F)):$.type==="const"?!0:(()=>{throw new VS1("Unknown expression type")})()}function gO($){let F=eU($.pattern);return iD(F)}class NS1 extends z0{}function*CS1($){if($.length===1)return yield*$[0];for(let F of $[0])for(let A of CS1($.slice(1)))yield`${F}${A}`}function*zP0($){return yield*CS1($.expr.map((F)=>[...TE(F)]))}function*HP0($){for(let F of $.expr)yield*TE(F)}function*UP0($){return yield $.const}function*TE($){return $.type==="and"?yield*zP0($):$.type==="or"?yield*HP0($):$.type==="const"?yield*UP0($):(()=>{throw new NS1("Unknown expression")})()}function $Q($){let F=eU($.pattern);return iD(F)?[...TE(F)]:[]}function e0($,F){return U1({[a]:"Literal",const:$,type:typeof $},F)}function fO($){return U1({[a]:"Boolean",type:"boolean"},$)}function FQ($){return U1({[a]:"BigInt",type:"bigint"},$)}function p5($){return U1({[a]:"Number",type:"number"},$)}function L3($){return U1({[a]:"String",type:"string"},$)}function*QP0($){let F=$.trim().replace(/"|'/g,"");return F==="boolean"?yield fO():F==="number"?yield p5():F==="bigint"?yield FQ():F==="string"?yield L3():yield(()=>{let A=F.split("|").map((J)=>e0(J.trim()));return A.length===0?g0():A.length===1?A[0]:NA(A)})()}function*KP0($){if($[1]!=="{"){let F=e0("$"),A=so($.slice(1));return yield*[F,...A]}for(let F=2;F<$.length;F++)if($[F]==="}"){let A=QP0($.slice(2,F)),J=so($.slice(F+1));return yield*[...A,...J]}yield e0($)}function*so($){for(let F=0;F<$.length;F++)if($[F]==="$"){let A=e0($.slice(0,F)),J=KP0($.slice(F));return yield*[A,...J]}yield e0($)}function MS1($){return[...so($)]}class PS1 extends z0{}function BP0($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function RS1($,F){return $5($)?$.pattern.slice(1,$.pattern.length-1):Z6($)?`(${$.anyOf.map((A)=>RS1(A,F)).join("|")})`:GF($)?`${F}${xO}`:DF($)?`${F}${xO}`:dD($)?`${F}${xO}`:FX($)?`${F}${HS1}`:o7($)?`${F}${BP0($.const.toString())}`:$X($)?`${F}${zS1}`:(()=>{throw new PS1(`Unexpected Kind '${$[a]}'`)})()}function oo($){return`^${$.map((F)=>RS1(F,"")).join("")}$`}function nD($){let A=$Q($).map((J)=>e0(J));return NA(A)}function vO($,F){let A=V2($)?oo(MS1($)):oo($);return U1({[a]:"TemplateLiteral",type:"string",pattern:A},F)}function wP0($){return $Q($).map((A)=>A.toString())}function qP0($){let F=[];for(let A of $)F.push(...F7(A));return F}function LP0($){return[$.toString()]}function F7($){return[...new Set($5($)?wP0($):Z6($)?qP0($.anyOf):o7($)?LP0($.const):GF($)?["[number]"]:DF($)?["[number]"]:[])]}function EP0($,F,A){let J={};for(let X of Object.getOwnPropertyNames(F))J[X]=HW($,F7(F[X]),A);return J}function VP0($,F,A){return EP0($,F.properties,A)}function IS1($,F,A){let J=VP0($,F,A);return B6(J)}function jS1($,F){return $.map((A)=>OS1(A,F))}function NP0($){return $.filter((F)=>!WW(F))}function CP0($,F){return yO(NP0(jS1($,F)))}function MP0($){return $.some((F)=>WW(F))?[]:$}function PP0($,F){return NA(MP0(jS1($,F)))}function RP0($,F){return F in $?$[F]:F==="[number]"?NA($):g0()}function IP0($,F){return F==="[number]"?$:g0()}function TP0($,F){return F in $?$[F]:g0()}function OS1($,F){return z4($)?CP0($.allOf,F):Z6($)?PP0($.anyOf,F):F5($)?RP0($.items??[],F):XF($)?IP0($.items,F):l4($)?TP0($.properties,F):g0()}function jE($,F){return F.map((A)=>OS1($,A))}function TS1($,F){return NA(jE($,F))}function HW($,F,A){if(R4($)||R4(F)){if(!$4($)||!$4(F))throw new z0("Index types using Ref parameters require both Type and Key to be of TSchema");return _2("Index",[$,F])}if(h2(F))return IS1($,F,A);if(e7(F))return SS1($,F,A);return U1($4(F)?TS1($,F7(F)):TS1($,F),A)}function jP0($,F,A){return{[F]:HW($,[F],y2(A))}}function OP0($,F,A){return F.reduce((J,X)=>{return{...J,...jP0($,X,A)}},{})}function SP0($,F,A){return OP0($,F.keys,A)}function SS1($,F,A){let J=SP0($,F,A);return B6(J)}function AQ($,F){return U1({[a]:"Iterator",type:"Iterator",items:$},F)}function _P0($){return globalThis.Object.keys($).filter((F)=>!$7($[F]))}function kP0($,F){let A=_P0($),J=A.length>0?{[a]:"Object",type:"object",required:A,properties:$}:{[a]:"Object",type:"object",properties:$};return U1(J,F)}var I6=kP0;function uO($,F){return U1({[a]:"Promise",type:"Promise",item:$},F)}function bP0($){return U1(H4($,[JF]))}function xP0($){return U1({...$,[JF]:"Readonly"})}function gP0($,F){return F===!1?bP0($):xP0($)}function A7($,F){let A=F??!0;return h2($)?_S1($,A):gP0($,A)}function fP0($,F){let A={};for(let J of globalThis.Object.getOwnPropertyNames($))A[J]=A7($[J],F);return A}function vP0($,F){return fP0($.properties,F)}function _S1($,F){let A=vP0($,F);return B6(A)}function i5($,F){return U1($.length>0?{[a]:"Tuple",type:"array",items:$,additionalItems:!1,minItems:$.length,maxItems:$.length}:{[a]:"Tuple",type:"array",minItems:$.length,maxItems:$.length},F)}function kS1($,F){return $ in F?n5($,F[$]):B6(F)}function yP0($){return{[$]:e0($)}}function uP0($){let F={};for(let A of $)F[A]=e0(A);return F}function hP0($,F){return QS1(F,$)?yP0($):uP0(F)}function mP0($,F){let A=hP0($,F);return kS1($,A)}function OE($,F){return F.map((A)=>n5($,A))}function dP0($,F){let A={};for(let J of globalThis.Object.getOwnPropertyNames(F))A[J]=n5($,F[J]);return A}function n5($,F){let A={...F};return $7(F)?y8(n5($,H4(F,[H9]))):iU(F)?A7(n5($,H4(F,[JF]))):h2(F)?kS1($,F.properties):e7(F)?mP0($,F.keys):WF(F)?sU(OE($,F.parameters),n5($,F.returns),A):ZF(F)?VA(OE($,F.parameters),n5($,F.returns),A):mD(F)?tU(n5($,F.items),A):cD(F)?AQ(n5($,F.items),A):z4(F)?u8(OE($,F.allOf),A):Z6(F)?R6(OE($,F.anyOf),A):F5(F)?i5(OE($,F.items??[]),A):l4(F)?I6(dP0($,F.properties),A):XF(F)?aU(n5($,F.items),A):lD(F)?uO(n5($,F.item),A):F}function cP0($,F){let A={};for(let J of $)A[J]=n5(J,F);return A}function bS1($,F,A){let J=$4($)?F7($):$,X=F({[a]:"MappedKey",keys:J}),Y=cP0(J,X);return I6(Y,A)}function lP0($){return U1(H4($,[H9]))}function pP0($){return U1({...$,[H9]:"Optional"})}function iP0($,F){return F===!1?lP0($):pP0($)}function y8($,F){let A=F??!0;return h2($)?xS1($,A):iP0($,A)}function nP0($,F){let A={};for(let J of globalThis.Object.getOwnPropertyNames($))A[J]=y8($[J],F);return A}function rP0($,F){return nP0($.properties,F)}function xS1($,F){let A=rP0($,F);return B6(A)}function SE($,F={}){let A=$.every((X)=>l4(X)),J=$4(F.unevaluatedProperties)?{unevaluatedProperties:F.unevaluatedProperties}:{};return U1(F.unevaluatedProperties===!1||$4(F.unevaluatedProperties)||A?{...J,[a]:"Intersect",type:"object",allOf:$}:{...J,[a]:"Intersect",allOf:$},F)}function aP0($){return $.every((F)=>$7(F))}function tP0($){return H4($,[H9])}function gS1($){return $.map((F)=>$7(F)?tP0(F):F)}function sP0($,F){return aP0($)?y8(SE(gS1($),F)):SE(gS1($),F)}function yO($,F={}){if($.length===1)return U1($[0],F);if($.length===0)return g0(F);if($.some((A)=>P6(A)))throw Error("Cannot intersect transform types");return sP0($,F)}function u8($,F){if($.length===1)return U1($[0],F);if($.length===0)return g0(F);if($.some((A)=>P6(A)))throw Error("Cannot intersect transform types");return SE($,F)}function r5(...$){let[F,A]=typeof $[0]==="string"?[$[0],$[1]]:[$[0].$id,$[1]];if(typeof F!=="string")throw new z0("Ref: $ref must be a string");return U1({[a]:"Ref",$ref:F},A)}function oP0($,F){return _2("Awaited",[_2($,F)])}function eP0($){return _2("Awaited",[r5($)])}function $R0($){return u8(fS1($))}function FR0($){return R6(fS1($))}function AR0($){return JQ($)}function fS1($){return $.map((F)=>JQ(F))}function JQ($,F){return U1(YF($)?oP0($.target,$.parameters):z4($)?$R0($.allOf):Z6($)?FR0($.anyOf):lD($)?AR0($.item):R4($)?eP0($.$ref):$,F)}function vS1($){let F=[];for(let A of $)F.push(J7(A));return F}function JR0($){let F=vS1($);return wS1(F)}function XR0($){let F=vS1($);return BS1(F)}function YR0($){return $.map((F,A)=>A.toString())}function WR0($){return["[number]"]}function ZR0($){return globalThis.Object.getOwnPropertyNames($)}function DR0($){if(!eo)return[];return globalThis.Object.getOwnPropertyNames($).map((A)=>{return A[0]==="^"&&A[A.length-1]==="$"?A.slice(1,A.length-1):A})}function J7($){return z4($)?JR0($.allOf):Z6($)?XR0($.anyOf):F5($)?YR0($.items??[]):XF($)?WR0($.items):l4($)?ZR0($.properties):pD($)?DR0($.patternProperties):[]}var eo=!1;function YX($){eo=!0;let F=J7($);return eo=!1,`^(${F.map((J)=>`(${J})`).join("|")})$`}function GR0($,F){return _2("KeyOf",[_2($,F)])}function zR0($){return _2("KeyOf",[r5($)])}function HR0($,F){let A=J7($),J=UR0(A),X=NA(J);return U1(X,F)}function UR0($){return $.map((F)=>F==="[number]"?p5():e0(F))}function XQ($,F){return YF($)?GR0($.target,$.parameters):R4($)?zR0($.$ref):h2($)?yS1($,F):HR0($,F)}function QR0($,F){let A={};for(let J of globalThis.Object.getOwnPropertyNames($))A[J]=XQ($[J],y2(F));return A}function KR0($,F){return QR0($.properties,F)}function yS1($,F){let A=KR0($,F);return B6(A)}function hO($){let F=J7($),A=jE($,F);return F.map((J,X)=>[F[X],A[X]])}function BR0($){let F=[];for(let A of $)F.push(...J7(A));return KS1(F)}function wR0($){return $.filter((F)=>!WW(F))}function qR0($,F){let A=[];for(let J of $)A.push(...jE(J,[F]));return wR0(A)}function LR0($,F){let A={};for(let J of F)A[J]=yO(qR0($,J));return A}function uS1($,F){let A=BR0($),J=LR0($,A);return I6(J,F)}function mO($){return U1({[a]:"Date",type:"Date"},$)}function dO($){return U1({[a]:"Null",type:"null"},$)}function cO($){return U1({[a]:"Symbol",type:"symbol"},$)}function lO($){return U1({[a]:"Undefined",type:"undefined"},$)}function pO($){return U1({[a]:"Uint8Array",type:"Uint8Array"},$)}function zF($){return U1({[a]:"Unknown"},$)}function ER0($){return $.map((F)=>$e(F,!1))}function VR0($){let F={};for(let A of globalThis.Object.getOwnPropertyNames($))F[A]=A7($e($[A],!1));return F}function iO($,F){return F===!0?$:A7($)}function $e($,F){return fo($)?iO(zW(),F):yo($)?iO(zW(),F):d4($)?A7(i5(ER0($))):sJ($)?pO():hD($)?mO():n6($)?iO(I6(VR0($)),F):vo($)?iO(VA([],zF()),F):c4($)?lO():uo($)?dO():ho($)?cO():LE($)?FQ():t7($)?e0($):tJ($)?e0($):V2($)?e0($):I6({})}function hS1($,F){return U1($e($,!0),F)}function mS1($,F){return WF($)?i5($.parameters,F):g0(F)}function dS1($,F){if(c4($))throw Error("Enum undefined or empty");let A=globalThis.Object.getOwnPropertyNames($).filter((Y)=>isNaN(Y)).map((Y)=>$[Y]),X=[...new Set(A)].map((Y)=>e0(Y));return R6(X,{...F,[l5]:"Enum"})}class nS1 extends z0{}var Q1;(function($){$[$.Union=0]="Union",$[$.True=1]="True",$[$.False=2]="False"})(Q1||(Q1={}));function a5($){return $===Q1.False?$:Q1.True}function YQ($){throw new nS1($)}function t4($){return t.IsNever($)||t.IsIntersect($)||t.IsUnion($)||t.IsUnknown($)||t.IsAny($)}function s4($,F){return t.IsNever(F)?tS1($,F):t.IsIntersect(F)?nO($,F):t.IsUnion(F)?Ye($,F):t.IsUnknown(F)?$_1($,F):t.IsAny(F)?Xe($,F):YQ("StructuralRight")}function Xe($,F){return Q1.True}function NR0($,F){return t.IsIntersect(F)?nO($,F):t.IsUnion(F)&&F.anyOf.some((A)=>t.IsAny(A)||t.IsUnknown(A))?Q1.True:t.IsUnion(F)?Q1.Union:t.IsUnknown(F)?Q1.True:t.IsAny(F)?Q1.True:Q1.Union}function CR0($,F){return t.IsUnknown($)?Q1.False:t.IsAny($)?Q1.Union:t.IsNever($)?Q1.True:Q1.False}function MR0($,F){return t.IsObject(F)&&rO(F)?Q1.True:t4(F)?s4($,F):!t.IsArray(F)?Q1.False:a5(a6($.items,F.items))}function PR0($,F){return t4(F)?s4($,F):!t.IsAsyncIterator(F)?Q1.False:a5(a6($.items,F.items))}function RR0($,F){return t4(F)?s4($,F):t.IsObject(F)?h8($,F):t.IsRecord(F)?t5($,F):t.IsBigInt(F)?Q1.True:Q1.False}function rS1($,F){return t.IsLiteralBoolean($)?Q1.True:t.IsBoolean($)?Q1.True:Q1.False}function IR0($,F){return t4(F)?s4($,F):t.IsObject(F)?h8($,F):t.IsRecord(F)?t5($,F):t.IsBoolean(F)?Q1.True:Q1.False}function TR0($,F){return t4(F)?s4($,F):t.IsObject(F)?h8($,F):!t.IsConstructor(F)?Q1.False:$.parameters.length>F.parameters.length?Q1.False:!$.parameters.every((A,J)=>a5(a6(F.parameters[J],A))===Q1.True)?Q1.False:a5(a6($.returns,F.returns))}function jR0($,F){return t4(F)?s4($,F):t.IsObject(F)?h8($,F):t.IsRecord(F)?t5($,F):t.IsDate(F)?Q1.True:Q1.False}function OR0($,F){return t4(F)?s4($,F):t.IsObject(F)?h8($,F):!t.IsFunction(F)?Q1.False:$.parameters.length>F.parameters.length?Q1.False:!$.parameters.every((A,J)=>a5(a6(F.parameters[J],A))===Q1.True)?Q1.False:a5(a6($.returns,F.returns))}function aS1($,F){return t.IsLiteral($)&&v8.IsNumber($.const)?Q1.True:t.IsNumber($)||t.IsInteger($)?Q1.True:Q1.False}function SR0($,F){return t.IsInteger(F)||t.IsNumber(F)?Q1.True:t4(F)?s4($,F):t.IsObject(F)?h8($,F):t.IsRecord(F)?t5($,F):Q1.False}function nO($,F){return F.allOf.every((A)=>a6($,A)===Q1.True)?Q1.True:Q1.False}function _R0($,F){return $.allOf.some((A)=>a6(A,F)===Q1.True)?Q1.True:Q1.False}function kR0($,F){return t4(F)?s4($,F):!t.IsIterator(F)?Q1.False:a5(a6($.items,F.items))}function bR0($,F){return t.IsLiteral(F)&&F.const===$.const?Q1.True:t4(F)?s4($,F):t.IsObject(F)?h8($,F):t.IsRecord(F)?t5($,F):t.IsString(F)?eS1($,F):t.IsNumber(F)?sS1($,F):t.IsInteger(F)?aS1($,F):t.IsBoolean(F)?rS1($,F):Q1.False}function tS1($,F){return Q1.False}function xR0($,F){return Q1.True}function cS1($){let[F,A]=[$,0];while(!0){if(!t.IsNot(F))break;F=F.not,A+=1}return A%2===0?F:zF()}function gR0($,F){return t.IsNot($)?a6(cS1($),F):t.IsNot(F)?a6($,cS1(F)):YQ("Invalid fallthrough for Not")}function fR0($,F){return t4(F)?s4($,F):t.IsObject(F)?h8($,F):t.IsRecord(F)?t5($,F):t.IsNull(F)?Q1.True:Q1.False}function sS1($,F){return t.IsLiteralNumber($)?Q1.True:t.IsNumber($)||t.IsInteger($)?Q1.True:Q1.False}function vR0($,F){return t4(F)?s4($,F):t.IsObject(F)?h8($,F):t.IsRecord(F)?t5($,F):t.IsInteger(F)||t.IsNumber(F)?Q1.True:Q1.False}function X7($,F){return Object.getOwnPropertyNames($.properties).length===F}function lS1($){return rO($)}function pS1($){return X7($,0)||X7($,1)&&"description"in $.properties&&t.IsUnion($.properties.description)&&$.properties.description.anyOf.length===2&&(t.IsString($.properties.description.anyOf[0])&&t.IsUndefined($.properties.description.anyOf[1])||t.IsString($.properties.description.anyOf[1])&&t.IsUndefined($.properties.description.anyOf[0]))}function Fe($){return X7($,0)}function iS1($){return X7($,0)}function yR0($){return X7($,0)}function uR0($){return X7($,0)}function hR0($){return rO($)}function mR0($){let F=p5();return X7($,0)||X7($,1)&&"length"in $.properties&&a5(a6($.properties.length,F))===Q1.True}function dR0($){return X7($,0)}function rO($){let F=p5();return X7($,0)||X7($,1)&&"length"in $.properties&&a5(a6($.properties.length,F))===Q1.True}function cR0($){let F=VA([zW()],zW());return X7($,0)||X7($,1)&&"then"in $.properties&&a5(a6($.properties.then,F))===Q1.True}function oS1($,F){return a6($,F)===Q1.False?Q1.False:t.IsOptional($)&&!t.IsOptional(F)?Q1.False:Q1.True}function h8($,F){return t.IsUnknown($)?Q1.False:t.IsAny($)?Q1.Union:t.IsNever($)||t.IsLiteralString($)&&lS1(F)||t.IsLiteralNumber($)&&Fe(F)||t.IsLiteralBoolean($)&&iS1(F)||t.IsSymbol($)&&pS1(F)||t.IsBigInt($)&&yR0(F)||t.IsString($)&&lS1(F)||t.IsSymbol($)&&pS1(F)||t.IsNumber($)&&Fe(F)||t.IsInteger($)&&Fe(F)||t.IsBoolean($)&&iS1(F)||t.IsUint8Array($)&&hR0(F)||t.IsDate($)&&uR0(F)||t.IsConstructor($)&&dR0(F)||t.IsFunction($)&&mR0(F)?Q1.True:t.IsRecord($)&&t.IsString(Ae($))?(()=>{return F[l5]==="Record"?Q1.True:Q1.False})():t.IsRecord($)&&t.IsNumber(Ae($))?(()=>{return X7(F,0)?Q1.True:Q1.False})():Q1.False}function lR0($,F){return t4(F)?s4($,F):t.IsRecord(F)?t5($,F):!t.IsObject(F)?Q1.False:(()=>{for(let A of Object.getOwnPropertyNames(F.properties)){if(!(A in $.properties)&&!t.IsOptional(F.properties[A]))return Q1.False;if(t.IsOptional(F.properties[A]))return Q1.True;if(oS1($.properties[A],F.properties[A])===Q1.False)return Q1.False}return Q1.True})()}function pR0($,F){return t4(F)?s4($,F):t.IsObject(F)&&cR0(F)?Q1.True:!t.IsPromise(F)?Q1.False:a5(a6($.item,F.item))}function Ae($){return DW in $.patternProperties?p5():(GW in $.patternProperties)?L3():YQ("Unknown record key pattern")}function Je($){return DW in $.patternProperties?$.patternProperties[DW]:(GW in $.patternProperties)?$.patternProperties[GW]:YQ("Unable to get record value schema")}function t5($,F){let[A,J]=[Ae(F),Je(F)];return t.IsLiteralString($)&&t.IsNumber(A)&&a5(a6($,J))===Q1.True?Q1.True:t.IsUint8Array($)&&t.IsNumber(A)?a6($,J):t.IsString($)&&t.IsNumber(A)?a6($,J):t.IsArray($)&&t.IsNumber(A)?a6($,J):t.IsObject($)?(()=>{for(let X of Object.getOwnPropertyNames($.properties))if(oS1(J,$.properties[X])===Q1.False)return Q1.False;return Q1.True})():Q1.False}function iR0($,F){return t4(F)?s4($,F):t.IsObject(F)?h8($,F):!t.IsRecord(F)?Q1.False:a6(Je($),Je(F))}function nR0($,F){let A=t.IsRegExp($)?L3():$,J=t.IsRegExp(F)?L3():F;return a6(A,J)}function eS1($,F){return t.IsLiteral($)&&v8.IsString($.const)?Q1.True:t.IsString($)?Q1.True:Q1.False}function rR0($,F){return t4(F)?s4($,F):t.IsObject(F)?h8($,F):t.IsRecord(F)?t5($,F):t.IsString(F)?Q1.True:Q1.False}function aR0($,F){return t4(F)?s4($,F):t.IsObject(F)?h8($,F):t.IsRecord(F)?t5($,F):t.IsSymbol(F)?Q1.True:Q1.False}function tR0($,F){return t.IsTemplateLiteral($)?a6(nD($),F):t.IsTemplateLiteral(F)?a6($,nD(F)):YQ("Invalid fallthrough for TemplateLiteral")}function sR0($,F){return t.IsArray(F)&&$.items!==void 0&&$.items.every((A)=>a6(A,F.items)===Q1.True)}function oR0($,F){return t.IsNever($)?Q1.True:t.IsUnknown($)?Q1.False:t.IsAny($)?Q1.Union:Q1.False}function eR0($,F){return t4(F)?s4($,F):t.IsObject(F)&&rO(F)?Q1.True:t.IsArray(F)&&sR0($,F)?Q1.True:!t.IsTuple(F)?Q1.False:v8.IsUndefined($.items)&&!v8.IsUndefined(F.items)||!v8.IsUndefined($.items)&&v8.IsUndefined(F.items)?Q1.False:v8.IsUndefined($.items)&&!v8.IsUndefined(F.items)?Q1.True:$.items.every((A,J)=>a6(A,F.items[J])===Q1.True)?Q1.True:Q1.False}function $I0($,F){return t4(F)?s4($,F):t.IsObject(F)?h8($,F):t.IsRecord(F)?t5($,F):t.IsUint8Array(F)?Q1.True:Q1.False}function FI0($,F){return t4(F)?s4($,F):t.IsObject(F)?h8($,F):t.IsRecord(F)?t5($,F):t.IsVoid(F)?XI0($,F):t.IsUndefined(F)?Q1.True:Q1.False}function Ye($,F){return F.anyOf.some((A)=>a6($,A)===Q1.True)?Q1.True:Q1.False}function AI0($,F){return $.anyOf.every((A)=>a6(A,F)===Q1.True)?Q1.True:Q1.False}function $_1($,F){return Q1.True}function JI0($,F){return t.IsNever(F)?tS1($,F):t.IsIntersect(F)?nO($,F):t.IsUnion(F)?Ye($,F):t.IsAny(F)?Xe($,F):t.IsString(F)?eS1($,F):t.IsNumber(F)?sS1($,F):t.IsInteger(F)?aS1($,F):t.IsBoolean(F)?rS1($,F):t.IsArray(F)?CR0($,F):t.IsTuple(F)?oR0($,F):t.IsObject(F)?h8($,F):t.IsUnknown(F)?Q1.True:Q1.False}function XI0($,F){return t.IsUndefined($)?Q1.True:t.IsUndefined($)?Q1.True:Q1.False}function YI0($,F){return t.IsIntersect(F)?nO($,F):t.IsUnion(F)?Ye($,F):t.IsUnknown(F)?$_1($,F):t.IsAny(F)?Xe($,F):t.IsObject(F)?h8($,F):t.IsVoid(F)?Q1.True:Q1.False}function a6($,F){return t.IsTemplateLiteral($)||t.IsTemplateLiteral(F)?tR0($,F):t.IsRegExp($)||t.IsRegExp(F)?nR0($,F):t.IsNot($)||t.IsNot(F)?gR0($,F):t.IsAny($)?NR0($,F):t.IsArray($)?MR0($,F):t.IsBigInt($)?RR0($,F):t.IsBoolean($)?IR0($,F):t.IsAsyncIterator($)?PR0($,F):t.IsConstructor($)?TR0($,F):t.IsDate($)?jR0($,F):t.IsFunction($)?OR0($,F):t.IsInteger($)?SR0($,F):t.IsIntersect($)?_R0($,F):t.IsIterator($)?kR0($,F):t.IsLiteral($)?bR0($,F):t.IsNever($)?xR0($,F):t.IsNull($)?fR0($,F):t.IsNumber($)?vR0($,F):t.IsObject($)?lR0($,F):t.IsRecord($)?iR0($,F):t.IsString($)?rR0($,F):t.IsSymbol($)?aR0($,F):t.IsTuple($)?eR0($,F):t.IsPromise($)?pR0($,F):t.IsUint8Array($)?$I0($,F):t.IsUndefined($)?FI0($,F):t.IsUnion($)?AI0($,F):t.IsUnknown($)?JI0($,F):t.IsVoid($)?YI0($,F):YQ(`Unknown left type operand '${$[a]}'`)}function UW($,F){return a6($,F)}function WI0($,F,A,J,X){let Y={};for(let W of globalThis.Object.getOwnPropertyNames($))Y[W]=WQ($[W],F,A,J,y2(X));return Y}function ZI0($,F,A,J,X){return WI0($.properties,F,A,J,X)}function F_1($,F,A,J,X){let Y=ZI0($,F,A,J,X);return B6(Y)}function DI0($,F,A,J){let X=UW($,F);return X===Q1.Union?R6([A,J]):X===Q1.True?A:J}function WQ($,F,A,J,X){return h2($)?F_1($,F,A,J,X):e7($)?U1(A_1($,F,A,J,X)):U1(DI0($,F,A,J),X)}function GI0($,F,A,J,X){return{[$]:WQ(e0($),F,A,J,y2(X))}}function zI0($,F,A,J,X){return $.reduce((Y,W)=>{return{...Y,...GI0(W,F,A,J,X)}},{})}function HI0($,F,A,J,X){return zI0($.keys,F,A,J,X)}function A_1($,F,A,J,X){let Y=HI0($,F,A,J,X);return B6(Y)}function UI0($){return $.allOf.every((F)=>WX(F))}function QI0($){return $.anyOf.some((F)=>WX(F))}function KI0($){return!WX($.not)}function WX($){return $[a]==="Intersect"?UI0($):$[a]==="Union"?QI0($):$[a]==="Not"?KI0($):$[a]==="Undefined"?!0:!1}function J_1($,F){return ZQ(nD($),F)}function BI0($,F){let A=$.filter((J)=>UW(J,F)===Q1.False);return A.length===1?A[0]:R6(A)}function ZQ($,F,A={}){if($5($))return U1(J_1($,F),A);if(h2($))return U1(X_1($,F),A);return U1(Z6($)?BI0($.anyOf,F):UW($,F)!==Q1.False?g0():$,A)}function wI0($,F){let A={};for(let J of globalThis.Object.getOwnPropertyNames($))A[J]=ZQ($[J],F);return A}function qI0($,F){return wI0($.properties,F)}function X_1($,F){let A=qI0($,F);return B6(A)}function Y_1($,F){return DQ(nD($),F)}function LI0($,F){let A=$.filter((J)=>UW(J,F)!==Q1.False);return A.length===1?A[0]:R6(A)}function DQ($,F,A){if($5($))return U1(Y_1($,F),A);if(h2($))return U1(W_1($,F),A);return U1(Z6($)?LI0($.anyOf,F):UW($,F)!==Q1.False?$:g0(),A)}function EI0($,F){let A={};for(let J of globalThis.Object.getOwnPropertyNames($))A[J]=DQ($[J],F);return A}function VI0($,F){return EI0($.properties,F)}function W_1($,F){let A=VI0($,F);return B6(A)}function Z_1($,F){return WF($)?U1($.returns,F):g0(F)}function aO($){return A7(y8($))}function rD($,F,A){return U1({[a]:"Record",type:"object",patternProperties:{[$]:F}},A)}function We($,F,A){let J={};for(let X of $)J[X]=F;return I6(J,{...A,[l5]:"Record"})}function NI0($,F,A){return gO($)?We(F7($),F,A):rD($.pattern,F,A)}function CI0($,F,A){return We(F7(R6($)),F,A)}function MI0($,F,A){return We([$.toString()],F,A)}function PI0($,F,A){return rD($.source,F,A)}function RI0($,F,A){let J=c4($.pattern)?GW:$.pattern;return rD(J,F,A)}function II0($,F,A){return rD(GW,F,A)}function TI0($,F,A){return rD(US1,F,A)}function jI0($,F,A){return I6({true:F,false:F},A)}function OI0($,F,A){return rD(DW,F,A)}function SI0($,F,A){return rD(DW,F,A)}function tO($,F,A={}){return Z6($)?CI0($.anyOf,F,A):$5($)?NI0($,F,A):o7($)?MI0($.const,F,A):$X($)?jI0($,F,A):DF($)?OI0($,F,A):GF($)?SI0($,F,A):po($)?PI0($,F,A):FX($)?RI0($,F,A):co($)?II0($,F,A):WW($)?TI0($,F,A):g0(A)}function sO($){return globalThis.Object.getOwnPropertyNames($.patternProperties)[0]}function D_1($){let F=sO($);return F===GW?L3():F===DW?p5():L3({pattern:F})}function oO($){return $.patternProperties[sO($)]}function _I0($,F){return F.parameters=_E($,F.parameters),F.returns=HF($,F.returns),F}function kI0($,F){return F.parameters=_E($,F.parameters),F.returns=HF($,F.returns),F}function bI0($,F){return F.allOf=_E($,F.allOf),F}function xI0($,F){return F.anyOf=_E($,F.anyOf),F}function gI0($,F){if(c4(F.items))return F;return F.items=_E($,F.items),F}function fI0($,F){return F.items=HF($,F.items),F}function vI0($,F){return F.items=HF($,F.items),F}function yI0($,F){return F.items=HF($,F.items),F}function uI0($,F){return F.item=HF($,F.item),F}function hI0($,F){let A=lI0($,F.properties);return{...F,...I6(A)}}function mI0($,F){let A=HF($,D_1(F)),J=HF($,oO(F)),X=tO(A,J);return{...F,...X}}function dI0($,F){return F.index in $?$[F.index]:zF()}function cI0($,F){let A=iU(F),J=$7(F),X=HF($,F);return A&&J?aO(X):A&&!J?A7(X):!A&&J?y8(X):X}function lI0($,F){return globalThis.Object.getOwnPropertyNames(F).reduce((A,J)=>{return{...A,[J]:cI0($,F[J])}},{})}function _E($,F){return F.map((A)=>HF($,A))}function HF($,F){return WF(F)?_I0($,F):ZF(F)?kI0($,F):z4(F)?bI0($,F):Z6(F)?xI0($,F):F5(F)?gI0($,F):XF(F)?fI0($,F):mD(F)?vI0($,F):cD(F)?yI0($,F):lD(F)?uI0($,F):l4(F)?hI0($,F):pD(F)?mI0($,F):lo(F)?dI0($,F):F}function G_1($,F){return HF(F,lU($))}function z_1($){return U1({[a]:"Integer",type:"integer"},$)}function pI0($,F,A){return{[$]:UF(e0($),F,y2(A))}}function iI0($,F,A){return $.reduce((X,Y)=>{return{...X,...pI0(Y,F,A)}},{})}function nI0($,F,A){return iI0($.keys,F,A)}function H_1($,F,A){let J=nI0($,F,A);return B6(J)}function rI0($){let[F,A]=[$.slice(0,1),$.slice(1)];return[F.toLowerCase(),A].join("")}function aI0($){let[F,A]=[$.slice(0,1),$.slice(1)];return[F.toUpperCase(),A].join("")}function tI0($){return $.toUpperCase()}function sI0($){return $.toLowerCase()}function oI0($,F,A){let J=eU($.pattern);if(!iD(J))return{...$,pattern:U_1($.pattern,F)};let W=[...TE(J)].map((G)=>e0(G)),Z=Q_1(W,F),D=R6(Z);return vO([D],A)}function U_1($,F){return typeof $==="string"?F==="Uncapitalize"?rI0($):F==="Capitalize"?aI0($):F==="Uppercase"?tI0($):F==="Lowercase"?sI0($):$:$.toString()}function Q_1($,F){return $.map((A)=>UF(A,F))}function UF($,F,A={}){return e7($)?H_1($,F,A):$5($)?oI0($,F,A):Z6($)?R6(Q_1($.anyOf,F),A):o7($)?e0(U_1($.const,F),A):U1($,A)}function K_1($,F={}){return UF($,"Capitalize",F)}function B_1($,F={}){return UF($,"Lowercase",F)}function w_1($,F={}){return UF($,"Uncapitalize",F)}function q_1($,F={}){return UF($,"Uppercase",F)}function eI0($,F,A){let J={};for(let X of globalThis.Object.getOwnPropertyNames($))J[X]=QW($[X],F,y2(A));return J}function $T0($,F,A){return eI0($.properties,F,A)}function L_1($,F,A){let J=$T0($,F,A);return B6(J)}function FT0($,F){return $.map((A)=>Ze(A,F))}function AT0($,F){return $.map((A)=>Ze(A,F))}function JT0($,F){let{[F]:A,...J}=$;return J}function XT0($,F){return F.reduce((A,J)=>JT0(A,J),$)}function YT0($,F,A){let J=H4($,[S2,"$id","required","properties"]),X=XT0(A,F);return I6(X,J)}function WT0($){let F=$.reduce((A,J)=>kO(J)?[...A,e0(J)]:A,[]);return R6(F)}function Ze($,F){return z4($)?u8(FT0($.allOf,F)):Z6($)?R6(AT0($.anyOf,F)):l4($)?YT0($,F,$.properties):I6({})}function QW($,F,A){let J=d4(F)?WT0(F):F,X=$4(F)?F7(F):F,Y=R4($),W=R4(F);return h2($)?L_1($,X,A):e7(F)?E_1($,F,A):Y&&W?_2("Omit",[$,J],A):!Y&&W?_2("Omit",[$,J],A):Y&&!W?_2("Omit",[$,J],A):U1({...Ze($,X),...A})}function ZT0($,F,A){return{[F]:QW($,[F],y2(A))}}function DT0($,F,A){return F.reduce((J,X)=>{return{...J,...ZT0($,X,A)}},{})}function GT0($,F,A){return DT0($,F.keys,A)}function E_1($,F,A){let J=GT0($,F,A);return B6(J)}function zT0($,F,A){let J={};for(let X of globalThis.Object.getOwnPropertyNames($))J[X]=KW($[X],F,y2(A));return J}function HT0($,F,A){return zT0($.properties,F,A)}function V_1($,F,A){let J=HT0($,F,A);return B6(J)}function UT0($,F){return $.map((A)=>De(A,F))}function QT0($,F){return $.map((A)=>De(A,F))}function KT0($,F){let A={};for(let J of F)if(J in $)A[J]=$[J];return A}function BT0($,F,A){let J=H4($,[S2,"$id","required","properties"]),X=KT0(A,F);return I6(X,J)}function wT0($){let F=$.reduce((A,J)=>kO(J)?[...A,e0(J)]:A,[]);return R6(F)}function De($,F){return z4($)?u8(UT0($.allOf,F)):Z6($)?R6(QT0($.anyOf,F)):l4($)?BT0($,F,$.properties):I6({})}function KW($,F,A){let J=d4(F)?wT0(F):F,X=$4(F)?F7(F):F,Y=R4($),W=R4(F);return h2($)?V_1($,X,A):e7(F)?N_1($,F,A):Y&&W?_2("Pick",[$,J],A):!Y&&W?_2("Pick",[$,J],A):Y&&!W?_2("Pick",[$,J],A):U1({...De($,X),...A})}function qT0($,F,A){return{[F]:KW($,[F],y2(A))}}function LT0($,F,A){return F.reduce((J,X)=>{return{...J,...qT0($,X,A)}},{})}function ET0($,F,A){return LT0($,F.keys,A)}function N_1($,F,A){let J=ET0($,F,A);return B6(J)}function VT0($,F){return _2("Partial",[_2($,F)])}function NT0($){return _2("Partial",[r5($)])}function CT0($){let F={};for(let A of globalThis.Object.getOwnPropertyNames($))F[A]=y8($[A]);return F}function MT0($,F){let A=H4($,[S2,"$id","required","properties"]),J=CT0(F);return I6(J,A)}function C_1($){return $.map((F)=>M_1(F))}function M_1($){return YF($)?VT0($.target,$.parameters):R4($)?NT0($.$ref):z4($)?u8(C_1($.allOf)):Z6($)?R6(C_1($.anyOf)):l4($)?MT0($,$.properties):dD($)?$:$X($)?$:DF($)?$:o7($)?$:NE($)?$:GF($)?$:FX($)?$:CE($)?$:AX($)?$:I6({})}function GQ($,F){if(h2($))return P_1($,F);else return U1({...M_1($),...F})}function PT0($,F){let A={};for(let J of globalThis.Object.getOwnPropertyNames($))A[J]=GQ($[J],y2(F));return A}function RT0($,F){return PT0($.properties,F)}function P_1($,F){let A=RT0($,F);return B6(A)}function IT0($,F){return _2("Required",[_2($,F)])}function TT0($){return _2("Required",[r5($)])}function jT0($){let F={};for(let A of globalThis.Object.getOwnPropertyNames($))F[A]=H4($[A],[H9]);return F}function OT0($,F){let A=H4($,[S2,"$id","required","properties"]),J=jT0(F);return I6(J,A)}function R_1($){return $.map((F)=>I_1(F))}function I_1($){return YF($)?IT0($.target,$.parameters):R4($)?TT0($.$ref):z4($)?u8(R_1($.allOf)):Z6($)?R6(R_1($.anyOf)):l4($)?OT0($,$.properties):dD($)?$:$X($)?$:DF($)?$:o7($)?$:NE($)?$:GF($)?$:FX($)?$:CE($)?$:AX($)?$:I6({})}function zQ($,F){if(h2($))return T_1($,F);else return U1({...I_1($),...F})}function ST0($,F){let A={};for(let J of globalThis.Object.getOwnPropertyNames($))A[J]=zQ($[J],F);return A}function _T0($,F){return ST0($.properties,F)}function T_1($,F){let A=_T0($,F);return B6(A)}function kT0($,F){return F.map((A)=>{return R4(A)?Ge($,A.$ref):A5($,A)})}function Ge($,F){return F in $?R4($[F])?Ge($,$[F].$ref):A5($,$[F]):g0()}function bT0($){return JQ($[0])}function xT0($){return HW($[0],$[1])}function gT0($){return XQ($[0])}function fT0($){return GQ($[0])}function vT0($){return QW($[0],$[1])}function yT0($){return KW($[0],$[1])}function uT0($){return zQ($[0])}function hT0($,F,A){let J=kT0($,A);return F==="Awaited"?bT0(J):F==="Index"?xT0(J):F==="KeyOf"?gT0(J):F==="Partial"?fT0(J):F==="Omit"?vT0(J):F==="Pick"?yT0(J):F==="Required"?uT0(J):g0()}function mT0($,F){return aU(A5($,F))}function dT0($,F){return tU(A5($,F))}function cT0($,F,A){return sU(kE($,F),A5($,A))}function lT0($,F,A){return VA(kE($,F),A5($,A))}function pT0($,F){return u8(kE($,F))}function iT0($,F){return AQ(A5($,F))}function nT0($,F){return I6(globalThis.Object.keys(F).reduce((A,J)=>{return{...A,[J]:A5($,F[J])}},{}))}function rT0($,F){let[A,J]=[A5($,oO(F)),sO(F)],X=lU(F);return X.patternProperties[J]=A,X}function aT0($,F){return R4(F)?{...Ge($,F.$ref),[S2]:F[S2]}:F}function tT0($,F){return i5(kE($,F))}function sT0($,F){return R6(kE($,F))}function kE($,F){return F.map((A)=>A5($,A))}function A5($,F){return $7(F)?U1(A5($,H4(F,[H9])),F):iU(F)?U1(A5($,H4(F,[JF])),F):P6(F)?U1(aT0($,F),F):XF(F)?U1(mT0($,F.items),F):mD(F)?U1(dT0($,F.items),F):YF(F)?U1(hT0($,F.target,F.parameters)):WF(F)?U1(cT0($,F.parameters,F.returns),F):ZF(F)?U1(lT0($,F.parameters,F.returns),F):z4(F)?U1(pT0($,F.allOf),F):cD(F)?U1(iT0($,F.items),F):l4(F)?U1(nT0($,F.properties),F):pD(F)?U1(rT0($,F)):F5(F)?U1(tT0($,F.items||[]),F):Z6(F)?U1(sT0($,F.anyOf),F):F}function oT0($,F){return F in $?A5($,$[F]):g0()}function j_1($){return globalThis.Object.getOwnPropertyNames($).reduce((F,A)=>{return{...F,[A]:oT0($,A)}},{})}class O_1{constructor($){let F=j_1($),A=this.WithIdentifiers(F);this.$defs=A}Import($,F){let A={...this.$defs,[$]:U1(this.$defs[$],F)};return U1({[a]:"Import",$defs:A,$ref:$})}WithIdentifiers($){return globalThis.Object.getOwnPropertyNames($).reduce((F,A)=>{return{...F,[A]:{...$[A],$id:A}}},{})}}function S_1($){return new O_1($)}function __1($,F){return U1({[a]:"Not",not:$},F)}function k_1($,F){return ZF($)?i5($.parameters,F):g0()}var eT0=0;function b_1($,F={}){if(c4(F.$id))F.$id=`T${eT0++}`;let A=lU($({[a]:"This",$ref:`${F.$id}`}));return A.$id=F.$id,U1({[l5]:"Recursive",...A},F)}function x_1($,F){let A=V2($)?new globalThis.RegExp($):$;return U1({[a]:"RegExp",type:"RegExp",source:A.source,flags:A.flags},F)}function $j0($){return z4($)?$.allOf:Z6($)?$.anyOf:F5($)?$.items??[]:[]}function g_1($){return $j0($)}function f_1($,F){return ZF($)?U1($.returns,F):g0(F)}class v_1{constructor($){this.schema=$}Decode($){return new y_1(this.schema,$)}}class y_1{constructor($,F){this.schema=$,this.decode=F}EncodeTransform($,F){let X={Encode:(Y)=>F[S2].Encode($(Y)),Decode:(Y)=>this.decode(F[S2].Decode(Y))};return{...F,[S2]:X}}EncodeSchema($,F){let A={Decode:this.decode,Encode:$};return{...F,[S2]:A}}Encode($){return P6(this.schema)?this.EncodeTransform($,this.schema):this.EncodeSchema($,this.schema)}}function u_1($){return new v_1($)}function eO($={}){return U1({[a]:$[a]??"Unsafe"},$)}function h_1($){return U1({[a]:"Void",type:"void"},$)}var ze={};l2(ze,{Void:()=>h_1,Uppercase:()=>q_1,Unsafe:()=>eO,Unknown:()=>zF,Union:()=>R6,Undefined:()=>lO,Uncapitalize:()=>w_1,Uint8Array:()=>pO,Tuple:()=>i5,Transform:()=>u_1,TemplateLiteral:()=>vO,Symbol:()=>cO,String:()=>L3,ReturnType:()=>f_1,Rest:()=>g_1,Required:()=>zQ,RegExp:()=>x_1,Ref:()=>r5,Recursive:()=>b_1,Record:()=>tO,ReadonlyOptional:()=>aO,Readonly:()=>A7,Promise:()=>uO,Pick:()=>KW,Partial:()=>GQ,Parameters:()=>k_1,Optional:()=>y8,Omit:()=>QW,Object:()=>I6,Number:()=>p5,Null:()=>dO,Not:()=>__1,Never:()=>g0,Module:()=>S_1,Mapped:()=>bS1,Lowercase:()=>B_1,Literal:()=>e0,KeyOf:()=>XQ,Iterator:()=>AQ,Intersect:()=>u8,Integer:()=>z_1,Instantiate:()=>G_1,InstanceType:()=>Z_1,Index:()=>HW,Function:()=>VA,Extract:()=>DQ,Extends:()=>WQ,Exclude:()=>ZQ,Enum:()=>dS1,Date:()=>mO,ConstructorParameters:()=>mS1,Constructor:()=>sU,Const:()=>hS1,Composite:()=>uS1,Capitalize:()=>K_1,Boolean:()=>fO,BigInt:()=>FQ,Awaited:()=>JQ,AsyncIterator:()=>tU,Array:()=>aU,Argument:()=>qS1,Any:()=>zW});var s5=ze;function Fj0($){switch($.errorType){case D1.ArrayContains:return"Expected array to contain at least one matching value";case D1.ArrayMaxContains:return`Expected array to contain no more than ${$.schema.maxContains} matching values`;case D1.ArrayMinContains:return`Expected array to contain at least ${$.schema.minContains} matching values`;case D1.ArrayMaxItems:return`Expected array length to be less or equal to ${$.schema.maxItems}`;case D1.ArrayMinItems:return`Expected array length to be greater or equal to ${$.schema.minItems}`;case D1.ArrayUniqueItems:return"Expected array elements to be unique";case D1.Array:return"Expected array";case D1.AsyncIterator:return"Expected AsyncIterator";case D1.BigIntExclusiveMaximum:return`Expected bigint to be less than ${$.schema.exclusiveMaximum}`;case D1.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${$.schema.exclusiveMinimum}`;case D1.BigIntMaximum:return`Expected bigint to be less or equal to ${$.schema.maximum}`;case D1.BigIntMinimum:return`Expected bigint to be greater or equal to ${$.schema.minimum}`;case D1.BigIntMultipleOf:return`Expected bigint to be a multiple of ${$.schema.multipleOf}`;case D1.BigInt:return"Expected bigint";case D1.Boolean:return"Expected boolean";case D1.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${$.schema.exclusiveMinimumTimestamp}`;case D1.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${$.schema.exclusiveMaximumTimestamp}`;case D1.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${$.schema.minimumTimestamp}`;case D1.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${$.schema.maximumTimestamp}`;case D1.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${$.schema.multipleOfTimestamp}`;case D1.Date:return"Expected Date";case D1.Function:return"Expected function";case D1.IntegerExclusiveMaximum:return`Expected integer to be less than ${$.schema.exclusiveMaximum}`;case D1.IntegerExclusiveMinimum:return`Expected integer to be greater than ${$.schema.exclusiveMinimum}`;case D1.IntegerMaximum:return`Expected integer to be less or equal to ${$.schema.maximum}`;case D1.IntegerMinimum:return`Expected integer to be greater or equal to ${$.schema.minimum}`;case D1.IntegerMultipleOf:return`Expected integer to be a multiple of ${$.schema.multipleOf}`;case D1.Integer:return"Expected integer";case D1.IntersectUnevaluatedProperties:return"Unexpected property";case D1.Intersect:return"Expected all values to match";case D1.Iterator:return"Expected Iterator";case D1.Literal:return`Expected ${typeof $.schema.const==="string"?`'${$.schema.const}'`:$.schema.const}`;case D1.Never:return"Never";case D1.Not:return"Value should not match";case D1.Null:return"Expected null";case D1.NumberExclusiveMaximum:return`Expected number to be less than ${$.schema.exclusiveMaximum}`;case D1.NumberExclusiveMinimum:return`Expected number to be greater than ${$.schema.exclusiveMinimum}`;case D1.NumberMaximum:return`Expected number to be less or equal to ${$.schema.maximum}`;case D1.NumberMinimum:return`Expected number to be greater or equal to ${$.schema.minimum}`;case D1.NumberMultipleOf:return`Expected number to be a multiple of ${$.schema.multipleOf}`;case D1.Number:return"Expected number";case D1.Object:return"Expected object";case D1.ObjectAdditionalProperties:return"Unexpected property";case D1.ObjectMaxProperties:return`Expected object to have no more than ${$.schema.maxProperties} properties`;case D1.ObjectMinProperties:return`Expected object to have at least ${$.schema.minProperties} properties`;case D1.ObjectRequiredProperty:return"Expected required property";case D1.Promise:return"Expected Promise";case D1.RegExp:return"Expected string to match regular expression";case D1.StringFormatUnknown:return`Unknown format '${$.schema.format}'`;case D1.StringFormat:return`Expected string to match '${$.schema.format}' format`;case D1.StringMaxLength:return`Expected string length less or equal to ${$.schema.maxLength}`;case D1.StringMinLength:return`Expected string length greater or equal to ${$.schema.minLength}`;case D1.StringPattern:return`Expected string to match '${$.schema.pattern}'`;case D1.String:return"Expected string";case D1.Symbol:return"Expected symbol";case D1.TupleLength:return`Expected tuple to have ${$.schema.maxItems||0} elements`;case D1.Tuple:return"Expected tuple";case D1.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${$.schema.maxByteLength}`;case D1.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${$.schema.minByteLength}`;case D1.Uint8Array:return"Expected Uint8Array";case D1.Undefined:return"Expected undefined";case D1.Union:return"Expected union value";case D1.Void:return"Expected void";case D1.Kind:return`Expected kind '${$.schema[a]}'`;default:return"Unknown error type"}}var Aj0=Fj0;function m_1(){return Aj0}class d_1 extends z0{constructor($){super(`Unable to dereference schema with $id '${$.$ref}'`);this.schema=$}}function Jj0($,F){let A=F.find((J)=>J.$id===$.$ref);if(A===void 0)throw new d_1($);return D6(A,F)}function x9($,F){if(!W6($.$id)||F.some((A)=>A.$id===$.$id))return F;return F.push($),F}function D6($,F){return $[a]==="This"||$[a]==="Ref"?Jj0($,F):$}class c_1 extends z0{constructor($){super("Unable to hash value");this.value=$}}var J5;(function($){$[$.Undefined=0]="Undefined",$[$.Null=1]="Null",$[$.Boolean=2]="Boolean",$[$.Number=3]="Number",$[$.String=4]="String",$[$.Object=5]="Object",$[$.Array=6]="Array",$[$.Date=7]="Date",$[$.Uint8Array=8]="Uint8Array",$[$.Symbol=9]="Symbol",$[$.BigInt=10]="BigInt"})(J5||(J5={}));var HQ=BigInt("14695981039346656037"),[Xj0,Yj0]=[BigInt("1099511628211"),BigInt("18446744073709551616")],Wj0=Array.from({length:256}).map(($,F)=>BigInt(F)),l_1=new Float64Array(1),p_1=new DataView(l_1.buffer),i_1=new Uint8Array(l_1.buffer);function*Zj0($){let F=$===0?1:Math.ceil(Math.floor(Math.log2($)+1)/8);for(let A=0;A<F;A++)yield $>>8*(F-1-A)&255}function Dj0($){m8(J5.Array);for(let F of $)UQ(F)}function Gj0($){m8(J5.Boolean),m8($?1:0)}function zj0($){m8(J5.BigInt),p_1.setBigInt64(0,$);for(let F of i_1)m8(F)}function Hj0($){m8(J5.Date),UQ($.getTime())}function Uj0($){m8(J5.Null)}function Qj0($){m8(J5.Number),p_1.setFloat64(0,$);for(let F of i_1)m8(F)}function Kj0($){m8(J5.Object);for(let F of globalThis.Object.getOwnPropertyNames($).sort())UQ(F),UQ($[F])}function Bj0($){m8(J5.String);for(let F=0;F<$.length;F++)for(let A of Zj0($.charCodeAt(F)))m8(A)}function wj0($){m8(J5.Symbol),UQ($.description)}function qj0($){m8(J5.Uint8Array);for(let F=0;F<$.length;F++)m8($[F])}function Lj0($){return m8(J5.Undefined)}function UQ($){if(D0($))return Dj0($);if(EA($))return Gj0($);if(D8($))return zj0($);if(q3($))return Hj0($);if(oJ($))return Uj0($);if(A0($))return Qj0($);if(R0($))return Kj0($);if(W6($))return Bj0($);if(eJ($))return wj0($);if(pU($))return qj0($);if(u2($))return Lj0($);throw new c_1($)}function m8($){HQ=HQ^Wj0[$],HQ=HQ*Xj0%Yj0}function BW($){return HQ=BigInt("14695981039346656037"),UQ($),HQ}class n_1 extends z0{constructor($){super("Unknown type");this.schema=$}}function Ej0($){return $[a]==="Any"||$[a]==="Unknown"}function n0($){return $!==void 0}function Vj0($,F,A){return!0}function Nj0($,F,A){return!0}function Cj0($,F,A){if(!D0(A))return!1;if(n0($.minItems)&&!(A.length>=$.minItems))return!1;if(n0($.maxItems)&&!(A.length<=$.maxItems))return!1;if(!A.every((Y)=>g9($.items,F,Y)))return!1;if($.uniqueItems===!0&&!function(){let Y=new Set;for(let W of A){let Z=BW(W);if(Y.has(Z))return!1;else Y.add(Z)}return!0}())return!1;if(!(n0($.contains)||A0($.minContains)||A0($.maxContains)))return!0;let J=n0($.contains)?$.contains:g0(),X=A.reduce((Y,W)=>g9(J,F,W)?Y+1:Y,0);if(X===0)return!1;if(A0($.minContains)&&X<$.minContains)return!1;if(A0($.maxContains)&&X>$.maxContains)return!1;return!0}function Mj0($,F,A){return jO(A)}function Pj0($,F,A){if(!D8(A))return!1;if(n0($.exclusiveMaximum)&&!(A<$.exclusiveMaximum))return!1;if(n0($.exclusiveMinimum)&&!(A>$.exclusiveMinimum))return!1;if(n0($.maximum)&&!(A<=$.maximum))return!1;if(n0($.minimum)&&!(A>=$.minimum))return!1;if(n0($.multipleOf)&&A%$.multipleOf!==BigInt(0))return!1;return!0}function Rj0($,F,A){return EA(A)}function Ij0($,F,A){return g9($.returns,F,A.prototype)}function Tj0($,F,A){if(!q3(A))return!1;if(n0($.exclusiveMaximumTimestamp)&&!(A.getTime()<$.exclusiveMaximumTimestamp))return!1;if(n0($.exclusiveMinimumTimestamp)&&!(A.getTime()>$.exclusiveMinimumTimestamp))return!1;if(n0($.maximumTimestamp)&&!(A.getTime()<=$.maximumTimestamp))return!1;if(n0($.minimumTimestamp)&&!(A.getTime()>=$.minimumTimestamp))return!1;if(n0($.multipleOfTimestamp)&&A.getTime()%$.multipleOfTimestamp!==0)return!1;return!0}function jj0($,F,A){return YW(A)}function Oj0($,F,A){let J=globalThis.Object.values($.$defs),X=$.$defs[$.$ref];return g9(X,[...F,...J],A)}function Sj0($,F,A){if(!_O(A))return!1;if(n0($.exclusiveMaximum)&&!(A<$.exclusiveMaximum))return!1;if(n0($.exclusiveMinimum)&&!(A>$.exclusiveMinimum))return!1;if(n0($.maximum)&&!(A<=$.maximum))return!1;if(n0($.minimum)&&!(A>=$.minimum))return!1;if(n0($.multipleOf)&&A%$.multipleOf!==0)return!1;return!0}function _j0($,F,A){let J=$.allOf.every((X)=>g9(X,F,A));if($.unevaluatedProperties===!1){let X=new RegExp(YX($)),Y=Object.getOwnPropertyNames(A).every((W)=>X.test(W));return J&&Y}else if($4($.unevaluatedProperties)){let X=new RegExp(YX($)),Y=Object.getOwnPropertyNames(A).every((W)=>X.test(W)||g9($.unevaluatedProperties,F,A[W]));return J&&Y}else return J}function kj0($,F,A){return OO(A)}function bj0($,F,A){return A===$.const}function xj0($,F,A){return!1}function gj0($,F,A){return!g9($.not,F,A)}function fj0($,F,A){return oJ(A)}function vj0($,F,A){if(!O2.IsNumberLike(A))return!1;if(n0($.exclusiveMaximum)&&!(A<$.exclusiveMaximum))return!1;if(n0($.exclusiveMinimum)&&!(A>$.exclusiveMinimum))return!1;if(n0($.minimum)&&!(A>=$.minimum))return!1;if(n0($.maximum)&&!(A<=$.maximum))return!1;if(n0($.multipleOf)&&A%$.multipleOf!==0)return!1;return!0}function yj0($,F,A){if(!O2.IsObjectLike(A))return!1;if(n0($.minProperties)&&!(Object.getOwnPropertyNames(A).length>=$.minProperties))return!1;if(n0($.maxProperties)&&!(Object.getOwnPropertyNames(A).length<=$.maxProperties))return!1;let J=Object.getOwnPropertyNames($.properties);for(let X of J){let Y=$.properties[X];if($.required&&$.required.includes(X)){if(!g9(Y,F,A[X]))return!1;if((WX(Y)||Ej0(Y))&&!(X in A))return!1}else if(O2.IsExactOptionalProperty(A,X)&&!g9(Y,F,A[X]))return!1}if($.additionalProperties===!1){let X=Object.getOwnPropertyNames(A);if($.required&&$.required.length===J.length&&X.length===J.length)return!0;else return X.every((Y)=>J.includes(Y))}else if(typeof $.additionalProperties==="object")return Object.getOwnPropertyNames(A).every((Y)=>J.includes(Y)||g9($.additionalProperties,F,A[Y]));else return!0}function uj0($,F,A){return SO(A)}function hj0($,F,A){if(!O2.IsRecordLike(A))return!1;if(n0($.minProperties)&&!(Object.getOwnPropertyNames(A).length>=$.minProperties))return!1;if(n0($.maxProperties)&&!(Object.getOwnPropertyNames(A).length<=$.maxProperties))return!1;let[J,X]=Object.entries($.patternProperties)[0],Y=new RegExp(J),W=Object.entries(A).every(([G,z])=>{return Y.test(G)?g9(X,F,z):!0}),Z=typeof $.additionalProperties==="object"?Object.entries(A).every(([G,z])=>{return!Y.test(G)?g9($.additionalProperties,F,z):!0}):!0,D=$.additionalProperties===!1?Object.getOwnPropertyNames(A).every((G)=>{return Y.test(G)}):!0;return W&&Z&&D}function mj0($,F,A){return g9(D6($,F),F,A)}function dj0($,F,A){let J=new RegExp($.source,$.flags);if(n0($.minLength)){if(!(A.length>=$.minLength))return!1}if(n0($.maxLength)){if(!(A.length<=$.maxLength))return!1}return J.test(A)}function cj0($,F,A){if(!W6(A))return!1;if(n0($.minLength)){if(!(A.length>=$.minLength))return!1}if(n0($.maxLength)){if(!(A.length<=$.maxLength))return!1}if(n0($.pattern)){if(!new RegExp($.pattern).test(A))return!1}if(n0($.format)){if(!v6.Has($.format))return!1;return v6.Get($.format)(A)}return!0}function lj0($,F,A){return eJ(A)}function pj0($,F,A){return W6(A)&&new RegExp($.pattern).test(A)}function ij0($,F,A){return g9(D6($,F),F,A)}function nj0($,F,A){if(!D0(A))return!1;if($.items===void 0&&A.length!==0)return!1;if(A.length!==$.maxItems)return!1;if(!$.items)return!0;for(let J=0;J<$.items.length;J++)if(!g9($.items[J],F,A[J]))return!1;return!0}function rj0($,F,A){return u2(A)}function aj0($,F,A){return $.anyOf.some((J)=>g9(J,F,A))}function tj0($,F,A){if(!pU(A))return!1;if(n0($.maxByteLength)&&!(A.length<=$.maxByteLength))return!1;if(n0($.minByteLength)&&!(A.length>=$.minByteLength))return!1;return!0}function sj0($,F,A){return!0}function oj0($,F,A){return O2.IsVoidLike(A)}function ej0($,F,A){if(!U9.Has($[a]))return!1;return U9.Get($[a])($,A)}function g9($,F,A){let J=n0($.$id)?x9($,F):F,X=$;switch(X[a]){case"Any":return Vj0(X,J,A);case"Argument":return Nj0(X,J,A);case"Array":return Cj0(X,J,A);case"AsyncIterator":return Mj0(X,J,A);case"BigInt":return Pj0(X,J,A);case"Boolean":return Rj0(X,J,A);case"Constructor":return Ij0(X,J,A);case"Date":return Tj0(X,J,A);case"Function":return jj0(X,J,A);case"Import":return Oj0(X,J,A);case"Integer":return Sj0(X,J,A);case"Intersect":return _j0(X,J,A);case"Iterator":return kj0(X,J,A);case"Literal":return bj0(X,J,A);case"Never":return xj0(X,J,A);case"Not":return gj0(X,J,A);case"Null":return fj0(X,J,A);case"Number":return vj0(X,J,A);case"Object":return yj0(X,J,A);case"Promise":return uj0(X,J,A);case"Record":return hj0(X,J,A);case"Ref":return mj0(X,J,A);case"RegExp":return dj0(X,J,A);case"String":return cj0(X,J,A);case"Symbol":return lj0(X,J,A);case"TemplateLiteral":return pj0(X,J,A);case"This":return ij0(X,J,A);case"Tuple":return nj0(X,J,A);case"Undefined":return rj0(X,J,A);case"Union":return aj0(X,J,A);case"Uint8Array":return tj0(X,J,A);case"Unknown":return sj0(X,J,A);case"Void":return oj0(X,J,A);default:if(!U9.Has(X[a]))throw new n_1(X);return ej0(X,J,A)}}function f0(...$){return $.length===3?g9($[0],$[1],$[2]):g9($[0],[],$[1])}var D1;(function($){$[$.ArrayContains=0]="ArrayContains",$[$.ArrayMaxContains=1]="ArrayMaxContains",$[$.ArrayMaxItems=2]="ArrayMaxItems",$[$.ArrayMinContains=3]="ArrayMinContains",$[$.ArrayMinItems=4]="ArrayMinItems",$[$.ArrayUniqueItems=5]="ArrayUniqueItems",$[$.Array=6]="Array",$[$.AsyncIterator=7]="AsyncIterator",$[$.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",$[$.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",$[$.BigIntMaximum=10]="BigIntMaximum",$[$.BigIntMinimum=11]="BigIntMinimum",$[$.BigIntMultipleOf=12]="BigIntMultipleOf",$[$.BigInt=13]="BigInt",$[$.Boolean=14]="Boolean",$[$.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",$[$.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",$[$.DateMaximumTimestamp=17]="DateMaximumTimestamp",$[$.DateMinimumTimestamp=18]="DateMinimumTimestamp",$[$.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",$[$.Date=20]="Date",$[$.Function=21]="Function",$[$.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",$[$.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",$[$.IntegerMaximum=24]="IntegerMaximum",$[$.IntegerMinimum=25]="IntegerMinimum",$[$.IntegerMultipleOf=26]="IntegerMultipleOf",$[$.Integer=27]="Integer",$[$.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",$[$.Intersect=29]="Intersect",$[$.Iterator=30]="Iterator",$[$.Kind=31]="Kind",$[$.Literal=32]="Literal",$[$.Never=33]="Never",$[$.Not=34]="Not",$[$.Null=35]="Null",$[$.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",$[$.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",$[$.NumberMaximum=38]="NumberMaximum",$[$.NumberMinimum=39]="NumberMinimum",$[$.NumberMultipleOf=40]="NumberMultipleOf",$[$.Number=41]="Number",$[$.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",$[$.ObjectMaxProperties=43]="ObjectMaxProperties",$[$.ObjectMinProperties=44]="ObjectMinProperties",$[$.ObjectRequiredProperty=45]="ObjectRequiredProperty",$[$.Object=46]="Object",$[$.Promise=47]="Promise",$[$.RegExp=48]="RegExp",$[$.StringFormatUnknown=49]="StringFormatUnknown",$[$.StringFormat=50]="StringFormat",$[$.StringMaxLength=51]="StringMaxLength",$[$.StringMinLength=52]="StringMinLength",$[$.StringPattern=53]="StringPattern",$[$.String=54]="String",$[$.Symbol=55]="Symbol",$[$.TupleLength=56]="TupleLength",$[$.Tuple=57]="Tuple",$[$.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",$[$.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",$[$.Uint8Array=60]="Uint8Array",$[$.Undefined=61]="Undefined",$[$.Union=62]="Union",$[$.Void=63]="Void"})(D1||(D1={}));class r_1 extends z0{constructor($){super("Unknown type");this.schema=$}}function ZX($){return $.replace(/~/g,"~0").replace(/\//g,"~1")}function r0($){return $!==void 0}class aD{constructor($){this.iterator=$}[Symbol.iterator](){return this.iterator}First(){let $=this.iterator.next();return $.done?void 0:$.value}}function h1($,F,A,J,X=[]){return{type:$,schema:F,path:A,value:J,message:m_1()({errorType:$,path:A,schema:F,value:J,errors:X}),errors:X}}function*$O0($,F,A,J){}function*FO0($,F,A,J){}function*AO0($,F,A,J){if(!D0(J))return yield h1(D1.Array,$,A,J);if(r0($.minItems)&&!(J.length>=$.minItems))yield h1(D1.ArrayMinItems,$,A,J);if(r0($.maxItems)&&!(J.length<=$.maxItems))yield h1(D1.ArrayMaxItems,$,A,J);for(let W=0;W<J.length;W++)yield*f9($.items,F,`${A}/${W}`,J[W]);if($.uniqueItems===!0&&!function(){let W=new Set;for(let Z of J){let D=BW(Z);if(W.has(D))return!1;else W.add(D)}return!0}())yield h1(D1.ArrayUniqueItems,$,A,J);if(!(r0($.contains)||r0($.minContains)||r0($.maxContains)))return;let X=r0($.contains)?$.contains:g0(),Y=J.reduce((W,Z,D)=>f9(X,F,`${A}${D}`,Z).next().done===!0?W+1:W,0);if(Y===0)yield h1(D1.ArrayContains,$,A,J);if(A0($.minContains)&&Y<$.minContains)yield h1(D1.ArrayMinContains,$,A,J);if(A0($.maxContains)&&Y>$.maxContains)yield h1(D1.ArrayMaxContains,$,A,J)}function*JO0($,F,A,J){if(!jO(J))yield h1(D1.AsyncIterator,$,A,J)}function*XO0($,F,A,J){if(!D8(J))return yield h1(D1.BigInt,$,A,J);if(r0($.exclusiveMaximum)&&!(J<$.exclusiveMaximum))yield h1(D1.BigIntExclusiveMaximum,$,A,J);if(r0($.exclusiveMinimum)&&!(J>$.exclusiveMinimum))yield h1(D1.BigIntExclusiveMinimum,$,A,J);if(r0($.maximum)&&!(J<=$.maximum))yield h1(D1.BigIntMaximum,$,A,J);if(r0($.minimum)&&!(J>=$.minimum))yield h1(D1.BigIntMinimum,$,A,J);if(r0($.multipleOf)&&J%$.multipleOf!==BigInt(0))yield h1(D1.BigIntMultipleOf,$,A,J)}function*YO0($,F,A,J){if(!EA(J))yield h1(D1.Boolean,$,A,J)}function*WO0($,F,A,J){yield*f9($.returns,F,A,J.prototype)}function*ZO0($,F,A,J){if(!q3(J))return yield h1(D1.Date,$,A,J);if(r0($.exclusiveMaximumTimestamp)&&!(J.getTime()<$.exclusiveMaximumTimestamp))yield h1(D1.DateExclusiveMaximumTimestamp,$,A,J);if(r0($.exclusiveMinimumTimestamp)&&!(J.getTime()>$.exclusiveMinimumTimestamp))yield h1(D1.DateExclusiveMinimumTimestamp,$,A,J);if(r0($.maximumTimestamp)&&!(J.getTime()<=$.maximumTimestamp))yield h1(D1.DateMaximumTimestamp,$,A,J);if(r0($.minimumTimestamp)&&!(J.getTime()>=$.minimumTimestamp))yield h1(D1.DateMinimumTimestamp,$,A,J);if(r0($.multipleOfTimestamp)&&J.getTime()%$.multipleOfTimestamp!==0)yield h1(D1.DateMultipleOfTimestamp,$,A,J)}function*DO0($,F,A,J){if(!YW(J))yield h1(D1.Function,$,A,J)}function*GO0($,F,A,J){let X=globalThis.Object.values($.$defs),Y=$.$defs[$.$ref];yield*f9(Y,[...F,...X],A,J)}function*zO0($,F,A,J){if(!_O(J))return yield h1(D1.Integer,$,A,J);if(r0($.exclusiveMaximum)&&!(J<$.exclusiveMaximum))yield h1(D1.IntegerExclusiveMaximum,$,A,J);if(r0($.exclusiveMinimum)&&!(J>$.exclusiveMinimum))yield h1(D1.IntegerExclusiveMinimum,$,A,J);if(r0($.maximum)&&!(J<=$.maximum))yield h1(D1.IntegerMaximum,$,A,J);if(r0($.minimum)&&!(J>=$.minimum))yield h1(D1.IntegerMinimum,$,A,J);if(r0($.multipleOf)&&J%$.multipleOf!==0)yield h1(D1.IntegerMultipleOf,$,A,J)}function*HO0($,F,A,J){let X=!1;for(let Y of $.allOf)for(let W of f9(Y,F,A,J))X=!0,yield W;if(X)return yield h1(D1.Intersect,$,A,J);if($.unevaluatedProperties===!1){let Y=new RegExp(YX($));for(let W of Object.getOwnPropertyNames(J))if(!Y.test(W))yield h1(D1.IntersectUnevaluatedProperties,$,`${A}/${W}`,J)}if(typeof $.unevaluatedProperties==="object"){let Y=new RegExp(YX($));for(let W of Object.getOwnPropertyNames(J))if(!Y.test(W)){let Z=f9($.unevaluatedProperties,F,`${A}/${W}`,J[W]).next();if(!Z.done)yield Z.value}}}function*UO0($,F,A,J){if(!OO(J))yield h1(D1.Iterator,$,A,J)}function*QO0($,F,A,J){if(J!==$.const)yield h1(D1.Literal,$,A,J)}function*KO0($,F,A,J){yield h1(D1.Never,$,A,J)}function*BO0($,F,A,J){if(f9($.not,F,A,J).next().done===!0)yield h1(D1.Not,$,A,J)}function*wO0($,F,A,J){if(!oJ(J))yield h1(D1.Null,$,A,J)}function*qO0($,F,A,J){if(!O2.IsNumberLike(J))return yield h1(D1.Number,$,A,J);if(r0($.exclusiveMaximum)&&!(J<$.exclusiveMaximum))yield h1(D1.NumberExclusiveMaximum,$,A,J);if(r0($.exclusiveMinimum)&&!(J>$.exclusiveMinimum))yield h1(D1.NumberExclusiveMinimum,$,A,J);if(r0($.maximum)&&!(J<=$.maximum))yield h1(D1.NumberMaximum,$,A,J);if(r0($.minimum)&&!(J>=$.minimum))yield h1(D1.NumberMinimum,$,A,J);if(r0($.multipleOf)&&J%$.multipleOf!==0)yield h1(D1.NumberMultipleOf,$,A,J)}function*LO0($,F,A,J){if(!O2.IsObjectLike(J))return yield h1(D1.Object,$,A,J);if(r0($.minProperties)&&!(Object.getOwnPropertyNames(J).length>=$.minProperties))yield h1(D1.ObjectMinProperties,$,A,J);if(r0($.maxProperties)&&!(Object.getOwnPropertyNames(J).length<=$.maxProperties))yield h1(D1.ObjectMaxProperties,$,A,J);let X=Array.isArray($.required)?$.required:[],Y=Object.getOwnPropertyNames($.properties),W=Object.getOwnPropertyNames(J);for(let Z of X){if(W.includes(Z))continue;yield h1(D1.ObjectRequiredProperty,$.properties[Z],`${A}/${ZX(Z)}`,void 0)}if($.additionalProperties===!1){for(let Z of W)if(!Y.includes(Z))yield h1(D1.ObjectAdditionalProperties,$,`${A}/${ZX(Z)}`,J[Z])}if(typeof $.additionalProperties==="object")for(let Z of W){if(Y.includes(Z))continue;yield*f9($.additionalProperties,F,`${A}/${ZX(Z)}`,J[Z])}for(let Z of Y){let D=$.properties[Z];if($.required&&$.required.includes(Z)){if(yield*f9(D,F,`${A}/${ZX(Z)}`,J[Z]),WX($)&&!(Z in J))yield h1(D1.ObjectRequiredProperty,D,`${A}/${ZX(Z)}`,void 0)}else if(O2.IsExactOptionalProperty(J,Z))yield*f9(D,F,`${A}/${ZX(Z)}`,J[Z])}}function*EO0($,F,A,J){if(!SO(J))yield h1(D1.Promise,$,A,J)}function*VO0($,F,A,J){if(!O2.IsRecordLike(J))return yield h1(D1.Object,$,A,J);if(r0($.minProperties)&&!(Object.getOwnPropertyNames(J).length>=$.minProperties))yield h1(D1.ObjectMinProperties,$,A,J);if(r0($.maxProperties)&&!(Object.getOwnPropertyNames(J).length<=$.maxProperties))yield h1(D1.ObjectMaxProperties,$,A,J);let[X,Y]=Object.entries($.patternProperties)[0],W=new RegExp(X);for(let[Z,D]of Object.entries(J))if(W.test(Z))yield*f9(Y,F,`${A}/${ZX(Z)}`,D);if(typeof $.additionalProperties==="object"){for(let[Z,D]of Object.entries(J))if(!W.test(Z))yield*f9($.additionalProperties,F,`${A}/${ZX(Z)}`,D)}if($.additionalProperties===!1)for(let[Z,D]of Object.entries(J)){if(W.test(Z))continue;return yield h1(D1.ObjectAdditionalProperties,$,`${A}/${ZX(Z)}`,D)}}function*NO0($,F,A,J){yield*f9(D6($,F),F,A,J)}function*CO0($,F,A,J){if(!W6(J))return yield h1(D1.String,$,A,J);if(r0($.minLength)&&!(J.length>=$.minLength))yield h1(D1.StringMinLength,$,A,J);if(r0($.maxLength)&&!(J.length<=$.maxLength))yield h1(D1.StringMaxLength,$,A,J);if(!new RegExp($.source,$.flags).test(J))return yield h1(D1.RegExp,$,A,J)}function*MO0($,F,A,J){if(!W6(J))return yield h1(D1.String,$,A,J);if(r0($.minLength)&&!(J.length>=$.minLength))yield h1(D1.StringMinLength,$,A,J);if(r0($.maxLength)&&!(J.length<=$.maxLength))yield h1(D1.StringMaxLength,$,A,J);if(W6($.pattern)){if(!new RegExp($.pattern).test(J))yield h1(D1.StringPattern,$,A,J)}if(W6($.format)){if(!v6.Has($.format))yield h1(D1.StringFormatUnknown,$,A,J);else if(!v6.Get($.format)(J))yield h1(D1.StringFormat,$,A,J)}}function*PO0($,F,A,J){if(!eJ(J))yield h1(D1.Symbol,$,A,J)}function*RO0($,F,A,J){if(!W6(J))return yield h1(D1.String,$,A,J);if(!new RegExp($.pattern).test(J))yield h1(D1.StringPattern,$,A,J)}function*IO0($,F,A,J){yield*f9(D6($,F),F,A,J)}function*TO0($,F,A,J){if(!D0(J))return yield h1(D1.Tuple,$,A,J);if($.items===void 0&&J.length!==0)return yield h1(D1.TupleLength,$,A,J);if(J.length!==$.maxItems)return yield h1(D1.TupleLength,$,A,J);if(!$.items)return;for(let X=0;X<$.items.length;X++)yield*f9($.items[X],F,`${A}/${X}`,J[X])}function*jO0($,F,A,J){if(!u2(J))yield h1(D1.Undefined,$,A,J)}function*OO0($,F,A,J){if(f0($,F,J))return;let X=$.anyOf.map((Y)=>new aD(f9(Y,F,A,J)));yield h1(D1.Union,$,A,J,X)}function*SO0($,F,A,J){if(!pU(J))return yield h1(D1.Uint8Array,$,A,J);if(r0($.maxByteLength)&&!(J.length<=$.maxByteLength))yield h1(D1.Uint8ArrayMaxByteLength,$,A,J);if(r0($.minByteLength)&&!(J.length>=$.minByteLength))yield h1(D1.Uint8ArrayMinByteLength,$,A,J)}function*_O0($,F,A,J){}function*kO0($,F,A,J){if(!O2.IsVoidLike(J))yield h1(D1.Void,$,A,J)}function*bO0($,F,A,J){if(!U9.Get($[a])($,J))yield h1(D1.Kind,$,A,J)}function*f9($,F,A,J){let X=r0($.$id)?[...F,$]:F,Y=$;switch(Y[a]){case"Any":return yield*$O0(Y,X,A,J);case"Argument":return yield*FO0(Y,X,A,J);case"Array":return yield*AO0(Y,X,A,J);case"AsyncIterator":return yield*JO0(Y,X,A,J);case"BigInt":return yield*XO0(Y,X,A,J);case"Boolean":return yield*YO0(Y,X,A,J);case"Constructor":return yield*WO0(Y,X,A,J);case"Date":return yield*ZO0(Y,X,A,J);case"Function":return yield*DO0(Y,X,A,J);case"Import":return yield*GO0(Y,X,A,J);case"Integer":return yield*zO0(Y,X,A,J);case"Intersect":return yield*HO0(Y,X,A,J);case"Iterator":return yield*UO0(Y,X,A,J);case"Literal":return yield*QO0(Y,X,A,J);case"Never":return yield*KO0(Y,X,A,J);case"Not":return yield*BO0(Y,X,A,J);case"Null":return yield*wO0(Y,X,A,J);case"Number":return yield*qO0(Y,X,A,J);case"Object":return yield*LO0(Y,X,A,J);case"Promise":return yield*EO0(Y,X,A,J);case"Record":return yield*VO0(Y,X,A,J);case"Ref":return yield*NO0(Y,X,A,J);case"RegExp":return yield*CO0(Y,X,A,J);case"String":return yield*MO0(Y,X,A,J);case"Symbol":return yield*PO0(Y,X,A,J);case"TemplateLiteral":return yield*RO0(Y,X,A,J);case"This":return yield*IO0(Y,X,A,J);case"Tuple":return yield*TO0(Y,X,A,J);case"Undefined":return yield*jO0(Y,X,A,J);case"Union":return yield*OO0(Y,X,A,J);case"Uint8Array":return yield*SO0(Y,X,A,J);case"Unknown":return yield*_O0(Y,X,A,J);case"Void":return yield*kO0(Y,X,A,J);default:if(!U9.Has(Y[a]))throw new r_1($);return yield*bO0(Y,X,A,J)}}function CA(...$){let F=$.length===3?f9($[0],$[1],"",$[2]):f9($[0],[],"",$[1]);return new aD(F)}var xO0=function($,F,A,J,X){if(J==="m")throw TypeError("Private method is not writable");if(J==="a"&&!X)throw TypeError("Private accessor was defined without a setter");if(typeof F==="function"?$!==F||!X:!F.has($))throw TypeError("Cannot write private member to an object whose class did not declare it");return J==="a"?X.call($,A):X?X.value=A:F.set($,A),A},t_1=function($,F,A,J){if(A==="a"&&!J)throw TypeError("Private accessor was defined without a getter");if(typeof F==="function"?$!==F||!J:!F.has($))throw TypeError("Cannot read private member from an object whose class did not declare it");return A==="m"?J:A==="a"?J.call($):J?J.value:F.get($)},He,$S,s_1;class o_1 extends z0{constructor($){let F=$.First();super(F===void 0?"Invalid Value":F.message);He.add(this),$S.set(this,void 0),xO0(this,$S,$,"f"),this.error=F}Errors(){return new aD(t_1(this,He,"m",s_1).call(this))}}$S=new WeakMap,He=new WeakSet,s_1=function*(){if(this.error)yield this.error;yield*t_1(this,$S,"f")};function a_1($,F,A){if(f0($,F,A))return;throw new o_1(CA($,F,A))}function FS(...$){return $.length===3?a_1($[0],$[1],$[2]):a_1($[0],[],$[1])}function gO0($){let F={};for(let A of Object.getOwnPropertyNames($))F[A]=w6($[A]);for(let A of Object.getOwnPropertySymbols($))F[A]=w6($[A]);return F}function fO0($){return $.map((F)=>w6(F))}function vO0($){return $.slice()}function yO0($){return new Map(w6([...$.entries()]))}function uO0($){return new Set(w6([...$.entries()]))}function hO0($){return new Date($.toISOString())}function mO0($){return $}function w6($){if(D0($))return fO0($);if(q3($))return hO0($);if(c5($))return vO0($);if(EO1($))return yO0($);if(VO1($))return uO0($);if(R0($))return gO0($);if(s7($))return mO0($);throw Error("ValueClone: Unable to clone value")}class o5 extends z0{constructor($,F){super(F);this.schema=$}}function q6($){return YW($)?$():w6($)}function dO0($,F){if(Q0($,"default"))return q6($.default);else return{}}function cO0($,F){return{}}function lO0($,F){if($.uniqueItems===!0&&!Q0($,"default"))throw new o5($,"Array with the uniqueItems constraint requires a default value");else if("contains"in $&&!Q0($,"default"))throw new o5($,"Array with the contains constraint requires a default value");else if("default"in $)return q6($.default);else if($.minItems!==void 0)return Array.from({length:$.minItems}).map((A)=>{return X5($.items,F)});else return[]}function pO0($,F){if(Q0($,"default"))return q6($.default);else return async function*(){}()}function iO0($,F){if(Q0($,"default"))return q6($.default);else return BigInt(0)}function nO0($,F){if(Q0($,"default"))return q6($.default);else return!1}function rO0($,F){if(Q0($,"default"))return q6($.default);else{let A=X5($.returns,F);if(typeof A==="object"&&!Array.isArray(A))return class{constructor(){for(let[J,X]of Object.entries(A)){let Y=this;Y[J]=X}}};else return class{}}}function aO0($,F){if(Q0($,"default"))return q6($.default);else if($.minimumTimestamp!==void 0)return new Date($.minimumTimestamp);else return new Date}function tO0($,F){if(Q0($,"default"))return q6($.default);else return()=>X5($.returns,F)}function sO0($,F){let A=globalThis.Object.values($.$defs),J=$.$defs[$.$ref];return X5(J,[...F,...A])}function oO0($,F){if(Q0($,"default"))return q6($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function eO0($,F){if(Q0($,"default"))return q6($.default);else{let A=$.allOf.reduce((J,X)=>{let Y=X5(X,F);return typeof Y==="object"?{...J,...Y}:Y},{});if(!f0($,F,A))throw new o5($,"Intersect produced invalid value. Consider using a default value.");return A}}function $S0($,F){if(Q0($,"default"))return q6($.default);else return function*(){}()}function FS0($,F){if(Q0($,"default"))return q6($.default);else return $.const}function AS0($,F){if(Q0($,"default"))return q6($.default);else throw new o5($,"Never types cannot be created. Consider using a default value.")}function JS0($,F){if(Q0($,"default"))return q6($.default);else throw new o5($,"Not types must have a default value")}function XS0($,F){if(Q0($,"default"))return q6($.default);else return null}function YS0($,F){if(Q0($,"default"))return q6($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function WS0($,F){if(Q0($,"default"))return q6($.default);else{let A=new Set($.required),J={};for(let[X,Y]of Object.entries($.properties)){if(!A.has(X))continue;J[X]=X5(Y,F)}return J}}function ZS0($,F){if(Q0($,"default"))return q6($.default);else return Promise.resolve(X5($.item,F))}function DS0($,F){if(Q0($,"default"))return q6($.default);else return{}}function GS0($,F){if(Q0($,"default"))return q6($.default);else return X5(D6($,F),F)}function zS0($,F){if(Q0($,"default"))return q6($.default);else throw new o5($,"RegExp types cannot be created. Consider using a default value.")}function HS0($,F){if($.pattern!==void 0)if(!Q0($,"default"))throw new o5($,"String types with patterns must specify a default value");else return q6($.default);else if($.format!==void 0)if(!Q0($,"default"))throw new o5($,"String types with formats must specify a default value");else return q6($.default);else if(Q0($,"default"))return q6($.default);else if($.minLength!==void 0)return Array.from({length:$.minLength}).map(()=>" ").join("");else return""}function US0($,F){if(Q0($,"default"))return q6($.default);else if("value"in $)return Symbol.for($.value);else return Symbol()}function QS0($,F){if(Q0($,"default"))return q6($.default);if(!gO($))throw new o5($,"Can only create template literals that produce a finite variants. Consider using a default value.");return $Q($)[0]}function KS0($,F){if(e_1++>CS0)throw new o5($,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");if(Q0($,"default"))return q6($.default);else return X5(D6($,F),F)}function BS0($,F){if(Q0($,"default"))return q6($.default);if($.items===void 0)return[];else return Array.from({length:$.minItems}).map((A,J)=>X5($.items[J],F))}function wS0($,F){if(Q0($,"default"))return q6($.default);else return}function qS0($,F){if(Q0($,"default"))return q6($.default);else if($.anyOf.length===0)throw Error("ValueCreate.Union: Cannot create Union with zero variants");else return X5($.anyOf[0],F)}function LS0($,F){if(Q0($,"default"))return q6($.default);else if($.minByteLength!==void 0)return new Uint8Array($.minByteLength);else return new Uint8Array(0)}function ES0($,F){if(Q0($,"default"))return q6($.default);else return{}}function VS0($,F){if(Q0($,"default"))return q6($.default);else return}function NS0($,F){if(Q0($,"default"))return q6($.default);else throw Error("User defined types must specify a default value")}function X5($,F){let A=x9($,F),J=$;switch(J[a]){case"Any":return dO0(J,A);case"Argument":return cO0(J,A);case"Array":return lO0(J,A);case"AsyncIterator":return pO0(J,A);case"BigInt":return iO0(J,A);case"Boolean":return nO0(J,A);case"Constructor":return rO0(J,A);case"Date":return aO0(J,A);case"Function":return tO0(J,A);case"Import":return sO0(J,A);case"Integer":return oO0(J,A);case"Intersect":return eO0(J,A);case"Iterator":return $S0(J,A);case"Literal":return FS0(J,A);case"Never":return AS0(J,A);case"Not":return JS0(J,A);case"Null":return XS0(J,A);case"Number":return YS0(J,A);case"Object":return WS0(J,A);case"Promise":return ZS0(J,A);case"Record":return DS0(J,A);case"Ref":return GS0(J,A);case"RegExp":return zS0(J,A);case"String":return HS0(J,A);case"Symbol":return US0(J,A);case"TemplateLiteral":return QS0(J,A);case"This":return KS0(J,A);case"Tuple":return BS0(J,A);case"Undefined":return wS0(J,A);case"Union":return qS0(J,A);case"Uint8Array":return LS0(J,A);case"Unknown":return ES0(J,A);case"Void":return VS0(J,A);default:if(!U9.Has(J[a]))throw new o5(J,"Unknown type");return NS0(J,A)}}var CS0=512,e_1=0;function QF(...$){return e_1=0,$.length===2?X5($[0],$[1]):X5($[0],[])}class Ue extends z0{constructor($,F){super(F);this.schema=$}}function $k1($,F,A){if($[a]==="Object"&&typeof A==="object"&&!oJ(A)){let J=$,X=Object.getOwnPropertyNames(A);return Object.entries(J.properties).reduce((W,[Z,D])=>{let G=D[a]==="Literal"&&D.const===A[Z]?100:0,z=f0(D,F,A[Z])?10:0,H=X.includes(Z)?1:0;return W+(G+z+H)},0)}else if($[a]==="Union"){let X=$.anyOf.map((Y)=>D6(Y,F)).map((Y)=>$k1(Y,F,A));return Math.max(...X)}else return f0($,F,A)?1:0}function MS0($,F,A){let J=$.anyOf.map((W)=>D6(W,F)),[X,Y]=[J[0],0];for(let W of J){let Z=$k1(W,F,A);if(Z>Y)X=W,Y=Z}return X}function PS0($,F,A){if("default"in $)return typeof A==="function"?$.default:w6($.default);else{let J=MS0($,F,A);return bE(J,F,A)}}function RS0($,F,A){return f0($,F,A)?w6(A):QF($,F)}function IS0($,F,A){return f0($,F,A)?A:QF($,F)}function TS0($,F,A){if(f0($,F,A))return w6(A);let J=D0(A)?w6(A):QF($,F),X=A0($.minItems)&&J.length<$.minItems?[...J,...Array.from({length:$.minItems-J.length},()=>null)]:J,W=(A0($.maxItems)&&X.length>$.maxItems?X.slice(0,$.maxItems):X).map((D)=>KF($.items,F,D));if($.uniqueItems!==!0)return W;let Z=[...new Set(W)];if(!f0($,F,Z))throw new Ue($,"Array cast produced invalid data due to uniqueItems constraint");return Z}function jS0($,F,A){if(f0($,F,A))return QF($,F);let J=new Set($.returns.required||[]),X=function(){};for(let[Y,W]of Object.entries($.returns.properties)){if(!J.has(Y)&&A.prototype[Y]===void 0)continue;X.prototype[Y]=KF(W,F,A.prototype[Y])}return X}function OS0($,F,A){let J=globalThis.Object.values($.$defs),X=$.$defs[$.$ref];return KF(X,[...F,...J],A)}function Fk1($,F){if(R0($)&&!R0(F)||!R0($)&&R0(F))return $;if(!R0($)||!R0(F))return F;return globalThis.Object.getOwnPropertyNames($).reduce((A,J)=>{let X=J in F?Fk1($[J],F[J]):$[J];return{...A,[J]:X}},{})}function SS0($,F,A){if(f0($,F,A))return A;let J=QF($,F),X=Fk1(J,A);return f0($,F,X)?X:J}function _S0($,F,A){throw new Ue($,"Never types cannot be cast")}function kS0($,F,A){if(f0($,F,A))return A;if(A===null||typeof A!=="object")return QF($,F);let J=new Set($.required||[]),X={};for(let[Y,W]of Object.entries($.properties)){if(!J.has(Y)&&A[Y]===void 0)continue;X[Y]=KF(W,F,A[Y])}if(typeof $.additionalProperties==="object"){let Y=Object.getOwnPropertyNames($.properties);for(let W of Object.getOwnPropertyNames(A)){if(Y.includes(W))continue;X[W]=KF($.additionalProperties,F,A[W])}}return X}function bS0($,F,A){if(f0($,F,A))return w6(A);if(A===null||typeof A!=="object"||Array.isArray(A)||A instanceof Date)return QF($,F);let J=Object.getOwnPropertyNames($.patternProperties)[0],X=$.patternProperties[J],Y={};for(let[W,Z]of Object.entries(A))Y[W]=KF(X,F,Z);return Y}function xS0($,F,A){return KF(D6($,F),F,A)}function gS0($,F,A){return KF(D6($,F),F,A)}function fS0($,F,A){if(f0($,F,A))return w6(A);if(!D0(A))return QF($,F);if($.items===void 0)return[];return $.items.map((J,X)=>KF(J,F,A[X]))}function vS0($,F,A){return f0($,F,A)?w6(A):PS0($,F,A)}function KF($,F,A){let J=W6($.$id)?x9($,F):F,X=$;switch($[a]){case"Array":return TS0(X,J,A);case"Constructor":return jS0(X,J,A);case"Import":return OS0(X,J,A);case"Intersect":return SS0(X,J,A);case"Never":return _S0(X,J,A);case"Object":return kS0(X,J,A);case"Record":return bS0(X,J,A);case"Ref":return xS0(X,J,A);case"This":return gS0(X,J,A);case"Tuple":return fS0(X,J,A);case"Union":return vS0(X,J,A);case"Date":case"Symbol":case"Uint8Array":return RS0($,F,A);default:return IS0(X,J,A)}}function bE(...$){return $.length===3?KF($[0],$[1],$[2]):KF($[0],[],$[1])}function yS0($){return ZW($)&&$[a]!=="Unsafe"}function uS0($,F,A){if(!D0(A))return A;return A.map((J)=>Y7($.items,F,J))}function hS0($,F,A){let J=globalThis.Object.values($.$defs),X=$.$defs[$.$ref];return Y7(X,[...F,...J],A)}function mS0($,F,A){let J=$.unevaluatedProperties,Y=$.allOf.map((Z)=>Y7(Z,F,w6(A))).reduce((Z,D)=>R0(D)?{...Z,...D}:D,{});if(!R0(A)||!R0(Y)||!ZW(J))return Y;let W=J7($);for(let Z of Object.getOwnPropertyNames(A)){if(W.includes(Z))continue;if(f0(J,F,A[Z]))Y[Z]=Y7(J,F,A[Z])}return Y}function dS0($,F,A){if(!R0(A)||D0(A))return A;let J=$.additionalProperties;for(let X of Object.getOwnPropertyNames(A)){if(Q0($.properties,X)){A[X]=Y7($.properties[X],F,A[X]);continue}if(ZW(J)&&f0(J,F,A[X])){A[X]=Y7(J,F,A[X]);continue}delete A[X]}return A}function cS0($,F,A){if(!R0(A))return A;let J=$.additionalProperties,X=Object.getOwnPropertyNames(A),[Y,W]=Object.entries($.patternProperties)[0],Z=new RegExp(Y);for(let D of X){if(Z.test(D)){A[D]=Y7(W,F,A[D]);continue}if(ZW(J)&&f0(J,F,A[D])){A[D]=Y7(J,F,A[D]);continue}delete A[D]}return A}function lS0($,F,A){return Y7(D6($,F),F,A)}function pS0($,F,A){return Y7(D6($,F),F,A)}function iS0($,F,A){if(!D0(A))return A;if(u2($.items))return[];let J=Math.min(A.length,$.items.length);for(let X=0;X<J;X++)A[X]=Y7($.items[X],F,A[X]);return A.length>J?A.slice(0,J):A}function nS0($,F,A){for(let J of $.anyOf)if(yS0(J)&&f0(J,F,A))return Y7(J,F,A);return A}function Y7($,F,A){let J=W6($.$id)?x9($,F):F,X=$;switch(X[a]){case"Array":return uS0(X,J,A);case"Import":return hS0(X,J,A);case"Intersect":return mS0(X,J,A);case"Object":return dS0(X,J,A);case"Record":return cS0(X,J,A);case"Ref":return lS0(X,J,A);case"This":return pS0(X,J,A);case"Tuple":return iS0(X,J,A);case"Union":return nS0(X,J,A);default:return A}}function AS(...$){return $.length===3?Y7($[0],$[1],$[2]):Y7($[0],[],$[1])}function JS($){return W6($)&&!isNaN($)&&!isNaN(parseFloat($))}function rS0($){return D8($)||EA($)||A0($)}function xE($){return $===!0||A0($)&&$===1||D8($)&&$===BigInt("1")||W6($)&&($.toLowerCase()==="true"||$==="1")}function gE($){return $===!1||A0($)&&($===0||Object.is($,-0))||D8($)&&$===BigInt("0")||W6($)&&($.toLowerCase()==="false"||$==="0"||$==="-0")}function aS0($){return W6($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function tS0($){return W6($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function sS0($){return W6($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function oS0($){return W6($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function eS0($){return W6($)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test($)}function $_0($,F){let A=Jk1($);return A===F?A:$}function F_0($,F){let A=Xk1($);return A===F?A:$}function A_0($,F){let A=Ak1($);return A===F?A:$}function J_0($,F){return W6($.const)?$_0(F,$.const):A0($.const)?F_0(F,$.const):EA($.const)?A_0(F,$.const):F}function Ak1($){return xE($)?!0:gE($)?!1:$}function X_0($){let F=(A)=>A.split(".")[0];return JS($)?BigInt(F($)):A0($)?BigInt(Math.trunc($)):gE($)?BigInt(0):xE($)?BigInt(1):$}function Jk1($){return eJ($)&&$.description!==void 0?$.description.toString():rS0($)?$.toString():$}function Xk1($){return JS($)?parseFloat($):xE($)?1:gE($)?0:$}function Y_0($){return JS($)?parseInt($):A0($)?Math.trunc($):xE($)?1:gE($)?0:$}function W_0($){return W6($)&&$.toLowerCase()==="null"?null:$}function Z_0($){return W6($)&&$==="undefined"?void 0:$}function D_0($){return q3($)?$:A0($)?new Date($):xE($)?new Date(1):gE($)?new Date(0):JS($)?new Date(parseInt($)):tS0($)?new Date(`1970-01-01T${$}.000Z`):aS0($)?new Date(`1970-01-01T${$}`):oS0($)?new Date(`${$}.000Z`):sS0($)?new Date($):eS0($)?new Date(`${$}T00:00:00.000Z`):$}function G_0($){return $}function z_0($,F,A){return(D0(A)?A:[A]).map((X)=>BF($.items,F,X))}function H_0($,F,A){return X_0(A)}function U_0($,F,A){return Ak1(A)}function Q_0($,F,A){return D_0(A)}function K_0($,F,A){let J=globalThis.Object.values($.$defs),X=$.$defs[$.$ref];return BF(X,[...F,...J],A)}function B_0($,F,A){return Y_0(A)}function w_0($,F,A){return $.allOf.reduce((J,X)=>BF(X,F,J),A)}function q_0($,F,A){return J_0($,A)}function L_0($,F,A){return W_0(A)}function E_0($,F,A){return Xk1(A)}function V_0($,F,A){if(!R0(A)||D0(A))return A;for(let J of Object.getOwnPropertyNames($.properties)){if(!Q0(A,J))continue;A[J]=BF($.properties[J],F,A[J])}return A}function N_0($,F,A){if(!(R0(A)&&!D0(A)))return A;let X=Object.getOwnPropertyNames($.patternProperties)[0],Y=$.patternProperties[X];for(let[W,Z]of Object.entries(A))A[W]=BF(Y,F,Z);return A}function C_0($,F,A){return BF(D6($,F),F,A)}function M_0($,F,A){return Jk1(A)}function P_0($,F,A){return W6(A)||A0(A)?Symbol(A):A}function R_0($,F,A){return BF(D6($,F),F,A)}function I_0($,F,A){if(!(D0(A)&&!u2($.items)))return A;return A.map((X,Y)=>{return Y<$.items.length?BF($.items[Y],F,X):X})}function T_0($,F,A){return Z_0(A)}function j_0($,F,A){for(let J of $.anyOf)if(f0(J,F,A))return A;for(let J of $.anyOf){let X=BF(J,F,w6(A));if(!f0(J,F,X))continue;return X}return A}function BF($,F,A){let J=x9($,F),X=$;switch($[a]){case"Array":return z_0(X,J,A);case"BigInt":return H_0(X,J,A);case"Boolean":return U_0(X,J,A);case"Date":return Q_0(X,J,A);case"Import":return K_0(X,J,A);case"Integer":return B_0(X,J,A);case"Intersect":return w_0(X,J,A);case"Literal":return q_0(X,J,A);case"Null":return L_0(X,J,A);case"Number":return E_0(X,J,A);case"Object":return V_0(X,J,A);case"Record":return N_0(X,J,A);case"Ref":return C_0(X,J,A);case"String":return M_0(X,J,A);case"Symbol":return P_0(X,J,A);case"This":return R_0(X,J,A);case"Tuple":return I_0(X,J,A);case"Undefined":return T_0(X,J,A);case"Union":return j_0(X,J,A);default:return G_0(A)}}function XS(...$){return $.length===3?BF($[0],$[1],$[2]):BF($[0],[],$[1])}class fE extends z0{constructor($,F,A){super("Unable to decode value as it does not match the expected schema");this.schema=$,this.value=F,this.error=A}}class tD extends z0{constructor($,F,A,J){super(J instanceof Error?J.message:"Unknown error");this.schema=$,this.path=F,this.value=A,this.error=J}}function F4($,F,A){try{return P6($)?$[S2].Decode(A):A}catch(J){throw new tD($,F,A,J)}}function O_0($,F,A,J){return D0(J)?F4($,A,J.map((X,Y)=>wF($.items,F,`${A}/${Y}`,X))):F4($,A,J)}function S_0($,F,A,J){if(!R0(J)||s7(J))return F4($,A,J);let X=hO($),Y=X.map((z)=>z[0]),W={...J};for(let[z,H]of X)if(z in W)W[z]=wF(H,F,`${A}/${z}`,W[z]);if(!P6($.unevaluatedProperties))return F4($,A,W);let Z=Object.getOwnPropertyNames(W),D=$.unevaluatedProperties,G={...W};for(let z of Z)if(!Y.includes(z))G[z]=F4(D,`${A}/${z}`,G[z]);return F4($,A,G)}function __0($,F,A,J){let X=globalThis.Object.values($.$defs),Y=$.$defs[$.$ref],W=wF(Y,[...F,...X],A,J);return F4($,A,W)}function k_0($,F,A,J){return F4($,A,wF($.not,F,A,J))}function b_0($,F,A,J){if(!R0(J))return F4($,A,J);let X=J7($),Y={...J};for(let G of X){if(!Q0(Y,G))continue;if(u2(Y[G])&&(!AX($.properties[G])||O2.IsExactOptionalProperty(Y,G)))continue;Y[G]=wF($.properties[G],F,`${A}/${G}`,Y[G])}if(!$4($.additionalProperties))return F4($,A,Y);let W=Object.getOwnPropertyNames(Y),Z=$.additionalProperties,D={...Y};for(let G of W)if(!X.includes(G))D[G]=F4(Z,`${A}/${G}`,D[G]);return F4($,A,D)}function x_0($,F,A,J){if(!R0(J))return F4($,A,J);let X=Object.getOwnPropertyNames($.patternProperties)[0],Y=new RegExp(X),W={...J};for(let z of Object.getOwnPropertyNames(J))if(Y.test(z))W[z]=wF($.patternProperties[X],F,`${A}/${z}`,W[z]);if(!$4($.additionalProperties))return F4($,A,W);let Z=Object.getOwnPropertyNames(W),D=$.additionalProperties,G={...W};for(let z of Z)if(!Y.test(z))G[z]=F4(D,`${A}/${z}`,G[z]);return F4($,A,G)}function g_0($,F,A,J){let X=D6($,F);return F4($,A,wF(X,F,A,J))}function f_0($,F,A,J){let X=D6($,F);return F4($,A,wF(X,F,A,J))}function v_0($,F,A,J){return D0(J)&&D0($.items)?F4($,A,$.items.map((X,Y)=>wF(X,F,`${A}/${Y}`,J[Y]))):F4($,A,J)}function y_0($,F,A,J){for(let X of $.anyOf){if(!f0(X,F,J))continue;let Y=wF(X,F,A,J);return F4($,A,Y)}return F4($,A,J)}function wF($,F,A,J){let X=x9($,F),Y=$;switch($[a]){case"Array":return O_0(Y,X,A,J);case"Import":return __0(Y,X,A,J);case"Intersect":return S_0(Y,X,A,J);case"Not":return k_0(Y,X,A,J);case"Object":return b_0(Y,X,A,J);case"Record":return x_0(Y,X,A,J);case"Ref":return g_0(Y,X,A,J);case"Symbol":return F4(Y,A,J);case"This":return f_0(Y,X,A,J);case"Tuple":return v_0(Y,X,A,J);case"Union":return y_0(Y,X,A,J);default:return F4(Y,A,J)}}function QQ($,F,A){return wF($,F,"",A)}class vE extends z0{constructor($,F,A){super("The encoded value does not match the expected schema");this.schema=$,this.value=F,this.error=A}}class Yk1 extends z0{constructor($,F,A,J){super(`${J instanceof Error?J.message:"Unknown error"}`);this.schema=$,this.path=F,this.value=A,this.error=J}}function G8($,F,A){try{return P6($)?$[S2].Encode(A):A}catch(J){throw new Yk1($,F,A,J)}}function u_0($,F,A,J){let X=G8($,A,J);return D0(X)?X.map((Y,W)=>qF($.items,F,`${A}/${W}`,Y)):X}function h_0($,F,A,J){let X=globalThis.Object.values($.$defs),Y=$.$defs[$.$ref],W=G8($,A,J);return qF(Y,[...F,...X],A,W)}function m_0($,F,A,J){let X=G8($,A,J);if(!R0(J)||s7(J))return X;let Y=hO($),W=Y.map((H)=>H[0]),Z={...X};for(let[H,U]of Y)if(H in Z)Z[H]=qF(U,F,`${A}/${H}`,Z[H]);if(!P6($.unevaluatedProperties))return Z;let D=Object.getOwnPropertyNames(Z),G=$.unevaluatedProperties,z={...Z};for(let H of D)if(!W.includes(H))z[H]=G8(G,`${A}/${H}`,z[H]);return z}function d_0($,F,A,J){return G8($.not,A,G8($,A,J))}function c_0($,F,A,J){let X=G8($,A,J);if(!R0(X))return X;let Y=J7($),W={...X};for(let z of Y){if(!Q0(W,z))continue;if(u2(W[z])&&(!AX($.properties[z])||O2.IsExactOptionalProperty(W,z)))continue;W[z]=qF($.properties[z],F,`${A}/${z}`,W[z])}if(!$4($.additionalProperties))return W;let Z=Object.getOwnPropertyNames(W),D=$.additionalProperties,G={...W};for(let z of Z)if(!Y.includes(z))G[z]=G8(D,`${A}/${z}`,G[z]);return G}function l_0($,F,A,J){let X=G8($,A,J);if(!R0(J))return X;let Y=Object.getOwnPropertyNames($.patternProperties)[0],W=new RegExp(Y),Z={...X};for(let H of Object.getOwnPropertyNames(J))if(W.test(H))Z[H]=qF($.patternProperties[Y],F,`${A}/${H}`,Z[H]);if(!$4($.additionalProperties))return Z;let D=Object.getOwnPropertyNames(Z),G=$.additionalProperties,z={...Z};for(let H of D)if(!W.test(H))z[H]=G8(G,`${A}/${H}`,z[H]);return z}function p_0($,F,A,J){let X=D6($,F),Y=qF(X,F,A,J);return G8($,A,Y)}function i_0($,F,A,J){let X=D6($,F),Y=qF(X,F,A,J);return G8($,A,Y)}function n_0($,F,A,J){let X=G8($,A,J);return D0($.items)?$.items.map((Y,W)=>qF(Y,F,`${A}/${W}`,X[W])):[]}function r_0($,F,A,J){for(let X of $.anyOf){if(!f0(X,F,J))continue;let Y=qF(X,F,A,J);return G8($,A,Y)}for(let X of $.anyOf){let Y=qF(X,F,A,J);if(!f0($,F,Y))continue;return G8($,A,Y)}return G8($,A,J)}function qF($,F,A,J){let X=x9($,F),Y=$;switch($[a]){case"Array":return u_0(Y,X,A,J);case"Import":return h_0(Y,X,A,J);case"Intersect":return m_0(Y,X,A,J);case"Not":return d_0(Y,X,A,J);case"Object":return c_0(Y,X,A,J);case"Record":return l_0(Y,X,A,J);case"Ref":return p_0(Y,X,A,J);case"This":return i_0(Y,X,A,J);case"Tuple":return n_0(Y,X,A,J);case"Union":return r_0(Y,X,A,J);default:return G8(Y,A,J)}}function KQ($,F,A){return qF($,F,"",A)}function a_0($,F){return P6($)||Q9($.items,F)}function t_0($,F){return P6($)||Q9($.items,F)}function s_0($,F){return P6($)||Q9($.returns,F)||$.parameters.some((A)=>Q9(A,F))}function o_0($,F){return P6($)||Q9($.returns,F)||$.parameters.some((A)=>Q9(A,F))}function e_0($,F){return P6($)||P6($.unevaluatedProperties)||$.allOf.some((A)=>Q9(A,F))}function $k0($,F){let A=globalThis.Object.getOwnPropertyNames($.$defs).reduce((X,Y)=>[...X,$.$defs[Y]],[]),J=$.$defs[$.$ref];return P6($)||Q9(J,[...A,...F])}function Fk0($,F){return P6($)||Q9($.items,F)}function Ak0($,F){return P6($)||Q9($.not,F)}function Jk0($,F){return P6($)||Object.values($.properties).some((A)=>Q9(A,F))||$4($.additionalProperties)&&Q9($.additionalProperties,F)}function Xk0($,F){return P6($)||Q9($.item,F)}function Yk0($,F){let A=Object.getOwnPropertyNames($.patternProperties)[0],J=$.patternProperties[A];return P6($)||Q9(J,F)||$4($.additionalProperties)&&P6($.additionalProperties)}function Wk0($,F){if(P6($))return!0;return Q9(D6($,F),F)}function Zk0($,F){if(P6($))return!0;return Q9(D6($,F),F)}function Dk0($,F){return P6($)||!u2($.items)&&$.items.some((A)=>Q9(A,F))}function Gk0($,F){return P6($)||$.anyOf.some((A)=>Q9(A,F))}function Q9($,F){let A=x9($,F),J=$;if($.$id&&Qe.has($.$id))return!1;if($.$id)Qe.add($.$id);switch($[a]){case"Array":return a_0(J,A);case"AsyncIterator":return t_0(J,A);case"Constructor":return s_0(J,A);case"Function":return o_0(J,A);case"Import":return $k0(J,A);case"Intersect":return e_0(J,A);case"Iterator":return Fk0(J,A);case"Not":return Ak0(J,A);case"Object":return Jk0(J,A);case"Promise":return Xk0(J,A);case"Record":return Yk0(J,A);case"Ref":return Wk0(J,A);case"This":return Zk0(J,A);case"Tuple":return Dk0(J,A);case"Union":return Gk0(J,A);default:return P6($)}}var Qe=new Set;function DX($,F){return Qe.clear(),Q9($,F)}function Wk1(...$){let[F,A,J]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]];if(!f0(F,A,J))throw new fE(F,J,CA(F,A,J).First());return DX(F,A)?QQ(F,A,J):J}function GX($,F){let A=Q0($,"default")?$.default:void 0,J=YW(A)?A():w6(A);return u2(F)?J:R0(F)&&R0(J)?Object.assign(J,F):F}function Ke($){return ZW($)&&"default"in $}function zk0($,F,A){if(D0(A)){for(let X=0;X<A.length;X++)A[X]=E3($.items,F,A[X]);return A}let J=GX($,A);if(!D0(J))return J;for(let X=0;X<J.length;X++)J[X]=E3($.items,F,J[X]);return J}function Hk0($,F,A){return q3(A)?A:GX($,A)}function Uk0($,F,A){let J=globalThis.Object.values($.$defs),X=$.$defs[$.$ref];return E3(X,[...F,...J],A)}function Qk0($,F,A){let J=GX($,A);return $.allOf.reduce((X,Y)=>{let W=E3(Y,F,J);return R0(W)?{...X,...W}:W},{})}function Kk0($,F,A){let J=GX($,A);if(!R0(J))return J;let X=Object.getOwnPropertyNames($.properties);for(let Y of X){let W=E3($.properties[Y],F,J[Y]);if(u2(W))continue;J[Y]=E3($.properties[Y],F,J[Y])}if(!Ke($.additionalProperties))return J;for(let Y of Object.getOwnPropertyNames(J)){if(X.includes(Y))continue;J[Y]=E3($.additionalProperties,F,J[Y])}return J}function Bk0($,F,A){let J=GX($,A);if(!R0(J))return J;let X=$.additionalProperties,[Y,W]=Object.entries($.patternProperties)[0],Z=new RegExp(Y);for(let D of Object.getOwnPropertyNames(J)){if(!(Z.test(D)&&Ke(W)))continue;J[D]=E3(W,F,J[D])}if(!Ke(X))return J;for(let D of Object.getOwnPropertyNames(J)){if(Z.test(D))continue;J[D]=E3(X,F,J[D])}return J}function wk0($,F,A){return E3(D6($,F),F,GX($,A))}function qk0($,F,A){return E3(D6($,F),F,A)}function Lk0($,F,A){let J=GX($,A);if(!D0(J)||u2($.items))return J;let[X,Y]=[$.items,Math.max($.items.length,J.length)];for(let W=0;W<Y;W++)if(W<X.length)J[W]=E3(X[W],F,J[W]);return J}function Ek0($,F,A){let J=GX($,A);for(let X of $.anyOf){let Y=E3(X,F,w6(J));if(f0(X,F,Y))return Y}return J}function E3($,F,A){let J=x9($,F),X=$;switch(X[a]){case"Array":return zk0(X,J,A);case"Date":return Hk0(X,J,A);case"Import":return Uk0(X,J,A);case"Intersect":return Qk0(X,J,A);case"Object":return Kk0(X,J,A);case"Record":return Bk0(X,J,A);case"Ref":return wk0(X,J,A);case"This":return qk0(X,J,A);case"Tuple":return Lk0(X,J,A);case"Union":return Ek0(X,J,A);default:return GX(X,A)}}function YS(...$){return $.length===3?E3($[0],$[1],$[2]):E3($[0],[],$[1])}var LF={};l2(LF,{ValuePointerRootSetError:()=>Be,ValuePointerRootDeleteError:()=>we,Set:()=>Vk0,Has:()=>Ck0,Get:()=>Mk0,Format:()=>yE,Delete:()=>Nk0});class Be extends z0{constructor($,F,A){super("Cannot set root value");this.value=$,this.path=F,this.update=A}}class we extends z0{constructor($,F){super("Cannot delete root value");this.value=$,this.path=F}}function Zk1($){return $.indexOf("~")===-1?$:$.replace(/~1/g,"/").replace(/~0/g,"~")}function*yE($){if($==="")return;let[F,A]=[0,0];for(let J=0;J<$.length;J++)if($.charAt(J)==="/")if(J===0)F=J+1;else A=J,yield Zk1($.slice(F,A)),F=J+1;else A=J;yield Zk1($.slice(F))}function Vk0($,F,A){if(F==="")throw new Be($,F,A);let[J,X,Y]=[null,$,""];for(let W of yE(F)){if(X[W]===void 0)X[W]={};J=X,X=X[W],Y=W}J[Y]=A}function Nk0($,F){if(F==="")throw new we($,F);let[A,J,X]=[null,$,""];for(let Y of yE(F)){if(J[Y]===void 0||J[Y]===null)return;A=J,J=J[Y],X=Y}if(Array.isArray(A)){let Y=parseInt(X);A.splice(Y,1)}else delete A[X]}function Ck0($,F){if(F==="")return!0;let[A,J,X]=[null,$,""];for(let Y of yE(F)){if(J[Y]===void 0)return!1;A=J,J=J[Y],X=Y}return Object.getOwnPropertyNames(A).includes(X)}function Mk0($,F){if(F==="")return $;let A=$;for(let J of yE(F)){if(A[J]===void 0)return;A=A[J]}return A}function Pk0($,F){if(!R0(F))return!1;let A=[...Object.keys($),...Object.getOwnPropertySymbols($)],J=[...Object.keys(F),...Object.getOwnPropertySymbols(F)];if(A.length!==J.length)return!1;return A.every((X)=>sD($[X],F[X]))}function Rk0($,F){return q3(F)&&$.getTime()===F.getTime()}function Ik0($,F){if(!D0(F)||$.length!==F.length)return!1;return $.every((A,J)=>sD(A,F[J]))}function Tk0($,F){if(!c5(F)||$.length!==F.length||Object.getPrototypeOf($).constructor.name!==Object.getPrototypeOf(F).constructor.name)return!1;return $.every((A,J)=>sD(A,F[J]))}function jk0($,F){return $===F}function sD($,F){if(q3($))return Rk0($,F);if(c5($))return Tk0($,F);if(D0($))return Ik0($,F);if(R0($))return Pk0($,F);if(s7($))return jk0($,F);throw Error("ValueEquals: Unable to compare value")}var Ok0=I6({type:e0("insert"),path:L3(),value:zF()}),Sk0=I6({type:e0("update"),path:L3(),value:zF()}),_k0=I6({type:e0("delete"),path:L3()}),Gk1=R6([Ok0,Sk0,_k0]);class qe extends z0{constructor($,F){super(F);this.value=$}}function WS($,F){return{type:"update",path:$,value:F}}function zk1($,F){return{type:"insert",path:$,value:F}}function Hk1($){return{type:"delete",path:$}}function Dk1($){if(globalThis.Object.getOwnPropertySymbols($).length>0)throw new qe($,"Cannot diff objects with symbols")}function*kk0($,F,A){if(Dk1(F),Dk1(A),!mo(A))return yield WS($,A);let J=globalThis.Object.getOwnPropertyNames(F),X=globalThis.Object.getOwnPropertyNames(A);for(let Y of X){if(Q0(F,Y))continue;yield zk1(`${$}/${Y}`,A[Y])}for(let Y of J){if(!Q0(A,Y))continue;if(sD(F,A))continue;yield*ZS(`${$}/${Y}`,F[Y],A[Y])}for(let Y of J){if(Q0(A,Y))continue;yield Hk1(`${$}/${Y}`)}}function*bk0($,F,A){if(!D0(A))return yield WS($,A);for(let J=0;J<Math.min(F.length,A.length);J++)yield*ZS(`${$}/${J}`,F[J],A[J]);for(let J=0;J<A.length;J++){if(J<F.length)continue;yield zk1(`${$}/${J}`,A[J])}for(let J=F.length-1;J>=0;J--){if(J<A.length)continue;yield Hk1(`${$}/${J}`)}}function*xk0($,F,A){if(!c5(A)||F.length!==A.length||globalThis.Object.getPrototypeOf(F).constructor.name!==globalThis.Object.getPrototypeOf(A).constructor.name)return yield WS($,A);for(let J=0;J<Math.min(F.length,A.length);J++)yield*ZS(`${$}/${J}`,F[J],A[J])}function*gk0($,F,A){if(F===A)return;yield WS($,A)}function*ZS($,F,A){if(mo(F))return yield*kk0($,F,A);if(D0(F))return yield*bk0($,F,A);if(c5(F))return yield*xk0($,F,A);if(s7(F))return yield*gk0($,F,A);throw new qe(F,"Unable to diff value")}function Uk1($,F){return[...ZS("",$,F)]}function fk0($){return $.length>0&&$[0].path===""&&$[0].type==="update"}function vk0($){return $.length===0}function Qk1($,F){if(fk0(F))return w6(F[0].value);if(vk0(F))return w6($);let A=w6($);for(let J of F)switch(J.type){case"insert":{LF.Set(A,J.path,J.value);break}case"update":{LF.Set(A,J.path,J.value);break}case"delete":{LF.Delete(A,J.path);break}}return A}function Kk1(...$){let[F,A,J]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]],X=DX(F,A)?KQ(F,A,J):J;if(!f0(F,A,X))throw new vE(F,X,CA(F,A,X).First());return X}function DS($){return R0($)&&!D0($)}class Le extends z0{constructor($){super($)}}function yk0($,F,A,J){if(!DS(A))LF.Set($,F,w6(J));else{let X=Object.getOwnPropertyNames(A),Y=Object.getOwnPropertyNames(J);for(let W of X)if(!Y.includes(W))delete A[W];for(let W of Y)if(!X.includes(W))A[W]=null;for(let W of Y)Ee($,`${F}/${W}`,A[W],J[W])}}function uk0($,F,A,J){if(!D0(A))LF.Set($,F,w6(J));else{for(let X=0;X<J.length;X++)Ee($,`${F}/${X}`,A[X],J[X]);A.splice(J.length)}}function hk0($,F,A,J){if(c5(A)&&A.length===J.length)for(let X=0;X<A.length;X++)A[X]=J[X];else LF.Set($,F,w6(J))}function mk0($,F,A,J){if(A===J)return;LF.Set($,F,J)}function Ee($,F,A,J){if(D0(J))return uk0($,F,A,J);if(c5(J))return hk0($,F,A,J);if(DS(J))return yk0($,F,A,J);if(s7(J))return mk0($,F,A,J)}function Bk1($){return c5($)||s7($)}function dk0($,F){return DS($)&&D0(F)||D0($)&&DS(F)}function wk1($,F){if(Bk1($)||Bk1(F))throw new Le("Only object and array types can be mutated at the root level");if(dk0($,F))throw new Le("Cannot assign due type mismatch of assignable values");Ee($,"",$,F)}class Ne extends z0{constructor($){super($)}}var Ve;(function($){let F=new Map([["Assert",(Y,W,Z)=>{return FS(Y,W,Z),Z}],["Cast",(Y,W,Z)=>bE(Y,W,Z)],["Clean",(Y,W,Z)=>AS(Y,W,Z)],["Clone",(Y,W,Z)=>w6(Z)],["Convert",(Y,W,Z)=>XS(Y,W,Z)],["Decode",(Y,W,Z)=>DX(Y,W)?QQ(Y,W,Z):Z],["Default",(Y,W,Z)=>YS(Y,W,Z)],["Encode",(Y,W,Z)=>DX(Y,W)?KQ(Y,W,Z):Z]]);function A(Y){F.delete(Y)}$.Delete=A;function J(Y,W){F.set(Y,W)}$.Set=J;function X(Y){return F.get(Y)}$.Get=X})(Ve||(Ve={}));var qk1=["Clone","Clean","Default","Convert","Assert","Decode"];function ck0($,F,A,J){return $.reduce((X,Y)=>{let W=Ve.Get(Y);if(u2(W))throw new Ne(`Unable to find Parse operation '${Y}'`);return W(F,A,X)},J)}function Lk1(...$){let[F,A,J,X]=$.length===4?[$[0],$[1],$[2],$[3]]:$.length===3?D0($[0])?[$[0],$[1],[],$[2]]:[qk1,$[0],$[1],$[2]]:$.length===2?[qk1,$[0],[],$[1]]:(()=>{throw new Ne("Invalid Arguments")})();return ck0(F,A,J,X)}var t6={};l2(t6,{ValueErrorIterator:()=>aD,Patch:()=>Qk1,Parse:()=>Lk1,Mutate:()=>wk1,Hash:()=>BW,Errors:()=>CA,Equal:()=>sD,Encode:()=>Kk1,Edit:()=>Gk1,Diff:()=>Uk1,Default:()=>YS,Decode:()=>Wk1,Create:()=>QF,Convert:()=>XS,Clone:()=>w6,Clean:()=>AS,Check:()=>f0,Cast:()=>bE,Assert:()=>FS});class Ek1{constructor($,F,A,J){this.schema=$,this.references=F,this.checkFunc=A,this.code=J,this.hasTransform=DX($,F)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors($){return CA(this.schema,this.references,$)}Check($){return this.checkFunc($)}Decode($){if(!this.checkFunc($))throw new fE(this.schema,$,this.Errors($).First());return this.hasTransform?QQ(this.schema,this.references,$):$}Encode($){let F=this.hasTransform?KQ(this.schema,this.references,$):$;if(!this.checkFunc(F))throw new vE(this.schema,$,this.Errors($).First());return F}}var zX;(function($){function F(Y){return Y===36}$.DollarSign=F;function A(Y){return Y===95}$.IsUnderscore=A;function J(Y){return Y>=65&&Y<=90||Y>=97&&Y<=122}$.IsAlpha=J;function X(Y){return Y>=48&&Y<=57}$.IsNumeric=X})(zX||(zX={}));var GS;(function($){function F(Y){if(Y.length===0)return!1;return zX.IsNumeric(Y.charCodeAt(0))}function A(Y){if(F(Y))return!1;for(let W=0;W<Y.length;W++){let Z=Y.charCodeAt(W);if(!(zX.IsAlpha(Z)||zX.IsNumeric(Z)||zX.DollarSign(Z)||zX.IsUnderscore(Z)))return!1}return!0}function J(Y){return Y.replace(/'/g,"\\'")}function X(Y,W){return A(W)?`${Y}.${W}`:`${Y}['${J(W)}']`}$.Encode=X})(GS||(GS={}));var Ce;(function($){function F(A){let J=[];for(let X=0;X<A.length;X++){let Y=A.charCodeAt(X);if(zX.IsNumeric(Y)||zX.IsAlpha(Y))J.push(A.charAt(X));else J.push(`_${Y}_`)}return J.join("").replace(/__/g,"_")}$.Encode=F})(Ce||(Ce={}));var Me;(function($){function F(A){return A.replace(/'/g,"\\'")}$.Escape=F})(Me||(Me={}));class Vk1 extends z0{constructor($){super("Unknown type");this.schema=$}}class Pe extends z0{constructor($){super("Preflight validation check failed to guard for the given schema");this.schema=$}}var oD;(function($){function F(W,Z,D){return O2.ExactOptionalPropertyTypes?`('${Z}' in ${W} ? ${D} : true)`:`(${GS.Encode(W,Z)} !== undefined ? ${D} : true)`}$.IsExactOptionalProperty=F;function A(W){return!O2.AllowArrayObject?`(typeof ${W} === 'object' && ${W} !== null && !Array.isArray(${W}))`:`(typeof ${W} === 'object' && ${W} !== null)`}$.IsObjectLike=A;function J(W){return!O2.AllowArrayObject?`(typeof ${W} === 'object' && ${W} !== null && !Array.isArray(${W}) && !(${W} instanceof Date) && !(${W} instanceof Uint8Array))`:`(typeof ${W} === 'object' && ${W} !== null && !(${W} instanceof Date) && !(${W} instanceof Uint8Array))`}$.IsRecordLike=J;function X(W){return O2.AllowNaN?`typeof ${W} === 'number'`:`Number.isFinite(${W})`}$.IsNumberLike=X;function Y(W){return O2.AllowNullVoid?`(${W} === undefined || ${W} === null)`:`${W} === undefined`}$.IsVoidLike=Y})(oD||(oD={}));var EF;(function($){function F(k){return k[a]==="Any"||k[a]==="Unknown"}function*A(k,u,_){yield"true"}function*J(k,u,_){yield"true"}function*X(k,u,_){yield`Array.isArray(${_})`;let[v,m]=[T4("value","any"),T4("acc","number")];if(A0(k.maxItems))yield`${_}.length <= ${k.maxItems}`;if(A0(k.minItems))yield`${_}.length >= ${k.minItems}`;let y=i1(k.items,u,"value");if(yield`${_}.every((${v}) => ${y})`,m2(k.contains)||A0(k.minContains)||A0(k.maxContains)){let l=m2(k.contains)?k.contains:g0(),$1=i1(l,u,"value"),o=A0(k.minContains)?[`(count >= ${k.minContains})`]:[],B1=A0(k.maxContains)?[`(count <= ${k.maxContains})`]:[],x1=`const count = value.reduce((${m}, ${v}) => ${$1} ? acc + 1 : acc, 0)`,d1=["(count > 0)",...o,...B1].join(" && ");yield`((${v}) => { ${x1}; return ${d1}})(${_})`}if(k.uniqueItems===!0)yield`((${v}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${_})`}function*Y(k,u,_){yield`(typeof value === 'object' && Symbol.asyncIterator in ${_})`}function*W(k,u,_){if(yield`(typeof ${_} === 'bigint')`,D8(k.exclusiveMaximum))yield`${_} < BigInt(${k.exclusiveMaximum})`;if(D8(k.exclusiveMinimum))yield`${_} > BigInt(${k.exclusiveMinimum})`;if(D8(k.maximum))yield`${_} <= BigInt(${k.maximum})`;if(D8(k.minimum))yield`${_} >= BigInt(${k.minimum})`;if(D8(k.multipleOf))yield`(${_} % BigInt(${k.multipleOf})) === 0`}function*Z(k,u,_){yield`(typeof ${_} === 'boolean')`}function*D(k,u,_){yield*g1(k.returns,u,`${_}.prototype`)}function*G(k,u,_){if(yield`(${_} instanceof Date) && Number.isFinite(${_}.getTime())`,A0(k.exclusiveMaximumTimestamp))yield`${_}.getTime() < ${k.exclusiveMaximumTimestamp}`;if(A0(k.exclusiveMinimumTimestamp))yield`${_}.getTime() > ${k.exclusiveMinimumTimestamp}`;if(A0(k.maximumTimestamp))yield`${_}.getTime() <= ${k.maximumTimestamp}`;if(A0(k.minimumTimestamp))yield`${_}.getTime() >= ${k.minimumTimestamp}`;if(A0(k.multipleOfTimestamp))yield`(${_}.getTime() % ${k.multipleOfTimestamp}) === 0`}function*z(k,u,_){yield`(typeof ${_} === 'function')`}function*H(k,u,_){let v=globalThis.Object.getOwnPropertyNames(k.$defs).reduce((m,y)=>{return[...m,k.$defs[y]]},[]);yield*g1(r5(k.$ref),[...u,...v],_)}function*U(k,u,_){if(yield`Number.isInteger(${_})`,A0(k.exclusiveMaximum))yield`${_} < ${k.exclusiveMaximum}`;if(A0(k.exclusiveMinimum))yield`${_} > ${k.exclusiveMinimum}`;if(A0(k.maximum))yield`${_} <= ${k.maximum}`;if(A0(k.minimum))yield`${_} >= ${k.minimum}`;if(A0(k.multipleOf))yield`(${_} % ${k.multipleOf}) === 0`}function*Q(k,u,_){let v=k.allOf.map((m)=>i1(m,u,_)).join(" && ");if(k.unevaluatedProperties===!1){let m=l0(`${new RegExp(YX(k))};`),y=`Object.getOwnPropertyNames(${_}).every(key => ${m}.test(key))`;yield`(${v} && ${y})`}else if(m2(k.unevaluatedProperties)){let m=l0(`${new RegExp(YX(k))};`),y=`Object.getOwnPropertyNames(${_}).every(key => ${m}.test(key) || ${i1(k.unevaluatedProperties,u,`${_}[key]`)})`;yield`(${v} && ${y})`}else yield`(${v})`}function*B(k,u,_){yield`(typeof value === 'object' && Symbol.iterator in ${_})`}function*q(k,u,_){if(typeof k.const==="number"||typeof k.const==="boolean")yield`(${_} === ${k.const})`;else yield`(${_} === '${Me.Escape(k.const)}')`}function*L(k,u,_){yield"false"}function*E(k,u,_){yield`(!${i1(k.not,u,_)})`}function*V(k,u,_){yield`(${_} === null)`}function*R(k,u,_){if(yield oD.IsNumberLike(_),A0(k.exclusiveMaximum))yield`${_} < ${k.exclusiveMaximum}`;if(A0(k.exclusiveMinimum))yield`${_} > ${k.exclusiveMinimum}`;if(A0(k.maximum))yield`${_} <= ${k.maximum}`;if(A0(k.minimum))yield`${_} >= ${k.minimum}`;if(A0(k.multipleOf))yield`(${_} % ${k.multipleOf}) === 0`}function*N(k,u,_){if(yield oD.IsObjectLike(_),A0(k.minProperties))yield`Object.getOwnPropertyNames(${_}).length >= ${k.minProperties}`;if(A0(k.maxProperties))yield`Object.getOwnPropertyNames(${_}).length <= ${k.maxProperties}`;let v=Object.getOwnPropertyNames(k.properties);for(let m of v){let y=GS.Encode(_,m),l=k.properties[m];if(k.required&&k.required.includes(m)){if(yield*g1(l,u,y),WX(l)||F(l))yield`('${m}' in ${_})`}else{let $1=i1(l,u,y);yield oD.IsExactOptionalProperty(_,m,$1)}}if(k.additionalProperties===!1)if(k.required&&k.required.length===v.length)yield`Object.getOwnPropertyNames(${_}).length === ${v.length}`;else{let m=`[${v.map((y)=>`'${y}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${_}).every(key => ${m}.includes(key))`}if(typeof k.additionalProperties==="object"){let m=i1(k.additionalProperties,u,`${_}[key]`),y=`[${v.map((l)=>`'${l}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${_}).every(key => ${y}.includes(key) || ${m}))`}}function*S(k,u,_){yield`${_} instanceof Promise`}function*C(k,u,_){if(yield oD.IsRecordLike(_),A0(k.minProperties))yield`Object.getOwnPropertyNames(${_}).length >= ${k.minProperties}`;if(A0(k.maxProperties))yield`Object.getOwnPropertyNames(${_}).length <= ${k.maxProperties}`;let[v,m]=Object.entries(k.patternProperties)[0],y=l0(`${new RegExp(v)}`),l=i1(m,u,"value"),$1=m2(k.additionalProperties)?i1(k.additionalProperties,u,_):k.additionalProperties===!1?"false":"true",o=`(${y}.test(key) ? ${l} : ${$1})`;yield`(Object.entries(${_}).every(([key, value]) => ${o}))`}function*M(k,u,_){let v=D6(k,u);if(j1.functions.has(k.$ref))return yield`${K1(k.$ref)}(${_})`;yield*g1(v,u,_)}function*I(k,u,_){let v=l0(`${new RegExp(k.source,k.flags)};`);if(yield`(typeof ${_} === 'string')`,A0(k.maxLength))yield`${_}.length <= ${k.maxLength}`;if(A0(k.minLength))yield`${_}.length >= ${k.minLength}`;yield`${v}.test(${_})`}function*T(k,u,_){if(yield`(typeof ${_} === 'string')`,A0(k.maxLength))yield`${_}.length <= ${k.maxLength}`;if(A0(k.minLength))yield`${_}.length >= ${k.minLength}`;if(k.pattern!==void 0)yield`${l0(`${new RegExp(k.pattern)};`)}.test(${_})`;if(k.format!==void 0)yield`format('${k.format}', ${_})`}function*j(k,u,_){yield`(typeof ${_} === 'symbol')`}function*b(k,u,_){yield`(typeof ${_} === 'string')`,yield`${l0(`${new RegExp(k.pattern)};`)}.test(${_})`}function*g(k,u,_){yield`${K1(k.$ref)}(${_})`}function*f(k,u,_){if(yield`Array.isArray(${_})`,k.items===void 0)return yield`${_}.length === 0`;yield`(${_}.length === ${k.maxItems})`;for(let v=0;v<k.items.length;v++)yield`${i1(k.items[v],u,`${_}[${v}]`)}`}function*d(k,u,_){yield`${_} === undefined`}function*s(k,u,_){yield`(${k.anyOf.map((m)=>i1(m,u,_)).join(" || ")})`}function*n(k,u,_){if(yield`${_} instanceof Uint8Array`,A0(k.maxByteLength))yield`(${_}.length <= ${k.maxByteLength})`;if(A0(k.minByteLength))yield`(${_}.length >= ${k.minByteLength})`}function*L1(k,u,_){yield"true"}function*X1(k,u,_){yield oD.IsVoidLike(_)}function*M1(k,u,_){let v=j1.instances.size;j1.instances.set(v,k),yield`kind('${k[a]}', ${v}, ${_})`}function*g1(k,u,_,v=!0){let m=W6(k.$id)?[...u,k]:u,y=k;if(v&&W6(k.$id)){let l=K1(k.$id);if(j1.functions.has(l))return yield`${l}(${_})`;else{j1.functions.set(l,"<deferred>");let $1=I4(l,k,u,"value",!1);return j1.functions.set(l,$1),yield`${l}(${_})`}}switch(y[a]){case"Any":return yield*A(y,m,_);case"Argument":return yield*J(y,m,_);case"Array":return yield*X(y,m,_);case"AsyncIterator":return yield*Y(y,m,_);case"BigInt":return yield*W(y,m,_);case"Boolean":return yield*Z(y,m,_);case"Constructor":return yield*D(y,m,_);case"Date":return yield*G(y,m,_);case"Function":return yield*z(y,m,_);case"Import":return yield*H(y,m,_);case"Integer":return yield*U(y,m,_);case"Intersect":return yield*Q(y,m,_);case"Iterator":return yield*B(y,m,_);case"Literal":return yield*q(y,m,_);case"Never":return yield*L(y,m,_);case"Not":return yield*E(y,m,_);case"Null":return yield*V(y,m,_);case"Number":return yield*R(y,m,_);case"Object":return yield*N(y,m,_);case"Promise":return yield*S(y,m,_);case"Record":return yield*C(y,m,_);case"Ref":return yield*M(y,m,_);case"RegExp":return yield*I(y,m,_);case"String":return yield*T(y,m,_);case"Symbol":return yield*j(y,m,_);case"TemplateLiteral":return yield*b(y,m,_);case"This":return yield*g(y,m,_);case"Tuple":return yield*f(y,m,_);case"Undefined":return yield*d(y,m,_);case"Union":return yield*s(y,m,_);case"Uint8Array":return yield*n(y,m,_);case"Unknown":return yield*L1(y,m,_);case"Void":return yield*X1(y,m,_);default:if(!U9.Has(y[a]))throw new Vk1(k);return yield*M1(y,m,_)}}let j1={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function i1(k,u,_,v=!0){return`(${[...g1(k,u,_,v)].join(" && ")})`}function K1(k){return`check_${Ce.Encode(k)}`}function l0(k){let u=`local_${j1.variables.size}`;return j1.variables.set(u,`const ${u} = ${k}`),u}function I4(k,u,_,v,m=!0){let[y,l]=[`
`,(x1)=>"".padStart(x1," ")],$1=T4("value","any"),o=b6("boolean"),B1=[...g1(u,_,v,m)].map((x1)=>`${l(4)}${x1}`).join(` &&${y}`);return`function ${k}(${$1})${o} {${y}${l(2)}return (${y}${B1}${y}${l(2)})
}`}function T4(k,u){let _=j1.language==="typescript"?`: ${u}`:"";return`${k}${_}`}function b6(k){return j1.language==="typescript"?`: ${k}`:""}function c2(k,u,_){let v=I4("check",k,u,"value"),m=T4("value","any"),y=b6("boolean"),l=[...j1.functions.values()],$1=[...j1.variables.values()],o=W6(k.$id)?`return function check(${m})${y} {
  return ${K1(k.$id)}(value)
}`:`return ${v}`;return[...$1,...l,o].join(`
`)}function h(...k){let u={language:"javascript"},[_,v,m]=k.length===2&&D0(k[1])?[k[0],k[1],u]:k.length===2&&!D0(k[1])?[k[0],[],k[1]]:k.length===3?[k[0],k[1],k[2]]:k.length===1?[k[0],[],u]:[null,[],u];if(j1.language=m.language,j1.variables.clear(),j1.functions.clear(),j1.instances.clear(),!m2(_))throw new Pe(_);for(let y of v)if(!m2(y))throw new Pe(y);return c2(_,v,m)}$.Code=h;function c(k,u=[]){let _=h(k,u,{language:"javascript"}),v=globalThis.Function("kind","format","hash",_),m=new Map(j1.instances);function y(B1,x1,d1){if(!U9.Has(B1)||!m.has(x1))return!1;let N0=U9.Get(B1),G6=m.get(x1);return N0(G6,d1)}function l(B1,x1){if(!v6.Has(B1))return!1;return v6.Get(B1)(x1)}function $1(B1){return BW(B1)}let o=v(y,l,$1);return new Ek1(k,u,o,_)}$.Compile=c})(EF||(EF={}));var Qb0=Object.create,{getPrototypeOf:Kb0,defineProperty:zb1,getOwnPropertyNames:Bb0}=Object,wb0=Object.prototype.hasOwnProperty,zV=($,F,A)=>{A=$!=null?Qb0(Kb0($)):{};let J=F||!$||!$.__esModule?zb1(A,"default",{value:$,enumerable:!0}):A;for(let X of Bb0($))if(!wb0.call(J,X))zb1(J,X,{get:()=>$[X],enumerable:!0});return J},db1=($,F)=>()=>(F||$((F={exports:{}}).exports,F),F.exports);var xS=db1(($,F)=>{var A=12,J=0,X=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function Y(D){var G=D.indexOf("%");if(G===-1)return D;var z=D.length,H="",U=0,Q=0,B=G,q=A;while(G>-1&&G<z){var L=Z(D[G+1],4),E=Z(D[G+2],0),V=L|E,R=X[V];if(q=X[256+q+R],Q=Q<<6|V&X[364+R],q===A)H+=D.slice(U,B),H+=Q<=65535?String.fromCharCode(Q):String.fromCharCode(55232+(Q>>10),56320+(Q&1023)),Q=0,U=G+3,G=B=D.indexOf("%",U);else if(q===J)return null;else{if(G+=3,G<z&&D.charCodeAt(G)===37)continue;return null}}return H+D.slice(U)}var W={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function Z(D,G){var z=W[D];return z===void 0?255:z<<G}F.exports=Y}),qb0=db1(($)=>{Object.defineProperty($,"__esModule",{value:!0}),$.parseCookie=D,$.parse=D,$.stringifyCookie=G,$.stringifySetCookie=z,$.serialize=z,$.parseSetCookie=H,$.stringifySetCookie=z,$.serialize=z;var F=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,A=/^[\u0021-\u003A\u003C-\u007E]*$/,J=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,X=/^[\u0020-\u003A\u003D-\u007E]*$/,Y=/^-?\d+$/,W=Object.prototype.toString,Z=(()=>{let E=function(){};return E.prototype=Object.create(null),E})();function D(E,V){let R=new Z,N=E.length;if(N<2)return R;let S=V?.decode||q,C=0;do{let M=Q(E,C,N);if(M===-1)break;let I=U(E,C,N);if(M>I){C=E.lastIndexOf(";",M-1)+1;continue}let T=B(E,C,M);if(R[T]===void 0)R[T]=S(B(E,M+1,I));C=I+1}while(C<N);return R}function G(E,V){let R=V?.encode||encodeURIComponent,N=[];for(let S of Object.keys(E)){let C=E[S];if(C===void 0)continue;if(!F.test(S))throw TypeError(`cookie name is invalid: ${S}`);let M=R(C);if(!A.test(M))throw TypeError(`cookie val is invalid: ${C}`);N.push(`${S}=${M}`)}return N.join("; ")}function z(E,V,R){let N=typeof E==="object"?E:{...R,name:E,value:String(V)},S=(typeof V==="object"?V:R)?.encode||encodeURIComponent;if(!F.test(N.name))throw TypeError(`argument name is invalid: ${N.name}`);let C=N.value?S(N.value):"";if(!A.test(C))throw TypeError(`argument val is invalid: ${N.value}`);let M=N.name+"="+C;if(N.maxAge!==void 0){if(!Number.isInteger(N.maxAge))throw TypeError(`option maxAge is invalid: ${N.maxAge}`);M+="; Max-Age="+N.maxAge}if(N.domain){if(!J.test(N.domain))throw TypeError(`option domain is invalid: ${N.domain}`);M+="; Domain="+N.domain}if(N.path){if(!X.test(N.path))throw TypeError(`option path is invalid: ${N.path}`);M+="; Path="+N.path}if(N.expires){if(!L(N.expires)||!Number.isFinite(N.expires.valueOf()))throw TypeError(`option expires is invalid: ${N.expires}`);M+="; Expires="+N.expires.toUTCString()}if(N.httpOnly)M+="; HttpOnly";if(N.secure)M+="; Secure";if(N.partitioned)M+="; Partitioned";if(N.priority)switch(typeof N.priority==="string"?N.priority.toLowerCase():void 0){case"low":M+="; Priority=Low";break;case"medium":M+="; Priority=Medium";break;case"high":M+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${N.priority}`)}if(N.sameSite)switch(typeof N.sameSite==="string"?N.sameSite.toLowerCase():N.sameSite){case!0:case"strict":M+="; SameSite=Strict";break;case"lax":M+="; SameSite=Lax";break;case"none":M+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${N.sameSite}`)}return M}function H(E,V){let R=V?.decode||q,N=E.length,S=U(E,0,N),C=Q(E,0,S),M=C===-1?{name:"",value:R(B(E,0,S))}:{name:B(E,0,C),value:R(B(E,C+1,S))},I=S+1;while(I<N){let T=U(E,I,N),j=Q(E,I,T),b=j===-1?B(E,I,T):B(E,I,j),g=j===-1?void 0:B(E,j+1,T);switch(b.toLowerCase()){case"httponly":M.httpOnly=!0;break;case"secure":M.secure=!0;break;case"partitioned":M.partitioned=!0;break;case"domain":M.domain=g;break;case"path":M.path=g;break;case"max-age":if(g&&Y.test(g))M.maxAge=Number(g);break;case"expires":if(!g)break;let f=new Date(g);if(Number.isFinite(f.valueOf()))M.expires=f;break;case"priority":if(!g)break;let d=g.toLowerCase();if(d==="low"||d==="medium"||d==="high")M.priority=d;break;case"samesite":if(!g)break;let s=g.toLowerCase();if(s==="lax"||s==="strict"||s==="none")M.sameSite=s;break}I=T+1}return M}function U(E,V,R){let N=E.indexOf(";",V);return N===-1?R:N}function Q(E,V,R){let N=E.indexOf("=",V);return N<R?N:-1}function B(E,V,R){let N=V,S=R;do{let C=E.charCodeAt(N);if(C!==32&&C!==9)break}while(++N<S);while(S>N){let C=E.charCodeAt(S-1);if(C!==32&&C!==9)break;S--}return E.slice(N,S)}function q(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch(V){return E}}function L(E){return W.call(E)==="[object Date]"}}),qQ=($,F)=>{let A=F?.length?{}:null;if(A)for(let J of F)A[J.part.charCodeAt(0)]=J;return{part:$,store:null,inert:A,params:null,wildcardStore:null}},Hb1=($,F)=>({...$,part:F}),Ub1=($)=>({name:$,store:null,inert:null});class MQ{config;root={};history=[];deferred=[];constructor($={}){if(this.config=$,$.lazy)this.find=this.lazyFind;if($.onParam&&!Array.isArray($.onParam))this.config.onParam=[this.config.onParam]}static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g,optionalParams:/(\/:\w+\?)/g};lazyFind=($,F)=>{if(!this.config.lazy)return this.find;return this.build(),this.find($,F)};build(){if(!this.config.lazy)return;for(let[$,F,A]of this.deferred)this.add($,F,A,{lazy:!1,ignoreHistory:!0});this.deferred=[],this.find=($,F)=>{let A=this.root[$];if(!A)return null;return CS(F,F.length,A,0,this.config.onParam)}}add($,F,A,{ignoreError:J=!1,ignoreHistory:X=!1,lazy:Y=this.config.lazy}={}){if(Y)return this.find=this.lazyFind,this.deferred.push([$,F,A]),A;if(typeof F!=="string")throw TypeError("Route path must be a string");if(F==="")F="/";else if(F[0]!=="/")F=`/${F}`;let W=F[F.length-1]==="*",Z=F.match(MQ.regex.optionalParams);if(Z){let U=F.replaceAll("?","");this.add($,U,A,{ignoreError:J,ignoreHistory:X,lazy:Y});for(let Q=0;Q<Z.length;Q++){let B=F.replace(Z[Q],"");this.add($,B,A,{ignoreError:!0,ignoreHistory:X,lazy:Y})}return A}if(Z)F=F.replaceAll("?","");if(this.history.find(([U,Q,B])=>U===$&&Q===F))return A;if(W||Z&&F.charCodeAt(F.length-1)===63)F=F.slice(0,-1);if(!X)this.history.push([$,F,A]);let D=F.split(MQ.regex.static),G=F.match(MQ.regex.params)||[];if(D[D.length-1]==="")D.pop();let z;if(!this.root[$])z=this.root[$]=qQ("/");else z=this.root[$];let H=0;for(let U=0;U<D.length;++U){let Q=D[U];if(U>0){let B=G[H++].slice(1);if(z.params===null)z.params=Ub1(B);else if(z.params.name!==B)if(J)return A;else throw Error(`Cannot create route "${F}" with parameter "${B}" because a route already exists with a different parameter name ("${z.params.name}") in the same location`);let q=z.params;if(q.inert===null){z=q.inert=qQ(Q);continue}z=q.inert}for(let B=0;;){if(B===Q.length){if(B<z.part.length){let q=Hb1(z,z.part.slice(B));Object.assign(z,qQ(Q,[q]))}break}if(B===z.part.length){if(z.inert===null)z.inert={};let q=z.inert[Q.charCodeAt(B)];if(q){z=q,Q=Q.slice(B),B=0;continue}let L=qQ(Q.slice(B));z.inert[Q.charCodeAt(B)]=L,z=L;break}if(Q[B]!==z.part[B]){let q=Hb1(z,z.part.slice(B)),L=qQ(Q.slice(B));Object.assign(z,qQ(z.part.slice(0,B),[q,L])),z=L;break}++B}}if(H<G.length){let U=G[H].slice(1);if(z.params===null)z.params=Ub1(U);else if(z.params.name!==U)if(J)return A;else throw Error(`Cannot create route "${F}" with parameter "${U}" because a route already exists with a different parameter name ("${z.params.name}") in the same location`);if(z.params.store===null)z.params.store=A;return z.params.store}if(W){if(z.wildcardStore===null)z.wildcardStore=A;return z.wildcardStore}if(z.store===null)z.store=A;return z.store}find($,F){let A=this.root[$];if(!A)return null;return CS(F,F.length,A,0,this.config.onParam)}}var CS=($,F,A,J,X)=>{let Y=A.part,W=Y.length,Z=J+W;if(W>1){if(Z>F)return null;if(W<15){for(let D=1,G=J+1;D<W;++D,++G)if(Y.charCodeAt(D)!==$.charCodeAt(G))return null}else if($.slice(J,Z)!==Y)return null}if(Z===F){if(A.store!==null)return{store:A.store,params:{}};if(A.wildcardStore!==null)return{store:A.wildcardStore,params:{"*":""}};return null}if(A.inert!==null){let D=A.inert[$.charCodeAt(Z)];if(D!==void 0){let G=CS($,F,D,Z,X);if(G!==null)return G}}if(A.params!==null){let{store:D,name:G,inert:z}=A.params,H=$.indexOf("/",Z);if(H!==Z){if(H===-1||H>=F){if(D!==null){let U={};if(U[G]=$.substring(Z,F),X)for(let Q=0;Q<X.length;Q++){let B=X[Q](U[G],G);if(B!==void 0)U[G]=B}return{store:D,params:U}}}else if(z!==null){let U=CS($,F,z,H,X);if(U!==null){if(U.params[G]=$.substring(Z,H),X)for(let Q=0;Q<X.length;Q++){let B=X[Q](U.params[G],G);if(B!==void 0)U.params[G]=B}return U}}}}if(A.wildcardStore!==null)return{store:A.wildcardStore,params:{"*":$.substring(Z,F)}};return null},Qb1=zV(xS(),1),RQ=typeof Bun<"u",cb1={aac:"audio/aac",abw:"application/x-abiword",ai:"application/postscript",arc:"application/octet-stream",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",dll:"application/octet-stream",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/javascript",json:"application/json",mid:"audio/midi",midi:"audio/midi",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpa:"video/mpeg",mpe:"video/mpeg",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",otf:"font/otf",png:"image/png",pdf:"application/pdf",ppt:"application/vnd.ms-powerpoint",rar:"application/x-rar-compressed",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"application/typescript",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/x-wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.ms-excel",xlsx_OLD:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3gp_DOES_NOT_CONTAIN_VIDEO":"audio/3gpp","3gp2":"video/3gpp2","3gp2_DOES_NOT_CONTAIN_VIDEO":"audio/3gpp2","7z":"application/x-7z-compressed"},Lb0=($)=>{let F=$.lastIndexOf(".");if(F===-1)return"";return $.slice(F+1)};var ue,he;class MS{path;value;stats;constructor($){if(this.path=$,RQ)this.value=Bun.file($);else{if(!ue||!he){if(typeof window<"u"){console.warn("Browser environment does not support file");return}let F=(J)=>console.warn(Error(`[elysia] \`file\` require \`fs${J?"."+J:""}\` ${J?.includes(".")?"module ":""}which is not available in this environment`));if(typeof process>"u"||typeof process.getBuiltinModule!=="function"){F();return}let A=process.getBuiltinModule("fs");if(!A){F();return}if(typeof A.createReadStream!=="function"){F();return}if(typeof A.promises?.stat!=="function"){F();return}ue=A.createReadStream,he=A.promises.stat}this.value=(()=>ue($))(),this.stats=he($)}}get type(){return cb1[Lb0(this.path)]||"application/octet-stream"}get length(){if(RQ)return this.value.size;return this.stats?.then(($)=>$.size)??0}}var oe="toJSON"in new Headers,Kb1=($,F)=>{let A=$.indexOf("/",11),J=$.indexOf("?",A);if(J===-1)return`${$.slice(0,A)}${F.charCodeAt(0)===47?"":"/"}${F}`;return`${$.slice(0,A)}${F.charCodeAt(0)===47?"":"/"}${F}${$.slice(J)}`},Eb0=($)=>typeof $==="function"&&/^\s*class\s+/.test($.toString())||$.toString&&$.toString().startsWith("[object ")&&$.toString()!=="[object Object]"||d2(Object.getPrototypeOf($)),me=($)=>$&&typeof $==="object"&&!Array.isArray($),v9=($,F,A)=>{let J=A?.skipKeys,X=A?.override??!0,Y=A?.mergeArray??!1,W=A?.seen??new WeakSet;if(!me($)||!me(F))return $;if(W.has(F))return $;W.add(F);for(let[Z,D]of Object.entries(F)){if(J?.includes(Z)||["__proto__","constructor","prototype"].includes(Z))continue;if(Y&&Array.isArray(D)){$[Z]=Array.isArray($[Z])?[...$[Z],...D]:$[Z]=D;continue}if(!me(D)||!(Z in $)||Eb0(D)){if((X||!(Z in $))&&!Object.isFrozen($))try{$[Z]=D}catch{}continue}if(!Object.isFrozen($[Z]))try{$[Z]=v9($[Z],D,{skipKeys:J,override:X,mergeArray:Y,seen:W})}catch{}}return W.delete(F),$},ee=($,F)=>{let A=v9(Object.assign({},$),F,{skipKeys:["properties"],mergeArray:!1});if(A.properties)delete A.properties;return A},K4=($,F)=>{if(!F)return $;let A=[],J=[];if($){if(!Array.isArray($))$=[$];for(let X of $)if(A.push(X),X.checksum)J.push(X.checksum)}if(F){if(!Array.isArray(F))F=[F];for(let X of F)if(!J.includes(X.checksum))A.push(X)}return A},Vb0=["start","request","parse","transform","resolve","beforeHandle","afterHandle","mapResponse","afterResponse","trace","error","stop","body","headers","params","query","response","type","detail"],C12=Vb0.reduce(($,F)=>($[F]=!0,$),{}),ES=($)=>typeof $==="object"&&Object.keys($).every((F)=>!isNaN(+F)),lb1=($,F)=>{if(ES($)&&ES(F))return Object.assign({},$,F);else if($&&!ES($)&&ES(F))return Object.assign({200:$},F);return F??$},iE=($,F)=>{if(!$&&!F)return{body:void 0,headers:void 0,params:void 0,query:void 0,cookie:void 0,response:void 0};return{body:F?.body??$?.body,headers:F?.headers??$?.headers,params:F?.params??$?.params,query:F?.query??$?.query,cookie:F?.cookie??$?.cookie,response:lb1($?.response,F?.response)}},XG=($,F)=>{if(!F)return $??{};if(!$)return F??{};if(!Object.values(F).find((J)=>J!==void 0&&J!==null))return{...$};let A={...$,...F,body:F.body??$.body,headers:F.headers??$.headers,params:F.params??$.params,query:F.query??$.query,cookie:F.cookie??$.cookie,response:lb1($.response,F.response),type:$.type||F.type,detail:v9(F.detail??{},$.detail??{}),parse:K4($.parse,F.parse),transform:K4($.transform,F.transform),beforeHandle:K4(K4(K9($.resolve,"resolve"),$.beforeHandle),K4(K9(F.resolve,"resolve"),F.beforeHandle)),afterHandle:K4($.afterHandle,F.afterHandle),mapResponse:K4($.mapResponse,F.mapResponse),afterResponse:K4($.afterResponse,F.afterResponse),trace:K4($.trace,F.trace),error:K4($.error,F.error),standaloneSchema:$.standaloneSchema||F.standaloneSchema?$.standaloneSchema&&!F.standaloneSchema?$.standaloneSchema:F.standaloneSchema&&!$.standaloneSchema?F.standaloneSchema:[...$.standaloneSchema??[],...F.standaloneSchema??[]]:void 0};if(A.resolve)delete A.resolve;return A},Nb0=($)=>{if($.parse&&!Array.isArray($.parse))$.parse=[$.parse];if($.transform&&!Array.isArray($.transform))$.transform=[$.transform];if($.afterHandle&&!Array.isArray($.afterHandle))$.afterHandle=[$.afterHandle];if($.mapResponse&&!Array.isArray($.mapResponse))$.mapResponse=[$.mapResponse];if($.afterResponse&&!Array.isArray($.afterResponse))$.afterResponse=[$.afterResponse];if($.trace&&!Array.isArray($.trace))$.trace=[$.trace];if($.error&&!Array.isArray($.error))$.error=[$.error];let F=[];if($.resolve)F=K9(Array.isArray($.resolve)?$.resolve:[$.resolve],"resolve"),delete $.resolve;if($.beforeHandle)if(F.length)F=F.concat(Array.isArray($.beforeHandle)?$.beforeHandle:[$.beforeHandle]);else F=Array.isArray($.beforeHandle)?$.beforeHandle:[$.beforeHandle];if(F.length)$.beforeHandle=F;return $},Cb0=typeof Bun<"u",M12=Cb0&&typeof Bun.hash==="function",pb1=typeof setImmediate==="function",aE=($)=>{let F=9;for(let A=0;A<$.length;)F=Math.imul(F^$.charCodeAt(A++),387420489);return F=F^F>>>9},VF=($,F)=>{if(!F)return;if(!Array.isArray(F)){let J=F;if($&&!J.checksum)J.checksum=$;if(J.scope==="scoped")J.scope="local";return J}let A=[...F];for(let J of A){if($&&!J.checksum)J.checksum=$;if(J.scope==="scoped")J.scope="local"}return A},Bb1=($,F,A)=>{return{start:K4($.start,VF(A,F?.start)),request:K4($.request,VF(A,F?.request)),parse:K4($.parse,VF(A,F?.parse)),transform:K4($.transform,VF(A,F?.transform)),beforeHandle:K4(K4(K9($.resolve,"resolve"),$.beforeHandle),VF(A,K4(K9(F?.resolve,"resolve"),F?.beforeHandle))),afterHandle:K4($.afterHandle,VF(A,F?.afterHandle)),mapResponse:K4($.mapResponse,VF(A,F?.mapResponse)),afterResponse:K4($.afterResponse,VF(A,F?.afterResponse)),trace:K4($.trace,VF(A,F?.trace)),error:K4($.error,VF(A,F?.error)),stop:K4($.stop,VF(A,F?.stop))}},Mb0=($,F,{skipIfHasType:A=!1})=>{if(!$)return $;if(!Array.isArray($)){if(A)$.scope??=F;else $.scope=F;return $}for(let J of $)if(A)J.scope??=F;else J.scope=F;return $},qW=($)=>{if(!$)return $;if(!Array.isArray($))switch($.scope){case"global":case"scoped":return{...$};default:return{fn:$}}let F=[];for(let A of $)switch(A.scope){case"global":case"scoped":F.push({...A});break}return F},wb1=($)=>{return{...$,type:$?.type,detail:$?.detail,parse:qW($?.parse),transform:qW($?.transform),beforeHandle:qW($?.beforeHandle),afterHandle:qW($?.afterHandle),mapResponse:qW($?.mapResponse),afterResponse:qW($?.afterResponse),error:qW($?.error),trace:qW($?.trace)}},YV={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Enhance Your Calm":420,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},qb1=Object.fromEntries(Object.entries(YV).map(([$,F])=>[F,$]));function Pb0($){let F=$;while(F.endsWith("="))F=F.slice(0,-1);return F}var Lb1=new TextEncoder,PS=async($,F)=>{if(typeof $==="object")$=JSON.stringify($);else if(typeof $!=="string")$=$+"";if(F===null)throw TypeError("Secret key must be provided.");let A=await crypto.subtle.importKey("raw",Lb1.encode(F),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),J=await crypto.subtle.sign("HMAC",A,Lb1.encode($));return $+"."+Pb0(Buffer.from(J).toString("base64"))},Rb0=typeof crypto?.timingSafeEqual==="function"?($,F)=>{let A=Buffer.from($,"utf8"),J=Buffer.from(F,"utf8");if(A.length!==J.length)return!1;return crypto.timingSafeEqual(A,J)}:($,F)=>$===F,Eb1=async($,F)=>{if(typeof $!=="string")throw TypeError("Signed cookie string must be provided.");if(F===null)throw TypeError("Secret key must be provided.");let A=$.lastIndexOf(".");if(A<=0)return!1;let J=$.slice(0,A),X=await PS(J,F);return Rb0(X,$)?J:!1},Ib0=($,F,A)=>{if(!$.standaloneValidator?.length||!Array.isArray($.standaloneValidator)){$.standaloneValidator=[{[F]:A}];return}let J=$.standaloneValidator[$.standaloneValidator.length-1];if(F in J)$.standaloneValidator.push({[F]:A});else J[F]=A},Tb0=($)=>{if(typeof $==="number")return $;if($.length<16){if($.trim().length===0)return null;let F=Number($);if(Number.isNaN(F))return null;return F}if($.length===16){if($.trim().length===0)return null;let F=Number($);if(Number.isNaN(F)||F.toString()!==$)return null;return F}return null},ib1=($)=>Tb0($)!==null;class nb1{onError;onFinally;root=null;promises=[];constructor($=console.error,F=()=>{}){this.onError=$,this.onFinally=F}get size(){return this.promises.length}add($){if(this.promises.push($),this.root||=this.drain(),this.promises.length===1)this.then(this.onFinally);return $}async drain(){while(this.promises.length>0){try{await this.promises[0]}catch($){this.onError($)}this.promises.shift()}this.root=null}then($,F){return(this.root??Promise.resolve()).then($,F)}}var K9=($,F)=>{if(!$)return $;if(!Array.isArray($)){if(typeof $==="function"||typeof $==="string")return F?{fn:$,subType:F}:{fn:$};else if("fn"in $)return $}let A=[];for(let J of $)if(typeof J==="function"||typeof J==="string")A.push(F?{fn:J,subType:F}:{fn:J});else if("fn"in J)A.push(J);return A},Vb1=($)=>{if($.start)$.start=K9($.start);if($.request)$.request=K9($.request);if($.parse)$.parse=K9($.parse);if($.transform)$.transform=K9($.transform);if($.beforeHandle)$.beforeHandle=K9($.beforeHandle);if($.afterHandle)$.afterHandle=K9($.afterHandle);if($.mapResponse)$.mapResponse=K9($.mapResponse);if($.afterResponse)$.afterResponse=K9($.afterResponse);if($.trace)$.trace=K9($.trace);if($.error)$.error=K9($.error);if($.stop)$.stop=K9($.stop);return $},Nb1=($)=>{let F=Object.create(null);if($.start?.map)F.start=$.start.map((A)=>A.fn);if($.request?.map)F.request=$.request.map((A)=>A.fn);if($.parse?.map)F.parse=$.parse.map((A)=>A.fn);if($.transform?.map)F.transform=$.transform.map((A)=>A.fn);if($.beforeHandle?.map)F.beforeHandle=$.beforeHandle.map((A)=>A.fn);if($.afterHandle?.map)F.afterHandle=$.afterHandle.map((A)=>A.fn);if($.mapResponse?.map)F.mapResponse=$.mapResponse.map((A)=>A.fn);if($.afterResponse?.map)F.afterResponse=$.afterResponse.map((A)=>A.fn);if($.error?.map)F.error=$.error.map((A)=>A.fn);if($.stop?.map)F.stop=$.stop.map((A)=>A.fn);if($.trace?.map)F.trace=$.trace.map((A)=>A.fn);else F.trace=[];return F},Cb1=($)=>({body:$.body,cookie:$.cookie,headers:$.headers,query:$.query,set:$.set,server:$.server,path:$.path,route:$.route,url:$.url}),gS=($,F=302)=>Response.redirect($,F),YG=Symbol("ElysiaFormData"),HV=Symbol("ElysiaRequestId"),jb0=($)=>{let F=new FormData;if(F[YG]={},$)for(let[A,J]of Object.entries($)){if(Array.isArray(J)){F[YG][A]=[];for(let X of J){if(J instanceof File)F.append(A,J,J.name);else if(J instanceof MS)F.append(A,J.value,J.value?.name);else F.append(A,J);F[YG][A].push(J)}continue}if(J instanceof File)F.append(A,J,J.name);else if(J instanceof MS)F.append(A,J.value,J.value?.name);else F.append(A,J);F[YG][A]=J}return F},WV=typeof crypto>"u"?()=>{let $="",F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",A=F.length;for(let J=0;J<16;J++)$+=F.charAt(Math.floor(Math.random()*A));return $}:()=>{let $=crypto.randomUUID();return $.slice(0,8)+$.slice(24,32)},Ob0=($)=>{if(!$.length)return[];let F=[];for(let A=0;A<$.length;A++){let J=$[A];if(J.checksum){if(F.includes(J.checksum))$.splice(A,1),A--;F.push(J.checksum)}}return $},LW=($,F="scoped")=>{if(!$)return;if(F==="scoped"){for(let A of $)if("scope"in A&&A.scope==="local")A.scope="scoped";return}for(let A of $)if("scope"in A)A.scope="global"},tE=($)=>{if($.charCodeAt($.length-1)===47)return $.slice(0,$.length-1);return $+"/"},d2=($)=>{if(!$)return!1;for(let F in $)return!0;return!1},sE=($,{dynamic:F=!1}={})=>{let A=encodeURIComponent($).replace(/%2F/g,"/");if(F)A=A.replace(/%3A/g,":").replace(/%3F/g,"?");return A},rb1=(()=>{if(typeof Bun>"u")return!0;if(Bun.semver?.satisfies?.(Bun.version,">=1.2.14"))return!0;return!1})();async function Sb0($){if($.bodyUsed||!$.body)return 0;let F=0,A=$.body.getReader();while(!0){let{done:J,value:X}=await A.read();if(J)break;F+=X.byteLength}return F}var _b0={headers:!0,cookie:!0,query:!0,params:!0,body:!0,response:!0},Mb1=typeof Bun<"u"?Bun.env:typeof process<"u"?process?.env:void 0,RS=Symbol("ElysiaErrorCode"),EW=(Mb1?.NODE_ENV??Mb1?.ENV)==="production",kb0={101:void 0,204:void 0,205:void 0,304:void 0,307:void 0,308:void 0};class y9{code;response;constructor($,F){let A=F??($ in qb1?qb1[$]:$);if(this.code=YV[$]??$,$ in kb0)this.response=void 0;else this.response=A}}var IQ=($,F)=>new y9($,F);class D11 extends Error{code="NOT_FOUND";status=404;constructor($){super($??"NOT_FOUND")}}class ab1 extends Error{code="PARSE";status=400;constructor($){super("Bad Request",{cause:$})}}class oE extends Error{key;code="INVALID_COOKIE_SIGNATURE";status=400;constructor($,F){super(F??`"${$}" has invalid cookie signature`);this.key=$}}var z8=($)=>{if(!$)return $;let{message:F,path:A,value:J,type:X}=$;if(Array.isArray(A))A=A[0];let Y=typeof A==="string"?A.slice(1).replaceAll("/","."):"unknown",W=A==="";switch(X){case 42:return{...$,summary:W?"Value should not be provided":`Property '${Y}' should not be provided`};case 45:return{...$,summary:W?"Value is missing":`Property '${Y}' is missing`};case 50:let Z=F.indexOf("'"),D=F.slice(Z+1,F.indexOf("'",Z+1));return{...$,summary:W?"Value should be an email":`Property '${Y}' should be ${D}`};case 54:return{...$,summary:`${F.slice(0,9).trim()} property '${Y}' to be ${F.slice(8).trim()} but found: ${J}`};case 62:let G=$.schema.anyOf.map((z)=>`'${z?.format??z.type}'`).join(", ");return{...$,summary:W?`Value should be one of ${G}`:`Property '${Y}' should be one of: ${G}`};default:return{summary:F,...$}}};class AV extends Error{property;expected;message;code="INVALID_FILE_TYPE";status=422;constructor($,F,A=`"${$}" has invalid file type`){super(A);this.property=$,this.expected=F,this.message=A,Object.setPrototypeOf(this,AV.prototype)}toResponse($){if(EW)return new Response(JSON.stringify({type:"validation",on:"body"}),{status:422,headers:{...$,"content-type":"application/json"}});return new Response(JSON.stringify({type:"validation",on:"body",summary:"Invalid file type",message:this.message,property:this.property,expected:this.expected}),{status:422,headers:{...$,"content-type":"application/json"}})}}class L6 extends Error{type;validator;value;allowUnsafeValidationDetails;code="VALIDATION";status=422;valueError;get messageValue(){return this.valueError}expected;customError;constructor($,F,A,J=!1,X){let Y="",W,Z,D;if(F?.provider==="standard"||"~standard"in F||F.schema&&"~standard"in F.schema){let G=("~standard"in F?F:F.schema)["~standard"];if(W=(X??G.validate(A).issues)?.[0],EW&&!J)Y=JSON.stringify({type:"validation",on:$,found:A});else Y=JSON.stringify({type:"validation",on:$,property:W.path?.[0]||"root",message:W?.message,summary:W?.problem,expected:Z,found:A,errors:X},null,2);D=W?.message}else{if(A&&typeof A==="object"&&A instanceof y9)A=A.response;W=X?.First()??("Errors"in F?F.Errors(A).First():t6.Errors(F,A).First());let G=W?.path||"root",z=F?.schema??F;if(!EW&&!J)try{Z=t6.Create(z)}catch(H){Z={type:"Could not create expected value",message:H?.message,error:H}}if(D=W?.schema?.message||W?.schema?.error!==void 0?typeof W.schema.error==="function"?W.schema.error(EW&&!J?{type:"validation",on:$,found:A}:{type:"validation",on:$,value:A,property:G,message:W?.message,summary:z8(W).summary,found:A,expected:Z,errors:"Errors"in F?[...F.Errors(A)].map(z8):[...t6.Errors(F,A)].map(z8)},F):W.schema.error:void 0,D!==void 0)Y=typeof D==="object"?JSON.stringify(D):D+"";else if(EW&&!J)Y=JSON.stringify({type:"validation",on:$,found:A});else Y=JSON.stringify({type:"validation",on:$,property:G,message:W?.message,summary:z8(W).summary,expected:Z,found:A,errors:"Errors"in F?[...F.Errors(A)].map(z8):[...t6.Errors(F,A)].map(z8)},null,2)}super(Y);this.type=$,this.validator=F,this.value=A,this.allowUnsafeValidationDetails=J,this.valueError=W,this.expected=Z,this.customError=D,Object.setPrototypeOf(this,L6.prototype)}get all(){if(this.validator?.provider==="standard"||"~standard"in this.validator||"schema"in this.validator&&this.validator.schema&&"~standard"in this.validator.schema)return("~standard"in this.validator?this.validator:this.validator.schema)["~standard"].validate(this.value).issues?.map(($)=>({summary:$.message,path:$.path?.join(".")||"root",message:$.message,value:this.value}))||[];return"Errors"in this.validator?[...this.validator.Errors(this.value)].map(z8):[...t6.Errors(this.validator,this.value)].map(z8)}static simplifyModel($){let F="schema"in $?$.schema:$;try{return t6.Create(F)}catch{return F}}get model(){if("~standard"in this.validator)return this.validator;return L6.simplifyModel(this.validator)}toResponse($){return new Response(this.message,{status:400,headers:{...$,"content-type":"application/json"}})}detail($,F=this.allowUnsafeValidationDetails){if(!this.customError)return this.message;let A=this.value,J=this.expected,X=this.all;return EW&&!F?{type:"validation",on:this.type,found:A,message:$}:{type:"validation",on:this.type,property:this.valueError?.path||"root",message:$,summary:this.valueError?z8(this.valueError).summary:void 0,found:A,expected:J,errors:X}}}var nE=($,F)=>{try{return JSON.parse($)}catch{throw new L6("property",F,$)}};function UV($,F){if(!U9.Has($))U9.Set($,F);return(A={})=>eO({...A,[a]:$})}var IA=($)=>{try{let F=EF.Compile($);return F.Create=()=>t6.Create($),F.Error=(A)=>new L6("property",$,A,F.Errors(A)),F}catch{return{Check:(F)=>t6.Check($,F),CheckThrow:(F)=>{if(!t6.Check($,F))throw new L6("property",$,F,t6.Errors($,F))},Decode:(F)=>t6.Decode($,F),Create:()=>t6.Create($),Error:(F)=>new L6("property",$,F,t6.Errors($,F))}}},Pb1=($)=>{if(typeof $==="string")switch($.slice(-1)){case"k":return+$.slice(0,$.length-1)*1024;case"m":return+$.slice(0,$.length-1)*1048576;default:return+$}return $},IS=($,F)=>{if($.startsWith(F))return!0;return F.charCodeAt(F.length-1)===42&&F.charCodeAt(F.length-2)===47&&$.startsWith(F.slice(0,-1))},Rb1=!1,bb0=()=>{if(!Rb1)console.warn("[Elysia] Attempt to validate file type without 'file-type'. This may lead to security risks. We recommend installing 'file-type' to properly validate file extension."),Rb1=!0},G11=async()=>Promise.resolve().then(() => (Gb1(),Db1)).then(($)=>{return TS=$.fileTypeFromBlob,TS}).catch(bb0),TS,xb0=($)=>{if(TS)return TS($);return G11().then((F)=>{if(F)return F($)})},tb1=async($,F,A=$?.name??"")=>{if(Array.isArray($))return await Promise.all($.map((X)=>tb1(X,F,A))),!0;if(!$)return!1;let J=await xb0($);if(!J)throw new AV(A,F);if(typeof F==="string"){if(!IS(J.mime,F))throw new AV(A,F)}for(let X=0;X<F.length;X++)if(IS(J.mime,F[X]))return!0;throw new AV(A,F)},$11=($,F)=>{if(F instanceof MS)return!0;if(!(F instanceof Blob))return!1;if($.minSize&&F.size<Pb1($.minSize))return!1;if($.maxSize&&F.size>Pb1($.maxSize))return!1;if($.extension){if(typeof $.extension==="string")return IS(F.type,$.extension);for(let A=0;A<$.extension.length;A++)if(IS(F.type,$.extension[A]))return!0;return!1}return!0};var z11={date:sb1,time:F11(!0),"date-time":Ib1(!0),"iso-time":F11(!1),"iso-date-time":Ib1(!1),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:db0,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:ab0,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:cb0,int32:{type:"number",validate:ib0},int64:{type:"number",validate:nb0},float:{type:"number",validate:jb1},double:{type:"number",validate:jb1},password:!0,binary:!0};function gb0($){return $%4===0&&($%100!==0||$%400===0)}var fb0=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,vb0=[0,31,28,31,30,31,30,31,31,30,31,30,31];function sb1($){let F=fb0.exec($);if(!F)return!1;let A=+F[1],J=+F[2],X=+F[3];return J>=1&&J<=12&&X>=1&&X<=(J===2&&gb0(A)?29:vb0[J])}var yb0=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function F11($){return function(F){let A=yb0.exec(F);if(!A)return!1;let J=+A[1],X=+A[2],Y=+A[3],W=A[4],Z=A[5]==="-"?-1:1,D=+(A[6]||0),G=+(A[7]||0);if(D>23||G>59||$&&!W)return!1;if(J<=23&&X<=59&&Y<60)return!0;let z=X-G*Z,H=J-D*Z-(z<0?1:0);return(H===23||H===-1)&&(z===59||z===-1)&&Y<61}}var A11=($)=>{if($.charCodeAt($.length-6)===32)return $.slice(0,-6)+"+"+$.slice(-5);return $},ub0=/t|\s/i;function Ib1($){let F=F11($);return function(A){let J=A.split(ub0);return J.length===2&&sb1(J[0])&&F(J[1])}}var hb0=/\/|:/,mb0=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function db0($){return hb0.test($)&&mb0.test($)}var Tb1=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function cb0($){return Tb1.lastIndex=0,Tb1.test($)}var lb0=-2147483648,pb0=2147483647;function ib0($){return Number.isInteger($)&&$<=pb0&&$>=lb0}function nb0($){return Number.isInteger($)}function jb1(){return!0}var rb0=/[^\\]\\Z/;function ab0($){if(rb0.test($))return!1;try{return new RegExp($),!0}catch(F){return!1}}var ob1=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,eb1=/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s\d{4}\s\d{2}:\d{2}:\d{2}\sGMT(?:\+|-)\d{4}\s\([^)]+\)/,$x1=/^(?:(?:(?:(?:0?[1-9]|[12][0-9]|3[01])[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:19|20)\d{2})|(?:(?:19|20)\d{2}[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:0?[1-9]|[12][0-9]|3[01]))))(?:\s(?:1[012]|0?[1-9]):[0-5][0-9](?::[0-5][0-9])?(?:\s[AP]M)?)?$/,tb0=z11.date,sb0=z11["date-time"];if(!v6.Has("date"))v6.Set("date",($)=>{let F=A11($).replace(/"/g,"");if(ob1.test(F)||eb1.test(F)||$x1.test(F)||tb0(F)){let A=new Date(F);if(!Number.isNaN(A.getTime()))return!0}return!1});if(!v6.Has("date-time"))v6.Set("date-time",($)=>{let F=$.replace(/"/g,"");if(ob1.test(F)||eb1.test(F)||$x1.test(F)||sb0(F)){let A=new Date(F);if(!Number.isNaN(A.getTime()))return!0}return!1});Object.entries(z11).forEach(($)=>{let[F,A]=$;if(!v6.Has(F)){if(A instanceof RegExp)v6.Set(F,(J)=>A.test(J));else if(typeof A==="function")v6.Set(F,A)}});if(!v6.Has("numeric"))v6.Set("numeric",($)=>!!$&&!isNaN(+$));if(!v6.Has("integer"))v6.Set("integer",($)=>!!$&&Number.isInteger(+$));if(!v6.Has("boolean"))v6.Set("boolean",($)=>$==="true"||$==="false");if(!v6.Has("ObjectString"))v6.Set("ObjectString",($)=>{let F=$.charCodeAt(0);if(F===9||F===10||F===32)F=$.trimStart().charCodeAt(0);if(F!==123&&F!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});if(!v6.Has("ArrayString"))v6.Set("ArrayString",($)=>{let F=$.charCodeAt(0);if(F===9||F===10||F===32)F=$.trimStart().charCodeAt(0);if(F!==123&&F!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});var W1=Object.assign({},s5);UV("UnionEnum",($,F)=>(typeof F==="number"||typeof F==="string"||F===null)&&$.enum.includes(F));UV("ArrayBuffer",($,F)=>F instanceof ArrayBuffer);var ob0=UV("Files",($,F)=>{if($.minItems&&$.minItems>1&&!Array.isArray(F))return!1;if(!Array.isArray(F))return $11($,F);if($.minItems&&F.length<$.minItems)return!1;if($.maxItems&&F.length>$.maxItems)return!1;for(let A=0;A<F.length;A++)if(!$11($,F[A]))return!1;return!0}),eb0=UV("ElysiaForm",({compiler:$,...F},A)=>{if(!(A instanceof FormData))return!1;if($){if(!(YG in A))throw new L6("property",F,A);if(!$.Check(A[YG]))throw $.Error(A[YG])}return!0}),u9={String:($)=>s5.String($),Numeric:($)=>{let F=s5.Number($),A=IA(F);return W1.Transform(W1.Union([W1.String({format:"numeric",default:0}),W1.Number($)],$)).Decode((J)=>{let X=+J;if(isNaN(X))return J;if($&&!A.Check(X))throw A.Error(X);return X}).Encode((J)=>J)},NumericEnum($,F){let A=s5.Enum($,F),J=IA(A);return W1.Transform(W1.Union([W1.String({format:"numeric"}),W1.Number()],F)).Decode((X)=>{let Y=+X;if(isNaN(Y))throw J.Error(Y);if(!J.Check(Y))throw J.Error(Y);return Y}).Encode((X)=>X)},Integer:($)=>{let F=s5.Integer($),A=IA(F);return W1.Transform(W1.Union([W1.String({format:"integer",default:0}),s5.Integer($)],$)).Decode((J)=>{let X=+J;if(!A.Check(X))throw A.Error(X);return X}).Encode((J)=>J)},Date:($)=>{let F=s5.Date($),A=IA(F),J=$?.default?new Date($.default):void 0;return W1.Transform(W1.Union([s5.Date($),W1.String({format:"date-time",default:J?.toISOString()}),W1.String({format:"date",default:J?.toISOString()}),W1.Number({default:J?.getTime()})],$)).Decode((X)=>{if(typeof X==="number"){let W=new Date(X);if(!A.Check(W))throw A.Error(W);return W}if(X instanceof Date)return X;let Y=new Date(A11(X));if(!Y||isNaN(Y.getTime()))throw new L6("property",F,Y);if(!A.Check(Y))throw A.Error(Y);return Y}).Encode((X)=>{if(X instanceof Date)return X.toISOString();if(typeof X==="string"){let Y=new Date(A11(X));if(isNaN(Y.getTime()))throw new L6("property",F,X);return Y.toISOString()}if(!A.Check(X))throw A.Error(X);return X})},BooleanString:($)=>{let F=s5.Boolean($),A=IA(F);return W1.Transform(W1.Union([W1.Boolean($),W1.String({format:"boolean",default:!1})],$)).Decode((J)=>{if(typeof J==="string")return J==="true";if(J!==void 0&&!A.Check(J))throw A.Error(J);return J}).Encode((J)=>J)},ObjectString:($,F)=>{let A=W1.Object($,F),J=IA(A);return W1.Transform(W1.Union([W1.String({format:"ObjectString",default:F?.default}),A],{elysiaMeta:"ObjectString"})).Decode((X)=>{if(typeof X==="string"){if(X.charCodeAt(0)!==123)throw new L6("property",A,X);if(!J.Check(X=nE(X,A)))throw J.Error(X);return J.Decode(X)}return X}).Encode((X)=>{let Y;if(typeof X==="string")X=nE(Y=X,A);if(!J.Check(X))throw J.Error(X);return Y??JSON.stringify(X)})},ArrayString:($=W1.String(),F)=>{let A=W1.Array($,F),J=IA(A),X=(Y,W=!1)=>{if(Y.charCodeAt(0)===91){if(!J.Check(Y=nE(Y,A)))throw J.Error(Y);return J.Decode(Y)}if(W)return Y;throw new L6("property",A,Y)};return W1.Transform(W1.Union([W1.String({format:"ArrayString",default:F?.default}),A],{elysiaMeta:"ArrayString"})).Decode((Y)=>{if(Array.isArray(Y)){let W=[];for(let Z=0;Z<Y.length;Z++){let D=Y[Z];if(typeof D==="string"){let G=X(D,!0);if(Array.isArray(G))W=W.concat(G);else W.push(G);continue}W.push(D)}return W}if(typeof Y==="string")return X(Y);return Y}).Encode((Y)=>{let W;if(typeof Y==="string")Y=nE(W=Y,A);if(!J.Check(Y))throw new L6("property",A,Y);return W??JSON.stringify(Y)})},ArrayQuery:($=W1.String(),F)=>{let A=W1.Array($,F),J=IA(A),X=(Y)=>{if(Y.indexOf(",")!==-1)return J.Decode(Y.split(","));return J.Decode([Y])};return W1.Transform(W1.Union([W1.String({default:F?.default}),A],{elysiaMeta:"ArrayQuery"})).Decode((Y)=>{if(Array.isArray(Y)){let W=[];for(let Z=0;Z<Y.length;Z++){let D=Y[Z];if(typeof D==="string"){let G=X(D);if(Array.isArray(G))W=W.concat(G);else W.push(G);continue}W.push(D)}return W}if(typeof Y==="string")return X(Y);return Y}).Encode((Y)=>{let W;if(typeof Y==="string")Y=nE(W=Y,A);if(!J.Check(Y))throw new L6("property",A,Y);return W??JSON.stringify(Y)})},File:UV("File",$11),Files:($={})=>W1.Transform(ob0($)).Decode((F)=>{if(Array.isArray(F))return F;return[F]}).Encode((F)=>F),Nullable:($,F)=>W1.Union([$,W1.Null()],{...F,nullable:!0}),MaybeEmpty:($,F)=>W1.Union([$,W1.Null(),W1.Undefined()],F),Cookie:($,{domain:F,expires:A,httpOnly:J,maxAge:X,path:Y,priority:W,sameSite:Z,secure:D,secrets:G,sign:z,...H}={})=>{let U=W1.Object($,H);return U.config={domain:F,expires:A,httpOnly:J,maxAge:X,path:Y,priority:W,sameSite:Z,secure:D,secrets:G,sign:z},U},UnionEnum:($,F={})=>{let A=$.every((J)=>typeof J==="string")?{type:"string"}:$.every((J)=>typeof J==="number")?{type:"number"}:$.every((J)=>J===null)?{type:"null"}:{};if($.some((J)=>typeof J==="object"&&J!==null))throw Error("This type does not support objects or arrays");return{default:$[0],...F,[a]:"UnionEnum",...A,enum:$}},NoValidate:($,F=!0)=>{return $.noValidate=F,$},Form:($,F={})=>{let A=W1.Object($,{default:jb0({}),...F}),J=IA(A);return W1.Union([A,eb0({compiler:J})])},ArrayBuffer($={}){return{default:[1,2,3],...$,[a]:"ArrayBuffer"}},Uint8Array:($)=>{let F=s5.Uint8Array($),A=IA(F);return W1.Transform(W1.Union([W1.ArrayBuffer(),s5.Uint8Array($)])).Decode((J)=>{if(J instanceof ArrayBuffer){if(!A.Check(J=new Uint8Array(J)))throw A.Error(J);return J}return J}).Encode((J)=>J)}};W1.BooleanString=u9.BooleanString;W1.ObjectString=u9.ObjectString;W1.ArrayString=u9.ArrayString;W1.ArrayQuery=u9.ArrayQuery;W1.Numeric=u9.Numeric;W1.NumericEnum=u9.NumericEnum;W1.Integer=u9.Integer;W1.File=($)=>{if($?.type)G11();return u9.File({default:"File",...$,extension:$?.type,type:"string",format:"binary"})};W1.Files=($)=>{if($?.type)G11();return u9.Files({...$,elysiaMeta:"Files",default:"Files",extension:$?.type,type:"array",items:{...$,default:"Files",type:"string",format:"binary"}})};W1.Nullable=u9.Nullable;W1.MaybeEmpty=u9.MaybeEmpty;W1.Cookie=u9.Cookie;W1.Date=u9.Date;W1.UnionEnum=u9.UnionEnum;W1.NoValidate=u9.NoValidate;W1.Form=u9.Form;W1.ArrayBuffer=u9.ArrayBuffer;W1.Uint8Array=u9.Uint8Array;var Fx1=zV(qb0(),1),$x0=zV(xS(),1),Fx0=($)=>{let F=2166136261,A=$.length;for(let J=0;J<A;J++)F^=$.charCodeAt(J),F=Math.imul(F,16777619);return F>>>0};class kA{name;jar;initial;valueHash;constructor($,F,A={}){this.name=$,this.jar=F,this.initial=A}get cookie(){return this.jar[this.name]??this.initial}set cookie($){if(!(this.name in this.jar))this.jar[this.name]=this.initial;this.jar[this.name]=$,this.valueHash=void 0}get setCookie(){if(!(this.name in this.jar))this.jar[this.name]=this.initial;return this.jar[this.name]}set setCookie($){this.cookie=$}get value(){return this.cookie.value}set value($){let F=this.cookie.value;if(F===$)return;if(typeof F==="object"&&F!==null&&typeof $==="object"&&$!==null)try{let A=JSON.stringify($),J=Fx0(A);if(this.valueHash!==void 0&&this.valueHash!==J)this.valueHash=J;else{if(JSON.stringify(F)===A){this.valueHash=J;return}this.valueHash=J}}catch{}if(!(this.name in this.jar))this.jar[this.name]={...this.initial};this.jar[this.name].value=$}get expires(){return this.cookie.expires}set expires($){this.setCookie.expires=$}get maxAge(){return this.cookie.maxAge}set maxAge($){this.setCookie.maxAge=$}get domain(){return this.cookie.domain}set domain($){this.setCookie.domain=$}get path(){return this.cookie.path}set path($){this.setCookie.path=$}get secure(){return this.cookie.secure}set secure($){this.setCookie.secure=$}get httpOnly(){return this.cookie.httpOnly}set httpOnly($){this.setCookie.httpOnly=$}get sameSite(){return this.cookie.sameSite}set sameSite($){this.setCookie.sameSite=$}get priority(){return this.cookie.priority}set priority($){this.setCookie.priority=$}get partitioned(){return this.cookie.partitioned}set partitioned($){this.setCookie.partitioned=$}get secrets(){return this.cookie.secrets}set secrets($){this.setCookie.secrets=$}update($){return this.setCookie=Object.assign(this.cookie,typeof $==="function"?$(this.cookie):$),this}set($){return this.setCookie=Object.assign({...this.initial,value:this.value},typeof $==="function"?$(this.cookie):$),this}remove(){if(this.value===void 0)return;return this.set({expires:new Date(0),maxAge:0,value:""}),this}toString(){return typeof this.value==="object"?JSON.stringify(this.value):this.value?.toString()??""}}var Ob1=($,F,A)=>{if(!$.cookie)$.cookie={};return new Proxy(F,{get(J,X){if(X in F)return new kA(X,$.cookie,Object.assign({},A??{},F[X]));return new kA(X,$.cookie,Object.assign({},A))}})},Ax1=async($,F,{secrets:A,sign:J,...X}={})=>{if(!F)return Ob1($,{},X);let Y=typeof A==="string";if(J&&J!==!0&&!Array.isArray(J))J=[J];let W={},Z=Fx1.parse(F);for(let[D,G]of Object.entries(Z)){if(G===void 0)continue;let z=$x0.default(G);if(z){let H=z.charCodeAt(0),U=z.charCodeAt(z.length-1);if(H===123&&U===125||H===91&&U===93)try{z=JSON.parse(z)}catch{}}if(J===!0||J?.includes(D)){if(!A)throw Error("No secret is provided to cookie plugin");if(Y){if(typeof z!=="string")throw new oE(D);let H=await Eb1(z,A);if(H===!1)throw new oE(D);z=H}else{let H=!1;for(let U=0;U<A.length;U++){if(typeof z!=="string")throw new oE(D);let Q=await Eb1(z,A[U]);if(Q!==!1){H=!0,z=Q;break}}if(!H)throw new oE(D)}}W[D]={value:z}}return Ob1($,W,X)},Jx1=($)=>{if(!$||!d2($))return;let F=[];for(let[A,J]of Object.entries($)){if(!A||!J)continue;let X=J.value;if(X===void 0||X===null)continue;F.push(Fx1.serialize(A,typeof X==="object"?JSON.stringify(X):X+"",J))}if(F.length===0)return;if(F.length===1)return F[0];return F},J11=RQ?Bun.env:typeof process<"u"&&process?.env?process.env:{},B4=($,F)=>{if(!RQ&&$ instanceof Promise)return $.then((Y)=>B4(Y,F));let A=$.size,J=F&&(F.status===206||F.status===304||F.status===412||F.status===416),X=J?{}:{"accept-ranges":"bytes","content-range":A?`bytes 0-${A-1}/${A}`:void 0};if(!F&&!A)return new Response($);if(!F)return new Response($,{headers:X});if(F.headers instanceof Headers){for(let Y of Object.keys(X))if(Y in F.headers)F.headers.append(Y,X[Y]);if(J)F.headers.delete("content-length"),F.headers.delete("accept-ranges");return new Response($,F)}if(d2(F.headers))return new Response($,{status:F.status,headers:Object.assign(X,F.headers)});return new Response($,{status:F.status,headers:X})},Xx1=($,F)=>{if(!$)return $;$.delete("set-cookie");for(let A=0;A<F.length;A++){let J=F[A].indexOf("=");$.append("set-cookie",`${F[A].slice(0,J)}=${F[A].slice(J+1)||""}`)}return $},Sb1=($,F)=>{if(F?.headers){if($){if(oe)Object.assign(F.headers,$.headers.toJSON());else for(let[A,J]of $.headers.entries())if(A in F.headers)F.headers[A]=J}if(F.status===200)F.status=$.status;if(F.headers["content-encoding"])delete F.headers["content-encoding"];return F}if(!$)return{headers:{},status:F?.status??200};if(oe){if(F={headers:$.headers.toJSON(),status:F?.status??200},F.headers["content-encoding"])delete F.headers["content-encoding"];return F}F={headers:{},status:F?.status??200};for(let[A,J]of $.headers.entries()){if(A==="content-encoding")continue;if(A in F.headers)F.headers[A]=J}return F},Ax0=J11.ELYSIA_RAPID_STREAM==="true",H11=({mapResponse:$,mapCompactResponse:F})=>async(A,J,X,Y)=>{let W=A.next?.();if(J)QV(J);if(W instanceof Promise)W=await W;if(W?.value instanceof ReadableStream)A=W.value;else if(W&&(typeof W?.done>"u"||W?.done)){if(J)return $(W.value,J,X);return F(W.value,X)}let Z=!Y&&(W?.value?.sse??A?.sse??J?.headers["content-type"]?.startsWith("text/event-stream")),D=Z?(H)=>`data: ${H}

`:(H)=>H,G=Z?"text/event-stream":W?.value&&typeof W?.value==="object"?"application/json":"text/plain";if(J?.headers){if(!J.headers["transfer-encoding"])J.headers["transfer-encoding"]="chunked";if(!J.headers["content-type"])J.headers["content-type"]=G;if(!J.headers["cache-control"])J.headers["cache-control"]="no-cache"}else J={status:200,headers:{"content-type":G,"transfer-encoding":"chunked","cache-control":"no-cache",connection:"keep-alive"}};let z=X?.headers.has("Origin");return new Response(new ReadableStream({async start(H){let U=!1;if(X?.signal?.addEventListener("abort",()=>{U=!0;try{H.close()}catch{}}),!W||W.value instanceof ReadableStream);else if(W.value!==void 0&&W.value!==null)if(W.value.toSSE)H.enqueue(W.value.toSSE());else if(typeof W.value==="object")try{H.enqueue(D(JSON.stringify(W.value)))}catch{H.enqueue(D(W.value.toString()))}else H.enqueue(D(W.value.toString()));try{for await(let Q of A){if(U)break;if(Q===void 0||Q===null)continue;if(Q.toSSE)H.enqueue(Q.toSSE());else{if(typeof Q==="object")try{H.enqueue(D(JSON.stringify(Q)))}catch{H.enqueue(D(Q.toString()))}else H.enqueue(D(Q.toString()));if(!Ax0&&z&&!Z)await new Promise((B)=>setTimeout(()=>B(),0))}}}catch(Q){console.warn(Q)}try{H.close()}catch{}}}),J)};async function*_b1($){let F=$.body;if(!F)return;let A=F.getReader(),J=new TextDecoder;try{while(!0){let{done:X,value:Y}=await A.read();if(X)break;if(typeof Y==="string")yield Y;else yield J.decode(Y)}}finally{A.releaseLock()}}var QV=($)=>{if(typeof $.status==="string")$.status=YV[$.status];if($.cookie&&d2($.cookie)){let F=Jx1($.cookie);if(F)$.headers["set-cookie"]=F}if($.headers["set-cookie"]&&Array.isArray($.headers["set-cookie"]))$.headers=Xx1(new Headers($.headers),$.headers["set-cookie"])},Yx1=($)=>{let F=H11($);return(A,J,X)=>{let Y=!1;if(J.headers instanceof Headers){for(let Z of J.headers.keys())if(Z==="set-cookie"){if(Y)continue;Y=!0;for(let D of J.headers.getSetCookie())A.headers.append("set-cookie",D)}else if(!A.headers.has(Z))A.headers.set(Z,J.headers?.get(Z)??"")}else for(let Z in J.headers)if(Z==="set-cookie")A.headers.append(Z,J.headers[Z]);else if(!A.headers.has(Z))A.headers.set(Z,J.headers[Z]);let W=J.status??200;if(A.status!==W&&W!==200&&(A.status<=300||A.status>400)){let Z=new Response(A.body,{headers:A.headers,status:J.status});if(!Z.headers.has("content-length")&&Z.headers.get("transfer-encoding")==="chunked")return F(_b1(Z),Sb1(Z,J),X,!0);return Z}if(!A.headers.has("content-length")&&A.headers.get("transfer-encoding")==="chunked")return F(_b1(A),Sb1(A,J),X,!0);return A}};async function Jx0($,F=2){let A=[],J=!1,X=[];(async()=>{for await(let W of $)A.push(W),X.forEach((Z)=>Z.resolve()),X=[];J=!0,X.forEach((W)=>W.resolve())})();async function*Y(){let W=0;while(!0)if(W<A.length)yield A[W++];else if(J)return;else await new Promise((Z)=>X.push({resolve:Z}))}return Array.from({length:F},Y)}var jS=($,F={headers:{}})=>{let A=$.path,J=cb1[A.slice(A.lastIndexOf(".")+1)];if(J)F.headers["content-type"]=J;if($.stats&&F.status!==206&&F.status!==304&&F.status!==412&&F.status!==416)return $.stats.then((X)=>{let Y=X.size;if(Y!==void 0)F.headers["content-range"]=`bytes 0-${Y-1}/${Y}`,F.headers["content-length"]=Y;return B4($.value,F)});return B4($.value,F)},G7=($,F,A)=>{if(d2(F.headers)||F.status!==200||F.cookie)switch(QV(F),$?.constructor?.name){case"String":return F.headers["content-type"]="text/plain",new Response($,F);case"Array":case"Object":return F.headers["content-type"]="application/json",new Response(JSON.stringify($),F);case"ElysiaFile":return jS($,F);case"File":return B4($,F);case"Blob":return B4($,F);case"ElysiaCustomStatusResponse":return F.status=$.code,G7($.response,F,A);case void 0:if(!$)return new Response("",F);return new Response(JSON.stringify($),F);case"Response":return OS($,F,A);case"Error":return VW($,F);case"Promise":return $.then((J)=>G7(J,F,A));case"Function":return G7($(),F,A);case"Number":case"Boolean":return new Response($.toString(),F);case"Cookie":if($ instanceof kA)return new Response($.value,F);return new Response($?.toString(),F);case"FormData":return new Response($,F);default:if($ instanceof Response)return OS($,F,A);if($ instanceof Promise)return $.then((J)=>G7(J,F));if($ instanceof Error)return VW($,F);if($ instanceof y9)return F.status=$.code,G7($.response,F,A);if(typeof $?.next==="function"||$ instanceof ReadableStream)return ZV($,F,A);if(typeof $?.then==="function")return $.then((J)=>G7(J,F));if(typeof $?.toResponse==="function")return G7($.toResponse(),F);if("charCodeAt"in $){let J=$.charCodeAt(0);if(J===123||J===91){if(!F.headers["Content-Type"])F.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),F)}}return new Response($,F)}if(typeof $?.next==="function"||$ instanceof ReadableStream)return ZV($,F,A);return OA($,A)},Z7=($,F,A)=>{if($===void 0||$===null)return;if(d2(F.headers)||F.status!==200||F.cookie)switch(QV(F),$?.constructor?.name){case"String":return F.headers["content-type"]="text/plain",new Response($,F);case"Array":case"Object":return F.headers["content-type"]="application/json",new Response(JSON.stringify($),F);case"ElysiaFile":return jS($,F);case"File":return B4($,F);case"Blob":return B4($,F);case"ElysiaCustomStatusResponse":return F.status=$.code,Z7($.response,F,A);case void 0:if(!$)return;return new Response(JSON.stringify($),F);case"Response":return OS($,F,A);case"Promise":return $.then((J)=>Z7(J,F));case"Error":return VW($,F);case"Function":return Z7($(),F);case"Number":case"Boolean":return new Response($.toString(),F);case"FormData":return new Response($);case"Cookie":if($ instanceof kA)return new Response($.value,F);return new Response($?.toString(),F);default:if($ instanceof Response)return OS($,F,A);if($ instanceof Promise)return $.then((J)=>Z7(J,F));if($ instanceof Error)return VW($,F);if($ instanceof y9)return F.status=$.code,Z7($.response,F,A);if(typeof $?.next==="function"||$ instanceof ReadableStream)return ZV($,F,A);if(typeof $?.then==="function")return $.then((J)=>Z7(J,F));if(typeof $?.toResponse==="function")return Z7($.toResponse(),F);if("charCodeAt"in $){let J=$.charCodeAt(0);if(J===123||J===91){if(!F.headers["Content-Type"])F.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),F)}}return new Response($,F)}else switch($?.constructor?.name){case"String":return F.headers["content-type"]="text/plain",new Response($);case"Array":case"Object":return F.headers["content-type"]="application/json",new Response(JSON.stringify($),F);case"ElysiaFile":return jS($,F);case"File":return B4($,F);case"Blob":return B4($,F);case"ElysiaCustomStatusResponse":return F.status=$.code,Z7($.response,F,A);case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Promise":return $.then((J)=>{let X=Z7(J,F);if(X!==void 0)return X});case"Error":return VW($,F);case"Function":return OA($(),A);case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof kA)return new Response($.value,F);return new Response($?.toString(),F);case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((J)=>Z7(J,F));if($ instanceof Error)return VW($,F);if($ instanceof y9)return F.status=$.code,Z7($.response,F,A);if(typeof $?.next==="function"||$ instanceof ReadableStream)return ZV($,F,A);if(typeof $?.then==="function")return $.then((J)=>Z7(J,F));if(typeof $?.toResponse==="function")return Z7($.toResponse(),F);if("charCodeAt"in $){let J=$.charCodeAt(0);if(J===123||J===91){if(!F.headers["Content-Type"])F.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),F)}}return new Response($)}},OA=($,F)=>{switch($?.constructor?.name){case"String":return new Response($,{headers:{"Content-Type":"text/plain"}});case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});case"ElysiaFile":return jS($);case"File":return B4($);case"Blob":return B4($);case"ElysiaCustomStatusResponse":return G7($.response,{status:$.code,headers:{}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Error":return VW($);case"Promise":return $.then((A)=>OA(A,F));case"Function":return OA($(),F);case"Number":case"Boolean":return new Response($.toString());case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((A)=>OA(A,F));if($ instanceof Error)return VW($);if($ instanceof y9)return G7($.response,{status:$.code,headers:{}});if(typeof $?.next==="function"||$ instanceof ReadableStream)return ZV($,void 0,F);if(typeof $?.then==="function")return $.then((A)=>OA(A,F));if(typeof $?.toResponse==="function")return OA($.toResponse());if("charCodeAt"in $){let A=$.charCodeAt(0);if(A===123||A===91)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}})}return new Response($)}},VW=($,F)=>{if(typeof $?.toResponse==="function"){let A=$.toResponse(),J=F??{headers:{},status:200,redirect:""},X=(Y)=>{if(Y instanceof Response)J.status=Y.status;return G7(Y,J)};return typeof A?.then==="function"?A.then(X):X(A)}return new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:F?.status!==200?F?.status??500:500,headers:F?.headers})},Xx0=($,F,A={})=>{if(typeof $==="function")return;let J=G7($,{headers:A});if(!F.parse?.length&&!F.transform?.length&&!F.beforeHandle?.length&&!F.afterHandle?.length)return()=>J.clone()},OS=Yx1({mapResponse:G7,mapCompactResponse:OA}),ZV=H11({mapResponse:G7,mapCompactResponse:OA}),PQ={name:"web-standard",isWebStandard:!0,handler:{mapResponse:G7,mapEarlyResponse:Z7,mapCompactResponse:OA,createStaticHandler:Xx0},composeHandler:{mapResponseContext:"c.request",preferWebstandardHeaders:!0,headers:`c.headers={}
for(const [k,v] of c.request.headers.entries())c.headers[k]=v
`,parser:{json($){if($)return`try{c.body=await c.request.json()}catch{}
`;return`c.body=await c.request.json()
`},text(){return`c.body=await c.request.text()
`},urlencoded(){return`c.body=parseQuery(await c.request.text())
`},arrayBuffer(){return`c.body=await c.request.arrayBuffer()
`},formData($){let F=`
c.body={}
`;if($)F+="let form;try{form=await c.request.formData()}catch{}";else F+=`const form=await c.request.formData()
`;return F+`for(const key of form.keys()){if(c.body[key]) continue
const value=form.getAll(key)
if(value.length===1)c.body[key]=value[0]
else c.body[key]=value}`}}},async stop($,F){if(!$.server)throw Error("Elysia isn't running. Call `app.listen` to start the server.");if($.server){if(await $.server.stop(F),$.server=null,$.event.stop?.length)for(let A=0;A<$.event.stop.length;A++)$.event.stop[A].fn($)}},composeGeneralHandler:{parameters:"r",createContext($){let F="",A="",J=$.setHeaders;for(let W of Object.keys($.decorator))F+=`,'${W}':decorator['${W}']`;let X=$.config.handler?.standardHostname??!0,Y=!!$.event.trace?.length;if(A+=`const u=r.url,s=u.indexOf('/',${X?11:7}),qi=u.indexOf('?',s+1),p=u.substring(s,qi===-1?undefined:qi)
`,Y)A+=`const id=randomId()
`;if(A+="const c={request:r,store,qi,path:p,url:u,redirect,status,set:{headers:",A+=Object.keys(J??{}).length?"Object.assign({},app.setHeaders)":"Object.create(null)",A+=",status:200}",$.inference.server)A+=",get server(){return app.getServer()}";if(Y)A+=",[ELYSIA_REQUEST_ID]:id";return A+=F,A+=`}
`,A},error404($,F,A=""){let J="if(route===null){"+A+(F?"":"c.set.status=404")+`
return `;if(F)J+=`app.handleError(c,notFound,false,${this.parameters})`;else J+=$?"c.response=c.responseValue=new Response(error404Message,{status:c.set.status===200?404:c.set.status,headers:c.set.headers})":"c.response=c.responseValue=error404.clone()";return J+="}",{declare:F?"":`const error404Message=notFound.message.toString()
const error404=new Response(error404Message,{status:404})
`,code:J}}},composeError:{mapResponseContext:"",validationError:"set.headers['content-type']='application/json';return mapResponse(error.message,set)",unknownError:"set.status=error.status??set.status??500;return mapResponse(error.message,set)"},listen(){return()=>{throw Error("WebStandard does not support listen, you might want to export default Elysia.fetch instead")}}},Yx0=zV(xS(),1),TQ=zV(xS(),1),jQ=1,OQ=2,SQ=4,QX=8;function Wx1($,F=0,A,J){let X=Object.create(null),Y=0,W=$.length,Z=F-1,D=Z;for(let z=0;z<W;z++)switch($.charCodeAt(z)){case 38:G($,z),Z=z,D=z,Y=0;break;case 61:if(D<=Z)D=z;else Y|=QX;break;case 43:if(D>Z)Y|=SQ;else Y|=jQ;break;case 37:if(D>Z)Y|=QX;else Y|=OQ;break}if(Z<W)G($,W);return X;function G(z,H){let U=D>Z,Q=U?D:H,B=z.slice(Z+1,Q);if(!U&&B.length===0)return;let q=B;if(Y&jQ)q=q.replace(/\+/g," ");if(Y&OQ)q=TQ.default(q)||q;let L="";if(U){let V=z.slice(D+1,H);if(Y&SQ)V=V.replace(/\+/g," ");if(Y&QX)V=TQ.default(V)||V;L=V}let E=X[q];if(A&&A?.[q])if(L.charCodeAt(0)===91){if(J&&J?.[q])L=JSON.parse(L);else L=L.slice(1,-1).split(",");if(E===void 0)X[q]=L;else if(Array.isArray(E))E.push(...L);else X[q]=L,X[q].unshift(E)}else if(E===void 0)X[q]=L;else if(Array.isArray(E))E.push(L);else X[q]=[E,L];else X[q]=L}}function Wx0($,F=0){let A=Object.create(null),J=0,X=$.length,Y=F-1,W=Y;for(let D=0;D<X;D++)switch($.charCodeAt(D)){case 38:Z($,D),Y=D,W=D,J=0;break;case 61:if(W<=Y)W=D;else J|=QX;break;case 43:if(W>Y)J|=SQ;else J|=jQ;break;case 37:if(W>Y)J|=QX;else J|=OQ;break}if(Y<X)Z($,X);return A;function Z(D,G){let z=W>Y,H=z?W:G,U=D.slice(Y+1,H);if(!z&&U.length===0)return;let Q=U;if(J&jQ)Q=Q.replace(/\+/g," ");if(J&OQ)Q=TQ.default(Q)||Q;let B="";if(z){let L=D.slice(W+1,G);if(J&SQ)L=L.replace(/\+/g," ");if(J&QX)L=TQ.default(L)||L;B=L}let q=A[Q];if(B.charCodeAt(0)===91&&B.charCodeAt(B.length-1)===93){try{B=JSON.parse(B)}catch{}if(q===void 0)A[Q]=B;else if(Array.isArray(q))q.push(B);else A[Q]=[q,B]}else if(B.charCodeAt(0)===123&&B.charCodeAt(B.length-1)===125){try{B=JSON.parse(B)}catch{}if(q===void 0)A[Q]=B;else if(Array.isArray(q))q.push(B);else A[Q]=[q,B]}else{if(B.includes(","))B=B.split(",");if(q===void 0)A[Q]=B;else if(Array.isArray(q))q.push(B);else A[Q]=[q,B]}}}function CQ($){let F=Object.create(null),A=0,J=$.length,X=-1,Y=-1;for(let Z=0;Z<J;Z++)switch($.charCodeAt(Z)){case 38:W($,Z),X=Z,Y=Z,A=0;break;case 61:if(Y<=X)Y=Z;else A|=QX;break;case 43:if(Y>X)A|=SQ;else A|=jQ;break;case 37:if(Y>X)A|=QX;else A|=OQ;break}if(X<J)W($,J);return F;function W(Z,D){let G=Y>X,z=G?Y:D,H=Z.slice(X+1,z);if(!G&&H.length===0)return;let U=H;if(A&jQ)U=U.replace(/\+/g," ");if(A&OQ)U=TQ.default(U)||U;let Q="";if(G){let q=Z.slice(Y+1,D);if(A&SQ)q=q.replace(/\+/g," ");if(A&QX)q=TQ.default(q)||q;Q=q}let B=F[U];if(B===void 0)F[U]=Q;else if(Array.isArray(B))B.push(Q);else F[U]=[B,Q]}}var fS=Symbol("ElysiaTrace"),HX=()=>{let{promise:$,resolve:F}=Promise.withResolvers(),{promise:A,resolve:J}=Promise.withResolvers(),{promise:X,resolve:Y}=Promise.withResolvers(),W=[],Z=[];return[(D)=>{if(D)W.push(D);return $},(D)=>{let G=[],z=[],H=null;for(let Q=0;Q<(D.total??0);Q++){let{promise:B,resolve:q}=Promise.withResolvers(),{promise:L,resolve:E}=Promise.withResolvers(),{promise:V,resolve:R}=Promise.withResolvers(),N=[],S=[];G.push((C)=>{if(C)N.push(C);return B}),z.push((C)=>{let M={...C,end:L,error:V,index:Q,onStop(I){if(I)S.push(I);return L}};q(M);for(let I=0;I<N.length;I++)N[I](M);return(I=null)=>{let T=performance.now();if(I)H=I;let j={end:T,error:I,get elapsed(){return T-C.begin}};for(let b=0;b<S.length;b++)S[b](j);E(T),R(I)}})}let U={...D,end:A,error:X,onEvent(Q){for(let B=0;B<G.length;B++)G[B](Q)},onStop(Q){if(Q)Z.push(Q);return A}};F(U);for(let Q=0;Q<W.length;Q++)W[Q](U);return{resolveChild:z,resolve(Q=null){let B=performance.now();if(!Q&&H)Q=H;let q={end:B,error:Q,get elapsed(){return B-D.begin}};for(let L=0;L<Z.length;L++)Z[L](q);J(B),Y(Q)}}}]},Zx0=($)=>{return(F)=>{let[A,J]=HX(),[X,Y]=HX(),[W,Z]=HX(),[D,G]=HX(),[z,H]=HX(),[U,Q]=HX(),[B,q]=HX(),[L,E]=HX(),[V,R]=HX();return $({id:F[HV],context:F,set:F.set,onRequest:A,onParse:X,onTransform:W,onBeforeHandle:D,onHandle:z,onAfterHandle:U,onMapResponse:L,onAfterResponse:V,onError:B,time:Date.now(),store:F.store}),{request:J,parse:Y,transform:Z,beforeHandle:G,handle:H,afterHandle:Q,error:q,mapResponse:E,afterResponse:R}}},z7=Symbol.for("TypeBox.Kind"),Dx0=Symbol.for("TypeBox.Hint"),Zx1=($)=>/(\ |-|\t|\n|\.|\[|\]|\{|\})/.test($)||!isNaN(+$[0]),Dx1=($,F,A=!1)=>{if(typeof F==="number")return`${$}[${F}]`;if(Zx1(F))return`${$}${A?"?.":""}["${F}"]`;return`${$}${A?"?":""}.${F}`},Gx0=($)=>Zx1($)?`"${$}"`:$,kb1=($,F=0,A)=>{if(A.type!=="string"||A.const||A.trusted)return $;let J="";for(let X=F-1;X>=0;X--)J+=`d.h${X}(`;return J+$+")".repeat(F)},Gx1=($)=>{if(!$.allOf||z7 in $&&($[z7]!=="Intersect"||$.type!=="object"))return $;let{allOf:F,...A}=$;if(A.properties={},z7 in A)A[z7]="Object";for(let J of F){if(J.type!=="object")continue;let{properties:X,required:Y,type:W,[z7]:Z,...D}=J;if(Y)A.required=A.required?A.required.concat(Y):Y;Object.assign(A,D);for(let G in J.properties)A.properties[G]=Gx1(J.properties[G])}return A},zx0=($,F,A)=>{let J=$.patternProperties["^(.*)$"]??$.patternProperties[Object.keys($.patternProperties)[0]];if(!J)return F;let X=A.array;A.array++;let Y=`(()=>{const ar${X}s=Object.keys(${F}),ar${X}v={};for(let i=0;i<ar${X}s.length;i++){const ar${X}p=${F}[ar${X}s[i]];ar${X}v[ar${X}s[i]]=${SA(J,`ar${X}p`,A)}`,W=A.optionalsInArray[X+1];if(W){for(let Z=0;Z<W.length;Z++){let D=`ar${X}v[ar${X}s[i]]${W[Z]}`;Y+=`;if(${D}===undefined)delete ${D}`}A.optionalsInArray[X+1]=[]}return Y+=`}return ar${X}v})()`,Y},Hx0=($,F,A)=>{let J=A.array;A.array++;let X=F==="v"&&!A.unions.length,Y="";if(!X)Y="(()=>{";Y+=`const ar${J}v=[`;for(let W=0;W<$.length;W++){if(W!==0)Y+=",";Y+=SA($[W],Dx1(F,W,A.parentIsOptional),A)}if(Y+="];",!X)Y+=`return ar${J}v})()`;return Y};function SS($,F=new WeakMap){if($===null||typeof $!=="object"||typeof $==="function")return $;if(F.has($))return F.get($);if(Array.isArray($)){let A=Array($.length);F.set($,A);for(let J=0;J<$.length;J++)A[J]=SS($[J],F);return A}if(typeof $==="object"){let A=Object.keys($).concat(Object.getOwnPropertySymbols($)),J={};for(let X of A)J[X]=SS($[X],F);return J}return $}var Ux0=($,F,A)=>{if(A.TypeCompiler===void 0){if(!A.typeCompilerWanred)console.warn(Error("[exact-mirror] TypeBox's TypeCompiler is required to use Union")),A.typeCompilerWanred=!0;return F}A.unionKeys[F]=1;let J=A.unions.length,X=A.unions[J]=[],Y=`(()=>{
`,W=(D)=>{if(!(z7 in D)||!D.$ref)return D;if(D[z7]==="This")return SS(A.definitions[D.$ref]);else if(D[z7]==="Ref")if(!A.modules)console.warn(Error("[exact-mirror] modules is required when using nested cyclic reference"));else return A.modules.Import(D.$ref);return D},Z="";for(let D=0;D<$.length;D++){let G=W($[D]);if(Array.isArray(G.anyOf))for(let z=0;z<G.anyOf.length;z++)G.anyOf[z]=W(G.anyOf[z]);else if(G.items)if(Array.isArray(G.items))for(let z=0;z<G.items.length;z++)G.items[z]=W(G.items[z]);else G.items=W(G.items);X.push(EF.Compile(G)),Y+=`if(d.unions[${J}][${D}].Check(${F})){return ${SA(G,F,{...A,recursion:A.recursion+1,parentIsOptional:!0})}}
`,Z+=(D?"":"let ")+"tmp="+SA(G,F,{...A,recursion:A.recursion+1,parentIsOptional:!0})+`
if(d.unions[${J}][${D}].Check(tmp))return tmp
`}if(Z)Y+=Z;return Y+=`return ${A.removeUnknownUnionType?"undefined":F}`,Y+"})()"},SA=($,F,A)=>{if(!$)return"";let J=F==="v"&&!A.unions.length;if(z7 in $&&$[z7]==="Import"&&$.$ref in $.$defs)return SA($.$defs[$.$ref],F,{...A,definitions:Object.assign(A.definitions,$.$defs)});if(J&&$.type!=="object"&&$.type!=="array"&&!$.anyOf)return`return ${kb1("v",A.sanitize?.length,$)}`;if(A.recursion>=A.recursionLimit)return F;let X="";if($.$id&&Dx0 in $)A.definitions[$.$id]=$;switch($.type){case"object":if($[z7]==="Record"){X=zx0($,F,A);break}if($=Gx1($),X+="{",$.additionalProperties)X+=`...${F},`;let Y=Object.keys($.properties);for(let G=0;G<Y.length;G++){let z=Y[G],H=!$.required||$.required&&!$.required.includes(z)||Array.isArray($.properties[z].anyOf),U=Dx1(F,z,A.parentIsOptional);if(H){let B=A.array;if(F.startsWith("ar")){let q=U.indexOf("."),L;if(q>=0)L=U.slice(q);else L=U.slice(F.length);if(L.startsWith("?."))if(L.charAt(2)==="[")L=L.slice(2);else L=L.slice(1);let E=A.optionalsInArray;if(E[B])E[B].push(L);else E[B]=[L]}else A.optionals.push(U)}let Q=$.properties[z];if(G!==0)X+=",";X+=`${Gx0(z)}:${H?`${U}===undefined?undefined:`:""}${SA(Q,U,{...A,recursion:A.recursion+1,parentIsOptional:H})}`}X+="}";break;case"array":if($.items.type!=="object"&&$.items.type!=="array"){if(Array.isArray($.items)){X=Hx0($.items,F,A);break}else if(J&&!Array.isArray($.items.anyOf))return"return v";else if(z7 in $.items&&$.items.$ref&&($.items[z7]==="Ref"||$.items[z7]==="This"))X=SA(SS(A.definitions[$.items.$ref]),F,{...A,parentIsOptional:!0,recursion:A.recursion+1});else if(!Array.isArray($.items.anyOf)){X=F;break}}let W=A.array;A.array++;let Z=F;if(J)X=`const ar${W}v=new Array(${F}.length);`;else Z=`ar${W}s`,X=`((${Z})=>{const ar${W}v=new Array(${Z}.length);`;X+=`for(let i=0;i<${Z}.length;i++){const ar${W}p=${Z}[i];ar${W}v[i]=${SA($.items,`ar${W}p`,A)}`;let D=A.optionalsInArray[W+1];if(D){for(let G=0;G<D.length;G++){let z=`ar${W}v[i]${D[G]}`;X+=`;if(${z}===undefined)delete ${z}`}A.optionalsInArray[W+1]=[]}if(X+="}",!J)X+=`return ar${W}v})(${F})`;break;default:if($.$ref&&$.$ref in A.definitions)return SA(A.definitions[$.$ref],F,A);if(Array.isArray($.anyOf)){X=Ux0($.anyOf,F,A);break}X=kb1(F,A.sanitize?.length,$);break}if(!J)return X;if($.type==="array")X=`${X}const x=ar0v;`;else X=`const x=${X}
`;for(let Y=0;Y<A.optionals.length;Y++){let W=A.optionals[Y],Z=W.slice(1);if(X+=`if(${W}===undefined`,A.unionKeys[W])X+=`||x${Z}===undefined`;let D=Z.charCodeAt(0)!==63&&$.type!=="array";X+=`)delete x${D?Z.charCodeAt(0)===91?"?.":"?":""}${Z}
`}return`${X}return x`},de=($,{TypeCompiler:F,modules:A,definitions:J,sanitize:X,recursionLimit:Y=8,removeUnknownUnionType:W=!1}={})=>{let Z=[];if(typeof X==="function")X=[X];let D=SA($,"v",{optionals:[],optionalsInArray:[],array:0,parentIsOptional:!1,unions:Z,unionKeys:{},TypeCompiler:F,modules:A,definitions:J??A?.$defs??{},sanitize:X,recursion:0,recursionLimit:Y,removeUnknownUnionType:W});if(!Z.length&&!X?.length)return Function("v",D);let G;if(X?.length){G={};for(let z=0;z<X.length;z++)G[`h${z}`]=X[z]}return Function("d",`return function mirror(v){${D}}`)({unions:Z,...G})},ce=($,F)=>{if(Array.isArray(F)){let A=$;for(let J of F)A=bb1(A,J);return A}return bb1($,F)},bb1=($,F)=>{if(F.rootOnly&&F.excludeRoot)throw Error("Can't set both rootOnly and excludeRoot");if(F.rootOnly&&F.onlyFirst)throw Error("Can't set both rootOnly and onlyFirst");if(F.rootOnly&&F.untilObjectFound)throw Error("Can't set both rootOnly and untilObjectFound");let A=({s:J,isRoot:X,treeLvl:Y})=>{if(!J)return J;let W=X&&F.excludeRoot,Z=F.from[a];if(J.elysiaMeta){if(F.from.elysiaMeta===J.elysiaMeta&&!W)return F.to(J);return J}let D=Z&&J[a]===Z;if(!W&&F.onlyFirst&&J.type===F.onlyFirst){if(D)return F.to(J);return J}if(X&&F.rootOnly){if(D)return F.to(J);return J}if(!X&&F.untilObjectFound&&J.type==="object")return J;let G={isRoot:!1,treeLvl:Y+1},z={...J};if(J.oneOf)z.oneOf=J.oneOf.map((H)=>A({...G,s:H}));if(J.anyOf)z.anyOf=J.anyOf.map((H)=>A({...G,s:H}));if(J.allOf)z.allOf=J.allOf.map((H)=>A({...G,s:H}));if(J.not)z.not=A({...G,s:J.not});if(J.properties){z.properties={};for(let[H,U]of Object.entries(J.properties))z.properties[H]=A({...G,s:U})}if(J.items){let H=J.items;z.items=Array.isArray(H)?H.map((U)=>A({...G,s:U})):A({...G,s:H})}if(!W&&Z&&z[a]===Z)return F.to(z);return z};return A({s:$,isRoot:!0,treeLvl:0})},le,eE=()=>{if(!le)le=[{from:W1.Object({}),to:($)=>W1.ObjectString($.properties||{},$),excludeRoot:!0},{from:W1.Array(W1.Any()),to:($)=>W1.ArrayString($.items||W1.Any(),$)}];return le},pe,xb1=()=>{if(!pe)pe=[{from:W1.Object({}),to:($)=>W1.ObjectString($.properties??{},$),excludeRoot:!0},{from:W1.Array(W1.Any()),to:($)=>W1.ArrayQuery($.items??W1.Any(),$)}];return pe},ie,X11=()=>{if(!ie)ie=[{from:W1.Number(),to:($)=>W1.Numeric($),rootOnly:!0},{from:W1.Boolean(),to:($)=>W1.BooleanString($),rootOnly:!0}];return ie},ne,gb1=()=>{if(!ne)ne=[{from:W1.Object({}),to:($)=>W1.ObjectString($.properties??{},$),onlyFirst:"object",excludeRoot:!0},{from:W1.Array(W1.Any()),to:($)=>W1.ArrayString($.items??W1.Any(),$),onlyFirst:"array",excludeRoot:!0}];return ne},Y11=($)=>{if(!$)return!1;if($?.[a]==="Import"&&$.References)return $.References().some(Y11);if($.schema)$=$.schema;return!!$&&H9 in $},TA=($)=>{if(!$)return!1;let F=$?.schema??$;if(F[a]==="Import"&&$.References)return $.References().some(TA);if(F.anyOf)return F.anyOf.some(TA);if(F.someOf)return F.someOf.some(TA);if(F.allOf)return F.allOf.some(TA);if(F.not)return F.not.some(TA);if(F.type==="object"){let A=F.properties;if("additionalProperties"in F)return F.additionalProperties;if("patternProperties"in F)return!1;for(let J of Object.keys(A)){let X=A[J];if(X.type==="object"){if(TA(X))return!0}else if(X.anyOf){for(let Y=0;Y<X.anyOf.length;Y++)if(TA(X.anyOf[Y]))return!0}return X.additionalProperties}return!1}if(F.type==="array"&&F.items&&!Array.isArray(F.items))return TA(F.items);return!1},fb1=($,F,A)=>{if(!$)return;if(typeof $!=="string")return $;if(A&&$ in A.$defs)return A.Import($);return F?.[$]},d8=($,F)=>{if(!F)return!1;if(a in F&&F[a]===$)return!0;if(a in F&&F[a]==="Import"){if(F.$defs&&F.$ref){let A=F.$ref.replace("#/$defs/","");if(F.$defs[A])return d8($,F.$defs[A])}}if(F.anyOf)return F.anyOf.some((A)=>d8($,A));if(F.oneOf)return F.oneOf.some((A)=>d8($,A));if(F.allOf)return F.allOf.some((A)=>d8($,A));if(F.type==="array"&&F.items){if($==="Files"&&a in F.items&&F.items[a]==="File")return!0;return d8($,F.items)}if(F.type==="object"){let A=F.properties;if(!A)return!1;for(let J of Object.keys(A))if(d8($,A[J]))return!0}return!1},jA=($,F)=>{if(!F)return!1;let A=F?.schema??F;if(A.elysiaMeta===$)return!0;if(A[a]==="Import"&&F.References)return F.References().some((J)=>jA($,J));if(A.anyOf)return A.anyOf.some((J)=>jA($,J));if(A.someOf)return A.someOf.some((J)=>jA($,J));if(A.allOf)return A.allOf.some((J)=>jA($,J));if(A.not)return A.not.some((J)=>jA($,J));if(A.type==="object"){let J=A.properties;if(!J)return!1;for(let X of Object.keys(J)){let Y=J[X];if(Y.type==="object"){if(jA($,Y))return!0}else if(Y.anyOf){for(let W=0;W<Y.anyOf.length;W++)if(jA($,Y.anyOf[W]))return!0}return A.elysiaMeta===$}return!1}if(A.type==="array"&&A.items&&!Array.isArray(A.items))return jA($,A.items);return!1},JV=($,F)=>{if(!F)return;let A=F.schema??F;if(A[a]==="Import"&&F.References)return F.References().some((J)=>JV($,J));if(A.type==="object"){let J=A.properties;if(!J)return!1;for(let X of Object.keys(J)){let Y=J[X];if($ in Y)return!0;if(Y.type==="object"){if(JV($,Y))return!0}else if(Y.anyOf){for(let W=0;W<Y.anyOf.length;W++)if(JV($,Y.anyOf[W]))return!0}}return!1}return $ in A},NF=($)=>{if(!$)return!1;if($.oneOf){for(let F=0;F<$.oneOf.length;F++)if(NF($.oneOf[F]))return!0}if($.anyOf){for(let F=0;F<$.anyOf.length;F++)if(NF($.anyOf[F]))return!0}if($.oneOf){for(let F=0;F<$.oneOf.length;F++)if(NF($.oneOf[F]))return!0}if($.allOf){for(let F=0;F<$.allOf.length;F++)if(NF($.allOf[F]))return!0}if($.not&&NF($.not))return!0;if($.type==="object"&&$.properties){let F=$.properties;for(let A of Object.keys(F)){let J=F[A];if(NF(J))return!0;if(J.type==="array"&&J.items&&NF(J.items))return!0}}if($.type==="array"&&$.items&&NF($.items))return!0;return $[a]==="Ref"&&"$ref"in $},CF=($)=>{if(!$)return!1;if($.$ref&&$.$defs&&$.$ref in $.$defs&&CF($.$defs[$.$ref]))return!0;if($.oneOf){for(let F=0;F<$.oneOf.length;F++)if(CF($.oneOf[F]))return!0}if($.anyOf){for(let F=0;F<$.anyOf.length;F++)if(CF($.anyOf[F]))return!0}if($.allOf){for(let F=0;F<$.allOf.length;F++)if(CF($.allOf[F]))return!0}if($.not&&CF($.not))return!0;if($.type==="object"&&$.properties){let F=$.properties;for(let A of Object.keys(F)){let J=F[A];if(CF(J))return!0;if(J.type==="array"&&J.items&&CF(J.items))return!0}}if($.type==="array"&&$.items&&CF($.items))return!0;return S2 in $},LQ=($)=>(F)=>{if(typeof F==="object")try{return t6.Clean($,F)}catch{}return F},B9=($,{models:F={},dynamic:A=!1,modules:J,normalize:X=!1,additionalProperties:Y=!1,forceAdditionalProperties:W=!1,coerce:Z=!1,additionalCoerce:D=[],validators:G,sanitize:z}={})=>{if(G=G?.filter((E)=>E),!$){if(!G?.length)return;$=G[0],G=G.slice(1)}let H=void 0,U=(E)=>{if(Z)return ce(E,[{from:W1.Number(),to:(V)=>W1.Numeric(V),untilObjectFound:!0},{from:W1.Boolean(),to:(V)=>W1.BooleanString(V),untilObjectFound:!0},...Array.isArray(D)?D:[D]]);return ce(E,D)},Q=(E)=>{if(E&&typeof E!=="string"&&"~standard"in E)return E;if(!E)return;let V;if(typeof E!=="string")V=E;else if(V=J&&E in J.$defs?J.Import(E):F[E],!V)return;let R=Array.isArray(D)?D.length>0:!!D;if(a in V){if(V[a]==="Import"){if(!NF(V.$defs[V.$ref])){if(V=V.$defs[V.$ref]??F[V.$ref],Z||R){if(V=U(V),"$id"in V&&!V.$defs)V.$id=`${V.$id}_coerced_${WV()}`}}}else if(NF(V)){let N=WV();V=W1.Module({...J?.$defs,[N]:V}).Import(N)}else if(Z||R)V=U(V)}return V},B=Q($),q=G;if("~standard"in B||G?.length&&G.some((E)=>E&&typeof E!=="string"&&("~standard"in E))){let E=(C)=>{let M;if(X===!0||X==="exactMirror")try{M=de(C,{TypeCompiler:EF,sanitize:z?.(),modules:J})}catch{console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.warn(C),M=LQ(C)}let I=B9(C,{models:F,modules:J,dynamic:A,normalize:X,additionalProperties:!0,forceAdditionalProperties:!0,coerce:Z,additionalCoerce:D});return I.Decode=M,(T)=>{if(I.Check(T))return{value:I.Decode(T)};else return{issues:[...I.Errors(T)]}}},V=B["~standard"]?B["~standard"].validate:E(B),R=[];if(G?.length)for(let C of G){if(!C)continue;if(typeof C==="string")continue;if(C?.["~standard"]){R.push(C["~standard"]);continue}if(a in C){R.push(E(C));continue}}async function N(C){let M=V(C);if(M instanceof Promise)M=await M;if(M.issues)return M;let I=[];if(M&&typeof M==="object")I.push(M.value);for(let j=0;j<R.length;j++){if(M=R[j].validate(C),M instanceof Promise)M=await M;if(M.issues)return M;if(M&&typeof M==="object")I.push(M.value)}if(!I.length)return{value:M};if(I.length===1)return{value:I[0]};if(I.length===2)return{value:v9(I[0],I[1])};let T=v9(I[0],I[1]);for(let j=2;j<I.length;j++)T=v9(T,I[j]);return{value:T}}let S={provider:"standard",schema:B,references:"",checkFunc:()=>{},code:"",Check:N,Errors:(C)=>N(C)?.then?.((M)=>M?.issues),Code:()=>"",Decode:N,Encode:(C)=>C,hasAdditionalProperties:!1,hasDefault:!1,isOptional:!1,hasTransform:!1,hasRef:!1};return S.parse=(C)=>{try{return S.Decode(S.Clean?.(C)??C)}catch(M){throw[...S.Errors(C)].map(z8)}},S.safeParse=(C)=>{try{return{success:!0,data:S.Decode(S.Clean?.(C)??C),error:null}}catch(M){let I=[...L.Errors(C)].map(z8);return{success:!1,data:null,error:I[0]?.summary,errors:I}}},S}else if(G?.length){let E=!1,V=q,{schema:R,notObjects:N}=Kx0([B,...V.map(Q)]);if(N){if(B=W1.Intersect([...R?[R]:[],...N.map((S)=>{let C=Q(S);if(C.type==="object"&&"additionalProperties"in C){if(!E&&C.additionalProperties===!1)E=!0;delete C.additionalProperties}return C})]),B.type==="object"&&E)B.additionalProperties=!1}}else if(B.type==="object"&&(("additionalProperties"in B)===!1||W))B.additionalProperties=Y;else B=ce(B,{onlyFirst:"object",from:W1.Object({}),to(E){if(!E.properties)return E;if("additionalProperties"in E)return E;return W1.Object(E.properties,{...E,additionalProperties:!1})}});if(A)if(a in B){let E={provider:"typebox",schema:B,references:"",checkFunc:()=>{},code:"",Check:(V)=>t6.Check(B,V),Errors:(V)=>t6.Errors(B,V),Code:()=>"",Clean:LQ(B),Decode:(V)=>t6.Decode(B,V),Encode:(V)=>t6.Encode(B,V),get hasAdditionalProperties(){if("~hasAdditionalProperties"in this)return this["~hasAdditionalProperties"];return this["~hasAdditionalProperties"]=TA(B)},get hasDefault(){if("~hasDefault"in this)return this["~hasDefault"];return this["~hasDefault"]=JV("default",B)},get isOptional(){if("~isOptional"in this)return this["~isOptional"];return this["~isOptional"]=Y11(B)},get hasTransform(){if("~hasTransform"in this)return this["~hasTransform"];return this["~hasTransform"]=CF(B)},"~hasRef":H,get hasRef(){if("~hasRef"in this)return this["~hasRef"];return this["~hasRef"]=CF(B)}};if(B.config){if(E.config=B.config,E?.schema?.config)delete E.schema.config}if(X&&B.additionalProperties===!1)if(X===!0||X==="exactMirror")try{E.Clean=de(B,{TypeCompiler:EF,sanitize:z?.(),modules:J})}catch{console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.warn(B),E.Clean=LQ(B)}else E.Clean=LQ(B);return E.parse=(V)=>{try{return E.Decode(E.Clean?.(V)??V)}catch(R){throw[...E.Errors(V)].map(z8)}},E.safeParse=(V)=>{try{return{success:!0,data:E.Decode(E.Clean?.(V)??V),error:null}}catch(R){let N=[...L.Errors(V)].map(z8);return{success:!1,data:null,error:N[0]?.summary,errors:N}}},E}else{let E={provider:"standard",schema:B,references:"",checkFunc:()=>{},code:"",Check:(V)=>B["~standard"].validate(V),Errors(V){let R=B["~standard"].validate(V);if(R instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return R.issues},Code:()=>"",Decode(V){let R=B["~standard"].validate(V);if(R instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return R},Encode:(V)=>V,hasAdditionalProperties:!1,hasDefault:!1,isOptional:!1,hasTransform:!1,hasRef:!1};return E.parse=(V)=>{try{return E.Decode(E.Clean?.(V)??V)}catch(R){throw[...E.Errors(V)].map(z8)}},E.safeParse=(V)=>{try{return{success:!0,data:E.Decode(E.Clean?.(V)??V),error:null}}catch(R){let N=[...L.Errors(V)].map(z8);return{success:!1,data:null,error:N[0]?.summary,errors:N}}},E}let L;if(a in B){if(L=EF.Compile(B,Object.values(F).filter((E)=>(a in E))),L.provider="typebox",B.config){if(L.config=B.config,L?.schema?.config)delete L.schema.config}if(X===!0||X==="exactMirror")try{L.Clean=de(B,{TypeCompiler:EF,sanitize:z?.(),modules:J})}catch(E){console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.dir(B,{depth:null}),L.Clean=LQ(B)}else if(X==="typebox")L.Clean=LQ(B)}else L={provider:"standard",schema:B,references:"",checkFunc(E){let V=B["~standard"].validate(E);if(V instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return V},code:"",Check:(E)=>B["~standard"].validate(E),Errors(E){let V=B["~standard"].validate(E);if(V instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return V.issues},Code:()=>"",Decode(E){let V=B["~standard"].validate(E);if(V instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return V},Encode:(E)=>E,hasAdditionalProperties:!1,hasDefault:!1,isOptional:!1,hasTransform:!1,hasRef:!1};if(L.parse=(E)=>{try{return L.Decode(L.Clean?.(E)??E)}catch(V){throw[...L.Errors(E)].map(z8)}},L.safeParse=(E)=>{try{return{success:!0,data:L.Decode(L.Clean?.(E)??E),error:null}}catch(V){let R=[...L.Errors(E)].map(z8);return{success:!1,data:null,error:R[0]?.summary,errors:R}}},a in B)Object.assign(L,{get hasAdditionalProperties(){if("~hasAdditionalProperties"in this)return this["~hasAdditionalProperties"];return this["~hasAdditionalProperties"]=TA(L)},get hasDefault(){if("~hasDefault"in this)return this["~hasDefault"];return this["~hasDefault"]=JV("default",L)},get isOptional(){if("~isOptional"in this)return this["~isOptional"];return this["~isOptional"]=Y11(L)},get hasTransform(){if("~hasTransform"in this)return this["~hasTransform"];return this["~hasTransform"]=CF(B)},get hasRef(){if("~hasRef"in this)return this["~hasRef"];return this["~hasRef"]=NF(B)},"~hasRef":H});return L},Qx0=($)=>$[a]==="Union"||!$.schema&&!!$.anyOf,Kx0=($)=>{if($.length===0)return{schema:void 0,notObjects:[]};if($.length===1)return $[0].type==="object"?{schema:$[0],notObjects:[]}:{schema:void 0,notObjects:$};let F,A=[],J=!1,X=!1;for(let Y of $){if(Y.type!=="object"){A.push(Y);continue}if("additionalProperties"in Y){if(Y.additionalProperties===!0)J=!0;else if(Y.additionalProperties===!1)X=!0}if(!F){F=Y;continue}F={...F,...Y,properties:{...F.properties,...Y.properties},required:[...F?.required??[],...Y.required??[]]}}if(F){if(F.required)F.required=[...new Set(F.required)];if(X)F.additionalProperties=!1;else if(J)F.additionalProperties=!0}return{schema:F,notObjects:A}},vb1=($,{models:F={},modules:A,dynamic:J=!1,normalize:X=!1,additionalProperties:Y=!1,validators:W=[],sanitize:Z})=>{if(W=W.filter((z)=>z),!$){if(!W?.length)return;$=W[0],W=W.slice(1)}let D;if(typeof $!=="string")D=$;else if(D=A&&$ in A.$defs?A.Import($):F[$],!D)return;if(!D)return;if(a in D||"~standard"in D)return{200:B9(D,{modules:A,models:F,additionalProperties:Y,dynamic:J,normalize:X,coerce:!1,additionalCoerce:[],validators:W.map((z)=>z[200]),sanitize:Z})};let G={};return Object.keys(D).forEach((z)=>{if(isNaN(+z))return;let H=D[+z];if(typeof H==="string"){if(H in F){let U=F[H];if(!U)return;G[+z]=a in U||"~standard"in U?B9(U,{modules:A,models:F,additionalProperties:Y,dynamic:J,normalize:X,coerce:!1,additionalCoerce:[],validators:W.map((Q)=>Q[+z]),sanitize:Z}):U}return}G[+z]=a in H||"~standard"in H?B9(H,{modules:A,models:F,additionalProperties:Y,dynamic:J,normalize:X,coerce:!1,additionalCoerce:[],validators:W.map((U)=>U[+z]),sanitize:Z}):H}),G},Bx0=({validator:$,modules:F,defaultConfig:A={},config:J,dynamic:X,normalize:Y=!1,models:W,validators:Z,sanitize:D})=>{let G=$?.provider?$:B9($,{modules:F,dynamic:X,models:W,normalize:Y,additionalProperties:!0,coerce:!0,additionalCoerce:eE(),validators:Z,sanitize:D});if(G)G.config=ee(G.config,J);else G=B9(W1.Cookie(W1.Any()),{modules:F,dynamic:X,models:W,additionalProperties:!0,validators:Z,sanitize:D}),G.config=A;return G},EQ=($)=>$&&$[a]==="Import"&&$.$defs[$.$ref][a]==="Object"?$.$defs[$.$ref]:$,Q4=($,F)=>F?$:"",wx0=["json","text","urlencoded","arrayBuffer","formdata","application/json","text/plain","application/x-www-form-urlencoded","application/octet-stream","multipart/form-data"],DV=({context:$="c",trace:F=[],addFn:A})=>{if(!F.length)return()=>{return{resolveChild(){return()=>{}},resolve(){}}};for(let J=0;J<F.length;J++)A(`let report${J},reportChild${J},reportErr${J},reportErrChild${J};let trace${J}=${$}[ELYSIA_TRACE]?.[${J}]??trace[${J}](${$});
`);return(J,{name:X,total:Y=0,alias:W}={})=>{if(!X)X="anonymous";let Z=J==="error"?"reportErr":"report";for(let D=0;D<F.length;D++)if(A(`${W?"const ":""}${W??Z}${D}=trace${D}.${J}({id,event:'${J}',name:'${X}',begin:performance.now(),total:${Y}})
`),W)A(`${Z}${D}=${W}${D}
`);return{resolve(){for(let D=0;D<F.length;D++)A(`${W??Z}${D}.resolve()
`)},resolveChild(D){for(let G=0;G<F.length;G++)A(`${Z}Child${G}=${Z}${G}.resolveChild?.shift()?.({id,event:'${J}',name:'${D}',begin:performance.now()})
`);return(G)=>{for(let z=0;z<F.length;z++)if(G)A(`if(${G} instanceof Error){${Z}Child${z}?.(${G}) }else{${Z}Child${z}?.()}`);else A(`${Z}Child${z}?.()
`)}}}}},$V=({schema:$,name:F,type:A,typeAlias:J=A,normalize:X,ignoreTryCatch:Y=!1})=>{if(!X||!$.Clean)return"";if(X===!0||X==="exactMirror"){if(Y)return`${F}=validator.${J}.Clean(${F})
`;return`try{${F}=validator.${J}.Clean(${F})
}catch{}`}if(X==="typebox")return`${F}=validator.${J}.Clean(${F})
`;return""},qx0=({injectResponse:$="",normalize:F=!1,validator:A,encodeSchema:J=!1,isStaticResponse:X=!1,hasSanitize:Y=!1,allowUnsafeValidationDetails:W=!1})=>({validate:(Z,D=`c.${Z}`,G)=>`c.set.status=422;throw new ValidationError('${Z}',validator.${Z},${D},${W}${G?","+G:""})`,response:(Z="r")=>{if(X||!A.response)return"";let D=$+`
`;D+=`if(${Z} instanceof ElysiaCustomStatusResponse){c.set.status=${Z}.code
${Z}=${Z}.response}if(${Z} instanceof Response === false && typeof ${Z}?.next !== 'function' && !(${Z} instanceof ReadableStream))switch(c.set.status){`;for(let[G,z]of Object.entries(A.response)){if(D+=`
case ${G}:
`,z.provider==="standard"){D+=`let vare${G}=validator.response[${G}].Check(${Z})
if(vare${G} instanceof Promise)vare${G}=await vare${G}
if(vare${G}.issues)throw new ValidationError('response',validator.response[${G}],${Z},${W},vare${G}.issues)
${Z}=vare${G}.value
c.set.status=${G}
break
`;continue}let H=z.schema?.noValidate===!0;if(!H&&z.schema?.$ref&&z.schema?.$defs){let q=z.schema.$ref,L=typeof q==="string"&&q.includes("/")?q.split("/").pop():q;if(z.schema.$defs[L]?.noValidate===!0)H=!0}let U=H||Y,Q=({ignoreTryCatch:q=!1}={})=>$V({name:Z,schema:z,type:"response",typeAlias:`response[${G}]`,normalize:F,ignoreTryCatch:q});if(U)D+=Q();let B=!U&&F&&!H;if(J&&z.hasTransform&&!H){if(D+=`try{${Z}=validator.response[${G}].Encode(${Z})
`,!U)D+=Q({ignoreTryCatch:!0});D+=`c.set.status=${G}}catch{`+(B?`try{
`+Q({ignoreTryCatch:!0})+`${Z}=validator.response[${G}].Encode(${Z})
}catch{throw new ValidationError('response',validator.response[${G}],${Z},${W})}`:`throw new ValidationError('response',validator.response[${G}],${Z}),${W}`)+"}"}else{if(!U)D+=Q();if(!H)D+=`if(validator.response[${G}].Check(${Z})===false)throw new ValidationError('response',validator.response[${G}],${Z},${W})
c.set.status=${G}
`}D+=`break
`}return D+"}"}}),NW=($)=>{return($?.fn??$).constructor.name==="AsyncFunction"},Lx0=/=>\s?response\.clone\(/,Ex0=/(?:return|=>)\s?\S+\(|a(?:sync|wait)/,i4=($)=>{let F=typeof $==="object";if(F&&$.isAsync!==void 0)return $.isAsync;let A=F?$.fn:$;if(A.constructor.name==="AsyncFunction")return!0;let J=A.toString();if(Lx0.test(J)){if(F)$.isAsync=!1;return!1}let X=Ex0.test(J);if(F)$.isAsync=X;return X},XV=($)=>{let F=typeof $==="object";if(F&&$.hasReturn!==void 0)return $.hasReturn;let A=F?$.fn.toString():typeof $==="string"?$.toString():$.toString(),J=A.indexOf(")"),X=A.indexOf("=>",J);if(X!==-1){let W=X+2,Z;while(W<A.length&&((Z=A.charCodeAt(W))===32||Z===9||Z===10||Z===13))W++;if(W<A.length&&A.charCodeAt(W)!==123){if(F)$.hasReturn=!0;return!0}}let Y=A.includes("return");if(F)$.hasReturn=Y;return Y},VS=($)=>{let F=$?.fn??$;return F.constructor.name==="AsyncGeneratorFunction"||F.constructor.name==="GeneratorFunction"},VQ=($,F,A=!1,J=`c.${F}`)=>`try{${$}}catch(error){if(error.constructor.name === 'TransformDecodeError'){c.set.status=422
throw error.error ?? new ValidationError('${F}',validator.${F},${J},${A})}}`,_S=pb1?"setImmediate":"Promise.resolve().then",Vx0=({app:$,path:F,method:A,hooks:J,validator:X,handler:Y,allowMeta:W=!1,inference:Z})=>{let D=$["~adapter"].composeHandler,G=$["~adapter"].handler,z=typeof Y==="function";if(!z){Y=G.mapResponse(Y,{headers:$.setHeaders??{}});let u=Y instanceof Response||Y?.constructor?.name==="Response"&&typeof Y?.clone==="function";if(J.parse?.length&&J.transform?.length&&J.beforeHandle?.length&&J.afterHandle?.length){if(u)return Function("a",`"use strict";
return function(){return a.clone()}`)(Y);return Function("a",`"use strict";
return function(){return a}`)(Y)}if(u){let _=Y;Y=()=>_.clone()}}let H=z?"handler(c)":"handler",U=!!J.trace?.length,Q="";if(Z=kS(Object.assign({handler:Y},J),Z,$.config.sucrose),D.declare){let u=D.declare(Z);if(u)Q+=u}if(Z.server)Q+=`Object.defineProperty(c,'server',{get:function(){return getServer()}})
`;X.createBody?.(),X.createQuery?.(),X.createHeaders?.(),X.createParams?.(),X.createCookie?.(),X.createResponse?.();let B=!!X.body||!!X.headers||!!X.params||!!X.query||!!X.cookie||!!X.response,q=Z.query||!!X.query,L=J.parse?.length===1&&J.parse[0].fn==="none",E=A!==""&&A!=="GET"&&A!=="HEAD"&&(Z.body||!!X.body||!!J.parse?.length)&&!L,V=$.setHeaders,R=V&&!!Object.keys(V).length,N=Z.headers||!!X.headers||D.preferWebstandardHeaders!==!0&&Z.body,S=Z.cookie||!!X.cookie,C=X.cookie?.config?ee(X?.cookie?.config,$.config.cookie):$.config.cookie,M="",I=()=>{if(M)return M;if(C?.sign){if(!C.secrets)throw Error(`t.Cookie required secret which is not set in (${A}) ${F}.`);let u=!C.secrets?void 0:typeof C.secrets==="string"?C.secrets:C.secrets[0];if(M+=`const _setCookie = c.set.cookie
if(_setCookie){`,C.sign===!0)M+=`for(const [key, cookie] of Object.entries(_setCookie)){c.set.cookie[key].value=await signCookie(cookie.value,${!u?"undefined":JSON.stringify(u)})}`;else{if(typeof C.sign==="string")C.sign=[C.sign];for(let _ of C.sign)M+=`if(_setCookie[${JSON.stringify(_)}]?.value)c.set.cookie[${JSON.stringify(_)}].value=await signCookie(_setCookie[${JSON.stringify(_)}].value,${!u?"undefined":JSON.stringify(u)})
`}M+=`}
`}return M},T=$.config.normalize,j=$.config.encodeSchema,b=$.config.allowUnsafeValidationDetails,g=qx0({normalize:T,validator:X,encodeSchema:j,isStaticResponse:Y instanceof Response,hasSanitize:!!$.config.sanitize,allowUnsafeValidationDetails:b});if(N)Q+=D.headers;if(U)Q+=`const id=c[ELYSIA_REQUEST_ID]
`;let f=DV({trace:J.trace,addFn:(u)=>{Q+=u}});if(Q+="try{",S){let u=(v,m)=>{let y=C?.[v]??m;if(y===void 0)return"";if(!y)return typeof m==="string"?`${v}:"${m}",`:`${v}:${m},`;if(typeof y==="string")return`${v}:${JSON.stringify(y)},`;if(y instanceof Date)return`${v}: new Date(${y.getTime()}),`;return`${v}:${y},`},_=C?`{secrets:${C.secrets!==void 0?typeof C.secrets==="string"?JSON.stringify(C.secrets):"["+C.secrets.map((v)=>JSON.stringify(v)).join(",")+"]":"undefined"},sign:${C.sign===!0?!0:C.sign!==void 0?typeof C.sign==="string"?JSON.stringify(C.sign):"["+C.sign.map((v)=>JSON.stringify(v)).join(",")+"]":"undefined"},`+u("domain")+u("expires")+u("httpOnly")+u("maxAge")+u("path","/")+u("priority")+u("sameSite")+u("secure")+"}":"undefined";if(N)Q+=`
c.cookie=await parseCookie(c.set,c.headers.cookie,${_})
`;else Q+=`
c.cookie=await parseCookie(c.set,c.request.headers.get('cookie'),${_})
`}if(q){let u={},_={},v=!1,m=!1;if(X.query?.schema){let y=EQ(X.query?.schema);if(a in y&&y.properties)for(let[l,$1]of Object.entries(y.properties)){if(jA("ArrayQuery",$1))u[l]=!0,v=!0;if(jA("ObjectString",$1))_[l]=!0,m=!0}}Q+=`if(c.qi===-1){c.query=Object.create(null)}else{c.query=parseQueryFromURL(c.url,c.qi+1${v?","+JSON.stringify(u):m?",undefined":""}${m?","+JSON.stringify(_):""})}`}let d=typeof Y==="function"&&i4(Y),s=U||J.afterResponse?.length?"c.response=c.responseValue= ":"",n=Object.keys(X.response??{}),L1=n.length>1,X1=n.length===0||n.length===1&&n[0]==="200",M1=S||E||d||!!J.parse?.length||!!J.afterHandle?.some(i4)||!!J.beforeHandle?.some(i4)||!!J.transform?.some(i4)||!!J.mapResponse?.some(i4)||X.body?.provider==="standard"||X.headers?.provider==="standard"||X.query?.provider==="standard"||X.params?.provider==="standard"||X.cookie?.provider==="standard"||Object.values(X.response??{}).find((u)=>u.provider==="standard"),g1=(typeof Y==="function"?VS(Y):!1)||!!J.beforeHandle?.some(VS)||!!J.afterHandle?.some(VS)||!!J.transform?.some(VS),j1=Z.cookie||Z.set||N||U||L1||!X1||z&&R||g1,i1,K1=(u=!0)=>{if(i1!==void 0)return i1;if(!J.afterResponse?.length&&!U)return"";let _="";_+=`
${_S}(async()=>{if(c.responseValue){if(c.responseValue instanceof ElysiaCustomStatusResponse) c.set.status=c.responseValue.code
`+(u?`if(typeof afterHandlerStreamListener!=='undefined')for await(const v of afterHandlerStreamListener){}
`:"")+`}
`;let v=DV({trace:J.trace,addFn:(m)=>{_+=m}})("afterResponse",{total:J.afterResponse?.length});if(J.afterResponse?.length&&J.afterResponse)for(let m=0;m<J.afterResponse.length;m++){let y=v.resolveChild(J.afterResponse[m].fn.name),l=i4(J.afterResponse[m])?"await ":"";_+=`
${l}e.afterResponse[${m}](c)
`,y()}return v.resolve(),_+=`})
`,i1=_},l0=(u="r")=>{let _=K1(),v=`${j1?"mapResponse":"mapCompactResponse"}(${s}${u}${j1?",c.set":""}${I4})
`;if(!_)return`return ${v}`;return`const _res=${v}`+_+"return _res"},I4=g1&&D.mapResponseContext?`,${D.mapResponseContext}`:"";if(U||Z.route)Q+=`c.route=\`${F}\`
`;if(U||J.afterResponse?.length)Q+=`let afterHandlerStreamListener
`;let T4=f("parse",{total:J.parse?.length});if(E){let u=!!J.parse?.length||Z.body||X.body;if(D.parser.declare)Q+=D.parser.declare;Q+=`
try{`;let _=typeof J.parse==="string"?J.parse:Array.isArray(J.parse)&&J.parse.length===1?typeof J.parse[0]==="string"?J.parse[0]:typeof J.parse[0].fn==="string"?J.parse[0].fn:void 0:void 0;if(!_&&X.body&&!J.parse?.length){let v=X.body.schema;if(v&&v.anyOf&&v[a]==="Union"&&v.anyOf?.length===2&&v.anyOf?.find((m)=>m[a]==="ElysiaForm"))_="formdata"}if(_&&wx0.includes(_)){let v=f("parse",{total:J.parse?.length}),m=!!X.body?.isOptional;switch(_){case"json":case"application/json":Q+=D.parser.json(m);break;case"text":case"text/plain":Q+=D.parser.text(m);break;case"urlencoded":case"application/x-www-form-urlencoded":Q+=D.parser.urlencoded(m);break;case"arrayBuffer":case"application/octet-stream":Q+=D.parser.arrayBuffer(m);break;case"formdata":case"multipart/form-data":Q+=D.parser.formData(m);break;default:if(_[0]in $["~parser"])Q+=N?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",Q+=`
if(contentType){const index=contentType.indexOf(';')
if(index!==-1)contentType=contentType.substring(0,index)}
else{contentType=''}c.contentType=contentType
let result=parser['${_}'](c, contentType)
if(result instanceof Promise)result=await result
if(result instanceof ElysiaCustomStatusResponse)throw result
if(result!==undefined)c.body=result
delete c.contentType
`;break}v.resolve()}else if(u){Q+=`
`,Q+=`let contentType
if(c.request.body)`,Q+=N?`contentType=c.headers['content-type']
`:`contentType=c.request.headers.get('content-type')
`;let v=!1;if(J.parse?.length)Q+=`if(contentType){
const index=contentType.indexOf(';')

if(index!==-1)contentType=contentType.substring(0,index)}else{contentType=''}let used=false
c.contentType=contentType
`;else{v=!0;let y=!!X.body?.isOptional;Q+=`if(contentType)switch(contentType.charCodeAt(12)){
case 106:`+D.parser.json(y)+`break
case 120:`+D.parser.urlencoded(y)+`break
case 111:`+D.parser.arrayBuffer(y)+`break
case 114:`+D.parser.formData(y)+`break
default:if(contentType.charCodeAt(0)===116){`+D.parser.text(y)+`}break
}`}let m=f("parse",{total:J.parse?.length});if(J.parse)for(let y=0;y<J.parse.length;y++){let l=`bo${y}`;if(y!==0)Q+=`
if(!used){`;if(typeof J.parse[y].fn==="string"){let $1=m.resolveChild(J.parse[y].fn),o=!!X.body?.isOptional;switch(J.parse[y].fn){case"json":case"application/json":v=!0,Q+=D.parser.json(o);break;case"text":case"text/plain":v=!0,Q+=D.parser.text(o);break;case"urlencoded":case"application/x-www-form-urlencoded":v=!0,Q+=D.parser.urlencoded(o);break;case"arrayBuffer":case"application/octet-stream":v=!0,Q+=D.parser.arrayBuffer(o);break;case"formdata":case"multipart/form-data":v=!0,Q+=D.parser.formData(o);break;default:Q+=`let ${l}=parser['${J.parse[y].fn}'](c,contentType)
if(${l} instanceof Promise)${l}=await ${l}
if(${l}!==undefined){c.body=${l};used=true;}
`}$1()}else{let $1=m.resolveChild(J.parse[y].fn.name);Q+=`let ${l}=e.parse[${y}]
${l}=${l}(c,contentType)
if(${l} instanceof Promise)${l}=await ${l}
if(${l}!==undefined){c.body=${l};used=true}`,$1()}if(y!==0)Q+="}";if(v)break}if(m.resolve(),!v){let y=!!X.body?.isOptional;if(J.parse?.length)Q+=`
if(!used){
`;Q+=`switch(contentType){case 'application/json':
`+D.parser.json(y)+`break
case 'text/plain':`+D.parser.text(y)+`break
case 'application/x-www-form-urlencoded':`+D.parser.urlencoded(y)+`break
case 'application/octet-stream':`+D.parser.arrayBuffer(y)+`break
case 'multipart/form-data':`+D.parser.formData(y)+`break
`;for(let l of Object.keys($["~parser"]))Q+=`case '${l}':let bo${l}=parser['${l}'](c,contentType)
if(bo${l} instanceof Promise)bo${l}=await bo${l}
if(bo${l} instanceof ElysiaCustomStatusResponse){`+l0(`bo${l}`)+`}if(bo${l}!==undefined)c.body=bo${l}
break
`;if(J.parse?.length)Q+="}";Q+="}"}if(J.parse?.length)Q+=`
delete c.contentType`}Q+="}catch(error){throw new ParseError(error)}"}if(T4.resolve(),J?.transform||U){let u=f("transform",{total:J.transform?.length});if(J.transform?.length){Q+=`let transformed
`;for(let _=0;_<J.transform.length;_++){let v=J.transform[_],m=u.resolveChild(v.fn.name);if(Q+=i4(v)?`transformed=await e.transform[${_}](c)
`:`transformed=e.transform[${_}](c)
`,v.subType==="mapDerive")Q+="if(transformed instanceof ElysiaCustomStatusResponse){"+l0("transformed")+`}else{transformed.request=c.request
transformed.store=c.store
transformed.qi=c.qi
transformed.path=c.path
transformed.url=c.url
transformed.redirect=c.redirect
transformed.set=c.set
transformed.error=c.error
c=transformed}`;else Q+="if(transformed instanceof ElysiaCustomStatusResponse){"+l0("transformed")+`}else Object.assign(c,transformed)
`;m()}}u.resolve()}let b6=[];if(X){if(X.headers){if(X.headers.hasDefault)for(let[u,_]of Object.entries(t6.Default(X.headers.schema,{}))){let v=typeof _==="object"?JSON.stringify(_):typeof _==="string"?`'${_}'`:_;if(v!==void 0)Q+=`c.headers['${u}']??=${v}
`}if(Q+=$V({name:"c.headers",schema:X.headers,type:"headers",normalize:T}),X.headers.isOptional)Q+="if(isNotEmpty(c.headers)){";if(X.headers?.provider==="standard")Q+=`let vah=validator.headers.Check(c.headers)
if(vah instanceof Promise)vah=await vah
if(vah.issues){`+g.validate("headers",void 0,"vah.issues")+`}else{c.headers=vah.value}
`;else if(X.headers?.schema?.noValidate!==!0)Q+="if(validator.headers.Check(c.headers) === false){"+g.validate("headers")+"}";if(X.headers.hasTransform)Q+=VQ(`c.headers=validator.headers.Decode(c.headers)
`,"headers",b);if(X.headers.isOptional)Q+="}"}if(X.params){if(X.params.hasDefault)for(let[u,_]of Object.entries(t6.Default(X.params.schema,{}))){let v=typeof _==="object"?JSON.stringify(_):typeof _==="string"?`'${_}'`:_;if(v!==void 0)Q+=`c.params['${u}']??=${v}
`}if(X.params.provider==="standard")Q+=`let vap=validator.params.Check(c.params)
if(vap instanceof Promise)vap=await vap
if(vap.issues){`+g.validate("params",void 0,"vap.issues")+`}else{c.params=vap.value}
`;else if(X.params?.schema?.noValidate!==!0)Q+="if(validator.params.Check(c.params)===false){"+g.validate("params")+"}";if(X.params.hasTransform)Q+=VQ(`c.params=validator.params.Decode(c.params)
`,"params",b)}if(X.query){if(a in X.query?.schema&&X.query.hasDefault)for(let[u,_]of Object.entries(t6.Default(X.query.schema,{}))){let v=typeof _==="object"?JSON.stringify(_):typeof _==="string"?`'${_}'`:_;if(v!==void 0)Q+=`if(c.query['${u}']===undefined)c.query['${u}']=${v}
`}if(Q+=$V({name:"c.query",schema:X.query,type:"query",normalize:T}),X.query.isOptional)Q+="if(isNotEmpty(c.query)){";if(X.query.provider==="standard")Q+=`let vaq=validator.query.Check(c.query)
if(vaq instanceof Promise)vaq=await vaq
if(vaq.issues){`+g.validate("query",void 0,"vaq.issues")+`}else{c.query=vaq.value}
`;else if(X.query?.schema?.noValidate!==!0)Q+="if(validator.query.Check(c.query)===false){"+g.validate("query")+"}";if(X.query.hasTransform)Q+=VQ(`c.query=validator.query.Decode(c.query)
`,"query",b),Q+=VQ(`c.query=validator.query.Decode(c.query)
`,"query",b);if(X.query.isOptional)Q+="}"}if(E&&X.body){if(X.body.hasTransform||X.body.isOptional)Q+=`const isNotEmptyObject=c.body&&(typeof c.body==="object"&&(isNotEmpty(c.body)||c.body instanceof ArrayBuffer))
`;let u=Qx0(X.body.schema),_=!1;if(X.body.hasDefault){let v=t6.Default(X.body.schema,X.body.schema.type==="object"||EQ(X.body.schema)[a]==="Object"?{}:void 0),m=EQ(X.body.schema);if(!u&&v&&typeof v==="object"&&(d8("File",m)||d8("Files",m))){_=!0;for(let[l,$1]of Object.entries(v))if($1==="File"||$1==="Files")delete v[l];if(!d2(v))v=void 0}let y=typeof v==="object"?JSON.stringify(v):typeof v==="string"?`'${v}'`:v;if(v!==void 0&&v!==null)if(Array.isArray(v))Q+=`if(!c.body)c.body=${y}
`;else if(typeof v==="object")Q+=`c.body=Object.assign(${y},c.body)
`;else Q+=`c.body=${y}
`;if(Q+=$V({name:"c.body",schema:X.body,type:"body",normalize:T}),X.body.provider==="standard")Q+=`let vab=validator.body.Check(c.body)
if(vab instanceof Promise)vab=await vab
if(vab.issues){`+g.validate("body",void 0,"vab.issues")+`}else{c.body=vab.value}
`;else if(X.body?.schema?.noValidate!==!0)if(X.body.isOptional)Q+="if(isNotEmptyObject&&validator.body.Check(c.body)===false){"+g.validate("body")+"}";else Q+="if(validator.body.Check(c.body)===false){"+g.validate("body")+"}"}else if(Q+=$V({name:"c.body",schema:X.body,type:"body",normalize:T}),X.body.provider==="standard")Q+=`let vab=validator.body.Check(c.body)
if(vab instanceof Promise)vab=await vab
if(vab.issues){`+g.validate("body",void 0,"vab.issues")+`}else{c.body=vab.value}
`;else if(X.body?.schema?.noValidate!==!0)if(X.body.isOptional)Q+="if(isNotEmptyObject&&validator.body.Check(c.body)===false){"+g.validate("body")+"}";else Q+="if(validator.body.Check(c.body)===false){"+g.validate("body")+"}";if(X.body.hasTransform)Q+=VQ(`if(isNotEmptyObject)c.body=validator.body.Decode(c.body)
`,"body",b);if(u&&X.body.schema.anyOf?.length){let v=Object.values(X.body.schema.anyOf);for(let m=0;m<v.length;m++){let y=v[m];if(d8("File",y)||d8("Files",y)){let l=B9(y,{modules:$.definitions.typebox,dynamic:!$.config.aot,models:$.definitions.type,normalize:$.config.normalize,additionalCoerce:X11(),sanitize:()=>$.config.sanitize});if(l){let $1=b6.length===0,o=l.schema?.properties??y.properties;if(!o&&l.schema?.anyOf){let G6=l.schema.anyOf.find((y6)=>y6.type==="object"||(a in y6)&&y6[a]==="Object");if(G6)o=G6.properties}if(!o)continue;let B1=Object.entries(o),x1=$1?`
`:" else ";x1+=`if(fileUnions[${b6.length}].Check(c.body)){`;let d1="",N0=0;for(let G6=0;G6<B1.length;G6++){let[y6,x0]=B1[G6];if(!x0.extension||x0[a]!=="File"&&x0[a]!=="Files")continue;if(N0)d1+=",";d1+=`fileType(c.body.${y6},${JSON.stringify(x0.extension)},'body.${y6}')`,N0++}if(d1){if(N0===1)x1+=`await ${d1}
`;else if(N0>1)x1+=`await Promise.all([${d1}])
`;x1+="}",Q+=x1,b6.push(l)}}}}}else if(_||!u&&(d8("File",EQ(X.body.schema))||d8("Files",EQ(X.body.schema)))){let v="",m=0;for(let[y,l]of Object.entries(EQ(X.body.schema).properties)){if(!l.extension||l[a]!=="File"&&l[a]!=="Files")continue;if(m)v+=",";v+=`fileType(c.body.${y},${JSON.stringify(l.extension)},'body.${y}')`,m++}if(m)Q+=`
`;if(m===1)Q+=`await ${v}
`;else if(m>1)Q+=`await Promise.all([${v}])
`}}if(X.cookie){if(X.cookie.config=ee(X.cookie.config,X.cookie?.config??{}),Q+=`let cookieValue={}
for(const [key,value] of Object.entries(c.cookie))cookieValue[key]=value.value
`,X.cookie.isOptional)Q+="if(isNotEmpty(c.cookie)){";if(X.cookie.provider==="standard")Q+=`let vac=validator.cookie.Check(cookieValue)
if(vac instanceof Promise)vac=await vac
if(vac.issues){`+g.validate("cookie",void 0,"vac.issues")+`}else{cookieValue=vac.value}
`,Q+=`for(const k of Object.keys(cookieValue))c.cookie[k].value=cookieValue[k]
`;else if(X.body?.schema?.noValidate!==!0){if(Q+="if(validator.cookie.Check(cookieValue)===false){"+g.validate("cookie","cookieValue")+"}",X.cookie.hasTransform)Q+=VQ("for(const [key,value] of Object.entries(validator.cookie.Decode(cookieValue))){c.cookie[key].cookie.value = value}","cookie",b)}if(X.cookie.isOptional)Q+="}"}}if(J?.beforeHandle||U){let u=f("beforeHandle",{total:J.beforeHandle?.length}),_=!1;if(J.beforeHandle?.length)for(let v=0;v<J.beforeHandle.length;v++){let m=J.beforeHandle[v],y=u.resolveChild(m.fn.name),l=XV(m);if(m.subType==="resolve"||m.subType==="mapResolve"){if(!_)_=!0,Q+=`
let resolved
`;if(Q+=i4(m)?`resolved=await e.beforeHandle[${v}](c);
`:`resolved=e.beforeHandle[${v}](c);
`,m.subType==="mapResolve")Q+="if(resolved instanceof ElysiaCustomStatusResponse){"+l0("resolved")+`}else{resolved.request=c.request
resolved.store=c.store
resolved.qi=c.qi
resolved.path=c.path
resolved.url=c.url
resolved.redirect=c.redirect
resolved.set=c.set
resolved.error=c.error
c=resolved}`;else Q+="if(resolved instanceof ElysiaCustomStatusResponse){"+l0("resolved")+`}else Object.assign(c, resolved)
`;y()}else if(!l)Q+=i4(m)?`await e.beforeHandle[${v}](c)
`:`e.beforeHandle[${v}](c)
`,y();else{if(Q+=i4(m)?`be=await e.beforeHandle[${v}](c)
`:`be=e.beforeHandle[${v}](c)
`,y("be"),Q+="if(be!==undefined){",u.resolve(),J.afterHandle?.length||U){f("handle",{name:z?Y.name:void 0}).resolve();let o=f("afterHandle",{total:J.afterHandle?.length});if(J.afterHandle?.length)for(let B1=0;B1<J.afterHandle.length;B1++){let x1=J.afterHandle[B1],d1=XV(x1),N0=o.resolveChild(x1.fn.name);if(Q+=`c.response=c.responseValue=be
`,!d1)Q+=i4(x1.fn)?`await e.afterHandle[${B1}](c, be)
`:`e.afterHandle[${B1}](c, be)
`;else Q+=i4(x1.fn)?`af=await e.afterHandle[${B1}](c)
`:`af=e.afterHandle[${B1}](c)
`,Q+=`if(af!==undefined) c.response=c.responseValue=be=af
`;N0("af")}o.resolve()}if(X.response)Q+=g.response("be");let $1=f("mapResponse",{total:J.mapResponse?.length});if(J.mapResponse?.length){Q+=`c.response=c.responseValue=be
`;for(let o=0;o<J.mapResponse.length;o++){let B1=J.mapResponse[o],x1=$1.resolveChild(B1.fn.name);Q+=`if(mr===undefined){mr=${NW(B1)?"await ":""}e.mapResponse[${o}](c)
if(mr!==undefined)be=c.response=c.responseValue=mr}`,x1()}}$1.resolve(),Q+=K1(),Q+=I(),Q+=`return mapEarlyResponse(${s}be,c.set${I4})}
`}}u.resolve()}function c2(u){let _=f("handle",{name:u,alias:"reportHandler"});return()=>{if(U)Q+='if(r&&(r[Symbol.iterator]||r[Symbol.asyncIterator])&&typeof r.next==="function"){'+(M1?"":"(async()=>{")+`const stream=await tee(r,3)
r=stream[0]
const listener=stream[1]
`+(U||J.afterResponse?.length?`afterHandlerStreamListener=stream[2]
`:"")+`${_S}(async ()=>{if(listener)for await(const v of listener){}
`,_.resolve(),Q+="})"+(M1?"":"})()")+"}else{",_.resolve(),Q+=`}
`}}if(J.afterHandle?.length||U){let u=c2(z?Y.name:void 0);if(J.afterHandle?.length)Q+=d?`let r=c.response=c.responseValue=await ${H}
`:`let r=c.response=c.responseValue=${H}
`;else Q+=d?`let r=await ${H}
`:`let r=${H}
`;u();let _=f("afterHandle",{total:J.afterHandle?.length});if(J.afterHandle?.length)for(let m=0;m<J.afterHandle.length;m++){let y=J.afterHandle[m],l=XV(y),$1=_.resolveChild(y.fn.name);if(!l)Q+=i4(y.fn)?`await e.afterHandle[${m}](c)
`:`e.afterHandle[${m}](c)
`,$1();else if(Q+=i4(y.fn)?`af=await e.afterHandle[${m}](c)
`:`af=e.afterHandle[${m}](c)
`,$1("af"),X.response)Q+="if(af!==undefined){",_.resolve(),Q+=g.response("af"),Q+="c.response=c.responseValue=af}";else Q+="if(af!==undefined){",_.resolve(),Q+="c.response=c.responseValue=af}"}if(_.resolve(),J.afterHandle?.length)Q+=`r=c.response
`;if(X.response)Q+=g.response();Q+=I();let v=f("mapResponse",{total:J.mapResponse?.length});if(J.mapResponse?.length)for(let m=0;m<J.mapResponse.length;m++){let y=J.mapResponse[m],l=v.resolveChild(y.fn.name);Q+=`mr=${NW(y)?"await ":""}e.mapResponse[${m}](c)
if(mr!==undefined)r=c.response=c.responseValue=mr
`,l()}v.resolve(),Q+=l0()}else{let u=c2(z?Y.name:void 0);if(X.response||J.mapResponse?.length||U){if(Q+=d?`let r=await ${H}
`:`let r=${H}
`,u(),X.response)Q+=g.response();let _=f("mapResponse",{total:J.mapResponse?.length});if(J.mapResponse?.length){Q+=`
c.response=c.responseValue=r
`;for(let v=0;v<J.mapResponse.length;v++){let m=J.mapResponse[v],y=_.resolveChild(m.fn.name);Q+=`
if(mr===undefined){mr=${NW(m)?"await ":""}e.mapResponse[${v}](c)
if(mr!==undefined)r=c.response=c.responseValue=mr}
`,y()}}if(_.resolve(),Q+=I(),Y instanceof Response)Q+=K1(),Q+=Z.set?`if(isNotEmpty(c.set.headers)||c.set.status!==200||c.set.redirect||c.set.cookie)return mapResponse(${s}${H}.clone(),c.set${I4})
else return ${H}.clone()`:`return ${H}.clone()`,Q+=`
`;else Q+=l0()}else if(S||U){Q+=d?`let r=await ${H}
`:`let r=${H}
`,u();let _=f("mapResponse",{total:J.mapResponse?.length});if(J.mapResponse?.length){Q+=`c.response=c.responseValue= r
`;for(let v=0;v<J.mapResponse.length;v++){let m=J.mapResponse[v],y=_.resolveChild(m.fn.name);Q+=`if(mr===undefined){mr=${NW(m)?"await ":""}e.mapResponse[${v}](c)
if(mr!==undefined)r=c.response=c.responseValue=mr}`,y()}}_.resolve(),Q+=I()+l0()}else{u();let _=d?`await ${H}`:H;if(Y instanceof Response)Q+=K1(),Q+=Z.set?`if(isNotEmpty(c.set.headers)||c.set.status!==200||c.set.redirect||c.set.cookie)return mapResponse(${s}${H}.clone(),c.set${I4})
else return ${H}.clone()
`:`return ${H}.clone()
`;else Q+=l0(_)}}if(Q+=`
}catch(error){`,!M1&&J.error?.length)Q+="return(async()=>{";if(Q+=`const set=c.set
if(!set.status||set.status<300)set.status=error?.status||500
`,S)Q+=I();if(U&&J.trace)for(let u=0;u<J.trace.length;u++)Q+=`report${u}?.resolve(error);reportChild${u}?.(error)
`;let h=f("error",{total:J.error?.length});if(J.error?.length){if(Q+=`c.error=error
`,B)Q+=`if(error instanceof TypeBoxError){c.code="VALIDATION"
c.set.status=422}else{c.code=error.code??error[ERROR_CODE]??"UNKNOWN"}`;else Q+=`c.code=error.code??error[ERROR_CODE]??"UNKNOWN"
`;if(Q+=`let er
`,J.mapResponse?.length)Q+=`let mep
`;for(let u=0;u<J.error.length;u++){let _=h.resolveChild(J.error[u].fn.name);if(i4(J.error[u]))Q+=`er=await e.error[${u}](c)
`;else Q+=`er=e.error[${u}](c)
if(er instanceof Promise)er=await er
`;if(_(),J.mapResponse?.length){let v=f("mapResponse",{total:J.mapResponse?.length});for(let m=0;m<J.mapResponse.length;m++){let y=J.mapResponse[m],l=v.resolveChild(y.fn.name);Q+=`c.response=c.responseValue=er
mep=e.mapResponse[${m}](c)
if(mep instanceof Promise)er=await er
if(mep!==undefined)er=mep
`,l()}v.resolve()}if(Q+=`er=mapEarlyResponse(er,set${I4})
`,Q+="if(er){",U&&J.trace){for(let v=0;v<J.trace.length;v++)Q+=`report${v}.resolve()
`;h.resolve()}Q+=K1(!1),Q+="return er}"}}if(h.resolve(),Q+="return handleError(c,error,true)",!M1&&J.error?.length)Q+="})()";Q+="}";let c=D.inject?Object.keys(D.inject).join(",")+",":"",k="const {handler,handleError,hooks:e, "+Q4("validator,",B)+"mapResponse,mapCompactResponse,mapEarlyResponse,isNotEmpty,utils:{"+Q4("parseQuery,",E)+Q4("parseQueryFromURL,",q)+"},error:{"+Q4("ValidationError,",B)+Q4("ParseError",E)+"},fileType,schema,definitions,tee,ERROR_CODE,"+Q4("parseCookie,",S)+Q4("signCookie,",S)+Q4("decodeURIComponent,",q)+"ElysiaCustomStatusResponse,"+Q4("ELYSIA_TRACE,",U)+Q4("ELYSIA_REQUEST_ID,",U)+Q4("parser,",J.parse?.length)+Q4("getServer,",Z.server)+Q4("fileUnions,",b6.length)+c+Q4("TypeBoxError",B)+`}=hooks
const trace=e.trace
return ${M1?"async ":""}function handle(c){`;if(J.beforeHandle?.length)k+=`let be
`;if(J.afterHandle?.length)k+=`let af
`;if(J.mapResponse?.length)k+=`let mr
`;if(W)k+=`c.schema=schema
c.defs=definitions
`;Q=k+Q+"}",k="";try{return Function("hooks",`"use strict";
`+Q)({handler:Y,hooks:Nb1(J),validator:B?X:void 0,handleError:$.handleError,mapResponse:G.mapResponse,mapCompactResponse:G.mapCompactResponse,mapEarlyResponse:G.mapEarlyResponse,isNotEmpty:d2,utils:{parseQuery:E?CQ:void 0,parseQueryFromURL:q?X.query?.provider==="standard"?Wx0:Wx1:void 0},error:{ValidationError:B?L6:void 0,ParseError:E?ab1:void 0},fileType:tb1,schema:$.router.history,definitions:$.definitions.type,tee:Jx0,ERROR_CODE:RS,parseCookie:S?Ax1:void 0,signCookie:S?PS:void 0,Cookie:S?kA:void 0,decodeURIComponent:q?Yx0.default:void 0,ElysiaCustomStatusResponse:y9,ELYSIA_TRACE:U?fS:void 0,ELYSIA_REQUEST_ID:U?HV:void 0,getServer:Z.server?()=>$.getServer():void 0,fileUnions:b6.length?b6:void 0,TypeBoxError:B?z0:void 0,parser:$["~parser"],...D.inject})}catch(u){let _=Nb1(J);if(console.log("[Composer] failed to generate optimized handler"),console.log("---"),console.log({handler:typeof Y==="function"?Y.toString():Y,instruction:Q,hooks:{..._,transform:_?.transform?.map?.((v)=>v.toString()),resolve:_?.resolve?.map?.((v)=>v.toString()),beforeHandle:_?.beforeHandle?.map?.((v)=>v.toString()),afterHandle:_?.afterHandle?.map?.((v)=>v.toString()),mapResponse:_?.mapResponse?.map?.((v)=>v.toString()),parse:_?.parse?.map?.((v)=>v.toString()),error:_?.error?.map?.((v)=>v.toString()),afterResponse:_?.afterResponse?.map?.((v)=>v.toString()),stop:_?.stop?.map?.((v)=>v.toString())},validator:X,definitions:$.definitions.type,error:u}),console.log("---"),typeof process?.exit==="function")process.exit(1);return()=>new Response("Internal Server Error",{status:500})}},zx1=($,F)=>{let A="",J=DV({trace:$.event.trace,addFn:F??((X)=>{A+=X})})("request",{total:$.event.request?.length});if($.event.request?.length){A+="try{";for(let X=0;X<$.event.request.length;X++){let Y=$.event.request[X],W=XV(Y),Z=i4(Y),D=J.resolveChild($.event.request[X].fn.name);if(W)A+=`re=mapEarlyResponse(${Z?"await ":""}onRequest[${X}](c),c.set)
`,D("re"),A+=`if(re!==undefined)return re
`;else A+=`${Z?"await ":""}onRequest[${X}](c)
`,D()}A+="}catch(error){return app.handleError(c,error,false)}"}return J.resolve(),A},Hx1=($,F="map")=>{let A=$.extender.higherOrderFunctions;if(!A.length)return"return "+F;let J=$["~adapter"].composeGeneralHandler,X=F;for(let Y=0;Y<A.length;Y++)X=`hoc[${Y}](${X},${J.parameters})`;return`return function hocMap(${J.parameters}){return ${X}(${J.parameters})}`},re=($)=>{let F=$["~adapter"].composeGeneralHandler;$.router.http.build();let A=$["~adapter"].isWebStandard,J=$.event.trace?.length,X="",Y=$.router,W=Y.http.root.WS?"const route=router.find(r.method==='GET'&&r.headers.get('upgrade')==='websocket'?'WS':r.method,p)":"const route=router.find(r.method,p)";if(W+=Y.http.root.ALL?`??router.find('ALL',p)
`:`
`,A)W+='if(r.method==="HEAD"){const route=router.find("GET",p);if(route){c.params=route.params;const _res=route.store.handler?route.store.handler(c):route.store.compile()(c);if(_res)return Promise.resolve(_res).then((_res)=>{if(!_res.headers)_res.headers=new Headers();return getResponseLength(_res).then((length)=>{_res.headers.set("content-length", length);return new Response(null,{status:_res.status,statusText:_res.statusText,headers:_res.headers});})});}}';let Z=`c.error=notFound
`;if($.event.afterResponse?.length&&!$.event.error){Z=`
c.error=notFound
`;let B=$.event.afterResponse.some(i4)?"async":"";Z+=`
${_S}(${B}()=>{if(c.responseValue instanceof ElysiaCustomStatusResponse) c.set.status=c.responseValue.code
`;for(let q=0;q<$.event.afterResponse.length;q++){let L=$.event.afterResponse[q].fn;Z+=`
${NW(L)?"await ":""}afterResponse[${q}](c)
`}Z+=`})
`}if($.inference.query)Z+=`
if(c.qi===-1){c.query={}}else{c.query=parseQueryFromURL(c.url,c.qi+1)}`;let D=F.error404(!!$.event.request?.length,!!$.event.error?.length,Z);W+=D.code,W+=`
c.params=route.params
if(route.store.handler)return route.store.handler(c)
return route.store.compile()(c)
`;let G="";for(let[B,q]of Object.entries(Y.static)){if(G+=`case'${B}':`,$.config.strictPath!==!0)G+=`case'${tE(B)}':`;let L=sE(B);if(B!==L)G+=`case'${L}':`;if(G+="switch(r.method){","GET"in q||"WS"in q){if(G+="case 'GET':","WS"in q){if(G+=`if(r.headers.get('upgrade')==='websocket')return ht[${q.WS}].composed(c)
`,"GET"in q===!1)if("ALL"in q)G+=`return ht[${q.ALL}].composed(c)
`;else G+=`break map
`}if("GET"in q)G+=`return ht[${q.GET}].composed(c)
`}if(A&&(("GET"in q)||("ALL"in q))&&"HEAD"in q===!1)G+=`case 'HEAD':return Promise.resolve(ht[${q.GET??q.ALL}].composed(c)).then(_ht=>getResponseLength(_ht).then((length)=>{_ht.headers.set('content-length', length)
return new Response(null,{status:_ht.status,statusText:_ht.statusText,headers:_ht.headers})
}))
`;for(let[E,V]of Object.entries(q)){if(E==="ALL"||E==="GET"||E==="WS")continue;G+=`case '${E}':return ht[${V}].composed(c)
`}if("ALL"in q)G+=`default:return ht[${q.ALL}].composed(c)
`;else G+=`default:break map
`;G+="}"}let z=!!$.event.request?.some(i4),H=F.inject?Object.keys(F.inject).join(",")+",":"";if(X+=`
const {app,mapEarlyResponse,NotFoundError,randomId,handleError,status,redirect,getResponseLength,ElysiaCustomStatusResponse,`+Q4("parseQueryFromURL,",$.inference.query)+Q4("ELYSIA_TRACE,",J)+Q4("ELYSIA_REQUEST_ID,",J)+H+`}=data
const store=app.singleton.store
const decorator=app.singleton.decorator
const staticRouter=app.router.static.http
const ht=app.router.history
const router=app.router.http
const trace=app.event.trace?.map(x=>typeof x==='function'?x:x.fn)??[]
const notFound=new NotFoundError()
const hoc=app.extender.higherOrderFunctions.map(x=>x.fn)
`,$.event.request?.length)X+=`const onRequest=app.event.request.map(x=>x.fn)
`;if($.event.afterResponse?.length)X+=`const afterResponse=app.event.afterResponse.map(x=>x.fn)
`;if(X+=D.declare,$.event.trace?.length)X+="const "+$.event.trace.map((B,q)=>`tr${q}=app.event.trace[${q}].fn`).join(",")+`
`;if(X+=`${z?"async ":""}function map(${F.parameters}){`,$.event.request?.length)X+=`let re
`;if(X+=F.createContext($),$.event.trace?.length)X+="c[ELYSIA_TRACE]=["+$.event.trace.map((B,q)=>`tr${q}(c)`).join(",")+`]
`;if(X+=zx1($),G)X+=`
map: switch(p){
`+G+"}";X+=W+`}
`+Hx1($);let U=U11($);$.handleError=U;let Q=Function("data",`"use strict";
`+X)({app:$,mapEarlyResponse:$["~adapter"].handler.mapEarlyResponse,NotFoundError:D11,randomId:WV,handleError:U,status:IQ,redirect:gS,getResponseLength:Sb0,ElysiaCustomStatusResponse:y9,parseQueryFromURL:$.inference.query?Wx1:void 0,ELYSIA_TRACE:J?fS:void 0,ELYSIA_REQUEST_ID:J?HV:void 0,...F.inject});if(RQ)Bun.gc(!1);return Q},U11=($)=>{let F=$.event,A="",J=$["~adapter"].composeError,X=J.inject?Object.keys(J.inject).join(",")+",":"",Y=!!$.event.trace?.length;if(A+="const {mapResponse,ERROR_CODE,ElysiaCustomStatusResponse,ValidationError,TransformDecodeError,"+Q4("onError,",$.event.error)+Q4("afterResponse,",$.event.afterResponse)+Q4("trace,",$.event.trace)+Q4("onMapResponse,",$.event.mapResponse)+Q4("ELYSIA_TRACE,",Y)+Q4("ELYSIA_REQUEST_ID,",Y)+X+`}=inject
`,A+="return async function(context,error,skipGlobal){",A+="",Y)A+=`const id=context[ELYSIA_REQUEST_ID]
`;let W=DV({context:"context",trace:F.trace,addFn:(H)=>{A+=H}}),Z=()=>{if(!F.afterResponse?.length&&!Y)return"";let H="",U=F.afterResponse?.some(i4)?"async":"";H+=`
${_S}(${U}()=>{`;let Q=DV({context:"context",trace:F.trace,addFn:(B)=>{H+=B}})("afterResponse",{total:F.afterResponse?.length,name:"context"});if(F.afterResponse?.length&&F.afterResponse)for(let B=0;B<F.afterResponse.length;B++){let q=F.afterResponse[B].fn,L=Q.resolveChild(q.name);H+=`
${NW(q)?"await ":""}afterResponse[${B}](context)
`,L()}return Q.resolve(),H+=`})
`,H};if(A+=`const set=context.set
let _r
if(!context.code)context.code=error.code??error[ERROR_CODE]
if(!(context.error instanceof Error))context.error=error
if(error instanceof ElysiaCustomStatusResponse){set.status=error.status=error.code
error.message=error.response}`,J.declare)A+=J.declare;let D=Y||!!F.afterResponse?.length?"context.response = ":"";if(A+=`if(typeof error?.toResponse==='function'&&!(error instanceof ValidationError)&&!(error instanceof TransformDecodeError)){try{let raw=error.toResponse()
if(typeof raw?.then==='function')raw=await raw
if(raw instanceof Response)set.status=raw.status
context.response=context.responseValue=raw
}catch(toResponseError){
}
}
`,$.event.error)for(let H=0;H<$.event.error.length;H++){let U=$.event.error[H],Q=`${i4(U)?"await ":""}onError[${H}](context)
`;if(A+="if(skipGlobal!==true&&!context.response){",XV(U)){A+=`_r=${Q}
if(_r!==undefined){if(_r instanceof Response){`+Z()+`return mapResponse(_r,set${J.mapResponseContext})}if(_r instanceof ElysiaCustomStatusResponse){error.status=error.code
error.message=error.response}if(set.status===200||!set.status)set.status=error.status
`;let B=W("mapResponse",{total:F.mapResponse?.length,name:"context"});if(F.mapResponse?.length)for(let q=0;q<F.mapResponse.length;q++){let L=F.mapResponse[q],E=B.resolveChild(L.fn.name);A+=`context.response=context.responseValue=_r
_r=${NW(L)?"await ":""}onMapResponse[${q}](context)
`,E()}B.resolve(),A+=Z()+`return mapResponse(${D}_r,set${J.mapResponseContext})}`}else A+=Q;A+="}"}A+=`if(error instanceof ValidationError||error instanceof TransformDecodeError){
if(error.error)error=error.error
set.status=error.status??422
`+Z()+J.validationError+`
}
`,A+="if(!context.response&&error instanceof Error){"+Z()+J.unknownError+`
}`;let G=W("mapResponse",{total:F.mapResponse?.length,name:"context"});if(A+=`
if(!context.response)context.response=context.responseValue=error.message??error
`,F.mapResponse?.length){A+=`let mr
`;for(let H=0;H<F.mapResponse.length;H++){let U=F.mapResponse[H],Q=G.resolveChild(U.fn.name);A+=`if(mr===undefined){mr=${NW(U)?"await ":""}onMapResponse[${H}](context)
if(mr!==undefined)error=context.response=context.responseValue=mr}`,Q()}}G.resolve(),A+=Z()+`
return mapResponse(${D}error,set${J.mapResponseContext})}`;let z=(H)=>typeof H==="function"?H:H.fn;return Function("inject",`"use strict";
`+A)({mapResponse:$["~adapter"].handler.mapResponse,ERROR_CODE:RS,ElysiaCustomStatusResponse:y9,ValidationError:L6,TransformDecodeError:tD,onError:$.event.error?.map(z),afterResponse:$.event.afterResponse?.map(z),trace:$.event.trace?.map(z),onMapResponse:$.event.mapResponse?.map(z),ELYSIA_TRACE:Y?fS:void 0,ELYSIA_REQUEST_ID:Y?HV:void 0,...J.inject})};function Nx0(){try{if(typeof caches<"u"&&typeof caches.default<"u")return!0;if(typeof WebSocketPair<"u")return!0}catch{return!1}return!1}var k12={...PQ,name:"cloudflare-worker",composeGeneralHandler:{...PQ.composeGeneralHandler,error404($,F,A){let{code:J}=PQ.composeGeneralHandler.error404($,F,A);return{code:J,declare:F?"":`const error404Message=notFound.message.toString()
const error404={clone:()=>new Response(error404Message,{status:404})}
`}}},beforeCompile($){$.handleError=U11($);for(let F of $.routes)F.compile()},listen(){return()=>{console.warn("Cloudflare Worker does not support listen method. Please export default Elysia instance instead.")}}},Cx0=($)=>{if($.startsWith("async"))$=$.slice(5);$=$.trimStart();let F=-1;if($.charCodeAt(0)===40){if(F=$.indexOf("=>",$.indexOf(")")),F!==-1){let X=F;while(X>0)if($.charCodeAt(--X)===41)break;let Y=$.slice(F+2);if(Y.charCodeAt(0)===32)Y=Y.trimStart();return[$.slice(1,X),Y,{isArrowReturn:Y.charCodeAt(0)!==123}]}}if(/^(\w+)=>/g.test($)){if(F=$.indexOf("=>"),F!==-1){let X=$.slice(F+2);if(X.charCodeAt(0)===32)X=X.trimStart();return[$.slice(0,F),X,{isArrowReturn:X.charCodeAt(0)!==123}]}}if($.startsWith("function")){F=$.indexOf("(");let X=$.indexOf(")");return[$.slice(F+1,X),$.slice(X+2),{isArrowReturn:!1}]}let A=$.indexOf("(");if(A!==-1){let X=$.indexOf(`
`,2),Y=$.slice(0,X),W=Y.lastIndexOf(")")+1,Z=$.slice(X+1);return[Y.slice(A,W),"{"+Z,{isArrowReturn:!1}]}let J=$.split(`
`,2);return[J[0],J[1],{isArrowReturn:!1}]},Mx0=($)=>{let F=$.indexOf("{");if(F===-1)return[-1,0];let A=F+1,J=1;for(;A<$.length;A++){let X=$.charCodeAt(A);if(X===123)J++;else if(X===125)J--;if(J===0)break}if(J!==0)return[0,$.length];return[F,A+1]},Px0=($)=>{let F=$.lastIndexOf("}");if(F===-1)return[-1,0];let A=F-1,J=1;for(;A>=0;A--){let X=$.charCodeAt(A);if(X===125)J++;else if(X===123)J--;if(J===0)break}if(J!==0)return[-1,0];return[A,F+1]},Ux1=($)=>{while(!0){let F=$.indexOf(":");if(F===-1)break;let A=$.indexOf(",",F);if(A===-1)A=$.indexOf("}",F)-1;if(A===-2)A=$.length;$=$.slice(0,F)+$.slice(A)}return $},Qx1=($)=>{let F=!1;if($.charCodeAt(0)===40)$=$.slice(1,-1);if($.charCodeAt(0)===123)F=!0,$=$.slice(1,-1);$=$.replace(/( |\t|\n)/g,"").trim();let A=[];while(!0){let[X,Y]=Mx0($);if(X===-1)break;if(A.push($.slice(0,X-1)),$.charCodeAt(Y)===44)Y++;$=$.slice(Y)}if($=Ux1($),$)A=A.concat($.split(","));let J=Object.create(null);for(let X of A){if(X.indexOf(",")===-1){J[X]=!0;continue}for(let Y of X.split(","))J[Y.trim()]=!0}return{hasParenthesis:F,parameters:J}},Rx0=($,F)=>{let{parameters:A,hasParenthesis:J}=Qx1($);if(A.query)F.query=!0;if(A.headers)F.headers=!0;if(A.body)F.body=!0;if(A.cookie)F.cookie=!0;if(A.set)F.set=!0;if(A.server)F.server=!0;if(A.route)F.route=!0;if(A.url)F.url=!0;if(A.path)F.path=!0;if(J)return`{ ${Object.keys(A).join(", ")} }`;return Object.keys(A).join(", ")},yb1=($,F,A)=>{let J=new RegExp(`${$.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}[\\n\\t,; ]`);if(A!==void 0)J.lastIndex=A;let X=J.exec(F);return X?X.index:-1},Kx1=($,F,A=0)=>{if(A>5)return[];let J=[],X=F;while(!0){let Y=yb1(" = "+$,X);if(Y===-1)Y=yb1("="+$,X);if(Y===-1){let G=X.indexOf(" = "+$);if(G===-1)G=X.indexOf("="+$);if(G+3+$.length!==X.length)break;Y=G}let W=X.slice(0,Y),Z=W.lastIndexOf(" "),D=W.slice(Z!==-1?Z+1:-1);if(D==="}"){let[G,z]=Px0(W);J.push(Ux1(X.slice(G,z))),X=X.slice(Y+3+$.length);continue}while(D.charCodeAt(0)===44)D=D.slice(1);while(D.charCodeAt(0)===9)D=D.slice(1);if(!D.includes("("))J.push(D);X=X.slice(Y+3+$.length)}for(let Y of J){if(Y.charCodeAt(0)===123)continue;let W=Kx1(Y,F);if(W.length>0)J.push(...W)}return J},Ix0=($)=>{if(!$)return;if($.charCodeAt(0)!==123)return $;if($=$.slice(2,-2),!$.includes(",")){if($.indexOf("...")!==-1)return $.slice($.indexOf("...")+3);return}let F=$.indexOf("...");if(F===-1)return;return $.slice(F+3).trimEnd()},Tx0=($,F,A)=>{let J=(X,Y)=>new RegExp(`${Y}\\.(${X})|${Y}\\["${X}"\\]|${Y}\\['${X}'\\]`).test($);for(let X of F){if(!X)continue;if(X.charCodeAt(0)===123){let Y=Qx1(X).parameters;if(Y.query)A.query=!0;if(Y.headers)A.headers=!0;if(Y.body)A.body=!0;if(Y.cookie)A.cookie=!0;if(Y.set)A.set=!0;if(Y.server)A.server=!0;if(Y.url)A.url=!0;if(Y.route)A.route=!0;if(Y.path)A.path=!0;continue}if(!A.query&&(J("query",X)||$.includes("return "+X)||$.includes("return "+X+".query")))A.query=!0;if(!A.headers&&J("headers",X))A.headers=!0;if(!A.body&&J("body",X))A.body=!0;if(!A.cookie&&J("cookie",X))A.cookie=!0;if(!A.set&&J("set",X))A.set=!0;if(!A.server&&J("server",X))A.server=!0;if(!A.route&&J("route",X))A.route=!0;if(!A.url&&J("url",X))A.url=!0;if(!A.path&&J("path",X))A.path=!0;if(A.query&&A.headers&&A.body&&A.cookie&&A.set&&A.server&&A.route&&A.url&&A.path)break}return F},jx0=($,F,A)=>{try{let J=new RegExp(`\\w\\((?:.*?)?${$}(?:.*?)?\\)`,"gs"),X=new RegExp(`${$}(,|\\))`,"gs"),Y=F.length,W;W=J.exec(F)+"";while(J.lastIndex!==0&&J.lastIndex<Y+(W?W.length:0)){if(W&&X.test(W))return A.query=!0,A.headers=!0,A.body=!0,A.cookie=!0,A.set=!0,A.server=!0,A.url=!0,A.route=!0,A.path=!0,!0;W=J.exec(F)+""}let Z=F.charCodeAt(J.lastIndex);if(Z===41||Z===44)return A.query=!0,A.headers=!0,A.body=!0,A.cookie=!0,A.set=!0,A.server=!0,A.url=!0,A.route=!0,A.path=!0,!0;return!1}catch(J){return console.log("[Sucrose] warning: unexpected isContextPassToFunction error, you may continue development as usual but please report the following to maintainers:"),console.log("--- body ---"),console.log(F),console.log("--- context ---"),console.log($),!0}},rE,NS={},Ox0=($)=>{if($===null||Nx0())return;if($===void 0)$=295000;if(rE)clearTimeout(rE);rE=setTimeout(()=>{if(NS={},rE=void 0,RQ)Bun.gc(!1)},$),rE.unref?.()},W11=($,F)=>{return{body:$.body||F.body,cookie:$.cookie||F.cookie,headers:$.headers||F.headers,query:$.query||F.query,set:$.set||F.set,server:$.server||F.server,url:$.url||F.url,route:$.route||F.route,path:$.path||F.path}},kS=($,F={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1,url:!1,route:!1,path:!1},A={})=>{let J=[];if($.request?.length)J.push(...$.request);if($.beforeHandle?.length)J.push(...$.beforeHandle);if($.parse?.length)J.push(...$.parse);if($.error?.length)J.push(...$.error);if($.transform?.length)J.push(...$.transform);if($.afterHandle?.length)J.push(...$.afterHandle);if($.mapResponse?.length)J.push(...$.mapResponse);if($.afterResponse?.length)J.push(...$.afterResponse);if($.handler&&typeof $.handler==="function")J.push($.handler);for(let X=0;X<J.length;X++){let Y=J[X];if(!Y)continue;let W=typeof Y==="object"?Y.fn:Y;if(typeof W!=="function")continue;let Z=W.toString(),D=aE(Z),G=NS[D];if(G){F=W11(F,G);continue}Ox0(A.gcTime);let z={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1,url:!1,route:!1,path:!1},[H,U]=Cx0(Z),Q=Rx0(H,z),B=Ix0(Q);if(B){let q=Kx1(B,U.slice(1,-1));q.splice(0,-1,B);let L=U;if(L.charCodeAt(0)===123&&L.charCodeAt(U.length-1)===125)L=L.slice(1,-1).trim();if(!jx0(B,L,z))Tx0(L,q,z);if(!z.query&&L.includes("return "+B+".query"))z.query=!0}if(!NS[D])NS[D]=z;if(F=W11(F,z),F.query&&F.headers&&F.body&&F.cookie&&F.set&&F.server&&F.url&&F.route&&F.path)break}return F},N3=($,F,A)=>{if(d2(F.headers)||F.status!==200||F.cookie)switch(QV(F),$?.constructor?.name){case"String":return new Response($,F);case"Array":case"Object":return F.headers["content-type"]="application/json",new Response(JSON.stringify($),F);case"ElysiaFile":return B4($.value,F);case"File":return B4($,F);case"Blob":return B4($,F);case"ElysiaCustomStatusResponse":return F.status=$.code,N3($.response,F,A);case void 0:if(!$)return new Response("",F);return new Response(JSON.stringify($),F);case"Response":return bS($,F,A);case"Error":return CW($,F);case"Promise":return $.then((J)=>N3(J,F,A));case"Function":return N3($(),F,A);case"Number":case"Boolean":return new Response($.toString(),F);case"Cookie":if($ instanceof kA)return new Response($.value,F);return new Response($?.toString(),F);case"FormData":return new Response($,F);default:if($ instanceof Response)return bS($,F,A);if($ instanceof Promise)return $.then((J)=>N3(J,F));if($ instanceof Error)return CW($,F);if($ instanceof y9)return F.status=$.code,N3($.response,F,A);if(typeof $?.next==="function"||$ instanceof ReadableStream)return GV($,F,A);if(typeof $?.then==="function")return $.then((J)=>N3(J,F));if(typeof $?.toResponse==="function")return N3($.toResponse(),F);if("charCodeAt"in $){let J=$.charCodeAt(0);if(J===123||J===91){if(!F.headers["Content-Type"])F.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),F)}}return new Response($,F)}if(typeof $?.next==="function"||$ instanceof ReadableStream)return GV($,F,A);return _A($,A)},V3=($,F,A)=>{if($===void 0||$===null)return;if(d2(F.headers)||F.status!==200||F.cookie)switch(QV(F),$?.constructor?.name){case"String":return new Response($,F);case"Array":case"Object":return F.headers["content-type"]="application/json",new Response(JSON.stringify($),F);case"ElysiaFile":return B4($.value,F);case"File":return B4($,F);case"Blob":return B4($,F);case"ElysiaCustomStatusResponse":return F.status=$.code,V3($.response,F,A);case void 0:if(!$)return;return new Response(JSON.stringify($),F);case"Response":return bS($,F,A);case"Promise":return $.then((J)=>V3(J,F));case"Error":return CW($,F);case"Function":return V3($(),F);case"Number":case"Boolean":return new Response($.toString(),F);case"FormData":return new Response($);case"Cookie":if($ instanceof kA)return new Response($.value,F);return new Response($?.toString(),F);default:if($ instanceof Response)return bS($,F,A);if($ instanceof Promise)return $.then((J)=>V3(J,F));if($ instanceof Error)return CW($,F);if($ instanceof y9)return F.status=$.code,V3($.response,F,A);if(typeof $?.next==="function"||$ instanceof ReadableStream)return GV($,F,A);if(typeof $?.then==="function")return $.then((J)=>V3(J,F));if(typeof $?.toResponse==="function")return V3($.toResponse(),F);if("charCodeAt"in $){let J=$.charCodeAt(0);if(J===123||J===91){if(!F.headers["Content-Type"])F.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),F)}}return new Response($,F)}else switch($?.constructor?.name){case"String":return new Response($);case"Array":case"Object":return F.headers["content-type"]="application/json",new Response(JSON.stringify($),F);case"ElysiaFile":return B4($.value,F);case"File":return B4($,F);case"Blob":return B4($,F);case"ElysiaCustomStatusResponse":return F.status=$.code,V3($.response,F,A);case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Promise":return $.then((J)=>{let X=V3(J,F);if(X!==void 0)return X});case"Error":return CW($,F);case"Function":return _A($(),A);case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof kA)return new Response($.value,F);return new Response($?.toString(),F);case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((J)=>V3(J,F));if($ instanceof Error)return CW($,F);if($ instanceof y9)return F.status=$.code,V3($.response,F,A);if(typeof $?.next==="function"||$ instanceof ReadableStream)return GV($,F,A);if(typeof $?.then==="function")return $.then((J)=>V3(J,F));if(typeof $?.toResponse==="function")return V3($.toResponse(),F);if("charCodeAt"in $){let J=$.charCodeAt(0);if(J===123||J===91){if(!F.headers["Content-Type"])F.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),F)}}return new Response($)}},_A=($,F)=>{switch($?.constructor?.name){case"String":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});case"ElysiaFile":return B4($.value);case"File":return B4($);case"Blob":return B4($);case"ElysiaCustomStatusResponse":return N3($.response,{status:$.code,headers:{}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Error":return CW($);case"Promise":return $.then((A)=>_A(A,F));case"Function":return _A($(),F);case"Number":case"Boolean":return new Response($.toString());case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((A)=>_A(A,F));if($ instanceof Error)return CW($);if($ instanceof y9)return N3($.response,{status:$.code,headers:{}});if(typeof $?.next==="function"||$ instanceof ReadableStream)return GV($,void 0,F);if(typeof $?.then==="function")return $.then((A)=>_A(A,F));if(typeof $?.toResponse==="function")return _A($.toResponse());if("charCodeAt"in $){let A=$.charCodeAt(0);if(A===123||A===91)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}})}return new Response($)}},CW=($,F)=>{if(typeof $?.toResponse==="function"){let A=$.toResponse(),J=F??{headers:{},status:200,redirect:""},X=(Y)=>{if(Y instanceof Response)J.status=Y.status;return N3(Y,J)};return typeof A?.then==="function"?A.then(X):X(A)}return new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:F?.status!==200?F?.status??500:500,headers:F?.headers})},Sx0=($,F,A={})=>{if(typeof $==="function")return;let J=N3($,{headers:A});if(!F.parse?.length&&!F.transform?.length&&!F.beforeHandle?.length&&!F.afterHandle?.length)return()=>J.clone()},bS=Yx1({mapResponse:N3,mapCompactResponse:_A}),GV=H11({mapResponse:N3,mapCompactResponse:_A}),UX=($,F)=>F?$:"",ub1=($,F,A,J=!1)=>{let X="",Y=$.setHeaders,W=!!$.event.trace?.length;if(W)X+=`const id=randomId()
`;let Z=/[:*]/.test(F.path),D=`const u=request.url,s=u.indexOf('/',${$.config.handler?.standardHostname??!0?11:7}),qi=u.indexOf('?',s+1)
`,G=A.query||!!F.hooks.query||!!F.hooks.standaloneValidator?.find((H)=>H.query)||$.event.request?.length;if(G)X+=D;let z=!A.path?"":!Z?`path:'${F.path}',`:"get path(){"+(G?"":D)+`if(qi===-1)return u.substring(s)
return u.substring(s,qi)
},`;if(X+=UX("const c=",!J)+"{request,store,"+UX("qi,",G)+UX("params:request.params,",Z)+z+UX("url:request.url,",W||A.url||G)+"redirect,status,set:{headers:"+(d2(Y)?"Object.assign({},app.setHeaders)":"Object.create(null)")+",status:200}",A.server)X+=",get server(){return app.getServer()}";if(W)X+=",[ELYSIA_REQUEST_ID]:id";{let H="";for(let U of Object.keys($.singleton.decorator))H+=`,'${U}':decorator['${U}']`;X+=H}return X+=`}
`,X},ae=($,F)=>{let A=!!$.event.trace?.length,J=!!$.extender.higherOrderFunctions.length,X=kS(F.hooks,$.inference);X=kS({handler:F.handler},X);let Y="const handler=data.handler,app=data.app,store=data.store,decorator=data.decorator,redirect=data.redirect,route=data.route,mapEarlyResponse=data.mapEarlyResponse,"+UX("randomId=data.randomId,",A)+UX("ELYSIA_REQUEST_ID=data.ELYSIA_REQUEST_ID,",A)+UX("ELYSIA_TRACE=data.ELYSIA_TRACE,",A)+UX("trace=data.trace,",A)+UX("hoc=data.hoc,",J)+`status=data.status
`;if($.event.request?.length)Y+=`const onRequest=app.event.request.map(x=>x.fn)
`;Y+=`${$.event.request?.find(i4)?"async":""} function map(request){`;let W=X.query||!!F.hooks.query||!!F.hooks.standaloneValidator?.find((Z)=>Z.query);if(A||W||$.event.request?.length)Y+=ub1($,F,X),Y+=zx1($),Y+="return handler(c)}";else Y+=`return handler(${ub1($,F,X,!0)})}`;return Y+=Hx1($),Function("data",Y)({app:$,handler:F.compile?.()??F.composed,redirect:gS,status:IQ,hoc:$.extender.higherOrderFunctions.map((Z)=>Z.fn),store:$.store,decorator:$.decorator,route:F.path,randomId:A?WV:void 0,ELYSIA_TRACE:A?fS:void 0,ELYSIA_REQUEST_ID:A?HV:void 0,trace:A?$.event.trace?.map((Z)=>Z?.fn??Z):void 0,mapEarlyResponse:V3})},_x0=($,F,A)=>{if(typeof $==="function"||$ instanceof Blob)return;if(Z11($))return()=>$;let J=N3($,A??{headers:{}});if(!F.parse?.length&&!F.transform?.length&&!F.beforeHandle?.length&&!F.afterHandle?.length){if(J instanceof Promise)return J.then((X)=>{if(!X)return;if(!X.headers.has("content-type"))X.headers.append("content-type","text/plain");return X.clone()});if(!J.headers.has("content-type"))J.headers.append("content-type","text/plain");return()=>J.clone()}},hb1={open($){$.data.open?.($)},message($,F){$.data.message?.($,F)},drain($){$.data.drain?.($)},close($,F,A){$.data.close?.($,F,A)},ping($){$.data.ping?.($)},pong($){$.data.pong?.($)}};class FV{raw;data;body;constructor($,F,A=void 0){this.raw=$,this.data=F,this.body=A,this.validator=$.data?.validator,this.sendText=$.sendText.bind($),this.sendBinary=$.sendBinary.bind($),this.close=$.close.bind($),this.terminate=$.terminate.bind($),this.publishText=$.publishText.bind($),this.publishBinary=$.publishBinary.bind($),this.subscribe=$.subscribe.bind($),this.unsubscribe=$.unsubscribe.bind($),this.isSubscribed=$.isSubscribed.bind($),this.cork=$.cork.bind($),this.remoteAddress=$.remoteAddress,this.binaryType=$.binaryType,this.data=$.data,this.subscriptions=$.subscriptions,this.send=this.send.bind(this),this.ping=this.ping.bind(this),this.pong=this.pong.bind(this),this.publish=this.publish.bind(this)}send($,F){if(Buffer.isBuffer($))return this.raw.send($,F);if(this.validator?.Check($)===!1)return this.raw.send(new L6("message",this.validator,$).message);if(typeof $==="object")$=JSON.stringify($);return this.raw.send($,F)}ping($){if(Buffer.isBuffer($))return this.raw.ping($);if(this.validator?.Check($)===!1)return this.raw.send(new L6("message",this.validator,$).message);if(typeof $==="object")$=JSON.stringify($);return this.raw.ping($)}pong($){if(Buffer.isBuffer($))return this.raw.pong($);if(this.validator?.Check($)===!1)return this.raw.send(new L6("message",this.validator,$).message);if(typeof $==="object")$=JSON.stringify($);return this.raw.pong($)}publish($,F,A){if(Buffer.isBuffer(F))return this.raw.publish($,F,A);if(this.validator?.Check(F)===!1)return this.raw.send(new L6("message",this.validator,F).message);if(typeof F==="object")F=JSON.stringify(F);return this.raw.publish($,F,A)}sendText;sendBinary;close;terminate;publishText;publishBinary;subscribe;unsubscribe;isSubscribed;cork;remoteAddress;binaryType;subscriptions;get readyState(){return this.raw.readyState}validator;["~types"];get id(){return this.data.id}}var kx0=($)=>{let F=typeof $==="function"?[$]:$;return async function(A,J){if(typeof J==="string"){let X=J?.charCodeAt(0);if(X===34||X===47||X===91||X===123)try{J=JSON.parse(J)}catch{}else if(ib1(J))J=+J;else if(J==="true")J=!0;else if(J==="false")J=!1;else if(J==="null")J=null}if(F)for(let X=0;X<F.length;X++){let Y=F[X](A,J);if(Y instanceof Promise)Y=await Y;if(Y!==void 0)return Y}return J}},bx0=($)=>{let F=(A,J)=>{if(J instanceof Promise)return J.then((Z)=>F(A,Z));if(Buffer.isBuffer(J))return A.send(J.toString());if(J===void 0)return;let X=$?$.provider==="standard"?(Z)=>$.schema["~standard"].validate(Z).issues:(Z)=>$.Check(Z)===!1:void 0,Y=(Z)=>{if(X&&X(Z)===!1)return A.send(new L6("message",$,Z).message);if(typeof Z==="object")return A.send(JSON.stringify(Z));A.send(Z)};if(typeof J?.next!=="function")return void Y(J);let W=J.next();if(W instanceof Promise)return(async()=>{let Z=await W;if(X&&X(Z))return A.send(new L6("message",$,Z).message);if(Y(Z.value),!Z.done)for await(let D of J)Y(D)})();if(Y(W.value),!W.done)for(let Z of J)Y(Z)};return F},xx0=/:.+?\?(?=\/|$)/,Bx1=($)=>{let F=xx0.exec($);if(!F)return[$];let A=[],J=$.slice(0,F.index),X=F[0].slice(0,-1),Y=$.slice(F.index+F[0].length);A.push(J.slice(0,-1)),A.push(J+X);for(let W of Bx1(Y)){if(!W)continue;if(!W.startsWith("/:"))A.push(J.slice(0,-1)+W);A.push(J+X+W)}return A},Z11=($)=>{return typeof $==="object"&&$!==null&&($.toString()==="[object HTMLBundle]"||typeof $.index==="string")},wx1={GET:!0,HEAD:!0,OPTIONS:!0,DELETE:!0,PATCH:!0,POST:!0,PUT:!0},te=($)=>{if(!$.config.aot||$.config.systemRouter===!1)return;let F={},A=(X,Y)=>{let W=encodeURI(X.path);if(F[W]){if(!F[W][X.method])F[W][X.method]=Y}else F[W]={[X.method]:Y}},J=$.routeTree;for(let X of $.router.history){if(typeof X.handler!=="function")continue;let Y=X.method;if(Y==="GET"&&`WS_${X.path}`in J||Y==="WS"||X.path.charCodeAt(X.path.length-1)===42||!(Y in wx1))continue;if(Y==="ALL"){if(!(`WS_${X.path}`in J))F[X.path]=X.hooks?.config?.mount?X.hooks.trace||$.event.trace||$.extender.higherOrderFunctions?ae($,X):X.hooks.mount||X.handler:X.handler;continue}let W,Z=$.config.precompile?ae($,X):(D)=>{if(W)return W(D);return(W=ae($,X))(D)};for(let D of Bx1(X.path))A({method:Y,path:D},Z)}return F},NQ=($,F)=>{if(!F)return $;for(let A of Object.keys(F)){if($[A]===F[A])continue;if(!$[A]){$[A]=F[A];continue}if($[A]&&F[A]){if(typeof $[A]==="function"||$[A]instanceof Response){$[A]=F[A];continue}$[A]={...$[A],...F[A]}}}return $},gx0={...PQ,name:"bun",handler:{mapResponse:N3,mapEarlyResponse:V3,mapCompactResponse:_A,createStaticHandler:Sx0,createNativeStaticHandler:_x0},composeHandler:{...PQ.composeHandler,headers:oe?`c.headers=c.request.headers.toJSON()
`:`c.headers={}
for(const [k,v] of c.request.headers.entries())c.headers[k]=v
`},listen($){return(F,A)=>{if(typeof Bun>"u")throw Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");if($.compile(),typeof F==="string"){if(!ib1(F))throw Error("Port must be a numeric value");F=parseInt(F)}let J=(Y,{withAsync:W=!1}={})=>{let Z={},D=[];for(let[G,z]of Object.entries(Y))if(G=encodeURI(G),rb1){if(!z)continue;for(let[H,U]of Object.entries(z)){if(!U||!(H in wx1))continue;if(U instanceof Promise){if(W){if(!Z[G])Z[G]={};D.push(U.then((Q)=>{if(Q instanceof Response)Z[G][H]=Q;if(Z11(Q))Z[G][H]=Q}))}continue}if(!(U instanceof Response)&&!Z11(U))continue;if(!Z[G])Z[G]={};Z[G][H]=U}}else{if(!z)continue;if(z instanceof Promise){if(W){if(!Z[G])Z[G]={};D.push(z.then((H)=>{if(H instanceof Response)Z[G]=H}))}continue}if(!(z instanceof Response))continue;Z[G]=z}if(W)return Promise.all(D).then(()=>Z);return Z},X=typeof F==="object"?{development:!EW,reusePort:!0,idleTimeout:30,...$.config.serve||{},...F||{},routes:NQ(NQ(J($.router.response),te($)),$.config.serve?.routes),websocket:{...$.config.websocket||{},...hb1||{},...F.websocket||{}},fetch:$.fetch}:{development:!EW,reusePort:!0,idleTimeout:30,...$.config.serve||{},routes:NQ(NQ(J($.router.response),te($)),$.config.serve?.routes),websocket:{...$.config.websocket||{},...hb1||{}},port:F,fetch:$.fetch};if($.server=Bun.serve(X),$.event.start)for(let Y=0;Y<$.event.start.length;Y++)$.event.start[Y].fn($);if(A)A($.server);process.on("beforeExit",async()=>{if($.server){if(await $.server.stop?.(),$.server=null,$.event.stop)for(let Y=0;Y<$.event.stop.length;Y++)$.event.stop[Y].fn($)}}),$.promisedModules.then(async()=>{$.config.aot,$.compile(),$.server?.reload({...X,fetch:$.fetch,routes:NQ(NQ(await J($.router.response,{withAsync:!0}),te($)),$.config.serve?.routes)}),Bun?.gc(!1)})}},async stop($,F){if($.server){if(await $.server.stop(F),$.server=null,$.event.stop?.length)for(let A=0;A<$.event.stop.length;A++)$.event.stop[A].fn($)}else console.log("Elysia isn't running. Call `app.listen` to start the server.",Error().stack)},ws($,F,A){let{parse:J,body:X,response:Y,...W}=A,Z=B9(X,{modules:$.definitions.typebox,models:$.definitions.type,normalize:$.config.normalize}),D=Z?Z.provider==="standard"?(z)=>Z.schema["~standard"].validate(z).issues:(z)=>Z.Check(z)===!1:void 0,G=B9(Y,{modules:$.definitions.typebox,models:$.definitions.type,normalize:$.config.normalize});$.route("WS",F,async(z)=>{let H=z.server??$.server,{set:U,path:Q,qi:B,headers:q,query:L,params:E}=z;if(z.validator=G,A.upgrade){if(typeof A.upgrade==="function"){let I=A.upgrade(z);if(I instanceof Promise)await I}else if(A.upgrade)Object.assign(U.headers,A.upgrade)}if(U.cookie&&d2(U.cookie)){let I=Jx1(U.cookie);if(I)U.headers["set-cookie"]=I}if(U.headers["set-cookie"]&&Array.isArray(U.headers["set-cookie"]))U.headers=Xx1(new Headers(U.headers),U.headers["set-cookie"]);let V=bx0(G),R=kx0(J),N;if(typeof A.beforeHandle==="function"){let I=A.beforeHandle(z);if(I instanceof Promise)await I}let S=[...A.error?Array.isArray(A.error)?A.error:[A.error]:[],...($.event.error??[]).map((I)=>typeof I==="function"?I:I.fn)].filter((I)=>I),C=S.length>0,M=!C?()=>{}:async(I,T)=>{for(let j of S){let b=j(Object.assign(z,{error:T}));if(b instanceof Promise)b=await b;if(await V(I,b),b)break}};if(H?.upgrade(z.request,{headers:d2(U.headers)?U.headers:void 0,data:{...z,get id(){if(N)return N;return N=WV()},validator:G,ping(I,T){A.ping?.(I,T)},pong(I,T){A.pong?.(I,T)},open:async(I)=>{try{await V(I,A.open?.(new FV(I,z)))}catch(T){M(I,T)}},message:async(I,T)=>{let j=await R(I,T);if(D&&D(j)){let b=new L6("message",Z,j);if(!C)return void I.send(b.message);return M(I,b)}try{await V(I,A.message?.(new FV(I,z,j),j))}catch(b){M(I,b)}},drain:async(I)=>{try{await V(I,A.drain?.(new FV(I,z)))}catch(T){M(I,T)}},close:async(I,T,j)=>{try{await V(I,A.close?.(new FV(I,z),T,j))}catch(b){M(I,b)}}}}))return;return IQ(400,"Expected a websocket connection")},{...W,websocket:A})}},se=($,F)=>{let A=$.schema;if(!A)return;if(A.$defs?.[A.$ref])A=A.$defs[A.$ref];if(!A?.properties)return;for(let[J,X]of Object.entries(A.properties))F[J]??=X.default},mb1=($)=>{let{mapResponse:F,mapEarlyResponse:A}=$["~adapter"].handler,J=$.setHeaders;return async(X)=>{let Y=X.url,W=Y.indexOf("/",11),Z=Y.indexOf("?",W+1),D=Z===-1?Y.substring(W):Y.substring(W,Z),G={cookie:{},status:200,headers:J?{...J}:{}},z=Object.assign({},$.singleton.decorator,{set:G,store:$.singleton.store,request:X,path:D,qi:Z,error:IQ,status:IQ,redirect:gS}),H;try{if($.event.request)for(let T=0;T<$.event.request.length;T++){let j=$.event.request[T].fn,b=j(z);if(b instanceof Promise)b=await b;if(b=A(b,G),b)return z.response=b}let U=X.method==="GET"&&X.headers.get("upgrade")?.toLowerCase()==="websocket"?"WS":X.method,Q=$.router.dynamic.find(X.method,D)??$.router.dynamic.find(U,D)??$.router.dynamic.find("ALL",D);if(!Q)throw z.query=Z===-1?{}:CQ(Y.substring(Z+1)),new D11;let{handle:B,validator:q,content:L,route:E}=Q.store;if(H=Q.store.hooks,H.config?.mount)return await H.config.mount(X);let V;if(X.method!=="GET"&&X.method!=="HEAD")if(L)switch(L){case"application/json":V=await X.json();break;case"text/plain":V=await X.text();break;case"application/x-www-form-urlencoded":V=CQ(await X.text());break;case"application/octet-stream":V=await X.arrayBuffer();break;case"multipart/form-data":{V={};let T=await X.formData();for(let j of T.keys()){if(V[j])continue;let b=T.getAll(j);if(b.length===1)V[j]=b[0];else V[j]=b}break}}else{let T;if(X.body)T=X.headers.get("content-type");if(T){let j=T.indexOf(";");if(j!==-1)T=T.slice(0,j);if(z.contentType=T,H.parse)for(let b=0;b<H.parse.length;b++){let g=H.parse[b].fn;if(typeof g==="string")switch(g){case"json":case"application/json":V=await X.json();break;case"text":case"text/plain":V=await X.text();break;case"urlencoded":case"application/x-www-form-urlencoded":V=CQ(await X.text());break;case"arrayBuffer":case"application/octet-stream":V=await X.arrayBuffer();break;case"formdata":case"multipart/form-data":{V={};let f=await X.formData();for(let d of f.keys()){if(V[d])continue;let s=f.getAll(d);if(s.length===1)V[d]=s[0];else V[d]=s}break}default:{let f=$["~parser"][g];if(f){let d=f(z,T);if(d instanceof Promise)d=await d;if(d){V=d;break}}break}}else{let f=g(z,T);if(f instanceof Promise)f=await f;if(f){V=f;break}}}if(delete z.contentType,V===void 0)switch(T){case"application/json":V=await X.json();break;case"text/plain":V=await X.text();break;case"application/x-www-form-urlencoded":V=CQ(await X.text());break;case"application/octet-stream":V=await X.arrayBuffer();break;case"multipart/form-data":{V={};let b=await X.formData();for(let g of b.keys()){if(V[g])continue;let f=b.getAll(g);if(f.length===1)V[g]=f[0];else V[g]=f}break}}}}z.route=E,z.body=V,z.params=Q?.params||void 0,z.query=Z===-1?{}:CQ(Y.substring(Z+1)),z.headers={};for(let[T,j]of X.headers.entries())z.headers[T]=j;let R={domain:$.config.cookie?.domain??q?.cookie?.config.domain,expires:$.config.cookie?.expires??q?.cookie?.config.expires,httpOnly:$.config.cookie?.httpOnly??q?.cookie?.config.httpOnly,maxAge:$.config.cookie?.maxAge??q?.cookie?.config.maxAge,path:$.config.cookie?.path??q?.cookie?.config.path,priority:$.config.cookie?.priority??q?.cookie?.config.priority,partitioned:$.config.cookie?.partitioned??q?.cookie?.config.partitioned,sameSite:$.config.cookie?.sameSite??q?.cookie?.config.sameSite,secure:$.config.cookie?.secure??q?.cookie?.config.secure,secrets:$.config.cookie?.secrets??q?.cookie?.config.secrets,sign:$.config.cookie?.sign??q?.cookie?.config.sign},N=X.headers.get("cookie");z.cookie=await Ax1(z.set,N,R);let S=q?.createHeaders?.();if(S)se(S,z.headers);let C=q?.createParams?.();if(C)se(C,z.params);let M=q?.createQuery?.();if(M)se(M,z.query);if(H.transform)for(let T=0;T<H.transform.length;T++){let j=H.transform[T],b=j.fn(z);if(b instanceof Promise)b=await b;if(b instanceof y9){let g=A(b,z.set);if(g)return z.response=g}if(j.subType==="derive")Object.assign(z,b)}if(q){if(S){let T=structuredClone(z.headers);for(let[j,b]of X.headers)T[j]=b;if(q.headers.Check(T)===!1)throw new L6("header",q.headers,T)}else if(q.headers?.Decode)z.headers=q.headers.Decode(z.headers);if(C?.Check(z.params)===!1)throw new L6("params",q.params,z.params);else if(q.params?.Decode)z.params=q.params.Decode(z.params);if(q.query?.schema){let T=q.query.schema;if(T.$defs?.[T.$ref])T=T.$defs[T.$ref];let j=T.properties;for(let b of Object.keys(j)){let g=j[b];if((g.type==="array"||g.items?.type==="string")&&typeof z.query[b]==="string"&&z.query[b])z.query[b]=z.query[b].split(",")}}if(M?.Check(z.query)===!1)throw new L6("query",q.query,z.query);else if(q.query?.Decode)z.query=q.query.Decode(z.query);if(q.createCookie?.()){let T={};for(let[j,b]of Object.entries(z.cookie))T[j]=b.value;if(q.cookie.Check(T)===!1)throw new L6("cookie",q.cookie,T);else if(q.cookie?.Decode)T=q.cookie.Decode(T)}if(q.createBody?.()?.Check(V)===!1)throw new L6("body",q.body,V);else if(q.body?.Decode)z.body=q.body.Decode(V)}if(H.beforeHandle)for(let T=0;T<H.beforeHandle.length;T++){let j=H.beforeHandle[T],b=j.fn(z);if(b instanceof Promise)b=await b;if(b instanceof y9){let g=A(b,z.set);if(g)return z.response=g}if(j.subType==="resolve"){Object.assign(z,b);continue}if(b!==void 0){if(z.response=b,H.afterHandle)for(let f=0;f<H.afterHandle.length;f++){let d=H.afterHandle[f].fn(z);if(d instanceof Promise)d=await d;if(d)b=d}let g=A(b,z.set);if(g)return z.response=g}}let I=typeof B==="function"?B(z):B;if(I instanceof Promise)I=await I;if(!H.afterHandle?.length){let T=I instanceof y9,j=T?I.code:G.status?typeof G.status==="string"?YV[G.status]:G.status:200;if(T)G.status=j,I=I.response;let b=q?.createResponse?.()?.[j];if(b?.Check(I)===!1)if(b?.Clean){let g=b.Clean(I);if(b?.Check(g)===!1)throw new L6("response",b,I);I=g}else throw new L6("response",b,I);if(b?.Encode)I=b.Encode(I);if(b?.Clean)I=b.Clean(I)}else{z.response=I;for(let T=0;T<H.afterHandle.length;T++){let j=H.afterHandle[T].fn(z);if(j instanceof Promise)j=await j;let b=j instanceof y9,g=b?j.code:G.status?typeof G.status==="string"?YV[G.status]:G.status:200;if(b)G.status=g,j=j.response;let f=q?.createResponse?.()?.[g];if(f?.Check(j)===!1)if(f?.Clean){let s=f.Clean(j);if(f?.Check(s)===!1)throw new L6("response",f,j);j=s}else throw new L6("response",f,j);if(f?.Encode)z.response=j=f.Encode(j);if(f?.Clean)z.response=j=f.Clean(j);let d=A(j,z.set);if(d!==void 0)return z.response=d}}if(z.set.cookie&&R?.sign){let T=!R.secrets?void 0:typeof R.secrets==="string"?R.secrets:R.secrets[0];if(R.sign===!0){if(T)for(let[j,b]of Object.entries(z.set.cookie))z.set.cookie[j].value=await PS(b.value,T)}else{let j=q?.cookie?.schema?.properties;if(T)for(let b of R.sign){if(!(b in j))continue;if(z.set.cookie[b]?.value)z.set.cookie[b].value=await PS(z.set.cookie[b].value,T)}}}return F(z.response=I,z.set)}catch(U){let Q=U instanceof tD&&U.error?U.error:U;return $.handleError(z,Q)}finally{let U=H?H.afterResponse:$.event.afterResponse;if(U)if(pb1)setImmediate(async()=>{for(let Q of U)await Q.fn(z)});else Promise.resolve().then(async()=>{for(let Q of U)await Q.fn(z)})}}},fx0=($)=>{let{mapResponse:F}=$["~adapter"].handler;return async(A,J)=>{let X=Object.assign(A,{error:J,code:J.code});if(X.set=A.set,typeof J?.toResponse==="function"&&!(J instanceof L6)&&!(J instanceof tD))try{let Y=J.toResponse();if(typeof Y?.then==="function")Y=await Y;if(Y instanceof Response)A.set.status=Y.status;A.response=Y}catch(Y){}if(!A.response&&$.event.error)for(let Y=0;Y<$.event.error.length;Y++){let W=$.event.error[Y].fn(X);if(W instanceof Promise)W=await W;if(W!==void 0&&W!==null)return A.response=F(W,A.set)}if(A.response){if($.event.mapResponse)for(let Y=0;Y<$.event.mapResponse.length;Y++){let W=$.event.mapResponse[Y].fn(X);if(W instanceof Promise)W=await W;if(W!==void 0&&W!==null)A.response=W}return F(A.response,A.set)}return A.set.status=J.status??500,F(typeof J.cause==="string"?J.cause:J.message,A.set)}};class D7{config;server=null;dependencies={};"~Prefix"="";"~Singleton"=null;"~Definitions"=null;"~Metadata"=null;"~Ephemeral"=null;"~Volatile"=null;"~Routes"=null;singleton={decorator:{},store:{},derive:{},resolve:{}};get store(){return this.singleton.store}get decorator(){return this.singleton.decorator}definitions={typebox:W1.Module({}),type:{},error:{}};extender={macro:{},higherOrderFunctions:[]};validator={global:null,scoped:null,local:null,getCandidate(){if(!this.global&&!this.scoped&&!this.local)return{body:void 0,headers:void 0,params:void 0,query:void 0,cookie:void 0,response:void 0};return iE(iE(this.global,this.scoped),this.local)}};standaloneValidator={global:null,scoped:null,local:null};event={};telemetry;router={"~http":void 0,get http(){if(!this["~http"])this["~http"]=new MQ({lazy:!0,onParam:Qb1.default});return this["~http"]},"~dynamic":void 0,get dynamic(){if(!this["~dynamic"])this["~dynamic"]=new MQ({onParam:Qb1.default});return this["~dynamic"]},static:{},response:{},history:[]};routeTree={};get routes(){return this.router.history}getGlobalRoutes(){return this.router.history}getGlobalDefinitions(){return this.definitions}inference={body:!1,cookie:!1,headers:!1,query:!1,set:!1,server:!1,path:!1,route:!1,url:!1};getServer(){return this.server}getParent(){return null}"~parser"={};_promisedModules;get promisedModules(){if(!this._promisedModules)this._promisedModules=new nb1(console.error,()=>{});return this._promisedModules}constructor($={}){if($.tags)if(!$.detail)$.detail={tags:$.tags};else $.detail.tags=$.tags;if(this.config={aot:J11.ELYSIA_AOT!=="false",nativeStaticResponse:!0,encodeSchema:!0,normalize:!0,...$,prefix:$.prefix?$.prefix.charCodeAt(0)===47?$.prefix:`/${$.prefix}`:void 0,cookie:{path:"/",...$?.cookie},experimental:$?.experimental??{},seed:$?.seed===void 0?"":$?.seed},this["~adapter"]=$.adapter??(typeof Bun<"u"?gx0:PQ),$?.analytic&&($?.name||$?.seed!==void 0))this.telemetry={stack:Error().stack}}"~adapter";env($,F=J11){if(B9($,{modules:this.definitions.typebox,dynamic:!0,additionalProperties:!0,coerce:!0,sanitize:()=>this.config.sanitize}).Check(F)===!1){let A=new L6("env",$,F);throw Error(A.all.map((J)=>J.summary).join(`
`))}return this}wrap($){return this.extender.higherOrderFunctions.push({checksum:aE(JSON.stringify({name:this.config.name,seed:this.config.seed,content:$.toString()})),fn:$}),this}get models(){let $={};for(let F of Object.keys(this.definitions.type))$[F]=B9(this.definitions.typebox.Import(F),{models:this.definitions.type});return $.modules=this.definitions.typebox,$}add($,F,A,J,X){let Y=X?.skipPrefix??!1,W=X?.allowMeta??!1;J??={},this.applyMacro(J);let Z=[];if(J.standaloneValidator)Z=Z.concat(J.standaloneValidator);if(this.standaloneValidator.local)Z=Z.concat(this.standaloneValidator.local);if(this.standaloneValidator.scoped)Z=Z.concat(this.standaloneValidator.scoped);if(this.standaloneValidator.global)Z=Z.concat(this.standaloneValidator.global);if(F!==""&&F.charCodeAt(0)!==47)F="/"+F;if(this.config.prefix&&!Y)F=this.config.prefix+F;if(J?.type)switch(J.type){case"text":J.type="text/plain";break;case"json":J.type="application/json";break;case"formdata":J.type="multipart/form-data";break;case"urlencoded":J.type="application/x-www-form-urlencoded";break;case"arrayBuffer":J.type="application/octet-stream";break;default:break}let D=this.validator.getCandidate(),G={body:J?.body??D?.body,headers:J?.headers??D?.headers,params:J?.params??D?.params,query:J?.query??D?.query,cookie:J?.cookie??D?.cookie,response:J?.response??D?.response},z=this.config.precompile===!0||typeof this.config.precompile==="object"&&this.config.precompile.compose===!0,H=()=>{let j=this.definitions.type,b=!this.config.aot,g=this.config.normalize,f=this.definitions.typebox,d=()=>this.config.sanitize,s=()=>{if(G.cookie||Z.find((n)=>n.cookie))return Bx0({modules:f,validator:G.cookie,defaultConfig:this.config.cookie,normalize:g,config:G.cookie?.config??{},dynamic:b,models:j,validators:Z.map((n)=>n.cookie),sanitize:d})};return z?{body:B9(G.body,{modules:f,dynamic:b,models:j,normalize:g,additionalCoerce:(()=>{let n=fb1(G.body,j,f);return n&&a in n&&(d8("File",n)||d8("Files",n))?gb1():X11()})(),validators:Z.map((n)=>n.body),sanitize:d}),headers:B9(G.headers,{modules:f,dynamic:b,models:j,additionalProperties:!0,coerce:!0,additionalCoerce:eE(),validators:Z.map((n)=>n.headers),sanitize:d}),params:B9(G.params,{modules:f,dynamic:b,models:j,coerce:!0,additionalCoerce:eE(),validators:Z.map((n)=>n.params),sanitize:d}),query:B9(G.query,{modules:f,dynamic:b,models:j,normalize:g,coerce:!0,additionalCoerce:xb1(),validators:Z.map((n)=>n.query),sanitize:d}),cookie:s(),response:vb1(G.response,{modules:f,dynamic:b,models:j,normalize:g,validators:Z.map((n)=>n.response),sanitize:d})}:{createBody(){if(this.body)return this.body;return this.body=B9(G.body,{modules:f,dynamic:b,models:j,normalize:g,additionalCoerce:(()=>{let n=fb1(G.body,j,f);return n&&a in n&&(d8("File",n)||d8("Files",n))?gb1():X11()})(),validators:Z.map((n)=>n.body),sanitize:d})},createHeaders(){if(this.headers)return this.headers;return this.headers=B9(G.headers,{modules:f,dynamic:b,models:j,normalize:g,additionalProperties:!g,coerce:!0,additionalCoerce:eE(),validators:Z.map((n)=>n.headers),sanitize:d})},createParams(){if(this.params)return this.params;return this.params=B9(G.params,{modules:f,dynamic:b,models:j,normalize:g,coerce:!0,additionalCoerce:eE(),validators:Z.map((n)=>n.params),sanitize:d})},createQuery(){if(this.query)return this.query;return this.query=B9(G.query,{modules:f,dynamic:b,models:j,normalize:g,coerce:!0,additionalCoerce:xb1(),validators:Z.map((n)=>n.query),sanitize:d})},createCookie(){if(this.cookie)return this.cookie;return this.cookie=s()},createResponse(){if(this.response)return this.response;return this.response=vb1(G.response,{modules:f,dynamic:b,models:j,normalize:g,validators:Z.map((n)=>n.response),sanitize:d})}}};if(D.body||D.cookie||D.headers||D.params||D.query||D.response)J=XG(J,D);if(J.tags)if(!J.detail)J.detail={tags:J.tags};else J.detail.tags=J.tags;if(d2(this.config.detail))J.detail=v9(Object.assign({},this.config.detail),J.detail);let U=d2(this.event)?XG(this.event,Vb1(J)):{...Nb0(Vb1(J))};if(Z.length)Object.assign(U,{standaloneValidator:Z});if(this.config.aot===!1){let j=H();this.router.dynamic.add($,F,{validator:j,hooks:U,content:J?.type,handle:A,route:F});let b=sE(F,{dynamic:!0});if(F!==b)this.router.dynamic.add($,b,{validator:j,hooks:U,content:J?.type,handle:A,route:F});if(!this.config.strictPath){let g=tE(F);this.router.dynamic.add($,g,{validator:j,hooks:U,content:J?.type,handle:A,route:F});let f=sE(g);if(g!==f)this.router.dynamic.add($,g,{validator:j,hooks:U,content:J?.type,handle:A,route:F})}this.router.history.push({method:$,path:F,composed:null,handler:A,compile:void 0,hooks:U});return}let Q=this["~adapter"].handler,B=typeof A!=="function"?()=>{let j={redirect:gS,request:this["~adapter"].isWebStandard?new Request(`http://ely.sia${F}`,{method:$}):void 0,server:null,set:{headers:Object.assign({},this.setHeaders)},status:IQ,store:this.store};try{this.event.request?.map((g)=>{if(typeof g.fn==="function")return g.fn(j);if(typeof g==="function")return g(j)})}catch(g){let f;if(j.error=g,this.event.error?.some((d)=>{if(typeof d.fn==="function")return f=d.fn(j);if(typeof d==="function")return f=d(j)}),f!==void 0)A=f}let b=Q.createNativeStaticHandler?.(A,U,j.set);return b instanceof Promise?b.then((g)=>{if(g)return g}):b?.()}:void 0,q=this.config.nativeStaticResponse===!0,L=(j)=>{if(!q||!B)return;if(rb1)if(this.router.response[j])this.router.response[j][$]=B();else this.router.response[j]={[$]:B()};else this.router.response[j]=B()};L(F);let E,V=()=>{if(E)return E;let j=Vx0({app:this,path:F,method:$,hooks:U,validator:H(),handler:typeof A!=="function"&&typeof Q.createStaticHandler!=="function"?()=>A:A,allowMeta:W,inference:this.inference});if(this.router.history[N])E=this.router.history[N].composed=j;return j},R;if(`${$}_${F}`in this.routeTree)for(let j=0;j<this.router.history.length;j++){let b=this.router.history[j];if(b.path===F&&b.method===$){R=j;break}}else this.routeTree[`${$}_${F}`]=this.router.history.length;let N=R??this.router.history.length,S=this.router.history,C=z?V():(j)=>E?E(j):(S[N].composed=V())(j);if(R!==void 0)this.router.history[R]=Object.assign({method:$,path:F,composed:C,compile:V,handler:A,hooks:U},Z.length?{standaloneValidators:Z}:void 0,J.webSocket?{websocket:J.websocket}:void 0);else this.router.history.push(Object.assign({method:$,path:F,composed:C,compile:V,handler:A,hooks:U},J.webSocket?{websocket:J.websocket}:void 0));let M={handler:z?S[N].composed:void 0,compile(){return this.handler=V()}},I=this.router.static,T=F.indexOf(":")===-1&&F.indexOf("*")===-1;if($==="WS"){if(T){if(F in I)I[F][$]=N;else I[F]={[$]:N};return}if(this.router.http.add("WS",F,M),!this.config.strictPath)this.router.http.add("WS",tE(F),M);let j=sE(F,{dynamic:!0});if(F!==j)this.router.http.add("WS",j,M);return}if(T){if(F in I)I[F][$]=N;else I[F]={[$]:N};if(!this.config.strictPath)L(tE(F))}else{if(this.router.http.add($,F,M),!this.config.strictPath){let b=tE(F);L(b),this.router.http.add($,b,M)}let j=sE(F,{dynamic:!0});if(F!==j)this.router.http.add($,j,M),L(j)}}setHeaders;headers($){if(!$)return this;if(!this.setHeaders)this.setHeaders={};return this.setHeaders=v9(this.setHeaders,$),this}onStart($){return this.on("start",$),this}onRequest($){return this.on("request",$),this}onParse($,F){if(!F){if(typeof $==="string")return this.on("parse",this["~parser"][$]);return this.on("parse",$)}return this.on($,"parse",F)}parser($,F){return this["~parser"][$]=F,this}onTransform($,F){if(!F)return this.on("transform",$);return this.on($,"transform",F)}resolve($,F){if(!F)F=$,$={as:"local"};let A={subType:"resolve",fn:F};return this.onBeforeHandle($,A)}mapResolve($,F){if(!F)F=$,$={as:"local"};let A={subType:"mapResolve",fn:F};return this.onBeforeHandle($,A)}onBeforeHandle($,F){if(!F)return this.on("beforeHandle",$);return this.on($,"beforeHandle",F)}onAfterHandle($,F){if(!F)return this.on("afterHandle",$);return this.on($,"afterHandle",F)}mapResponse($,F){if(!F)return this.on("mapResponse",$);return this.on($,"mapResponse",F)}onAfterResponse($,F){if(!F)return this.on("afterResponse",$);return this.on($,"afterResponse",F)}trace($,F){if(!F)F=$,$={as:"local"};if(!Array.isArray(F))F=[F];for(let A of F)this.on($,"trace",Zx0(A));return this}error($,F){switch(typeof $){case"string":return F.prototype[RS]=$,this.definitions.error[$]=F,this;case"function":return this.definitions.error=$(this.definitions.error),this}for(let[A,J]of Object.entries($))J.prototype[RS]=A,this.definitions.error[A]=J;return this}onError($,F){if(!F)return this.on("error",$);return this.on($,"error",F)}onStop($){return this.on("stop",$),this}on($,F,A){let J;switch(typeof $){case"string":J=$,A=F;break;case"object":if(J=F,!Array.isArray(F)&&typeof F==="object")A=F;break}if(Array.isArray(A))A=K9(A);else if(typeof A==="function")A=[{fn:A}];else A=[A];let X=A;for(let Y of X)if(Y.scope=typeof $==="string"?"local":$?.as??"local",J==="resolve"||J==="derive")Y.subType=J;if(J!=="trace")this.inference=kS({[J]:X.map((Y)=>Y.fn)},this.inference,this.config.sucrose);for(let Y of X){let W=Mb0(Y,"global",{skipIfHasType:!0});switch(J){case"start":this.event.start??=[],this.event.start.push(W);break;case"request":this.event.request??=[],this.event.request.push(W);break;case"parse":this.event.parse??=[],this.event.parse.push(W);break;case"transform":this.event.transform??=[],this.event.transform.push(W);break;case"derive":this.event.transform??=[],this.event.transform.push(K9(W,"derive"));break;case"beforeHandle":this.event.beforeHandle??=[],this.event.beforeHandle.push(W);break;case"resolve":this.event.beforeHandle??=[],this.event.beforeHandle.push(K9(W,"resolve"));break;case"afterHandle":this.event.afterHandle??=[],this.event.afterHandle.push(W);break;case"mapResponse":this.event.mapResponse??=[],this.event.mapResponse.push(W);break;case"afterResponse":this.event.afterResponse??=[],this.event.afterResponse.push(W);break;case"trace":this.event.trace??=[],this.event.trace.push(W);break;case"error":this.event.error??=[],this.event.error.push(W);break;case"stop":this.event.stop??=[],this.event.stop.push(W);break}}return this}as($){if(LW(this.event.parse,$),LW(this.event.transform,$),LW(this.event.beforeHandle,$),LW(this.event.afterHandle,$),LW(this.event.mapResponse,$),LW(this.event.afterResponse,$),LW(this.event.trace,$),LW(this.event.error,$),$==="scoped"){if(this.validator.scoped=iE(this.validator.scoped,this.validator.local),this.validator.local=null,this.standaloneValidator.local!==null)this.standaloneValidator.scoped||=[],this.standaloneValidator.scoped.push(...this.standaloneValidator.local),this.standaloneValidator.local=null}else if($==="global"){if(this.validator.global=iE(this.validator.global,iE(this.validator.scoped,this.validator.local)),this.validator.scoped=null,this.validator.local=null,this.standaloneValidator.local!==null)this.standaloneValidator.scoped||=[],this.standaloneValidator.scoped.push(...this.standaloneValidator.local),this.standaloneValidator.local=null;if(this.standaloneValidator.scoped!==null)this.standaloneValidator.global||=[],this.standaloneValidator.global.push(...this.standaloneValidator.scoped),this.standaloneValidator.scoped=null}return this}group($,F,A){let J=new D7({...this.config,prefix:""});J.singleton={...this.singleton},J.definitions={...this.definitions},J.getServer=()=>this.getServer(),J.inference=Cb1(this.inference),J.extender={...this.extender},J["~parser"]=this["~parser"],J.standaloneValidator={local:[...this.standaloneValidator.local??[]],scoped:[...this.standaloneValidator.scoped??[]],global:[...this.standaloneValidator.global??[]]};let X=typeof F==="object",Y=(X?A:F)(J);if(this.singleton=v9(this.singleton,J.singleton),this.definitions=v9(this.definitions,J.definitions),Y.event.request?.length)this.event.request=[...this.event.request||[],...Y.event.request||[]];if(Y.event.mapResponse?.length)this.event.mapResponse=[...this.event.mapResponse||[],...Y.event.mapResponse||[]];return this.model(Y.definitions.type),Object.values(J.router.history).forEach(({method:W,path:Z,handler:D,hooks:G})=>{if(Z=(X?"":this.config.prefix??"")+$+Z,X){let{body:z,headers:H,query:U,params:Q,cookie:B,response:q,...L}=F,E=G;this.applyMacro(L);let V=z||H||U||Q||B||q;this.add(W,Z,D,XG(L,{...E||{},error:!E.error?Y.event.error:Array.isArray(E.error)?[...E.error??[],...Y.event.error??[]]:[E.error,...Y.event.error??[]],standaloneValidator:L.standaloneValidator||E.standaloneValidator||V?[...L.standaloneValidator??[],...E.standaloneValidator??[],...V?[{body:z,headers:H,query:U,params:Q,cookie:B,response:q}]:[]]:void 0}),void 0)}else this.add(W,Z,D,XG(G,{error:Y.event.error}),{skipPrefix:!0})}),this}guard($,F){if(!F){if(typeof $==="object"){if(this.applyMacro($),$.detail)if(this.config.detail)this.config.detail=v9(Object.assign({},this.config.detail),$.detail);else this.config.detail=$.detail;if($.tags)if(!this.config.detail)this.config.detail={tags:$.tags};else this.config.detail.tags=$.tags;let X=$.as??"local";if($.schema==="standalone"){if(!this.standaloneValidator[X])this.standaloneValidator[X]=[];let Y=!$?.response?void 0:typeof $.response==="string"||(a in $.response)||("~standard"in $.response)?{200:$.response}:$?.response;this.standaloneValidator[X].push({body:$.body,headers:$.headers,params:$.params,query:$.query,response:Y,cookie:$.cookie})}else this.validator[X]={body:$.body??this.validator[X]?.body,headers:$.headers??this.validator[X]?.headers,params:$.params??this.validator[X]?.params,query:$.query??this.validator[X]?.query,response:$.response??this.validator[X]?.response,cookie:$.cookie??this.validator[X]?.cookie};if($.parse)this.on({as:X},"parse",$.parse);if($.transform)this.on({as:X},"transform",$.transform);if($.derive)this.on({as:X},"derive",$.derive);if($.beforeHandle)this.on({as:X},"beforeHandle",$.beforeHandle);if($.resolve)this.on({as:X},"resolve",$.resolve);if($.afterHandle)this.on({as:X},"afterHandle",$.afterHandle);if($.mapResponse)this.on({as:X},"mapResponse",$.mapResponse);if($.afterResponse)this.on({as:X},"afterResponse",$.afterResponse);if($.error)this.on({as:X},"error",$.error);return this}return this.guard({},$)}let A=new D7({...this.config,prefix:""});A.singleton={...this.singleton},A.definitions={...this.definitions},A.inference=Cb1(this.inference),A.extender={...this.extender},A.getServer=()=>this.getServer();let J=F(A);if(this.singleton=v9(this.singleton,A.singleton),this.definitions=v9(this.definitions,A.definitions),J.getServer=()=>this.server,J.event.request?.length)this.event.request=[...this.event.request||[],...J.event.request||[]];if(J.event.mapResponse?.length)this.event.mapResponse=[...this.event.mapResponse||[],...J.event.mapResponse||[]];return this.model(J.definitions.type),Object.values(A.router.history).forEach(({method:X,path:Y,handler:W,hooks:Z})=>{let{body:D,headers:G,query:z,params:H,cookie:U,response:Q,...B}=$,q=D||G||z||H||U||Q;this.add(X,Y,W,XG(B,{...Z||{},error:!Z.error?J.event.error:Array.isArray(Z.error)?[...Z.error??[],...J.event.error??[]]:[Z.error,...J.event.error??[]],standaloneValidator:!q?Z.standaloneValidator:[...Z.standaloneValidator??[],{body:D,headers:G,query:z,params:H,cookie:U,response:Q}]}))}),this}use($){if(!$)return this;if(Array.isArray($)){let F=this;for(let A of $)F=F.use(A);return F}if($ instanceof Promise)return this.promisedModules.add($.then((F)=>{if(typeof F==="function")return F(this);if(F instanceof D7)return this._use(F).compile();if(F.constructor?.name==="Elysia")return this._use(F).compile();if(typeof F.default==="function")return F.default(this);if(F.default instanceof D7)return this._use(F.default);if(F.constructor?.name==="Elysia")return this._use(F.default);if(F.constructor?.name==="_Elysia")return this._use(F.default);try{return this._use(F.default)}catch(A){throw console.error('Invalid plugin type. Expected Elysia instance, function, or module with "default" as Elysia instance or function that returns Elysia instance.'),A}}).then((F)=>{if(F&&typeof F.compile==="function")F.compile();return F})),this;return this._use($)}propagatePromiseModules($){if($.promisedModules.size<=0)return this;for(let F of $.promisedModules.promises)this.promisedModules.add(F.then((A)=>{if(!A)return;let J=this._use(A);if(J instanceof Promise)return J.then((X)=>{if(X)X.compile();else A.compile()});return A.compile()}));return this}_use($){if(typeof $==="function"){let J=$(this);if(J instanceof Promise)return this.promisedModules.add(J.then((X)=>{if(X instanceof D7){X.getServer=()=>this.getServer(),X.getGlobalRoutes=()=>this.getGlobalRoutes(),X.getGlobalDefinitions=()=>this.getGlobalDefinitions(),X.model(this.definitions.type),X.error(this.definitions.error);for(let{method:Y,path:W,handler:Z,hooks:D}of Object.values(X.router.history))this.add(Y,W,Z,D,void 0);if(X===this)return;return this.propagatePromiseModules(X),X}if(typeof X==="function")return X(this);if(typeof X.default==="function")return X.default(this);return this._use(X)}).then((X)=>{if(X&&typeof X.compile==="function")X.compile();return X})),this;return J}this.propagatePromiseModules($);let F=$.config.name,A=$.config.seed;if($.getParent=()=>this,$.getServer=()=>this.getServer(),$.getGlobalRoutes=()=>this.getGlobalRoutes(),$.getGlobalDefinitions=()=>this.getGlobalDefinitions(),$.standaloneValidator?.scoped)if(this.standaloneValidator.local)this.standaloneValidator.local=this.standaloneValidator.local.concat($.standaloneValidator.scoped);else this.standaloneValidator.local=$.standaloneValidator.scoped;if($.standaloneValidator?.global)if(this.standaloneValidator.global)this.standaloneValidator.global=this.standaloneValidator.global.concat($.standaloneValidator.global);else this.standaloneValidator.global=$.standaloneValidator.global;if(d2($["~parser"]))this["~parser"]={...$["~parser"],...this["~parser"]};if($.setHeaders)this.headers($.setHeaders);if(F){if(!(F in this.dependencies))this.dependencies[F]=[];let J=A!==void 0?aE(F+JSON.stringify(A)):0;if(!this.dependencies[F].some(({checksum:X})=>J===X))this.extender.macro={...this.extender.macro,...$.extender.macro},this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat($.extender.higherOrderFunctions)}else{if(d2($.extender.macro))this.extender.macro={...this.extender.macro,...$.extender.macro};if($.extender.higherOrderFunctions.length)this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat($.extender.higherOrderFunctions)}if($.extender.higherOrderFunctions.length){Ob0(this.extender.higherOrderFunctions);let J=[];for(let X=0;X<this.extender.higherOrderFunctions.length;X++){let Y=this.extender.higherOrderFunctions[X];if(Y.checksum){if(J.includes(Y.checksum))this.extender.higherOrderFunctions.splice(X,1),X--;J.push(Y.checksum)}}J.length=0}if(this.inference=W11(this.inference,$.inference),d2($.singleton.decorator))this.decorate($.singleton.decorator);if(d2($.singleton.store))this.state($.singleton.store);if(d2($.definitions.type))this.model($.definitions.type);if(d2($.definitions.error))this.error($.definitions.error);if(d2($.extender.macro))this.extender.macro={...this.extender.macro,...$.extender.macro};for(let{method:J,path:X,handler:Y,hooks:W}of Object.values($.router.history))this.add(J,X,Y,W);if(F){if(!(F in this.dependencies))this.dependencies[F]=[];let J=A!==void 0?aE(F+JSON.stringify(A)):0;if(this.dependencies[F].some(({checksum:X})=>J===X))return this;if(this.dependencies[F].push(this.config?.analytic?{name:$.config.name,seed:$.config.seed,checksum:J,dependencies:$.dependencies,stack:$.telemetry?.stack,routes:$.router.history,decorators:$.singleton,store:$.singleton.store,error:$.definitions.error,derive:$.event.transform?.filter((X)=>X?.subType==="derive").map((X)=>({fn:X.toString(),stack:Error().stack??""})),resolve:$.event.transform?.filter((X)=>X?.subType==="resolve").map((X)=>({fn:X.toString(),stack:Error().stack??""}))}:{name:$.config.name,seed:$.config.seed,checksum:J,dependencies:$.dependencies}),d2($.event))this.event=Bb1(this.event,wb1($.event),J)}else if(d2($.event))this.event=Bb1(this.event,wb1($.event));if($.validator.global)this.validator.global=XG(this.validator.global,{...$.validator.global});if($.validator.scoped)this.validator.local=XG(this.validator.local,{...$.validator.scoped});return this}macro($,F){if(typeof $==="string"&&!F)throw Error("Macro function is required");if(typeof $==="string")this.extender.macro[$]=F;else this.extender.macro={...this.extender.macro,...$};return this}applyMacro($,F=$,{iteration:A=0,applied:J={}}={}){if(A>=16)return;let X=this.extender.macro;for(let[Y,W]of Object.entries(F)){if(Y in X===!1)continue;let Z=typeof X[Y]==="function"?X[Y](W):X[Y];if(!Z||typeof X[Y]==="object"&&W===!1)return;let D=aE(Y+JSON.stringify(Z.seed??W));if(D in J)continue;J[D]=!0;for(let[G,z]of Object.entries(Z)){if(G==="seed")continue;if(G in _b0){Ib0($,G,z),delete $[Y];continue}if(G==="introspect"){z?.($),delete $[Y];continue}if(G==="detail"){if(!$.detail)$.detail={};$.detail=v9($.detail,z,{mergeArray:!0}),delete $[Y];continue}if(G in X){this.applyMacro($,{[G]:z},{applied:J,iteration:A+1}),delete $[Y];continue}if((G==="derive"||G==="resolve")&&typeof z==="function")z={fn:z,subType:G};switch(typeof $[G]){case"function":$[G]=[$[G],z];break;case"object":if(Array.isArray($[G]))$[G].push(z);else $[G]=[$[G],z];break;case"undefined":$[G]=z;break}delete $[Y]}}}mount($,F,A){if($ instanceof D7||typeof $==="function"||$.length===0||$==="/"){let W=typeof $==="function"?$:$ instanceof D7?$.compile().fetch:F instanceof D7?F.compile().fetch:typeof F==="function"?F:(()=>{throw Error("Invalid handler")})(),Z=({request:D,path:G})=>W(new Request(Kb1(D.url,G),{method:D.method,headers:D.headers,signal:D.signal,credentials:D.credentials,referrerPolicy:D.referrerPolicy,duplex:D.duplex,redirect:D.redirect,mode:D.mode,keepalive:D.keepalive,integrity:D.integrity,body:D.body}));return this.route("ALL","/*",Z,{parse:"none",...A,detail:{...A?.detail,hide:!0},config:{mount:W}}),this}let J=F instanceof D7?F.compile().fetch:typeof F==="function"?F:(()=>{throw Error("Invalid handler")})(),X=(typeof $==="string"&&this.config.prefix?this.config.prefix+$:$).length-($.endsWith("*")?1:0),Y=({request:W,path:Z})=>J(new Request(Kb1(W.url,Z.slice(X)||"/"),{method:W.method,headers:W.headers,signal:W.signal,credentials:W.credentials,referrerPolicy:W.referrerPolicy,duplex:W.duplex,redirect:W.redirect,mode:W.mode,keepalive:W.keepalive,integrity:W.integrity,body:W.body}));return this.route("ALL",$,Y,{parse:"none",...A,detail:{...A?.detail,hide:!0},config:{mount:J}}),this.route("ALL",$+($.endsWith("/")?"*":"/*"),Y,{parse:"none",...A,detail:{...A?.detail,hide:!0},config:{mount:J}}),this}get($,F,A){return this.add("GET",$,F,A),this}post($,F,A){return this.add("POST",$,F,A),this}put($,F,A){return this.add("PUT",$,F,A),this}patch($,F,A){return this.add("PATCH",$,F,A),this}delete($,F,A){return this.add("DELETE",$,F,A),this}options($,F,A){return this.add("OPTIONS",$,F,A),this}all($,F,A){return this.add("ALL",$,F,A),this}head($,F,A){return this.add("HEAD",$,F,A),this}connect($,F,A){return this.add("CONNECT",$,F,A),this}route($,F,A,J){return this.add($.toUpperCase(),F,A,J,J?.config),this}ws($,F){if(this["~adapter"].ws)this["~adapter"].ws(this,$,F);else console.warn("Current adapter doesn't support WebSocket");return this}state($,F,A){if(F===void 0)A=$,$={as:"append"},F="";else if(A===void 0){if(typeof $==="string")A=F,F=$,$={as:"append"};else if(typeof $==="object")A=F,F=""}let{as:J}=$;if(typeof F!=="string")return this;switch(typeof A){case"object":if(!A||!d2(A))return this;if(F){if(F in this.singleton.store)this.singleton.store[F]=v9(this.singleton.store[F],A,{override:J==="override"});else this.singleton.store[F]=A;return this}if(A===null)return this;return this.singleton.store=v9(this.singleton.store,A,{override:J==="override"}),this;case"function":if(F){if(J==="override"||!(F in this.singleton.store))this.singleton.store[F]=A}else this.singleton.store=A(this.singleton.store);return this;default:if(J==="override"||!(F in this.singleton.store))this.singleton.store[F]=A;return this}}decorate($,F,A){if(F===void 0)A=$,$={as:"append"},F="";else if(A===void 0){if(typeof $==="string")A=F,F=$,$={as:"append"};else if(typeof $==="object")A=F,F=""}let{as:J}=$;if(typeof F!=="string")return this;switch(typeof A){case"object":if(F){if(F in this.singleton.decorator)this.singleton.decorator[F]=v9(this.singleton.decorator[F],A,{override:J==="override"});else this.singleton.decorator[F]=A;return this}if(A===null)return this;return this.singleton.decorator=v9(this.singleton.decorator,A,{override:J==="override"}),this;case"function":if(F){if(J==="override"||!(F in this.singleton.decorator))this.singleton.decorator[F]=A}else this.singleton.decorator=A(this.singleton.decorator);return this;default:if(J==="override"||!(F in this.singleton.decorator))this.singleton.decorator[F]=A;return this}}derive($,F){if(!F)F=$,$={as:"local"};let A={subType:"derive",fn:F};return this.onTransform($,A)}model($,F){let A=(J)=>{let X={};for(let Y in J)if(!("~standard"in J[Y]))X[Y]=J[Y];return X};switch(typeof $){case"object":let J={},X=Object.entries($);if(!X.length)return this;for(let[Z,D]of X){if(Z in this.definitions.type)continue;if("~standard"in D)this.definitions.type[Z]=D;else J[Z]=this.definitions.type[Z]=D,J[Z].$id??=`#/components/schemas/${Z}`}return this.definitions.typebox=W1.Module({...this.definitions.typebox.$defs,...J}),this;case"function":let Y=$(this.definitions.type);return this.definitions.type=Y,this.definitions.typebox=W1.Module(A(Y)),this;case"string":if(!F)break;if(this.definitions.type[$]=F,"~standard"in F)return this;let W={...F,id:F.$id??`#/components/schemas/${$}`};return this.definitions.typebox=W1.Module({...this.definitions.typebox.$defs,...W}),this}if(!F)return this;if(this.definitions.type[$]=F,"~standard"in F)return this;return this.definitions.typebox=W1.Module({...this.definitions.typebox.$defs,[$]:F}),this}Ref($){return W1.Ref($)}mapDerive($,F){if(!F)F=$,$={as:"local"};let A={subType:"mapDerive",fn:F};return this.onTransform($,A)}affix($,F,A){if(A==="")return this;let J=["_","-"," "],X=(D)=>D[0].toUpperCase()+D.slice(1),Y=$==="prefix"?(D,G)=>J.includes(D.at(-1)??"")?D+G:D+X(G):J.includes(A.at(-1)??"")?(D,G)=>G+D:(D,G)=>G+X(D),W=(D)=>{let G={};switch(D){case"decorator":for(let z in this.singleton.decorator)G[Y(A,z)]=this.singleton.decorator[z];this.singleton.decorator=G;break;case"state":for(let z in this.singleton.store)G[Y(A,z)]=this.singleton.store[z];this.singleton.store=G;break;case"model":for(let z in this.definitions.type)G[Y(A,z)]=this.definitions.type[z];this.definitions.type=G;break;case"error":for(let z in this.definitions.error)G[Y(A,z)]=this.definitions.error[z];this.definitions.error=G;break}},Z=Array.isArray(F)?F:[F];for(let D of Z.some((G)=>G==="all")?["decorator","state","model","error"]:Z)W(D);return this}prefix($,F){return this.affix("prefix",$,F)}suffix($,F){return this.affix("suffix",$,F)}compile(){if(this["~adapter"].beforeCompile?.(this),this["~adapter"].isWebStandard){if(this._handle=this.config.aot?re(this):mb1(this),Object.defineProperty(this,"fetch",{value:this._handle,configurable:!0,writable:!0}),typeof this.server?.reload==="function")this.server.reload({...this.server||{},fetch:this.fetch});return this}if(typeof this.server?.reload==="function")this.server.reload(this.server||{});return this._handle=re(this),this}handle=async($)=>this.fetch($);get fetch(){let $=this.config.aot?re(this):mb1(this);return Object.defineProperty(this,"fetch",{value:$,configurable:!0,writable:!0}),$}handleError=async($,F)=>{return(this.handleError=this.config.aot?U11(this):fx0(this))($,F)};listen=($,F)=>{return this["~adapter"].listen(this)($,F),this};stop=async($)=>{return await this["~adapter"].stop?.(this,$),this};[Symbol.dispose]=()=>{if(this.server)this.stop()};get modules(){return this.promisedModules}}var qx1=typeof new Headers()?.toJSON==="function",vx0=($)=>{if(qx1)return Object.keys($.toJSON()).join(", ");let F="",A=0;return $.forEach((J,X)=>{if(A)F=F+", "+X;else F=X;A++}),F},Lx1=($)=>{let{aot:F=!0,origin:A=!0,methods:J=!0,allowedHeaders:X=!0,exposeHeaders:Y=!0,credentials:W=!0,maxAge:Z=5,preflight:D=!0}=$??{};if(Array.isArray(X))X=X.join(", ");if(Array.isArray(Y))Y=Y.join(", ");let G=typeof A==="boolean"?void 0:Array.isArray(A)?A:[A],z=new D7({name:"@elysiajs/cors",seed:$,aot:F}),H=G?.some((V)=>V==="*"),U={};if(G){for(let V of G)if(typeof V==="string")U[V]=!0}let Q=(V,R,N)=>{if(Array.isArray(V))return V.some((S)=>Q(S,R,N));switch(typeof V){case"string":if(N in U)return!0;let S=N.indexOf("://");if(S!==-1)N=N.slice(S+3);return V===N;case"function":return V(R)===!0;case"object":if(V instanceof RegExp)return V.test(N)}return!1},B=(V,R)=>{if(A===!0){V.headers.vary="*",V.headers["access-control-allow-origin"]=R.headers.get("Origin")||"*";return}if(H){V.headers.vary="*",V.headers["access-control-allow-origin"]="*";return}if(!G?.length)return;if(G.length){let N=R.headers.get("Origin")??"";for(let S=0;S<G.length;S++)if(Q(G[S],R,N)===!0){V.headers.vary=A?"Origin":"*",V.headers["access-control-allow-origin"]=N||"*";return}}V.headers.vary="Origin"},q=(V,R)=>{if(!R)return;if(J===!0)return V.headers["access-control-allow-methods"]=R??"*";if(J===!1||!J?.length)return;if(J==="*")return V.headers["access-control-allow-methods"]="*";if(!Array.isArray(J))return V.headers["access-control-allow-methods"]=J;V.headers["access-control-allow-methods"]=J.join(", ")},L={};if(typeof Y==="string")L["access-control-expose-headers"]=Y;if(typeof X==="string")L["access-control-allow-headers"]=X;if(W===!0)L["access-control-allow-credentials"]="true";z.headers(L);function E({set:V,request:R,headers:N}){if(B(V,R),q(V,R.headers.get("access-control-request-method")),X===!0||Y===!0){if(X===!0)V.headers["access-control-allow-headers"]=N["access-control-request-headers"];if(Y===!0)V.headers["access-control-expose-headers"]=Object.keys(N).join(",")}if(Z)V.headers["access-control-max-age"]=Z.toString();return new Response(null,{status:204})}if(D)z.options("/",E).options("/*",E);return z.onRequest(function({set:R,request:N}){if(B(R,N),D&&N.method==="OPTIONS")return E({set:R,request:N,headers:qx1?N.headers.toJSON():Object.fromEntries(N.headers.entries())});if(q(R,N.method),X===!0||Y===!0){let S=vx0(N.headers);if(X===!0)R.headers["access-control-allow-headers"]=S;if(Y===!0)R.headers["access-control-expose-headers"]=S}})};var vS=l8(DY(),1),yx0=new vS.Schema({email:{type:String,required:!0,unique:!0},name:String,emailVerified:Boolean,image:String,createdAt:{type:Date,default:Date.now},updatedAt:{type:Date,default:Date.now},first_name:String,last_name:String,is_premium:{type:Boolean,default:!1},subscription_tier:{type:String,default:"free"},subscription_status:{type:String,default:"active"},subscription_expiry:String,ai_generation_count:{type:Number,default:0},ai_generation_limit:{type:Number,default:10},workspace_limit:{type:Number,default:1}}),KX=vS.default.model("User",yx0,"user");var Ex1=async($)=>{if(!$)return null;let F=await KX.findById($.id);if(!F)return null;if(F.subscription_expiry){let A=new Date(F.subscription_expiry);if(new Date>A&&F.subscription_tier!=="free")F.subscription_tier="free",F.is_premium=!1,F.subscription_status="expired",F.ai_generation_limit=FN1.free,F.workspace_limit=AN1.free,await F.save()}return F};var Vx1=($)=>$.get("/me",async({u:F,set:A})=>{if(!F)return A.status=401,"Unauthorized";let J=await Ex1(F);if(!J)return A.status=404,"User record missing";return{id:J._id,email:J.email,firstName:J.first_name,lastName:J.last_name,isPremium:J.is_premium,subscriptionTier:J.subscription_tier,subscriptionStatus:J.subscription_status,subscriptionExpiry:J.subscription_expiry,aiUsage:J.ai_generation_count,aiLimit:J.ai_generation_limit,workspaceLimit:J.workspace_limit,createdAt:J.createdAt}});var KV=l8(DY(),1),ux0=new KV.Schema({workspace_id:{type:KV.Schema.Types.ObjectId,ref:"Workspace",required:!0},title:{type:String,required:!0},category:{type:String,default:"General"},icon:{type:String,default:"activity"},completion_count:{type:Number,default:0},skip_count:{type:Number,default:0}}),H7=KV.default.model("Habit",ux0);var BV=l8(DY(),1),hx0=new BV.Schema({workspace_id:{type:BV.Schema.Types.ObjectId,ref:"Workspace"},title:String,deadline:String,status:{type:Number,default:0},overdue:{type:Number,default:0}}),_Q=BV.default.model("Task",hx0);var kQ=l8(DY(),1),mx0=new kQ.Schema({habit_id:{type:kQ.Schema.Types.ObjectId,ref:"Habit",required:!0},workspace_id:{type:kQ.Schema.Types.ObjectId,ref:"Workspace",required:!0},date:{type:String,required:!0},status:{type:Number,required:!0}}),BX=kQ.default.model("log",mx0);async function Nx1($){let F=await D2.find({user_id:$}),A=new Date;A.setDate(A.getDate()-1);let J=A.toISOString().split("T")[0],X=[];for(let Y of F){if(Y.last_completed_date){if(Y.last_completed_date<J)Y.streak=0,await Y.save()}X.push(Y)}return X}var Cx1=($)=>$.get("/workspaces",async({u:F,set:A})=>{if(!F)return A.status=401,[];return await Nx1(F.id)}).post("/workspaces",async({body:F,u:A,set:J})=>{if(!A)return J.status=401,"Unauthorized";try{let X=await KX.findById(A.id),Y=await D2.countDocuments({user_id:A.id});if(X&&Y>=(X.workspace_limit||1))return J.status=403,"Workspace limit reached";let W=await D2.create({user_id:A.id,name:F.name,goal:F.goal||"My goal"});if(F.initial_habits&&F.initial_habits.length>0){let Z=F.initial_habits.map((D)=>({workspace_id:W._id,title:D.title,category:D.category||"General",icon:D.icon||"activity"}));await H7.insertMany(Z)}return console.log(W),W.toObject()}catch(X){return console.error("Workspace creation error",X),J.status=500,"Failed to create workspace"}},{body:W1.Object({name:W1.String(),goal:W1.Optional(W1.String()),initial_habits:W1.Optional(W1.Array(W1.Object({title:W1.String(),category:W1.Optional(W1.String()),icon:W1.Optional(W1.String())})))})}).patch("/workspaces/:id",async({params:{id:F},body:A,u:J,set:X})=>{if(!J)return X.status=401,"Unauthorized";let Y=await D2.findOneAndUpdate({_id:F,user_id:J.id},{$set:A},{new:!0});if(!Y)return X.status=404,"Workspace not found";return Y.toObject()},{body:W1.Object({name:W1.Optional(W1.String()),goal:W1.Optional(W1.String())})}).delete("/workspaces/:id",async({params:{id:F},u:A,set:J})=>{if(!A)return J.status=401,"Unauthorized";if(!await D2.findOne({_id:F,user_id:A.id}))return J.status=404,"Workspace not found";return await H7.deleteMany({workspace_id:F}),console.log("Habits deleted"),await _Q.deleteMany({workspace_id:F}),console.log("Tasks deleted"),await BX.deleteMany({workspace_id:F}),console.log("Logs deleted"),console.log(F),await D2.deleteOne({_id:F}),{message:"Workspace Deleted"}});async function Mx1($,F,A,J){let X=await H7.findById($);if(console.log(`Habit ID = ${$}
Habit = ${X}`),!X)throw Error("Habit not found.");let Y=await D2.findById(X.workspace_id);if(Y?.user_id!==F)throw Error("Unauthorized");let W=await BX.findOne({habit_id:$,date:A});if(W){if(W.status!==J){let G=J===1?{completion_count:1,skip_count:-1}:{completion_count:-1,skip_count:1};await H7.findByIdAndUpdate($,{$inc:G}),W.status=J,await W.save()}}else{await BX.create({habit_id:$,workspace_id:Y?._id,date:A,status:J});let G=J===1?"completion_count":"skip_count";if(await H7.findByIdAndUpdate($,{$inc:{[G]:1}}),J===1&&Y){let z=new Date().toISOString().split("T")[0],H=new Date;H.setDate(H.getDate()-1);let U=H.toISOString().split("T")[0];if(Y.last_completed_date!==z){if(Y.last_completed_date===U)Y.streak+=1;else Y.streak=1;Y.last_completed_date=z,await Y.save()}}}let Z=await H7.findById($),D=await D2.findById(Y?._id);return{message:"Logged",completion_count:Z?.completion_count,skip_count:Z?.skip_count,workspace_streak:D?.streak}}var Px1=($)=>$.get("/habits",async({headers:F,u:A,set:J})=>{if(!A)return J.status=401,[];let X=F["x-workspace-id"];if(!X){let z=await D2.findOne({user_id:A.id});if(!z)return J.status=404,[];X=z._id.toString()}let Y=await H7.find({workspace_id:X}).lean(),W=new Date().toISOString().split("T")[0],Z=Y.map((z)=>z._id),D=await BX.find({habit_id:{$in:Z},date:W}),G=new Map(D.map((z)=>[z.habit_id.toString(),z.status]));return Y.map((z)=>({...z,today_status:G.get(z._id.toString())}))}).post("/habits",async({headers:F,body:A,u:J,set:X})=>{if(!J)return X.status=401,"Unauthorized";let Y=F["x-workspace-id"];if(!Y)Y=(await D2.findOne({user_id:J.id}))?._id;return await H7.create({workspace_id:Y,title:A.title,category:A.category,icon:A.icon})},{body:W1.Object({title:W1.String(),category:W1.String(),icon:W1.Optional(W1.String())})}).post("/habits/:id/log",async({params:{id:F},body:A,u:J,set:X})=>{if(!J){X.status=401;return}let Y=A.status;if(![0,1].includes(Y))return X.status=400,"Invalid status";try{return await Mx1(F,J.id,A.date,Y)}catch(W){if(W.message==="Unauthorized")X.status=403;else if(W.message==="Habit not found")X.status=404;else X.status=500;return W.message}},{body:W1.Object({date:W1.String(),status:W1.Number()})});async function Rx1($){return await _Q.find({workspace_id:$}).lean()}async function Ix1($,F,A){return(await _Q.create({workspace_id:$,title:F,deadline:A})).toObject()}async function Tx1($,F){return await _Q.findByIdAndUpdate($,{$set:F}),{message:"Updated"}}var jx1=($)=>$.get("/tasks",async({headers:F,u:A,set:J})=>{if(!A)return J.status=401,[];let X=F["x-workspace-id"];if(!X)X=(await D2.findOne({user_id:A.id}))?._id;return await Rx1(X)}).post("/tasks",async({headers:F,body:A,u:J,set:X})=>{if(!J){X.status=401;return}let Y=F["x-workspace-id"];if(!Y)Y=(await D2.findOne({user_id:J.id}))?._id;return console.log(A),await Ix1(Y,A.title,A.deadline)},{body:W1.Object({title:W1.String(),deadline:W1.Optional(W1.String())})}).patch("/tasks/:id",async({params:{id:F},body:A})=>{return await Tx1(F,A)},{body:W1.Object({title:W1.Optional(W1.String()),deadline:W1.Optional(W1.String()),status:W1.Optional(W1.Number()),overdue:W1.Optional(W1.Number())})});var bQ=l8(DY(),1),cx0=new bQ.Schema({workspace_id:{type:bQ.Schema.Types.ObjectId,ref:"Workspace"},type:String,data:bQ.Schema.Types.Mixed,created_at:{type:Date,default:Date.now}}),Q11=bQ.default.model("AnalyticsCache",cx0);var ju1=l8(Xy1(),1);import{createWriteStream as Yu0}from"fs";import*as N_ from"fs/promises";import{writeFile as Wu0}from"fs/promises";import{Readable as Zu0}from"stream";import{finished as Du0}from"stream/promises";import*as Ou1 from"ws";import*as Su1 from"path";var Gu0=void 0,zu0=void 0;function Hu0(){return{geminiUrl:Gu0,vertexUrl:zu0}}function Uu0($,F,A,J){var X,Y;if(!($===null||$===void 0?void 0:$.baseUrl)){let W=Hu0();if(F)return(X=W.vertexUrl)!==null&&X!==void 0?X:A;else return(Y=W.geminiUrl)!==null&&Y!==void 0?Y:J}return $.baseUrl}class vA{}function m1($,F){let A=/\{([^}]+)\}/g;return $.replace(A,(J,X)=>{if(Object.prototype.hasOwnProperty.call(F,X)){let Y=F[X];return Y!==void 0&&Y!==null?String(Y):""}else throw Error(`Key '${X}' not found in valueMap.`)})}function w($,F,A){for(let Y=0;Y<F.length-1;Y++){let W=F[Y];if(W.endsWith("[]")){let Z=W.slice(0,-2);if(!(Z in $))if(Array.isArray(A))$[Z]=Array.from({length:A.length},()=>({}));else throw Error(`Value must be a list given an array path ${W}`);if(Array.isArray($[Z])){let D=$[Z];if(Array.isArray(A))for(let G=0;G<D.length;G++){let z=D[G];w(z,F.slice(Y+1),A[G])}else for(let G of D)w(G,F.slice(Y+1),A)}return}else if(W.endsWith("[0]")){let Z=W.slice(0,-3);if(!(Z in $))$[Z]=[{}];let D=$[Z];w(D[0],F.slice(Y+1),A);return}if(!$[W]||typeof $[W]!=="object")$[W]={};$=$[W]}let J=F[F.length-1],X=$[J];if(X!==void 0){if(!A||typeof A==="object"&&Object.keys(A).length===0)return;if(A===X)return;if(typeof X==="object"&&typeof A==="object"&&X!==null&&A!==null)Object.assign(X,A);else throw Error(`Cannot set value for an existing key. Key: ${J}`)}else if(J==="_self"&&typeof A==="object"&&A!==null&&!Array.isArray(A))Object.assign($,A);else $[J]=A}function K($,F,A=void 0){try{if(F.length===1&&F[0]==="_self")return $;for(let J=0;J<F.length;J++){if(typeof $!=="object"||$===null)return A;let X=F[J];if(X.endsWith("[]")){let Y=X.slice(0,-2);if(Y in $){let W=$[Y];if(!Array.isArray(W))return A;return W.map((Z)=>K(Z,F.slice(J+1),A))}else return A}else $=$[X]}return $}catch(J){if(J instanceof TypeError)return A;throw J}}function Qu0($,F){for(let[A,J]of Object.entries(F)){let X=A.split("."),Y=J.split("."),W=new Set,Z=-1;for(let D=0;D<X.length;D++)if(X[D]==="*"){Z=D;break}if(Z!==-1&&Y.length>Z)for(let D=Z;D<Y.length;D++){let G=Y[D];if(G!=="*"&&!G.endsWith("[]")&&!G.endsWith("[0]"))W.add(G)}b01($,X,Y,0,W)}}function b01($,F,A,J,X){if(J>=F.length)return;if(typeof $!=="object"||$===null)return;let Y=F[J];if(Y.endsWith("[]")){let W=Y.slice(0,-2),Z=$;if(W in Z&&Array.isArray(Z[W]))for(let D of Z[W])b01(D,F,A,J+1,X)}else if(Y==="*"){if(typeof $==="object"&&$!==null&&!Array.isArray($)){let W=$,Z=Object.keys(W).filter((G)=>!G.startsWith("_")&&!X.has(G)),D={};for(let G of Z)D[G]=W[G];for(let[G,z]of Object.entries(D)){let H=[];for(let U of A.slice(J))if(U==="*")H.push(G);else H.push(U);w(W,H,z)}for(let G of Z)delete W[G]}}else{let W=$;if(Y in W)b01(W[Y],F,A,J+1,X)}}function A61($){if(typeof $!=="string")throw Error("fromImageBytes must be a string");return $}function Ku0($){let F={},A=K($,["operationName"]);if(A!=null)w(F,["operationName"],A);let J=K($,["resourceName"]);if(J!=null)w(F,["_url","resourceName"],J);return F}function Bu0($){let F={},A=K($,["name"]);if(A!=null)w(F,["name"],A);let J=K($,["metadata"]);if(J!=null)w(F,["metadata"],J);let X=K($,["done"]);if(X!=null)w(F,["done"],X);let Y=K($,["error"]);if(Y!=null)w(F,["error"],Y);let W=K($,["response","generateVideoResponse"]);if(W!=null)w(F,["response"],qu0(W));return F}function wu0($){let F={},A=K($,["name"]);if(A!=null)w(F,["name"],A);let J=K($,["metadata"]);if(J!=null)w(F,["metadata"],J);let X=K($,["done"]);if(X!=null)w(F,["done"],X);let Y=K($,["error"]);if(Y!=null)w(F,["error"],Y);let W=K($,["response"]);if(W!=null)w(F,["response"],Lu0(W));return F}function qu0($){let F={},A=K($,["generatedSamples"]);if(A!=null){let Y=A;if(Array.isArray(Y))Y=Y.map((W)=>{return Eu0(W)});w(F,["generatedVideos"],Y)}let J=K($,["raiMediaFilteredCount"]);if(J!=null)w(F,["raiMediaFilteredCount"],J);let X=K($,["raiMediaFilteredReasons"]);if(X!=null)w(F,["raiMediaFilteredReasons"],X);return F}function Lu0($){let F={},A=K($,["videos"]);if(A!=null){let Y=A;if(Array.isArray(Y))Y=Y.map((W)=>{return Vu0(W)});w(F,["generatedVideos"],Y)}let J=K($,["raiMediaFilteredCount"]);if(J!=null)w(F,["raiMediaFilteredCount"],J);let X=K($,["raiMediaFilteredReasons"]);if(X!=null)w(F,["raiMediaFilteredReasons"],X);return F}function Eu0($){let F={},A=K($,["video"]);if(A!=null)w(F,["video"],Iu0(A));return F}function Vu0($){let F={},A=K($,["_self"]);if(A!=null)w(F,["video"],Tu0(A));return F}function Nu0($){let F={},A=K($,["operationName"]);if(A!=null)w(F,["_url","operationName"],A);return F}function Cu0($){let F={},A=K($,["operationName"]);if(A!=null)w(F,["_url","operationName"],A);return F}function Mu0($){let F={},A=K($,["name"]);if(A!=null)w(F,["name"],A);let J=K($,["metadata"]);if(J!=null)w(F,["metadata"],J);let X=K($,["done"]);if(X!=null)w(F,["done"],X);let Y=K($,["error"]);if(Y!=null)w(F,["error"],Y);let W=K($,["response"]);if(W!=null)w(F,["response"],Pu0(W));return F}function Pu0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["parent"]);if(J!=null)w(F,["parent"],J);let X=K($,["documentName"]);if(X!=null)w(F,["documentName"],X);return F}function J61($){let F={},A=K($,["name"]);if(A!=null)w(F,["name"],A);let J=K($,["metadata"]);if(J!=null)w(F,["metadata"],J);let X=K($,["done"]);if(X!=null)w(F,["done"],X);let Y=K($,["error"]);if(Y!=null)w(F,["error"],Y);let W=K($,["response"]);if(W!=null)w(F,["response"],Ru0(W));return F}function Ru0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["parent"]);if(J!=null)w(F,["parent"],J);let X=K($,["documentName"]);if(X!=null)w(F,["documentName"],X);return F}function Iu0($){let F={},A=K($,["uri"]);if(A!=null)w(F,["uri"],A);let J=K($,["encodedVideo"]);if(J!=null)w(F,["videoBytes"],A61(J));let X=K($,["encoding"]);if(X!=null)w(F,["mimeType"],X);return F}function Tu0($){let F={},A=K($,["gcsUri"]);if(A!=null)w(F,["uri"],A);let J=K($,["bytesBase64Encoded"]);if(J!=null)w(F,["videoBytes"],A61(J));let X=K($,["mimeType"]);if(X!=null)w(F,["mimeType"],X);return F}var Yy1;(function($){$.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",$.OUTCOME_OK="OUTCOME_OK",$.OUTCOME_FAILED="OUTCOME_FAILED",$.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Yy1||(Yy1={}));var Wy1;(function($){$.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",$.PYTHON="PYTHON"})(Wy1||(Wy1={}));var Zy1;(function($){$.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",$.SILENT="SILENT",$.WHEN_IDLE="WHEN_IDLE",$.INTERRUPT="INTERRUPT"})(Zy1||(Zy1={}));var RW;(function($){$.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",$.STRING="STRING",$.NUMBER="NUMBER",$.INTEGER="INTEGER",$.BOOLEAN="BOOLEAN",$.ARRAY="ARRAY",$.OBJECT="OBJECT",$.NULL="NULL"})(RW||(RW={}));var Dy1;(function($){$.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",$.SIMPLE_SEARCH="SIMPLE_SEARCH",$.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Dy1||(Dy1={}));var Gy1;(function($){$.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",$.NO_AUTH="NO_AUTH",$.API_KEY_AUTH="API_KEY_AUTH",$.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",$.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",$.OAUTH="OAUTH",$.OIDC_AUTH="OIDC_AUTH"})(Gy1||(Gy1={}));var zy1;(function($){$.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",$.HTTP_IN_QUERY="HTTP_IN_QUERY",$.HTTP_IN_HEADER="HTTP_IN_HEADER",$.HTTP_IN_PATH="HTTP_IN_PATH",$.HTTP_IN_BODY="HTTP_IN_BODY",$.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(zy1||(zy1={}));var Hy1;(function($){$.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",$.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",$.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",$.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",$.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",$.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",$.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Hy1||(Hy1={}));var Uy1;(function($){$.UNSPECIFIED="UNSPECIFIED",$.BLOCKING="BLOCKING",$.NON_BLOCKING="NON_BLOCKING"})(Uy1||(Uy1={}));var Qy1;(function($){$.MODE_UNSPECIFIED="MODE_UNSPECIFIED",$.MODE_DYNAMIC="MODE_DYNAMIC"})(Qy1||(Qy1={}));var Ky1;(function($){$.MODE_UNSPECIFIED="MODE_UNSPECIFIED",$.AUTO="AUTO",$.ANY="ANY",$.NONE="NONE",$.VALIDATED="VALIDATED"})(Ky1||(Ky1={}));var By1;(function($){$.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",$.LOW="LOW",$.MEDIUM="MEDIUM",$.HIGH="HIGH",$.MINIMAL="MINIMAL"})(By1||(By1={}));var wy1;(function($){$.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",$.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",$.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",$.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",$.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",$.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",$.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",$.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",$.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",$.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",$.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(wy1||(wy1={}));var qy1;(function($){$.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",$.SEVERITY="SEVERITY",$.PROBABILITY="PROBABILITY"})(qy1||(qy1={}));var Ly1;(function($){$.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",$.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",$.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",$.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",$.BLOCK_NONE="BLOCK_NONE",$.OFF="OFF"})(Ly1||(Ly1={}));var Ey1;(function($){$.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",$.STOP="STOP",$.MAX_TOKENS="MAX_TOKENS",$.SAFETY="SAFETY",$.RECITATION="RECITATION",$.LANGUAGE="LANGUAGE",$.OTHER="OTHER",$.BLOCKLIST="BLOCKLIST",$.PROHIBITED_CONTENT="PROHIBITED_CONTENT",$.SPII="SPII",$.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",$.IMAGE_SAFETY="IMAGE_SAFETY",$.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",$.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",$.NO_IMAGE="NO_IMAGE",$.IMAGE_RECITATION="IMAGE_RECITATION",$.IMAGE_OTHER="IMAGE_OTHER"})(Ey1||(Ey1={}));var Vy1;(function($){$.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",$.NEGLIGIBLE="NEGLIGIBLE",$.LOW="LOW",$.MEDIUM="MEDIUM",$.HIGH="HIGH"})(Vy1||(Vy1={}));var Ny1;(function($){$.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",$.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",$.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",$.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",$.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ny1||(Ny1={}));var Cy1;(function($){$.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",$.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",$.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",$.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",$.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Cy1||(Cy1={}));var My1;(function($){$.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",$.SAFETY="SAFETY",$.OTHER="OTHER",$.BLOCKLIST="BLOCKLIST",$.PROHIBITED_CONTENT="PROHIBITED_CONTENT",$.IMAGE_SAFETY="IMAGE_SAFETY",$.MODEL_ARMOR="MODEL_ARMOR",$.JAILBREAK="JAILBREAK"})(My1||(My1={}));var Py1;(function($){$.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",$.ON_DEMAND="ON_DEMAND",$.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Py1||(Py1={}));var B_;(function($){$.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",$.TEXT="TEXT",$.IMAGE="IMAGE",$.AUDIO="AUDIO"})(B_||(B_={}));var Ry1;(function($){$.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",$.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",$.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",$.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ry1||(Ry1={}));var Iy1;(function($){$.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",$.TUNING_MODE_FULL="TUNING_MODE_FULL",$.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Iy1||(Iy1={}));var Ty1;(function($){$.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",$.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",$.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",$.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",$.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",$.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",$.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ty1||(Ty1={}));var x01;(function($){$.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",$.JOB_STATE_QUEUED="JOB_STATE_QUEUED",$.JOB_STATE_PENDING="JOB_STATE_PENDING",$.JOB_STATE_RUNNING="JOB_STATE_RUNNING",$.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",$.JOB_STATE_FAILED="JOB_STATE_FAILED",$.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",$.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",$.JOB_STATE_PAUSED="JOB_STATE_PAUSED",$.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",$.JOB_STATE_UPDATING="JOB_STATE_UPDATING",$.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(x01||(x01={}));var jy1;(function($){$.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",$.TUNING_TASK_I2V="TUNING_TASK_I2V",$.TUNING_TASK_T2V="TUNING_TASK_T2V",$.TUNING_TASK_R2V="TUNING_TASK_R2V"})(jy1||(jy1={}));var Oy1;(function($){$.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",$.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",$.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",$.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",$.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Oy1||(Oy1={}));var g01;(function($){$.COLLECTION="COLLECTION"})(g01||(g01={}));var Sy1;(function($){$.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",$.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",$.BALANCED="BALANCED",$.PRIORITIZE_COST="PRIORITIZE_COST"})(Sy1||(Sy1={}));var _y1;(function($){$.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",$.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(_y1||(_y1={}));var ky1;(function($){$.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",$.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",$.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",$.BLOCK_NONE="BLOCK_NONE"})(ky1||(ky1={}));var by1;(function($){$.DONT_ALLOW="DONT_ALLOW",$.ALLOW_ADULT="ALLOW_ADULT",$.ALLOW_ALL="ALLOW_ALL"})(by1||(by1={}));var xy1;(function($){$.auto="auto",$.en="en",$.ja="ja",$.ko="ko",$.hi="hi",$.zh="zh",$.pt="pt",$.es="es"})(xy1||(xy1={}));var gy1;(function($){$.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",$.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",$.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",$.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",$.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(gy1||(gy1={}));var fy1;(function($){$.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",$.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",$.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",$.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(fy1||(fy1={}));var vy1;(function($){$.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",$.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",$.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",$.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vy1||(vy1={}));var yy1;(function($){$.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",$.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",$.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",$.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",$.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",$.EDIT_MODE_STYLE="EDIT_MODE_STYLE",$.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",$.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(yy1||(yy1={}));var uy1;(function($){$.FOREGROUND="FOREGROUND",$.BACKGROUND="BACKGROUND",$.PROMPT="PROMPT",$.SEMANTIC="SEMANTIC",$.INTERACTIVE="INTERACTIVE"})(uy1||(uy1={}));var hy1;(function($){$.ASSET="ASSET",$.STYLE="STYLE"})(hy1||(hy1={}));var my1;(function($){$.INSERT="INSERT",$.REMOVE="REMOVE",$.REMOVE_STATIC="REMOVE_STATIC",$.OUTPAINT="OUTPAINT"})(my1||(my1={}));var dy1;(function($){$.OPTIMIZED="OPTIMIZED",$.LOSSLESS="LOSSLESS"})(dy1||(dy1={}));var cy1;(function($){$.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",$.PREFERENCE_TUNING="PREFERENCE_TUNING"})(cy1||(cy1={}));var ly1;(function($){$.STATE_UNSPECIFIED="STATE_UNSPECIFIED",$.STATE_PENDING="STATE_PENDING",$.STATE_ACTIVE="STATE_ACTIVE",$.STATE_FAILED="STATE_FAILED"})(ly1||(ly1={}));var py1;(function($){$.STATE_UNSPECIFIED="STATE_UNSPECIFIED",$.PROCESSING="PROCESSING",$.ACTIVE="ACTIVE",$.FAILED="FAILED"})(py1||(py1={}));var iy1;(function($){$.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",$.UPLOADED="UPLOADED",$.GENERATED="GENERATED",$.REGISTERED="REGISTERED"})(iy1||(iy1={}));var ny1;(function($){$.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",$.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",$.RESPONSE_REJECTED="RESPONSE_REJECTED",$.NEED_MORE_INPUT="NEED_MORE_INPUT"})(ny1||(ny1={}));var ry1;(function($){$.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",$.TEXT="TEXT",$.IMAGE="IMAGE",$.VIDEO="VIDEO",$.AUDIO="AUDIO",$.DOCUMENT="DOCUMENT"})(ry1||(ry1={}));var ay1;(function($){$.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",$.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",$.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(ay1||(ay1={}));var ty1;(function($){$.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",$.ACTIVITY_START="ACTIVITY_START",$.ACTIVITY_END="ACTIVITY_END"})(ty1||(ty1={}));var sy1;(function($){$.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",$.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",$.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(sy1||(sy1={}));var oy1;(function($){$.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",$.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",$.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(oy1||(oy1={}));var ey1;(function($){$.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",$.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",$.NO_INTERRUPTION="NO_INTERRUPTION"})(ey1||(ey1={}));var $u1;(function($){$.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",$.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",$.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})($u1||($u1={}));var Fu1;(function($){$.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",$.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",$.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",$.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",$.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",$.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",$.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",$.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",$.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",$.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",$.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",$.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",$.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Fu1||(Fu1={}));var Au1;(function($){$.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",$.QUALITY="QUALITY",$.DIVERSITY="DIVERSITY",$.VOCALIZATION="VOCALIZATION"})(Au1||(Au1={}));var rQ;(function($){$.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",$.PLAY="PLAY",$.PAUSE="PAUSE",$.STOP="STOP",$.RESET_CONTEXT="RESET_CONTEXT"})(rQ||(rQ={}));class oQ{constructor($){let F={};for(let A of $.headers.entries())F[A[0]]=A[1];this.headers=F,this.responseInternal=$}json(){return this.responseInternal.json()}}class iQ{get text(){var $,F,A,J,X,Y,W,Z;if(((J=(A=(F=($=this.candidates)===null||$===void 0?void 0:$[0])===null||F===void 0?void 0:F.content)===null||A===void 0?void 0:A.parts)===null||J===void 0?void 0:J.length)===0)return;if(this.candidates&&this.candidates.length>1)console.warn("there are multiple candidates in the response, returning text from the first one.");let D="",G=!1,z=[];for(let H of(Z=(W=(Y=(X=this.candidates)===null||X===void 0?void 0:X[0])===null||Y===void 0?void 0:Y.content)===null||W===void 0?void 0:W.parts)!==null&&Z!==void 0?Z:[]){for(let[U,Q]of Object.entries(H))if(U!=="text"&&U!=="thought"&&U!=="thoughtSignature"&&(Q!==null||Q!==void 0))z.push(U);if(typeof H.text==="string"){if(typeof H.thought==="boolean"&&H.thought)continue;G=!0,D+=H.text}}if(z.length>0)console.warn(`there are non-text parts ${z} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`);return G?D:void 0}get data(){var $,F,A,J,X,Y,W,Z;if(((J=(A=(F=($=this.candidates)===null||$===void 0?void 0:$[0])===null||F===void 0?void 0:F.content)===null||A===void 0?void 0:A.parts)===null||J===void 0?void 0:J.length)===0)return;if(this.candidates&&this.candidates.length>1)console.warn("there are multiple candidates in the response, returning data from the first one.");let D="",G=[];for(let z of(Z=(W=(Y=(X=this.candidates)===null||X===void 0?void 0:X[0])===null||Y===void 0?void 0:Y.content)===null||W===void 0?void 0:W.parts)!==null&&Z!==void 0?Z:[]){for(let[H,U]of Object.entries(z))if(H!=="inlineData"&&(U!==null||U!==void 0))G.push(H);if(z.inlineData&&typeof z.inlineData.data==="string")D+=atob(z.inlineData.data)}if(G.length>0)console.warn(`there are non-data parts ${G} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`);return D.length>0?btoa(D):void 0}get functionCalls(){var $,F,A,J,X,Y,W,Z;if(((J=(A=(F=($=this.candidates)===null||$===void 0?void 0:$[0])===null||F===void 0?void 0:F.content)===null||A===void 0?void 0:A.parts)===null||J===void 0?void 0:J.length)===0)return;if(this.candidates&&this.candidates.length>1)console.warn("there are multiple candidates in the response, returning function calls from the first one.");let D=(Z=(W=(Y=(X=this.candidates)===null||X===void 0?void 0:X[0])===null||Y===void 0?void 0:Y.content)===null||W===void 0?void 0:W.parts)===null||Z===void 0?void 0:Z.filter((G)=>G.functionCall).map((G)=>G.functionCall).filter((G)=>G!==void 0);if((D===null||D===void 0?void 0:D.length)===0)return;return D}get executableCode(){var $,F,A,J,X,Y,W,Z,D;if(((J=(A=(F=($=this.candidates)===null||$===void 0?void 0:$[0])===null||F===void 0?void 0:F.content)===null||A===void 0?void 0:A.parts)===null||J===void 0?void 0:J.length)===0)return;if(this.candidates&&this.candidates.length>1)console.warn("there are multiple candidates in the response, returning executable code from the first one.");let G=(Z=(W=(Y=(X=this.candidates)===null||X===void 0?void 0:X[0])===null||Y===void 0?void 0:Y.content)===null||W===void 0?void 0:W.parts)===null||Z===void 0?void 0:Z.filter((z)=>z.executableCode).map((z)=>z.executableCode).filter((z)=>z!==void 0);if((G===null||G===void 0?void 0:G.length)===0)return;return(D=G===null||G===void 0?void 0:G[0])===null||D===void 0?void 0:D.code}get codeExecutionResult(){var $,F,A,J,X,Y,W,Z,D;if(((J=(A=(F=($=this.candidates)===null||$===void 0?void 0:$[0])===null||F===void 0?void 0:F.content)===null||A===void 0?void 0:A.parts)===null||J===void 0?void 0:J.length)===0)return;if(this.candidates&&this.candidates.length>1)console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let G=(Z=(W=(Y=(X=this.candidates)===null||X===void 0?void 0:X[0])===null||Y===void 0?void 0:Y.content)===null||W===void 0?void 0:W.parts)===null||Z===void 0?void 0:Z.filter((z)=>z.codeExecutionResult).map((z)=>z.codeExecutionResult).filter((z)=>z!==void 0);if((G===null||G===void 0?void 0:G.length)===0)return;return(D=G===null||G===void 0?void 0:G[0])===null||D===void 0?void 0:D.output}}class f01{}class v01{}class _u1{}class ku1{}class bu1{}class xu1{}class y01{}class u01{}class h01{}class gu1{}class w_{_fromAPIResponse({apiResponse:$,_isVertexAI:F}){let A=new w_,J,X=$;if(F)J=wu0(X);else J=Bu0(X);return Object.assign(A,J),A}}class m01{}class d01{}class c01{}class l01{}class fu1{}class vu1{}class yu1{}class X61{_fromAPIResponse({apiResponse:$,_isVertexAI:F}){let A=new X61,X=Mu0($);return Object.assign(A,X),A}}class uu1{}class hu1{}class mu1{}class p01{}class du1{get text(){var $,F,A;let J="",X=!1,Y=[];for(let W of(A=(F=($=this.serverContent)===null||$===void 0?void 0:$.modelTurn)===null||F===void 0?void 0:F.parts)!==null&&A!==void 0?A:[]){for(let[Z,D]of Object.entries(W))if(Z!=="text"&&Z!=="thought"&&D!==null)Y.push(Z);if(typeof W.text==="string"){if(typeof W.thought==="boolean"&&W.thought)continue;X=!0,J+=W.text}}if(Y.length>0)console.warn(`there are non-text parts ${Y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`);return X?J:void 0}get data(){var $,F,A;let J="",X=[];for(let Y of(A=(F=($=this.serverContent)===null||$===void 0?void 0:$.modelTurn)===null||F===void 0?void 0:F.parts)!==null&&A!==void 0?A:[]){for(let[W,Z]of Object.entries(Y))if(W!=="inlineData"&&Z!==null)X.push(W);if(Y.inlineData&&typeof Y.inlineData.data==="string")J+=atob(Y.inlineData.data)}if(X.length>0)console.warn(`there are non-data parts ${X} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`);return J.length>0?btoa(J):void 0}}class cu1{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0];return}}class C_{_fromAPIResponse({apiResponse:$,_isVertexAI:F}){let A=new C_,X=J61($);return Object.assign(A,X),A}}function k6($,F){if(!F||typeof F!=="string")throw Error("model is required and must be a string");if(F.includes("..")||F.includes("?")||F.includes("&"))throw Error("invalid model parameter");if($.isVertexAI())if(F.startsWith("publishers/")||F.startsWith("projects/")||F.startsWith("models/"))return F;else if(F.indexOf("/")>=0){let A=F.split("/",2);return`publishers/${A[0]}/models/${A[1]}`}else return`publishers/google/models/${F}`;else if(F.startsWith("models/")||F.startsWith("tunedModels/"))return F;else return`models/${F}`}function lu1($,F){let A=k6($,F);if(!A)return"";if(A.startsWith("publishers/")&&$.isVertexAI())return`projects/${$.getProject()}/locations/${$.getLocation()}/${A}`;else if(A.startsWith("models/")&&$.isVertexAI())return`projects/${$.getProject()}/locations/${$.getLocation()}/publishers/google/${A}`;else return A}function pu1($){if(Array.isArray($))return $.map((F)=>q_(F));else return[q_($)]}function q_($){if(typeof $==="object"&&$!==null)return $;throw Error(`Could not parse input as Blob. Unsupported blob type: ${typeof $}`)}function iu1($){let F=q_($);if(F.mimeType&&F.mimeType.startsWith("image/"))return F;throw Error(`Unsupported mime type: ${F.mimeType}`)}function nu1($){let F=q_($);if(F.mimeType&&F.mimeType.startsWith("audio/"))return F;throw Error(`Unsupported mime type: ${F.mimeType}`)}function Ju1($){if($===null||$===void 0)throw Error("PartUnion is required");if(typeof $==="object")return $;if(typeof $==="string")return{text:$};throw Error(`Unsupported part type: ${typeof $}`)}function ru1($){if($===null||$===void 0||Array.isArray($)&&$.length===0)throw Error("PartListUnion is required");if(Array.isArray($))return $.map((F)=>Ju1(F));return[Ju1($)]}function i01($){return $!==null&&$!==void 0&&typeof $==="object"&&"parts"in $&&Array.isArray($.parts)}function Xu1($){return $!==null&&$!==void 0&&typeof $==="object"&&"functionCall"in $}function Yu1($){return $!==null&&$!==void 0&&typeof $==="object"&&"functionResponse"in $}function c8($){if($===null||$===void 0)throw Error("ContentUnion is required");if(i01($))return $;return{role:"user",parts:ru1($)}}function Y61($,F){if(!F)return[];if($.isVertexAI()&&Array.isArray(F))return F.flatMap((A)=>{let J=c8(A);if(J.parts&&J.parts.length>0&&J.parts[0].text!==void 0)return[J.parts[0].text];return[]});else if($.isVertexAI()){let A=c8(F);if(A.parts&&A.parts.length>0&&A.parts[0].text!==void 0)return[A.parts[0].text];return[]}if(Array.isArray(F))return F.map((A)=>c8(A));return[c8(F)]}function A$($){if($===null||$===void 0||Array.isArray($)&&$.length===0)throw Error("contents are required");if(!Array.isArray($)){if(Xu1($)||Yu1($))throw Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[c8($)]}let F=[],A=[],J=i01($[0]);for(let X of $){let Y=i01(X);if(Y!=J)throw Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(Y)F.push(X);else if(Xu1(X)||Yu1(X))throw Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");else A.push(X)}if(!J)F.push({role:"user",parts:ru1(A)});return F}function ju0($,F){if($.includes("null"))F.nullable=!0;let A=$.filter((J)=>J!=="null");if(A.length===1)F.type=Object.values(RW).includes(A[0].toUpperCase())?A[0].toUpperCase():RW.TYPE_UNSPECIFIED;else{F.anyOf=[];for(let J of A)F.anyOf.push({type:Object.values(RW).includes(J.toUpperCase())?J.toUpperCase():RW.TYPE_UNSPECIFIED})}}function tQ($){let F={},A=["items"],J=["anyOf"],X=["properties"];if($.type&&$.anyOf)throw Error("type and anyOf cannot be both populated.");let Y=$.anyOf;if(Y!=null&&Y.length==2){if(Y[0].type==="null")F.nullable=!0,$=Y[1];else if(Y[1].type==="null")F.nullable=!0,$=Y[0]}if($.type instanceof Array)ju0($.type,F);for(let[W,Z]of Object.entries($)){if(Z==null)continue;if(W=="type"){if(Z==="null")throw Error("type: null can not be the only possible type for the field.");if(Z instanceof Array)continue;F.type=Object.values(RW).includes(Z.toUpperCase())?Z.toUpperCase():RW.TYPE_UNSPECIFIED}else if(A.includes(W))F[W]=tQ(Z);else if(J.includes(W)){let D=[];for(let G of Z){if(G.type=="null"){F.nullable=!0;continue}D.push(tQ(G))}F[W]=D}else if(X.includes(W)){let D={};for(let[G,z]of Object.entries(Z))D[G]=tQ(z);F[W]=D}else{if(W==="additionalProperties")continue;F[W]=Z}}return F}function W61($){return tQ($)}function Z61($){if(typeof $==="object")return $;else if(typeof $==="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:$}}};else throw Error(`Unsupported speechConfig type: ${typeof $}`)}function D61($){if("multiSpeakerVoiceConfig"in $)throw Error("multiSpeakerVoiceConfig is not supported in the live API.");return $}function eQ($){if($.functionDeclarations)for(let F of $.functionDeclarations){if(F.parameters){if(!Object.keys(F.parameters).includes("$schema"))F.parameters=tQ(F.parameters);else if(!F.parametersJsonSchema)F.parametersJsonSchema=F.parameters,delete F.parameters}if(F.response){if(!Object.keys(F.response).includes("$schema"))F.response=tQ(F.response);else if(!F.responseJsonSchema)F.responseJsonSchema=F.response,delete F.response}}return $}function $K($){if($===void 0||$===null)throw Error("tools is required");if(!Array.isArray($))throw Error("tools is required and must be an array of Tools");let F=[];for(let A of $)F.push(A);return F}function Ou0($,F,A,J=1){let X=!F.startsWith(`${A}/`)&&F.split("/").length===J;if($.isVertexAI())if(F.startsWith("projects/"))return F;else if(F.startsWith("locations/"))return`projects/${$.getProject()}/${F}`;else if(F.startsWith(`${A}/`))return`projects/${$.getProject()}/locations/${$.getLocation()}/${F}`;else if(X)return`projects/${$.getProject()}/locations/${$.getLocation()}/${A}/${F}`;else return F;if(X)return`${A}/${F}`;return F}function CX($,F){if(typeof F!=="string")throw Error("name must be a string");return Ou0($,F,"cachedContents")}function au1($){switch($){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return $}}function TW($){return A61($)}function Su0($){return $!==null&&$!==void 0&&typeof $==="object"&&"name"in $}function tu1($){return $!==null&&$!==void 0&&typeof $==="object"&&"video"in $}function su1($){return $!==null&&$!==void 0&&typeof $==="object"&&"uri"in $}function G61($){var F;let A;if(Su0($))A=$.name;if(su1($)){if(A=$.uri,A===void 0)return}if(tu1($)){if(A=(F=$.video)===null||F===void 0?void 0:F.uri,A===void 0)return}if(typeof $==="string")A=$;if(A===void 0)throw Error("Could not extract file name from the provided input.");if(A.startsWith("https://")){let X=A.split("files/")[1].match(/[a-z0-9]+/);if(X===null)throw Error(`Could not extract file name from URI ${A}`);A=X[0]}else if(A.startsWith("files/"))A=A.split("files/")[1];return A}function ou1($,F){let A;if($.isVertexAI())A=F?"publishers/google/models":"models";else A=F?"models":"tunedModels";return A}function eu1($){for(let F of["models","tunedModels","publisherModels"])if(_u0($,F))return $[F];return[]}function _u0($,F){return $!==null&&typeof $==="object"&&F in $}function ku0($,F={}){let A=$,J={name:A.name,description:A.description,parametersJsonSchema:A.inputSchema};if(A.outputSchema)J.responseJsonSchema=A.outputSchema;if(F.behavior)J.behavior=F.behavior;return{functionDeclarations:[J]}}function bu0($,F={}){let A=[],J=new Set;for(let X of $){let Y=X.name;if(J.has(Y))throw Error(`Duplicate function name ${Y} found in MCP tools. Please ensure function names are unique.`);J.add(Y);let W=ku0(X,F);if(W.functionDeclarations)A.push(...W.functionDeclarations)}return{functionDeclarations:A}}function $h1($,F){let A;if(typeof F==="string")if($.isVertexAI())if(F.startsWith("gs://"))A={format:"jsonl",gcsUri:[F]};else if(F.startsWith("bq://"))A={format:"bigquery",bigqueryUri:F};else throw Error(`Unsupported string source for Vertex AI: ${F}`);else if(F.startsWith("files/"))A={fileName:F};else throw Error(`Unsupported string source for Gemini API: ${F}`);else if(Array.isArray(F)){if($.isVertexAI())throw Error("InlinedRequest[] is not supported in Vertex AI.");A={inlinedRequests:F}}else A=F;let J=[A.gcsUri,A.bigqueryUri].filter(Boolean).length,X=[A.inlinedRequests,A.fileName].filter(Boolean).length;if($.isVertexAI()){if(X>0||J!==1)throw Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(J>0||X!==1)throw Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return A}function xu0($){if(typeof $!=="string")return $;let F=$;if(F.startsWith("gs://"))return{format:"jsonl",gcsUri:F};else if(F.startsWith("bq://"))return{format:"bigquery",bigqueryUri:F};else throw Error(`Unsupported destination: ${F}`)}function Fh1($){if(typeof $!=="object"||$===null)return{};let F=$,A=F.inlinedResponses;if(typeof A!=="object"||A===null)return $;let X=A.inlinedResponses;if(!Array.isArray(X)||X.length===0)return $;let Y=!1;for(let W of X){if(typeof W!=="object"||W===null)continue;let D=W.response;if(typeof D!=="object"||D===null)continue;if(D.embedding!==void 0){Y=!0;break}}if(Y)F.inlinedEmbedContentResponses=F.inlinedResponses,delete F.inlinedResponses;return $}function FK($,F){let A=F;if(!$.isVertexAI())if(/batches\/[^/]+$/.test(A))return A.split("/").pop();else throw Error(`Invalid batch job name: ${A}.`);if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(A))return A.split("/").pop();else if(/^\d+$/.test(A))return A;else throw Error(`Invalid batch job name: ${A}.`)}function Ah1($){let F=$;if(F==="BATCH_STATE_UNSPECIFIED")return"JOB_STATE_UNSPECIFIED";else if(F==="BATCH_STATE_PENDING")return"JOB_STATE_PENDING";else if(F==="BATCH_STATE_RUNNING")return"JOB_STATE_RUNNING";else if(F==="BATCH_STATE_SUCCEEDED")return"JOB_STATE_SUCCEEDED";else if(F==="BATCH_STATE_FAILED")return"JOB_STATE_FAILED";else if(F==="BATCH_STATE_CANCELLED")return"JOB_STATE_CANCELLED";else if(F==="BATCH_STATE_EXPIRED")return"JOB_STATE_EXPIRED";else return F}function gu0($){let F={},A=K($,["responsesFile"]);if(A!=null)w(F,["fileName"],A);let J=K($,["inlinedResponses","inlinedResponses"]);if(J!=null){let Y=J;if(Array.isArray(Y))Y=Y.map((W)=>{return Bh0(W)});w(F,["inlinedResponses"],Y)}let X=K($,["inlinedEmbedContentResponses","inlinedResponses"]);if(X!=null){let Y=X;if(Array.isArray(Y))Y=Y.map((W)=>{return W});w(F,["inlinedEmbedContentResponses"],Y)}return F}function fu0($){let F={},A=K($,["predictionsFormat"]);if(A!=null)w(F,["format"],A);let J=K($,["gcsDestination","outputUriPrefix"]);if(J!=null)w(F,["gcsUri"],J);let X=K($,["bigqueryDestination","outputUri"]);if(X!=null)w(F,["bigqueryUri"],X);return F}function vu0($){let F={},A=K($,["format"]);if(A!=null)w(F,["predictionsFormat"],A);let J=K($,["gcsUri"]);if(J!=null)w(F,["gcsDestination","outputUriPrefix"],J);let X=K($,["bigqueryUri"]);if(X!=null)w(F,["bigqueryDestination","outputUri"],X);if(K($,["fileName"])!==void 0)throw Error("fileName parameter is not supported in Vertex AI.");if(K($,["inlinedResponses"])!==void 0)throw Error("inlinedResponses parameter is not supported in Vertex AI.");if(K($,["inlinedEmbedContentResponses"])!==void 0)throw Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return F}function Q_($){let F={},A=K($,["name"]);if(A!=null)w(F,["name"],A);let J=K($,["metadata","displayName"]);if(J!=null)w(F,["displayName"],J);let X=K($,["metadata","state"]);if(X!=null)w(F,["state"],Ah1(X));let Y=K($,["metadata","createTime"]);if(Y!=null)w(F,["createTime"],Y);let W=K($,["metadata","endTime"]);if(W!=null)w(F,["endTime"],W);let Z=K($,["metadata","updateTime"]);if(Z!=null)w(F,["updateTime"],Z);let D=K($,["metadata","model"]);if(D!=null)w(F,["model"],D);let G=K($,["metadata","output"]);if(G!=null)w(F,["dest"],gu0(Fh1(G)));return F}function n01($){let F={},A=K($,["name"]);if(A!=null)w(F,["name"],A);let J=K($,["displayName"]);if(J!=null)w(F,["displayName"],J);let X=K($,["state"]);if(X!=null)w(F,["state"],Ah1(X));let Y=K($,["error"]);if(Y!=null)w(F,["error"],Y);let W=K($,["createTime"]);if(W!=null)w(F,["createTime"],W);let Z=K($,["startTime"]);if(Z!=null)w(F,["startTime"],Z);let D=K($,["endTime"]);if(D!=null)w(F,["endTime"],D);let G=K($,["updateTime"]);if(G!=null)w(F,["updateTime"],G);let z=K($,["model"]);if(z!=null)w(F,["model"],z);let H=K($,["inputConfig"]);if(H!=null)w(F,["src"],yu0(H));let U=K($,["outputConfig"]);if(U!=null)w(F,["dest"],fu0(Fh1(U)));let Q=K($,["completionStats"]);if(Q!=null)w(F,["completionStats"],Q);return F}function yu0($){let F={},A=K($,["instancesFormat"]);if(A!=null)w(F,["format"],A);let J=K($,["gcsSource","uris"]);if(J!=null)w(F,["gcsUri"],J);let X=K($,["bigquerySource","inputUri"]);if(X!=null)w(F,["bigqueryUri"],X);return F}function uu0($,F){let A={};if(K(F,["format"])!==void 0)throw Error("format parameter is not supported in Gemini API.");if(K(F,["gcsUri"])!==void 0)throw Error("gcsUri parameter is not supported in Gemini API.");if(K(F,["bigqueryUri"])!==void 0)throw Error("bigqueryUri parameter is not supported in Gemini API.");let J=K(F,["fileName"]);if(J!=null)w(A,["fileName"],J);let X=K(F,["inlinedRequests"]);if(X!=null){let Y=X;if(Array.isArray(Y))Y=Y.map((W)=>{return Kh0($,W)});w(A,["requests","requests"],Y)}return A}function hu0($){let F={},A=K($,["format"]);if(A!=null)w(F,["instancesFormat"],A);let J=K($,["gcsUri"]);if(J!=null)w(F,["gcsSource","uris"],J);let X=K($,["bigqueryUri"]);if(X!=null)w(F,["bigquerySource","inputUri"],X);if(K($,["fileName"])!==void 0)throw Error("fileName parameter is not supported in Vertex AI.");if(K($,["inlinedRequests"])!==void 0)throw Error("inlinedRequests parameter is not supported in Vertex AI.");return F}function mu0($){let F={},A=K($,["data"]);if(A!=null)w(F,["data"],A);if(K($,["displayName"])!==void 0)throw Error("displayName parameter is not supported in Gemini API.");let J=K($,["mimeType"]);if(J!=null)w(F,["mimeType"],J);return F}function du0($,F){let A={},J=K(F,["name"]);if(J!=null)w(A,["_url","name"],FK($,J));return A}function cu0($,F){let A={},J=K(F,["name"]);if(J!=null)w(A,["_url","name"],FK($,J));return A}function lu0($){let F={},A=K($,["content"]);if(A!=null)w(F,["content"],A);let J=K($,["citationMetadata"]);if(J!=null)w(F,["citationMetadata"],pu0(J));let X=K($,["tokenCount"]);if(X!=null)w(F,["tokenCount"],X);let Y=K($,["finishReason"]);if(Y!=null)w(F,["finishReason"],Y);let W=K($,["avgLogprobs"]);if(W!=null)w(F,["avgLogprobs"],W);let Z=K($,["groundingMetadata"]);if(Z!=null)w(F,["groundingMetadata"],Z);let D=K($,["index"]);if(D!=null)w(F,["index"],D);let G=K($,["logprobsResult"]);if(G!=null)w(F,["logprobsResult"],G);let z=K($,["safetyRatings"]);if(z!=null){let U=z;if(Array.isArray(U))U=U.map((Q)=>{return Q});w(F,["safetyRatings"],U)}let H=K($,["urlContextMetadata"]);if(H!=null)w(F,["urlContextMetadata"],H);return F}function pu0($){let F={},A=K($,["citationSources"]);if(A!=null){let J=A;if(Array.isArray(J))J=J.map((X)=>{return X});w(F,["citations"],J)}return F}function Jh1($){let F={},A=K($,["parts"]);if(A!=null){let X=A;if(Array.isArray(X))X=X.map((Y)=>{return Ch0(Y)});w(F,["parts"],X)}let J=K($,["role"]);if(J!=null)w(F,["role"],J);return F}function iu0($,F){let A={},J=K($,["displayName"]);if(F!==void 0&&J!=null)w(F,["batch","displayName"],J);if(K($,["dest"])!==void 0)throw Error("dest parameter is not supported in Gemini API.");return A}function nu0($,F){let A={},J=K($,["displayName"]);if(F!==void 0&&J!=null)w(F,["displayName"],J);let X=K($,["dest"]);if(F!==void 0&&X!=null)w(F,["outputConfig"],vu0(xu0(X)));return A}function Wu1($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["src"]);if(X!=null)w(A,["batch","inputConfig"],uu0($,$h1($,X)));let Y=K(F,["config"]);if(Y!=null)iu0(Y,A);return A}function ru0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["model"],k6($,J));let X=K(F,["src"]);if(X!=null)w(A,["inputConfig"],hu0($h1($,X)));let Y=K(F,["config"]);if(Y!=null)nu0(Y,A);return A}function au0($,F){let A={},J=K($,["displayName"]);if(F!==void 0&&J!=null)w(F,["batch","displayName"],J);return A}function tu0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["src"]);if(X!=null)w(A,["batch","inputConfig"],Jh0($,X));let Y=K(F,["config"]);if(Y!=null)au0(Y,A);return A}function su0($,F){let A={},J=K(F,["name"]);if(J!=null)w(A,["_url","name"],FK($,J));return A}function ou0($,F){let A={},J=K(F,["name"]);if(J!=null)w(A,["_url","name"],FK($,J));return A}function eu0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["name"]);if(J!=null)w(F,["name"],J);let X=K($,["done"]);if(X!=null)w(F,["done"],X);let Y=K($,["error"]);if(Y!=null)w(F,["error"],Y);return F}function $h0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["name"]);if(J!=null)w(F,["name"],J);let X=K($,["done"]);if(X!=null)w(F,["done"],X);let Y=K($,["error"]);if(Y!=null)w(F,["error"],Y);return F}function Fh0($,F){let A={},J=K(F,["contents"]);if(J!=null){let Y=Y61($,J);if(Array.isArray(Y))Y=Y.map((W)=>{return W});w(A,["requests[]","request","content"],Y)}let X=K(F,["config"]);if(X!=null)w(A,["_self"],Ah0(X,A)),Qu0(A,{"requests[].*":"requests[].request.*"});return A}function Ah0($,F){let A={},J=K($,["taskType"]);if(F!==void 0&&J!=null)w(F,["requests[]","taskType"],J);let X=K($,["title"]);if(F!==void 0&&X!=null)w(F,["requests[]","title"],X);let Y=K($,["outputDimensionality"]);if(F!==void 0&&Y!=null)w(F,["requests[]","outputDimensionality"],Y);if(K($,["mimeType"])!==void 0)throw Error("mimeType parameter is not supported in Gemini API.");if(K($,["autoTruncate"])!==void 0)throw Error("autoTruncate parameter is not supported in Gemini API.");return A}function Jh0($,F){let A={},J=K(F,["fileName"]);if(J!=null)w(A,["file_name"],J);let X=K(F,["inlinedRequests"]);if(X!=null)w(A,["requests"],Fh0($,X));return A}function Xh0($){let F={};if(K($,["displayName"])!==void 0)throw Error("displayName parameter is not supported in Gemini API.");let A=K($,["fileUri"]);if(A!=null)w(F,["fileUri"],A);let J=K($,["mimeType"]);if(J!=null)w(F,["mimeType"],J);return F}function Yh0($){let F={},A=K($,["id"]);if(A!=null)w(F,["id"],A);let J=K($,["args"]);if(J!=null)w(F,["args"],J);let X=K($,["name"]);if(X!=null)w(F,["name"],X);if(K($,["partialArgs"])!==void 0)throw Error("partialArgs parameter is not supported in Gemini API.");if(K($,["willContinue"])!==void 0)throw Error("willContinue parameter is not supported in Gemini API.");return F}function Wh0($){let F={},A=K($,["allowedFunctionNames"]);if(A!=null)w(F,["allowedFunctionNames"],A);let J=K($,["mode"]);if(J!=null)w(F,["mode"],J);if(K($,["streamFunctionCallArguments"])!==void 0)throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return F}function Zh0($,F,A){let J={},X=K(F,["systemInstruction"]);if(A!==void 0&&X!=null)w(A,["systemInstruction"],Jh1(c8(X)));let Y=K(F,["temperature"]);if(Y!=null)w(J,["temperature"],Y);let W=K(F,["topP"]);if(W!=null)w(J,["topP"],W);let Z=K(F,["topK"]);if(Z!=null)w(J,["topK"],Z);let D=K(F,["candidateCount"]);if(D!=null)w(J,["candidateCount"],D);let G=K(F,["maxOutputTokens"]);if(G!=null)w(J,["maxOutputTokens"],G);let z=K(F,["stopSequences"]);if(z!=null)w(J,["stopSequences"],z);let H=K(F,["responseLogprobs"]);if(H!=null)w(J,["responseLogprobs"],H);let U=K(F,["logprobs"]);if(U!=null)w(J,["logprobs"],U);let Q=K(F,["presencePenalty"]);if(Q!=null)w(J,["presencePenalty"],Q);let B=K(F,["frequencyPenalty"]);if(B!=null)w(J,["frequencyPenalty"],B);let q=K(F,["seed"]);if(q!=null)w(J,["seed"],q);let L=K(F,["responseMimeType"]);if(L!=null)w(J,["responseMimeType"],L);let E=K(F,["responseSchema"]);if(E!=null)w(J,["responseSchema"],W61(E));let V=K(F,["responseJsonSchema"]);if(V!=null)w(J,["responseJsonSchema"],V);if(K(F,["routingConfig"])!==void 0)throw Error("routingConfig parameter is not supported in Gemini API.");if(K(F,["modelSelectionConfig"])!==void 0)throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let R=K(F,["safetySettings"]);if(A!==void 0&&R!=null){let f=R;if(Array.isArray(f))f=f.map((d)=>{return Mh0(d)});w(A,["safetySettings"],f)}let N=K(F,["tools"]);if(A!==void 0&&N!=null){let f=$K(N);if(Array.isArray(f))f=f.map((d)=>{return Rh0(eQ(d))});w(A,["tools"],f)}let S=K(F,["toolConfig"]);if(A!==void 0&&S!=null)w(A,["toolConfig"],Ph0(S));if(K(F,["labels"])!==void 0)throw Error("labels parameter is not supported in Gemini API.");let C=K(F,["cachedContent"]);if(A!==void 0&&C!=null)w(A,["cachedContent"],CX($,C));let M=K(F,["responseModalities"]);if(M!=null)w(J,["responseModalities"],M);let I=K(F,["mediaResolution"]);if(I!=null)w(J,["mediaResolution"],I);let T=K(F,["speechConfig"]);if(T!=null)w(J,["speechConfig"],Z61(T));if(K(F,["audioTimestamp"])!==void 0)throw Error("audioTimestamp parameter is not supported in Gemini API.");let j=K(F,["thinkingConfig"]);if(j!=null)w(J,["thinkingConfig"],j);let b=K(F,["imageConfig"]);if(b!=null)w(J,["imageConfig"],Qh0(b));let g=K(F,["enableEnhancedCivicAnswers"]);if(g!=null)w(J,["enableEnhancedCivicAnswers"],g);if(K(F,["modelArmorConfig"])!==void 0)throw Error("modelArmorConfig parameter is not supported in Gemini API.");return J}function Dh0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["candidates"]);if(J!=null){let D=J;if(Array.isArray(D))D=D.map((G)=>{return lu0(G)});w(F,["candidates"],D)}let X=K($,["modelVersion"]);if(X!=null)w(F,["modelVersion"],X);let Y=K($,["promptFeedback"]);if(Y!=null)w(F,["promptFeedback"],Y);let W=K($,["responseId"]);if(W!=null)w(F,["responseId"],W);let Z=K($,["usageMetadata"]);if(Z!=null)w(F,["usageMetadata"],Z);return F}function Gh0($,F){let A={},J=K(F,["name"]);if(J!=null)w(A,["_url","name"],FK($,J));return A}function zh0($,F){let A={},J=K(F,["name"]);if(J!=null)w(A,["_url","name"],FK($,J));return A}function Hh0($){let F={};if(K($,["authConfig"])!==void 0)throw Error("authConfig parameter is not supported in Gemini API.");let A=K($,["enableWidget"]);if(A!=null)w(F,["enableWidget"],A);return F}function Uh0($){let F={};if(K($,["excludeDomains"])!==void 0)throw Error("excludeDomains parameter is not supported in Gemini API.");if(K($,["blockingConfidence"])!==void 0)throw Error("blockingConfidence parameter is not supported in Gemini API.");let A=K($,["timeRangeFilter"]);if(A!=null)w(F,["timeRangeFilter"],A);return F}function Qh0($){let F={},A=K($,["aspectRatio"]);if(A!=null)w(F,["aspectRatio"],A);let J=K($,["imageSize"]);if(J!=null)w(F,["imageSize"],J);if(K($,["personGeneration"])!==void 0)throw Error("personGeneration parameter is not supported in Gemini API.");if(K($,["outputMimeType"])!==void 0)throw Error("outputMimeType parameter is not supported in Gemini API.");if(K($,["outputCompressionQuality"])!==void 0)throw Error("outputCompressionQuality parameter is not supported in Gemini API.");return F}function Kh0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["request","model"],k6($,J));let X=K(F,["contents"]);if(X!=null){let Z=A$(X);if(Array.isArray(Z))Z=Z.map((D)=>{return Jh1(D)});w(A,["request","contents"],Z)}let Y=K(F,["metadata"]);if(Y!=null)w(A,["metadata"],Y);let W=K(F,["config"]);if(W!=null)w(A,["request","generationConfig"],Zh0($,W,K(A,["request"],{})));return A}function Bh0($){let F={},A=K($,["response"]);if(A!=null)w(F,["response"],Dh0(A));let J=K($,["error"]);if(J!=null)w(F,["error"],J);return F}function wh0($,F){let A={},J=K($,["pageSize"]);if(F!==void 0&&J!=null)w(F,["_query","pageSize"],J);let X=K($,["pageToken"]);if(F!==void 0&&X!=null)w(F,["_query","pageToken"],X);if(K($,["filter"])!==void 0)throw Error("filter parameter is not supported in Gemini API.");return A}function qh0($,F){let A={},J=K($,["pageSize"]);if(F!==void 0&&J!=null)w(F,["_query","pageSize"],J);let X=K($,["pageToken"]);if(F!==void 0&&X!=null)w(F,["_query","pageToken"],X);let Y=K($,["filter"]);if(F!==void 0&&Y!=null)w(F,["_query","filter"],Y);return A}function Lh0($){let F={},A=K($,["config"]);if(A!=null)wh0(A,F);return F}function Eh0($){let F={},A=K($,["config"]);if(A!=null)qh0(A,F);return F}function Vh0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["nextPageToken"]);if(J!=null)w(F,["nextPageToken"],J);let X=K($,["operations"]);if(X!=null){let Y=X;if(Array.isArray(Y))Y=Y.map((W)=>{return Q_(W)});w(F,["batchJobs"],Y)}return F}function Nh0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["nextPageToken"]);if(J!=null)w(F,["nextPageToken"],J);let X=K($,["batchPredictionJobs"]);if(X!=null){let Y=X;if(Array.isArray(Y))Y=Y.map((W)=>{return n01(W)});w(F,["batchJobs"],Y)}return F}function Ch0($){let F={},A=K($,["mediaResolution"]);if(A!=null)w(F,["mediaResolution"],A);let J=K($,["codeExecutionResult"]);if(J!=null)w(F,["codeExecutionResult"],J);let X=K($,["executableCode"]);if(X!=null)w(F,["executableCode"],X);let Y=K($,["fileData"]);if(Y!=null)w(F,["fileData"],Xh0(Y));let W=K($,["functionCall"]);if(W!=null)w(F,["functionCall"],Yh0(W));let Z=K($,["functionResponse"]);if(Z!=null)w(F,["functionResponse"],Z);let D=K($,["inlineData"]);if(D!=null)w(F,["inlineData"],mu0(D));let G=K($,["text"]);if(G!=null)w(F,["text"],G);let z=K($,["thought"]);if(z!=null)w(F,["thought"],z);let H=K($,["thoughtSignature"]);if(H!=null)w(F,["thoughtSignature"],H);let U=K($,["videoMetadata"]);if(U!=null)w(F,["videoMetadata"],U);return F}function Mh0($){let F={},A=K($,["category"]);if(A!=null)w(F,["category"],A);if(K($,["method"])!==void 0)throw Error("method parameter is not supported in Gemini API.");let J=K($,["threshold"]);if(J!=null)w(F,["threshold"],J);return F}function Ph0($){let F={},A=K($,["retrievalConfig"]);if(A!=null)w(F,["retrievalConfig"],A);let J=K($,["functionCallingConfig"]);if(J!=null)w(F,["functionCallingConfig"],Wh0(J));return F}function Rh0($){let F={};if(K($,["retrieval"])!==void 0)throw Error("retrieval parameter is not supported in Gemini API.");let A=K($,["computerUse"]);if(A!=null)w(F,["computerUse"],A);let J=K($,["fileSearch"]);if(J!=null)w(F,["fileSearch"],J);let X=K($,["codeExecution"]);if(X!=null)w(F,["codeExecution"],X);if(K($,["enterpriseWebSearch"])!==void 0)throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let Y=K($,["functionDeclarations"]);if(Y!=null){let z=Y;if(Array.isArray(z))z=z.map((H)=>{return H});w(F,["functionDeclarations"],z)}let W=K($,["googleMaps"]);if(W!=null)w(F,["googleMaps"],Hh0(W));let Z=K($,["googleSearch"]);if(Z!=null)w(F,["googleSearch"],Uh0(Z));let D=K($,["googleSearchRetrieval"]);if(D!=null)w(F,["googleSearchRetrieval"],D);let G=K($,["urlContext"]);if(G!=null)w(F,["urlContext"],G);return F}var NX;(function($){$.PAGED_ITEM_BATCH_JOBS="batchJobs",$.PAGED_ITEM_MODELS="models",$.PAGED_ITEM_TUNING_JOBS="tuningJobs",$.PAGED_ITEM_FILES="files",$.PAGED_ITEM_CACHED_CONTENTS="cachedContents",$.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",$.PAGED_ITEM_DOCUMENTS="documents"})(NX||(NX={}));class jW{constructor($,F,A,J){this.pageInternal=[],this.paramsInternal={},this.requestInternal=F,this.init($,A,J)}init($,F,A){var J,X;this.nameInternal=$,this.pageInternal=F[this.nameInternal]||[],this.sdkHttpResponseInternal=F===null||F===void 0?void 0:F.sdkHttpResponse,this.idxInternal=0;let Y={config:{}};if(!A||Object.keys(A).length===0)Y={config:{}};else if(typeof A==="object")Y=Object.assign({},A);else Y=A;if(Y.config)Y.config.pageToken=F.nextPageToken;this.paramsInternal=Y,this.pageInternalSize=(X=(J=Y.config)===null||J===void 0?void 0:J.pageSize)!==null&&X!==void 0?X:this.pageInternal.length}initNextPage($){this.init(this.nameInternal,$,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem($){return this.pageInternal[$]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let $=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:$,done:!1}},return:async()=>{return{value:void 0,done:!0}}}}async nextPage(){if(!this.hasNextPage())throw Error("No more pages to fetch.");let $=await this.requestInternal(this.params);return this.initNextPage($),this.page}hasNextPage(){var $;if((($=this.params.config)===null||$===void 0?void 0:$.pageToken)!==void 0)return!0;return!1}}class Xh1 extends vA{constructor($){super();this.apiClient=$,this.list=async(F={})=>{return new jW(NX.PAGED_ITEM_BATCH_JOBS,(A)=>this.listInternal(A),await this.listInternal(F),F)},this.create=async(F)=>{if(this.apiClient.isVertexAI())F.config=this.formatDestination(F.src,F.config);return this.createInternal(F)},this.createEmbeddings=async(F)=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(F)}}createInlinedGenerateContentRequest($){let F=Wu1(this.apiClient,$),A=F._url,J=m1("{model}:batchGenerateContent",A),W=F.batch.inputConfig.requests,Z=W.requests,D=[];for(let G of Z){let z=Object.assign({},G);if(z.systemInstruction){let H=z.systemInstruction;delete z.systemInstruction;let U=z.request;U.systemInstruction=H,z.request=U}D.push(z)}return W.requests=D,delete F.config,delete F._url,delete F._query,{path:J,body:F}}getGcsUri($){if(typeof $==="string")return $.startsWith("gs://")?$:void 0;if(!Array.isArray($)&&$.gcsUri&&$.gcsUri.length>0)return $.gcsUri[0];return}getBigqueryUri($){if(typeof $==="string")return $.startsWith("bq://")?$:void 0;if(!Array.isArray($))return $.bigqueryUri;return}formatDestination($,F){let A=F?Object.assign({},F):{},J=Date.now().toString();if(!A.displayName)A.displayName=`genaiBatchJob_${J}`;if(A.dest===void 0){let X=this.getGcsUri($),Y=this.getBigqueryUri($);if(X)if(X.endsWith(".jsonl"))A.dest=`${X.slice(0,-6)}/dest`;else A.dest=`${X}_dest_${J}`;else if(Y)A.dest=`${Y}_dest_${J}`;else throw Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return A}async createInternal($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=ru0(this.apiClient,$);return W=m1("batchPredictionJobs",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json()}),Y.then((G)=>{return n01(G)})}else{let D=Wu1(this.apiClient,$);return W=m1("{model}:batchGenerateContent",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json()}),Y.then((G)=>{return Q_(G)})}}async createEmbeddingsInternal($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");else{let W=tu0(this.apiClient,$);return X=m1("{model}:asyncBatchEmbedContent",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json()}),J.then((Z)=>{return Q_(Z)})}}async get($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=zh0(this.apiClient,$);return W=m1("batchPredictionJobs/{name}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json()}),Y.then((G)=>{return n01(G)})}else{let D=Gh0(this.apiClient,$);return W=m1("batches/{name}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json()}),Y.then((G)=>{return Q_(G)})}}async cancel($){var F,A,J,X;let Y="",W={};if(this.apiClient.isVertexAI()){let Z=cu0(this.apiClient,$);Y=m1("batchPredictionJobs/{name}:cancel",Z._url),W=Z._query,delete Z._url,delete Z._query,await this.apiClient.request({path:Y,queryParams:W,body:JSON.stringify(Z),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal})}else{let Z=du0(this.apiClient,$);Y=m1("batches/{name}:cancel",Z._url),W=Z._query,delete Z._url,delete Z._query,await this.apiClient.request({path:Y,queryParams:W,body:JSON.stringify(Z),httpMethod:"POST",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal})}}async listInternal($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=Eh0($);return W=m1("batchPredictionJobs",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=Nh0(G),H=new p01;return Object.assign(H,z),H})}else{let D=Lh0($);return W=m1("batches",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=Vh0(G),H=new p01;return Object.assign(H,z),H})}}async delete($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=ou0(this.apiClient,$);return W=m1("batchPredictionJobs/{name}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"DELETE",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{return $h0(G)})}else{let D=su0(this.apiClient,$);return W=m1("batches/{name}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"DELETE",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{return eu0(G)})}}}function Ih0($){let F={},A=K($,["data"]);if(A!=null)w(F,["data"],A);if(K($,["displayName"])!==void 0)throw Error("displayName parameter is not supported in Gemini API.");let J=K($,["mimeType"]);if(J!=null)w(F,["mimeType"],J);return F}function Zu1($){let F={},A=K($,["parts"]);if(A!=null){let X=A;if(Array.isArray(X))X=X.map((Y)=>{return ah0(Y)});w(F,["parts"],X)}let J=K($,["role"]);if(J!=null)w(F,["role"],J);return F}function Th0($,F){let A={},J=K($,["ttl"]);if(F!==void 0&&J!=null)w(F,["ttl"],J);let X=K($,["expireTime"]);if(F!==void 0&&X!=null)w(F,["expireTime"],X);let Y=K($,["displayName"]);if(F!==void 0&&Y!=null)w(F,["displayName"],Y);let W=K($,["contents"]);if(F!==void 0&&W!=null){let z=A$(W);if(Array.isArray(z))z=z.map((H)=>{return Zu1(H)});w(F,["contents"],z)}let Z=K($,["systemInstruction"]);if(F!==void 0&&Z!=null)w(F,["systemInstruction"],Zu1(c8(Z)));let D=K($,["tools"]);if(F!==void 0&&D!=null){let z=D;if(Array.isArray(z))z=z.map((H)=>{return sh0(H)});w(F,["tools"],z)}let G=K($,["toolConfig"]);if(F!==void 0&&G!=null)w(F,["toolConfig"],th0(G));if(K($,["kmsKeyName"])!==void 0)throw Error("kmsKeyName parameter is not supported in Gemini API.");return A}function jh0($,F){let A={},J=K($,["ttl"]);if(F!==void 0&&J!=null)w(F,["ttl"],J);let X=K($,["expireTime"]);if(F!==void 0&&X!=null)w(F,["expireTime"],X);let Y=K($,["displayName"]);if(F!==void 0&&Y!=null)w(F,["displayName"],Y);let W=K($,["contents"]);if(F!==void 0&&W!=null){let H=A$(W);if(Array.isArray(H))H=H.map((U)=>{return U});w(F,["contents"],H)}let Z=K($,["systemInstruction"]);if(F!==void 0&&Z!=null)w(F,["systemInstruction"],c8(Z));let D=K($,["tools"]);if(F!==void 0&&D!=null){let H=D;if(Array.isArray(H))H=H.map((U)=>{return oh0(U)});w(F,["tools"],H)}let G=K($,["toolConfig"]);if(F!==void 0&&G!=null)w(F,["toolConfig"],G);let z=K($,["kmsKeyName"]);if(F!==void 0&&z!=null)w(F,["encryption_spec","kmsKeyName"],z);return A}function Oh0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["model"],lu1($,J));let X=K(F,["config"]);if(X!=null)Th0(X,A);return A}function Sh0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["model"],lu1($,J));let X=K(F,["config"]);if(X!=null)jh0(X,A);return A}function _h0($,F){let A={},J=K(F,["name"]);if(J!=null)w(A,["_url","name"],CX($,J));return A}function kh0($,F){let A={},J=K(F,["name"]);if(J!=null)w(A,["_url","name"],CX($,J));return A}function bh0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);return F}function xh0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);return F}function gh0($){let F={};if(K($,["displayName"])!==void 0)throw Error("displayName parameter is not supported in Gemini API.");let A=K($,["fileUri"]);if(A!=null)w(F,["fileUri"],A);let J=K($,["mimeType"]);if(J!=null)w(F,["mimeType"],J);return F}function fh0($){let F={},A=K($,["id"]);if(A!=null)w(F,["id"],A);let J=K($,["args"]);if(J!=null)w(F,["args"],J);let X=K($,["name"]);if(X!=null)w(F,["name"],X);if(K($,["partialArgs"])!==void 0)throw Error("partialArgs parameter is not supported in Gemini API.");if(K($,["willContinue"])!==void 0)throw Error("willContinue parameter is not supported in Gemini API.");return F}function vh0($){let F={},A=K($,["allowedFunctionNames"]);if(A!=null)w(F,["allowedFunctionNames"],A);let J=K($,["mode"]);if(J!=null)w(F,["mode"],J);if(K($,["streamFunctionCallArguments"])!==void 0)throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return F}function yh0($){let F={},A=K($,["description"]);if(A!=null)w(F,["description"],A);let J=K($,["name"]);if(J!=null)w(F,["name"],J);let X=K($,["parameters"]);if(X!=null)w(F,["parameters"],X);let Y=K($,["parametersJsonSchema"]);if(Y!=null)w(F,["parametersJsonSchema"],Y);let W=K($,["response"]);if(W!=null)w(F,["response"],W);let Z=K($,["responseJsonSchema"]);if(Z!=null)w(F,["responseJsonSchema"],Z);if(K($,["behavior"])!==void 0)throw Error("behavior parameter is not supported in Vertex AI.");return F}function uh0($,F){let A={},J=K(F,["name"]);if(J!=null)w(A,["_url","name"],CX($,J));return A}function hh0($,F){let A={},J=K(F,["name"]);if(J!=null)w(A,["_url","name"],CX($,J));return A}function mh0($){let F={};if(K($,["authConfig"])!==void 0)throw Error("authConfig parameter is not supported in Gemini API.");let A=K($,["enableWidget"]);if(A!=null)w(F,["enableWidget"],A);return F}function dh0($){let F={};if(K($,["excludeDomains"])!==void 0)throw Error("excludeDomains parameter is not supported in Gemini API.");if(K($,["blockingConfidence"])!==void 0)throw Error("blockingConfidence parameter is not supported in Gemini API.");let A=K($,["timeRangeFilter"]);if(A!=null)w(F,["timeRangeFilter"],A);return F}function ch0($,F){let A={},J=K($,["pageSize"]);if(F!==void 0&&J!=null)w(F,["_query","pageSize"],J);let X=K($,["pageToken"]);if(F!==void 0&&X!=null)w(F,["_query","pageToken"],X);return A}function lh0($,F){let A={},J=K($,["pageSize"]);if(F!==void 0&&J!=null)w(F,["_query","pageSize"],J);let X=K($,["pageToken"]);if(F!==void 0&&X!=null)w(F,["_query","pageToken"],X);return A}function ph0($){let F={},A=K($,["config"]);if(A!=null)ch0(A,F);return F}function ih0($){let F={},A=K($,["config"]);if(A!=null)lh0(A,F);return F}function nh0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["nextPageToken"]);if(J!=null)w(F,["nextPageToken"],J);let X=K($,["cachedContents"]);if(X!=null){let Y=X;if(Array.isArray(Y))Y=Y.map((W)=>{return W});w(F,["cachedContents"],Y)}return F}function rh0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["nextPageToken"]);if(J!=null)w(F,["nextPageToken"],J);let X=K($,["cachedContents"]);if(X!=null){let Y=X;if(Array.isArray(Y))Y=Y.map((W)=>{return W});w(F,["cachedContents"],Y)}return F}function ah0($){let F={},A=K($,["mediaResolution"]);if(A!=null)w(F,["mediaResolution"],A);let J=K($,["codeExecutionResult"]);if(J!=null)w(F,["codeExecutionResult"],J);let X=K($,["executableCode"]);if(X!=null)w(F,["executableCode"],X);let Y=K($,["fileData"]);if(Y!=null)w(F,["fileData"],gh0(Y));let W=K($,["functionCall"]);if(W!=null)w(F,["functionCall"],fh0(W));let Z=K($,["functionResponse"]);if(Z!=null)w(F,["functionResponse"],Z);let D=K($,["inlineData"]);if(D!=null)w(F,["inlineData"],Ih0(D));let G=K($,["text"]);if(G!=null)w(F,["text"],G);let z=K($,["thought"]);if(z!=null)w(F,["thought"],z);let H=K($,["thoughtSignature"]);if(H!=null)w(F,["thoughtSignature"],H);let U=K($,["videoMetadata"]);if(U!=null)w(F,["videoMetadata"],U);return F}function th0($){let F={},A=K($,["retrievalConfig"]);if(A!=null)w(F,["retrievalConfig"],A);let J=K($,["functionCallingConfig"]);if(J!=null)w(F,["functionCallingConfig"],vh0(J));return F}function sh0($){let F={};if(K($,["retrieval"])!==void 0)throw Error("retrieval parameter is not supported in Gemini API.");let A=K($,["computerUse"]);if(A!=null)w(F,["computerUse"],A);let J=K($,["fileSearch"]);if(J!=null)w(F,["fileSearch"],J);let X=K($,["codeExecution"]);if(X!=null)w(F,["codeExecution"],X);if(K($,["enterpriseWebSearch"])!==void 0)throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let Y=K($,["functionDeclarations"]);if(Y!=null){let z=Y;if(Array.isArray(z))z=z.map((H)=>{return H});w(F,["functionDeclarations"],z)}let W=K($,["googleMaps"]);if(W!=null)w(F,["googleMaps"],mh0(W));let Z=K($,["googleSearch"]);if(Z!=null)w(F,["googleSearch"],dh0(Z));let D=K($,["googleSearchRetrieval"]);if(D!=null)w(F,["googleSearchRetrieval"],D);let G=K($,["urlContext"]);if(G!=null)w(F,["urlContext"],G);return F}function oh0($){let F={},A=K($,["retrieval"]);if(A!=null)w(F,["retrieval"],A);let J=K($,["computerUse"]);if(J!=null)w(F,["computerUse"],J);if(K($,["fileSearch"])!==void 0)throw Error("fileSearch parameter is not supported in Vertex AI.");let X=K($,["codeExecution"]);if(X!=null)w(F,["codeExecution"],X);let Y=K($,["enterpriseWebSearch"]);if(Y!=null)w(F,["enterpriseWebSearch"],Y);let W=K($,["functionDeclarations"]);if(W!=null){let H=W;if(Array.isArray(H))H=H.map((U)=>{return yh0(U)});w(F,["functionDeclarations"],H)}let Z=K($,["googleMaps"]);if(Z!=null)w(F,["googleMaps"],Z);let D=K($,["googleSearch"]);if(D!=null)w(F,["googleSearch"],D);let G=K($,["googleSearchRetrieval"]);if(G!=null)w(F,["googleSearchRetrieval"],G);let z=K($,["urlContext"]);if(z!=null)w(F,["urlContext"],z);return F}function eh0($,F){let A={},J=K($,["ttl"]);if(F!==void 0&&J!=null)w(F,["ttl"],J);let X=K($,["expireTime"]);if(F!==void 0&&X!=null)w(F,["expireTime"],X);return A}function $m0($,F){let A={},J=K($,["ttl"]);if(F!==void 0&&J!=null)w(F,["ttl"],J);let X=K($,["expireTime"]);if(F!==void 0&&X!=null)w(F,["expireTime"],X);return A}function Fm0($,F){let A={},J=K(F,["name"]);if(J!=null)w(A,["_url","name"],CX($,J));let X=K(F,["config"]);if(X!=null)eh0(X,A);return A}function Am0($,F){let A={},J=K(F,["name"]);if(J!=null)w(A,["_url","name"],CX($,J));let X=K(F,["config"]);if(X!=null)$m0(X,A);return A}class Yh1 extends vA{constructor($){super();this.apiClient=$,this.list=async(F={})=>{return new jW(NX.PAGED_ITEM_CACHED_CONTENTS,(A)=>this.listInternal(A),await this.listInternal(F),F)}}async create($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=Sh0(this.apiClient,$);return W=m1("cachedContents",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json()}),Y.then((G)=>{return G})}else{let D=Oh0(this.apiClient,$);return W=m1("cachedContents",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json()}),Y.then((G)=>{return G})}}async get($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=hh0(this.apiClient,$);return W=m1("{name}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json()}),Y.then((G)=>{return G})}else{let D=uh0(this.apiClient,$);return W=m1("{name}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json()}),Y.then((G)=>{return G})}}async delete($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=kh0(this.apiClient,$);return W=m1("{name}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"DELETE",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=xh0(G),H=new c01;return Object.assign(H,z),H})}else{let D=_h0(this.apiClient,$);return W=m1("{name}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"DELETE",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=bh0(G),H=new c01;return Object.assign(H,z),H})}}async update($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=Am0(this.apiClient,$);return W=m1("{name}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"PATCH",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json()}),Y.then((G)=>{return G})}else{let D=Fm0(this.apiClient,$);return W=m1("{name}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"PATCH",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json()}),Y.then((G)=>{return G})}}async listInternal($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=ih0($);return W=m1("cachedContents",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=rh0(G),H=new l01;return Object.assign(H,z),H})}else{let D=ph0($);return W=m1("cachedContents",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=nh0(G),H=new l01;return Object.assign(H,z),H})}}}function L_($,F){var A={};for(var J in $)if(Object.prototype.hasOwnProperty.call($,J)&&F.indexOf(J)<0)A[J]=$[J];if($!=null&&typeof Object.getOwnPropertySymbols==="function"){for(var X=0,J=Object.getOwnPropertySymbols($);X<J.length;X++)if(F.indexOf(J[X])<0&&Object.prototype.propertyIsEnumerable.call($,J[X]))A[J[X]]=$[J[X]]}return A}function Du1($){var F=typeof Symbol==="function"&&Symbol.iterator,A=F&&$[F],J=0;if(A)return A.call($);if($&&typeof $.length==="number")return{next:function(){if($&&J>=$.length)$=void 0;return{value:$&&$[J++],done:!$}}};throw TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}function V0($){return this instanceof V0?(this.v=$,this):new V0($)}function TF($,F,A){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var J=A.apply($,F||[]),X,Y=[];return X=Object.create((typeof AsyncIterator==="function"?AsyncIterator:Object).prototype),Z("next"),Z("throw"),Z("return",W),X[Symbol.asyncIterator]=function(){return this},X;function W(Q){return function(B){return Promise.resolve(B).then(Q,H)}}function Z(Q,B){if(J[Q]){if(X[Q]=function(q){return new Promise(function(L,E){Y.push([Q,q,L,E])>1||D(Q,q)})},B)X[Q]=B(X[Q])}}function D(Q,B){try{G(J[Q](B))}catch(q){U(Y[0][3],q)}}function G(Q){Q.value instanceof V0?Promise.resolve(Q.value.v).then(z,H):U(Y[0][2],Q)}function z(Q){D("next",Q)}function H(Q){D("throw",Q)}function U(Q,B){if(Q(B),Y.shift(),Y.length)D(Y[0][0],Y[0][1])}}function jF($){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var F=$[Symbol.asyncIterator],A;return F?F.call($):($=typeof Du1==="function"?Du1($):$[Symbol.iterator](),A={},J("next"),J("throw"),J("return"),A[Symbol.asyncIterator]=function(){return this},A);function J(Y){A[Y]=$[Y]&&function(W){return new Promise(function(Z,D){W=$[Y](W),X(Z,D,W.done,W.value)})}}function X(Y,W,Z,D){Promise.resolve(D).then(function(G){Y({value:G,done:Z})},W)}}function Jm0($){var F;if($.candidates==null||$.candidates.length===0)return!1;let A=(F=$.candidates[0])===null||F===void 0?void 0:F.content;if(A===void 0)return!1;return Wh1(A)}function Wh1($){if($.parts===void 0||$.parts.length===0)return!1;for(let F of $.parts)if(F===void 0||Object.keys(F).length===0)return!1;return!0}function Xm0($){if($.length===0)return;for(let F of $)if(F.role!=="user"&&F.role!=="model")throw Error(`Role must be user or model, but got ${F.role}.`)}function Gu1($){if($===void 0||$.length===0)return[];let F=[],A=$.length,J=0;while(J<A)if($[J].role==="user")F.push($[J]),J++;else{let X=[],Y=!0;while(J<A&&$[J].role==="model"){if(X.push($[J]),Y&&!Wh1($[J]))Y=!1;J++}if(Y)F.push(...X);else F.pop()}return F}class Zh1{constructor($,F){this.modelsModule=$,this.apiClient=F}create($){return new Dh1(this.apiClient,this.modelsModule,$.model,$.config,structuredClone($.history))}}class Dh1{constructor($,F,A,J={},X=[]){this.apiClient=$,this.modelsModule=F,this.model=A,this.config=J,this.history=X,this.sendPromise=Promise.resolve(),Xm0(X)}async sendMessage($){var F;await this.sendPromise;let A=c8($.message),J=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(A),config:(F=$.config)!==null&&F!==void 0?F:this.config});return this.sendPromise=(async()=>{var X,Y,W;let Z=await J,D=(Y=(X=Z.candidates)===null||X===void 0?void 0:X[0])===null||Y===void 0?void 0:Y.content,G=Z.automaticFunctionCallingHistory,z=this.getHistory(!0).length,H=[];if(G!=null)H=(W=G.slice(z))!==null&&W!==void 0?W:[];let U=D?[D]:[];this.recordHistory(A,U,H);return})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),J}async sendMessageStream($){var F;await this.sendPromise;let A=c8($.message),J=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(A),config:(F=$.config)!==null&&F!==void 0?F:this.config});this.sendPromise=J.then(()=>{return}).catch(()=>{return});let X=await J;return this.processStreamResponse(X,A)}getHistory($=!1){let F=$?Gu1(this.history):this.history;return structuredClone(F)}processStreamResponse($,F){return TF(this,arguments,function*(){var J,X,Y,W,Z,D;let G=[];try{for(var z=!0,H=jF($),U;U=yield V0(H.next()),J=U.done,!J;z=!0){W=U.value,z=!1;let Q=W;if(Jm0(Q)){let B=(D=(Z=Q.candidates)===null||Z===void 0?void 0:Z[0])===null||D===void 0?void 0:D.content;if(B!==void 0)G.push(B)}yield yield V0(Q)}}catch(Q){X={error:Q}}finally{try{if(!z&&!J&&(Y=H.return))yield V0(Y.call(H))}finally{if(X)throw X.error}}this.recordHistory(F,G)})}recordHistory($,F,A){let J=[];if(F.length>0&&F.every((X)=>X.role!==void 0))J=F;else J.push({role:"model",parts:[]});if(A&&A.length>0)this.history.push(...Gu1(A));else this.history.push($);this.history.push(...J)}}class xV extends Error{constructor($){super($.message);this.name="ApiError",this.status=$.status,Object.setPrototypeOf(this,xV.prototype)}}function Ym0($){let F={},A=K($,["file"]);if(A!=null)w(F,["file"],A);return F}function Wm0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);return F}function Zm0($){let F={},A=K($,["name"]);if(A!=null)w(F,["_url","file"],G61(A));return F}function Dm0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);return F}function Gm0($){let F={},A=K($,["name"]);if(A!=null)w(F,["_url","file"],G61(A));return F}function zm0($,F){let A={},J=K($,["pageSize"]);if(F!==void 0&&J!=null)w(F,["_query","pageSize"],J);let X=K($,["pageToken"]);if(F!==void 0&&X!=null)w(F,["_query","pageToken"],X);return A}function Hm0($){let F={},A=K($,["config"]);if(A!=null)zm0(A,F);return F}function Um0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["nextPageToken"]);if(J!=null)w(F,["nextPageToken"],J);let X=K($,["files"]);if(X!=null){let Y=X;if(Array.isArray(Y))Y=Y.map((W)=>{return W});w(F,["files"],Y)}return F}class Gh1 extends vA{constructor($){super();this.apiClient=$,this.list=async(F={})=>{return new jW(NX.PAGED_ITEM_FILES,(A)=>this.listInternal(A),await this.listInternal(F),F)}}async upload($){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile($.file,$.config).then((F)=>{return F})}async download($){await this.apiClient.downloadFile($)}async listInternal($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");else{let W=Hm0($);return X=m1("files",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"GET",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json().then((D)=>{let G=D;return G.sdkHttpResponse={headers:Z.headers},G})}),J.then((Z)=>{let D=Um0(Z),G=new uu1;return Object.assign(G,D),G})}}async createInternal($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");else{let W=Ym0($);return X=m1("upload/v1beta/files",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json()}),J.then((Z)=>{let D=Wm0(Z),G=new hu1;return Object.assign(G,D),G})}}async get($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");else{let W=Gm0($);return X=m1("files/{file}",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"GET",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json()}),J.then((Z)=>{return Z})}}async delete($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");else{let W=Zm0($);return X=m1("files/{file}",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"DELETE",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json().then((D)=>{let G=D;return G.sdkHttpResponse={headers:Z.headers},G})}),J.then((Z)=>{let D=Dm0(Z),G=new mu1;return Object.assign(G,D),G})}}}function K_($){let F={},A=K($,["data"]);if(A!=null)w(F,["data"],A);if(K($,["displayName"])!==void 0)throw Error("displayName parameter is not supported in Gemini API.");let J=K($,["mimeType"]);if(J!=null)w(F,["mimeType"],J);return F}function Qm0($){let F={},A=K($,["parts"]);if(A!=null){let X=A;if(Array.isArray(X))X=X.map((Y)=>{return Om0(Y)});w(F,["parts"],X)}let J=K($,["role"]);if(J!=null)w(F,["role"],J);return F}function Km0($){let F={};if(K($,["displayName"])!==void 0)throw Error("displayName parameter is not supported in Gemini API.");let A=K($,["fileUri"]);if(A!=null)w(F,["fileUri"],A);let J=K($,["mimeType"]);if(J!=null)w(F,["mimeType"],J);return F}function Bm0($){let F={},A=K($,["id"]);if(A!=null)w(F,["id"],A);let J=K($,["args"]);if(J!=null)w(F,["args"],J);let X=K($,["name"]);if(X!=null)w(F,["name"],X);if(K($,["partialArgs"])!==void 0)throw Error("partialArgs parameter is not supported in Gemini API.");if(K($,["willContinue"])!==void 0)throw Error("willContinue parameter is not supported in Gemini API.");return F}function wm0($){let F={},A=K($,["description"]);if(A!=null)w(F,["description"],A);let J=K($,["name"]);if(J!=null)w(F,["name"],J);let X=K($,["parameters"]);if(X!=null)w(F,["parameters"],X);let Y=K($,["parametersJsonSchema"]);if(Y!=null)w(F,["parametersJsonSchema"],Y);let W=K($,["response"]);if(W!=null)w(F,["response"],W);let Z=K($,["responseJsonSchema"]);if(Z!=null)w(F,["responseJsonSchema"],Z);if(K($,["behavior"])!==void 0)throw Error("behavior parameter is not supported in Vertex AI.");return F}function qm0($){let F={},A=K($,["modelSelectionConfig"]);if(A!=null)w(F,["modelConfig"],A);let J=K($,["responseJsonSchema"]);if(J!=null)w(F,["responseJsonSchema"],J);let X=K($,["audioTimestamp"]);if(X!=null)w(F,["audioTimestamp"],X);let Y=K($,["candidateCount"]);if(Y!=null)w(F,["candidateCount"],Y);let W=K($,["enableAffectiveDialog"]);if(W!=null)w(F,["enableAffectiveDialog"],W);let Z=K($,["frequencyPenalty"]);if(Z!=null)w(F,["frequencyPenalty"],Z);let D=K($,["logprobs"]);if(D!=null)w(F,["logprobs"],D);let G=K($,["maxOutputTokens"]);if(G!=null)w(F,["maxOutputTokens"],G);let z=K($,["mediaResolution"]);if(z!=null)w(F,["mediaResolution"],z);let H=K($,["presencePenalty"]);if(H!=null)w(F,["presencePenalty"],H);let U=K($,["responseLogprobs"]);if(U!=null)w(F,["responseLogprobs"],U);let Q=K($,["responseMimeType"]);if(Q!=null)w(F,["responseMimeType"],Q);let B=K($,["responseModalities"]);if(B!=null)w(F,["responseModalities"],B);let q=K($,["responseSchema"]);if(q!=null)w(F,["responseSchema"],q);let L=K($,["routingConfig"]);if(L!=null)w(F,["routingConfig"],L);let E=K($,["seed"]);if(E!=null)w(F,["seed"],E);let V=K($,["speechConfig"]);if(V!=null)w(F,["speechConfig"],V);let R=K($,["stopSequences"]);if(R!=null)w(F,["stopSequences"],R);let N=K($,["temperature"]);if(N!=null)w(F,["temperature"],N);let S=K($,["thinkingConfig"]);if(S!=null)w(F,["thinkingConfig"],S);let C=K($,["topK"]);if(C!=null)w(F,["topK"],C);let M=K($,["topP"]);if(M!=null)w(F,["topP"],M);if(K($,["enableEnhancedCivicAnswers"])!==void 0)throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return F}function Lm0($){let F={};if(K($,["authConfig"])!==void 0)throw Error("authConfig parameter is not supported in Gemini API.");let A=K($,["enableWidget"]);if(A!=null)w(F,["enableWidget"],A);return F}function Em0($){let F={};if(K($,["excludeDomains"])!==void 0)throw Error("excludeDomains parameter is not supported in Gemini API.");if(K($,["blockingConfidence"])!==void 0)throw Error("blockingConfidence parameter is not supported in Gemini API.");let A=K($,["timeRangeFilter"]);if(A!=null)w(F,["timeRangeFilter"],A);return F}function Vm0($,F){let A={},J=K($,["generationConfig"]);if(F!==void 0&&J!=null)w(F,["setup","generationConfig"],J);let X=K($,["responseModalities"]);if(F!==void 0&&X!=null)w(F,["setup","generationConfig","responseModalities"],X);let Y=K($,["temperature"]);if(F!==void 0&&Y!=null)w(F,["setup","generationConfig","temperature"],Y);let W=K($,["topP"]);if(F!==void 0&&W!=null)w(F,["setup","generationConfig","topP"],W);let Z=K($,["topK"]);if(F!==void 0&&Z!=null)w(F,["setup","generationConfig","topK"],Z);let D=K($,["maxOutputTokens"]);if(F!==void 0&&D!=null)w(F,["setup","generationConfig","maxOutputTokens"],D);let G=K($,["mediaResolution"]);if(F!==void 0&&G!=null)w(F,["setup","generationConfig","mediaResolution"],G);let z=K($,["seed"]);if(F!==void 0&&z!=null)w(F,["setup","generationConfig","seed"],z);let H=K($,["speechConfig"]);if(F!==void 0&&H!=null)w(F,["setup","generationConfig","speechConfig"],D61(H));let U=K($,["thinkingConfig"]);if(F!==void 0&&U!=null)w(F,["setup","generationConfig","thinkingConfig"],U);let Q=K($,["enableAffectiveDialog"]);if(F!==void 0&&Q!=null)w(F,["setup","generationConfig","enableAffectiveDialog"],Q);let B=K($,["systemInstruction"]);if(F!==void 0&&B!=null)w(F,["setup","systemInstruction"],Qm0(c8(B)));let q=K($,["tools"]);if(F!==void 0&&q!=null){let C=$K(q);if(Array.isArray(C))C=C.map((M)=>{return _m0(eQ(M))});w(F,["setup","tools"],C)}let L=K($,["sessionResumption"]);if(F!==void 0&&L!=null)w(F,["setup","sessionResumption"],Sm0(L));let E=K($,["inputAudioTranscription"]);if(F!==void 0&&E!=null)w(F,["setup","inputAudioTranscription"],E);let V=K($,["outputAudioTranscription"]);if(F!==void 0&&V!=null)w(F,["setup","outputAudioTranscription"],V);let R=K($,["realtimeInputConfig"]);if(F!==void 0&&R!=null)w(F,["setup","realtimeInputConfig"],R);let N=K($,["contextWindowCompression"]);if(F!==void 0&&N!=null)w(F,["setup","contextWindowCompression"],N);let S=K($,["proactivity"]);if(F!==void 0&&S!=null)w(F,["setup","proactivity"],S);if(K($,["explicitVadSignal"])!==void 0)throw Error("explicitVadSignal parameter is not supported in Gemini API.");return A}function Nm0($,F){let A={},J=K($,["generationConfig"]);if(F!==void 0&&J!=null)w(F,["setup","generationConfig"],qm0(J));let X=K($,["responseModalities"]);if(F!==void 0&&X!=null)w(F,["setup","generationConfig","responseModalities"],X);let Y=K($,["temperature"]);if(F!==void 0&&Y!=null)w(F,["setup","generationConfig","temperature"],Y);let W=K($,["topP"]);if(F!==void 0&&W!=null)w(F,["setup","generationConfig","topP"],W);let Z=K($,["topK"]);if(F!==void 0&&Z!=null)w(F,["setup","generationConfig","topK"],Z);let D=K($,["maxOutputTokens"]);if(F!==void 0&&D!=null)w(F,["setup","generationConfig","maxOutputTokens"],D);let G=K($,["mediaResolution"]);if(F!==void 0&&G!=null)w(F,["setup","generationConfig","mediaResolution"],G);let z=K($,["seed"]);if(F!==void 0&&z!=null)w(F,["setup","generationConfig","seed"],z);let H=K($,["speechConfig"]);if(F!==void 0&&H!=null)w(F,["setup","generationConfig","speechConfig"],D61(H));let U=K($,["thinkingConfig"]);if(F!==void 0&&U!=null)w(F,["setup","generationConfig","thinkingConfig"],U);let Q=K($,["enableAffectiveDialog"]);if(F!==void 0&&Q!=null)w(F,["setup","generationConfig","enableAffectiveDialog"],Q);let B=K($,["systemInstruction"]);if(F!==void 0&&B!=null)w(F,["setup","systemInstruction"],c8(B));let q=K($,["tools"]);if(F!==void 0&&q!=null){let M=$K(q);if(Array.isArray(M))M=M.map((I)=>{return km0(eQ(I))});w(F,["setup","tools"],M)}let L=K($,["sessionResumption"]);if(F!==void 0&&L!=null)w(F,["setup","sessionResumption"],L);let E=K($,["inputAudioTranscription"]);if(F!==void 0&&E!=null)w(F,["setup","inputAudioTranscription"],E);let V=K($,["outputAudioTranscription"]);if(F!==void 0&&V!=null)w(F,["setup","outputAudioTranscription"],V);let R=K($,["realtimeInputConfig"]);if(F!==void 0&&R!=null)w(F,["setup","realtimeInputConfig"],R);let N=K($,["contextWindowCompression"]);if(F!==void 0&&N!=null)w(F,["setup","contextWindowCompression"],N);let S=K($,["proactivity"]);if(F!==void 0&&S!=null)w(F,["setup","proactivity"],S);let C=K($,["explicitVadSignal"]);if(F!==void 0&&C!=null)w(F,["setup","explicitVadSignal"],C);return A}function Cm0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["setup","model"],k6($,J));let X=K(F,["config"]);if(X!=null)w(A,["config"],Vm0(X,A));return A}function Mm0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["setup","model"],k6($,J));let X=K(F,["config"]);if(X!=null)w(A,["config"],Nm0(X,A));return A}function Pm0($){let F={},A=K($,["musicGenerationConfig"]);if(A!=null)w(F,["musicGenerationConfig"],A);return F}function Rm0($){let F={},A=K($,["weightedPrompts"]);if(A!=null){let J=A;if(Array.isArray(J))J=J.map((X)=>{return X});w(F,["weightedPrompts"],J)}return F}function Im0($){let F={},A=K($,["media"]);if(A!=null){let G=pu1(A);if(Array.isArray(G))G=G.map((z)=>{return K_(z)});w(F,["mediaChunks"],G)}let J=K($,["audio"]);if(J!=null)w(F,["audio"],K_(nu1(J)));let X=K($,["audioStreamEnd"]);if(X!=null)w(F,["audioStreamEnd"],X);let Y=K($,["video"]);if(Y!=null)w(F,["video"],K_(iu1(Y)));let W=K($,["text"]);if(W!=null)w(F,["text"],W);let Z=K($,["activityStart"]);if(Z!=null)w(F,["activityStart"],Z);let D=K($,["activityEnd"]);if(D!=null)w(F,["activityEnd"],D);return F}function Tm0($){let F={},A=K($,["media"]);if(A!=null){let G=pu1(A);if(Array.isArray(G))G=G.map((z)=>{return z});w(F,["mediaChunks"],G)}let J=K($,["audio"]);if(J!=null)w(F,["audio"],nu1(J));let X=K($,["audioStreamEnd"]);if(X!=null)w(F,["audioStreamEnd"],X);let Y=K($,["video"]);if(Y!=null)w(F,["video"],iu1(Y));let W=K($,["text"]);if(W!=null)w(F,["text"],W);let Z=K($,["activityStart"]);if(Z!=null)w(F,["activityStart"],Z);let D=K($,["activityEnd"]);if(D!=null)w(F,["activityEnd"],D);return F}function jm0($){let F={},A=K($,["setupComplete"]);if(A!=null)w(F,["setupComplete"],A);let J=K($,["serverContent"]);if(J!=null)w(F,["serverContent"],J);let X=K($,["toolCall"]);if(X!=null)w(F,["toolCall"],X);let Y=K($,["toolCallCancellation"]);if(Y!=null)w(F,["toolCallCancellation"],Y);let W=K($,["usageMetadata"]);if(W!=null)w(F,["usageMetadata"],bm0(W));let Z=K($,["goAway"]);if(Z!=null)w(F,["goAway"],Z);let D=K($,["sessionResumptionUpdate"]);if(D!=null)w(F,["sessionResumptionUpdate"],D);let G=K($,["voiceActivityDetectionSignal"]);if(G!=null)w(F,["voiceActivityDetectionSignal"],G);let z=K($,["voiceActivity"]);if(z!=null)w(F,["voiceActivity"],xm0(z));return F}function Om0($){let F={},A=K($,["mediaResolution"]);if(A!=null)w(F,["mediaResolution"],A);let J=K($,["codeExecutionResult"]);if(J!=null)w(F,["codeExecutionResult"],J);let X=K($,["executableCode"]);if(X!=null)w(F,["executableCode"],X);let Y=K($,["fileData"]);if(Y!=null)w(F,["fileData"],Km0(Y));let W=K($,["functionCall"]);if(W!=null)w(F,["functionCall"],Bm0(W));let Z=K($,["functionResponse"]);if(Z!=null)w(F,["functionResponse"],Z);let D=K($,["inlineData"]);if(D!=null)w(F,["inlineData"],K_(D));let G=K($,["text"]);if(G!=null)w(F,["text"],G);let z=K($,["thought"]);if(z!=null)w(F,["thought"],z);let H=K($,["thoughtSignature"]);if(H!=null)w(F,["thoughtSignature"],H);let U=K($,["videoMetadata"]);if(U!=null)w(F,["videoMetadata"],U);return F}function Sm0($){let F={},A=K($,["handle"]);if(A!=null)w(F,["handle"],A);if(K($,["transparent"])!==void 0)throw Error("transparent parameter is not supported in Gemini API.");return F}function _m0($){let F={};if(K($,["retrieval"])!==void 0)throw Error("retrieval parameter is not supported in Gemini API.");let A=K($,["computerUse"]);if(A!=null)w(F,["computerUse"],A);let J=K($,["fileSearch"]);if(J!=null)w(F,["fileSearch"],J);let X=K($,["codeExecution"]);if(X!=null)w(F,["codeExecution"],X);if(K($,["enterpriseWebSearch"])!==void 0)throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let Y=K($,["functionDeclarations"]);if(Y!=null){let z=Y;if(Array.isArray(z))z=z.map((H)=>{return H});w(F,["functionDeclarations"],z)}let W=K($,["googleMaps"]);if(W!=null)w(F,["googleMaps"],Lm0(W));let Z=K($,["googleSearch"]);if(Z!=null)w(F,["googleSearch"],Em0(Z));let D=K($,["googleSearchRetrieval"]);if(D!=null)w(F,["googleSearchRetrieval"],D);let G=K($,["urlContext"]);if(G!=null)w(F,["urlContext"],G);return F}function km0($){let F={},A=K($,["retrieval"]);if(A!=null)w(F,["retrieval"],A);let J=K($,["computerUse"]);if(J!=null)w(F,["computerUse"],J);if(K($,["fileSearch"])!==void 0)throw Error("fileSearch parameter is not supported in Vertex AI.");let X=K($,["codeExecution"]);if(X!=null)w(F,["codeExecution"],X);let Y=K($,["enterpriseWebSearch"]);if(Y!=null)w(F,["enterpriseWebSearch"],Y);let W=K($,["functionDeclarations"]);if(W!=null){let H=W;if(Array.isArray(H))H=H.map((U)=>{return wm0(U)});w(F,["functionDeclarations"],H)}let Z=K($,["googleMaps"]);if(Z!=null)w(F,["googleMaps"],Z);let D=K($,["googleSearch"]);if(D!=null)w(F,["googleSearch"],D);let G=K($,["googleSearchRetrieval"]);if(G!=null)w(F,["googleSearchRetrieval"],G);let z=K($,["urlContext"]);if(z!=null)w(F,["urlContext"],z);return F}function bm0($){let F={},A=K($,["promptTokenCount"]);if(A!=null)w(F,["promptTokenCount"],A);let J=K($,["cachedContentTokenCount"]);if(J!=null)w(F,["cachedContentTokenCount"],J);let X=K($,["candidatesTokenCount"]);if(X!=null)w(F,["responseTokenCount"],X);let Y=K($,["toolUsePromptTokenCount"]);if(Y!=null)w(F,["toolUsePromptTokenCount"],Y);let W=K($,["thoughtsTokenCount"]);if(W!=null)w(F,["thoughtsTokenCount"],W);let Z=K($,["totalTokenCount"]);if(Z!=null)w(F,["totalTokenCount"],Z);let D=K($,["promptTokensDetails"]);if(D!=null){let Q=D;if(Array.isArray(Q))Q=Q.map((B)=>{return B});w(F,["promptTokensDetails"],Q)}let G=K($,["cacheTokensDetails"]);if(G!=null){let Q=G;if(Array.isArray(Q))Q=Q.map((B)=>{return B});w(F,["cacheTokensDetails"],Q)}let z=K($,["candidatesTokensDetails"]);if(z!=null){let Q=z;if(Array.isArray(Q))Q=Q.map((B)=>{return B});w(F,["responseTokensDetails"],Q)}let H=K($,["toolUsePromptTokensDetails"]);if(H!=null){let Q=H;if(Array.isArray(Q))Q=Q.map((B)=>{return B});w(F,["toolUsePromptTokensDetails"],Q)}let U=K($,["trafficType"]);if(U!=null)w(F,["trafficType"],U);return F}function xm0($){let F={},A=K($,["type"]);if(A!=null)w(F,["voiceActivityType"],A);return F}function gm0($){let F={},A=K($,["data"]);if(A!=null)w(F,["data"],A);if(K($,["displayName"])!==void 0)throw Error("displayName parameter is not supported in Gemini API.");let J=K($,["mimeType"]);if(J!=null)w(F,["mimeType"],J);return F}function fm0($){let F={},A=K($,["content"]);if(A!=null)w(F,["content"],A);let J=K($,["citationMetadata"]);if(J!=null)w(F,["citationMetadata"],vm0(J));let X=K($,["tokenCount"]);if(X!=null)w(F,["tokenCount"],X);let Y=K($,["finishReason"]);if(Y!=null)w(F,["finishReason"],Y);let W=K($,["avgLogprobs"]);if(W!=null)w(F,["avgLogprobs"],W);let Z=K($,["groundingMetadata"]);if(Z!=null)w(F,["groundingMetadata"],Z);let D=K($,["index"]);if(D!=null)w(F,["index"],D);let G=K($,["logprobsResult"]);if(G!=null)w(F,["logprobsResult"],G);let z=K($,["safetyRatings"]);if(z!=null){let U=z;if(Array.isArray(U))U=U.map((Q)=>{return Q});w(F,["safetyRatings"],U)}let H=K($,["urlContextMetadata"]);if(H!=null)w(F,["urlContextMetadata"],H);return F}function vm0($){let F={},A=K($,["citationSources"]);if(A!=null){let J=A;if(Array.isArray(J))J=J.map((X)=>{return X});w(F,["citations"],J)}return F}function ym0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["contents"]);if(X!=null){let Y=A$(X);if(Array.isArray(Y))Y=Y.map((W)=>{return W});w(A,["contents"],Y)}return A}function um0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["tokensInfo"]);if(J!=null){let X=J;if(Array.isArray(X))X=X.map((Y)=>{return Y});w(F,["tokensInfo"],X)}return F}function hm0($){let F={},A=K($,["values"]);if(A!=null)w(F,["values"],A);let J=K($,["statistics"]);if(J!=null)w(F,["statistics"],mm0(J));return F}function mm0($){let F={},A=K($,["truncated"]);if(A!=null)w(F,["truncated"],A);let J=K($,["token_count"]);if(J!=null)w(F,["tokenCount"],J);return F}function M_($){let F={},A=K($,["parts"]);if(A!=null){let X=A;if(Array.isArray(X))X=X.map((Y)=>{return td0(Y)});w(F,["parts"],X)}let J=K($,["role"]);if(J!=null)w(F,["role"],J);return F}function dm0($){let F={},A=K($,["controlType"]);if(A!=null)w(F,["controlType"],A);let J=K($,["enableControlImageComputation"]);if(J!=null)w(F,["computeControl"],J);return F}function cm0($){let F={};if(K($,["systemInstruction"])!==void 0)throw Error("systemInstruction parameter is not supported in Gemini API.");if(K($,["tools"])!==void 0)throw Error("tools parameter is not supported in Gemini API.");if(K($,["generationConfig"])!==void 0)throw Error("generationConfig parameter is not supported in Gemini API.");return F}function lm0($,F){let A={},J=K($,["systemInstruction"]);if(F!==void 0&&J!=null)w(F,["systemInstruction"],c8(J));let X=K($,["tools"]);if(F!==void 0&&X!=null){let W=X;if(Array.isArray(W))W=W.map((Z)=>{return Qh1(Z)});w(F,["tools"],W)}let Y=K($,["generationConfig"]);if(F!==void 0&&Y!=null)w(F,["generationConfig"],gd0(Y));return A}function pm0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["contents"]);if(X!=null){let W=A$(X);if(Array.isArray(W))W=W.map((Z)=>{return M_(Z)});w(A,["contents"],W)}let Y=K(F,["config"]);if(Y!=null)cm0(Y);return A}function im0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["contents"]);if(X!=null){let W=A$(X);if(Array.isArray(W))W=W.map((Z)=>{return Z});w(A,["contents"],W)}let Y=K(F,["config"]);if(Y!=null)lm0(Y,A);return A}function nm0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["totalTokens"]);if(J!=null)w(F,["totalTokens"],J);let X=K($,["cachedContentTokenCount"]);if(X!=null)w(F,["cachedContentTokenCount"],X);return F}function rm0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["totalTokens"]);if(J!=null)w(F,["totalTokens"],J);return F}function am0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","name"],k6($,J));return A}function tm0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","name"],k6($,J));return A}function sm0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);return F}function om0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);return F}function em0($,F){let A={},J=K($,["outputGcsUri"]);if(F!==void 0&&J!=null)w(F,["parameters","storageUri"],J);let X=K($,["negativePrompt"]);if(F!==void 0&&X!=null)w(F,["parameters","negativePrompt"],X);let Y=K($,["numberOfImages"]);if(F!==void 0&&Y!=null)w(F,["parameters","sampleCount"],Y);let W=K($,["aspectRatio"]);if(F!==void 0&&W!=null)w(F,["parameters","aspectRatio"],W);let Z=K($,["guidanceScale"]);if(F!==void 0&&Z!=null)w(F,["parameters","guidanceScale"],Z);let D=K($,["seed"]);if(F!==void 0&&D!=null)w(F,["parameters","seed"],D);let G=K($,["safetyFilterLevel"]);if(F!==void 0&&G!=null)w(F,["parameters","safetySetting"],G);let z=K($,["personGeneration"]);if(F!==void 0&&z!=null)w(F,["parameters","personGeneration"],z);let H=K($,["includeSafetyAttributes"]);if(F!==void 0&&H!=null)w(F,["parameters","includeSafetyAttributes"],H);let U=K($,["includeRaiReason"]);if(F!==void 0&&U!=null)w(F,["parameters","includeRaiReason"],U);let Q=K($,["language"]);if(F!==void 0&&Q!=null)w(F,["parameters","language"],Q);let B=K($,["outputMimeType"]);if(F!==void 0&&B!=null)w(F,["parameters","outputOptions","mimeType"],B);let q=K($,["outputCompressionQuality"]);if(F!==void 0&&q!=null)w(F,["parameters","outputOptions","compressionQuality"],q);let L=K($,["addWatermark"]);if(F!==void 0&&L!=null)w(F,["parameters","addWatermark"],L);let E=K($,["labels"]);if(F!==void 0&&E!=null)w(F,["labels"],E);let V=K($,["editMode"]);if(F!==void 0&&V!=null)w(F,["parameters","editMode"],V);let R=K($,["baseSteps"]);if(F!==void 0&&R!=null)w(F,["parameters","editConfig","baseSteps"],R);return A}function $d0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["prompt"]);if(X!=null)w(A,["instances[0]","prompt"],X);let Y=K(F,["referenceImages"]);if(Y!=null){let Z=Y;if(Array.isArray(Z))Z=Z.map((D)=>{return Ac0(D)});w(A,["instances[0]","referenceImages"],Z)}let W=K(F,["config"]);if(W!=null)em0(W,A);return A}function Fd0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["predictions"]);if(J!=null){let X=J;if(Array.isArray(X))X=X.map((Y)=>{return P_(Y)});w(F,["generatedImages"],X)}return F}function Ad0($,F){let A={},J=K($,["taskType"]);if(F!==void 0&&J!=null)w(F,["requests[]","taskType"],J);let X=K($,["title"]);if(F!==void 0&&X!=null)w(F,["requests[]","title"],X);let Y=K($,["outputDimensionality"]);if(F!==void 0&&Y!=null)w(F,["requests[]","outputDimensionality"],Y);if(K($,["mimeType"])!==void 0)throw Error("mimeType parameter is not supported in Gemini API.");if(K($,["autoTruncate"])!==void 0)throw Error("autoTruncate parameter is not supported in Gemini API.");return A}function Jd0($,F){let A={},J=K($,["taskType"]);if(F!==void 0&&J!=null)w(F,["instances[]","task_type"],J);let X=K($,["title"]);if(F!==void 0&&X!=null)w(F,["instances[]","title"],X);let Y=K($,["outputDimensionality"]);if(F!==void 0&&Y!=null)w(F,["parameters","outputDimensionality"],Y);let W=K($,["mimeType"]);if(F!==void 0&&W!=null)w(F,["instances[]","mimeType"],W);let Z=K($,["autoTruncate"]);if(F!==void 0&&Z!=null)w(F,["parameters","autoTruncate"],Z);return A}function Xd0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["contents"]);if(X!=null){let Z=Y61($,X);if(Array.isArray(Z))Z=Z.map((D)=>{return D});w(A,["requests[]","content"],Z)}let Y=K(F,["config"]);if(Y!=null)Ad0(Y,A);let W=K(F,["model"]);if(W!==void 0)w(A,["requests[]","model"],k6($,W));return A}function Yd0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["contents"]);if(X!=null){let W=Y61($,X);if(Array.isArray(W))W=W.map((Z)=>{return Z});w(A,["instances[]","content"],W)}let Y=K(F,["config"]);if(Y!=null)Jd0(Y,A);return A}function Wd0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["embeddings"]);if(J!=null){let Y=J;if(Array.isArray(Y))Y=Y.map((W)=>{return W});w(F,["embeddings"],Y)}let X=K($,["metadata"]);if(X!=null)w(F,["metadata"],X);return F}function Zd0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["predictions[]","embeddings"]);if(J!=null){let Y=J;if(Array.isArray(Y))Y=Y.map((W)=>{return hm0(W)});w(F,["embeddings"],Y)}let X=K($,["metadata"]);if(X!=null)w(F,["metadata"],X);return F}function Dd0($){let F={},A=K($,["endpoint"]);if(A!=null)w(F,["name"],A);let J=K($,["deployedModelId"]);if(J!=null)w(F,["deployedModelId"],J);return F}function Gd0($){let F={};if(K($,["displayName"])!==void 0)throw Error("displayName parameter is not supported in Gemini API.");let A=K($,["fileUri"]);if(A!=null)w(F,["fileUri"],A);let J=K($,["mimeType"]);if(J!=null)w(F,["mimeType"],J);return F}function zd0($){let F={},A=K($,["id"]);if(A!=null)w(F,["id"],A);let J=K($,["args"]);if(J!=null)w(F,["args"],J);let X=K($,["name"]);if(X!=null)w(F,["name"],X);if(K($,["partialArgs"])!==void 0)throw Error("partialArgs parameter is not supported in Gemini API.");if(K($,["willContinue"])!==void 0)throw Error("willContinue parameter is not supported in Gemini API.");return F}function Hd0($){let F={},A=K($,["allowedFunctionNames"]);if(A!=null)w(F,["allowedFunctionNames"],A);let J=K($,["mode"]);if(J!=null)w(F,["mode"],J);if(K($,["streamFunctionCallArguments"])!==void 0)throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return F}function Ud0($){let F={},A=K($,["description"]);if(A!=null)w(F,["description"],A);let J=K($,["name"]);if(J!=null)w(F,["name"],J);let X=K($,["parameters"]);if(X!=null)w(F,["parameters"],X);let Y=K($,["parametersJsonSchema"]);if(Y!=null)w(F,["parametersJsonSchema"],Y);let W=K($,["response"]);if(W!=null)w(F,["response"],W);let Z=K($,["responseJsonSchema"]);if(Z!=null)w(F,["responseJsonSchema"],Z);if(K($,["behavior"])!==void 0)throw Error("behavior parameter is not supported in Vertex AI.");return F}function Qd0($,F,A){let J={},X=K(F,["systemInstruction"]);if(A!==void 0&&X!=null)w(A,["systemInstruction"],M_(c8(X)));let Y=K(F,["temperature"]);if(Y!=null)w(J,["temperature"],Y);let W=K(F,["topP"]);if(W!=null)w(J,["topP"],W);let Z=K(F,["topK"]);if(Z!=null)w(J,["topK"],Z);let D=K(F,["candidateCount"]);if(D!=null)w(J,["candidateCount"],D);let G=K(F,["maxOutputTokens"]);if(G!=null)w(J,["maxOutputTokens"],G);let z=K(F,["stopSequences"]);if(z!=null)w(J,["stopSequences"],z);let H=K(F,["responseLogprobs"]);if(H!=null)w(J,["responseLogprobs"],H);let U=K(F,["logprobs"]);if(U!=null)w(J,["logprobs"],U);let Q=K(F,["presencePenalty"]);if(Q!=null)w(J,["presencePenalty"],Q);let B=K(F,["frequencyPenalty"]);if(B!=null)w(J,["frequencyPenalty"],B);let q=K(F,["seed"]);if(q!=null)w(J,["seed"],q);let L=K(F,["responseMimeType"]);if(L!=null)w(J,["responseMimeType"],L);let E=K(F,["responseSchema"]);if(E!=null)w(J,["responseSchema"],W61(E));let V=K(F,["responseJsonSchema"]);if(V!=null)w(J,["responseJsonSchema"],V);if(K(F,["routingConfig"])!==void 0)throw Error("routingConfig parameter is not supported in Gemini API.");if(K(F,["modelSelectionConfig"])!==void 0)throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let R=K(F,["safetySettings"]);if(A!==void 0&&R!=null){let f=R;if(Array.isArray(f))f=f.map((d)=>{return Jc0(d)});w(A,["safetySettings"],f)}let N=K(F,["tools"]);if(A!==void 0&&N!=null){let f=$K(N);if(Array.isArray(f))f=f.map((d)=>{return zc0(eQ(d))});w(A,["tools"],f)}let S=K(F,["toolConfig"]);if(A!==void 0&&S!=null)w(A,["toolConfig"],Gc0(S));if(K(F,["labels"])!==void 0)throw Error("labels parameter is not supported in Gemini API.");let C=K(F,["cachedContent"]);if(A!==void 0&&C!=null)w(A,["cachedContent"],CX($,C));let M=K(F,["responseModalities"]);if(M!=null)w(J,["responseModalities"],M);let I=K(F,["mediaResolution"]);if(I!=null)w(J,["mediaResolution"],I);let T=K(F,["speechConfig"]);if(T!=null)w(J,["speechConfig"],Z61(T));if(K(F,["audioTimestamp"])!==void 0)throw Error("audioTimestamp parameter is not supported in Gemini API.");let j=K(F,["thinkingConfig"]);if(j!=null)w(J,["thinkingConfig"],j);let b=K(F,["imageConfig"]);if(b!=null)w(J,["imageConfig"],hd0(b));let g=K(F,["enableEnhancedCivicAnswers"]);if(g!=null)w(J,["enableEnhancedCivicAnswers"],g);if(K(F,["modelArmorConfig"])!==void 0)throw Error("modelArmorConfig parameter is not supported in Gemini API.");return J}function Kd0($,F,A){let J={},X=K(F,["systemInstruction"]);if(A!==void 0&&X!=null)w(A,["systemInstruction"],c8(X));let Y=K(F,["temperature"]);if(Y!=null)w(J,["temperature"],Y);let W=K(F,["topP"]);if(W!=null)w(J,["topP"],W);let Z=K(F,["topK"]);if(Z!=null)w(J,["topK"],Z);let D=K(F,["candidateCount"]);if(D!=null)w(J,["candidateCount"],D);let G=K(F,["maxOutputTokens"]);if(G!=null)w(J,["maxOutputTokens"],G);let z=K(F,["stopSequences"]);if(z!=null)w(J,["stopSequences"],z);let H=K(F,["responseLogprobs"]);if(H!=null)w(J,["responseLogprobs"],H);let U=K(F,["logprobs"]);if(U!=null)w(J,["logprobs"],U);let Q=K(F,["presencePenalty"]);if(Q!=null)w(J,["presencePenalty"],Q);let B=K(F,["frequencyPenalty"]);if(B!=null)w(J,["frequencyPenalty"],B);let q=K(F,["seed"]);if(q!=null)w(J,["seed"],q);let L=K(F,["responseMimeType"]);if(L!=null)w(J,["responseMimeType"],L);let E=K(F,["responseSchema"]);if(E!=null)w(J,["responseSchema"],W61(E));let V=K(F,["responseJsonSchema"]);if(V!=null)w(J,["responseJsonSchema"],V);let R=K(F,["routingConfig"]);if(R!=null)w(J,["routingConfig"],R);let N=K(F,["modelSelectionConfig"]);if(N!=null)w(J,["modelConfig"],N);let S=K(F,["safetySettings"]);if(A!==void 0&&S!=null){let L1=S;if(Array.isArray(L1))L1=L1.map((X1)=>{return X1});w(A,["safetySettings"],L1)}let C=K(F,["tools"]);if(A!==void 0&&C!=null){let L1=$K(C);if(Array.isArray(L1))L1=L1.map((X1)=>{return Qh1(eQ(X1))});w(A,["tools"],L1)}let M=K(F,["toolConfig"]);if(A!==void 0&&M!=null)w(A,["toolConfig"],M);let I=K(F,["labels"]);if(A!==void 0&&I!=null)w(A,["labels"],I);let T=K(F,["cachedContent"]);if(A!==void 0&&T!=null)w(A,["cachedContent"],CX($,T));let j=K(F,["responseModalities"]);if(j!=null)w(J,["responseModalities"],j);let b=K(F,["mediaResolution"]);if(b!=null)w(J,["mediaResolution"],b);let g=K(F,["speechConfig"]);if(g!=null)w(J,["speechConfig"],Z61(g));let f=K(F,["audioTimestamp"]);if(f!=null)w(J,["audioTimestamp"],f);let d=K(F,["thinkingConfig"]);if(d!=null)w(J,["thinkingConfig"],d);let s=K(F,["imageConfig"]);if(s!=null)w(J,["imageConfig"],md0(s));if(K(F,["enableEnhancedCivicAnswers"])!==void 0)throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");let n=K(F,["modelArmorConfig"]);if(A!==void 0&&n!=null)w(A,["modelArmorConfig"],n);return J}function zu1($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["contents"]);if(X!=null){let W=A$(X);if(Array.isArray(W))W=W.map((Z)=>{return M_(Z)});w(A,["contents"],W)}let Y=K(F,["config"]);if(Y!=null)w(A,["generationConfig"],Qd0($,Y,A));return A}function Hu1($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["contents"]);if(X!=null){let W=A$(X);if(Array.isArray(W))W=W.map((Z)=>{return Z});w(A,["contents"],W)}let Y=K(F,["config"]);if(Y!=null)w(A,["generationConfig"],Kd0($,Y,A));return A}function Uu1($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["candidates"]);if(J!=null){let D=J;if(Array.isArray(D))D=D.map((G)=>{return fm0(G)});w(F,["candidates"],D)}let X=K($,["modelVersion"]);if(X!=null)w(F,["modelVersion"],X);let Y=K($,["promptFeedback"]);if(Y!=null)w(F,["promptFeedback"],Y);let W=K($,["responseId"]);if(W!=null)w(F,["responseId"],W);let Z=K($,["usageMetadata"]);if(Z!=null)w(F,["usageMetadata"],Z);return F}function Qu1($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["candidates"]);if(J!=null){let G=J;if(Array.isArray(G))G=G.map((z)=>{return z});w(F,["candidates"],G)}let X=K($,["createTime"]);if(X!=null)w(F,["createTime"],X);let Y=K($,["modelVersion"]);if(Y!=null)w(F,["modelVersion"],Y);let W=K($,["promptFeedback"]);if(W!=null)w(F,["promptFeedback"],W);let Z=K($,["responseId"]);if(Z!=null)w(F,["responseId"],Z);let D=K($,["usageMetadata"]);if(D!=null)w(F,["usageMetadata"],D);return F}function Bd0($,F){let A={};if(K($,["outputGcsUri"])!==void 0)throw Error("outputGcsUri parameter is not supported in Gemini API.");if(K($,["negativePrompt"])!==void 0)throw Error("negativePrompt parameter is not supported in Gemini API.");let J=K($,["numberOfImages"]);if(F!==void 0&&J!=null)w(F,["parameters","sampleCount"],J);let X=K($,["aspectRatio"]);if(F!==void 0&&X!=null)w(F,["parameters","aspectRatio"],X);let Y=K($,["guidanceScale"]);if(F!==void 0&&Y!=null)w(F,["parameters","guidanceScale"],Y);if(K($,["seed"])!==void 0)throw Error("seed parameter is not supported in Gemini API.");let W=K($,["safetyFilterLevel"]);if(F!==void 0&&W!=null)w(F,["parameters","safetySetting"],W);let Z=K($,["personGeneration"]);if(F!==void 0&&Z!=null)w(F,["parameters","personGeneration"],Z);let D=K($,["includeSafetyAttributes"]);if(F!==void 0&&D!=null)w(F,["parameters","includeSafetyAttributes"],D);let G=K($,["includeRaiReason"]);if(F!==void 0&&G!=null)w(F,["parameters","includeRaiReason"],G);let z=K($,["language"]);if(F!==void 0&&z!=null)w(F,["parameters","language"],z);let H=K($,["outputMimeType"]);if(F!==void 0&&H!=null)w(F,["parameters","outputOptions","mimeType"],H);let U=K($,["outputCompressionQuality"]);if(F!==void 0&&U!=null)w(F,["parameters","outputOptions","compressionQuality"],U);if(K($,["addWatermark"])!==void 0)throw Error("addWatermark parameter is not supported in Gemini API.");if(K($,["labels"])!==void 0)throw Error("labels parameter is not supported in Gemini API.");let Q=K($,["imageSize"]);if(F!==void 0&&Q!=null)w(F,["parameters","sampleImageSize"],Q);if(K($,["enhancePrompt"])!==void 0)throw Error("enhancePrompt parameter is not supported in Gemini API.");return A}function wd0($,F){let A={},J=K($,["outputGcsUri"]);if(F!==void 0&&J!=null)w(F,["parameters","storageUri"],J);let X=K($,["negativePrompt"]);if(F!==void 0&&X!=null)w(F,["parameters","negativePrompt"],X);let Y=K($,["numberOfImages"]);if(F!==void 0&&Y!=null)w(F,["parameters","sampleCount"],Y);let W=K($,["aspectRatio"]);if(F!==void 0&&W!=null)w(F,["parameters","aspectRatio"],W);let Z=K($,["guidanceScale"]);if(F!==void 0&&Z!=null)w(F,["parameters","guidanceScale"],Z);let D=K($,["seed"]);if(F!==void 0&&D!=null)w(F,["parameters","seed"],D);let G=K($,["safetyFilterLevel"]);if(F!==void 0&&G!=null)w(F,["parameters","safetySetting"],G);let z=K($,["personGeneration"]);if(F!==void 0&&z!=null)w(F,["parameters","personGeneration"],z);let H=K($,["includeSafetyAttributes"]);if(F!==void 0&&H!=null)w(F,["parameters","includeSafetyAttributes"],H);let U=K($,["includeRaiReason"]);if(F!==void 0&&U!=null)w(F,["parameters","includeRaiReason"],U);let Q=K($,["language"]);if(F!==void 0&&Q!=null)w(F,["parameters","language"],Q);let B=K($,["outputMimeType"]);if(F!==void 0&&B!=null)w(F,["parameters","outputOptions","mimeType"],B);let q=K($,["outputCompressionQuality"]);if(F!==void 0&&q!=null)w(F,["parameters","outputOptions","compressionQuality"],q);let L=K($,["addWatermark"]);if(F!==void 0&&L!=null)w(F,["parameters","addWatermark"],L);let E=K($,["labels"]);if(F!==void 0&&E!=null)w(F,["labels"],E);let V=K($,["imageSize"]);if(F!==void 0&&V!=null)w(F,["parameters","sampleImageSize"],V);let R=K($,["enhancePrompt"]);if(F!==void 0&&R!=null)w(F,["parameters","enhancePrompt"],R);return A}function qd0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["prompt"]);if(X!=null)w(A,["instances[0]","prompt"],X);let Y=K(F,["config"]);if(Y!=null)Bd0(Y,A);return A}function Ld0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["prompt"]);if(X!=null)w(A,["instances[0]","prompt"],X);let Y=K(F,["config"]);if(Y!=null)wd0(Y,A);return A}function Ed0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["predictions"]);if(J!=null){let Y=J;if(Array.isArray(Y))Y=Y.map((W)=>{return _d0(W)});w(F,["generatedImages"],Y)}let X=K($,["positivePromptSafetyAttributes"]);if(X!=null)w(F,["positivePromptSafetyAttributes"],Hh1(X));return F}function Vd0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["predictions"]);if(J!=null){let Y=J;if(Array.isArray(Y))Y=Y.map((W)=>{return P_(W)});w(F,["generatedImages"],Y)}let X=K($,["positivePromptSafetyAttributes"]);if(X!=null)w(F,["positivePromptSafetyAttributes"],Uh1(X));return F}function Nd0($,F){let A={},J=K($,["numberOfVideos"]);if(F!==void 0&&J!=null)w(F,["parameters","sampleCount"],J);if(K($,["outputGcsUri"])!==void 0)throw Error("outputGcsUri parameter is not supported in Gemini API.");if(K($,["fps"])!==void 0)throw Error("fps parameter is not supported in Gemini API.");let X=K($,["durationSeconds"]);if(F!==void 0&&X!=null)w(F,["parameters","durationSeconds"],X);if(K($,["seed"])!==void 0)throw Error("seed parameter is not supported in Gemini API.");let Y=K($,["aspectRatio"]);if(F!==void 0&&Y!=null)w(F,["parameters","aspectRatio"],Y);let W=K($,["resolution"]);if(F!==void 0&&W!=null)w(F,["parameters","resolution"],W);let Z=K($,["personGeneration"]);if(F!==void 0&&Z!=null)w(F,["parameters","personGeneration"],Z);if(K($,["pubsubTopic"])!==void 0)throw Error("pubsubTopic parameter is not supported in Gemini API.");let D=K($,["negativePrompt"]);if(F!==void 0&&D!=null)w(F,["parameters","negativePrompt"],D);let G=K($,["enhancePrompt"]);if(F!==void 0&&G!=null)w(F,["parameters","enhancePrompt"],G);if(K($,["generateAudio"])!==void 0)throw Error("generateAudio parameter is not supported in Gemini API.");let z=K($,["lastFrame"]);if(F!==void 0&&z!=null)w(F,["instances[0]","lastFrame"],R_(z));let H=K($,["referenceImages"]);if(F!==void 0&&H!=null){let U=H;if(Array.isArray(U))U=U.map((Q)=>{return Mc0(Q)});w(F,["instances[0]","referenceImages"],U)}if(K($,["mask"])!==void 0)throw Error("mask parameter is not supported in Gemini API.");if(K($,["compressionQuality"])!==void 0)throw Error("compressionQuality parameter is not supported in Gemini API.");return A}function Cd0($,F){let A={},J=K($,["numberOfVideos"]);if(F!==void 0&&J!=null)w(F,["parameters","sampleCount"],J);let X=K($,["outputGcsUri"]);if(F!==void 0&&X!=null)w(F,["parameters","storageUri"],X);let Y=K($,["fps"]);if(F!==void 0&&Y!=null)w(F,["parameters","fps"],Y);let W=K($,["durationSeconds"]);if(F!==void 0&&W!=null)w(F,["parameters","durationSeconds"],W);let Z=K($,["seed"]);if(F!==void 0&&Z!=null)w(F,["parameters","seed"],Z);let D=K($,["aspectRatio"]);if(F!==void 0&&D!=null)w(F,["parameters","aspectRatio"],D);let G=K($,["resolution"]);if(F!==void 0&&G!=null)w(F,["parameters","resolution"],G);let z=K($,["personGeneration"]);if(F!==void 0&&z!=null)w(F,["parameters","personGeneration"],z);let H=K($,["pubsubTopic"]);if(F!==void 0&&H!=null)w(F,["parameters","pubsubTopic"],H);let U=K($,["negativePrompt"]);if(F!==void 0&&U!=null)w(F,["parameters","negativePrompt"],U);let Q=K($,["enhancePrompt"]);if(F!==void 0&&Q!=null)w(F,["parameters","enhancePrompt"],Q);let B=K($,["generateAudio"]);if(F!==void 0&&B!=null)w(F,["parameters","generateAudio"],B);let q=K($,["lastFrame"]);if(F!==void 0&&q!=null)w(F,["instances[0]","lastFrame"],OF(q));let L=K($,["referenceImages"]);if(F!==void 0&&L!=null){let R=L;if(Array.isArray(R))R=R.map((N)=>{return Pc0(N)});w(F,["instances[0]","referenceImages"],R)}let E=K($,["mask"]);if(F!==void 0&&E!=null)w(F,["instances[0]","mask"],Cc0(E));let V=K($,["compressionQuality"]);if(F!==void 0&&V!=null)w(F,["parameters","compressionQuality"],V);return A}function Md0($){let F={},A=K($,["name"]);if(A!=null)w(F,["name"],A);let J=K($,["metadata"]);if(J!=null)w(F,["metadata"],J);let X=K($,["done"]);if(X!=null)w(F,["done"],X);let Y=K($,["error"]);if(Y!=null)w(F,["error"],Y);let W=K($,["response","generateVideoResponse"]);if(W!=null)w(F,["response"],Td0(W));return F}function Pd0($){let F={},A=K($,["name"]);if(A!=null)w(F,["name"],A);let J=K($,["metadata"]);if(J!=null)w(F,["metadata"],J);let X=K($,["done"]);if(X!=null)w(F,["done"],X);let Y=K($,["error"]);if(Y!=null)w(F,["error"],Y);let W=K($,["response"]);if(W!=null)w(F,["response"],jd0(W));return F}function Rd0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["prompt"]);if(X!=null)w(A,["instances[0]","prompt"],X);let Y=K(F,["image"]);if(Y!=null)w(A,["instances[0]","image"],R_(Y));let W=K(F,["video"]);if(W!=null)w(A,["instances[0]","video"],Kh1(W));let Z=K(F,["source"]);if(Z!=null)Od0(Z,A);let D=K(F,["config"]);if(D!=null)Nd0(D,A);return A}function Id0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["prompt"]);if(X!=null)w(A,["instances[0]","prompt"],X);let Y=K(F,["image"]);if(Y!=null)w(A,["instances[0]","image"],OF(Y));let W=K(F,["video"]);if(W!=null)w(A,["instances[0]","video"],Bh1(W));let Z=K(F,["source"]);if(Z!=null)Sd0(Z,A);let D=K(F,["config"]);if(D!=null)Cd0(D,A);return A}function Td0($){let F={},A=K($,["generatedSamples"]);if(A!=null){let Y=A;if(Array.isArray(Y))Y=Y.map((W)=>{return bd0(W)});w(F,["generatedVideos"],Y)}let J=K($,["raiMediaFilteredCount"]);if(J!=null)w(F,["raiMediaFilteredCount"],J);let X=K($,["raiMediaFilteredReasons"]);if(X!=null)w(F,["raiMediaFilteredReasons"],X);return F}function jd0($){let F={},A=K($,["videos"]);if(A!=null){let Y=A;if(Array.isArray(Y))Y=Y.map((W)=>{return xd0(W)});w(F,["generatedVideos"],Y)}let J=K($,["raiMediaFilteredCount"]);if(J!=null)w(F,["raiMediaFilteredCount"],J);let X=K($,["raiMediaFilteredReasons"]);if(X!=null)w(F,["raiMediaFilteredReasons"],X);return F}function Od0($,F){let A={},J=K($,["prompt"]);if(F!==void 0&&J!=null)w(F,["instances[0]","prompt"],J);let X=K($,["image"]);if(F!==void 0&&X!=null)w(F,["instances[0]","image"],R_(X));let Y=K($,["video"]);if(F!==void 0&&Y!=null)w(F,["instances[0]","video"],Kh1(Y));return A}function Sd0($,F){let A={},J=K($,["prompt"]);if(F!==void 0&&J!=null)w(F,["instances[0]","prompt"],J);let X=K($,["image"]);if(F!==void 0&&X!=null)w(F,["instances[0]","image"],OF(X));let Y=K($,["video"]);if(F!==void 0&&Y!=null)w(F,["instances[0]","video"],Bh1(Y));return A}function _d0($){let F={},A=K($,["_self"]);if(A!=null)w(F,["image"],dd0(A));let J=K($,["raiFilteredReason"]);if(J!=null)w(F,["raiFilteredReason"],J);let X=K($,["_self"]);if(X!=null)w(F,["safetyAttributes"],Hh1(X));return F}function P_($){let F={},A=K($,["_self"]);if(A!=null)w(F,["image"],zh1(A));let J=K($,["raiFilteredReason"]);if(J!=null)w(F,["raiFilteredReason"],J);let X=K($,["_self"]);if(X!=null)w(F,["safetyAttributes"],Uh1(X));let Y=K($,["prompt"]);if(Y!=null)w(F,["enhancedPrompt"],Y);return F}function kd0($){let F={},A=K($,["_self"]);if(A!=null)w(F,["mask"],zh1(A));let J=K($,["labels"]);if(J!=null){let X=J;if(Array.isArray(X))X=X.map((Y)=>{return Y});w(F,["labels"],X)}return F}function bd0($){let F={},A=K($,["video"]);if(A!=null)w(F,["video"],Vc0(A));return F}function xd0($){let F={},A=K($,["_self"]);if(A!=null)w(F,["video"],Nc0(A));return F}function gd0($){let F={},A=K($,["modelSelectionConfig"]);if(A!=null)w(F,["modelConfig"],A);let J=K($,["responseJsonSchema"]);if(J!=null)w(F,["responseJsonSchema"],J);let X=K($,["audioTimestamp"]);if(X!=null)w(F,["audioTimestamp"],X);let Y=K($,["candidateCount"]);if(Y!=null)w(F,["candidateCount"],Y);let W=K($,["enableAffectiveDialog"]);if(W!=null)w(F,["enableAffectiveDialog"],W);let Z=K($,["frequencyPenalty"]);if(Z!=null)w(F,["frequencyPenalty"],Z);let D=K($,["logprobs"]);if(D!=null)w(F,["logprobs"],D);let G=K($,["maxOutputTokens"]);if(G!=null)w(F,["maxOutputTokens"],G);let z=K($,["mediaResolution"]);if(z!=null)w(F,["mediaResolution"],z);let H=K($,["presencePenalty"]);if(H!=null)w(F,["presencePenalty"],H);let U=K($,["responseLogprobs"]);if(U!=null)w(F,["responseLogprobs"],U);let Q=K($,["responseMimeType"]);if(Q!=null)w(F,["responseMimeType"],Q);let B=K($,["responseModalities"]);if(B!=null)w(F,["responseModalities"],B);let q=K($,["responseSchema"]);if(q!=null)w(F,["responseSchema"],q);let L=K($,["routingConfig"]);if(L!=null)w(F,["routingConfig"],L);let E=K($,["seed"]);if(E!=null)w(F,["seed"],E);let V=K($,["speechConfig"]);if(V!=null)w(F,["speechConfig"],V);let R=K($,["stopSequences"]);if(R!=null)w(F,["stopSequences"],R);let N=K($,["temperature"]);if(N!=null)w(F,["temperature"],N);let S=K($,["thinkingConfig"]);if(S!=null)w(F,["thinkingConfig"],S);let C=K($,["topK"]);if(C!=null)w(F,["topK"],C);let M=K($,["topP"]);if(M!=null)w(F,["topP"],M);if(K($,["enableEnhancedCivicAnswers"])!==void 0)throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return F}function fd0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","name"],k6($,J));return A}function vd0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","name"],k6($,J));return A}function yd0($){let F={};if(K($,["authConfig"])!==void 0)throw Error("authConfig parameter is not supported in Gemini API.");let A=K($,["enableWidget"]);if(A!=null)w(F,["enableWidget"],A);return F}function ud0($){let F={};if(K($,["excludeDomains"])!==void 0)throw Error("excludeDomains parameter is not supported in Gemini API.");if(K($,["blockingConfidence"])!==void 0)throw Error("blockingConfidence parameter is not supported in Gemini API.");let A=K($,["timeRangeFilter"]);if(A!=null)w(F,["timeRangeFilter"],A);return F}function hd0($){let F={},A=K($,["aspectRatio"]);if(A!=null)w(F,["aspectRatio"],A);let J=K($,["imageSize"]);if(J!=null)w(F,["imageSize"],J);if(K($,["personGeneration"])!==void 0)throw Error("personGeneration parameter is not supported in Gemini API.");if(K($,["outputMimeType"])!==void 0)throw Error("outputMimeType parameter is not supported in Gemini API.");if(K($,["outputCompressionQuality"])!==void 0)throw Error("outputCompressionQuality parameter is not supported in Gemini API.");return F}function md0($){let F={},A=K($,["aspectRatio"]);if(A!=null)w(F,["aspectRatio"],A);let J=K($,["imageSize"]);if(J!=null)w(F,["imageSize"],J);let X=K($,["personGeneration"]);if(X!=null)w(F,["personGeneration"],X);let Y=K($,["outputMimeType"]);if(Y!=null)w(F,["imageOutputOptions","mimeType"],Y);let W=K($,["outputCompressionQuality"]);if(W!=null)w(F,["imageOutputOptions","compressionQuality"],W);return F}function dd0($){let F={},A=K($,["bytesBase64Encoded"]);if(A!=null)w(F,["imageBytes"],TW(A));let J=K($,["mimeType"]);if(J!=null)w(F,["mimeType"],J);return F}function zh1($){let F={},A=K($,["gcsUri"]);if(A!=null)w(F,["gcsUri"],A);let J=K($,["bytesBase64Encoded"]);if(J!=null)w(F,["imageBytes"],TW(J));let X=K($,["mimeType"]);if(X!=null)w(F,["mimeType"],X);return F}function R_($){let F={};if(K($,["gcsUri"])!==void 0)throw Error("gcsUri parameter is not supported in Gemini API.");let A=K($,["imageBytes"]);if(A!=null)w(F,["bytesBase64Encoded"],TW(A));let J=K($,["mimeType"]);if(J!=null)w(F,["mimeType"],J);return F}function OF($){let F={},A=K($,["gcsUri"]);if(A!=null)w(F,["gcsUri"],A);let J=K($,["imageBytes"]);if(J!=null)w(F,["bytesBase64Encoded"],TW(J));let X=K($,["mimeType"]);if(X!=null)w(F,["mimeType"],X);return F}function cd0($,F,A){let J={},X=K(F,["pageSize"]);if(A!==void 0&&X!=null)w(A,["_query","pageSize"],X);let Y=K(F,["pageToken"]);if(A!==void 0&&Y!=null)w(A,["_query","pageToken"],Y);let W=K(F,["filter"]);if(A!==void 0&&W!=null)w(A,["_query","filter"],W);let Z=K(F,["queryBase"]);if(A!==void 0&&Z!=null)w(A,["_url","models_url"],ou1($,Z));return J}function ld0($,F,A){let J={},X=K(F,["pageSize"]);if(A!==void 0&&X!=null)w(A,["_query","pageSize"],X);let Y=K(F,["pageToken"]);if(A!==void 0&&Y!=null)w(A,["_query","pageToken"],Y);let W=K(F,["filter"]);if(A!==void 0&&W!=null)w(A,["_query","filter"],W);let Z=K(F,["queryBase"]);if(A!==void 0&&Z!=null)w(A,["_url","models_url"],ou1($,Z));return J}function pd0($,F){let A={},J=K(F,["config"]);if(J!=null)cd0($,J,A);return A}function id0($,F){let A={},J=K(F,["config"]);if(J!=null)ld0($,J,A);return A}function nd0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["nextPageToken"]);if(J!=null)w(F,["nextPageToken"],J);let X=K($,["_self"]);if(X!=null){let Y=eu1(X);if(Array.isArray(Y))Y=Y.map((W)=>{return r01(W)});w(F,["models"],Y)}return F}function rd0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["nextPageToken"]);if(J!=null)w(F,["nextPageToken"],J);let X=K($,["_self"]);if(X!=null){let Y=eu1(X);if(Array.isArray(Y))Y=Y.map((W)=>{return a01(W)});w(F,["models"],Y)}return F}function ad0($){let F={},A=K($,["maskMode"]);if(A!=null)w(F,["maskMode"],A);let J=K($,["segmentationClasses"]);if(J!=null)w(F,["maskClasses"],J);let X=K($,["maskDilation"]);if(X!=null)w(F,["dilation"],X);return F}function r01($){let F={},A=K($,["name"]);if(A!=null)w(F,["name"],A);let J=K($,["displayName"]);if(J!=null)w(F,["displayName"],J);let X=K($,["description"]);if(X!=null)w(F,["description"],X);let Y=K($,["version"]);if(Y!=null)w(F,["version"],Y);let W=K($,["_self"]);if(W!=null)w(F,["tunedModelInfo"],Hc0(W));let Z=K($,["inputTokenLimit"]);if(Z!=null)w(F,["inputTokenLimit"],Z);let D=K($,["outputTokenLimit"]);if(D!=null)w(F,["outputTokenLimit"],D);let G=K($,["supportedGenerationMethods"]);if(G!=null)w(F,["supportedActions"],G);let z=K($,["temperature"]);if(z!=null)w(F,["temperature"],z);let H=K($,["maxTemperature"]);if(H!=null)w(F,["maxTemperature"],H);let U=K($,["topP"]);if(U!=null)w(F,["topP"],U);let Q=K($,["topK"]);if(Q!=null)w(F,["topK"],Q);let B=K($,["thinking"]);if(B!=null)w(F,["thinking"],B);return F}function a01($){let F={},A=K($,["name"]);if(A!=null)w(F,["name"],A);let J=K($,["displayName"]);if(J!=null)w(F,["displayName"],J);let X=K($,["description"]);if(X!=null)w(F,["description"],X);let Y=K($,["versionId"]);if(Y!=null)w(F,["version"],Y);let W=K($,["deployedModels"]);if(W!=null){let H=W;if(Array.isArray(H))H=H.map((U)=>{return Dd0(U)});w(F,["endpoints"],H)}let Z=K($,["labels"]);if(Z!=null)w(F,["labels"],Z);let D=K($,["_self"]);if(D!=null)w(F,["tunedModelInfo"],Uc0(D));let G=K($,["defaultCheckpointId"]);if(G!=null)w(F,["defaultCheckpointId"],G);let z=K($,["checkpoints"]);if(z!=null){let H=z;if(Array.isArray(H))H=H.map((U)=>{return U});w(F,["checkpoints"],H)}return F}function td0($){let F={},A=K($,["mediaResolution"]);if(A!=null)w(F,["mediaResolution"],A);let J=K($,["codeExecutionResult"]);if(J!=null)w(F,["codeExecutionResult"],J);let X=K($,["executableCode"]);if(X!=null)w(F,["executableCode"],X);let Y=K($,["fileData"]);if(Y!=null)w(F,["fileData"],Gd0(Y));let W=K($,["functionCall"]);if(W!=null)w(F,["functionCall"],zd0(W));let Z=K($,["functionResponse"]);if(Z!=null)w(F,["functionResponse"],Z);let D=K($,["inlineData"]);if(D!=null)w(F,["inlineData"],gm0(D));let G=K($,["text"]);if(G!=null)w(F,["text"],G);let z=K($,["thought"]);if(z!=null)w(F,["thought"],z);let H=K($,["thoughtSignature"]);if(H!=null)w(F,["thoughtSignature"],H);let U=K($,["videoMetadata"]);if(U!=null)w(F,["videoMetadata"],U);return F}function sd0($){let F={},A=K($,["productImage"]);if(A!=null)w(F,["image"],OF(A));return F}function od0($,F){let A={},J=K($,["numberOfImages"]);if(F!==void 0&&J!=null)w(F,["parameters","sampleCount"],J);let X=K($,["baseSteps"]);if(F!==void 0&&X!=null)w(F,["parameters","baseSteps"],X);let Y=K($,["outputGcsUri"]);if(F!==void 0&&Y!=null)w(F,["parameters","storageUri"],Y);let W=K($,["seed"]);if(F!==void 0&&W!=null)w(F,["parameters","seed"],W);let Z=K($,["safetyFilterLevel"]);if(F!==void 0&&Z!=null)w(F,["parameters","safetySetting"],Z);let D=K($,["personGeneration"]);if(F!==void 0&&D!=null)w(F,["parameters","personGeneration"],D);let G=K($,["addWatermark"]);if(F!==void 0&&G!=null)w(F,["parameters","addWatermark"],G);let z=K($,["outputMimeType"]);if(F!==void 0&&z!=null)w(F,["parameters","outputOptions","mimeType"],z);let H=K($,["outputCompressionQuality"]);if(F!==void 0&&H!=null)w(F,["parameters","outputOptions","compressionQuality"],H);let U=K($,["enhancePrompt"]);if(F!==void 0&&U!=null)w(F,["parameters","enhancePrompt"],U);let Q=K($,["labels"]);if(F!==void 0&&Q!=null)w(F,["labels"],Q);return A}function ed0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["source"]);if(X!=null)Fc0(X,A);let Y=K(F,["config"]);if(Y!=null)od0(Y,A);return A}function $c0($){let F={},A=K($,["predictions"]);if(A!=null){let J=A;if(Array.isArray(J))J=J.map((X)=>{return P_(X)});w(F,["generatedImages"],J)}return F}function Fc0($,F){let A={},J=K($,["prompt"]);if(F!==void 0&&J!=null)w(F,["instances[0]","prompt"],J);let X=K($,["personImage"]);if(F!==void 0&&X!=null)w(F,["instances[0]","personImage","image"],OF(X));let Y=K($,["productImages"]);if(F!==void 0&&Y!=null){let W=Y;if(Array.isArray(W))W=W.map((Z)=>{return sd0(Z)});w(F,["instances[0]","productImages"],W)}return A}function Ac0($){let F={},A=K($,["referenceImage"]);if(A!=null)w(F,["referenceImage"],OF(A));let J=K($,["referenceId"]);if(J!=null)w(F,["referenceId"],J);let X=K($,["referenceType"]);if(X!=null)w(F,["referenceType"],X);let Y=K($,["maskImageConfig"]);if(Y!=null)w(F,["maskImageConfig"],ad0(Y));let W=K($,["controlImageConfig"]);if(W!=null)w(F,["controlImageConfig"],dm0(W));let Z=K($,["styleImageConfig"]);if(Z!=null)w(F,["styleImageConfig"],Z);let D=K($,["subjectImageConfig"]);if(D!=null)w(F,["subjectImageConfig"],D);return F}function Hh1($){let F={},A=K($,["safetyAttributes","categories"]);if(A!=null)w(F,["categories"],A);let J=K($,["safetyAttributes","scores"]);if(J!=null)w(F,["scores"],J);let X=K($,["contentType"]);if(X!=null)w(F,["contentType"],X);return F}function Uh1($){let F={},A=K($,["safetyAttributes","categories"]);if(A!=null)w(F,["categories"],A);let J=K($,["safetyAttributes","scores"]);if(J!=null)w(F,["scores"],J);let X=K($,["contentType"]);if(X!=null)w(F,["contentType"],X);return F}function Jc0($){let F={},A=K($,["category"]);if(A!=null)w(F,["category"],A);if(K($,["method"])!==void 0)throw Error("method parameter is not supported in Gemini API.");let J=K($,["threshold"]);if(J!=null)w(F,["threshold"],J);return F}function Xc0($){let F={},A=K($,["image"]);if(A!=null)w(F,["image"],OF(A));return F}function Yc0($,F){let A={},J=K($,["mode"]);if(F!==void 0&&J!=null)w(F,["parameters","mode"],J);let X=K($,["maxPredictions"]);if(F!==void 0&&X!=null)w(F,["parameters","maxPredictions"],X);let Y=K($,["confidenceThreshold"]);if(F!==void 0&&Y!=null)w(F,["parameters","confidenceThreshold"],Y);let W=K($,["maskDilation"]);if(F!==void 0&&W!=null)w(F,["parameters","maskDilation"],W);let Z=K($,["binaryColorThreshold"]);if(F!==void 0&&Z!=null)w(F,["parameters","binaryColorThreshold"],Z);let D=K($,["labels"]);if(F!==void 0&&D!=null)w(F,["labels"],D);return A}function Wc0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["source"]);if(X!=null)Dc0(X,A);let Y=K(F,["config"]);if(Y!=null)Yc0(Y,A);return A}function Zc0($){let F={},A=K($,["predictions"]);if(A!=null){let J=A;if(Array.isArray(J))J=J.map((X)=>{return kd0(X)});w(F,["generatedMasks"],J)}return F}function Dc0($,F){let A={},J=K($,["prompt"]);if(F!==void 0&&J!=null)w(F,["instances[0]","prompt"],J);let X=K($,["image"]);if(F!==void 0&&X!=null)w(F,["instances[0]","image"],OF(X));let Y=K($,["scribbleImage"]);if(F!==void 0&&Y!=null)w(F,["instances[0]","scribble"],Xc0(Y));return A}function Gc0($){let F={},A=K($,["retrievalConfig"]);if(A!=null)w(F,["retrievalConfig"],A);let J=K($,["functionCallingConfig"]);if(J!=null)w(F,["functionCallingConfig"],Hd0(J));return F}function zc0($){let F={};if(K($,["retrieval"])!==void 0)throw Error("retrieval parameter is not supported in Gemini API.");let A=K($,["computerUse"]);if(A!=null)w(F,["computerUse"],A);let J=K($,["fileSearch"]);if(J!=null)w(F,["fileSearch"],J);let X=K($,["codeExecution"]);if(X!=null)w(F,["codeExecution"],X);if(K($,["enterpriseWebSearch"])!==void 0)throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let Y=K($,["functionDeclarations"]);if(Y!=null){let z=Y;if(Array.isArray(z))z=z.map((H)=>{return H});w(F,["functionDeclarations"],z)}let W=K($,["googleMaps"]);if(W!=null)w(F,["googleMaps"],yd0(W));let Z=K($,["googleSearch"]);if(Z!=null)w(F,["googleSearch"],ud0(Z));let D=K($,["googleSearchRetrieval"]);if(D!=null)w(F,["googleSearchRetrieval"],D);let G=K($,["urlContext"]);if(G!=null)w(F,["urlContext"],G);return F}function Qh1($){let F={},A=K($,["retrieval"]);if(A!=null)w(F,["retrieval"],A);let J=K($,["computerUse"]);if(J!=null)w(F,["computerUse"],J);if(K($,["fileSearch"])!==void 0)throw Error("fileSearch parameter is not supported in Vertex AI.");let X=K($,["codeExecution"]);if(X!=null)w(F,["codeExecution"],X);let Y=K($,["enterpriseWebSearch"]);if(Y!=null)w(F,["enterpriseWebSearch"],Y);let W=K($,["functionDeclarations"]);if(W!=null){let H=W;if(Array.isArray(H))H=H.map((U)=>{return Ud0(U)});w(F,["functionDeclarations"],H)}let Z=K($,["googleMaps"]);if(Z!=null)w(F,["googleMaps"],Z);let D=K($,["googleSearch"]);if(D!=null)w(F,["googleSearch"],D);let G=K($,["googleSearchRetrieval"]);if(G!=null)w(F,["googleSearchRetrieval"],G);let z=K($,["urlContext"]);if(z!=null)w(F,["urlContext"],z);return F}function Hc0($){let F={},A=K($,["baseModel"]);if(A!=null)w(F,["baseModel"],A);let J=K($,["createTime"]);if(J!=null)w(F,["createTime"],J);let X=K($,["updateTime"]);if(X!=null)w(F,["updateTime"],X);return F}function Uc0($){let F={},A=K($,["labels","google-vertex-llm-tuning-base-model-id"]);if(A!=null)w(F,["baseModel"],A);let J=K($,["createTime"]);if(J!=null)w(F,["createTime"],J);let X=K($,["updateTime"]);if(X!=null)w(F,["updateTime"],X);return F}function Qc0($,F){let A={},J=K($,["displayName"]);if(F!==void 0&&J!=null)w(F,["displayName"],J);let X=K($,["description"]);if(F!==void 0&&X!=null)w(F,["description"],X);let Y=K($,["defaultCheckpointId"]);if(F!==void 0&&Y!=null)w(F,["defaultCheckpointId"],Y);return A}function Kc0($,F){let A={},J=K($,["displayName"]);if(F!==void 0&&J!=null)w(F,["displayName"],J);let X=K($,["description"]);if(F!==void 0&&X!=null)w(F,["description"],X);let Y=K($,["defaultCheckpointId"]);if(F!==void 0&&Y!=null)w(F,["defaultCheckpointId"],Y);return A}function Bc0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","name"],k6($,J));let X=K(F,["config"]);if(X!=null)Qc0(X,A);return A}function wc0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["config"]);if(X!=null)Kc0(X,A);return A}function qc0($,F){let A={},J=K($,["outputGcsUri"]);if(F!==void 0&&J!=null)w(F,["parameters","storageUri"],J);let X=K($,["safetyFilterLevel"]);if(F!==void 0&&X!=null)w(F,["parameters","safetySetting"],X);let Y=K($,["personGeneration"]);if(F!==void 0&&Y!=null)w(F,["parameters","personGeneration"],Y);let W=K($,["includeRaiReason"]);if(F!==void 0&&W!=null)w(F,["parameters","includeRaiReason"],W);let Z=K($,["outputMimeType"]);if(F!==void 0&&Z!=null)w(F,["parameters","outputOptions","mimeType"],Z);let D=K($,["outputCompressionQuality"]);if(F!==void 0&&D!=null)w(F,["parameters","outputOptions","compressionQuality"],D);let G=K($,["enhanceInputImage"]);if(F!==void 0&&G!=null)w(F,["parameters","upscaleConfig","enhanceInputImage"],G);let z=K($,["imagePreservationFactor"]);if(F!==void 0&&z!=null)w(F,["parameters","upscaleConfig","imagePreservationFactor"],z);let H=K($,["labels"]);if(F!==void 0&&H!=null)w(F,["labels"],H);let U=K($,["numberOfImages"]);if(F!==void 0&&U!=null)w(F,["parameters","sampleCount"],U);let Q=K($,["mode"]);if(F!==void 0&&Q!=null)w(F,["parameters","mode"],Q);return A}function Lc0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["_url","model"],k6($,J));let X=K(F,["image"]);if(X!=null)w(A,["instances[0]","image"],OF(X));let Y=K(F,["upscaleFactor"]);if(Y!=null)w(A,["parameters","upscaleConfig","upscaleFactor"],Y);let W=K(F,["config"]);if(W!=null)qc0(W,A);return A}function Ec0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["predictions"]);if(J!=null){let X=J;if(Array.isArray(X))X=X.map((Y)=>{return P_(Y)});w(F,["generatedImages"],X)}return F}function Vc0($){let F={},A=K($,["uri"]);if(A!=null)w(F,["uri"],A);let J=K($,["encodedVideo"]);if(J!=null)w(F,["videoBytes"],TW(J));let X=K($,["encoding"]);if(X!=null)w(F,["mimeType"],X);return F}function Nc0($){let F={},A=K($,["gcsUri"]);if(A!=null)w(F,["uri"],A);let J=K($,["bytesBase64Encoded"]);if(J!=null)w(F,["videoBytes"],TW(J));let X=K($,["mimeType"]);if(X!=null)w(F,["mimeType"],X);return F}function Cc0($){let F={},A=K($,["image"]);if(A!=null)w(F,["_self"],OF(A));let J=K($,["maskMode"]);if(J!=null)w(F,["maskMode"],J);return F}function Mc0($){let F={},A=K($,["image"]);if(A!=null)w(F,["image"],R_(A));let J=K($,["referenceType"]);if(J!=null)w(F,["referenceType"],J);return F}function Pc0($){let F={},A=K($,["image"]);if(A!=null)w(F,["image"],OF(A));let J=K($,["referenceType"]);if(J!=null)w(F,["referenceType"],J);return F}function Kh1($){let F={},A=K($,["uri"]);if(A!=null)w(F,["uri"],A);let J=K($,["videoBytes"]);if(J!=null)w(F,["encodedVideo"],TW(J));let X=K($,["mimeType"]);if(X!=null)w(F,["encoding"],X);return F}function Bh1($){let F={},A=K($,["uri"]);if(A!=null)w(F,["gcsUri"],A);let J=K($,["videoBytes"]);if(J!=null)w(F,["bytesBase64Encoded"],TW(J));let X=K($,["mimeType"]);if(X!=null)w(F,["mimeType"],X);return F}function Rc0($,F){let A={},J=K($,["displayName"]);if(F!==void 0&&J!=null)w(F,["displayName"],J);return A}function Ic0($){let F={},A=K($,["config"]);if(A!=null)Rc0(A,F);return F}function Tc0($,F){let A={},J=K($,["force"]);if(F!==void 0&&J!=null)w(F,["_query","force"],J);return A}function jc0($){let F={},A=K($,["name"]);if(A!=null)w(F,["_url","name"],A);let J=K($,["config"]);if(J!=null)Tc0(J,F);return F}function Oc0($){let F={},A=K($,["name"]);if(A!=null)w(F,["_url","name"],A);return F}function Sc0($,F){let A={},J=K($,["customMetadata"]);if(F!==void 0&&J!=null){let Y=J;if(Array.isArray(Y))Y=Y.map((W)=>{return W});w(F,["customMetadata"],Y)}let X=K($,["chunkingConfig"]);if(F!==void 0&&X!=null)w(F,["chunkingConfig"],X);return A}function _c0($){let F={},A=K($,["name"]);if(A!=null)w(F,["name"],A);let J=K($,["metadata"]);if(J!=null)w(F,["metadata"],J);let X=K($,["done"]);if(X!=null)w(F,["done"],X);let Y=K($,["error"]);if(Y!=null)w(F,["error"],Y);let W=K($,["response"]);if(W!=null)w(F,["response"],bc0(W));return F}function kc0($){let F={},A=K($,["fileSearchStoreName"]);if(A!=null)w(F,["_url","file_search_store_name"],A);let J=K($,["fileName"]);if(J!=null)w(F,["fileName"],J);let X=K($,["config"]);if(X!=null)Sc0(X,F);return F}function bc0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["parent"]);if(J!=null)w(F,["parent"],J);let X=K($,["documentName"]);if(X!=null)w(F,["documentName"],X);return F}function xc0($,F){let A={},J=K($,["pageSize"]);if(F!==void 0&&J!=null)w(F,["_query","pageSize"],J);let X=K($,["pageToken"]);if(F!==void 0&&X!=null)w(F,["_query","pageToken"],X);return A}function gc0($){let F={},A=K($,["config"]);if(A!=null)xc0(A,F);return F}function fc0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["nextPageToken"]);if(J!=null)w(F,["nextPageToken"],J);let X=K($,["fileSearchStores"]);if(X!=null){let Y=X;if(Array.isArray(Y))Y=Y.map((W)=>{return W});w(F,["fileSearchStores"],Y)}return F}function wh1($,F){let A={},J=K($,["mimeType"]);if(F!==void 0&&J!=null)w(F,["mimeType"],J);let X=K($,["displayName"]);if(F!==void 0&&X!=null)w(F,["displayName"],X);let Y=K($,["customMetadata"]);if(F!==void 0&&Y!=null){let Z=Y;if(Array.isArray(Z))Z=Z.map((D)=>{return D});w(F,["customMetadata"],Z)}let W=K($,["chunkingConfig"]);if(F!==void 0&&W!=null)w(F,["chunkingConfig"],W);return A}function vc0($){let F={},A=K($,["fileSearchStoreName"]);if(A!=null)w(F,["_url","file_search_store_name"],A);let J=K($,["config"]);if(J!=null)wh1(J,F);return F}function yc0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);return F}var uc0="Content-Type",hc0="X-Server-Timeout",mc0="User-Agent",t01="x-goog-api-client",dc0="1.38.0",cc0=`google-genai-sdk/${dc0}`,lc0="v1beta1",pc0="v1beta";class qh1{constructor($){var F,A,J;if(this.clientOptions=Object.assign({},$),this.customBaseUrl=(F=$.httpOptions)===null||F===void 0?void 0:F.baseUrl,this.clientOptions.vertexai){if(this.clientOptions.project&&this.clientOptions.location)this.clientOptions.apiKey=void 0;else if(this.clientOptions.apiKey)this.clientOptions.project=void 0,this.clientOptions.location=void 0}let X={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl)this.clientOptions.location="global";if(!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");let W=$.project&&$.location||!!$.apiKey;if(this.customBaseUrl&&!W)X.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0;else if(this.clientOptions.apiKey||this.clientOptions.location==="global")X.baseUrl="https://aiplatform.googleapis.com/";else if(this.clientOptions.project&&this.clientOptions.location)X.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`;X.apiVersion=(A=this.clientOptions.apiVersion)!==null&&A!==void 0?A:lc0}else{if(!this.clientOptions.apiKey)throw new xV({message:"API key must be set when using the Gemini API.",status:403});X.apiVersion=(J=this.clientOptions.apiVersion)!==null&&J!==void 0?J:pc0,X.baseUrl="https://generativelanguage.googleapis.com/"}if(X.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=X,$.httpOptions)this.clientOptions.httpOptions=this.patchHttpOptions(X,$.httpOptions)}isVertexAI(){var $;return($=this.clientOptions.vertexai)!==null&&$!==void 0?$:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){let $=new Headers;return await this.clientOptions.auth.addAuthHeaders($),$}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;else throw Error("Headers are not set.")}getRequestUrlInternal($){if(!$||$.baseUrl===void 0||$.apiVersion===void 0)throw Error("HTTP options are not correctly set.");let A=[$.baseUrl.endsWith("/")?$.baseUrl.slice(0,-1):$.baseUrl];if($.apiVersion&&$.apiVersion!=="")A.push($.apiVersion);return A.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let $=this.getBaseUrl(),F=new URL($);return F.protocol=F.protocol=="http:"?"ws":"wss",F.toString()}setBaseUrl($){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=$;else throw Error("HTTP options are not correctly set.")}constructUrl($,F,A){let J=[this.getRequestUrlInternal(F)];if(A)J.push(this.getBaseResourcePath());if($!=="")J.push($);return new URL(`${J.join("/")}`)}shouldPrependVertexProjectPath($,F){if(F.baseUrl&&F.baseUrlResourceScope===g01.COLLECTION)return!1;if(this.clientOptions.apiKey)return!1;if(!this.clientOptions.vertexai)return!1;if($.path.startsWith("projects/"))return!1;if($.httpMethod==="GET"&&$.path.startsWith("publishers/google/models"))return!1;return!0}async request($){let F=this.clientOptions.httpOptions;if($.httpOptions)F=this.patchHttpOptions(this.clientOptions.httpOptions,$.httpOptions);let A=this.shouldPrependVertexProjectPath($,F),J=this.constructUrl($.path,F,A);if($.queryParams)for(let[Y,W]of Object.entries($.queryParams))J.searchParams.append(Y,String(W));let X={};if($.httpMethod==="GET"){if($.body&&$.body!=="{}")throw Error("Request body should be empty for GET request, but got non empty request body")}else X.body=$.body;return X=await this.includeExtraHttpOptionsToRequestInit(X,F,J.toString(),$.abortSignal),this.unaryApiCall(J,X,$.httpMethod)}patchHttpOptions($,F){let A=JSON.parse(JSON.stringify($));for(let[J,X]of Object.entries(F))if(typeof X==="object")A[J]=Object.assign(Object.assign({},A[J]),X);else if(X!==void 0)A[J]=X;return A}async requestStream($){let F=this.clientOptions.httpOptions;if($.httpOptions)F=this.patchHttpOptions(this.clientOptions.httpOptions,$.httpOptions);let A=this.shouldPrependVertexProjectPath($,F),J=this.constructUrl($.path,F,A);if(!J.searchParams.has("alt")||J.searchParams.get("alt")!=="sse")J.searchParams.set("alt","sse");let X={};return X.body=$.body,X=await this.includeExtraHttpOptionsToRequestInit(X,F,J.toString(),$.abortSignal),this.streamApiCall(J,X,$.httpMethod)}async includeExtraHttpOptionsToRequestInit($,F,A,J){if(F&&F.timeout||J){let X=new AbortController,Y=X.signal;if(F.timeout&&(F===null||F===void 0?void 0:F.timeout)>0){let W=setTimeout(()=>X.abort(),F.timeout);if(W&&typeof W.unref==="function")W.unref()}if(J)J.addEventListener("abort",()=>{X.abort()});$.signal=Y}if(F&&F.extraBody!==null)ic0($,F.extraBody);return $.headers=await this.getHeadersInternal(F,A),$}async unaryApiCall($,F,A){return this.apiCall($.toString(),Object.assign(Object.assign({},F),{method:A})).then(async(J)=>{return await Ku1(J),new oQ(J)}).catch((J)=>{if(J instanceof Error)throw J;else throw Error(JSON.stringify(J))})}async streamApiCall($,F,A){return this.apiCall($.toString(),Object.assign(Object.assign({},F),{method:A})).then(async(J)=>{return await Ku1(J),this.processStreamResponse(J)}).catch((J)=>{if(J instanceof Error)throw J;else throw Error(JSON.stringify(J))})}processStreamResponse($){return TF(this,arguments,function*(){var A;let J=(A=$===null||$===void 0?void 0:$.body)===null||A===void 0?void 0:A.getReader(),X=new TextDecoder("utf-8");if(!J)throw Error("Response body is empty");try{let Y="",W="data:",Z=[`

`,"\r\r",`\r
\r
`];while(!0){let{done:D,value:G}=yield V0(J.read());if(D){if(Y.trim().length>0)throw Error("Incomplete JSON segment at the end");break}let z=X.decode(G,{stream:!0});try{let Q=JSON.parse(z);if("error"in Q){let B=JSON.parse(JSON.stringify(Q.error)),q=B.status,L=B.code,E=`got status: ${q}. ${JSON.stringify(Q)}`;if(L>=400&&L<600)throw new xV({message:E,status:L})}}catch(Q){if(Q.name==="ApiError")throw Q}Y+=z;let H=-1,U=0;while(!0){H=-1,U=0;for(let q of Z){let L=Y.indexOf(q);if(L!==-1&&(H===-1||L<H))H=L,U=q.length}if(H===-1)break;let Q=Y.substring(0,H);Y=Y.substring(H+U);let B=Q.trim();if(B.startsWith(W)){let q=B.substring(W.length).trim();try{let L=new Response(q,{headers:$===null||$===void 0?void 0:$.headers,status:$===null||$===void 0?void 0:$.status,statusText:$===null||$===void 0?void 0:$.statusText});yield yield V0(new oQ(L))}catch(L){throw Error(`exception parsing stream chunk ${q}. ${L}`)}}}}}finally{J.releaseLock()}})}async apiCall($,F){return fetch($,F).catch((A)=>{throw Error(`exception ${A} sending request`)})}getDefaultHeaders(){let $={},F=cc0+" "+this.clientOptions.userAgentExtra;return $[mc0]=F,$[t01]=F,$[uc0]="application/json",$}async getHeadersInternal($,F){let A=new Headers;if($&&$.headers){for(let[J,X]of Object.entries($.headers))A.append(J,X);if($.timeout&&$.timeout>0)A.append(hc0,String(Math.ceil($.timeout/1000)))}return await this.clientOptions.auth.addAuthHeaders(A,F),A}getFileName($){var F;let A="";if(typeof $==="string")A=$.replace(/[/\\]+$/,""),A=(F=A.split(/[/\\]/).pop())!==null&&F!==void 0?F:"";return A}async uploadFile($,F){var A;let J={};if(F!=null)J.mimeType=F.mimeType,J.name=F.name,J.displayName=F.displayName;if(J.name&&!J.name.startsWith("files/"))J.name=`files/${J.name}`;let X=this.clientOptions.uploader,Y=await X.stat($);J.sizeBytes=String(Y.size);let W=(A=F===null||F===void 0?void 0:F.mimeType)!==null&&A!==void 0?A:Y.type;if(W===void 0||W==="")throw Error("Can not determine mimeType. Please provide mimeType in the config.");J.mimeType=W;let Z={file:J},D=this.getFileName($),G=m1("upload/v1beta/files",Z._url),z=await this.fetchUploadUrl(G,J.sizeBytes,J.mimeType,D,Z,F===null||F===void 0?void 0:F.httpOptions);return X.upload($,z,this)}async uploadFileToFileSearchStore($,F,A){var J;let X=this.clientOptions.uploader,Y=await X.stat(F),W=String(Y.size),Z=(J=A===null||A===void 0?void 0:A.mimeType)!==null&&J!==void 0?J:Y.type;if(Z===void 0||Z==="")throw Error("Can not determine mimeType. Please provide mimeType in the config.");let D=`upload/v1beta/${$}:uploadToFileSearchStore`,G=this.getFileName(F),z={};if(A!=null)wh1(A,z);let H=await this.fetchUploadUrl(D,W,Z,G,z,A===null||A===void 0?void 0:A.httpOptions);return X.uploadToFileSearchStore(F,H,this)}async downloadFile($){await this.clientOptions.downloader.download($,this)}async fetchUploadUrl($,F,A,J,X,Y){var W;let Z={};if(Y)Z=Y;else Z={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${F}`,"X-Goog-Upload-Header-Content-Type":`${A}`},J?{"X-Goog-Upload-File-Name":J}:{})};let D=await this.request({path:$,body:JSON.stringify(X),httpMethod:"POST",httpOptions:Z});if(!D||!(D===null||D===void 0?void 0:D.headers))throw Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let G=(W=D===null||D===void 0?void 0:D.headers)===null||W===void 0?void 0:W["x-goog-upload-url"];if(G===void 0)throw Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return G}}async function Ku1($){var F;if($===void 0)throw Error("response is undefined");if(!$.ok){let A=$.status,J;if((F=$.headers.get("content-type"))===null||F===void 0?void 0:F.includes("application/json"))J=await $.json();else J={error:{message:await $.text(),code:$.status,status:$.statusText}};let X=JSON.stringify(J);if(A>=400&&A<600)throw new xV({message:X,status:A});throw Error(X)}}function ic0($,F){if(!F||Object.keys(F).length===0)return;if($.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let A={};if(typeof $.body==="string"&&$.body.length>0)try{let Y=JSON.parse($.body);if(typeof Y==="object"&&Y!==null&&!Array.isArray(Y))A=Y;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch(Y){console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function J(Y,W){let Z=Object.assign({},Y);for(let D in W)if(Object.prototype.hasOwnProperty.call(W,D)){let G=W[D],z=Z[D];if(G&&typeof G==="object"&&!Array.isArray(G)&&z&&typeof z==="object"&&!Array.isArray(z))Z[D]=J(z,G);else{if(z&&G&&typeof z!==typeof G)console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${D}". Original type: ${typeof z}, New type: ${typeof G}. Overwriting.`);Z[D]=G}}return Z}let X=J(A,F);$.body=JSON.stringify(X)}var nc0="mcp_used/unknown",rc0=!1;function Lh1($){for(let F of $){if(ac0(F))return!0;if(typeof F==="object"&&"inputSchema"in F)return!0}return rc0}function Eh1($){var F;let A=(F=$[t01])!==null&&F!==void 0?F:"";$[t01]=(A+` ${nc0}`).trimStart()}function ac0($){return $!==null&&typeof $==="object"&&$ instanceof z61}function tc0($){return TF(this,arguments,function*(A,J=100){let X=void 0,Y=0;while(Y<J){let W=yield V0(A.listTools({cursor:X}));for(let Z of W.tools)yield yield V0(Z),Y++;if(!W.nextCursor)break;X=W.nextCursor}})}class z61{constructor($=[],F){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=$,this.config=F}static create($,F){return new z61($,F)}async initialize(){var $,F,A,J;if(this.mcpTools.length>0)return;let X={},Y=[];for(let G of this.mcpClients)try{for(var W=!0,Z=(F=void 0,jF(tc0(G))),D;D=await Z.next(),$=D.done,!$;W=!0){J=D.value,W=!1;let z=J;Y.push(z);let H=z.name;if(X[H])throw Error(`Duplicate function name ${H} found in MCP tools. Please ensure function names are unique.`);X[H]=G}}catch(z){F={error:z}}finally{try{if(!W&&!$&&(A=Z.return))await A.call(Z)}finally{if(F)throw F.error}}this.mcpTools=Y,this.functionNameToMcpClient=X}async tool(){return await this.initialize(),bu0(this.mcpTools,this.config)}async callTool($){await this.initialize();let F=[];for(let A of $)if(A.name in this.functionNameToMcpClient){let J=this.functionNameToMcpClient[A.name],X=void 0;if(this.config.timeout)X={timeout:this.config.timeout};let Y=await J.callTool({name:A.name,arguments:A.args},void 0,X);F.push({functionResponse:{name:A.name,response:Y.isError?{error:Y}:Y}})}return F}}async function sc0($,F,A){let J=new cu1,X;if(A.data instanceof Blob)X=JSON.parse(await A.data.text());else X=JSON.parse(A.data);Object.assign(J,X),F(J)}class Vh1{constructor($,F,A){this.apiClient=$,this.auth=F,this.webSocketFactory=A}async connect($){var F,A;if(this.apiClient.isVertexAI())throw Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let J=this.apiClient.getWebsocketBaseUrl(),X=this.apiClient.getApiVersion(),Y=ec0(this.apiClient.getDefaultHeaders()),W=this.apiClient.getApiKey(),Z=`${J}/ws/google.ai.generativelanguage.${X}.GenerativeService.BidiGenerateMusic?key=${W}`,D=()=>{},G=new Promise((V)=>{D=V}),z=$.callbacks,H=function(){D({})},U=this.apiClient,Q={onopen:H,onmessage:(V)=>{sc0(U,z.onmessage,V)},onerror:(F=z===null||z===void 0?void 0:z.onerror)!==null&&F!==void 0?F:function(V){},onclose:(A=z===null||z===void 0?void 0:z.onclose)!==null&&A!==void 0?A:function(V){}},B=this.webSocketFactory.create(Z,oc0(Y),Q);B.connect(),await G;let E={setup:{model:k6(this.apiClient,$.model)}};return B.send(JSON.stringify(E)),new Nh1(B,this.apiClient)}}class Nh1{constructor($,F){this.conn=$,this.apiClient=F}async setWeightedPrompts($){if(!$.weightedPrompts||Object.keys($.weightedPrompts).length===0)throw Error("Weighted prompts must be set and contain at least one entry.");let F=Rm0($);this.conn.send(JSON.stringify({clientContent:F}))}async setMusicGenerationConfig($){if(!$.musicGenerationConfig)$.musicGenerationConfig={};let F=Pm0($);this.conn.send(JSON.stringify(F))}sendPlaybackControl($){let F={playbackControl:$};this.conn.send(JSON.stringify(F))}play(){this.sendPlaybackControl(rQ.PLAY)}pause(){this.sendPlaybackControl(rQ.PAUSE)}stop(){this.sendPlaybackControl(rQ.STOP)}resetContext(){this.sendPlaybackControl(rQ.RESET_CONTEXT)}close(){this.conn.close()}}function oc0($){let F={};return $.forEach((A,J)=>{F[J]=A}),F}function ec0($){let F=new Headers;for(let[A,J]of Object.entries($))F.append(A,J);return F}var $l0="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Fl0($,F,A){let J=new du1,X;if(A.data instanceof Blob)X=await A.data.text();else if(A.data instanceof ArrayBuffer)X=new TextDecoder().decode(A.data);else X=A.data;let Y=JSON.parse(X);if($.isVertexAI()){let W=jm0(Y);Object.assign(J,W)}else Object.assign(J,Y);F(J)}class Ch1{constructor($,F,A){this.apiClient=$,this.auth=F,this.webSocketFactory=A,this.music=new Vh1(this.apiClient,this.auth,this.webSocketFactory)}async connect($){var F,A,J,X,Y,W;if($.config&&$.config.httpOptions)throw Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let Z=this.apiClient.getWebsocketBaseUrl(),D=this.apiClient.getApiVersion(),G,z=this.apiClient.getHeaders();if($.config&&$.config.tools&&Lh1($.config.tools))Eh1(z);let H=Xl0(z);if(this.apiClient.isVertexAI()){let I=this.apiClient.getProject(),T=this.apiClient.getLocation(),j=this.apiClient.getApiKey(),b=!!I&&!!T||!!j;if(this.apiClient.getCustomBaseUrl()&&!b)G=Z;else G=`${Z}/ws/google.cloud.aiplatform.${D}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(H,G)}else{let I=this.apiClient.getApiKey(),T="BidiGenerateContent",j="key";if(I===null||I===void 0?void 0:I.startsWith("auth_tokens/")){if(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),D!=="v1alpha")console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection.");T="BidiGenerateContentConstrained",j="access_token"}G=`${Z}/ws/google.ai.generativelanguage.${D}.GenerativeService.${T}?${j}=${I}`}let U=()=>{},Q=new Promise((I)=>{U=I}),B=$.callbacks,q=function(){var I;(I=B===null||B===void 0?void 0:B.onopen)===null||I===void 0||I.call(B),U({})},L=this.apiClient,E={onopen:q,onmessage:(I)=>{Fl0(L,B.onmessage,I)},onerror:(F=B===null||B===void 0?void 0:B.onerror)!==null&&F!==void 0?F:function(I){},onclose:(A=B===null||B===void 0?void 0:B.onclose)!==null&&A!==void 0?A:function(I){}},V=this.webSocketFactory.create(G,Jl0(H),E);V.connect(),await Q;let R=k6(this.apiClient,$.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){let I=this.apiClient.getProject(),T=this.apiClient.getLocation();if(I&&T)R=`projects/${I}/locations/${T}/`+R}let N={};if(this.apiClient.isVertexAI()&&((J=$.config)===null||J===void 0?void 0:J.responseModalities)===void 0)if($.config===void 0)$.config={responseModalities:[B_.AUDIO]};else $.config.responseModalities=[B_.AUDIO];if((X=$.config)===null||X===void 0?void 0:X.generationConfig)console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let S=(W=(Y=$.config)===null||Y===void 0?void 0:Y.tools)!==null&&W!==void 0?W:[],C=[];for(let I of S)if(this.isCallableTool(I)){let T=I;C.push(await T.tool())}else C.push(I);if(C.length>0)$.config.tools=C;let M={model:R,config:$.config,callbacks:$.callbacks};if(this.apiClient.isVertexAI())N=Mm0(this.apiClient,M);else N=Cm0(this.apiClient,M);return delete N.config,V.send(JSON.stringify(N)),new Mh1(V,this.apiClient)}isCallableTool($){return"callTool"in $&&typeof $.callTool==="function"}}var Al0={turnComplete:!0};class Mh1{constructor($,F){this.conn=$,this.apiClient=F}tLiveClientContent($,F){if(F.turns!==null&&F.turns!==void 0){let A=[];try{if(A=A$(F.turns),!$.isVertexAI())A=A.map((J)=>M_(J))}catch(J){throw Error(`Failed to parse client content "turns", type: '${typeof F.turns}'`)}return{clientContent:{turns:A,turnComplete:F.turnComplete}}}return{clientContent:{turnComplete:F.turnComplete}}}tLiveClienttToolResponse($,F){let A=[];if(F.functionResponses==null)throw Error("functionResponses is required.");if(!Array.isArray(F.functionResponses))A=[F.functionResponses];else A=F.functionResponses;if(A.length===0)throw Error("functionResponses is required.");for(let X of A){if(typeof X!=="object"||X===null||!("name"in X)||!("response"in X))throw Error(`Could not parse function response, type '${typeof X}'.`);if(!$.isVertexAI()&&!("id"in X))throw Error($l0)}return{toolResponse:{functionResponses:A}}}sendClientContent($){$=Object.assign(Object.assign({},Al0),$);let F=this.tLiveClientContent(this.apiClient,$);this.conn.send(JSON.stringify(F))}sendRealtimeInput($){let F={};if(this.apiClient.isVertexAI())F={realtimeInput:Tm0($)};else F={realtimeInput:Im0($)};this.conn.send(JSON.stringify(F))}sendToolResponse($){if($.functionResponses==null)throw Error("Tool response parameters are required.");let F=this.tLiveClienttToolResponse(this.apiClient,$);this.conn.send(JSON.stringify(F))}close(){this.conn.close()}}function Jl0($){let F={};return $.forEach((A,J)=>{F[J]=A}),F}function Xl0($){let F=new Headers;for(let[A,J]of Object.entries($))F.append(A,J);return F}var Bu1=10;function wu1($){var F,A,J;if((F=$===null||$===void 0?void 0:$.automaticFunctionCalling)===null||F===void 0?void 0:F.disable)return!0;let X=!1;for(let W of(A=$===null||$===void 0?void 0:$.tools)!==null&&A!==void 0?A:[])if(sQ(W)){X=!0;break}if(!X)return!0;let Y=(J=$===null||$===void 0?void 0:$.automaticFunctionCalling)===null||J===void 0?void 0:J.maximumRemoteCalls;if(Y&&(Y<0||!Number.isInteger(Y))||Y==0)return console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",Y),!0;return!1}function sQ($){return"callTool"in $&&typeof $.callTool==="function"}function Yl0($){var F,A,J;return(J=(A=(F=$.config)===null||F===void 0?void 0:F.tools)===null||A===void 0?void 0:A.some((X)=>sQ(X)))!==null&&J!==void 0?J:!1}function qu1($){var F;let A=[];if(!((F=$===null||$===void 0?void 0:$.config)===null||F===void 0?void 0:F.tools))return A;return $.config.tools.forEach((J,X)=>{if(sQ(J))return;let Y=J;if(Y.functionDeclarations&&Y.functionDeclarations.length>0)A.push(X)}),A}function Lu1($){var F;return!((F=$===null||$===void 0?void 0:$.automaticFunctionCalling)===null||F===void 0?void 0:F.ignoreCallHistory)}class Ph1 extends vA{constructor($){super();this.apiClient=$,this.generateContent=async(F)=>{var A,J,X,Y,W;let Z=await this.processParamsMaybeAddMcpUsage(F);if(this.maybeMoveToResponseJsonSchem(F),!Yl0(F)||wu1(F.config))return await this.generateContentInternal(Z);let D=qu1(F);if(D.length>0){let B=D.map((q)=>`tools[${q}]`).join(", ");throw Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${B}.`)}let G,z,H=A$(Z.contents),U=(X=(J=(A=Z.config)===null||A===void 0?void 0:A.automaticFunctionCalling)===null||J===void 0?void 0:J.maximumRemoteCalls)!==null&&X!==void 0?X:Bu1,Q=0;while(Q<U){if(G=await this.generateContentInternal(Z),!G.functionCalls||G.functionCalls.length===0)break;let B=G.candidates[0].content,q=[];for(let L of(W=(Y=F.config)===null||Y===void 0?void 0:Y.tools)!==null&&W!==void 0?W:[])if(sQ(L)){let V=await L.callTool(G.functionCalls);q.push(...V)}if(Q++,z={role:"user",parts:q},Z.contents=A$(Z.contents),Z.contents.push(B),Z.contents.push(z),Lu1(Z.config))H.push(B),H.push(z)}if(Lu1(Z.config))G.automaticFunctionCallingHistory=H;return G},this.generateContentStream=async(F)=>{var A,J,X,Y,W;if(this.maybeMoveToResponseJsonSchem(F),wu1(F.config)){let z=await this.processParamsMaybeAddMcpUsage(F);return await this.generateContentStreamInternal(z)}let Z=qu1(F);if(Z.length>0){let z=Z.map((H)=>`tools[${H}]`).join(", ");throw Error(`Incompatible tools found at ${z}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let D=(X=(J=(A=F===null||F===void 0?void 0:F.config)===null||A===void 0?void 0:A.toolConfig)===null||J===void 0?void 0:J.functionCallingConfig)===null||X===void 0?void 0:X.streamFunctionCallArguments,G=(W=(Y=F===null||F===void 0?void 0:F.config)===null||Y===void 0?void 0:Y.automaticFunctionCalling)===null||W===void 0?void 0:W.disable;if(D&&!G)throw Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(F)},this.generateImages=async(F)=>{return await this.generateImagesInternal(F).then((A)=>{var J;let X,Y=[];if(A===null||A===void 0?void 0:A.generatedImages)for(let Z of A.generatedImages)if(Z&&(Z===null||Z===void 0?void 0:Z.safetyAttributes)&&((J=Z===null||Z===void 0?void 0:Z.safetyAttributes)===null||J===void 0?void 0:J.contentType)==="Positive Prompt")X=Z===null||Z===void 0?void 0:Z.safetyAttributes;else Y.push(Z);let W;if(X)W={generatedImages:Y,positivePromptSafetyAttributes:X,sdkHttpResponse:A.sdkHttpResponse};else W={generatedImages:Y,sdkHttpResponse:A.sdkHttpResponse};return W})},this.list=async(F)=>{var A;let Y={config:Object.assign(Object.assign({},{queryBase:!0}),F===null||F===void 0?void 0:F.config)};if(this.apiClient.isVertexAI()){if(!Y.config.queryBase)if((A=Y.config)===null||A===void 0?void 0:A.filter)throw Error("Filtering tuned models list for Vertex AI is not currently supported");else Y.config.filter="labels.tune-type:*"}return new jW(NX.PAGED_ITEM_MODELS,(W)=>this.listInternal(W),await this.listInternal(Y),Y)},this.editImage=async(F)=>{let A={model:F.model,prompt:F.prompt,referenceImages:[],config:F.config};if(F.referenceImages){if(F.referenceImages)A.referenceImages=F.referenceImages.map((J)=>J.toReferenceImageAPI())}return await this.editImageInternal(A)},this.upscaleImage=async(F)=>{let A={numberOfImages:1,mode:"upscale"};if(F.config)A=Object.assign(Object.assign({},A),F.config);let J={model:F.model,image:F.image,upscaleFactor:F.upscaleFactor,config:A};return await this.upscaleImageInternal(J)},this.generateVideos=async(F)=>{var A,J,X,Y,W,Z;if((F.prompt||F.image||F.video)&&F.source)throw Error("Source and prompt/image/video are mutually exclusive. Please only use source.");if(!this.apiClient.isVertexAI()){if(((A=F.video)===null||A===void 0?void 0:A.uri)&&((J=F.video)===null||J===void 0?void 0:J.videoBytes))F.video={uri:F.video.uri,mimeType:F.video.mimeType};else if(((Y=(X=F.source)===null||X===void 0?void 0:X.video)===null||Y===void 0?void 0:Y.uri)&&((Z=(W=F.source)===null||W===void 0?void 0:W.video)===null||Z===void 0?void 0:Z.videoBytes))F.source.video={uri:F.source.video.uri,mimeType:F.source.video.mimeType}}return await this.generateVideosInternal(F)}}maybeMoveToResponseJsonSchem($){if($.config&&$.config.responseSchema){if(!$.config.responseJsonSchema){if(Object.keys($.config.responseSchema).includes("$schema"))$.config.responseJsonSchema=$.config.responseSchema,delete $.config.responseSchema}}return}async processParamsMaybeAddMcpUsage($){var F,A,J;let X=(F=$.config)===null||F===void 0?void 0:F.tools;if(!X)return $;let Y=await Promise.all(X.map(async(Z)=>{if(sQ(Z))return await Z.tool();return Z})),W={model:$.model,contents:$.contents,config:Object.assign(Object.assign({},$.config),{tools:Y})};if(W.config.tools=Y,$.config&&$.config.tools&&Lh1($.config.tools)){let Z=(J=(A=$.config.httpOptions)===null||A===void 0?void 0:A.headers)!==null&&J!==void 0?J:{},D=Object.assign({},Z);if(Object.keys(D).length===0)D=this.apiClient.getDefaultHeaders();Eh1(D),W.config.httpOptions=Object.assign(Object.assign({},$.config.httpOptions),{headers:D})}return W}async initAfcToolsMap($){var F,A,J;let X=new Map;for(let Y of(A=(F=$.config)===null||F===void 0?void 0:F.tools)!==null&&A!==void 0?A:[])if(sQ(Y)){let W=Y,Z=await W.tool();for(let D of(J=Z.functionDeclarations)!==null&&J!==void 0?J:[]){if(!D.name)throw Error("Function declaration name is required.");if(X.has(D.name))throw Error(`Duplicate tool declaration name: ${D.name}`);X.set(D.name,W)}}return X}async processAfcStream($){var F,A,J;let X=(J=(A=(F=$.config)===null||F===void 0?void 0:F.automaticFunctionCalling)===null||A===void 0?void 0:A.maximumRemoteCalls)!==null&&J!==void 0?J:Bu1,Y=!1,W=0,Z=await this.initAfcToolsMap($);return function(D,G,z){return TF(this,arguments,function*(){var H,U,Q,B,q,L;while(W<X){if(Y)W++,Y=!1;let N=yield V0(D.processParamsMaybeAddMcpUsage(z)),S=yield V0(D.generateContentStreamInternal(N)),C=[],M=[];try{for(var E=!0,V=(U=void 0,jF(S)),R;R=yield V0(V.next()),H=R.done,!H;E=!0){B=R.value,E=!1;let I=B;if(yield yield V0(I),I.candidates&&((q=I.candidates[0])===null||q===void 0?void 0:q.content)){M.push(I.candidates[0].content);for(let T of(L=I.candidates[0].content.parts)!==null&&L!==void 0?L:[])if(W<X&&T.functionCall){if(!T.functionCall.name)throw Error("Function call name was not returned by the model.");if(!G.has(T.functionCall.name))throw Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${G.keys()}, mising tool: ${T.functionCall.name}`);else{let j=yield V0(G.get(T.functionCall.name).callTool([T.functionCall]));C.push(...j)}}}}}catch(I){U={error:I}}finally{try{if(!E&&!H&&(Q=V.return))yield V0(Q.call(V))}finally{if(U)throw U.error}}if(C.length>0){Y=!0;let I=new iQ;I.candidates=[{content:{role:"user",parts:C}}],yield yield V0(I);let T=[];T.push(...M),T.push({role:"user",parts:C});let j=A$(z.contents).concat(T);z.contents=j}else break}})}(this,Z,$)}async generateContentInternal($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=Hu1(this.apiClient,$);return W=m1("{model}:generateContent",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=Qu1(G),H=new iQ;return Object.assign(H,z),H})}else{let D=zu1(this.apiClient,$);return W=m1("{model}:generateContent",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=Uu1(G),H=new iQ;return Object.assign(H,z),H})}}async generateContentStreamInternal($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=Hu1(this.apiClient,$);return W=m1("{model}:streamGenerateContent?alt=sse",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.requestStream({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}),Y.then(function(z){return TF(this,arguments,function*(){var H,U,Q,B;try{for(var q=!0,L=jF(z),E;E=yield V0(L.next()),H=E.done,!H;q=!0){B=E.value,q=!1;let V=B,R=Qu1(yield V0(V.json()));R.sdkHttpResponse={headers:V.headers};let N=new iQ;Object.assign(N,R),yield yield V0(N)}}catch(V){U={error:V}}finally{try{if(!q&&!H&&(Q=L.return))yield V0(Q.call(L))}finally{if(U)throw U.error}}})})}else{let D=zu1(this.apiClient,$);return W=m1("{model}:streamGenerateContent?alt=sse",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.requestStream({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}),Y.then(function(z){return TF(this,arguments,function*(){var H,U,Q,B;try{for(var q=!0,L=jF(z),E;E=yield V0(L.next()),H=E.done,!H;q=!0){B=E.value,q=!1;let V=B,R=Uu1(yield V0(V.json()));R.sdkHttpResponse={headers:V.headers};let N=new iQ;Object.assign(N,R),yield yield V0(N)}}catch(V){U={error:V}}finally{try{if(!q&&!H&&(Q=L.return))yield V0(Q.call(L))}finally{if(U)throw U.error}}})})}}async embedContent($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=Yd0(this.apiClient,$);return W=m1("{model}:predict",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=Zd0(G),H=new f01;return Object.assign(H,z),H})}else{let D=Xd0(this.apiClient,$);return W=m1("{model}:batchEmbedContents",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=Wd0(G),H=new f01;return Object.assign(H,z),H})}}async generateImagesInternal($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=Ld0(this.apiClient,$);return W=m1("{model}:predict",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=Vd0(G),H=new v01;return Object.assign(H,z),H})}else{let D=qd0(this.apiClient,$);return W=m1("{model}:predict",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=Ed0(G),H=new v01;return Object.assign(H,z),H})}}async editImageInternal($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI()){let W=$d0(this.apiClient,$);return X=m1("{model}:predict",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json().then((D)=>{let G=D;return G.sdkHttpResponse={headers:Z.headers},G})}),J.then((Z)=>{let D=Fd0(Z),G=new _u1;return Object.assign(G,D),G})}else throw Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI()){let W=Lc0(this.apiClient,$);return X=m1("{model}:predict",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json().then((D)=>{let G=D;return G.sdkHttpResponse={headers:Z.headers},G})}),J.then((Z)=>{let D=Ec0(Z),G=new ku1;return Object.assign(G,D),G})}else throw Error("This method is only supported by the Vertex AI.")}async recontextImage($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI()){let W=ed0(this.apiClient,$);return X=m1("{model}:predict",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json()}),J.then((Z)=>{let D=$c0(Z),G=new bu1;return Object.assign(G,D),G})}else throw Error("This method is only supported by the Vertex AI.")}async segmentImage($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI()){let W=Wc0(this.apiClient,$);return X=m1("{model}:predict",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json()}),J.then((Z)=>{let D=Zc0(Z),G=new xu1;return Object.assign(G,D),G})}else throw Error("This method is only supported by the Vertex AI.")}async get($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=vd0(this.apiClient,$);return W=m1("{name}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json()}),Y.then((G)=>{return a01(G)})}else{let D=fd0(this.apiClient,$);return W=m1("{name}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json()}),Y.then((G)=>{return r01(G)})}}async listInternal($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=id0(this.apiClient,$);return W=m1("{models_url}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=rd0(G),H=new y01;return Object.assign(H,z),H})}else{let D=pd0(this.apiClient,$);return W=m1("{models_url}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=nd0(G),H=new y01;return Object.assign(H,z),H})}}async update($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=wc0(this.apiClient,$);return W=m1("{model}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"PATCH",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json()}),Y.then((G)=>{return a01(G)})}else{let D=Bc0(this.apiClient,$);return W=m1("{name}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"PATCH",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json()}),Y.then((G)=>{return r01(G)})}}async delete($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=tm0(this.apiClient,$);return W=m1("{name}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"DELETE",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=om0(G),H=new u01;return Object.assign(H,z),H})}else{let D=am0(this.apiClient,$);return W=m1("{name}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"DELETE",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=sm0(G),H=new u01;return Object.assign(H,z),H})}}async countTokens($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=im0(this.apiClient,$);return W=m1("{model}:countTokens",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=rm0(G),H=new h01;return Object.assign(H,z),H})}else{let D=pm0(this.apiClient,$);return W=m1("{model}:countTokens",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=nm0(G),H=new h01;return Object.assign(H,z),H})}}async computeTokens($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI()){let W=ym0(this.apiClient,$);return X=m1("{model}:computeTokens",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json().then((D)=>{let G=D;return G.sdkHttpResponse={headers:Z.headers},G})}),J.then((Z)=>{let D=um0(Z),G=new gu1;return Object.assign(G,D),G})}else throw Error("This method is only supported by the Vertex AI.")}async generateVideosInternal($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=Id0(this.apiClient,$);return W=m1("{model}:predictLongRunning",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json()}),Y.then((G)=>{let z=Pd0(G),H=new w_;return Object.assign(H,z),H})}else{let D=Rd0(this.apiClient,$);return W=m1("{model}:predictLongRunning",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json()}),Y.then((G)=>{let z=Md0(G),H=new w_;return Object.assign(H,z),H})}}}class Rh1 extends vA{constructor($){super();this.apiClient=$}async getVideosOperation($){let{operation:F,config:A}=$;if(F.name===void 0||F.name==="")throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let J=F.name.split("/operations/")[0],X=void 0;if(A&&"httpOptions"in A)X=A.httpOptions;let Y=await this.fetchPredictVideosOperationInternal({operationName:F.name,resourceName:J,config:{httpOptions:X}});return F._fromAPIResponse({apiResponse:Y,_isVertexAI:!0})}else{let J=await this.getVideosOperationInternal({operationName:F.name,config:A});return F._fromAPIResponse({apiResponse:J,_isVertexAI:!1})}}async get($){let{operation:F,config:A}=$;if(F.name===void 0||F.name==="")throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let J=F.name.split("/operations/")[0],X=void 0;if(A&&"httpOptions"in A)X=A.httpOptions;let Y=await this.fetchPredictVideosOperationInternal({operationName:F.name,resourceName:J,config:{httpOptions:X}});return F._fromAPIResponse({apiResponse:Y,_isVertexAI:!0})}else{let J=await this.getVideosOperationInternal({operationName:F.name,config:A});return F._fromAPIResponse({apiResponse:J,_isVertexAI:!1})}}async getVideosOperationInternal($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=Cu0($);return W=m1("{operationName}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json()}),Y}else{let D=Nu0($);return W=m1("{operationName}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json()}),Y}}async fetchPredictVideosOperationInternal($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI()){let W=Ku0($);return X=m1("{resourceName}:fetchPredictOperation",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json()}),J}else throw Error("This method is only supported by the Vertex AI.")}}function Wl0($){let F={},A=K($,["data"]);if(A!=null)w(F,["data"],A);if(K($,["displayName"])!==void 0)throw Error("displayName parameter is not supported in Gemini API.");let J=K($,["mimeType"]);if(J!=null)w(F,["mimeType"],J);return F}function Zl0($){let F={},A=K($,["parts"]);if(A!=null){let X=A;if(Array.isArray(X))X=X.map((Y)=>{return wl0(Y)});w(F,["parts"],X)}let J=K($,["role"]);if(J!=null)w(F,["role"],J);return F}function Dl0($,F,A){let J={},X=K(F,["expireTime"]);if(A!==void 0&&X!=null)w(A,["expireTime"],X);let Y=K(F,["newSessionExpireTime"]);if(A!==void 0&&Y!=null)w(A,["newSessionExpireTime"],Y);let W=K(F,["uses"]);if(A!==void 0&&W!=null)w(A,["uses"],W);let Z=K(F,["liveConnectConstraints"]);if(A!==void 0&&Z!=null)w(A,["bidiGenerateContentSetup"],Bl0($,Z));let D=K(F,["lockAdditionalFields"]);if(A!==void 0&&D!=null)w(A,["fieldMask"],D);return J}function Gl0($,F){let A={},J=K(F,["config"]);if(J!=null)w(A,["config"],Dl0($,J,A));return A}function zl0($){let F={};if(K($,["displayName"])!==void 0)throw Error("displayName parameter is not supported in Gemini API.");let A=K($,["fileUri"]);if(A!=null)w(F,["fileUri"],A);let J=K($,["mimeType"]);if(J!=null)w(F,["mimeType"],J);return F}function Hl0($){let F={},A=K($,["id"]);if(A!=null)w(F,["id"],A);let J=K($,["args"]);if(J!=null)w(F,["args"],J);let X=K($,["name"]);if(X!=null)w(F,["name"],X);if(K($,["partialArgs"])!==void 0)throw Error("partialArgs parameter is not supported in Gemini API.");if(K($,["willContinue"])!==void 0)throw Error("willContinue parameter is not supported in Gemini API.");return F}function Ul0($){let F={};if(K($,["authConfig"])!==void 0)throw Error("authConfig parameter is not supported in Gemini API.");let A=K($,["enableWidget"]);if(A!=null)w(F,["enableWidget"],A);return F}function Ql0($){let F={};if(K($,["excludeDomains"])!==void 0)throw Error("excludeDomains parameter is not supported in Gemini API.");if(K($,["blockingConfidence"])!==void 0)throw Error("blockingConfidence parameter is not supported in Gemini API.");let A=K($,["timeRangeFilter"]);if(A!=null)w(F,["timeRangeFilter"],A);return F}function Kl0($,F){let A={},J=K($,["generationConfig"]);if(F!==void 0&&J!=null)w(F,["setup","generationConfig"],J);let X=K($,["responseModalities"]);if(F!==void 0&&X!=null)w(F,["setup","generationConfig","responseModalities"],X);let Y=K($,["temperature"]);if(F!==void 0&&Y!=null)w(F,["setup","generationConfig","temperature"],Y);let W=K($,["topP"]);if(F!==void 0&&W!=null)w(F,["setup","generationConfig","topP"],W);let Z=K($,["topK"]);if(F!==void 0&&Z!=null)w(F,["setup","generationConfig","topK"],Z);let D=K($,["maxOutputTokens"]);if(F!==void 0&&D!=null)w(F,["setup","generationConfig","maxOutputTokens"],D);let G=K($,["mediaResolution"]);if(F!==void 0&&G!=null)w(F,["setup","generationConfig","mediaResolution"],G);let z=K($,["seed"]);if(F!==void 0&&z!=null)w(F,["setup","generationConfig","seed"],z);let H=K($,["speechConfig"]);if(F!==void 0&&H!=null)w(F,["setup","generationConfig","speechConfig"],D61(H));let U=K($,["thinkingConfig"]);if(F!==void 0&&U!=null)w(F,["setup","generationConfig","thinkingConfig"],U);let Q=K($,["enableAffectiveDialog"]);if(F!==void 0&&Q!=null)w(F,["setup","generationConfig","enableAffectiveDialog"],Q);let B=K($,["systemInstruction"]);if(F!==void 0&&B!=null)w(F,["setup","systemInstruction"],Zl0(c8(B)));let q=K($,["tools"]);if(F!==void 0&&q!=null){let C=$K(q);if(Array.isArray(C))C=C.map((M)=>{return Ll0(eQ(M))});w(F,["setup","tools"],C)}let L=K($,["sessionResumption"]);if(F!==void 0&&L!=null)w(F,["setup","sessionResumption"],ql0(L));let E=K($,["inputAudioTranscription"]);if(F!==void 0&&E!=null)w(F,["setup","inputAudioTranscription"],E);let V=K($,["outputAudioTranscription"]);if(F!==void 0&&V!=null)w(F,["setup","outputAudioTranscription"],V);let R=K($,["realtimeInputConfig"]);if(F!==void 0&&R!=null)w(F,["setup","realtimeInputConfig"],R);let N=K($,["contextWindowCompression"]);if(F!==void 0&&N!=null)w(F,["setup","contextWindowCompression"],N);let S=K($,["proactivity"]);if(F!==void 0&&S!=null)w(F,["setup","proactivity"],S);if(K($,["explicitVadSignal"])!==void 0)throw Error("explicitVadSignal parameter is not supported in Gemini API.");return A}function Bl0($,F){let A={},J=K(F,["model"]);if(J!=null)w(A,["setup","model"],k6($,J));let X=K(F,["config"]);if(X!=null)w(A,["config"],Kl0(X,A));return A}function wl0($){let F={},A=K($,["mediaResolution"]);if(A!=null)w(F,["mediaResolution"],A);let J=K($,["codeExecutionResult"]);if(J!=null)w(F,["codeExecutionResult"],J);let X=K($,["executableCode"]);if(X!=null)w(F,["executableCode"],X);let Y=K($,["fileData"]);if(Y!=null)w(F,["fileData"],zl0(Y));let W=K($,["functionCall"]);if(W!=null)w(F,["functionCall"],Hl0(W));let Z=K($,["functionResponse"]);if(Z!=null)w(F,["functionResponse"],Z);let D=K($,["inlineData"]);if(D!=null)w(F,["inlineData"],Wl0(D));let G=K($,["text"]);if(G!=null)w(F,["text"],G);let z=K($,["thought"]);if(z!=null)w(F,["thought"],z);let H=K($,["thoughtSignature"]);if(H!=null)w(F,["thoughtSignature"],H);let U=K($,["videoMetadata"]);if(U!=null)w(F,["videoMetadata"],U);return F}function ql0($){let F={},A=K($,["handle"]);if(A!=null)w(F,["handle"],A);if(K($,["transparent"])!==void 0)throw Error("transparent parameter is not supported in Gemini API.");return F}function Ll0($){let F={};if(K($,["retrieval"])!==void 0)throw Error("retrieval parameter is not supported in Gemini API.");let A=K($,["computerUse"]);if(A!=null)w(F,["computerUse"],A);let J=K($,["fileSearch"]);if(J!=null)w(F,["fileSearch"],J);let X=K($,["codeExecution"]);if(X!=null)w(F,["codeExecution"],X);if(K($,["enterpriseWebSearch"])!==void 0)throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let Y=K($,["functionDeclarations"]);if(Y!=null){let z=Y;if(Array.isArray(z))z=z.map((H)=>{return H});w(F,["functionDeclarations"],z)}let W=K($,["googleMaps"]);if(W!=null)w(F,["googleMaps"],Ul0(W));let Z=K($,["googleSearch"]);if(Z!=null)w(F,["googleSearch"],Ql0(Z));let D=K($,["googleSearchRetrieval"]);if(D!=null)w(F,["googleSearchRetrieval"],D);let G=K($,["urlContext"]);if(G!=null)w(F,["urlContext"],G);return F}function El0($){let F=[];for(let A in $)if(Object.prototype.hasOwnProperty.call($,A)){let J=$[A];if(typeof J==="object"&&J!=null&&Object.keys(J).length>0){let X=Object.keys(J).map((Y)=>`${A}.${Y}`);F.push(...X)}else F.push(A)}return F.join(",")}function Vl0($,F){let A=null,J=$.bidiGenerateContentSetup;if(typeof J==="object"&&J!==null&&"setup"in J){let Y=J.setup;if(typeof Y==="object"&&Y!==null)$.bidiGenerateContentSetup=Y,A=Y;else delete $.bidiGenerateContentSetup}else if(J!==void 0)delete $.bidiGenerateContentSetup;let X=$.fieldMask;if(A){let Y=El0(A);if(Array.isArray(F===null||F===void 0?void 0:F.lockAdditionalFields)&&(F===null||F===void 0?void 0:F.lockAdditionalFields.length)===0)if(Y)$.fieldMask=Y;else delete $.fieldMask;else if((F===null||F===void 0?void 0:F.lockAdditionalFields)&&F.lockAdditionalFields.length>0&&X!==null&&Array.isArray(X)&&X.length>0){let W=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],Z=[];if(X.length>0)Z=X.map((G)=>{if(W.includes(G))return`generationConfig.${G}`;return G});let D=[];if(Y)D.push(Y);if(Z.length>0)D.push(...Z);if(D.length>0)$.fieldMask=D.join(",");else delete $.fieldMask}else delete $.fieldMask}else if(X!==null&&Array.isArray(X)&&X.length>0)$.fieldMask=X.join(",");else delete $.fieldMask;return $}class Ih1 extends vA{constructor($){super();this.apiClient=$}async create($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI())throw Error("The client.tokens.create method is only supported by the Gemini Developer API.");else{let W=Gl0(this.apiClient,$);X=m1("auth_tokens",W._url),Y=W._query,delete W.config,delete W._url,delete W._query;let Z=Vl0(W,$.config);return J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(Z),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((D)=>{return D.json()}),J.then((D)=>{return D})}}}function Nl0($,F){let A={},J=K($,["force"]);if(F!==void 0&&J!=null)w(F,["_query","force"],J);return A}function Cl0($){let F={},A=K($,["name"]);if(A!=null)w(F,["_url","name"],A);let J=K($,["config"]);if(J!=null)Nl0(J,F);return F}function Ml0($){let F={},A=K($,["name"]);if(A!=null)w(F,["_url","name"],A);return F}function Pl0($,F){let A={},J=K($,["pageSize"]);if(F!==void 0&&J!=null)w(F,["_query","pageSize"],J);let X=K($,["pageToken"]);if(F!==void 0&&X!=null)w(F,["_query","pageToken"],X);return A}function Rl0($){let F={},A=K($,["parent"]);if(A!=null)w(F,["_url","parent"],A);let J=K($,["config"]);if(J!=null)Pl0(J,F);return F}function Il0($){let F={},A=K($,["sdkHttpResponse"]);if(A!=null)w(F,["sdkHttpResponse"],A);let J=K($,["nextPageToken"]);if(J!=null)w(F,["nextPageToken"],J);let X=K($,["documents"]);if(X!=null){let Y=X;if(Array.isArray(Y))Y=Y.map((W)=>{return W});w(F,["documents"],Y)}return F}class Th1 extends vA{constructor($){super();this.apiClient=$,this.list=async(F)=>{return new jW(NX.PAGED_ITEM_DOCUMENTS,(A)=>this.listInternal({parent:F.parent,config:A.config}),await this.listInternal(F),F)}}async get($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");else{let W=Ml0($);return X=m1("{name}",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"GET",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json()}),J.then((Z)=>{return Z})}}async delete($){var F,A;let J="",X={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");else{let Y=Cl0($);J=m1("{name}",Y._url),X=Y._query,delete Y._url,delete Y._query,await this.apiClient.request({path:J,queryParams:X,body:JSON.stringify(Y),httpMethod:"DELETE",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal})}}async listInternal($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");else{let W=Rl0($);return X=m1("{parent}/documents",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"GET",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json()}),J.then((Z)=>{let D=Il0(Z),G=new fu1;return Object.assign(G,D),G})}}}class jh1 extends vA{constructor($,F=new Th1($)){super();this.apiClient=$,this.documents=F,this.list=async(A={})=>{return new jW(NX.PAGED_ITEM_FILE_SEARCH_STORES,(J)=>this.listInternal(J),await this.listInternal(A),A)}}async uploadToFileSearchStore($){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore($.fileSearchStoreName,$.file,$.config)}async create($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");else{let W=Ic0($);return X=m1("fileSearchStores",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json()}),J.then((Z)=>{return Z})}}async get($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");else{let W=Oc0($);return X=m1("{name}",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"GET",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json()}),J.then((Z)=>{return Z})}}async delete($){var F,A;let J="",X={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");else{let Y=jc0($);J=m1("{name}",Y._url),X=Y._query,delete Y._url,delete Y._query,await this.apiClient.request({path:J,queryParams:X,body:JSON.stringify(Y),httpMethod:"DELETE",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal})}}async listInternal($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");else{let W=gc0($);return X=m1("fileSearchStores",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"GET",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json()}),J.then((Z)=>{let D=fc0(Z),G=new vu1;return Object.assign(G,D),G})}}async uploadToFileSearchStoreInternal($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");else{let W=vc0($);return X=m1("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json()}),J.then((Z)=>{let D=yc0(Z),G=new yu1;return Object.assign(G,D),G})}}async importFile($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");else{let W=kc0($);return X=m1("{file_search_store_name}:importFile",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json()}),J.then((Z)=>{let D=_c0(Z),G=new X61;return Object.assign(G,D),G})}}}var Oh1=function(){let{crypto:$}=globalThis;if($===null||$===void 0?void 0:$.randomUUID)return Oh1=$.randomUUID.bind($),$.randomUUID();let F=new Uint8Array(1),A=$?()=>$.getRandomValues(F)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(J)=>(+J^A()&15>>+J/4).toString(16))},Tl0=()=>Oh1();function s01($){return typeof $==="object"&&$!==null&&(("name"in $)&&$.name==="AbortError"||("message"in $)&&String($.message).includes("FetchRequestCanceledException"))}var o01=($)=>{if($ instanceof Error)return $;if(typeof $==="object"&&$!==null){try{if(Object.prototype.toString.call($)==="[object Error]"){let F=Error($.message,$.cause?{cause:$.cause}:{});if($.stack)F.stack=$.stack;if($.cause&&!F.cause)F.cause=$.cause;if($.name)F.name=$.name;return F}}catch(F){}try{return Error(JSON.stringify($))}catch(F){}}return Error($)};class z5 extends Error{}class M3 extends z5{constructor($,F,A,J){super(`${M3.makeMessage($,F,A)}`);this.status=$,this.headers=J,this.error=F}static makeMessage($,F,A){let J=(F===null||F===void 0?void 0:F.message)?typeof F.message==="string"?F.message:JSON.stringify(F.message):F?JSON.stringify(F):A;if($&&J)return`${$} ${J}`;if($)return`${$} status code (no body)`;if(J)return J;return"(no status code or body)"}static generate($,F,A,J){if(!$||!J)return new gV({message:A,cause:o01(F)});let X=F;if($===400)return new U61($,X,A,J);if($===401)return new Q61($,X,A,J);if($===403)return new K61($,X,A,J);if($===404)return new B61($,X,A,J);if($===409)return new w61($,X,A,J);if($===422)return new q61($,X,A,J);if($===429)return new L61($,X,A,J);if($>=500)return new E61($,X,A,J);return new M3($,X,A,J)}}class E_ extends M3{constructor({message:$}={}){super(void 0,void 0,$||"Request was aborted.",void 0)}}class gV extends M3{constructor({message:$,cause:F}){super(void 0,void 0,$||"Connection error.",void 0);if(F)this.cause=F}}class H61 extends gV{constructor({message:$}={}){super({message:$!==null&&$!==void 0?$:"Request timed out."})}}class U61 extends M3{}class Q61 extends M3{}class K61 extends M3{}class B61 extends M3{}class w61 extends M3{}class q61 extends M3{}class L61 extends M3{}class E61 extends M3{}var jl0=/^[a-z][a-z0-9+.-]*:/i,Ol0=($)=>{return jl0.test($)},e01=($)=>(e01=Array.isArray,e01($)),Sl0=e01,_l0=Sl0,Eu1=_l0;function kl0($){if(!$)return!0;for(let F in $)return!1;return!0}function bl0($,F){return Object.prototype.hasOwnProperty.call($,F)}var xl0=($,F)=>{if(typeof F!=="number"||!Number.isInteger(F))throw new z5(`${$} must be an integer`);if(F<0)throw new z5(`${$} must be a positive integer`);return F},gl0=($)=>{try{return JSON.parse($)}catch(F){return}},fl0=($)=>new Promise((F)=>setTimeout(F,$)),nQ="0.0.1";function vl0(){if(typeof Deno<"u"&&Deno.build!=null)return"deno";if(typeof EdgeRuntime<"u")return"edge";if(Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]")return"node";return"unknown"}var yl0=()=>{var $,F,A,J,X;let Y=vl0();if(Y==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nQ,"X-Stainless-OS":Nu1(Deno.build.os),"X-Stainless-Arch":Vu1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version==="string"?Deno.version:(F=($=Deno.version)===null||$===void 0?void 0:$.deno)!==null&&F!==void 0?F:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nQ,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(Y==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nQ,"X-Stainless-OS":Nu1((A=globalThis.process.platform)!==null&&A!==void 0?A:"unknown"),"X-Stainless-Arch":Vu1((J=globalThis.process.arch)!==null&&J!==void 0?J:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(X=globalThis.process.version)!==null&&X!==void 0?X:"unknown"};let W=ul0();if(W)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nQ,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${W.browser}`,"X-Stainless-Runtime-Version":W.version};return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nQ,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function ul0(){if(typeof navigator>"u"||!navigator)return null;let $=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:F,pattern:A}of $){let J=A.exec(navigator.userAgent);if(J){let X=J[1]||0,Y=J[2]||0,W=J[3]||0;return{browser:F,version:`${X}.${Y}.${W}`}}}return null}var Vu1=($)=>{if($==="x32")return"x32";if($==="x86_64"||$==="x64")return"x64";if($==="arm")return"arm";if($==="aarch64"||$==="arm64")return"arm64";if($)return`other:${$}`;return"unknown"},Nu1=($)=>{if($=$.toLowerCase(),$.includes("ios"))return"iOS";if($==="android")return"Android";if($==="darwin")return"MacOS";if($==="win32")return"Windows";if($==="freebsd")return"FreeBSD";if($==="openbsd")return"OpenBSD";if($==="linux")return"Linux";if($)return`Other:${$}`;return"Unknown"},D_,hl0=()=>{return D_!==null&&D_!==void 0?D_:D_=yl0()};function ml0(){if(typeof fetch<"u")return fetch;throw Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Sh1(...$){let F=globalThis.ReadableStream;if(typeof F>"u")throw Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new F(...$)}function dl0($){let F=Symbol.asyncIterator in $?$[Symbol.asyncIterator]():$[Symbol.iterator]();return Sh1({start(){},async pull(A){let{done:J,value:X}=await F.next();if(J)A.close();else A.enqueue(X)},async cancel(){var A;await((A=F.return)===null||A===void 0?void 0:A.call(F))}})}function _h1($){if($[Symbol.asyncIterator])return $;let F=$.getReader();return{async next(){try{let A=await F.read();if(A===null||A===void 0?void 0:A.done)F.releaseLock();return A}catch(A){throw F.releaseLock(),A}},async return(){let A=F.cancel();return F.releaseLock(),await A,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function cl0($){var F,A;if($===null||typeof $!=="object")return;if($[Symbol.asyncIterator]){await((A=(F=$[Symbol.asyncIterator]()).return)===null||A===void 0?void 0:A.call(F));return}let J=$.getReader(),X=J.cancel();J.releaseLock(),await X}var ll0=({headers:$,body:F})=>{return{bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(F)}},kh1=()=>{var $;if(typeof File>"u"){let{process:F}=globalThis,A=typeof(($=F===null||F===void 0?void 0:F.versions)===null||$===void 0?void 0:$.node)==="string"&&parseInt(F.versions.node.split("."))<20;throw Error("`File` is not defined as a global, which is required for file uploads."+(A?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function _01($,F,A){return kh1(),new File($,F!==null&&F!==void 0?F:"unknown_file",A)}function pl0($){return(typeof $==="object"&&$!==null&&(("name"in $)&&$.name&&String($.name)||("url"in $)&&$.url&&String($.url)||("filename"in $)&&$.filename&&String($.filename)||("path"in $)&&$.path&&String($.path))||"").split(/[\\/]/).pop()||void 0}var il0=($)=>$!=null&&typeof $==="object"&&typeof $[Symbol.asyncIterator]==="function",bh1=($)=>$!=null&&typeof $==="object"&&typeof $.size==="number"&&typeof $.type==="string"&&typeof $.text==="function"&&typeof $.slice==="function"&&typeof $.arrayBuffer==="function",nl0=($)=>$!=null&&typeof $==="object"&&typeof $.name==="string"&&typeof $.lastModified==="number"&&bh1($),rl0=($)=>$!=null&&typeof $==="object"&&typeof $.url==="string"&&typeof $.blob==="function";async function al0($,F,A){if(kh1(),$=await $,nl0($)){if($ instanceof File)return $;return _01([await $.arrayBuffer()],$.name)}if(rl0($)){let X=await $.blob();return F||(F=new URL($.url).pathname.split(/[\\/]/).pop()),_01(await $61(X),F,A)}let J=await $61($);if(F||(F=pl0($)),!(A===null||A===void 0?void 0:A.type)){let X=J.find((Y)=>typeof Y==="object"&&("type"in Y)&&Y.type);if(typeof X==="string")A=Object.assign(Object.assign({},A),{type:X})}return _01(J,F,A)}async function $61($){var F,A,J,X,Y;let W=[];if(typeof $==="string"||ArrayBuffer.isView($)||$ instanceof ArrayBuffer)W.push($);else if(bh1($))W.push($ instanceof Blob?$:await $.arrayBuffer());else if(il0($))try{for(var Z=!0,D=jF($),G;G=await D.next(),F=G.done,!F;Z=!0){X=G.value,Z=!1;let z=X;W.push(...await $61(z))}}catch(z){A={error:z}}finally{try{if(!Z&&!F&&(J=D.return))await J.call(D)}finally{if(A)throw A.error}}else{let z=(Y=$===null||$===void 0?void 0:$.constructor)===null||Y===void 0?void 0:Y.name;throw Error(`Unexpected data type: ${typeof $}${z?`; constructor: ${z}`:""}${tl0($)}`)}return W}function tl0($){if(typeof $!=="object"||$===null)return"";return`; props: [${Object.getOwnPropertyNames($).map((A)=>`"${A}"`).join(", ")}]`}class V61{constructor($){this._client=$}}V61._key=[];function xh1($){return $.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var Cu1=Object.freeze(Object.create(null)),sl0=($=xh1)=>function(A,...J){if(A.length===1)return A[0];let X=!1,Y=[],W=A.reduce((z,H,U)=>{var Q,B,q;if(/[?#]/.test(H))X=!0;let L=J[U],E=(X?encodeURIComponent:$)(""+L);if(U!==J.length&&(L==null||typeof L==="object"&&L.toString===((q=Object.getPrototypeOf((B=Object.getPrototypeOf((Q=L.hasOwnProperty)!==null&&Q!==void 0?Q:Cu1))!==null&&B!==void 0?B:Cu1))===null||q===void 0?void 0:q.toString)))E=L+"",Y.push({start:z.length+H.length,length:E.length,error:`Value of type ${Object.prototype.toString.call(L).slice(8,-1)} is not a valid path parameter`});return z+H+(U===J.length?"":E)},""),Z=W.split(/[?#]/,1)[0],D=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,G;while((G=D.exec(Z))!==null)Y.push({start:G.index,length:G[0].length,error:`Value "${G[0]}" can't be safely passed as a path parameter`});if(Y.sort((z,H)=>z.start-H.start),Y.length>0){let z=0,H=Y.reduce((U,Q)=>{let B=" ".repeat(Q.start-z),q="^".repeat(Q.length);return z=Q.start+Q.length,U+B+q},"");throw new z5(`Path parameters result in path with invalid segments:
${Y.map((U)=>U.error).join(`
`)}
${W}
${H}`)}return W},G_=sl0(xh1);class N61 extends V61{create($,F){var A;let{api_version:J=this._client.apiVersion}=$,X=L_($,["api_version"]);if("model"in X&&"agent_config"in X)throw new z5("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in X&&"generation_config"in X)throw new z5("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(G_`/${J}/interactions`,Object.assign(Object.assign({body:X},F),{stream:(A=$.stream)!==null&&A!==void 0?A:!1}))}delete($,F={},A){let{api_version:J=this._client.apiVersion}=F!==null&&F!==void 0?F:{};return this._client.delete(G_`/${J}/interactions/${$}`,A)}cancel($,F={},A){let{api_version:J=this._client.apiVersion}=F!==null&&F!==void 0?F:{};return this._client.post(G_`/${J}/interactions/${$}/cancel`,A)}get($,F={},A){var J;let X=F!==null&&F!==void 0?F:{},{api_version:Y=this._client.apiVersion}=X,W=L_(X,["api_version"]);return this._client.get(G_`/${Y}/interactions/${$}`,Object.assign(Object.assign({query:W},A),{stream:(J=F===null||F===void 0?void 0:F.stream)!==null&&J!==void 0?J:!1}))}}N61._key=Object.freeze(["interactions"]);class C61 extends N61{}function ol0($){let F=0;for(let X of $)F+=X.length;let A=new Uint8Array(F),J=0;for(let X of $)A.set(X,J),J+=X.length;return A}var z_;function M61($){let F;return(z_!==null&&z_!==void 0?z_:(F=new globalThis.TextEncoder,z_=F.encode.bind(F)))($)}var H_;function Mu1($){let F;return(H_!==null&&H_!==void 0?H_:(F=new globalThis.TextDecoder,H_=F.decode.bind(F)))($)}class fV{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode($){if($==null)return[];let F=$ instanceof ArrayBuffer?new Uint8Array($):typeof $==="string"?M61($):$;this.buffer=ol0([this.buffer,F]);let A=[],J;while((J=el0(this.buffer,this.carriageReturnIndex))!=null){if(J.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=J.index;continue}if(this.carriageReturnIndex!=null&&(J.index!==this.carriageReturnIndex+1||J.carriage)){A.push(Mu1(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let X=this.carriageReturnIndex!==null?J.preceding-1:J.preceding,Y=Mu1(this.buffer.subarray(0,X));A.push(Y),this.buffer=this.buffer.subarray(J.index),this.carriageReturnIndex=null}return A}flush(){if(!this.buffer.length)return[];return this.decode(`
`)}}fV.NEWLINE_CHARS=new Set([`
`,"\r"]);fV.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function el0($,F){for(let X=F!==null&&F!==void 0?F:0;X<$.length;X++){if($[X]===10)return{preceding:X,index:X+1,carriage:!1};if($[X]===13)return{preceding:X,index:X+1,carriage:!0}}return null}function $p0($){for(let J=0;J<$.length-1;J++){if($[J]===10&&$[J+1]===10)return J+2;if($[J]===13&&$[J+1]===13)return J+2;if($[J]===13&&$[J+1]===10&&J+3<$.length&&$[J+2]===13&&$[J+3]===10)return J+4}return-1}var V_={off:0,error:200,warn:300,info:400,debug:500},Pu1=($,F,A)=>{if(!$)return;if(bl0(V_,$))return $;C3(A).warn(`${F} was set to ${JSON.stringify($)}, expected one of ${JSON.stringify(Object.keys(V_))}`);return};function bV(){}function U_($,F,A){if(!F||V_[$]>V_[A])return bV;else return F[$].bind(F)}var Fp0={error:bV,warn:bV,info:bV,debug:bV},Ru1=new WeakMap;function C3($){var F;let A=$.logger,J=(F=$.logLevel)!==null&&F!==void 0?F:"off";if(!A)return Fp0;let X=Ru1.get(A);if(X&&X[0]===J)return X[1];let Y={error:U_("error",A,J),warn:U_("warn",A,J),info:U_("info",A,J),debug:U_("debug",A,J)};return Ru1.set(A,[J,Y]),Y}var GG=($)=>{if($.options)$.options=Object.assign({},$.options),delete $.options.headers;if($.headers)$.headers=Object.fromEntries(($.headers instanceof Headers?[...$.headers]:Object.entries($.headers)).map(([F,A])=>[F,F.toLowerCase()==="x-goog-api-key"||F.toLowerCase()==="authorization"||F.toLowerCase()==="cookie"||F.toLowerCase()==="set-cookie"?"***":A]));if("retryOfRequestLogID"in $){if($.retryOfRequestLogID)$.retryOf=$.retryOfRequestLogID;delete $.retryOfRequestLogID}return $};class aQ{constructor($,F,A){this.iterator=$,this.controller=F,this.client=A}static fromSSEResponse($,F,A){let J=!1,X=A?C3(A):console;function Y(){return TF(this,arguments,function*(){var Z,D,G,z;if(J)throw new z5("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");J=!0;let H=!1;try{try{for(var U=!0,Q=jF(Ap0($,F)),B;B=yield V0(Q.next()),Z=B.done,!Z;U=!0){z=B.value,U=!1;let q=z;if(H)continue;if(q.data.startsWith("[DONE]")){H=!0;continue}else try{yield yield V0(JSON.parse(q.data))}catch(L){throw X.error("Could not parse message into JSON:",q.data),X.error("From chunk:",q.raw),L}}}catch(q){D={error:q}}finally{try{if(!U&&!Z&&(G=Q.return))yield V0(G.call(Q))}finally{if(D)throw D.error}}H=!0}catch(q){if(s01(q))return yield V0(void 0);throw q}finally{if(!H)F.abort()}})}return new aQ(Y,F,A)}static fromReadableStream($,F,A){let J=!1;function X(){return TF(this,arguments,function*(){var Z,D,G,z;let H=new fV,U=_h1($);try{for(var Q=!0,B=jF(U),q;q=yield V0(B.next()),Z=q.done,!Z;Q=!0){z=q.value,Q=!1;let L=z;for(let E of H.decode(L))yield yield V0(E)}}catch(L){D={error:L}}finally{try{if(!Q&&!Z&&(G=B.return))yield V0(G.call(B))}finally{if(D)throw D.error}}for(let L of H.flush())yield yield V0(L)})}function Y(){return TF(this,arguments,function*(){var Z,D,G,z;if(J)throw new z5("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");J=!0;let H=!1;try{try{for(var U=!0,Q=jF(X()),B;B=yield V0(Q.next()),Z=B.done,!Z;U=!0){z=B.value,U=!1;let q=z;if(H)continue;if(q)yield yield V0(JSON.parse(q))}}catch(q){D={error:q}}finally{try{if(!U&&!Z&&(G=Q.return))yield V0(G.call(Q))}finally{if(D)throw D.error}}H=!0}catch(q){if(s01(q))return yield V0(void 0);throw q}finally{if(!H)F.abort()}})}return new aQ(Y,F,A)}[Symbol.asyncIterator](){return this.iterator()}tee(){let $=[],F=[],A=this.iterator(),J=(X)=>{return{next:()=>{if(X.length===0){let Y=A.next();$.push(Y),F.push(Y)}return X.shift()}}};return[new aQ(()=>J($),this.controller,this.client),new aQ(()=>J(F),this.controller,this.client)]}toReadableStream(){let $=this,F;return Sh1({async start(){F=$[Symbol.asyncIterator]()},async pull(A){try{let{value:J,done:X}=await F.next();if(X)return A.close();let Y=M61(JSON.stringify(J)+`
`);A.enqueue(Y)}catch(J){A.error(J)}},async cancel(){var A;await((A=F.return)===null||A===void 0?void 0:A.call(F))}})}}function Ap0($,F){return TF(this,arguments,function*(){var J,X,Y,W;if(!$.body){if(F.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative")throw new z5("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new z5("Attempted to iterate over a response with no body")}let Z=new gh1,D=new fV,G=_h1($.body);try{for(var z=!0,H=jF(Jp0(G)),U;U=yield V0(H.next()),J=U.done,!J;z=!0){W=U.value,z=!1;let Q=W;for(let B of D.decode(Q)){let q=Z.decode(B);if(q)yield yield V0(q)}}}catch(Q){X={error:Q}}finally{try{if(!z&&!J&&(Y=H.return))yield V0(Y.call(H))}finally{if(X)throw X.error}}for(let Q of D.flush()){let B=Z.decode(Q);if(B)yield yield V0(B)}})}function Jp0($){return TF(this,arguments,function*(){var A,J,X,Y;let W=new Uint8Array;try{for(var Z=!0,D=jF($),G;G=yield V0(D.next()),A=G.done,!A;Z=!0){Y=G.value,Z=!1;let z=Y;if(z==null)continue;let H=z instanceof ArrayBuffer?new Uint8Array(z):typeof z==="string"?M61(z):z,U=new Uint8Array(W.length+H.length);U.set(W),U.set(H,W.length),W=U;let Q;while((Q=$p0(W))!==-1)yield yield V0(W.slice(0,Q)),W=W.slice(Q)}}catch(z){J={error:z}}finally{try{if(!Z&&!A&&(X=D.return))yield V0(X.call(D))}finally{if(J)throw J.error}}if(W.length>0)yield yield V0(W)})}class gh1{constructor(){this.event=null,this.data=[],this.chunks=[]}decode($){if($.endsWith("\r"))$=$.substring(0,$.length-1);if(!$){if(!this.event&&!this.data.length)return null;let X={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],X}if(this.chunks.push($),$.startsWith(":"))return null;let[F,A,J]=Xp0($,":");if(J.startsWith(" "))J=J.substring(1);if(F==="event")this.event=J;else if(F==="data")this.data.push(J);return null}}function Xp0($,F){let A=$.indexOf(F);if(A!==-1)return[$.substring(0,A),F,$.substring(A+F.length)];return[$,"",""]}async function Yp0($,F){let{response:A,requestLogID:J,retryOfRequestLogID:X,startTime:Y}=F,W=await(async()=>{var Z;if(F.options.stream){if(C3($).debug("response",A.status,A.url,A.headers,A.body),F.options.__streamClass)return F.options.__streamClass.fromSSEResponse(A,F.controller,$);return aQ.fromSSEResponse(A,F.controller,$)}if(A.status===204)return null;if(F.options.__binaryResponse)return A;let D=A.headers.get("content-type"),G=(Z=D===null||D===void 0?void 0:D.split(";")[0])===null||Z===void 0?void 0:Z.trim();if((G===null||G===void 0?void 0:G.includes("application/json"))||(G===null||G===void 0?void 0:G.endsWith("+json")))return await A.json();return await A.text()})();return C3($).debug(`[${J}] response parsed`,GG({retryOfRequestLogID:X,url:A.url,status:A.status,body:W,durationMs:Date.now()-Y})),W}class P61 extends Promise{constructor($,F,A=Yp0){super((J)=>{J(null)});this.responsePromise=F,this.parseResponse=A,this.client=$}_thenUnwrap($){return new P61(this.client,this.responsePromise,async(F,A)=>$(await this.parseResponse(F,A),A))}asResponse(){return this.responsePromise.then(($)=>$.response)}async withResponse(){let[$,F]=await Promise.all([this.parse(),this.asResponse()]);return{data:$,response:F}}parse(){if(!this.parsedPromise)this.parsedPromise=this.responsePromise.then(($)=>this.parseResponse(this.client,$));return this.parsedPromise}then($,F){return this.parse().then($,F)}catch($){return this.parse().catch($)}finally($){return this.parse().finally($)}}var fh1=Symbol("brand.privateNullableHeaders");function*Wp0($){if(!$)return;if(fh1 in $){let{values:J,nulls:X}=$;yield*J.entries();for(let Y of X)yield[Y,null];return}let F=!1,A;if($ instanceof Headers)A=$.entries();else if(Eu1($))A=$;else F=!0,A=Object.entries($!==null&&$!==void 0?$:{});for(let J of A){let X=J[0];if(typeof X!=="string")throw TypeError("expected header name to be a string");let Y=Eu1(J[1])?J[1]:[J[1]],W=!1;for(let Z of Y){if(Z===void 0)continue;if(F&&!W)W=!0,yield[X,null];yield[X,Z]}}}var _V=($)=>{let F=new Headers,A=new Set;for(let J of $){let X=new Set;for(let[Y,W]of Wp0(J)){let Z=Y.toLowerCase();if(!X.has(Z))F.delete(Y),X.add(Z);if(W===null)F.delete(Y),A.add(Z);else F.append(Y,W),A.delete(Z)}}return{[fh1]:!0,values:F,nulls:A}},k01=($)=>{var F,A,J,X,Y,W;if(typeof globalThis.process<"u")return(J=(A=(F=globalThis.process.env)===null||F===void 0?void 0:F[$])===null||A===void 0?void 0:A.trim())!==null&&J!==void 0?J:void 0;if(typeof globalThis.Deno<"u")return(W=(Y=(X=globalThis.Deno.env)===null||X===void 0?void 0:X.get)===null||Y===void 0?void 0:Y.call(X,$))===null||W===void 0?void 0:W.trim();return},vh1;class I_{constructor($){var F,A,J,X,Y,W,Z,{baseURL:D=k01("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:G=(F=k01("GEMINI_API_KEY"))!==null&&F!==void 0?F:null,apiVersion:z="v1beta"}=$,H=L_($,["baseURL","apiKey","apiVersion"]);let U=Object.assign(Object.assign({apiKey:G,apiVersion:z},H),{baseURL:D||"https://generativelanguage.googleapis.com"});this.baseURL=U.baseURL,this.timeout=(A=U.timeout)!==null&&A!==void 0?A:I_.DEFAULT_TIMEOUT,this.logger=(J=U.logger)!==null&&J!==void 0?J:console;let Q="warn";this.logLevel=Q,this.logLevel=(Y=(X=Pu1(U.logLevel,"ClientOptions.logLevel",this))!==null&&X!==void 0?X:Pu1(k01("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&Y!==void 0?Y:Q,this.fetchOptions=U.fetchOptions,this.maxRetries=(W=U.maxRetries)!==null&&W!==void 0?W:2,this.fetch=(Z=U.fetch)!==null&&Z!==void 0?Z:ml0(),this.encoder=ll0,this._options=U,this.apiKey=G,this.apiVersion=z,this.clientAdapter=U.clientAdapter}withOptions($){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),$))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:$,nulls:F}){if($.has("authorization")||$.has("x-goog-api-key"))return;if(this.apiKey&&$.get("x-goog-api-key"))return;if(F.has("x-goog-api-key"))return;throw Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders($){let F=_V([$.headers]);if(F.values.has("authorization")||F.values.has("x-goog-api-key"))return;if(this.apiKey)return _V([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return _V([await this.clientAdapter.getAuthHeaders()]);return}stringifyQuery($){return Object.entries($).filter(([F,A])=>typeof A<"u").map(([F,A])=>{if(typeof A==="string"||typeof A==="number"||typeof A==="boolean")return`${encodeURIComponent(F)}=${encodeURIComponent(A)}`;if(A===null)return`${encodeURIComponent(F)}=`;throw new z5(`Cannot stringify type ${typeof A}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${nQ}`}defaultIdempotencyKey(){return`stainless-node-retry-${Tl0()}`}makeStatusError($,F,A,J){return M3.generate($,F,A,J)}buildURL($,F,A){let J=!this.baseURLOverridden()&&A||this.baseURL,X=Ol0($)?new URL($):new URL(J+(J.endsWith("/")&&$.startsWith("/")?$.slice(1):$)),Y=this.defaultQuery();if(!kl0(Y))F=Object.assign(Object.assign({},Y),F);if(typeof F==="object"&&F&&!Array.isArray(F))X.search=this.stringifyQuery(F);return X.toString()}async prepareOptions($){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!$.path.startsWith(`/${this.apiVersion}/projects/`)){let F=$.path.slice(this.apiVersion.length+1);$.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${F}`}}async prepareRequest($,{url:F,options:A}){}get($,F){return this.methodRequest("get",$,F)}post($,F){return this.methodRequest("post",$,F)}patch($,F){return this.methodRequest("patch",$,F)}put($,F){return this.methodRequest("put",$,F)}delete($,F){return this.methodRequest("delete",$,F)}methodRequest($,F,A){return this.request(Promise.resolve(A).then((J)=>{return Object.assign({method:$,path:F},J)}))}request($,F=null){return new P61(this,this.makeRequest($,F,void 0))}async makeRequest($,F,A){var J,X,Y;let W=await $,Z=(J=W.maxRetries)!==null&&J!==void 0?J:this.maxRetries;if(F==null)F=Z;await this.prepareOptions(W);let{req:D,url:G,timeout:z}=await this.buildRequest(W,{retryCount:Z-F});await this.prepareRequest(D,{url:G,options:W});let H="log_"+(Math.random()*16777216|0).toString(16).padStart(6,"0"),U=A===void 0?"":`, retryOf: ${A}`,Q=Date.now();if(C3(this).debug(`[${H}] sending request`,GG({retryOfRequestLogID:A,method:W.method,url:G,options:W,headers:D.headers})),(X=W.signal)===null||X===void 0?void 0:X.aborted)throw new E_;let B=new AbortController,q=await this.fetchWithTimeout(G,D,z,B).catch(o01),L=Date.now();if(q instanceof globalThis.Error){let V=`retrying, ${F} attempts remaining`;if((Y=W.signal)===null||Y===void 0?void 0:Y.aborted)throw new E_;let R=s01(q)||/timed? ?out/i.test(String(q)+("cause"in q?String(q.cause):""));if(F)return C3(this).info(`[${H}] connection ${R?"timed out":"failed"} - ${V}`),C3(this).debug(`[${H}] connection ${R?"timed out":"failed"} (${V})`,GG({retryOfRequestLogID:A,url:G,durationMs:L-Q,message:q.message})),this.retryRequest(W,F,A!==null&&A!==void 0?A:H);if(C3(this).info(`[${H}] connection ${R?"timed out":"failed"} - error; no more retries left`),C3(this).debug(`[${H}] connection ${R?"timed out":"failed"} (error; no more retries left)`,GG({retryOfRequestLogID:A,url:G,durationMs:L-Q,message:q.message})),R)throw new H61;throw new gV({cause:q})}let E=`[${H}${U}] ${D.method} ${G} ${q.ok?"succeeded":"failed"} with status ${q.status} in ${L-Q}ms`;if(!q.ok){let V=await this.shouldRetry(q);if(F&&V){let I=`retrying, ${F} attempts remaining`;return await cl0(q.body),C3(this).info(`${E} - ${I}`),C3(this).debug(`[${H}] response error (${I})`,GG({retryOfRequestLogID:A,url:q.url,status:q.status,headers:q.headers,durationMs:L-Q})),this.retryRequest(W,F,A!==null&&A!==void 0?A:H,q.headers)}let R=V?"error; no more retries left":"error; not retryable";C3(this).info(`${E} - ${R}`);let N=await q.text().catch((I)=>o01(I).message),S=gl0(N),C=S?void 0:N;throw C3(this).debug(`[${H}] response error (${R})`,GG({retryOfRequestLogID:A,url:q.url,status:q.status,headers:q.headers,message:C,durationMs:Date.now()-Q})),this.makeStatusError(q.status,S,C,q.headers)}return C3(this).info(E),C3(this).debug(`[${H}] response start`,GG({retryOfRequestLogID:A,url:q.url,status:q.status,headers:q.headers,durationMs:L-Q})),{response:q,options:W,controller:B,requestLogID:H,retryOfRequestLogID:A,startTime:Q}}async fetchWithTimeout($,F,A,J){let X=F||{},{signal:Y,method:W}=X,Z=L_(X,["signal","method"]);if(Y)Y.addEventListener("abort",()=>J.abort());let D=setTimeout(()=>J.abort(),A),G=globalThis.ReadableStream&&Z.body instanceof globalThis.ReadableStream||typeof Z.body==="object"&&Z.body!==null&&Symbol.asyncIterator in Z.body,z=Object.assign(Object.assign(Object.assign({signal:J.signal},G?{duplex:"half"}:{}),{method:"GET"}),Z);if(W)z.method=W.toUpperCase();try{return await this.fetch.call(void 0,$,z)}finally{clearTimeout(D)}}async shouldRetry($){let F=$.headers.get("x-should-retry");if(F==="true")return!0;if(F==="false")return!1;if($.status===408)return!0;if($.status===409)return!0;if($.status===429)return!0;if($.status>=500)return!0;return!1}async retryRequest($,F,A,J){var X;let Y,W=J===null||J===void 0?void 0:J.get("retry-after-ms");if(W){let D=parseFloat(W);if(!Number.isNaN(D))Y=D}let Z=J===null||J===void 0?void 0:J.get("retry-after");if(Z&&!Y){let D=parseFloat(Z);if(!Number.isNaN(D))Y=D*1000;else Y=Date.parse(Z)-Date.now()}if(!(Y&&0<=Y&&Y<60000)){let D=(X=$.maxRetries)!==null&&X!==void 0?X:this.maxRetries;Y=this.calculateDefaultRetryTimeoutMillis(F,D)}return await fl0(Y),this.makeRequest($,F-1,A)}calculateDefaultRetryTimeoutMillis($,F){let X=F-$,Y=Math.min(0.5*Math.pow(2,X),8),W=1-Math.random()*0.25;return Y*W*1000}async buildRequest($,{retryCount:F=0}={}){var A,J,X;let Y=Object.assign({},$),{method:W,path:Z,query:D,defaultBaseURL:G}=Y,z=this.buildURL(Z,D,G);if("timeout"in Y)xl0("timeout",Y.timeout);Y.timeout=(A=Y.timeout)!==null&&A!==void 0?A:this.timeout;let{bodyHeaders:H,body:U}=this.buildBody({options:Y}),Q=await this.buildHeaders({options:$,method:W,bodyHeaders:H,retryCount:F});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:W,headers:Q},Y.signal&&{signal:Y.signal}),globalThis.ReadableStream&&U instanceof globalThis.ReadableStream&&{duplex:"half"}),U&&{body:U}),(J=this.fetchOptions)!==null&&J!==void 0?J:{}),(X=Y.fetchOptions)!==null&&X!==void 0?X:{}),url:z,timeout:Y.timeout}}async buildHeaders({options:$,method:F,bodyHeaders:A,retryCount:J}){let X={};if(this.idempotencyHeader&&F!=="get"){if(!$.idempotencyKey)$.idempotencyKey=this.defaultIdempotencyKey();X[this.idempotencyHeader]=$.idempotencyKey}let Y=await this.authHeaders($),W=_V([X,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(J)},$.timeout?{"X-Stainless-Timeout":String(Math.trunc($.timeout/1000))}:{}),hl0()),this._options.defaultHeaders,A,$.headers,Y]);return this.validateHeaders(W),W.values}buildBody({options:{body:$,headers:F}}){if(!$)return{bodyHeaders:void 0,body:void 0};let A=_V([F]);if(ArrayBuffer.isView($)||$ instanceof ArrayBuffer||$ instanceof DataView||typeof $==="string"&&A.values.has("content-type")||globalThis.Blob&&$ instanceof globalThis.Blob||$ instanceof FormData||$ instanceof URLSearchParams||globalThis.ReadableStream&&$ instanceof globalThis.ReadableStream)return{bodyHeaders:void 0,body:$};else if(typeof $==="object"&&((Symbol.asyncIterator in $)||(Symbol.iterator in $)&&("next"in $)&&typeof $.next==="function"))return{bodyHeaders:void 0,body:dl0($)};else return this.encoder({body:$,headers:A})}}I_.DEFAULT_TIMEOUT=60000;class w9 extends I_{constructor(){super(...arguments);this.interactions=new C61(this)}}vh1=w9;w9.GeminiNextGenAPIClient=vh1;w9.GeminiNextGenAPIClientError=z5;w9.APIError=M3;w9.APIConnectionError=gV;w9.APIConnectionTimeoutError=H61;w9.APIUserAbortError=E_;w9.NotFoundError=B61;w9.ConflictError=w61;w9.RateLimitError=L61;w9.BadRequestError=U61;w9.AuthenticationError=Q61;w9.InternalServerError=E61;w9.PermissionDeniedError=K61;w9.UnprocessableEntityError=q61;w9.toFile=al0;w9.Interactions=C61;var Iu1="x-goog-api-key",kV="https://www.googleapis.com/auth/cloud-platform";class yh1{constructor($){if($.apiKey!==void 0){this.apiKey=$.apiKey;return}let F=Zp0($.googleAuthOptions);this.googleAuth=new ju1.GoogleAuth(F)}async addAuthHeaders($,F){if(this.apiKey!==void 0){if(this.apiKey.startsWith("auth_tokens/"))throw Error("Ephemeral tokens are only supported by the live API.");this.addKeyHeader($);return}return this.addGoogleAuthHeaders($,F)}addKeyHeader($){if($.get(Iu1)!==null)return;if(this.apiKey===void 0)throw Error("Trying to set API key header but apiKey is not set");$.append(Iu1,this.apiKey)}async addGoogleAuthHeaders($,F){if(this.googleAuth===void 0)throw Error("Trying to set google-auth headers but googleAuth is unset");let A=await this.googleAuth.getRequestHeaders(F);for(let[J,X]of A){if($.get(J)!==null)continue;$.append(J,X)}}}function Zp0($){let F;if(!$)return F={scopes:[kV]},F;else{if(F=$,!F.scopes)return F.scopes=[kV],F;else if(typeof F.scopes==="string"&&F.scopes!==kV||Array.isArray(F.scopes)&&F.scopes.indexOf(kV)<0)throw Error(`Invalid auth scopes. Scopes must include: ${kV}`);return F}}class uh1{async download($,F){if($.downloadPath){let A=await Dp0($,F);if(A instanceof oQ){let J=Yu0($.downloadPath);Zu0.fromWeb(A.responseInternal.body).pipe(J),await Du0(J)}else try{await Wu0($.downloadPath,A,{encoding:"base64"})}catch(J){throw Error(`Failed to write file to ${$.downloadPath}: ${J}`)}}}}async function Dp0($,F){var A,J,X;let Y=G61($.file);if(Y!==void 0)return await F.request({path:`files/${Y}:download`,httpMethod:"GET",queryParams:{alt:"media"},httpOptions:(A=$.config)===null||A===void 0?void 0:A.httpOptions,abortSignal:(J=$.config)===null||J===void 0?void 0:J.abortSignal});else if(tu1($.file)){let W=(X=$.file.video)===null||X===void 0?void 0:X.videoBytes;if(typeof W==="string")return W;else throw Error("Failed to download generated video, Uri or videoBytes not found.")}else if(su1($.file)){let W=$.file.videoBytes;if(typeof W==="string")return W;else throw Error("Failed to download video, Uri or videoBytes not found.")}else throw Error("Unsupported file type")}class hh1{create($,F,A){return new mh1($,F,A)}}class mh1{constructor($,F,A){this.url=$,this.headers=F,this.callbacks=A}connect(){this.ws=new Ou1.WebSocket(this.url,{headers:this.headers}),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send($){if(this.ws===void 0)throw Error("WebSocket is not connected");this.ws.send($)}close(){if(this.ws===void 0)throw Error("WebSocket is not connected");this.ws.close()}}function Gp0($,F){let A={},J=K($,["name"]);if(J!=null)w(A,["_url","name"],J);return A}function zp0($,F){let A={},J=K($,["name"]);if(J!=null)w(A,["_url","name"],J);return A}function Hp0($,F){let A={},J=K($,["sdkHttpResponse"]);if(J!=null)w(A,["sdkHttpResponse"],J);return A}function Up0($,F){let A={},J=K($,["sdkHttpResponse"]);if(J!=null)w(A,["sdkHttpResponse"],J);return A}function Qp0($,F,A){let J={};if(K($,["validationDataset"])!==void 0)throw Error("validationDataset parameter is not supported in Gemini API.");let X=K($,["tunedModelDisplayName"]);if(F!==void 0&&X!=null)w(F,["displayName"],X);if(K($,["description"])!==void 0)throw Error("description parameter is not supported in Gemini API.");let Y=K($,["epochCount"]);if(F!==void 0&&Y!=null)w(F,["tuningTask","hyperparameters","epochCount"],Y);let W=K($,["learningRateMultiplier"]);if(W!=null)w(J,["tuningTask","hyperparameters","learningRateMultiplier"],W);if(K($,["exportLastCheckpointOnly"])!==void 0)throw Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(K($,["preTunedModelCheckpointId"])!==void 0)throw Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(K($,["adapterSize"])!==void 0)throw Error("adapterSize parameter is not supported in Gemini API.");let Z=K($,["batchSize"]);if(F!==void 0&&Z!=null)w(F,["tuningTask","hyperparameters","batchSize"],Z);let D=K($,["learningRate"]);if(F!==void 0&&D!=null)w(F,["tuningTask","hyperparameters","learningRate"],D);if(K($,["labels"])!==void 0)throw Error("labels parameter is not supported in Gemini API.");if(K($,["beta"])!==void 0)throw Error("beta parameter is not supported in Gemini API.");return J}function Kp0($,F,A){let J={},X=K(A,["config","method"]);if(X===void 0)X="SUPERVISED_FINE_TUNING";if(X==="SUPERVISED_FINE_TUNING"){let Q=K($,["validationDataset"]);if(F!==void 0&&Q!=null)w(F,["supervisedTuningSpec"],Tu1(Q))}else if(X==="PREFERENCE_TUNING"){let Q=K($,["validationDataset"]);if(F!==void 0&&Q!=null)w(F,["preferenceOptimizationSpec"],Tu1(Q))}let Y=K($,["tunedModelDisplayName"]);if(F!==void 0&&Y!=null)w(F,["tunedModelDisplayName"],Y);let W=K($,["description"]);if(F!==void 0&&W!=null)w(F,["description"],W);let Z=K(A,["config","method"]);if(Z===void 0)Z="SUPERVISED_FINE_TUNING";if(Z==="SUPERVISED_FINE_TUNING"){let Q=K($,["epochCount"]);if(F!==void 0&&Q!=null)w(F,["supervisedTuningSpec","hyperParameters","epochCount"],Q)}else if(Z==="PREFERENCE_TUNING"){let Q=K($,["epochCount"]);if(F!==void 0&&Q!=null)w(F,["preferenceOptimizationSpec","hyperParameters","epochCount"],Q)}let D=K(A,["config","method"]);if(D===void 0)D="SUPERVISED_FINE_TUNING";if(D==="SUPERVISED_FINE_TUNING"){let Q=K($,["learningRateMultiplier"]);if(F!==void 0&&Q!=null)w(F,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],Q)}else if(D==="PREFERENCE_TUNING"){let Q=K($,["learningRateMultiplier"]);if(F!==void 0&&Q!=null)w(F,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],Q)}let G=K(A,["config","method"]);if(G===void 0)G="SUPERVISED_FINE_TUNING";if(G==="SUPERVISED_FINE_TUNING"){let Q=K($,["exportLastCheckpointOnly"]);if(F!==void 0&&Q!=null)w(F,["supervisedTuningSpec","exportLastCheckpointOnly"],Q)}else if(G==="PREFERENCE_TUNING"){let Q=K($,["exportLastCheckpointOnly"]);if(F!==void 0&&Q!=null)w(F,["preferenceOptimizationSpec","exportLastCheckpointOnly"],Q)}let z=K(A,["config","method"]);if(z===void 0)z="SUPERVISED_FINE_TUNING";if(z==="SUPERVISED_FINE_TUNING"){let Q=K($,["adapterSize"]);if(F!==void 0&&Q!=null)w(F,["supervisedTuningSpec","hyperParameters","adapterSize"],Q)}else if(z==="PREFERENCE_TUNING"){let Q=K($,["adapterSize"]);if(F!==void 0&&Q!=null)w(F,["preferenceOptimizationSpec","hyperParameters","adapterSize"],Q)}if(K($,["batchSize"])!==void 0)throw Error("batchSize parameter is not supported in Vertex AI.");if(K($,["learningRate"])!==void 0)throw Error("learningRate parameter is not supported in Vertex AI.");let H=K($,["labels"]);if(F!==void 0&&H!=null)w(F,["labels"],H);let U=K($,["beta"]);if(F!==void 0&&U!=null)w(F,["preferenceOptimizationSpec","hyperParameters","beta"],U);return J}function Bp0($,F){let A={},J=K($,["baseModel"]);if(J!=null)w(A,["baseModel"],J);let X=K($,["preTunedModel"]);if(X!=null)w(A,["preTunedModel"],X);let Y=K($,["trainingDataset"]);if(Y!=null)Ip0(Y);let W=K($,["config"]);if(W!=null)Qp0(W,A);return A}function wp0($,F){let A={},J=K($,["baseModel"]);if(J!=null)w(A,["baseModel"],J);let X=K($,["preTunedModel"]);if(X!=null)w(A,["preTunedModel"],X);let Y=K($,["trainingDataset"]);if(Y!=null)Tp0(Y,A,F);let W=K($,["config"]);if(W!=null)Kp0(W,A,F);return A}function qp0($,F){let A={},J=K($,["name"]);if(J!=null)w(A,["_url","name"],J);return A}function Lp0($,F){let A={},J=K($,["name"]);if(J!=null)w(A,["_url","name"],J);return A}function Ep0($,F,A){let J={},X=K($,["pageSize"]);if(F!==void 0&&X!=null)w(F,["_query","pageSize"],X);let Y=K($,["pageToken"]);if(F!==void 0&&Y!=null)w(F,["_query","pageToken"],Y);let W=K($,["filter"]);if(F!==void 0&&W!=null)w(F,["_query","filter"],W);return J}function Vp0($,F,A){let J={},X=K($,["pageSize"]);if(F!==void 0&&X!=null)w(F,["_query","pageSize"],X);let Y=K($,["pageToken"]);if(F!==void 0&&Y!=null)w(F,["_query","pageToken"],Y);let W=K($,["filter"]);if(F!==void 0&&W!=null)w(F,["_query","filter"],W);return J}function Np0($,F){let A={},J=K($,["config"]);if(J!=null)Ep0(J,A);return A}function Cp0($,F){let A={},J=K($,["config"]);if(J!=null)Vp0(J,A);return A}function Mp0($,F){let A={},J=K($,["sdkHttpResponse"]);if(J!=null)w(A,["sdkHttpResponse"],J);let X=K($,["nextPageToken"]);if(X!=null)w(A,["nextPageToken"],X);let Y=K($,["tunedModels"]);if(Y!=null){let W=Y;if(Array.isArray(W))W=W.map((Z)=>{return dh1(Z)});w(A,["tuningJobs"],W)}return A}function Pp0($,F){let A={},J=K($,["sdkHttpResponse"]);if(J!=null)w(A,["sdkHttpResponse"],J);let X=K($,["nextPageToken"]);if(X!=null)w(A,["nextPageToken"],X);let Y=K($,["tuningJobs"]);if(Y!=null){let W=Y;if(Array.isArray(W))W=W.map((Z)=>{return F61(Z)});w(A,["tuningJobs"],W)}return A}function Rp0($,F){let A={},J=K($,["name"]);if(J!=null)w(A,["model"],J);let X=K($,["name"]);if(X!=null)w(A,["endpoint"],X);return A}function Ip0($,F){let A={};if(K($,["gcsUri"])!==void 0)throw Error("gcsUri parameter is not supported in Gemini API.");if(K($,["vertexDatasetResource"])!==void 0)throw Error("vertexDatasetResource parameter is not supported in Gemini API.");let J=K($,["examples"]);if(J!=null){let X=J;if(Array.isArray(X))X=X.map((Y)=>{return Y});w(A,["examples","examples"],X)}return A}function Tp0($,F,A){let J={},X=K(A,["config","method"]);if(X===void 0)X="SUPERVISED_FINE_TUNING";if(X==="SUPERVISED_FINE_TUNING"){let W=K($,["gcsUri"]);if(F!==void 0&&W!=null)w(F,["supervisedTuningSpec","trainingDatasetUri"],W)}else if(X==="PREFERENCE_TUNING"){let W=K($,["gcsUri"]);if(F!==void 0&&W!=null)w(F,["preferenceOptimizationSpec","trainingDatasetUri"],W)}let Y=K(A,["config","method"]);if(Y===void 0)Y="SUPERVISED_FINE_TUNING";if(Y==="SUPERVISED_FINE_TUNING"){let W=K($,["vertexDatasetResource"]);if(F!==void 0&&W!=null)w(F,["supervisedTuningSpec","trainingDatasetUri"],W)}else if(Y==="PREFERENCE_TUNING"){let W=K($,["vertexDatasetResource"]);if(F!==void 0&&W!=null)w(F,["preferenceOptimizationSpec","trainingDatasetUri"],W)}if(K($,["examples"])!==void 0)throw Error("examples parameter is not supported in Vertex AI.");return J}function dh1($,F){let A={},J=K($,["sdkHttpResponse"]);if(J!=null)w(A,["sdkHttpResponse"],J);let X=K($,["name"]);if(X!=null)w(A,["name"],X);let Y=K($,["state"]);if(Y!=null)w(A,["state"],au1(Y));let W=K($,["createTime"]);if(W!=null)w(A,["createTime"],W);let Z=K($,["tuningTask","startTime"]);if(Z!=null)w(A,["startTime"],Z);let D=K($,["tuningTask","completeTime"]);if(D!=null)w(A,["endTime"],D);let G=K($,["updateTime"]);if(G!=null)w(A,["updateTime"],G);let z=K($,["description"]);if(z!=null)w(A,["description"],z);let H=K($,["baseModel"]);if(H!=null)w(A,["baseModel"],H);let U=K($,["_self"]);if(U!=null)w(A,["tunedModel"],Rp0(U));return A}function F61($,F){let A={},J=K($,["sdkHttpResponse"]);if(J!=null)w(A,["sdkHttpResponse"],J);let X=K($,["name"]);if(X!=null)w(A,["name"],X);let Y=K($,["state"]);if(Y!=null)w(A,["state"],au1(Y));let W=K($,["createTime"]);if(W!=null)w(A,["createTime"],W);let Z=K($,["startTime"]);if(Z!=null)w(A,["startTime"],Z);let D=K($,["endTime"]);if(D!=null)w(A,["endTime"],D);let G=K($,["updateTime"]);if(G!=null)w(A,["updateTime"],G);let z=K($,["error"]);if(z!=null)w(A,["error"],z);let H=K($,["description"]);if(H!=null)w(A,["description"],H);let U=K($,["baseModel"]);if(U!=null)w(A,["baseModel"],U);let Q=K($,["tunedModel"]);if(Q!=null)w(A,["tunedModel"],Q);let B=K($,["preTunedModel"]);if(B!=null)w(A,["preTunedModel"],B);let q=K($,["supervisedTuningSpec"]);if(q!=null)w(A,["supervisedTuningSpec"],q);let L=K($,["preferenceOptimizationSpec"]);if(L!=null)w(A,["preferenceOptimizationSpec"],L);let E=K($,["tuningDataStats"]);if(E!=null)w(A,["tuningDataStats"],E);let V=K($,["encryptionSpec"]);if(V!=null)w(A,["encryptionSpec"],V);let R=K($,["partnerModelTuningSpec"]);if(R!=null)w(A,["partnerModelTuningSpec"],R);let N=K($,["customBaseModel"]);if(N!=null)w(A,["customBaseModel"],N);let S=K($,["experiment"]);if(S!=null)w(A,["experiment"],S);let C=K($,["labels"]);if(C!=null)w(A,["labels"],C);let M=K($,["outputUri"]);if(M!=null)w(A,["outputUri"],M);let I=K($,["pipelineJob"]);if(I!=null)w(A,["pipelineJob"],I);let T=K($,["serviceAccount"]);if(T!=null)w(A,["serviceAccount"],T);let j=K($,["tunedModelDisplayName"]);if(j!=null)w(A,["tunedModelDisplayName"],j);let b=K($,["veoTuningSpec"]);if(b!=null)w(A,["veoTuningSpec"],b);return A}function jp0($,F){let A={},J=K($,["sdkHttpResponse"]);if(J!=null)w(A,["sdkHttpResponse"],J);let X=K($,["name"]);if(X!=null)w(A,["name"],X);let Y=K($,["metadata"]);if(Y!=null)w(A,["metadata"],Y);let W=K($,["done"]);if(W!=null)w(A,["done"],W);let Z=K($,["error"]);if(Z!=null)w(A,["error"],Z);return A}function Tu1($,F){let A={},J=K($,["gcsUri"]);if(J!=null)w(A,["validationDatasetUri"],J);let X=K($,["vertexDatasetResource"]);if(X!=null)w(A,["validationDatasetUri"],X);return A}class ch1 extends vA{constructor($){super();this.apiClient=$,this.list=async(F={})=>{return new jW(NX.PAGED_ITEM_TUNING_JOBS,(A)=>this.listInternal(A),await this.listInternal(F),F)},this.get=async(F)=>{return await this.getInternal(F)},this.tune=async(F)=>{var A;if(this.apiClient.isVertexAI())if(F.baseModel.startsWith("projects/")){let J={tunedModelName:F.baseModel};if((A=F.config)===null||A===void 0?void 0:A.preTunedModelCheckpointId)J.checkpointId=F.config.preTunedModelCheckpointId;let X=Object.assign(Object.assign({},F),{preTunedModel:J});return X.baseModel=void 0,await this.tuneInternal(X)}else{let J=Object.assign({},F);return await this.tuneInternal(J)}else{let J=Object.assign({},F),X=await this.tuneMldevInternal(J),Y="";if(X.metadata!==void 0&&X.metadata.tunedModel!==void 0)Y=X.metadata.tunedModel;else if(X.name!==void 0&&X.name.includes("/operations/"))Y=X.name.split("/operations/")[0];return{name:Y,state:x01.JOB_STATE_QUEUED}}}}async getInternal($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=Lp0($);return W=m1("{name}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{return F61(G)})}else{let D=qp0($);return W=m1("{name}",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{return dh1(G)})}}async listInternal($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=Cp0($);return W=m1("tuningJobs",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=Pp0(G),H=new m01;return Object.assign(H,z),H})}else{let D=Np0($);return W=m1("tunedModels",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"GET",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=Mp0(G),H=new m01;return Object.assign(H,z),H})}}async cancel($){var F,A,J,X;let Y,W="",Z={};if(this.apiClient.isVertexAI()){let D=zp0($);return W=m1("{name}:cancel",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=Up0(G),H=new d01;return Object.assign(H,z),H})}else{let D=Gp0($);return W=m1("{name}:cancel",D._url),Z=D._query,delete D._url,delete D._query,Y=this.apiClient.request({path:W,queryParams:Z,body:JSON.stringify(D),httpMethod:"POST",httpOptions:(J=$.config)===null||J===void 0?void 0:J.httpOptions,abortSignal:(X=$.config)===null||X===void 0?void 0:X.abortSignal}).then((G)=>{return G.json().then((z)=>{let H=z;return H.sdkHttpResponse={headers:G.headers},H})}),Y.then((G)=>{let z=Hp0(G),H=new d01;return Object.assign(H,z),H})}}async tuneInternal($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI()){let W=wp0($,$);return X=m1("tuningJobs",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json().then((D)=>{let G=D;return G.sdkHttpResponse={headers:Z.headers},G})}),J.then((Z)=>{return F61(Z)})}else throw Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal($){var F,A;let J,X="",Y={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");else{let W=Bp0($);return X=m1("tunedModels",W._url),Y=W._query,delete W._url,delete W._query,J=this.apiClient.request({path:X,queryParams:Y,body:JSON.stringify(W),httpMethod:"POST",httpOptions:(F=$.config)===null||F===void 0?void 0:F.httpOptions,abortSignal:(A=$.config)===null||A===void 0?void 0:A.abortSignal}).then((Z)=>{return Z.json().then((D)=>{let G=D;return G.sdkHttpResponse={headers:Z.headers},G})}),J.then((Z)=>{return jp0(Z)})}}}var lh1=8388608,ph1=3,ih1=1000,nh1=2,IW="x-goog-upload-status";async function Op0($,F,A){var J;let X=await rh1($,F,A),Y=await(X===null||X===void 0?void 0:X.json());if(((J=X===null||X===void 0?void 0:X.headers)===null||J===void 0?void 0:J[IW])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");return Y.file}async function Sp0($,F,A){var J;let X=await rh1($,F,A),Y=await(X===null||X===void 0?void 0:X.json());if(((J=X===null||X===void 0?void 0:X.headers)===null||J===void 0?void 0:J[IW])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");let W=J61(Y),Z=new C_;return Object.assign(Z,W),Z}async function rh1($,F,A){var J,X;let Y=0,W=0,Z=new oQ(new Response),D="upload";Y=$.size;while(W<Y){let G=Math.min(lh1,Y-W),z=$.slice(W,W+G);if(W+G>=Y)D+=", finalize";let H=0,U=ih1;while(H<ph1){if(Z=await A.request({path:"",body:z,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:F,headers:{"X-Goog-Upload-Command":D,"X-Goog-Upload-Offset":String(W),"Content-Length":String(G)}}}),(J=Z===null||Z===void 0?void 0:Z.headers)===null||J===void 0?void 0:J[IW])break;H++,await ah1(U),U=U*nh1}if(W+=G,((X=Z===null||Z===void 0?void 0:Z.headers)===null||X===void 0?void 0:X[IW])!=="active")break;if(Y<=W)throw Error("All content has been uploaded, but the upload status is not finalized.")}return Z}async function _p0($){return{size:$.size,type:$.type}}function ah1($){return new Promise((F)=>setTimeout(F,$))}class th1{async stat($){let F={size:0,type:void 0};if(typeof $==="string"){let A=await N_.stat($);return F.size=A.size,F.type=this.inferMimeType($),F}else return await _p0($)}async upload($,F,A){if(typeof $==="string")return await this.uploadFileFromPath($,F,A);else return Op0($,F,A)}async uploadToFileSearchStore($,F,A){if(typeof $==="string")return await this.uploadFileToFileSearchStoreFromPath($,F,A);else return Sp0($,F,A)}inferMimeType($){let F=$.slice($.lastIndexOf(".")+1);return{aac:"audio/aac",abw:"application/x-abiword",arc:"application/x-freearc",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bmp:"image/bmp",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gz:"application/gzip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz+xml",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",png:"image/png",pdf:"application/pdf",php:"application/x-httpd-php",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2","7z":"application/x-7z-compressed"}[F.toLowerCase()]}async uploadFileFromPath($,F,A){var J;let X=await this.uploadFileFromPathInternal($,F,A),Y=await(X===null||X===void 0?void 0:X.json());if(((J=X===null||X===void 0?void 0:X.headers)===null||J===void 0?void 0:J[IW])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");return Y.file}async uploadFileToFileSearchStoreFromPath($,F,A){var J;let X=await this.uploadFileFromPathInternal($,F,A),Y=await(X===null||X===void 0?void 0:X.json());if(((J=X===null||X===void 0?void 0:X.headers)===null||J===void 0?void 0:J[IW])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");let W=J61(Y),Z=new C_;return Object.assign(Z,W),Z}async uploadFileFromPathInternal($,F,A){var J,X;let Y=0,W=0,Z=new oQ(new Response),D="upload",G,z=Su1.basename($);try{if(G=await N_.open($,"r"),!G)throw Error("Failed to open file");Y=(await G.stat()).size;while(W<Y){let H=Math.min(lh1,Y-W);if(W+H>=Y)D+=", finalize";let U=new Uint8Array(H),{bytesRead:Q}=await G.read(U,0,H,W);if(Q!==H)throw Error(`Failed to read ${H} bytes from file at offset ${W}. bytes actually read: ${Q}`);let B=new Blob([U]),q=0,L=ih1;while(q<ph1){if(Z=await A.request({path:"",body:B,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:F,headers:{"X-Goog-Upload-Command":D,"X-Goog-Upload-Offset":String(W),"Content-Length":String(Q),"X-Goog-Upload-File-Name":z}}}),(J=Z===null||Z===void 0?void 0:Z.headers)===null||J===void 0?void 0:J[IW])break;q++,await ah1(L),L=L*nh1}if(W+=Q,((X=Z===null||Z===void 0?void 0:Z.headers)===null||X===void 0?void 0:X[IW])!=="active")break;if(Y<=W)throw Error("All content has been uploaded, but the upload status is not finalized.")}return Z}finally{if(G)await G.close()}}}var kp0="gl-node/";class R61{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let $=this.httpOptions;if($===null||$===void 0?void 0:$.extraBody)console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let F=new w9({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:$===null||$===void 0?void 0:$.timeout});return this._interactions=F.interactions,this._interactions}constructor($){var F,A,J,X,Y,W;if(($.project||$.location)&&$.apiKey)throw Error("Project/location and API key are mutually exclusive in the client initializer.");this.vertexai=(A=(F=$.vertexai)!==null&&F!==void 0?F:bp0("GOOGLE_GENAI_USE_VERTEXAI"))!==null&&A!==void 0?A:!1;let Z=gp0(),D=zG("GOOGLE_CLOUD_PROJECT"),G=zG("GOOGLE_CLOUD_LOCATION");if(this.apiKey=(J=$.apiKey)!==null&&J!==void 0?J:Z,this.project=(X=$.project)!==null&&X!==void 0?X:D,this.location=(Y=$.location)!==null&&Y!==void 0?Y:G,!this.vertexai&&!this.apiKey)throw Error("API key must be set when using the Gemini API.");if($.vertexai){if((W=$.googleAuthOptions)===null||W===void 0?void 0:W.credentials)console.debug("The user provided Google Cloud credentials will take precedence over the API key from the environment variable."),this.apiKey=void 0;if((D||G)&&$.apiKey)console.debug("The user provided Vertex AI API key will take precedence over the project/location from the environment variables."),this.project=void 0,this.location=void 0;else if(($.project||$.location)&&Z)console.debug("The user provided project/location will take precedence over the API key from the environment variables."),this.apiKey=void 0;else if((D||G)&&Z)console.debug("The project/location from the environment variables will take precedence over the API key from the environment variables."),this.apiKey=void 0;if(!this.location&&!this.apiKey)this.location="global"}let z=Uu0($.httpOptions,$.vertexai,zG("GOOGLE_VERTEX_BASE_URL"),zG("GOOGLE_GEMINI_BASE_URL"));if(z)if($.httpOptions)$.httpOptions.baseUrl=z;else $.httpOptions={baseUrl:z};this.apiVersion=$.apiVersion,this.httpOptions=$.httpOptions;let H=new yh1({apiKey:this.apiKey,googleAuthOptions:$.googleAuthOptions});this.apiClient=new qh1({auth:H,project:this.project,location:this.location,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:kp0+process.version,uploader:new th1,downloader:new uh1}),this.models=new Ph1(this.apiClient),this.live=new Ch1(this.apiClient,H,new hh1),this.batches=new Xh1(this.apiClient),this.chats=new Zh1(this.models,this.apiClient),this.caches=new Yh1(this.apiClient),this.files=new Gh1(this.apiClient),this.operations=new Rh1(this.apiClient),this.authTokens=new Ih1(this.apiClient),this.tunings=new ch1(this.apiClient),this.fileSearchStores=new jh1(this.apiClient)}}function zG($){var F,A,J;return(J=(A=(F=process===null||process===void 0?void 0:process.env)===null||F===void 0?void 0:F[$])===null||A===void 0?void 0:A.trim())!==null&&J!==void 0?J:void 0}function bp0($){return xp0(zG($))}function xp0($){if($===void 0)return!1;return $.toLowerCase()==="true"}function gp0(){let $=zG("GOOGLE_API_KEY"),F=zG("GEMINI_API_KEY");if($&&F)console.warn("Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY.");return $||F||void 0}var fp0=new R61({});async function I61($){return(await fp0.models.generateContent({model:"gemini-2.5-flash-lite",contents:$})).text}async function sh1($,F){let A=await KX.findById($),J=A?.ai_generation_limit||10;if((A?.ai_generation_count||0)>=J)throw Error("Limit reached");let Y=`
    You are an expert habit coach, behavioral psychologist, and wellness guide.

    A user\u2019s primary goal is:
    "${F}"

    Your task is to generate exactly 20 DAILY habits that strongly and directly support this goal.

    STRICT REQUIREMENTS (DO NOT IGNORE):
    1. Every habit must be:
       - Small and realistic (5\u201330 minutes OR a clearly measurable quantity)
       - Actionable and concrete (NO vague wording)
       - Easy to complete daily

    2. Each habit MUST include:
       - A specific number, duration, or count
         (e.g. "drink 3 liters of water", "walk 7,000 steps", "meditate for 8 minutes")
       - A clear action that can be tracked as done/not done

    3. The habits must be distributed across these categories:
       - Physical / Practical (fitness, health, productivity)
       - Mental focus / discipline
       - Spiritual or inner growth that is closely related to the goal
         (e.g. mindfulness, gratitude, intention-setting, self-awareness)
       Spiritual habits should feel supportive, grounded, and practical \u2014 NOT abstract or religious.

    4. Every habit must clearly relate back to the user's goal.
       If a habit does not support the goal, do NOT include it.

    5. Avoid generic phrases such as:
       - "drink more water"
       - "exercise regularly"
       - "be mindful"
       - "stay positive"
       Replace them with precise actions.

    OUTPUT FORMAT:
    Return ONLY a valid JSON array.
    No markdown.
    No explanations.

    Each object must have exactly these fields:
    - "title": short habit name (2\u20136 words)
    - "category": one of ["Health", "Fitness", "Wellness", "Learning", "Productivity", "Spiritual"]
    - "icon": one of ["water", "walk", "body", "brain", "mind", "sleep", "food", "listen", "write", "activity"]

    EXAMPLE QUALITY (do NOT reuse):
    - "Drink 3 liters of water"
    - "Stretch hips for 10 minutes"
    - "Write one intention sentence"
    - "Walk 7,000 steps outdoors"
    - "Meditate with breath for 6 minutes"
`,W=await I61(Y);console.log(W);let Z=(W||"").trim().replace(/```json|```/g,"");return console.log(Z),await KX.findByIdAndUpdate($,{$inc:{ai_generation_count:1}}),JSON.parse(Z)}async function oh1($,F){let A=await KX.findById($);if(!A||(A.ai_generation_count||0)>=(A.ai_generation_limit||10))throw Error("Limit reached");let J=await Q11.findOne({workspace_id:F,type:"ai_insight"});if(J&&new Date().getTime()-J.created_at.getTime()<86400000)return J.data;let X=await H7.find({workspace_id:F}).limit(20);if(X.length===0)return{insight:"Start adding habits!",tips:["Add a habit"]};let Y=X.map((Z)=>({title:Z.title,completed:Z.completion_count,skipped:Z.skip_count})),W="";try{let D=(await I61(W)||"").trim().replace(/```json|```/g,""),G=JSON.parse(D);return await Q11.updateOne({workspace_id:F,type:"ai_insight"},{data:G,created_at:new Date},{upsert:!0}),await KX.findByIdAndUpdate($,{$inc:{ai_generation_count:1}}),G}catch(Z){return{insight:"Analysis unavailable",tips:["Keep going!"]}}}async function eh1($){let A=(await H7.find({workspace_id:$})).map((W)=>W._id),J=[];for(let W=6;W>=0;W--){let Z=new Date;Z.setDate(Z.getDate()-W),J.push(Z.toISOString().split("T")[0])}let X=await BX.aggregate([{$match:{habit_id:{$in:A},date:{$in:J}}},{$group:{_id:"$date",completed:{$sum:{$cond:[{$eq:["$status",1]},1,0]}},skipped:{$sum:{$cond:[{$eq:["$status",0]},1,0]}}}}]),Y={};return X.forEach((W)=>{Y[W._id]=W}),J.map((W)=>({date:W,completed:Y[W]?.completed||0,skipped:Y[W]?.skipped||0}))}var $m1=($)=>$.post("/generate-suggestions",async({body:F,u:A,set:J})=>{if(!A)return J.status=401,"Unauthorized";try{return await sh1(A.id,F.goal)}catch(X){if(X.message==="Limit reached")J.status=403;else J.statu=503;return X.message}},{body:W1.Object({goal:W1.String()})}).get("/ai/analytics",async({headers:F,u:A,set:J})=>{if(!A)return J.status=401,"Unauthorized";let X=F["x-workspace-id"];if(!X)X=(await D2.findOne({user_id:A.id}))?._id;try{return await oh1(A.id,X)}catch(Y){if(Y.message==="Limit reached")J.status=403;else J.status=503;return Y.message}}).get("/analytics/weekly/",async({headers:F,u:A,set:J})=>{if(!A)return[];let X=F["x-workspace-id"];if(!X)X=(await D2.findOne({user_id:A.id}))?._id;return await eh1(X)});function Fm1(){let $=new D7,F=LO1();return console.log(`Better auth domain: ${tF.BETTER_AUTH_DOMAIN_URL}`),$.use(Lx1({origin:[tF.BETTER_AUTH_DOMAIN_URL,"http://localhost:3000","http://localhost:5173"],credentials:!0,methods:["GET","POST","PUT","DELETE","OPTIONS"],allowedHeaders:["Content-Type","Authorization","x-workspace-id"]})).mount(F.handler),Vx1($),Cx1($),Px1($),jx1($),$m1($),$.get("/",()=>({status:"Elysia fired up"})),$}var yp0=async()=>{let $=await JN1();qO1($),Fm1().onRequest(({request:A})=>{console.log(`[${new Date().toISOString()}] ${A.method} ${new URL(A.url).pathname}`)}).listen(3000,({hostname:A,port:J})=>{console.log(`Elysia running on http://${A}:${J}`)})};yp0();
